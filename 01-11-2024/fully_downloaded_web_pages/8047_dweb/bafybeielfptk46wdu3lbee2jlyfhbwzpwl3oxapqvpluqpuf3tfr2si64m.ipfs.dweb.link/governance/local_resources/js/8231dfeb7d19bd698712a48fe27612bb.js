(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5559],{15446:function(e,n,t){"use strict";t.d(n,{O:function(){return i}});var r=t(30120),o=t(64288),a=t(85893),i=function(e){var n=e.children;return(0,a.jsx)(r.Z,{sx:{display:"flex",flexDirection:"column",flex:1,mt:{xs:"-32px",lg:"-46px",xl:"-44px",xxl:"-48px"}},children:(0,a.jsx)(o.Z,{children:n})})}},3765:function(e,n,t){"use strict";t.d(n,{p:function(){return l}});var r=t(49501),o=t(75084),a=t(5152),i=t(26074),c=t(78371),s=t(57609),u=t(85893),p=(0,a.default)((function(){return Promise.resolve().then(t.bind(t,58294)).then((function(e){return e.WalletModal}))}),{loadableGenerated:{webpack:function(){return[58294]}}}),l=function(e){var n=e.funnel,t=(0,i.q)().setWalletModalOpen,a=(0,c.Y)((function(e){return e.trackEvent}));return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.Z,{variant:"gradient",onClick:function(){a(s.Bp.CONNECT_WALLET,{funnel:n}),t(!0)},children:(0,u.jsx)(r.cC,{id:"Connect wallet"})}),(0,u.jsx)(p,{})]})}},41024:function(e,n,t){"use strict";t.d(n,{J:function(){return d},B:function(){return h}});var r=t(59499),o=t(4730),a=t(1279),i=t(29630),c=t(85893),s=["value","symbol","visibleDecimals","compact","percent","symbolsVariant","symbolsColor","roundDown","compactThreshold"];function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var l=["","K","M","B","T","P","E","Z","Y"],d=function(e){var n=e.value,t=e.visibleDecimals,r=void 0===t?2:t,o=e.roundDown,i=e.compactThreshold,c=(0,a.hE)(n),s=c.toFixed(0).length;i&&Number(n)<=i&&(s=0);var u=Math.min(Math.floor(s?(s-1)/3:0),l.length-1),p=l[u],d=(0,a.pV)(c,3*u).toNumber();return o&&(d=Math.trunc(Number(d)*Math.pow(10,r))/Math.pow(10,r)),{prefix:new Intl.NumberFormat("en-US",{maximumFractionDigits:r,minimumFractionDigits:r}).format(d),postfix:p}};function f(e){var n=e.value,t=e.visibleDecimals,r=e.roundDown,o=d({value:n,visibleDecimals:t,roundDown:r}),a=o.prefix,i=o.postfix;return(0,c.jsxs)(c.Fragment,{children:[a,i]})}function h(e){var n=e.value,t=e.symbol,r=e.visibleDecimals,a=e.compact,u=e.percent,l=e.symbolsVariant,d=e.symbolsColor,h=e.roundDown,b=e.compactThreshold,v=(0,o.Z)(e,s),m=u?100*Number(n):Number(n),x=null!==r&&void 0!==r?r:0;0===m?x=0:void 0===r&&(x=m>1||u||"USD"===t?2:7);var y=Math.pow(10,-x),g=0!==m&&Math.abs(m)<Math.abs(y),O=g?y:m,j=!1!==a&&(a||m>99999);return h&&!j&&(O=Math.trunc(Number(O)*Math.pow(10,x))/Math.pow(10,x)),(0,c.jsxs)(i.Z,p(p({},v),{},{sx:p({display:"inline-flex",flexDirection:"row",alignItems:"center",position:"relative"},v.sx),noWrap:!0,children:[g&&(0,c.jsx)(i.Z,{component:"span",sx:{mr:.5},variant:l||v.variant,color:d||"text.secondary",children:"<"}),"usd"===(null===t||void 0===t?void 0:t.toLowerCase())&&!u&&(0,c.jsx)(i.Z,{component:"span",sx:{mr:.5},variant:l||v.variant,color:d||"text.secondary",children:"$"}),j?(0,c.jsx)(f,{value:O,visibleDecimals:x,roundDown:h,compactThreshold:b}):new Intl.NumberFormat("en-US",{maximumFractionDigits:x,minimumFractionDigits:x}).format(O),u&&(0,c.jsx)(i.Z,{component:"span",sx:{ml:.5},variant:l||v.variant,color:d||"text.secondary",children:"%"}),"usd"!==(null===t||void 0===t?void 0:t.toLowerCase())&&"undefined"!==typeof t&&(0,c.jsx)(i.Z,{component:"span",sx:{ml:.5},variant:l||v.variant,color:d||"text.secondary",children:t})]}))}},92391:function(e,n,t){"use strict";t.d(n,{X:function(){return l}});var r=t(59499),o=t(4730),a=t(30120),i=t(29630),c=t(85893),s=["caption","children","captionVariant","captionColor","align"];function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function p(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var l=function(e){var n=e.caption,t=e.children,r=e.captionVariant,u=void 0===r?"secondary16":r,l=e.captionColor,d=e.align,f=void 0===d?"center":d,h=(0,o.Z)(e,s);return(0,c.jsxs)(a.Z,p(p({},h),{},{sx:p({display:"flex",alignItems:f,justifyContent:"space-between"},h.sx),children:[n&&(0,c.jsx)(i.Z,{component:"div",variant:u,color:l,sx:{mr:2},children:n}),t]}))}},7144:function(e,n,t){"use strict";t.d(n,{Hx:function(){return w},Gm:function(){return k},WB:function(){return I},xf:function(){return B},Wu:function(){return H}});var r,o,a,i=t(59499),c=t(17674),s=t(50029),u=t(71383),p=t(87794),l=t.n(p),d=t(59403),f=t(57218),h=t(80108),b=t(88622),v=t(72399),m=t(3483),x=t(46192),y=t(8430),g=t(38776);function O(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function j(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?O(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var w="\n  id\n  creator\n  accessLevel\n  ipfsHash\n  proposalMetadata {\n    id\n    title\n    rawContent\n  }\n  state\n  votingPortal {\n    id\n    votingMachineChainId\n    votingMachine\n    enabled\n  }\n  votingConfig {\n    id\n    cooldownBeforeVotingStart\n    votingDuration\n    yesThreshold\n    yesNoDifferential\n    minPropositionPower\n  }\n  payloads {\n    id\n    chainId\n    accessLevel\n    payloadsController\n  }\n  transactions {\n    id\n    created {\n      id\n      blockNumber\n      timestamp\n    }\n    active {\n      id\n      blockNumber\n      timestamp\n    }\n    queued {\n      id\n      blockNumber\n      timestamp\n    }\n    failed {\n      id\n      blockNumber\n      timestamp\n    }\n    executed {\n      id\n      blockNumber\n      timestamp\n    }\n    canceled {\n      id\n      blockNumber\n      timestamp\n    }\n  }\n  votingDuration\n  snapshotBlockHash\n  votes {\n    id\n    forVotes\n    againstVotes\n  }\n  constants {\n    id\n    precisionDivider\n    cooldownPeriod\n    expirationTime\n    cancellationFee\n  }\n",P=(0,h.Ps)(r||(r=(0,u.Z)(["\n  query getProposalsById($ids: [String!]!) {\n    proposals(where: { id_in: $ids }) {\n      ","\n    }\n  }\n"])),w),Z=(0,h.Ps)(o||(o=(0,u.Z)(["\n  query getProposals($first: Int!, $skip: Int!, $stateFilter: Int!) {\n    proposals(orderBy: proposalId, orderDirection: desc, first: $first, skip: $skip, where: { state: $stateFilter }) {\n      ","\n    }\n  }\n"])),w),D=(0,h.Ps)(a||(a=(0,u.Z)(["\n  query getProposals($first: Int!, $skip: Int!, $stateFilter: Int) {\n    proposals(orderBy: proposalId, orderDirection: desc, first: $first, skip: $skip) {\n      ","\n    }\n  }\n"])),w),k=function(){var e=(0,s.Z)(l().mark((function e(n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.proposalMetadata){e.next=4;break}return e.abrupt("return",(0,m.md)(n.ipfsHash,x.CA));case 4:return e.abrupt("return",(0,m.fC)(n.proposalMetadata.rawContent,n.ipfsHash));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),C=function(e,n){return(0,h.ZP)(x.B2.governanceCoreSubgraphUrl,D,{first:e,skip:n})},E=function(e,n,t){return(0,h.ZP)(x.B2.governanceCoreSubgraphUrl,Z,{first:e,skip:n,stateFilter:t})},F=function(e){return(0,h.ZP)(x.B2.governanceCoreSubgraphUrl,P,{ids:e})},S=10;function I(e){return M.apply(this,arguments)}function M(){return(M=(0,s.Z)(l().mark((function e(n){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F(n);case 2:return t=e.sent,e.abrupt("return",t.proposals);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,n){return V.apply(this,arguments)}function V(){return(V=(0,s.Z)(l().mark((function e(n,t){var r,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,E(S,n*S,t);case 3:return r=e.sent,e.abrupt("return",r.proposals);case 5:return e.next=7,C(S,n*S);case 7:return o=e.sent,e.abrupt("return",o.proposals);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e,n,t){return $.apply(this,arguments)}function $(){return($=(0,s.Z)(l().mark((function e(n,t,r){var o,a,i,s,u,p,d,h,m;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=null!==(o=n.map((function(e){return{id:+e.id,snapshotBlockHash:e.snapshotBlockHash||f.R,chainId:+e.votingPortal.votingMachineChainId,votingMachineAddress:e.votingPortal.votingMachine}})))&&void 0!==o?o:[],i=n.map((function(e){return e.payloads.map((function(e){return{payloadControllerAddress:e.payloadsController,payloadId:+e.id.split("_")[1],chainId:+e.chainId}}))||[]})).flat(),e.next=4,Promise.all([Promise.all(n.map(k)),t.getProposalsData(a),r.getMultiChainPayloadsData(i)]);case 4:return s=e.sent,u=(0,c.Z)(s,3),p=u[0],d=u[1],h=u[2],m=n.map((function(e,n){var t=d.find((function(n){return n.proposalData.id===e.id})),r=h.filter((function(n){return e.payloads.find((function(e){return e.id.split("_")[1]===n.id&&+e.chainId===n.chainId}))}));(0,g.Z)(t,"Voting machine data not found");var o=(0,v.m9)(e,t,r),a=j(j({},e),{},{votes:{forVotes:t.proposalData.forVotes,againstVotes:t.proposalData.againstVotes},proposalMetadata:p[n]}),i=(0,v._P)(a);return{subgraphProposal:a,lifecycleState:o,badgeState:(0,b.IT)(o,i),votingMachineData:t,payloadsData:r,votingInfo:i}})),e.abrupt("return",{proposals:m});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var H=function(e){var n=(0,y.z)(),t=n.votingMachineSerivce,r=n.governanceV3Service;return(0,d.N)({queryFn:function(){var n=(0,s.Z)(l().mark((function n(o){var a,i,c;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=o.pageParam,i=void 0===a?0:a,c=[],!e){n.next=8;break}return n.next=5,N(i,e);case 5:c=n.sent,n.next=11;break;case 8:return n.next=10,N(i);case 10:c=n.sent;case 11:return n.abrupt("return",B(c,t,r));case 12:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),queryKey:["proposals",e],refetchOnMount:!1,refetchOnReconnect:!1,getNextPageParam:function(e,n){if(!(e.proposals.length<S))return n.length}})}},88622:function(e,n,t){"use strict";t.d(n,{zS:function(){return r},IT:function(){return h},Ul:function(){return v},KS:function(){return m},Sk:function(){return x}});var r,o=t(59499),a=t(81719),i=t(20525),c=t(41796),s=t(91655),u=t(38776),p=t(72399),l=t(85893);function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function f(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}!function(e){e.Created="Created",e.OpenForVoting="Open for voting",e.Passed="Passed",e.Failed="Failed",e.Executed="Executed",e.Cancelled="Cancelled",e.Expired="Expired"}(r||(r={}));var h=function(e,n){switch(e){case p.u6.Null:(0,u.Z)(!1,"Proposal state is null");case p.u6.Created:return r.Created;case p.u6.OpenForVoting:return r.OpenForVoting;case p.u6.VotingClosed:return n.isPassing?r.Passed:r.Failed;case p.u6.Executed:return r.Executed;case p.u6.Cancelled:return r.Cancelled;case p.u6.Expired:return r.Expired}},b=(0,a.ZP)("span")((function(e){var n,t=e.theme,a=e.state,s=(n={},(0,o.Z)(n,r.Created,t.palette.primary.light),(0,o.Z)(n,r.OpenForVoting,t.palette.success.main),(0,o.Z)(n,r.Passed,t.palette.success.main),(0,o.Z)(n,r.Executed,t.palette.success.main),(0,o.Z)(n,r.Cancelled,t.palette.error.main),(0,o.Z)(n,r.Expired,t.palette.error.main),(0,o.Z)(n,r.Failed,t.palette.error.main),n)[a]||"#000";return(0,i.Z)(f(f({},t.typography.subheader2),{},{color:s,border:"1px solid",borderColor:(0,c.Fq)(s,.5),py:.5,px:2,borderRadius:1,display:"inline-flex",alignItems:"center"}))}));function v(e){var n=e.state;return e.loading||!n?(0,l.jsx)(s.Z,{width:70}):(0,l.jsx)(b,{state:n,children:n})}var m=function(){return Object.values(r)},x=function(e){switch(e){case"Created":return r.Created;case"Open for voting":return r.OpenForVoting;case"Success":return r.Passed;case"Executed":return r.Executed;case"Cancelled":return r.Cancelled;case"Expired":return r.Expired;case"Failed":return r.Failed}}},74663:function(e,n,t){"use strict";t.d(n,{A:function(){return x}});var r=t(59499),o=t(4730),a=t(49501),i=t(81719),c=t(20525),s=t(30120),u=t(29630),p=t(91655),l=t(41024),d=t(85893),f=["percent","yae","votes","loading","compact"];function h(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function b(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?h(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var v=(0,i.ZP)("div")((0,c.Z)({position:"relative",width:"100%",height:"8px",bgcolor:"divider",display:"block",borderRadius:"6px"})),m=(0,i.ZP)("span",{shouldForwardProp:function(e){return"yae"!==e&&"percent"!==e}})((function(e){var n=e.percent,t=e.yae;return(0,c.Z)({position:"absolute",top:0,left:0,width:"".concat(100*n,"%"),maxWidth:"100%",height:"8px",bgcolor:t?"success.main":"error.light",display:"block",borderRadius:"6px"})}));function x(e){var n=e.percent,t=e.yae,r=e.votes,i=e.loading,c=e.compact,h=(0,o.Z)(e,f);return(0,d.jsxs)(s.Z,b(b({},h),{},{children:[(0,d.jsxs)(s.Z,{sx:{display:"flex"},children:[(0,d.jsx)(u.Z,{variant:"description",sx:{mr:2},children:t?(0,d.jsx)(a.cC,{id:"YAE"}):(0,d.jsx)(a.cC,{id:"NAY"})}),i?(0,d.jsx)(u.Z,{variant:"secondary14",sx:{flexGrow:1,lineHeight:"1rem"},children:(0,d.jsx)(p.Z,{width:40})}):(0,d.jsxs)(s.Z,{component:"span",sx:{flexGrow:1},children:[(0,d.jsx)(l.B,{value:r,visibleDecimals:0,sx:{mr:1},variant:"secondary14",roundDown:!0,compact:c}),!c&&(0,d.jsx)(u.Z,{variant:"description",component:"span",color:"text.secondary",children:"AAVE"})]}),i?(0,d.jsx)(u.Z,{variant:"caption",children:(0,d.jsx)(p.Z,{width:40})}):(0,d.jsx)(l.B,{value:n,percent:!0,variant:"caption",color:"text.secondary"})]}),i?(0,d.jsx)(p.Z,{variant:"rectangular",height:8,sx:{borderRadius:"6px"}}):(0,d.jsx)(v,{children:(0,d.jsx)(m,{percent:n,yae:t})})]}))}},3483:function(e,n,t){"use strict";t.d(n,{md:function(){return x},fC:function(){return g}});var r=t(59499),o=t(50029),a=t(87794),i=t.n(a),c=t(56371),s=t(9675),u=t.n(s),p=t(63144),l=t.n(p),d=t(46192),f=t(48764).Buffer;function h(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function b(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?h(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var v={};function m(e,n){return"".concat(n,"/").concat(e)}function x(e,n){return y.apply(this,arguments)}function y(){return(y=(0,o.Z)(i().mark((function e(n,t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j(n,t);case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),console.groupCollapsed("Fetching proposal metadata from IPFS..."),console.info("failed with",t),t!==d.CA){e.next=15;break}return console.info("retrying with",d.b2),console.error(e.t0),console.groupEnd(),e.abrupt("return",x(n,d.b2));case 15:throw console.info("exiting"),console.error(e.t0),console.groupEnd(),e.t0;case 19:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function g(e,n){return O.apply(this,arguments)}function O(){return(O=(0,o.Z)(i().mark((function e(n,t){var r,o,a,s,p,l,d,h;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.startsWith("0x")?c.base58.encode(f.from("1220".concat(t.slice(2)),"hex")):t,!v[r]){e.next=3;break}return e.abrupt("return",v[r]);case 3:return e.prev=3,e.next=6,JSON.parse(n);case 6:o=e.sent,a=u()(o.description),s=a.content,p=a.data,v[r]=b(b({},o),{},{ipfsHash:r,description:s},p),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),l=u()(n),d=l.content,h=l.data,v[r]=b(b({},h),{},{ipfsHash:r,description:d});case 15:return e.abrupt("return",v[r]);case 16:case"end":return e.stop()}}),e,null,[[3,11]])})))).apply(this,arguments)}function j(e,n){return w.apply(this,arguments)}function w(){return(w=(0,o.Z)(i().mark((function e(n,t){var r,o,a,s,p,d,h,x,y,g,O;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.startsWith("0x")?c.base58.encode(f.from("1220".concat(n.slice(2)),"hex")):n,!v[r]){e.next=3;break}return e.abrupt("return",v[r]);case 3:return e.next=5,l()(m(r,t));case 5:if((o=e.sent).ok){e.next=8;break}throw Error("Fetch not working");case 8:return e.next=10,o.clone();case 10:return a=e.sent,e.prev=11,e.next=14,o.json();case 14:s=e.sent,p=u()(s.description),d=p.content,h=p.data,v[r]=b(b({},s),{},{ipfsHash:r,description:d},h),e.next=26;break;case 19:return e.prev=19,e.t0=e.catch(11),e.next=23,a.text();case 23:x=e.sent,y=u()(x),g=y.content,O=y.data,v[r]=b(b({},O),{},{ipfsHash:r,description:g});case 26:return e.abrupt("return",v[r]);case 27:case"end":return e.stop()}}),e,null,[[11,19]])})))).apply(this,arguments)}},33596:function(){}}]);