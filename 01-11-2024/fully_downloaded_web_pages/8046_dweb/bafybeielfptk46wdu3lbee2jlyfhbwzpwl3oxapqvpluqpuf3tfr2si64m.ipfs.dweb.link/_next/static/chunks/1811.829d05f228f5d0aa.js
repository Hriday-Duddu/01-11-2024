"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1811],{87054:function(e,t,r){r.d(t,{Z:function(){return h}});var n=r(63366),a=r(87462),o=r(67294),s=r(86010),i=r(94780),l=r(41796),u=r(83187),c=r(36622),d=r(78884),p=r(81719),m=r(34867);function b(e){return(0,m.Z)("MuiToggleButton",e)}var y=(0,r(1588).Z)("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge"]),f=r(85893);const v=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],g=(0,p.ZP)(u.Z,{name:"MuiToggleButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`size${(0,c.Z)(r.size)}`]]}})((({theme:e,ownerState:t})=>{let r,n="standard"===t.color?e.palette.text.primary:e.palette[t.color].main;return e.vars&&(n="standard"===t.color?e.vars.palette.text.primary:e.vars.palette[t.color].main,r="standard"===t.color?e.vars.palette.text.primaryChannel:e.vars.palette[t.color].mainChannel),(0,a.Z)({},e.typography.button,{borderRadius:(e.vars||e).shape.borderRadius,padding:11,border:`1px solid ${(e.vars||e).palette.divider}`,color:(e.vars||e).palette.action.active},t.fullWidth&&{width:"100%"},{[`&.${y.disabled}`]:{color:(e.vars||e).palette.action.disabled,border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,l.Fq)(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${y.selected}`]:{color:n,backgroundColor:e.vars?`rgba(${r} / ${e.vars.palette.action.selectedOpacity})`:(0,l.Fq)(n,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${r} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:(0,l.Fq)(n,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${r} / ${e.vars.palette.action.selectedOpacity})`:(0,l.Fq)(n,e.palette.action.selectedOpacity)}}}},"small"===t.size&&{padding:7,fontSize:e.typography.pxToRem(13)},"large"===t.size&&{padding:15,fontSize:e.typography.pxToRem(15)})}));var h=o.forwardRef((function(e,t){const r=(0,d.Z)({props:e,name:"MuiToggleButton"}),{children:o,className:l,color:u="standard",disabled:p=!1,disableFocusRipple:m=!1,fullWidth:y=!1,onChange:h,onClick:x,selected:A,size:S="medium",value:j}=r,O=(0,n.Z)(r,v),w=(0,a.Z)({},r,{color:u,disabled:p,disableFocusRipple:m,fullWidth:y,size:S}),T=(e=>{const{classes:t,fullWidth:r,selected:n,disabled:a,size:o,color:s}=e,l={root:["root",n&&"selected",a&&"disabled",r&&"fullWidth",`size${(0,c.Z)(o)}`,s]};return(0,i.Z)(l,b,t)})(w);return(0,f.jsx)(g,(0,a.Z)({className:(0,s.default)(T.root,l),disabled:p,focusRipple:!m,ref:t,onClick:e=>{x&&(x(e,j),e.defaultPrevented)||h&&h(e,j)},onChange:h,value:j,ownerState:w,"aria-pressed":A},O,{children:o}))}))},85390:function(e,t,r){r.d(t,{Z:function(){return g}});var n=r(63366),a=r(87462),o=r(67294),s=(r(59864),r(86010)),i=r(94780),l=r(81719),u=r(78884),c=r(36622);function d(e,t){return void 0!==t&&void 0!==e&&(Array.isArray(t)?t.indexOf(e)>=0:e===t)}var p=r(34867);function m(e){return(0,p.Z)("MuiToggleButtonGroup",e)}var b=(0,r(1588).Z)("MuiToggleButtonGroup",["root","selected","vertical","disabled","grouped","groupedHorizontal","groupedVertical"]),y=r(85893);const f=["children","className","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],v=(0,l.ZP)("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[{[`& .${b.grouped}`]:t.grouped},{[`& .${b.grouped}`]:t[`grouped${(0,c.Z)(r.orientation)}`]},t.root,"vertical"===r.orientation&&t.vertical,r.fullWidth&&t.fullWidth]}})((({ownerState:e,theme:t})=>(0,a.Z)({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius},"vertical"===e.orientation&&{flexDirection:"column"},e.fullWidth&&{width:"100%"},{[`& .${b.grouped}`]:(0,a.Z)({},"horizontal"===e.orientation?{"&:not(:first-of-type)":{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-of-type)":{borderTopRightRadius:0,borderBottomRightRadius:0},[`&.${b.selected} + .${b.grouped}.${b.selected}`]:{borderLeft:0,marginLeft:0}}:{"&:not(:first-of-type)":{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},"&:not(:last-of-type)":{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`&.${b.selected} + .${b.grouped}.${b.selected}`]:{borderTop:0,marginTop:0}})})));var g=o.forwardRef((function(e,t){const r=(0,u.Z)({props:e,name:"MuiToggleButtonGroup"}),{children:l,className:p,color:b="standard",disabled:g=!1,exclusive:h=!1,fullWidth:x=!1,onChange:A,orientation:S="horizontal",size:j="medium",value:O}=r,w=(0,n.Z)(r,f),T=(0,a.Z)({},r,{disabled:g,fullWidth:x,orientation:S,size:j}),k=(e=>{const{classes:t,orientation:r,fullWidth:n,disabled:a}=e,o={root:["root","vertical"===r&&"vertical",n&&"fullWidth"],grouped:["grouped",`grouped${(0,c.Z)(r)}`,a&&"disabled"]};return(0,i.Z)(o,m,t)})(T),C=(e,t)=>{if(!A)return;const r=O&&O.indexOf(t);let n;O&&r>=0?(n=O.slice(),n.splice(r,1)):n=O?O.concat(t):[t],A(e,n)},P=(e,t)=>{A&&A(e,O===t?null:t)};return(0,y.jsx)(v,(0,a.Z)({role:"group",className:(0,s.default)(k.root,p),ref:t,ownerState:T},w,{children:o.Children.map(l,(e=>o.isValidElement(e)?o.cloneElement(e,{className:(0,s.default)(k.grouped,e.props.className),onChange:h?P:C,selected:void 0===e.props.selected?d(e.props.value,O):e.props.selected,size:e.props.size||j,fullWidth:x,color:e.props.color||b,disabled:e.props.disabled||g}):null))}))}))},34637:function(e,t,r){r.d(t,{Y:function(){return d},Z:function(){return p}});var n=r(59499),a=r(81719),o=r(87054),s=(r(67294),r(85893));function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u=(0,a.ZP)(o.Z)((function(e){var t=e.theme;return{border:"0px",flex:1,backgroundColor:"#383D51",borderRadius:"4px","&.Mui-selected, &.Mui-selected:hover":{backgroundColor:"#FFFFFF",borderRadius:"4px !important"},"&.Mui-selected, &.Mui-disabled":{zIndex:100,height:"100%",display:"flex",justifyContent:"center",".MuiTypography-subheader1":{background:t.palette.gradients.aaveGradient,backgroundClip:"text",textFillColor:"transparent"},".MuiTypography-secondary14":{background:t.palette.gradients.aaveGradient,backgroundClip:"text",textFillColor:"transparent"}}}})),c=(0,a.ZP)(o.Z)((function(e){var t=e.theme;return{border:"0px",flex:1,color:t.palette.text.muted,borderRadius:"4px","&.Mui-selected, &.Mui-selected:hover":{border:"1px solid ".concat(t.palette.other.standardInputLine),backgroundColor:"#FFFFFF",borderRadius:"4px !important"},"&.Mui-selected, &.Mui-disabled":{zIndex:100,height:"100%",display:"flex",justifyContent:"center",color:t.palette.background.header}}}));function d(e){return(0,s.jsx)(c,l({},e))}function p(e){return(0,s.jsx)(u,l({},e))}},59379:function(e,t,r){r.d(t,{f:function(){return d},Z:function(){return p}});var n=r(59499),a=r(81719),o=r(85390),s=r(85893);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u=(0,a.ZP)(o.Z)({backgroundColor:"#383D51",border:"1px solid rgba(235, 235, 237, 0.12)",padding:"4px"}),c=(0,a.ZP)(o.Z)((function(e){return{backgroundColor:e.theme.palette.background.header,padding:"2px",height:"36px",width:"100%"}}));function d(e){return(0,s.jsx)(c,l({},e))}function p(e){return(0,s.jsx)(u,l({},e))}},81811:function(e,t,r){r.r(t),r.d(t,{RepayModal:function(){return xe}});var n=r(59499),a=r(49501),o=r(67294),s=r(47130),i=r(73965),l=r(8195),u=r(46930),c=r(63206),d=r(31959),p=r(94635),m=r(75331),b=r(1279),y=r(52358),f=r(30120),v=r(81645),g=r(29630),h=r(9144),x=r(70794),A=r(25935),S=r(41024),j=r(72667),O=r(74119),w=r(50029),T=r(87794),k=r.n(T),C=r(77537),P=r(20301),R=r(68448),D=r(53601),E=r(93608),B=r(57824),Z=r(94671),L=r(99730),N=r(17674),W=r(4730),I=r(80854),M=r(21732),F=r(78371),U=r(67489),_=r(85893),z=["repayAmount","poolReserve","fromAssetData","isWrongNetwork","sx","symbol","rateMode","repayAllDebt","useFlashLoan","blocked","loading","repayWithAmount","buildTxFn"];function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $=function(e){var t,r=e.repayAmount,n=e.poolReserve,o=e.fromAssetData,s=e.isWrongNetwork,i=e.sx,l=e.symbol,u=e.rateMode,c=e.repayAllDebt,d=e.useFlashLoan,p=e.blocked,b=e.loading,y=e.repayWithAmount,f=e.buildTxFn,v=(0,W.Z)(e,z),g=(0,F.Y)((function(e){return[e.paraswapRepayWithCollateral,e.currentMarketData]})),h=(0,N.Z)(g,2),x=h[0],A=h[1],S=(0,M.P)({protocolAction:m.UQ.repayCollateral,handleGetTxns:function(){var e=(0,w.Z)(k().mark((function e(t,a){var i;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:return i=e.sent,e.abrupt("return",x({repayAllDebt:c,repayAmount:r,rateMode:u,repayWithAmount:y,fromAssetData:o,poolReserve:n,isWrongNetwork:s,symbol:l,useFlashLoan:d,blocked:p,swapCallData:i.swapCallData,augustus:i.augustus,signature:t,deadline:a,signedAmount:(0,O.sm)(y,o.decimals)}));case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),handleGetApprovalTxns:function(){var e=(0,w.Z)(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",x({repayAllDebt:c,repayAmount:r,rateMode:u,repayWithAmount:y,fromAssetData:o,poolReserve:n,isWrongNetwork:s,symbol:l,useFlashLoan:!1,blocked:p,swapCallData:"0x",augustus:I.hP}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),gasLimitRecommendation:I.eB[m.UQ.repayCollateral].limit,skip:b||!r||0===parseFloat(r)||p,spender:null!==(t=A.addresses.REPAY_WITH_COLLATERAL_ADAPTER)&&void 0!==t?t:"",deps:[o.symbol,y]}),j=S.approval,T=S.action,C=S.loadingTxns,P=S.approvalTxState,R=S.mainTxState,D=S.requiresApproval;return(0,_.jsx)(U.B,H(H({preparingTransactions:C,mainTxState:R,approvalTxState:P,requiresAmount:!0,amount:r,requiresApproval:D,isWrongNetwork:s,blocked:p,sx:i},v),{},{handleAction:T,handleApproval:function(){return j({amount:(0,O.sm)(y,o.decimals),underlyingAsset:o.aTokenAddress})},actionText:(0,_.jsx)(a.cC,{id:"Repay {symbol}",values:{symbol:l}}),actionInProgressText:(0,_.jsx)(a.cC,{id:"Repaying {symbol}",values:{symbol:l}}),fetchingData:b,errorParams:{loading:!1,disabled:p,content:(0,_.jsx)(a.cC,{id:"Repay {symbol}",values:{symbol:l}}),handleClick:T},tryPermit:!0}))};function q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?q(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function G(e){var t=e.poolReserve,r=e.symbol,n=e.debtType,s=e.userReserve,c=e.isWrongNetwork,d=e.user,p=(0,i.HT)(),T=p.reserves,N=p.userReserves,W=(0,l.vR)(),I=W.gasLimit,M=W.txError,F=W.mainTxState,U=(0,u.f)(),z=U.currentChainId,Y=U.currentNetworkConfig,H=(0,C.Z)().currentAccount,q=d.userReservesData.filter((function(e){return"0"!==e.underlyingBalance&&e.underlyingAsset!==t.underlyingAsset&&"stETH"!==e.reserve.symbol})).map((function(e){return{address:e.underlyingAsset,balance:e.underlyingBalance,balanceUSD:e.underlyingBalanceUSD,symbol:e.reserve.symbol,iconSymbol:e.reserve.iconSymbol,decimals:e.reserve.decimals}})).sort((function(e,t){return Number(t.balanceUSD)-Number(e.balanceUSD)})),G=(0,o.useState)(q[0]),Q=G[0],K=G[1],X=Q.balance||"0",J=(0,o.useState)("exactOut"),ee=J[0],te=J[1],re=(0,o.useState)(""),ne=re[0],ae=re[1],oe=(0,o.useState)("0.5"),se=oe[0],ie=oe[1],le=(0,o.useRef)(""),ue=T.find((function(e){return e.underlyingAsset===Q.address})),ce=n===m.tk.Stable?(null===s||void 0===s?void 0:s.stableBorrows)||"0":(null===s||void 0===s?void 0:s.variableBorrows)||"0",de=(0,b.hE)(ce);de=de.plus(de.multipliedBy(t.variableBorrowAPY).dividedBy(17280));var pe="-1"===ne,me=pe?de.toString():ne,be=(0,b.hE)(me).multipliedBy(t.priceInUSD).toString(),ye=de.multipliedBy(t.priceInUSD).multipliedBy(100+Number(se)).dividedBy(100).dividedBy(ue.priceInUSD),fe=V(V({},ue),{},{amount:X}),ve=V(V({},t),{},{amount:le.current});"exactIn"===ee&&(fe.amount=X,ve.amount="0");var ge=pe&&(0,b.hE)(X).gte(ye),he=function(e){var t=e.chainId,r=e.max,n=e.maxSlippage,a=e.skip,s=e.swapIn,i=e.swapOut,l=e.userAddress,u=e.swapVariant,c=(0,o.useState)("0"),d=c[0],p=c[1],m=(0,o.useState)("0"),y=m[0],f=m[1],v=(0,o.useState)("0"),g=v[0],h=v[1],x=(0,o.useState)("0"),A=x[0],S=x[1],j=(0,o.useState)(),T=j[0],C=j[1],P=(0,o.useState)(!1),R=P[0],D=P[1],E=(0,o.useState)(""),B=E[0],Z=E[1],L=(0,o.useMemo)((function(){return{underlyingAsset:s.underlyingAsset,decimals:s.decimals,supplyAPY:s.supplyAPY,amount:s.amount,variableBorrowAPY:s.variableBorrowAPY}}),[s.amount,s.decimals,s.supplyAPY,s.underlyingAsset,s.variableBorrowAPY]),N=(0,o.useMemo)((function(){return{underlyingAsset:i.underlyingAsset,decimals:i.decimals,supplyAPY:i.supplyAPY,amount:i.amount,variableBorrowAPY:i.variableBorrowAPY}}),[i.amount,i.decimals,i.supplyAPY,i.underlyingAsset,i.variableBorrowAPY]),W=(0,o.useCallback)((function(){return(0,O.F8)(L,N,t,l)}),[t,L,N,l]),I=(0,o.useCallback)((function(){return(0,O.wP)(L,N,t,l,r)}),[t,r,L,N,l]);return(0,o.useEffect)((function(){if(!a){var e=function(){var e=(0,w.Z)(k().mark((function e(){var t,r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L.underlyingAsset&&N.underlyingAsset&&("exactIn"!==u||L.amount&&"0"!==L.amount&&!isNaN(+L.amount))&&("exactOut"!==u||N.amount&&"0"!==N.amount&&!isNaN(+N.amount))){e.next=7;break}return p("0"),f("0"),h("0"),S("0"),C(void 0),e.abrupt("return");case 7:if(D(!0),e.prev=8,"exactIn"!==u){e.next=15;break}return e.next=12,W();case 12:t=e.sent,e.next=18;break;case 15:return e.next=17,I();case 17:t=e.sent;case 18:Z(""),C(t),p((0,b.Fv)(t.srcAmount,t.srcDecimals)),h((0,b.Fv)(t.destAmount,t.destDecimals)),f(t.srcUSD),S(t.destUSD),e.next=31;break;case 26:e.prev=26,e.t0=e.catch(8),console.error(e.t0),r=(0,O.aE)(e.t0.message),Z(r);case 31:return e.prev=31,D(!1),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[8,26,31,34]])})));return function(){return e.apply(this,arguments)}}(),t=setTimeout((function(){e()}),400);return function(){clearTimeout(t)}}}),[a,u,L.underlyingAsset,L.amount,N.underlyingAsset,N.amount,W,I,n]),{outputAmount:g,outputAmountUSD:A,inputAmount:d,inputAmountUSD:y,loading:R,error:B,buildTxFn:function(){var e=(0,w.Z)(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T){e.next=2;break}throw new Error("Route required to build transaction");case 2:if("exactIn"!==u){e.next=6;break}return e.abrupt("return",(0,O.xS)(T,s,i,t,l,n));case 6:return e.abrupt("return",(0,O._n)(T,s,i,t,l,n));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}({chainId:Y.underlyingChainId||z,userAddress:H,swapVariant:ee,swapIn:fe,swapOut:ve,max:ge,skip:F.loading||!1,maxSlippage:Number(se)}),xe=he.inputAmountUSD,Ae=he.inputAmount,Se=he.outputAmount,je=he.outputAmountUSD,Oe=he.loading,we=he.error,Te=he.buildTxFn,ke=Oe&&"0"===xe,Ce=function(e){var t="-1"===e;t&&(0,b.hE)(X).lt(ye)?(le.current="",ae(""),te("exactIn")):(le.current=t?de.toString(10):e,ae(e),te("exactOut"))},Pe=N.find((function(e){return e.underlyingAsset===Q.address})),Re=(0,R.bU)({amountToReceiveAfterSwap:Se,amountToSwap:Ae,fromAssetData:ue,user:d,toAssetData:t,repayWithUserReserve:Pe,debt:ce}),De=Re.hfAfterSwap,Ee=Re.hfEffectOfFromAmount,Be=(0,Z.gK)(d.healthFactor,Ee.toString())||(null===ue||void 0===ue?void 0:ue.isFrozen),Ze=(0,b.hE)(ce).minus(x.Z.min(Se,ce)),Le=Ze.multipliedBy(t.priceInUSD),Ne=X?(0,b.hE)(X).minus(Ae):(0,b.hE)("0"),We=Ne.multipliedBy(ue.priceInUSD),Ie="exactIn"===ee?Se:me,Me="exactIn"===ee?je:be,Fe=(0,Z.Vc)(d),Ue=void 0;Fe.length>0&&!Fe.includes(Q.symbol)?Ue=Z.NI.ZERO_LTV_WITHDRAW_BLOCKED:(0,b.hE)(X).lt(Ae)?Ue=Z.NI.NOT_ENOUGH_COLLATERAL_TO_REPAY_WITH:Be&&!ue.flashLoanEnabled&&(Ue=Z.NI.FLASH_LOAN_NOT_AVAILABLE);var _e=function(){switch(Ue){case Z.NI.NOT_ENOUGH_COLLATERAL_TO_REPAY_WITH:return(0,_.jsx)(a.cC,{id:"Not enough collateral to repay this amount of debt with"});case Z.NI.ZERO_LTV_WITHDRAW_BLOCKED:return(0,_.jsx)(a.cC,{id:"Assets with zero LTV ({assetsBlockingWithdraw}) must be withdrawn or disabled as collateral to perform this action",values:{assetsBlockingWithdraw:Fe}});case Z.NI.FLASH_LOAN_NOT_AVAILABLE:return(0,_.jsx)(a.cC,{id:"Due to health factor impact, a flashloan is required to perform this transaction, but Aave Governance has disabled flashloan availability for this asset. Try lowering the amount or supplying additional collateral."});default:return null}},ze=(0,O.LN)(Ae,se,Q.decimals||18),Ye=(0,O.IG)(Se,se,t.decimals);return F.success?(0,_.jsx)(E.R,{action:(0,_.jsx)(a.cC,{id:"Repaid"}),amount:"exactOut"===ee?Se:Ye,symbol:t.symbol}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(D.W,{value:Ie,onChange:Ce,usdValue:Me,symbol:t.symbol,assets:[{address:t.underlyingAsset,symbol:t.symbol,iconSymbol:t.iconSymbol,balance:ce}],isMaxSelected:pe,maxValue:ce,inputTitle:(0,_.jsx)(a.cC,{id:"Expected amount to repay"}),balanceText:(0,_.jsx)(a.cC,{id:"Borrow balance"})}),(0,_.jsxs)(f.Z,{sx:{padding:"18px",pt:"14px",display:"flex",justifyContent:"space-between"},children:[(0,_.jsx)(v.Z,{sx:{fontSize:"18px !important"},children:(0,_.jsx)(y.Z,{})}),(0,_.jsx)(A.B,{loading:ke,outputAmountUSD:je,inputAmountUSD:xe})]}),(0,_.jsx)(D.W,{value:"exactOut"===ee?Ae:X,usdValue:xe,symbol:Q.symbol,assets:q,onSelect:K,onChange:Ce,inputTitle:(0,_.jsx)(a.cC,{id:"Collateral to repay with"}),balanceText:(0,_.jsx)(a.cC,{id:"Borrow balance"}),maxValue:X,loading:ke,disableInput:!0}),we&&!ke&&(0,_.jsx)(g.Z,{variant:"helperText",color:"error.main",children:we}),void 0!==Ue&&(0,_.jsx)(g.Z,{variant:"helperText",color:"error.main",children:(0,_.jsx)(_e,{})}),(0,_.jsxs)(B.m6,{gasLimit:I,slippageSelector:(0,_.jsx)(P.n,{selectedSlippage:se,setSlippage:ie,slippageTooltipHeader:(0,_.jsx)(h.Z,{direction:"row",alignItems:"center",children:"exactIn"===ee?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(a.cC,{id:"Minimum amount of debt to be repaid"}),(0,_.jsx)(h.Z,{alignItems:"end",children:(0,_.jsxs)(h.Z,{direction:"row",children:[(0,_.jsx)(j.T1,{symbol:t.iconSymbol,sx:{mr:1,fontSize:"14px"}}),(0,_.jsx)(S.B,{value:Ye,variant:"secondary12"})]})})]}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(a.cC,{id:"Maximum collateral amount to use"}),(0,_.jsx)(h.Z,{alignItems:"end",children:(0,_.jsxs)(h.Z,{direction:"row",children:[(0,_.jsx)(j.T1,{symbol:Q.iconSymbol||"",sx:{mr:1,fontSize:"14px"}}),(0,_.jsx)(S.B,{value:ze,variant:"secondary12"})]})})]})})}),children:[(0,_.jsx)(B.jz,{visibleHfChange:"exactOut"===ee?!!ne:!!Ae,healthFactor:null===d||void 0===d?void 0:d.healthFactor,futureHealthFactor:De.toString(10),loading:ke}),(0,_.jsx)(B.XJ,{description:(0,_.jsx)(a.cC,{id:"Borrow balance after repay"}),futureValue:Ze.toString(),futureValueUSD:Le.toString(),symbol:r,tokenIcon:t.iconSymbol,loading:ke,hideSymbolSuffix:!0}),(0,_.jsx)(B.XJ,{description:(0,_.jsx)(a.cC,{id:"Collateral balance after repay"}),futureValue:Ne.toString(),futureValueUSD:We.toString(),symbol:Q.symbol,tokenIcon:Q.iconSymbol,loading:ke,hideSymbolSuffix:!0})]}),M&&(0,_.jsx)(L.f,{txError:M}),(0,_.jsx)($,{poolReserve:t,fromAssetData:ue,repayAmount:"exactIn"===ee?Ye:Se,repayWithAmount:"exactOut"===ee?ze:Ae,repayAllDebt:ge,useFlashLoan:Be,isWrongNetwork:c,symbol:r,rateMode:n,blocked:void 0!==Ue||""!==we,loading:Oe,buildTxFn:Te})]})}var Q=r(84707),K=r(82403),X=r(20854),J=r(69125),ee=r(67916),te=r(85945),re=r(56371),ne=r(28744),ae=r(93591),oe=r(32113),se=r(39771),ie=r(31001),le=["amountToRepay","poolReserve","poolAddress","isWrongNetwork","sx","symbol","debtType","repayWithATokens","blocked","maxApproveNeeded"];function ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var de,pe=function(e){var t=e.amountToRepay,r=e.poolReserve,n=e.poolAddress,s=e.isWrongNetwork,i=e.sx,u=e.symbol,c=e.debtType,d=e.repayWithATokens,p=e.blocked,b=e.maxApproveNeeded,y=(0,W.Z)(e,le),f=(0,F.Y)((function(e){return[e.repay,e.repayWithPermit,e.encodeRepayParams,e.encodeRepayWithPermitParams,e.tryPermit,e.walletApprovalMethodPreference,e.estimateGasLimit,e.addTransaction,e.useOptimizedPath,e.currentMarketData]})),v=(0,N.Z)(f,10),g=v[0],h=v[1],x=v[2],A=v[3],S=v[4],j=v[5],O=v[6],T=v[7],P=v[8],R=v[9],D=(0,C.Z)().sendTx,E=(0,te.NL)(),B=(0,o.useState)(),L=B[0],M=B[1],z=(0,l.vR)(),Y=z.approvalTxState,H=z.mainTxState,$=z.loadingTxns,q=z.setMainTxState,V=z.setTxError,G=z.setGasLimit,Q=z.setLoadingTxns,K=z.setApprovalTxState,X=(0,ae.y)(R,n),J=X.data,ee=X.refetch,ue=X.isFetching,de=X.isFetchedAfterMount,pe=S({reserveAddress:n,isWrappedBaseAsset:r.isWrappedBaseAsset}),me=pe&&j===oe.n.PERMIT;Q(ue);var be=!d&&0!==Number(t)&&(0,Z.iv)({approvedAmount:(null===J||void 0===J?void 0:J.amount)||"0",amount:-1===Number(t)?b:t,signedAmount:L?L.amount:"0"});be&&null!==Y&&void 0!==Y&&Y.success&&K({});var ye=(0,ne.M)({usePermit:me,approvedAmount:J,requiresApproval:be,assetAddress:n,symbol:u,decimals:r.decimals,signatureAmount:t,onApprovalTxConfirmed:ee,onSignTxCompleted:function(e){return M(e)}}).approval;(0,o.useEffect)((function(){de||d||ee()}),[ee,de,d]);var fe=function(){var e=(0,w.Z)(k().mark((function e(){var a,o,s,i,l,p,b,y,f;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,q(ce(ce({},H),{},{loading:!0})),o=m.UQ.default,!me||!L){e.next=21;break}if(s={amount:"-1"===t?t:(0,re.parseUnits)(t,r.decimals).toString(),reserve:n,interestRateMode:c,signature:L.signature,deadline:L.deadline},!P()){e.next=9;break}return e.next=8,A(s);case 8:i=e.sent;case 9:return o=m.UQ.repayWithPermit,l=h(ce(ce({},s),{},{encodedTxData:i?i[0]:void 0})),e.next=13,O(l);case 13:return l=e.sent,e.next=16,D(l);case 16:return a=e.sent,e.next=19,a.wait(1);case 19:e.next=36;break;case 21:if(p={amountToRepay:"-1"===t?t:(0,re.parseUnits)(t,r.decimals).toString(),poolAddress:n,repayWithATokens:d,debtType:c},!P()){e.next=26;break}return e.next=25,x(p);case 25:b=e.sent;case 26:return o=m.UQ.repay,y=g(ce(ce({},p),{},{encodedTxData:b})),e.next=30,O(y);case 30:return y=e.sent,e.next=33,D(y);case 33:return a=e.sent,e.next=36,a.wait(1);case 36:q({txHash:a.hash,loading:!1,success:!0}),T(a.hash,{action:o,txState:"success",asset:n,amount:t,assetName:u}),E.invalidateQueries({queryKey:ie.B.pool}),E.invalidateQueries({queryKey:ie.B.gho}),e.next=47;break;case 42:e.prev=42,e.t0=e.catch(0),f=(0,se.WG)(e.t0,se.aD.GAS_ESTIMATION,!1),V(f),q({txHash:void 0,loading:!1});case 47:case"end":return e.stop()}}),e,null,[[0,42]])})));return function(){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){var e=0;me?e=Number(I.eB[m.UQ.supplyWithPermit].recommended):(e=Number(I.eB[m.UQ.supply].recommended),be&&!Y.success&&(e+=Number(Z.pQ))),G(e.toString())}),[be,Y,me,G]),(0,_.jsx)(U.B,ce(ce({blocked:p,preparingTransactions:$||!J,symbol:r.symbol,mainTxState:H,approvalTxState:Y,requiresAmount:!0,amount:t,requiresApproval:be,isWrongNetwork:s,sx:i},y),{},{handleAction:fe,handleApproval:ye,actionText:(0,_.jsx)(a.cC,{id:"Repay {symbol}",values:{symbol:u}}),actionInProgressText:(0,_.jsx)(a.cC,{id:"Repaying {symbol}",values:{symbol:u}}),tryPermit:pe}))},me=function(e){var t,r,n,s=e.poolReserve,d=e.userReserve,p=e.symbol,y=e.tokenBalance,f=e.nativeBalance,v=e.isWrongNetwork,h=e.debtType,A=e.user,S=(0,l.vR)(),j=S.gasLimit,O=S.mainTxState,w=S.txError,T=(0,i.HT)().marketReferencePriceInUsd,k=(0,u.f)(),C=k.currentChainId,P=k.currentMarketData,R=k.currentMarket,Z=(0,F.Y)((function(e){return[e.poolComputed.minRemainingBaseTokenBalance]})),L=(0,N.Z)(Z,1)[0],W=(0,o.useState)({address:s.underlyingAsset,symbol:s.symbol,iconSymbol:s.iconSymbol,balance:y}),M=W[0],U=W[1],z=(0,o.useState)([M]),Y=z[0],H=z[1],$=(0,o.useState)(""),q=$[0],V=$[1],G=(0,o.useState)(""),te=G[0],re=G[1],ne=(0,o.useRef)(),ae=(0,c.Mo)(C),oe=d.underlyingBalance,se=d.usageAsCollateralEnabledOnUser,ie=d.reserve,le=M.address===s.aTokenAddress,ue=h===m.tk.Stable?(null===d||void 0===d?void 0:d.stableBorrows)||"0":(null===d||void 0===d?void 0:d.variableBorrows)||"0",ce=new x.Z(ue).multipliedBy(s.formattedPriceInMarketReferenceCurrency).multipliedBy(T).shiftedBy(-K.$3),de=(0,b.hE)(ue).multipliedBy("1.0025").decimalPlaces(s.decimals,x.Z.ROUND_UP);if(le)r=x.Z.min(oe,ue),n=oe;else{var me=(0,b.hE)(M.balance).minus((null===d||void 0===d?void 0:d.reserve.symbol.toUpperCase())===ae.baseAssetSymbol?L:"0");n=me.toString(10),r=x.Z.min(me,ue)}var be="-1"===te,ye=be?r.toString(10):te;(0,o.useEffect)((function(){var e=[];if(s.symbol===ae.wrappedBaseAssetSymbol){var t=(0,b.hE)(f),r=x.Z.max(t,x.Z.min(t,ue));e.push({address:I.hP.toLowerCase(),symbol:ae.baseAssetSymbol,balance:r.toString(10)})}var n=x.Z.min((0,b.hE)(y),ue),a=x.Z.max(n,y);if(e.push({address:s.underlyingAsset,symbol:s.symbol,iconSymbol:s.iconSymbol,balance:a.toString(10)}),P.v3&&!(0,J.rj)({symbol:s.symbol,currentMarket:R})){var o=(0,b.hE)(oe),i=x.Z.max(o,x.Z.min(o,ue).toString(10));e.push({address:s.aTokenAddress,symbol:"a".concat(s.symbol),iconSymbol:s.iconSymbol,aToken:!0,balance:i.toString(10)})}H(e),U(e[0])}),[]);var fe=(0,b.hE)(ue).minus(ye||"0").toString(10),ve=new x.Z(fe).multipliedBy(s.formattedPriceInMarketReferenceCurrency).multipliedBy(T).shiftedBy(-K.$3),ge=be&&ve.toNumber()>0,he=null===A||void 0===A?void 0:A.healthFactor;if(ye){var xe=(null===A||void 0===A?void 0:A.totalCollateralUSD)||"0";le&&se&&(xe=(0,b.hE)((null===A||void 0===A?void 0:A.totalCollateralUSD)||"0").minus((0,b.hE)(ie.priceInUSD).multipliedBy(ye)));var Ae=(0,b.hE)((null===A||void 0===A?void 0:A.totalBorrowsUSD)||"0").minus((0,b.hE)(ie.priceInUSD).multipliedBy(ye)),Se=x.Z.max(Ae,0),je=(0,X.L1)({collateralBalanceMarketReferenceCurrency:xe,borrowBalanceMarketReferenceCurrency:Se,currentLiquidationThreshold:(null===A||void 0===A?void 0:A.currentLiquidationThreshold)||"0"});he=je.isLessThan(0)&&!je.eq(-1)?"0":je.toString(10)}var Oe=(0,b.hE)(ye).multipliedBy(ie.priceInUSD);return O.success?(0,_.jsx)(E.R,{action:(0,_.jsx)(a.cC,{id:"repaid"}),amount:ne.current,symbol:le?s.symbol:M.symbol}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(D.W,{value:ye,onChange:function(e){var t="-1"===e;ne.current=t?r.toString(10):e,re(e),t&&(le||r.eq(ue))?M.address===I.hP.toLowerCase()||Q.U[C]&&Q.U[C].toLowerCase()===ie.underlyingAsset.toLowerCase()?V(de.toString(10)):V("-1"):V(de.lt(n)?de.toString(10):r.toString(10))},usdValue:Oe.toString(10),symbol:M.symbol,assets:Y,onSelect:U,isMaxSelected:be,maxValue:r.toString(10),balanceText:(0,_.jsx)(a.cC,{id:"Wallet balance"})}),ge&&(0,_.jsx)(g.Z,{color:"warning.main",variant:"helperText",children:(0,_.jsx)(a.cC,{id:"You don\u2019t have enough funds in your wallet to repay the full amount. If you proceed to repay with your current amount of funds, you will still have a small borrowing position in your dashboard."})}),(0,_.jsxs)(B.m6,{gasLimit:j,children:[(0,_.jsx)(B.XJ,{description:(0,_.jsx)(a.cC,{id:"Remaining debt"}),futureValue:fe,futureValueUSD:ve.toString(10),value:ue,valueUSD:ce.toString(),symbol:s.iconSymbol===ae.wrappedBaseAssetSymbol?ae.baseAssetSymbol:s.iconSymbol}),(0,_.jsx)(B.jz,{visibleHfChange:!!te,healthFactor:null===A||void 0===A?void 0:A.healthFactor,futureHealthFactor:he})]}),w&&(0,_.jsx)(ee.Q,{txError:w}),(0,_.jsx)(pe,{maxApproveNeeded:de.toString(),poolReserve:s,amountToRepay:be?q:ye,poolAddress:le?s.underlyingAsset:null!==(t=M.address)&&void 0!==t?t:"",isWrongNetwork:v,symbol:p,debtType:h,repayWithATokens:le})]})},be=r(34637),ye=r(59379),fe=r(57609);function ve(e){var t,r=e.repayType,n=e.setRepayType,o=(0,u.f)().currentMarketData,s=(0,F.Y)((function(e){return e.trackEvent}));return null!==(t=o.enabledFeatures)&&void 0!==t&&t.collateralRepay?(0,_.jsxs)(f.Z,{sx:{mb:6},children:[(0,_.jsx)(g.Z,{mb:1,color:"text.secondary",children:(0,_.jsx)(a.cC,{id:"Repay with"})}),(0,_.jsxs)(ye.f,{color:"primary",value:r,exclusive:!0,onChange:function(e,t){return n(t)},children:[(0,_.jsx)(be.Y,{value:de.BALANCE,disabled:r===de.BALANCE,onClick:function(){return s(fe.rQ.SWITCH_REPAY_TYPE,{repayType:"Wallet Balance"})},children:(0,_.jsx)(g.Z,{variant:"buttonM",children:(0,_.jsx)(a.cC,{id:"Wallet balance"})})}),(0,_.jsx)(be.Y,{value:de.COLLATERAL,disabled:r===de.COLLATERAL,onClick:function(){return s(fe.rQ.SWITCH_REPAY_TYPE,{repayType:"Collateral"})},children:(0,_.jsx)(g.Z,{variant:"buttonM",children:(0,_.jsx)(a.cC,{id:"Collateral"})})})]})]}):null}function ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function he(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}!function(e){e[e.BALANCE=0]="BALANCE",e[e.COLLATERAL=1]="COLLATERAL"}(de||(de={}));var xe=function(){var e,t=(0,l.vR)(),r=t.type,n=t.close,m=t.args,b=t.mainTxState,y=(0,i.HT)(),f=y.userReserves,v=y.reserves,g=(0,u.f)().currentMarketData,h=(0,o.useState)(de.BALANCE),x=h[0],A=h[1],S=null===(e=v.find((function(e){return"stETH"===e.symbol})))||void 0===e?void 0:e.underlyingAsset,j=c.cr.collateralRepay(g)&&f.some((function(e){return"0"!==e.scaledATokenBalance&&e.underlyingAsset!==m.underlyingAsset&&e.underlyingAsset!==S}));return(0,_.jsx)(d.P,{open:r===l.w8.Repay,setOpen:function(){A(de.BALANCE),n()},children:(0,_.jsx)(p.A,{title:(0,_.jsx)(a.cC,{id:"Repay"}),underlyingAsset:m.underlyingAsset,children:function(e){return(0,_.jsx)(s.X,{children:function(t){return(0,_.jsxs)(_.Fragment,{children:[j&&!b.txHash&&(0,_.jsx)(ve,{repayType:x,setRepayType:A}),x===de.BALANCE&&(0,_.jsx)(me,he(he({},e),{},{debtType:m.currentRateMode,user:t})),x===de.COLLATERAL&&(0,_.jsx)(G,he(he({},e),{},{debtType:m.currentRateMode,user:t}))]})}})}})})}},28744:function(e,t,r){r.d(t,{M:function(){return h}});var n=r(59499),a=r(50029),o=r(17674),s=r(87794),i=r.n(s),l=r(75331),u=r(80854),c=r(21046),d=r(56371),p=r(89291),m=r(77537),b=r(78371),y=r(39771),f=r(8195);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){