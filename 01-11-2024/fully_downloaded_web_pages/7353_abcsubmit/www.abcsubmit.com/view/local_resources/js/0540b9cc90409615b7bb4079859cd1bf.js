/*! For license information please see viewer.bundle.js.LICENSE.txt */
!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=686)}([function(t,e,n){"use strict";(function(t){var n,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(e,n){"object"==r(t)&&"object"==r(t.exports)?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:void 0,(function(o,i){var s=[],a=o.document,u=Object.getPrototypeOf,l=s.slice,c=s.concat,p=s.push,d=s.indexOf,h={},f=h.toString,g=h.hasOwnProperty,m=g.toString,y=m.call(Object),v={},b=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},C=function(t){return null!=t&&t===t.window},E={type:!0,src:!0,noModule:!0};function A(t,e,n){var r,o=(e=e||a).createElement("script");if(o.text=t,n)for(r in E)n[r]&&(o[r]=n[r]);e.head.appendChild(o).parentNode.removeChild(o)}function I(t){return null==t?t+"":"object"==(void 0===t?"undefined":r(t))||"function"==typeof t?h[f.call(t)]||"object":void 0===t?"undefined":r(t)}var T=function t(e,n){return new t.fn.init(e,n)},S=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function w(t){var e=!!t&&"length"in t&&t.length,n=I(t);return!b(t)&&!C(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}T.fn=T.prototype={jquery:"3.3.1",constructor:T,length:0,toArray:function(){return l.call(this)},get:function(t){return null==t?l.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=T.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return T.each(this,t)},map:function(t){return this.pushStack(T.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return this.pushStack(l.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:p,sort:s.sort,splice:s.splice},T.extend=T.fn.extend=function(){var t,e,n,o,i,s,a=arguments[0]||{},u=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[u]||{},u++),"object"==(void 0===a?"undefined":r(a))||b(a)||(a={}),u===l&&(a=this,u--);u<l;u++)if(null!=(t=arguments[u]))for(e in t)n=a[e],a!==(o=t[e])&&(c&&o&&(T.isPlainObject(o)||(i=Array.isArray(o)))?(i?(i=!1,s=n&&Array.isArray(n)?n:[]):s=n&&T.isPlainObject(n)?n:{},a[e]=T.extend(c,s,o)):void 0!==o&&(a[e]=o));return a},T.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==f.call(t)||(e=u(t))&&("function"!=typeof(n=g.call(e,"constructor")&&e.constructor)||m.call(n)!==y))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t){A(t)},each:function(t,e){var n,r=0;if(w(t))for(n=t.length;r<n&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},trim:function(t){return null==t?"":(t+"").replace(S,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(w(Object(t))?T.merge(n,"string"==typeof t?[t]:t):p.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:d.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,o=t.length;r<n;r++)t[o++]=e[r];return t.length=o,t},grep:function(t,e,n){for(var r=[],o=0,i=t.length,s=!n;o<i;o++)!e(t[o],o)!==s&&r.push(t[o]);return r},map:function(t,e,n){var r,o,i=0,s=[];if(w(t))for(r=t.length;i<r;i++)null!=(o=e(t[i],i,n))&&s.push(o);else for(i in t)null!=(o=e(t[i],i,n))&&s.push(o);return c.apply([],s)},guid:1,support:v}),"function"==typeof Symbol&&(T.fn[Symbol.iterator]=s[Symbol.iterator]),T.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){h["[object "+e+"]"]=e.toLowerCase()}));var _=function(t){var e,n,r,o,i,s,a,u,l,c,p,d,h,f,g,m,y,v,b,C="sizzle"+1*new Date,E=t.document,A=0,I=0,T=st(),S=st(),w=st(),_=function(t,e){return t===e&&(p=!0),0},N={}.hasOwnProperty,D=[],O=D.pop,P=D.push,x=D.push,M=D.slice,R=function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},L="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",k="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",B="\\["+F+"*("+k+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+k+"))|)"+F+"*\\]",V=":("+k+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+B+")*)|.*)\\)|)",U=new RegExp(F+"+","g"),G=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),H=new RegExp("^"+F+"*,"+F+"*"),W=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),j=new RegExp("="+F+"*([^\\]'\"]*?)"+F+"*\\]","g"),z=new RegExp(V),Y=new RegExp("^"+k+"$"),K={ID:new RegExp("^#("+k+")"),CLASS:new RegExp("^\\.("+k+")"),TAG:new RegExp("^("+k+"|[*])"),ATTR:new RegExp("^"+B),PSEUDO:new RegExp("^"+V),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+L+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},X=/^(?:input|select|textarea|button)$/i,$=/^h\d$/i,q=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,J=/[+~]/,Q=new RegExp("\\\\([\\da-f]{1,6}"+F+"?|("+F+")|.)","ig"),tt=function(t,e,n){var r="0x"+e-65536;return r!=r||n?e:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},et=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,nt=function(t,e){return e?"\0"===t?"ï¿½":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},rt=function(){d()},ot=vt((function(t){return!0===t.disabled&&("form"in t||"label"in t)}),{dir:"parentNode",next:"legend"});try{x.apply(D=M.call(E.childNodes),E.childNodes),D[E.childNodes.length].nodeType}catch(t){x={apply:D.length?function(t,e){P.apply(t,M.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}function it(t,e,r,o){var i,a,l,c,p,f,y,v=e&&e.ownerDocument,A=e?e.nodeType:9;if(r=r||[],"string"!=typeof t||!t||1!==A&&9!==A&&11!==A)return r;if(!o&&((e?e.ownerDocument||e:E)!==h&&d(e),e=e||h,g)){if(11!==A&&(p=Z.exec(t)))if(i=p[1]){if(9===A){if(!(l=e.getElementById(i)))return r;if(l.id===i)return r.push(l),r}else if(v&&(l=v.getElementById(i))&&b(e,l)&&l.id===i)return r.push(l),r}else{if(p[2])return x.apply(r,e.getElementsByTagName(t)),r;if((i=p[3])&&n.getElementsByClassName&&e.getElementsByClassName)return x.apply(r,e.getElementsByClassName(i)),r}if(n.qsa&&!w[t+" "]&&(!m||!m.test(t))){if(1!==A)v=e,y=t;else if("object"!==e.nodeName.toLowerCase()){for((c=e.getAttribute("id"))?c=c.replace(et,nt):e.setAttribute("id",c=C),a=(f=s(t)).length;a--;)f[a]="#"+c+" "+yt(f[a]);y=f.join(","),v=J.test(t)&&gt(e.parentNode)||e}if(y)try{return x.apply(r,v.querySelectorAll(y)),r}catch(t){}finally{c===C&&e.removeAttribute("id")}}}return u(t.replace(G,"$1"),e,r,o)}function st(){var t=[];return function e(n,o){return t.push(n+" ")>r.cacheLength&&delete e[t.shift()],e[n+" "]=o}}function at(t){return t[C]=!0,t}function ut(t){var e=h.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function lt(t,e){for(var n=t.split("|"),o=n.length;o--;)r.attrHandle[n[o]]=e}function ct(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function pt(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function dt(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function ht(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ot(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ft(t){return at((function(e){return e=+e,at((function(n,r){for(var o,i=t([],n.length,e),s=i.length;s--;)n[o=i[s]]&&(n[o]=!(r[o]=n[o]))}))}))}function gt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=it.support={},i=it.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},d=it.setDocument=function(t){var e,o,s=t?t.ownerDocument||t:E;return s!==h&&9===s.nodeType&&s.documentElement?(f=(h=s).documentElement,g=!i(h),E!==h&&(o=h.defaultView)&&o.top!==o&&(o.addEventListener?o.addEventListener("unload",rt,!1):o.attachEvent&&o.attachEvent("onunload",rt)),n.attributes=ut((function(t){return t.className="i",!t.getAttribute("className")})),n.getElementsByTagName=ut((function(t){return t.appendChild(h.createComment("")),!t.getElementsByTagName("*").length})),n.getElementsByClassName=q.test(h.getElementsByClassName),n.getById=ut((function(t){return f.appendChild(t).id=C,!h.getElementsByName||!h.getElementsByName(C).length})),n.getById?(r.filter.ID=function(t){var e=t.replace(Q,tt);return function(t){return t.getAttribute("id")===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n=e.getElementById(t);return n?[n]:[]}}):(r.filter.ID=function(t){var e=t.replace(Q,tt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&g){var n,r,o,i=e.getElementById(t);if(i){if((n=i.getAttributeNode("id"))&&n.value===t)return[i];for(o=e.getElementsByName(t),r=0;i=o[r++];)if((n=i.getAttributeNode("id"))&&n.value===t)return[i]}return[]}}),r.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],o=0,i=e.getElementsByTagName(t);if("*"===t){for(;n=i[o++];)1===n.nodeType&&r.push(n);return r}return i},r.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&g)return e.getElementsByClassName(t)},y=[],m=[],(n.qsa=q.test(h.querySelectorAll))&&(ut((function(t){f.appendChild(t).innerHTML="<a id='"+C+"'></a><select id='"+C+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+F+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||m.push("\\["+F+"*(?:value|"+L+")"),t.querySelectorAll("[id~="+C+"-]").length||m.push("~="),t.querySelectorAll(":checked").length||m.push(":checked"),t.querySelectorAll("a#"+C+"+*").length||m.push(".#.+[+~]")})),ut((function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=h.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&m.push("name"+F+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),f.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),m.push(",.*:")}))),(n.matchesSelector=q.test(v=f.matches||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&ut((function(t){n.disconnectedMatch=v.call(t,"*"),v.call(t,"[s!='']:x"),y.push("!=",V)})),m=m.length&&new RegExp(m.join("|")),y=y.length&&new RegExp(y.join("|")),e=q.test(f.compareDocumentPosition),b=e||q.test(f.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},_=e?function(t,e){if(t===e)return p=!0,0;var r=!t.compareDocumentPosition-!e.compareDocumentPosition;return r||(1&(r=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===r?t===h||t.ownerDocument===E&&b(E,t)?-1:e===h||e.ownerDocument===E&&b(E,e)?1:c?R(c,t)-R(c,e):0:4&r?-1:1)}:function(t,e){if(t===e)return p=!0,0;var n,r=0,o=t.parentNode,i=e.parentNode,s=[t],a=[e];if(!o||!i)return t===h?-1:e===h?1:o?-1:i?1:c?R(c,t)-R(c,e):0;if(o===i)return ct(t,e);for(n=t;n=n.parentNode;)s.unshift(n);for(n=e;n=n.parentNode;)a.unshift(n);for(;s[r]===a[r];)r++;return r?ct(s[r],a[r]):s[r]===E?-1:a[r]===E?1:0},h):h},it.matches=function(t,e){return it(t,null,null,e)},it.matchesSelector=function(t,e){if((t.ownerDocument||t)!==h&&d(t),e=e.replace(j,"='$1']"),n.matchesSelector&&g&&!w[e+" "]&&(!y||!y.test(e))&&(!m||!m.test(e)))try{var r=v.call(t,e);if(r||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(t){}return it(e,h,null,[t]).length>0},it.contains=function(t,e){return(t.ownerDocument||t)!==h&&d(t),b(t,e)},it.attr=function(t,e){(t.ownerDocument||t)!==h&&d(t);var o=r.attrHandle[e.toLowerCase()],i=o&&N.call(r.attrHandle,e.toLowerCase())?o(t,e,!g):void 0;return void 0!==i?i:n.attributes||!g?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},it.escape=function(t){return(t+"").replace(et,nt)},it.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},it.uniqueSort=function(t){var e,r=[],o=0,i=0;if(p=!n.detectDuplicates,c=!n.sortStable&&t.slice(0),t.sort(_),p){for(;e=t[i++];)e===t[i]&&(o=r.push(i));for(;o--;)t.splice(r[o],1)}return c=null,t},o=it.getText=function(t){var e,n="",r=0,i=t.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=o(t)}else if(3===i||4===i)return t.nodeValue}else for(;e=t[r++];)n+=o(e);return n},(r=it.selectors={cacheLength:50,createPseudo:at,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Q,tt),t[3]=(t[3]||t[4]||t[5]||"").replace(Q,tt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||it.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&it.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return K.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&z.test(n)&&(e=s(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Q,tt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=T[t+" "];return e||(e=new RegExp("(^|"+F+")"+t+"("+F+"|$)"))&&T(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(r){var o=it.attr(r,t);return null==o?"!="===e:!e||(o+="","="===e?o===n:"!="===e?o!==n:"^="===e?n&&0===o.indexOf(n):"*="===e?n&&o.indexOf(n)>-1:"$="===e?n&&o.slice(-n.length)===n:"~="===e?(" "+o.replace(U," ")+" ").indexOf(n)>-1:"|="===e&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,r,o){var i="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===r&&0===o?function(t){return!!t.parentNode}:function(e,n,u){var l,c,p,d,h,f,g=i!==s?"nextSibling":"previousSibling",m=e.parentNode,y=a&&e.nodeName.toLowerCase(),v=!u&&!a,b=!1;if(m){if(i){for(;g;){for(d=e;d=d[g];)if(a?d.nodeName.toLowerCase()===y:1===d.nodeType)return!1;f=g="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?m.firstChild:m.lastChild],s&&v){for(b=(h=(l=(c=(p=(d=m)[C]||(d[C]={}))[d.uniqueID]||(p[d.uniqueID]={}))[t]||[])[0]===A&&l[1])&&l[2],d=h&&m.childNodes[h];d=++h&&d&&d[g]||(b=h=0)||f.pop();)if(1===d.nodeType&&++b&&d===e){c[t]=[A,h,b];break}}else if(v&&(b=h=(l=(c=(p=(d=e)[C]||(d[C]={}))[d.uniqueID]||(p[d.uniqueID]={}))[t]||[])[0]===A&&l[1]),!1===b)for(;(d=++h&&d&&d[g]||(b=h=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==y:1!==d.nodeType)||!++b||(v&&((c=(p=d[C]||(d[C]={}))[d.uniqueID]||(p[d.uniqueID]={}))[t]=[A,b]),d!==e)););return(b-=o)===r||b%r==0&&b/r>=0}}},PSEUDO:function(t,e){var n,o=r.pseudos[t]||r.setFilters[t.toLowerCase()]||it.error("unsupported pseudo: "+t);return o[C]?o(e):o.length>1?(n=[t,t,"",e],r.setFilters.hasOwnProperty(t.toLowerCase())?at((function(t,n){for(var r,i=o(t,e),s=i.length;s--;)t[r=R(t,i[s])]=!(n[r]=i[s])})):function(t){return o(t,0,n)}):o}},pseudos:{not:at((function(t){var e=[],n=[],r=a(t.replace(G,"$1"));return r[C]?at((function(t,e,n,o){for(var i,s=r(t,null,o,[]),a=t.length;a--;)(i=s[a])&&(t[a]=!(e[a]=i))})):function(t,o,i){return e[0]=t,r(e,null,i,n),e[0]=null,!n.pop()}})),has:at((function(t){return function(e){return it(t,e).length>0}})),contains:at((function(t){return t=t.replace(Q,tt),function(e){return(e.textContent||e.innerText||o(e)).indexOf(t)>-1}})),lang:at((function(t){return Y.test(t||"")||it.error("unsupported lang: "+t),t=t.replace(Q,tt).toLowerCase(),function(e){var n;do{if(n=g?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===f},focus:function(t){return t===h.activeElement&&(!h.hasFocus||h.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:ht(!1),disabled:ht(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!r.pseudos.empty(t)},header:function(t){return $.test(t.nodeName)},input:function(t){return X.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:ft((function(){return[0]})),last:ft((function(t,e){return[e-1]})),eq:ft((function(t,e,n){return[n<0?n+e:n]})),even:ft((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:ft((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:ft((function(t,e,n){for(var r=n<0?n+e:n;--r>=0;)t.push(r);return t})),gt:ft((function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t}))}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[e]=pt(e);for(e in{submit:!0,reset:!0})r.pseudos[e]=dt(e);function mt(){}function yt(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function vt(t,e,n){var r=e.dir,o=e.next,i=o||r,s=n&&"parentNode"===i,a=I++;return e.first?function(e,n,o){for(;e=e[r];)if(1===e.nodeType||s)return t(e,n,o);return!1}:function(e,n,u){var l,c,p,d=[A,a];if(u){for(;e=e[r];)if((1===e.nodeType||s)&&t(e,n,u))return!0}else for(;e=e[r];)if(1===e.nodeType||s)if(c=(p=e[C]||(e[C]={}))[e.uniqueID]||(p[e.uniqueID]={}),o&&o===e.nodeName.toLowerCase())e=e[r]||e;else{if((l=c[i])&&l[0]===A&&l[1]===a)return d[2]=l[2];if(c[i]=d,d[2]=t(e,n,u))return!0}return!1}}function bt(t){return t.length>1?function(e,n,r){for(var o=t.length;o--;)if(!t[o](e,n,r))return!1;return!0}:t[0]}function Ct(t,e,n,r,o){for(var i,s=[],a=0,u=t.length,l=null!=e;a<u;a++)(i=t[a])&&(n&&!n(i,r,o)||(s.push(i),l&&e.push(a)));return s}function Et(t,e,n,r,o,i){return r&&!r[C]&&(r=Et(r)),o&&!o[C]&&(o=Et(o,i)),at((function(i,s,a,u){var l,c,p,d=[],h=[],f=s.length,g=i||function(t,e,n){for(var r=0,o=e.length;r<o;r++)it(t,e[r],n);return n}(e||"*",a.nodeType?[a]:a,[]),m=!t||!i&&e?g:Ct(g,d,t,a,u),y=n?o||(i?t:f||r)?[]:s:m;if(n&&n(m,y,a,u),r)for(l=Ct(y,h),r(l,[],a,u),c=l.length;c--;)(p=l[c])&&(y[h[c]]=!(m[h[c]]=p));if(i){if(o||t){if(o){for(l=[],c=y.length;c--;)(p=y[c])&&l.push(m[c]=p);o(null,y=[],l,u)}for(c=y.length;c--;)(p=y[c])&&(l=o?R(i,p):d[c])>-1&&(i[l]=!(s[l]=p))}}else y=Ct(y===s?y.splice(f,y.length):y),o?o(null,s,y,u):x.apply(s,y)}))}function At(t){for(var e,n,o,i=t.length,s=r.relative[t[0].type],a=s||r.relative[" "],u=s?1:0,c=vt((function(t){return t===e}),a,!0),p=vt((function(t){return R(e,t)>-1}),a,!0),d=[function(t,n,r){var o=!s&&(r||n!==l)||((e=n).nodeType?c(t,n,r):p(t,n,r));return e=null,o}];u<i;u++)if(n=r.relative[t[u].type])d=[vt(bt(d),n)];else{if((n=r.filter[t[u].type].apply(null,t[u].matches))[C]){for(o=++u;o<i&&!r.relative[t[o].type];o++);return Et(u>1&&bt(d),u>1&&yt(t.slice(0,u-1).concat({value:" "===t[u-2].type?"*":""})).replace(G,"$1"),n,u<o&&At(t.slice(u,o)),o<i&&At(t=t.slice(o)),o<i&&yt(t))}d.push(n)}return bt(d)}function It(t,e){var n=e.length>0,o=t.length>0,i=function(i,s,a,u,c){var p,f,m,y=0,v="0",b=i&&[],C=[],E=l,I=i||o&&r.find.TAG("*",c),T=A+=null==E?1:Math.random()||.1,S=I.length;for(c&&(l=s===h||s||c);v!==S&&null!=(p=I[v]);v++){if(o&&p){for(f=0,s||p.ownerDocument===h||(d(p),a=!g);m=t[f++];)if(m(p,s||h,a)){u.push(p);break}c&&(A=T)}n&&((p=!m&&p)&&y--,i&&b.push(p))}if(y+=v,n&&v!==y){for(f=0;m=e[f++];)m(b,C,s,a);if(i){if(y>0)for(;v--;)b[v]||C[v]||(C[v]=O.call(u));C=Ct(C)}x.apply(u,C),c&&!i&&C.length>0&&y+e.length>1&&it.uniqueSort(u)}return c&&(A=T,l=E),b};return n?at(i):i}return mt.prototype=r.filters=r.pseudos,r.setFilters=new mt,s=it.tokenize=function(t,e){var n,o,i,s,a,u,l,c=S[t+" "];if(c)return e?0:c.slice(0);for(a=t,u=[],l=r.preFilter;a;){for(s in n&&!(o=H.exec(a))||(o&&(a=a.slice(o[0].length)||a),u.push(i=[])),n=!1,(o=W.exec(a))&&(n=o.shift(),i.push({value:n,type:o[0].replace(G," ")}),a=a.slice(n.length)),r.filter)!(o=K[s].exec(a))||l[s]&&!(o=l[s](o))||(n=o.shift(),i.push({value:n,type:s,matches:o}),a=a.slice(n.length));if(!n)break}return e?a.length:a?it.error(t):S(t,u).slice(0)},a=it.compile=function(t,e){var n,r=[],o=[],i=w[t+" "];if(!i){for(e||(e=s(t)),n=e.length;n--;)(i=At(e[n]))[C]?r.push(i):o.push(i);(i=w(t,It(o,r))).selector=t}return i},u=it.select=function(t,e,n,o){var i,u,l,c,p,d="function"==typeof t&&t,h=!o&&s(t=d.selector||t);if(n=n||[],1===h.length){if((u=h[0]=h[0].slice(0)).length>2&&"ID"===(l=u[0]).type&&9===e.nodeType&&g&&r.relative[u[1].type]){if(!(e=(r.find.ID(l.matches[0].replace(Q,tt),e)||[])[0]))return n;d&&(e=e.parentNode),t=t.slice(u.shift().value.length)}for(i=K.needsContext.test(t)?0:u.length;i--&&(l=u[i],!r.relative[c=l.type]);)if((p=r.find[c])&&(o=p(l.matches[0].replace(Q,tt),J.test(u[0].type)&&gt(e.parentNode)||e))){if(u.splice(i,1),!(t=o.length&&yt(u)))return x.apply(n,o),n;break}}return(d||a(t,h))(o,e,!g,n,!e||J.test(t)&&gt(e.parentNode)||e),n},n.sortStable=C.split("").sort(_).join("")===C,n.detectDuplicates=!!p,d(),n.sortDetached=ut((function(t){return 1&t.compareDocumentPosition(h.createElement("fieldset"))})),ut((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||lt("type|href|height|width",(function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),n.attributes&&ut((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||lt("value",(function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),ut((function(t){return null==t.getAttribute("disabled")}))||lt(L,(function(t,e,n){var r;if(!n)return!0===t[e]?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null})),it}(o);T.find=_,(T.expr=_.selectors)[":"]=T.expr.pseudos,T.uniqueSort=T.unique=_.uniqueSort,T.text=_.getText,T.isXMLDoc=_.isXML,T.contains=_.contains,T.escapeSelector=_.escape;var N=function(t,e,n){for(var r=[],o=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(o&&T(t).is(n))break;r.push(t)}return r},D=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},O=T.expr.match.needsContext;function P(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var x=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function M(t,e,n){return b(e)?T.grep(t,(function(t,r){return!!e.call(t,r,t)!==n})):e.nodeType?T.grep(t,(function(t){return t===e!==n})):"string"!=typeof e?T.grep(t,(function(t){return d.call(e,t)>-1!==n})):T.filter(e,t,n)}T.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?T.find.matchesSelector(r,t)?[r]:[]:T.find.matches(t,T.grep(e,(function(t){return 1===t.nodeType})))},T.fn.extend({find:function(t){var e,n,r=this.length,o=this;if("string"!=typeof t)return this.pushStack(T(t).filter((function(){for(e=0;e<r;e++)if(T.contains(o[e],this))return!0})));for(n=this.pushStack([]),e=0;e<r;e++)T.find(t,o[e],n);return r>1?T.uniqueSort(n):n},filter:function(t){return this.pushStack(M(this,t||[],!1))},not:function(t){return this.pushStack(M(this,t||[],!0))},is:function(t){return!!M(this,"string"==typeof t&&O.test(t)?T(t):t||[],!1).length}});var R,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(T.fn.init=function(t,e,n){var r,o;if(!t)return this;if(n=n||R,"string"==typeof t){if(!(r="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:L.exec(t))||!r[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(r[1]){if(e=e instanceof T?e[0]:e,T.merge(this,T.parseHTML(r[1],e&&e.nodeType?e.ownerDocument||e:a,!0)),x.test(r[1])&&T.isPlainObject(e))for(r in e)b(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}return(o=a.getElementById(r[2]))&&(this[0]=o,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):b(t)?void 0!==n.ready?n.ready(t):t(T):T.makeArray(t,this)}).prototype=T.fn,R=T(a);var F=/^(?:parents|prev(?:Until|All))/,k={children:!0,contents:!0,next:!0,prev:!0};function B(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}T.fn.extend({has:function(t){var e=T(t,this),n=e.length;return this.filter((function(){for(var t=0;t<n;t++)if(T.contains(this,e[t]))return!0}))},closest:function(t,e){var n,r=0,o=this.length,i=[],s="string"!=typeof t&&T(t);if(!O.test(t))for(;r<o;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?s.index(n)>-1:1===n.nodeType&&T.find.matchesSelector(n,t))){i.push(n);break}return this.pushStack(i.length>1?T.uniqueSort(i):i)},index:function(t){return t?"string"==typeof t?d.call(T(t),this[0]):d.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(T.uniqueSort(T.merge(this.get(),T(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),T.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return N(t,"parentNode")},parentsUntil:function(t,e,n){return N(t,"parentNode",n)},next:function(t){return B(t,"nextSibling")},prev:function(t){return B(t,"previousSibling")},nextAll:function(t){return N(t,"nextSibling")},prevAll:function(t){return N(t,"previousSibling")},nextUntil:function(t,e,n){return N(t,"nextSibling",n)},prevUntil:function(t,e,n){return N(t,"previousSibling",n)},siblings:function(t){return D((t.parentNode||{}).firstChild,t)},children:function(t){return D(t.firstChild)},contents:function(t){return P(t,"iframe")?t.contentDocument:(P(t,"template")&&(t=t.content||t),T.merge([],t.childNodes))}},(function(t,e){T.fn[t]=function(n,r){var o=T.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(o=T.filter(r,o)),this.length>1&&(k[t]||T.uniqueSort(o),F.test(t)&&o.reverse()),this.pushStack(o)}}));var V=/[^\x20\t\r\n\f]+/g;function U(t){return t}function G(t){throw t}function H(t,e,n,r){var o;try{t&&b(o=t.promise)?o.call(t).done(e).fail(n):t&&b(o=t.then)?o.call(t,e,n):e.apply(void 0,[t].slice(r))}catch(t){n.apply(void 0,[t])}}T.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return T.each(t.match(V)||[],(function(t,n){e[n]=!0})),e}(t):T.extend({},t);var e,n,r,o,i=[],s=[],a=-1,u=function(){for(o=o||t.once,r=e=!0;s.length;a=-1)for(n=s.shift();++a<i.length;)!1===i[a].apply(n[0],n[1])&&t.stopOnFalse&&(a=i.length,n=!1);t.memory||(n=!1),e=!1,o&&(i=n?[]:"")},l={add:function(){return i&&(n&&!e&&(a=i.length-1,s.push(n)),function e(n){T.each(n,(function(n,r){b(r)?t.unique&&l.has(r)||i.push(r):r&&r.length&&"string"!==I(r)&&e(r)}))}(arguments),n&&!e&&u()),this},remove:function(){return T.each(arguments,(function(t,e){for(var n;(n=T.inArray(e,i,n))>-1;)i.splice(n,1),n<=a&&a--})),this},has:function(t){return t?T.inArray(t,i)>-1:i.length>0},empty:function(){return i&&(i=[]),this},disable:function(){return o=s=[],i=n="",this},disabled:function(){return!i},lock:function(){return o=s=[],n||e||(i=n=""),this},locked:function(){return!!o},fireWith:function(t,n){return o||(n=[t,(n=n||[]).slice?n.slice():n],s.push(n),e||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l},T.extend({Deferred:function(t){var e=[["notify","progress",T.Callbacks("memory"),T.Callbacks("memory"),2],["resolve","done",T.Callbacks("once memory"),T.Callbacks("once memory"),0,"resolved"],["reject","fail",T.Callbacks("once memory"),T.Callbacks("once memory"),1,"rejected"]],n="pending",i={state:function(){return n},always:function(){return s.done(arguments).fail(arguments),this},catch:function(t){return i.then(null,t)},pipe:function(){var t=arguments;return T.Deferred((function(n){T.each(e,(function(e,r){var o=b(t[r[4]])&&t[r[4]];s[r[1]]((function(){var t=o&&o.apply(this,arguments);t&&b(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,o?[t]:arguments)}))})),t=null})).promise()},then:function(t,n,i){var s=0;function a(t,e,n,i){return function(){var u=this,l=arguments,c=function(){var o,c;if(!(t<s)){if((o=n.apply(u,l))===e.promise())throw new TypeError("Thenable self-resolution");c=o&&("object"==(void 0===o?"undefined":r(o))||"function"==typeof o)&&o.then,b(c)?i?c.call(o,a(s,e,U,i),a(s,e,G,i)):(s++,c.call(o,a(s,e,U,i),a(s,e,G,i),a(s,e,U,e.notifyWith))):(n!==U&&(u=void 0,l=[o]),(i||e.resolveWith)(u,l))}},p=i?c:function(){try{c()}catch(r){T.Deferred.exceptionHook&&T.Deferred.exceptionHook(r,p.stackTrace),t+1>=s&&(n!==G&&(u=void 0,l=[r]),e.rejectWith(u,l))}};t?p():(T.Deferred.getStackHook&&(p.stackTrace=T.Deferred.getStackHook()),o.setTimeout(p))}}return T.Deferred((function(r){e[0][3].add(a(0,r,b(i)?i:U,r.notifyWith)),e[1][3].add(a(0,r,b(t)?t:U)),e[2][3].add(a(0,r,b(n)?n:G))})).promise()},promise:function(t){return null!=t?T.extend(t,i):i}},s={};return T.each(e,(function(t,r){var o=r[2],a=r[5];i[r[1]]=o.add,a&&o.add((function(){n=a}),e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),o.add(r[3].fire),s[r[0]]=function(){return s[r[0]+"With"](this===s?void 0:this,arguments),this},s[r[0]+"With"]=o.fireWith})),i.promise(s),t&&t.call(s,s),s},when:function(t){var e=arguments.length,n=e,r=Array(n),o=l.call(arguments),i=T.Deferred(),s=function(t){return function(n){r[t]=this,o[t]=arguments.length>1?l.call(arguments):n,--e||i.resolveWith(r,o)}};if(e<=1&&(H(t,i.done(s(n)).resolve,i.reject,!e),"pending"===i.state()||b(o[n]&&o[n].then)))return i.then();for(;n--;)H(o[n],s(n),i.reject);return i.promise()}});var W=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;T.Deferred.exceptionHook=function(t,e){o.console&&o.console.warn&&t&&W.test(t.name)&&o.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},T.readyException=function(t){o.setTimeout((function(){throw t}))};var j=T.Deferred();function z(){a.removeEventListener("DOMContentLoaded",z),o.removeEventListener("load",z),T.ready()}T.fn.ready=function(t){return j.then(t).catch((function(t){T.readyException(t)})),this},T.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--T.readyWait:T.isReady)||(T.isReady=!0,!0!==t&&--T.readyWait>0||j.resolveWith(a,[T]))}}),T.ready.then=j.then,"complete"===a.readyState||"loading"!==a.readyState&&!a.documentElement.doScroll?o.setTimeout(T.ready):(a.addEventListener("DOMContentLoaded",z),o.addEventListener("load",z));var Y=function t(e,n,r,o,i,s,a){var u=0,l=e.length,c=null==r;if("object"===I(r))for(u in i=!0,r)t(e,n,u,r[u],!0,s,a);else if(void 0!==o&&(i=!0,b(o)||(a=!0),c&&(a?(n.call(e,o),n=null):(c=n,n=function(t,e,n){return c.call(T(t),n)})),n))for(;u<l;u++)n(e[u],r,a?o:o.call(e[u],u,n(e[u],r)));return i?e:c?n.call(e):l?n(e[0],r):s},K=/^-ms-/,X=/-([a-z])/g;function $(t,e){return e.toUpperCase()}function q(t){return t.replace(K,"ms-").replace(X,$)}var Z=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function J(){this.expando=T.expando+J.uid++}J.uid=1,J.prototype={cache:function(t){var e=t[this.expando];return e||(e={},Z(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var r,o=this.cache(t);if("string"==typeof e)o[q(e)]=n;else for(r in e)o[q(r)]=e[r];return o},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][q(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r=t[this.expando];if(void 0!==r){if(void 0!==e){n=(e=Array.isArray(e)?e.map(q):(e=q(e))in r?[e]:e.match(V)||[]).length;for(;n--;)delete r[e[n]]}(void 0===e||T.isEmptyObject(r))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!T.isEmptyObject(e)}};var Q=new J,tt=new J,et=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,nt=/[A-Z]/g;function rt(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(nt,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(r))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:et.test(t)?JSON.parse(t):t)}(n)}catch(t){}tt.set(t,e,n)}else n=void 0;return n}T.extend({hasData:function(t){return tt.hasData(t)||Q.hasData(t)},data:function(t,e,n){return tt.access(t,e,n)},removeData:function(t,e){tt.remove(t,e)},_data:function(t,e,n){return Q.access(t,e,n)},_removeData:function(t,e){Q.remove(t,e)}}),T.fn.extend({data:function(t,e){var n,o,i,s=this[0],a=s&&s.attributes;if(void 0===t){if(this.length&&(i=tt.get(s),1===s.nodeType&&!Q.get(s,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(o=a[n].name).indexOf("data-")&&(o=q(o.slice(5)),rt(s,o,i[o]));Q.set(s,"hasDataAttrs",!0)}return i}return"object"==(void 0===t?"undefined":r(t))?this.each((function(){tt.set(this,t)})):Y(this,(function(e){var n;if(s&&void 0===e){if(void 0!==(n=tt.get(s,t)))return n;if(void 0!==(n=rt(s,t)))return n}else this.each((function(){tt.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){tt.remove(this,t)}))}}),T.extend({queue:function(t,e,n){var r;if(t)return e=(e||"fx")+"queue",r=Q.get(t,e),n&&(!r||Array.isArray(n)?r=Q.access(t,e,T.makeArray(n)):r.push(n)),r||[]},dequeue:function(t,e){var n=T.queue(t,e=e||"fx"),r=n.length,o=n.shift(),i=T._queueHooks(t,e);"inprogress"===o&&(o=n.shift(),r--),o&&("fx"===e&&n.unshift("inprogress"),delete i.stop,o.call(t,(function(){T.dequeue(t,e)}),i)),!r&&i&&i.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return Q.get(t,n)||Q.access(t,n,{empty:T.Callbacks("once memory").add((function(){Q.remove(t,[e+"queue",n])}))})}}),T.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?T.queue(this[0],t):void 0===e?this:this.each((function(){var n=T.queue(this,t,e);T._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&T.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){T.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,o=T.Deferred(),i=this,s=this.length,a=function(){--r||o.resolveWith(i,[i])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)(n=Q.get(i[s],t+"queueHooks"))&&n.empty&&(r++,n.empty.add(a));return a(),o.promise(e)}});var ot=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,it=new RegExp("^(?:([+-])=|)("+ot+")([a-z%]*)$","i"),st=["Top","Right","Bottom","Left"],at=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&T.contains(t.ownerDocument,t)&&"none"===T.css(t,"display")},ut=function(t,e,n,r){var o,i,s={};for(i in e)s[i]=t.style[i],t.style[i]=e[i];for(i in o=n.apply(t,r||[]),e)t.style[i]=s[i];return o};function lt(t,e,n,r){var o,i,s=20,a=r?function(){return r.cur()}:function(){return T.css(t,e,"")},u=a(),l=n&&n[3]||(T.cssNumber[e]?"":"px"),c=(T.cssNumber[e]||"px"!==l&&+u)&&it.exec(T.css(t,e));if(c&&c[3]!==l){for(u/=2,l=l||c[3],c=+u||1;s--;)T.style(t,e,c+l),(1-i)*(1-(i=a()/u||.5))<=0&&(s=0),c/=i;T.style(t,e,(c*=2)+l),n=n||[]}return n&&(c=+c||+u||0,o=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=o)),o}var ct={};function pt(t){var e,n=t.ownerDocument,r=t.nodeName,o=ct[r];return o||(e=n.body.appendChild(n.createElement(r)),o=T.css(e,"display"),e.parentNode.removeChild(e),"none"===o&&(o="block"),ct[r]=o,o)}function dt(t,e){for(var n,r,o=[],i=0,s=t.length;i<s;i++)(r=t[i]).style&&(n=r.style.display,e?("none"===n&&(o[i]=Q.get(r,"display")||null,o[i]||(r.style.display="")),""===r.style.display&&at(r)&&(o[i]=pt(r))):"none"!==n&&(o[i]="none",Q.set(r,"display",n)));for(i=0;i<s;i++)null!=o[i]&&(t[i].style.display=o[i]);return t}T.fn.extend({show:function(){return dt(this,!0)},hide:function(){return dt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){at(this)?T(this).show():T(this).hide()}))}});var ht=/^(?:checkbox|radio)$/i,ft=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,gt=/^$|^module$|\/(?:java|ecma)script/i,mt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function yt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&P(t,e)?T.merge([t],n):n}function vt(t,e){for(var n=0,r=t.length;n<r;n++)Q.set(t[n],"globalEval",!e||Q.get(e[n],"globalEval"))}mt.optgroup=mt.option,mt.tbody=mt.tfoot=mt.colgroup=mt.caption=mt.thead,mt.th=mt.td;var bt=/<|&#?\w+;/;function Ct(t,e,n,r,o){for(var i,s,a,u,l,c,p=e.createDocumentFragment(),d=[],h=0,f=t.length;h<f;h++)if((i=t[h])||0===i)if("object"===I(i))T.merge(d,i.nodeType?[i]:i);else if(bt.test(i)){for(s=s||p.appendChild(e.createElement("div")),a=(ft.exec(i)||["",""])[1].toLowerCase(),u=mt[a]||mt._default,s.innerHTML=u[1]+T.htmlPrefilter(i)+u[2],c=u[0];c--;)s=s.lastChild;T.merge(d,s.childNodes),(s=p.firstChild).textContent=""}else d.push(e.createTextNode(i));for(p.textContent="",h=0;i=d[h++];)if(r&&T.inArray(i,r)>-1)o&&o.push(i);else if(l=T.contains(i.ownerDocument,i),s=yt(p.appendChild(i),"script"),l&&vt(s),n)for(c=0;i=s[c++];)gt.test(i.type||"")&&n.push(i);return p}!function(){var t=a.createDocumentFragment().appendChild(a.createElement("div")),e=a.createElement("input");e.setAttribute("type","radio"),e.setAttribute("checked","checked"),e.setAttribute("name","t"),t.appendChild(e),v.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Et=a.documentElement,At=/^key/,It=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Tt=/^([^.]*)(?:\.(.+)|)/;function St(){return!0}function wt(){return!1}function _t(){try{return a.activeElement}catch(t){}}function Nt(t,e,n,o,i,s){var a,u;if("object"==(void 0===e?"undefined":r(e))){for(u in"string"!=typeof n&&(o=o||n,n=void 0),e)Nt(t,u,n,o,e[u],s);return t}if(null==o&&null==i?(i=n,o=n=void 0):null==i&&("string"==typeof n?(i=o,o=void 0):(i=o,o=n,n=void 0)),!1===i)i=wt;else if(!i)return t;return 1===s&&(a=i,(i=function(t){return T().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=T.guid++)),t.each((function(){T.event.add(this,e,i,o,n)}))}T.event={global:{},add:function(t,e,n,r,o){var i,s,a,u,l,c,p,d,h,f,g,m=Q.get(t);if(m)for(n.handler&&(n=(i=n).handler,o=i.selector),o&&T.find.matchesSelector(Et,o),n.guid||(n.guid=T.guid++),(u=m.events)||(u=m.events={}),(s=m.handle)||(s=m.handle=function(e){return void 0!==T&&T.event.triggered!==e.type?T.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(V)||[""]).length;l--;)h=g=(a=Tt.exec(e[l])||[])[1],f=(a[2]||"").split(".").sort(),h&&(p=T.event.special[h]||{},h=(o?p.delegateType:p.bindType)||h,p=T.event.special[h]||{},c=T.extend({type:h,origType:g,data:r,handler:n,guid:n.guid,selector:o,needsContext:o&&T.expr.match.needsContext.test(o),namespace:f.join(".")},i),(d=u[h])||((d=u[h]=[]).delegateCount=0,p.setup&&!1!==p.setup.call(t,r,f,s)||t.addEventListener&&t.addEventListener(h,s)),p.add&&(p.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),o?d.splice(d.delegateCount++,0,c):d.push(c),T.event.global[h]=!0)},remove:function(t,e,n,r,o){var i,s,a,u,l,c,p,d,h,f,g,m=Q.hasData(t)&&Q.get(t);if(m&&(u=m.events)){for(l=(e=(e||"").match(V)||[""]).length;l--;)if(h=g=(a=Tt.exec(e[l])||[])[1],f=(a[2]||"").split(".").sort(),h){for(p=T.event.special[h]||{},d=u[h=(r?p.delegateType:p.bindType)||h]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=i=d.length;i--;)c=d[i],!o&&g!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(d.splice(i,1),c.selector&&d.delegateCount--,p.remove&&p.remove.call(t,c));s&&!d.length&&(p.teardown&&!1!==p.teardown.call(t,f,m.handle)||T.removeEvent(t,h,m.handle),delete u[h])}else for(h in u)T.event.remove(t,h+e[l],n,r,!0);T.isEmptyObject(u)&&Q.remove(t,"handle events")}},dispatch:function(t){var e,n,r,o,i,s,a=T.event.fix(t),u=new Array(arguments.length),l=(Q.get(this,"events")||{})[a.type]||[],c=T.event.special[a.type]||{};for(u[0]=a,e=1;e<arguments.length;e++)u[e]=arguments[e];if(a.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,a)){for(s=T.event.handlers.call(this,a,l),e=0;(o=s[e++])&&!a.isPropagationStopped();)for(a.currentTarget=o.elem,n=0;(i=o.handlers[n++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(i.namespace)||(a.handleObj=i,a.data=i.data,void 0!==(r=((T.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,u))&&!1===(a.result=r)&&(a.preventDefault(),a.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,a),a.result}},handlers:function(t,e){var n,r,o,i,s,a=[],u=e.delegateCount,l=t.target;if(u&&l.nodeType&&!("click"===t.type&&t.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==t.type||!0!==l.disabled)){for(i=[],s={},n=0;n<u;n++)void 0===s[o=(r=e[n]).selector+" "]&&(s[o]=r.needsContext?T(o,this).index(l)>-1:T.find(o,this,null,[l]).length),s[o]&&i.push(r);i.length&&a.push({elem:l,handlers:i})}return l=this,u<e.length&&a.push({elem:l,handlers:e.slice(u)}),a},addProp:function(t,e){Object.defineProperty(T.Event.prototype,t,{enumerable:!0,configurable:!0,get:b(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[T.expando]?t:new T.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==_t()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===_t()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&P(this,"input"))return this.click(),!1},_default:function(t){return P(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},T.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},(T.Event=function(t,e){if(!(this instanceof T.Event))return new T.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?St:wt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&T.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[T.expando]=!0}).prototype={constructor:T.Event,isDefaultPrevented:wt,isPropagationStopped:wt,isImmediatePropagationStopped:wt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=St,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=St,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=St,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},T.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&At.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&It.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},T.event.addProp),T.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){T.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=this,o=t.relatedTarget,i=t.handleObj;return o&&(o===r||T.contains(r,o))||(t.type=i.origType,n=i.handler.apply(this,arguments),t.type=e),n}}})),T.fn.extend({on:function(t,e,n,r){return Nt(this,t,e,n,r)},one:function(t,e,n,r){return Nt(this,t,e,n,r,1)},off:function(t,e,n){var o,i;if(t&&t.preventDefault&&t.handleObj)return o=t.handleObj,T(t.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler),this;if("object"==(void 0===t?"undefined":r(t))){for(i in t)this.off(i,e,t[i]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=wt),this.each((function(){T.event.remove(this,t,n,e)}))}});var Dt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Ot=/<script|<style|<link/i,Pt=/checked\s*(?:[^=]|=\s*.checked.)/i,xt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Mt(t,e){return P(t,"table")&&P(11!==e.nodeType?e:e.firstChild,"tr")&&T(t).children("tbody")[0]||t}function Rt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Lt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Ft(t,e){var n,r,o,i,s,a,u,l;if(1===e.nodeType){if(Q.hasData(t)&&(i=Q.access(t),s=Q.set(e,i),l=i.events))for(o in delete s.handle,s.events={},l)for(n=0,r=l[o].length;n<r;n++)T.event.add(e,o,l[o][n]);tt.hasData(t)&&(a=tt.access(t),u=T.extend({},a),tt.set(e,u))}}function kt(t,e){var n=e.nodeName.toLowerCase();"input"===n&&ht.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function Bt(t,e,n,r){e=c.apply([],e);var o,i,s,a,u,l,p=0,d=t.length,h=d-1,f=e[0],g=b(f);if(g||d>1&&"string"==typeof f&&!v.checkClone&&Pt.test(f))return t.each((function(o){var i=t.eq(o);g&&(e[0]=f.call(this,o,i.html())),Bt(i,e,n,r)}));if(d&&(i=(o=Ct(e,t[0].ownerDocument,!1,t,r)).firstChild,1===o.childNodes.length&&(o=i),i||r)){for(a=(s=T.map(yt(o,"script"),Rt)).length;p<d;p++)u=o,p!==h&&(u=T.clone(u,!0,!0),a&&T.merge(s,yt(u,"script"))),n.call(t[p],u,p);if(a)for(l=s[s.length-1].ownerDocument,T.map(s,Lt),p=0;p<a;p++)u=s[p],gt.test(u.type||"")&&!Q.access(u,"globalEval")&&T.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?T._evalUrl&&T._evalUrl(u.src):A(u.textContent.replace(xt,""),l,u))}return t}function Vt(t,e,n){for(var r,o=e?T.filter(e,t):t,i=0;null!=(r=o[i]);i++)n||1!==r.nodeType||T.cleanData(yt(r)),r.parentNode&&(n&&T.contains(r.ownerDocument,r)&&vt(yt(r,"script")),r.parentNode.removeChild(r));return t}T.extend({htmlPrefilter:function(t){return t.replace(Dt,"<$1></$2>")},clone:function(t,e,n){var r,o,i,s,a=t.cloneNode(!0),u=T.contains(t.ownerDocument,t);if(!(v.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||T.isXMLDoc(t)))for(s=yt(a),r=0,o=(i=yt(t)).length;r<o;r++)kt(i[r],s[r]);if(e)if(n)for(i=i||yt(t),s=s||yt(a),r=0,o=i.length;r<o;r++)Ft(i[r],s[r]);else Ft(t,a);return(s=yt(a,"script")).length>0&&vt(s,!u&&yt(t,"script")),a},cleanData:function(t){for(var e,n,r,o=T.event.special,i=0;void 0!==(n=t[i]);i++)if(Z(n)){if(e=n[Q.expando]){if(e.events)for(r in e.events)o[r]?T.event.remove(n,r):T.removeEvent(n,r,e.handle);n[Q.expando]=void 0}n[tt.expando]&&(n[tt.expando]=void 0)}}}),T.fn.extend({detach:function(t){return Vt(this,t,!0)},remove:function(t){return Vt(this,t)},text:function(t){return Y(this,(function(t){return void 0===t?T.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return Bt(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Mt(this,t).appendChild(t)}))},prepend:function(){return Bt(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Mt(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return Bt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return Bt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(T.cleanData(yt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return T.clone(this,t,e)}))},html:function(t){return Y(this,(function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Ot.test(t)&&!mt[(ft.exec(t)||["",""])[1].toLowerCase()]){t=T.htmlPrefilter(t);try{for(;n<r;n++)1===(e=this[n]||{}).nodeType&&(T.cleanData(yt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return Bt(this,arguments,(function(e){var n=this.parentNode;T.inArray(this,t)<0&&(T.cleanData(yt(this)),n&&n.replaceChild(e,this))}),t)}}),T.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){T.fn[t]=function(t){for(var n,r=[],o=T(t),i=o.length-1,s=0;s<=i;s++)n=s===i?this:this.clone(!0),T(o[s])[e](n),p.apply(r,n.get());return this.pushStack(r)}}));var Ut=new RegExp("^("+ot+")(?!px)[a-z%]+$","i"),Gt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=o),e.getComputedStyle(t)},Ht=new RegExp(st.join("|"),"i");function Wt(t,e,n){var r,o,i,s,a=t.style;return(n=n||Gt(t))&&(""!==(s=n.getPropertyValue(e)||n[e])||T.contains(t.ownerDocument,t)||(s=T.style(t,e)),!v.pixelBoxStyles()&&Ut.test(s)&&Ht.test(e)&&(r=a.width,o=a.minWidth,i=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=r,a.minWidth=o,a.maxWidth=i)),void 0!==s?s+"":s}function jt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Et.appendChild(l).appendChild(c);var t=o.getComputedStyle(c);n="1%"!==t.top,u=12===e(t.marginLeft),c.style.right="60%",s=36===e(t.right),r=36===e(t.width),c.style.position="absolute",i=36===c.offsetWidth||"absolute",Et.removeChild(l),c=null}}function e(t){return Math.round(parseFloat(t))}var n,r,i,s,u,l=a.createElement("div"),c=a.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===c.style.backgroundClip,T.extend(v,{boxSizingReliable:function(){return t(),r},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),u},scrollboxSize:function(){return t(),i}}))}();var zt=/^(none|table(?!-c[ea]).+)/,Yt=/^--/,Kt={position:"absolute",visibility:"hidden",display:"block"},Xt={letterSpacing:"0",fontWeight:"400"},$t=["Webkit","Moz","ms"],qt=a.createElement("div").style;function Zt(t){var e=T.cssProps[t];return e||(e=T.cssProps[t]=function(t){if(t in qt)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=$t.length;n--;)if((t=$t[n]+e)in qt)return t}(t)||t),e}function Jt(t,e,n){var r=it.exec(e);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):e}function Qt(t,e,n,r,o,i){var s="width"===e?1:0,a=0,u=0;if(n===(r?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(u+=T.css(t,n+st[s],!0,o)),r?("content"===n&&(u-=T.css(t,"padding"+st[s],!0,o)),"margin"!==n&&(u-=T.css(t,"border"+st[s]+"Width",!0,o))):(u+=T.css(t,"padding"+st[s],!0,o),"padding"!==n?u+=T.css(t,"border"+st[s]+"Width",!0,o):a+=T.css(t,"border"+st[s]+"Width",!0,o));return!r&&i>=0&&(u+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-i-u-a-.5))),u}function te(t,e,n){var r=Gt(t),o=Wt(t,e,r),i="border-box"===T.css(t,"boxSizing",!1,r),s=i;if(Ut.test(o)){if(!n)return o;o="auto"}return s=s&&(v.boxSizingReliable()||o===t.style[e]),("auto"===o||!parseFloat(o)&&"inline"===T.css(t,"display",!1,r))&&(o=t["offset"+e[0].toUpperCase()+e.slice(1)],s=!0),(o=parseFloat(o)||0)+Qt(t,e,n||(i?"border":"content"),s,r,o)+"px"}function ee(t,e,n,r,o){return new ee.prototype.init(t,e,n,r,o)}T.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Wt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,o){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,s,a,u=q(e),l=Yt.test(e),c=t.style;if(l||(e=Zt(u)),a=T.cssHooks[e]||T.cssHooks[u],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(t,!1,o))?i:c[e];"string"==(s=void 0===n?"undefined":r(n))&&(i=it.exec(n))&&i[1]&&(n=lt(t,e,i),s="number"),null!=n&&n==n&&("number"===s&&(n+=i&&i[3]||(T.cssNumber[u]?"":"px")),v.clearCloneStyle||""!==n||0!==e.indexOf("background")||(c[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,o))||(l?c.setProperty(e,n):c[e]=n))}},css:function(t,e,n,r){var o,i,s,a=q(e);return Yt.test(e)||(e=Zt(a)),(s=T.cssHooks[e]||T.cssHooks[a])&&"get"in s&&(o=s.get(t,!0,n)),void 0===o&&(o=Wt(t,e,r)),"normal"===o&&e in Xt&&(o=Xt[e]),""===n||n?(i=parseFloat(o),!0===n||isFinite(i)?i||0:o):o}}),T.each(["height","width"],(function(t,e){T.cssHooks[e]={get:function(t,n,r){if(n)return!zt.test(T.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?te(t,e,r):ut(t,Kt,(function(){return te(t,e,r)}))},set:function(t,n,r){var o,i=Gt(t),s="border-box"===T.css(t,"boxSizing",!1,i),a=r&&Qt(t,e,r,s,i);return s&&v.scrollboxSize()===i.position&&(a-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(i[e])-Qt(t,e,"border",!1,i)-.5)),a&&(o=it.exec(n))&&"px"!==(o[3]||"px")&&(t.style[e]=n,n=T.css(t,e)),Jt(0,n,a)}}})),T.cssHooks.marginLeft=jt(v.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(Wt(t,"marginLeft"))||t.getBoundingClientRect().left-ut(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),T.each({margin:"",padding:"",border:"Width"},(function(t,e){T.cssHooks[t+e]={expand:function(n){for(var r=0,o={},i="string"==typeof n?n.split(" "):[n];r<4;r++)o[t+st[r]+e]=i[r]||i[r-2]||i[0];return o}},"margin"!==t&&(T.cssHooks[t+e].set=Jt)})),T.fn.extend({css:function(t,e){return Y(this,(function(t,e,n){var r,o,i={},s=0;if(Array.isArray(e)){for(r=Gt(t),o=e.length;s<o;s++)i[e[s]]=T.css(t,e[s],!1,r);return i}return void 0!==n?T.style(t,e,n):T.css(t,e)}),t,e,arguments.length>1)}}),T.Tween=ee,ee.prototype={constructor:ee,init:function(t,e,n,r,o,i){this.elem=t,this.prop=n,this.easing=o||T.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=i||(T.cssNumber[n]?"":"px")},cur:function(){var t=ee.propHooks[this.prop];return t&&t.get?t.get(this):ee.propHooks._default.get(this)},run:function(t){var e,n=ee.propHooks[this.prop];return this.options.duration?this.pos=e=T.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ee.propHooks._default.set(this),this}},ee.prototype.init.prototype=ee.prototype,ee.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=T.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){T.fx.step[t.prop]?T.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[T.cssProps[t.prop]]&&!T.cssHooks[t.prop]?t.elem[t.prop]=t.now:T.style(t.elem,t.prop,t.now+t.unit)}}},ee.propHooks.scrollTop=ee.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},T.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},(T.fx=ee.prototype.init).step={};var ne,re,oe=/^(?:toggle|show|hide)$/,ie=/queueHooks$/;function se(){re&&(!1===a.hidden&&o.requestAnimationFrame?o.requestAnimationFrame(se):o.setTimeout(se,T.fx.interval),T.fx.tick())}function ae(){return o.setTimeout((function(){ne=void 0})),ne=Date.now()}function ue(t,e){var n,r=0,o={height:t};for(e=e?1:0;r<4;r+=2-e)o["margin"+(n=st[r])]=o["padding"+n]=t;return e&&(o.opacity=o.width=t),o}function le(t,e,n){for(var r,o=(ce.tweeners[e]||[]).concat(ce.tweeners["*"]),i=0,s=o.length;i<s;i++)if(r=o[i].call(n,e,t))return r}function ce(t,e,n){var r,o,i=0,s=ce.prefilters.length,a=T.Deferred().always((function(){delete u.elem})),u=function(){if(o)return!1;for(var e=ne||ae(),n=Math.max(0,l.startTime+l.duration-e),r=1-(n/l.duration||0),i=0,s=l.tweens.length;i<s;i++)l.tweens[i].run(r);return a.notifyWith(t,[l,r,n]),r<1&&s?n:(s||a.notifyWith(t,[l,1,0]),a.resolveWith(t,[l]),!1)},l=a.promise({elem:t,props:T.extend({},e),opts:T.extend(!0,{specialEasing:{},easing:T.easing._default},n),originalProperties:e,originalOptions:n,startTime:ne||ae(),duration:n.duration,tweens:[],createTween:function(e,n){var r=T.Tween(t,l.opts,e,n,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(r),r},stop:function(e){var n=0,r=e?l.tweens.length:0;if(o)return this;for(o=!0;n<r;n++)l.tweens[n].run(1);return e?(a.notifyWith(t,[l,1,0]),a.resolveWith(t,[l,e])):a.rejectWith(t,[l,e]),this}}),c=l.props;for(function(t,e){var n,r,o,i,s;for(n in t)if(o=e[r=q(n)],i=t[n],Array.isArray(i)&&(o=i[1],i=t[n]=i[0]),n!==r&&(t[r]=i,delete t[n]),(s=T.cssHooks[r])&&"expand"in s)for(n in i=s.expand(i),delete t[r],i)n in t||(t[n]=i[n],e[n]=o);else e[r]=o}(c,l.opts.specialEasing);i<s;i++)if(r=ce.prefilters[i].call(l,t,c,l.opts))return b(r.stop)&&(T._queueHooks(l.elem,l.opts.queue).stop=r.stop.bind(r)),r;return T.map(c,le,l),b(l.opts.start)&&l.opts.start.call(t,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),T.fx.timer(T.extend(u,{elem:t,anim:l,queue:l.opts.queue})),l}T.Animation=T.extend(ce,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return lt(n.elem,t,it.exec(e),n),n}]},tweener:function(t,e){b(t)?(e=t,t=["*"]):t=t.match(V);for(var n,r=0,o=t.length;r<o;r++)n=t[r],ce.tweeners[n]=ce.tweeners[n]||[],ce.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var r,o,i,s,a,u,l,c,p="width"in e||"height"in e,d=this,h={},f=t.style,g=t.nodeType&&at(t),m=Q.get(t,"fxshow");for(r in n.queue||(null==(s=T._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,d.always((function(){d.always((function(){s.unqueued--,T.queue(t,"fx").length||s.empty.fire()}))}))),e)if(o=e[r],oe.test(o)){if(delete e[r],i=i||"toggle"===o,o===(g?"hide":"show")){if("show"!==o||!m||void 0===m[r])continue;g=!0}h[r]=m&&m[r]||T.style(t,r)}if((u=!T.isEmptyObject(e))||!T.isEmptyObject(h))for(r in p&&1===t.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],null==(l=m&&m.display)&&(l=Q.get(t,"display")),"none"===(c=T.css(t,"display"))&&(l?c=l:(dt([t],!0),l=t.style.display||l,c=T.css(t,"display"),dt([t]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===T.css(t,"float")&&(u||(d.done((function(){f.display=l})),null==l&&(c=f.display,l="none"===c?"":c)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",d.always((function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}))),u=!1,h)u||(m?"hidden"in m&&(g=m.hidden):m=Q.access(t,"fxshow",{display:l}),i&&(m.hidden=!g),g&&dt([t],!0),d.done((function(){for(r in g||dt([t]),Q.remove(t,"fxshow"),h)T.style(t,r,h[r])}))),u=le(g?m[r]:0,r,d),r in m||(m[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(t,e){e?ce.prefilters.unshift(t):ce.prefilters.push(t)}}),T.speed=function(t,e,n){var o=t&&"object"==(void 0===t?"undefined":r(t))?T.extend({},t):{complete:n||!n&&e||b(t)&&t,duration:t,easing:n&&e||e&&!b(e)&&e};return T.fx.off?o.duration=0:"number"!=typeof o.duration&&(o.duration in T.fx.speeds?o.duration=T.fx.speeds[o.duration]:o.duration=T.fx.speeds._default),null!=o.queue&&!0!==o.queue||(o.queue="fx"),o.old=o.complete,o.complete=function(){b(o.old)&&o.old.call(this),o.queue&&T.dequeue(this,o.queue)},o},T.fn.extend({fadeTo:function(t,e,n,r){return this.filter(at).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var o=T.isEmptyObject(t),i=T.speed(e,n,r),s=function(){var e=ce(this,T.extend({},t),i);(o||Q.get(this,"finish"))&&e.stop(!0)};return s.finish=s,o||!1===i.queue?this.each(s):this.queue(i.queue,s)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each((function(){var e=!0,o=null!=t&&t+"queueHooks",i=T.timers,s=Q.get(this);if(o)s[o]&&s[o].stop&&r(s[o]);else for(o in s)s[o]&&s[o].stop&&ie.test(o)&&r(s[o]);for(o=i.length;o--;)i[o].elem!==this||null!=t&&i[o].queue!==t||(i[o].anim.stop(n),e=!1,i.splice(o,1));!e&&n||T.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,n=Q.get(this),r=n[t+"queue"],o=n[t+"queueHooks"],i=T.timers,s=r?r.length:0;for(n.finish=!0,T.queue(this,t,[]),o&&o.stop&&o.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===t&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<s;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish}))}}),T.each(["toggle","show","hide"],(function(t,e){var n=T.fn[e];T.fn[e]=function(t,r,o){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(ue(e,!0),t,r,o)}})),T.each({slideDown:ue("show"),slideUp:ue("hide"),slideToggle:ue("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){T.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}})),T.timers=[],T.fx.tick=function(){var t,e=0,n=T.timers;for(ne=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||T.fx.stop(),ne=void 0},T.fx.timer=function(t){T.timers.push(t),T.fx.start()},T.fx.interval=13,T.fx.start=function(){re||(re=!0,se())},T.fx.stop=function(){re=null},T.fx.speeds={slow:600,fast:200,_default:400},T.fn.delay=function(t,e){return t=T.fx&&T.fx.speeds[t]||t,e=e||"fx",this.queue(e,(function(e,n){var r=o.setTimeout(e,t);n.stop=function(){o.clearTimeout(r)}}))},function(){var t=a.createElement("input"),e=a.createElement("select").appendChild(a.createElement("option"));t.type="checkbox",v.checkOn=""!==t.value,v.optSelected=e.selected,(t=a.createElement("input")).value="t",t.type="radio",v.radioValue="t"===t.value}();var pe,de=T.expr.attrHandle;T.fn.extend({attr:function(t,e){return Y(this,T.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){T.removeAttr(this,t)}))}}),T.extend({attr:function(t,e,n){var r,o,i=t.nodeType;if(3!==i&&8!==i&&2!==i)return void 0===t.getAttribute?T.prop(t,e,n):(1===i&&T.isXMLDoc(t)||(o=T.attrHooks[e.toLowerCase()]||(T.expr.match.bool.test(e)?pe:void 0)),void 0!==n?null===n?void T.removeAttr(t,e):o&&"set"in o&&void 0!==(r=o.set(t,n,e))?r:(t.setAttribute(e,n+""),n):o&&"get"in o&&null!==(r=o.get(t,e))?r:null==(r=T.find.attr(t,e))?void 0:r)},attrHooks:{type:{set:function(t,e){if(!v.radioValue&&"radio"===e&&P(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r=0,o=e&&e.match(V);if(o&&1===t.nodeType)for(;n=o[r++];)t.removeAttribute(n)}}),pe={set:function(t,e,n){return!1===e?T.removeAttr(t,n):t.setAttribute(n,n),n}},T.each(T.expr.match.bool.source.match(/\w+/g),(function(t,e){var n=de[e]||T.find.attr;de[e]=function(t,e,r){var o,i,s=e.toLowerCase();return r||(i=de[s],de[s]=o,o=null!=n(t,e,r)?s:null,de[s]=i),o}}));var he=/^(?:input|select|textarea|button)$/i,fe=/^(?:a|area)$/i;function ge(t){return(t.match(V)||[]).join(" ")}function me(t){return t.getAttribute&&t.getAttribute("class")||""}function ye(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(V)||[]}T.fn.extend({prop:function(t,e){return Y(this,T.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[T.propFix[t]||t]}))}}),T.extend({prop:function(t,e,n){var r,o,i=t.nodeType;if(3!==i&&8!==i&&2!==i)return 1===i&&T.isXMLDoc(t)||(e=T.propFix[e]||e,o=T.propHooks[e]),void 0!==n?o&&"set"in o&&void 0!==(r=o.set(t,n,e))?r:t[e]=n:o&&"get"in o&&null!==(r=o.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=T.find.attr(t,"tabindex");return e?parseInt(e,10):he.test(t.nodeName)||fe.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(T.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),T.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){T.propFix[this.toLowerCase()]=this})),T.fn.extend({addClass:function(t){var e,n,r,o,i,s,a,u=0;if(b(t))return this.each((function(e){T(this).addClass(t.call(this,e,me(this)))}));if((e=ye(t)).length)for(;n=this[u++];)if(o=me(n),r=1===n.nodeType&&" "+ge(o)+" "){for(s=0;i=e[s++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");o!==(a=ge(r))&&n.setAttribute("class",a)}return this},removeClass:function(t){var e,n,r,o,i,s,a,u=0;if(b(t))return this.each((function(e){T(this).removeClass(t.call(this,e,me(this)))}));if(!arguments.length)return this.attr("class","");if((e=ye(t)).length)for(;n=this[u++];)if(o=me(n),r=1===n.nodeType&&" "+ge(o)+" "){for(s=0;i=e[s++];)for(;r.indexOf(" "+i+" ")>-1;)r=r.replace(" "+i+" "," ");o!==(a=ge(r))&&n.setAttribute("class",a)}return this},toggleClass:function(t,e){var n=void 0===t?"undefined":r(t),o="string"===n||Array.isArray(t);return"boolean"==typeof e&&o?e?this.addClass(t):this.removeClass(t):b(t)?this.each((function(n){T(this).toggleClass(t.call(this,n,me(this),e),e)})):this.each((function(){var e,r,i,s;if(o)for(r=0,i=T(this),s=ye(t);e=s[r++];)i.hasClass(e)?i.removeClass(e):i.addClass(e);else void 0!==t&&"boolean"!==n||((e=me(this))&&Q.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":Q.get(this,"__className__")||""))}))},hasClass:function(t){var e,n,r=0;for(e=" "+t+" ";n=this[r++];)if(1===n.nodeType&&(" "+ge(me(n))+" ").indexOf(e)>-1)return!0;return!1}});var ve=/\r/g;T.fn.extend({val:function(t){var e,n,r,o=this[0];return arguments.length?(r=b(t),this.each((function(n){var o;1===this.nodeType&&(null==(o=r?t.call(this,n,T(this).val()):t)?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=T.map(o,(function(t){return null==t?"":t+""}))),(e=T.valHooks[this.type]||T.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,o,"value")||(this.value=o))}))):o?(e=T.valHooks[o.type]||T.valHooks[o.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(o,"value"))?n:"string"==typeof(n=o.value)?n.replace(ve,""):null==n?"":n:void 0}}),T.extend({valHooks:{option:{get:function(t){var e=T.find.attr(t,"value");return null!=e?e:ge(T.text(t))}},select:{get:function(t){var e,n,r,o=t.options,i=t.selectedIndex,s="select-one"===t.type,a=s?null:[],u=s?i+1:o.length;for(r=i<0?u:s?i:0;r<u;r++)if(((n=o[r]).selected||r===i)&&!n.disabled&&(!n.parentNode.disabled||!P(n.parentNode,"optgroup"))){if(e=T(n).val(),s)return e;a.push(e)}return a},set:function(t,e){for(var n,r,o=t.options,i=T.makeArray(e),s=o.length;s--;)((r=o[s]).selected=T.inArray(T.valHooks.option.get(r),i)>-1)&&(n=!0);return n||(t.selectedIndex=-1),i}}}}),T.each(["radio","checkbox"],(function(){T.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=T.inArray(T(t).val(),e)>-1}},v.checkOn||(T.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})),v.focusin="onfocusin"in o;var be=/^(?:focusinfocus|focusoutblur)$/,Ce=function(t){t.stopPropagation()};T.extend(T.event,{trigger:function(t,e,n,i){var s,u,l,c,p,d,h,f,m=[n||a],y=g.call(t,"type")?t.type:t,v=g.call(t,"namespace")?t.namespace.split("."):[];if(u=f=l=n=n||a,3!==n.nodeType&&8!==n.nodeType&&!be.test(y+T.event.triggered)&&(y.indexOf(".")>-1&&(y=(v=y.split(".")).shift(),v.sort()),p=y.indexOf(":")<0&&"on"+y,(t=t[T.expando]?t:new T.Event(y,"object"==(void 0===t?"undefined":r(t))&&t)).isTrigger=i?2:3,t.namespace=v.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:T.makeArray(e,[t]),h=T.event.special[y]||{},i||!h.trigger||!1!==h.trigger.apply(n,e))){if(!i&&!h.noBubble&&!C(n)){for(c=h.delegateType||y,be.test(c+y)||(u=u.parentNode);u;u=u.parentNode)m.push(u),l=u;l===(n.ownerDocument||a)&&m.push(l.defaultView||l.parentWindow||o)}for(s=0;(u=m[s++])&&!t.isPropagationStopped();)f=u,t.type=s>1?c:h.bindType||y,(d=(Q.get(u,"events")||{})[t.type]&&Q.get(u,"handle"))&&d.apply(u,e),(d=p&&u[p])&&d.apply&&Z(u)&&(t.result=d.apply(u,e),!1===t.result&&t.preventDefault());return t.type=y,i||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(m.pop(),e)||!Z(n)||p&&b(n[y])&&!C(n)&&((l=n[p])&&(n[p]=null),T.event.triggered=y,t.isPropagationStopped()&&f.addEventListener(y,Ce),n[y](),t.isPropagationStopped()&&f.removeEventListener(y,Ce),T.event.triggered=void 0,l&&(n[p]=l)),t.result}},simulate:function(t,e,n){var r=T.extend(new T.Event,n,{type:t,isSimulated:!0});T.event.trigger(r,null,e)}}),T.fn.extend({trigger:function(t,e){return this.each((function(){T.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var n=this[0];if(n)return T.event.trigger(t,e,n,!0)}}),v.focusin||T.each({focus:"focusin",blur:"focusout"},(function(t,e){var n=function(t){T.event.simulate(e,t.target,T.event.fix(t))};T.event.special[e]={setup:function(){var r=this.ownerDocument||this,o=Q.access(r,e);o||r.addEventListener(t,n,!0),Q.access(r,e,(o||0)+1)},teardown:function(){var r=this.ownerDocument||this,o=Q.access(r,e)-1;o?Q.access(r,e,o):(r.removeEventListener(t,n,!0),Q.remove(r,e))}}}));var Ee=o.location,Ae=Date.now(),Ie=/\?/;T.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new o.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||T.error("Invalid XML: "+t),e};var Te=/\[\]$/,Se=/\r?\n/g,we=/^(?:submit|button|image|reset|file)$/i,_e=/^(?:input|select|textarea|keygen)/i;function Ne(t,e,n,o){var i;if(Array.isArray(e))T.each(e,(function(e,i){n||Te.test(t)?o(t,i):Ne(t+"["+("object"==(void 0===i?"undefined":r(i))&&null!=i?e:"")+"]",i,n,o)}));else if(n||"object"!==I(e))o(t,e);else for(i in e)Ne(t+"["+i+"]",e[i],n,o)}T.param=function(t,e){var n,r=[],o=function(t,e){var n=b(e)?e():e;r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(t)||t.jquery&&!T.isPlainObject(t))T.each(t,(function(){o(this.name,this.value)}));else for(n in t)Ne(n,t[n],e,o);return r.join("&")},T.fn.extend({serialize:function(){return T.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=T.prop(this,"elements");return t?T.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!T(this).is(":disabled")&&_e.test(this.nodeName)&&!we.test(t)&&(this.checked||!ht.test(t))})).map((function(t,e){var n=T(this).val();return null==n?null:Array.isArray(n)?T.map(n,(function(t){return{name:e.name,value:t.replace(Se,"\r\n")}})):{name:e.name,value:n.replace(Se,"\r\n")}})).get()}});var De=/%20/g,Oe=/#.*$/,Pe=/([?&])_=[^&]*/,xe=/^(.*?):[ \t]*([^\r\n]*)$/gm,Me=/^(?:GET|HEAD)$/,Re=/^\/\//,Le={},Fe={},ke="*/".concat("*"),Be=a.createElement("a");function Ve(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,o=0,i=e.toLowerCase().match(V)||[];if(b(n))for(;r=i[o++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function Ue(t,e,n,r){var o={},i=t===Fe;function s(a){var u;return o[a]=!0,T.each(t[a]||[],(function(t,a){var l=a(e,n,r);return"string"!=typeof l||i||o[l]?i?!(u=l):void 0:(e.dataTypes.unshift(l),s(l),!1)})),u}return s(e.dataTypes[0])||!o["*"]&&s("*")}function Ge(t,e){var n,r,o=T.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((o[n]?t:r||(r={}))[n]=e[n]);return r&&T.extend(!0,t,r),t}Be.href=Ee.href,T.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ee.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ee.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ke,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":T.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Ge(Ge(t,T.ajaxSettings),e):Ge(T.ajaxSettings,t)},ajaxPrefilter:Ve(Le),ajaxTransport:Ve(Fe),ajax:function(t,e){"object"==(void 0===t?"undefined":r(t))&&(e=t,t=void 0);var n,i,s,u,l,c,p,d,h,f,g=T.ajaxSetup({},e=e||{}),m=g.context||g,y=g.context&&(m.nodeType||m.jquery)?T(m):T.event,v=T.Deferred(),b=T.Callbacks("once memory"),C=g.statusCode||{},E={},A={},I="canceled",S={readyState:0,getResponseHeader:function(t){var e;if(p){if(!u)for(u={};e=xe.exec(s);)u[e[1].toLowerCase()]=e[2];e=u[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return p?s:null},setRequestHeader:function(t,e){return null==p&&(t=A[t.toLowerCase()]=A[t.toLowerCase()]||t,E[t]=e),this},overrideMimeType:function(t){return null==p&&(g.mimeType=t),this},statusCode:function(t){var e;if(t)if(p)S.always(t[S.status]);else for(e in t)C[e]=[C[e],t[e]];return this},abort:function(t){var e=t||I;return n&&n.abort(e),w(0,e),this}};if(v.promise(S),g.url=((t||g.url||Ee.href)+"").replace(Re,Ee.protocol+"//"),g.type=e.method||e.type||g.method||g.type,g.dataTypes=(g.dataType||"*").toLowerCase().match(V)||[""],null==g.crossDomain){c=a.createElement("a");try{c.href=g.url,c.href=c.href,g.crossDomain=Be.protocol+"//"+Be.host!=c.protocol+"//"+c.host}catch(t){g.crossDomain=!0}}if(g.data&&g.processData&&"string"!=typeof g.data&&(g.data=T.param(g.data,g.traditional)),Ue(Le,g,e,S),p)return S;for(h in(d=T.event&&g.global)&&0==T.active++&&T.event.trigger("ajaxStart"),g.type=g.type.toUpperCase(),g.hasContent=!Me.test(g.type),i=g.url.replace(Oe,""),g.hasContent?g.data&&g.processData&&0===(g.contentType||"").indexOf("application/x-www-form-urlencoded")&&(g.data=g.data.replace(De,"+")):(f=g.url.slice(i.length),g.data&&(g.processData||"string"==typeof g.data)&&(i+=(Ie.test(i)?"&":"?")+g.data,delete g.data),!1===g.cache&&(i=i.replace(Pe,"$1"),f=(Ie.test(i)?"&":"?")+"_="+Ae+++f),g.url=i+f),g.ifModified&&(T.lastModified[i]&&S.setRequestHeader("If-Modified-Since",T.lastModified[i]),T.etag[i]&&S.setRequestHeader("If-None-Match",T.etag[i])),(g.data&&g.hasContent&&!1!==g.contentType||e.contentType)&&S.setRequestHeader("Content-Type",g.contentType),S.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+ke+"; q=0.01":""):g.accepts["*"]),g.headers)S.setRequestHeader(h,g.headers[h]);if(g.beforeSend&&(!1===g.beforeSend.call(m,S,g)||p))return S.abort();if(I="abort",b.add(g.complete),S.done(g.success),S.fail(g.error),n=Ue(Fe,g,e,S)){if(S.readyState=1,d&&y.trigger("ajaxSend",[S,g]),p)return S;g.async&&g.timeout>0&&(l=o.setTimeout((function(){S.abort("timeout")}),g.timeout));try{p=!1,n.send(E,w)}catch(t){if(p)throw t;w(-1,t)}}else w(-1,"No Transport");function w(t,e,r,a){var u,c,h,f,E,A=e;p||(p=!0,l&&o.clearTimeout(l),n=void 0,s=a||"",S.readyState=t>0?4:0,u=t>=200&&t<300||304===t,r&&(f=function(t,e,n){for(var r,o,i,s,a=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(o in a)if(a[o]&&a[o].test(r)){u.unshift(o);break}if(u[0]in n)i=u[0];else{for(o in n){if(!u[0]||t.converters[o+" "+u[0]]){i=o;break}s||(s=o)}i=i||s}if(i)return i!==u[0]&&u.unshift(i),n[i]}(g,S,r)),f=function(t,e,n,r){var o,i,s,a,u,l={},c=t.dataTypes.slice();if(c[1])for(s in t.converters)l[s.toLowerCase()]=t.converters[s];for(i=c.shift();i;)if(t.responseFields[i]&&(n[t.responseFields[i]]=e),!u&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=i,i=c.shift())if("*"===i)i=u;else if("*"!==u&&u!==i){if(!(s=l[u+" "+i]||l["* "+i]))for(o in l)if((a=o.split(" "))[1]===i&&(s=l[u+" "+a[0]]||l["* "+a[0]])){!0===s?s=l[o]:!0!==l[o]&&(i=a[0],c.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+u+" to "+i}}}return{state:"success",data:e}}(g,f,S,u),u?(g.ifModified&&((E=S.getResponseHeader("Last-Modified"))&&(T.lastModified[i]=E),(E=S.getResponseHeader("etag"))&&(T.etag[i]=E)),204===t||"HEAD"===g.type?A="nocontent":304===t?A="notmodified":(A=f.state,c=f.data,u=!(h=f.error))):(h=A,!t&&A||(A="error",t<0&&(t=0))),S.status=t,S.statusText=(e||A)+"",u?v.resolveWith(m,[c,A,S]):v.rejectWith(m,[S,A,h]),S.statusCode(C),C=void 0,d&&y.trigger(u?"ajaxSuccess":"ajaxError",[S,g,u?c:h]),b.fireWith(m,[S,A]),d&&(y.trigger("ajaxComplete",[S,g]),--T.active||T.event.trigger("ajaxStop")))}return S},getJSON:function(t,e,n){return T.get(t,e,n,"json")},getScript:function(t,e){return T.get(t,void 0,e,"script")}}),T.each(["get","post"],(function(t,e){T[e]=function(t,n,r,o){return b(n)&&(o=o||r,r=n,n=void 0),T.ajax(T.extend({url:t,type:e,dataType:o,data:n,success:r},T.isPlainObject(t)&&t))}})),T._evalUrl=function(t){return T.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},T.fn.extend({wrapAll:function(t){var e;return this[0]&&(b(t)&&(t=t.call(this[0])),e=T(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return b(t)?this.each((function(e){T(this).wrapInner(t.call(this,e))})):this.each((function(){var e=T(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)}))},wrap:function(t){var e=b(t);return this.each((function(n){T(this).wrapAll(e?t.call(this,n):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){T(this).replaceWith(this.childNodes)})),this}}),T.expr.pseudos.hidden=function(t){return!T.expr.pseudos.visible(t)},T.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},T.ajaxSettings.xhr=function(){try{return new o.XMLHttpRequest}catch(t){}};var He={0:200,1223:204},We=T.ajaxSettings.xhr();v.cors=!!We&&"withCredentials"in We,v.ajax=We=!!We,T.ajaxTransport((function(t){var e,n;if(v.cors||We&&!t.crossDomain)return{send:function(r,i){var s,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)a[s]=t.xhrFields[s];for(s in t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)a.setRequestHeader(s,r[s]);e=function(t){return function(){e&&(e=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?i(0,"error"):i(a.status,a.statusText):i(He[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=e(),n=a.onerror=a.ontimeout=e("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&o.setTimeout((function(){e&&n()}))},e=e("abort");try{a.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}})),T.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),T.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return T.globalEval(t),t}}}),T.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),T.ajaxTransport("script",(function(t){var e,n;if(t.crossDomain)return{send:function(r,o){e=T("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&o("error"===t.type?404:200,t.type)}),a.head.appendChild(e[0])},abort:function(){n&&n()}}}));var je=[],ze=/(=)\?(?=&|$)|\?\?/;T.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=je.pop()||T.expando+"_"+Ae++;return this[t]=!0,t}}),T.ajaxPrefilter("json jsonp",(function(t,e,n){var r,i,s,a=!1!==t.jsonp&&(ze.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&ze.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=b(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(ze,"$1"+r):!1!==t.jsonp&&(t.url+=(Ie.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return s||T.error(r+" was not called"),s[0]},t.dataTypes[0]="json",i=o[r],o[r]=function(){s=arguments},n.always((function(){void 0===i?T(o).removeProp(r):o[r]=i,t[r]&&(t.jsonpCallback=e.jsonpCallback,je.push(r)),s&&b(i)&&i(s[0]),s=i=void 0})),"script"})),v.createHTMLDocument=function(){var t=a.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",2===t.childNodes.length}(),T.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(v.createHTMLDocument?((r=(e=a.implementation.createHTMLDocument("")).createElement("base")).href=a.location.href,e.head.appendChild(r)):e=a),i=!n&&[],(o=x.exec(t))?[e.createElement(o[1])]:(o=Ct([t],e,i),i&&i.length&&T(i).remove(),T.merge([],o.childNodes)));var r,o,i},T.fn.load=function(t,e,n){var o,i,s,a=this,u=t.indexOf(" ");return u>-1&&(o=ge(t.slice(u)),t=t.slice(0,u)),b(e)?(n=e,e=void 0):e&&"object"==(void 0===e?"undefined":r(e))&&(i="POST"),a.length>0&&T.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done((function(t){s=arguments,a.html(o?T("<div>").append(T.parseHTML(t)).find(o):t)})).always(n&&function(t,e){a.each((function(){n.apply(this,s||[t.responseText,e,t])}))}),this},T.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){T.fn[e]=function(t){return this.on(e,t)}})),T.expr.pseudos.animated=function(t){return T.grep(T.timers,(function(e){return t===e.elem})).length},T.offset={setOffset:function(t,e,n){var r,o,i,s,a,u,l=T.css(t,"position"),c=T(t),p={};"static"===l&&(t.style.position="relative"),a=c.offset(),i=T.css(t,"top"),u=T.css(t,"left"),("absolute"===l||"fixed"===l)&&(i+u).indexOf("auto")>-1?(s=(r=c.position()).top,o=r.left):(s=parseFloat(i)||0,o=parseFloat(u)||0),b(e)&&(e=e.call(t,n,T.extend({},a))),null!=e.top&&(p.top=e.top-a.top+s),null!=e.left&&(p.left=e.left-a.left+o),"using"in e?e.using.call(t,p):c.css(p)}},T.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){T.offset.setOffset(this,t,e)}));var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,r=this[0],o={top:0,left:0};if("fixed"===T.css(r,"position"))e=r.getBoundingClientRect();else{for(e=this.offset(),n=r.ownerDocument,t=r.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===T.css(t,"position");)t=t.parentNode;t&&t!==r&&1===t.nodeType&&((o=T(t).offset()).top+=T.css(t,"borderTopWidth",!0),o.left+=T.css(t,"borderLeftWidth",!0))}return{top:e.top-o.top-T.css(r,"marginTop",!0),left:e.left-o.left-T.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===T.css(t,"position");)t=t.offsetParent;return t||Et}))}}),T.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var n="pageYOffset"===e;T.fn[t]=function(r){return Y(this,(function(t,r,o){var i;if(C(t)?i=t:9===t.nodeType&&(i=t.defaultView),void 0===o)return i?i[e]:t[r];i?i.scrollTo(n?i.pageXOffset:o,n?o:i.pageYOffset):t[r]=o}),t,r,arguments.length)}})),T.each(["top","left"],(function(t,e){T.cssHooks[e]=jt(v.pixelPosition,(function(t,n){if(n)return n=Wt(t,e),Ut.test(n)?T(t).position()[e]+"px":n}))})),T.each({Height:"height",Width:"width"},(function(t,e){T.each({padding:"inner"+t,content:e,"":"outer"+t},(function(n,r){T.fn[r]=function(o,i){var s=arguments.length&&(n||"boolean"!=typeof o),a=n||(!0===o||!0===i?"margin":"border");return Y(this,(function(e,n,o){var i;return C(e)?0===r.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(i=e.documentElement,Math.max(e.body["scroll"+t],i["scroll"+t],e.body["offset"+t],i["offset"+t],i["client"+t])):void 0===o?T.css(e,n,a):T.style(e,n,o,a)}),e,s?o:void 0,s)}}))})),T.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){T.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}})),T.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),T.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),T.proxy=function(t,e){var n,r,o;if("string"==typeof e&&(n=t[e],e=t,t=n),b(t))return r=l.call(arguments,2),(o=function(){return t.apply(e||this,r.concat(l.call(arguments)))}).guid=t.guid=t.guid||T.guid++,o},T.holdReady=function(t){t?T.readyWait++:T.ready(!0)},T.isArray=Array.isArray,T.parseJSON=JSON.parse,T.nodeName=P,T.isFunction=b,T.isWindow=C,T.camelCase=q,T.type=I,T.now=Date.now,T.isNumeric=function(t){var e=T.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},void 0===(n=function(){return T}.apply(e,[]))||(t.exports=n);var Ye=o.jQuery,Ke=o.$;return T.noConflict=function(t){return o.$===T&&(o.$=Ke),t&&o.jQuery===T&&(o.jQuery=Ye),T},i||(o.jQuery=o.$=T),T}))}).call(this,n(88)(t))},function(t,e,n){"use strict";var r,o;r=[n,e,n(53),n(3),n(18)],void 0===(o=function(t,e,n,r,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t.getBackendUserInterfaceLanguageCode=function(){return this.languageCode},t.setBackendUserInterfaceLanguageCode=function(t){return this.languageCode=t,this},t.getDateFormatter=function(){return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"})},t.setTranslationContext=function(e,n){return this.translationPacks[e]=n,this.getEventEmitter().trigger(t.EVENT_CHANGE_TRANSLATION_PACK,e,n),t},t.translate=function(t,e,r,o){void 0===r&&(r=null);for(var i,s=[],a=4;a<arguments.length;a++)s[a-4]=arguments[a];return(i=this.translationPacks[o]?this.translationPacks[o].getTranslationByMessageId(t,r):(new n.POTranslation).setMsgid(t).setMsgstr(t).setContext(r)).translate.apply(i,[e||0].concat(s))},t.translateApplicationText=function(e,n,r){void 0===n&&(n=null),void 0===r&&(r=0);for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];var s=e+"---"+(n||"")+"---"+o.join(",")+"---"+r;return void 0!==this.applicationCache[s]?this.applicationCache[s]:this.applicationCache[s]=this.translate.apply(this,[e,r,n,t.TRANSLATION_PACK_APPLICATION].concat(o))},t.translateViewFormText=function(e,n,r){void 0===n&&(n=null),void 0===r&&(r=0);for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];return this.translate.apply(this,[e,r,n,t.TRANSLATION_PACK_VIEW_FORM].concat(o))},t.translateDOMNode=function(e,n){var r=this;void 0===n&&(n=t.TRANSLATION_PACK_APPLICATION);var i="1"===o.PersistentStorage.getItem("translations_debug");i&&console.time("i18n::translate_dom_node");for(var s=e.querySelectorAll("[i18n]"),a=s.length,u=0;u<a;u++){for(var l=String(s[u].getAttribute("i18n")||"").split(","),c=function(e,o){if(l[e]){var a=l[e].split(":");if(a.length<=2){var c=a[0],p=(a[1]||"").split("#"),d=null,h=null;switch(c){case"text":d=s[u].textContent;break;case"label":d=s[u].label;break;case"html":d=s[u].innerHTML;break;case"value":d=s[u].value;break;case"title":d=s[u].title;break;case"placeholder":d=s[u].placeholder;break;case"href":d=s[u].getAttribute("href");break;default:return"continue"}if(null==d||""===d)return"continue";if(p.slice(1).forEach((function(t){d=r.applyTextFilter(t,d)})),f=d,g=p[0]||null,null===(h=n===t.TRANSLATION_PACK_APPLICATION?t.translateApplicationText(f,g):n===t.TRANSLATION_PACK_VIEW_FORM?t.translateViewFormText(f,g):f)||""===h||void 0===h)return"continue";if(i&&h===d&&console.log("translate::"+c+": "+JSON.stringify(d)+", ctx: "+JSON.stringify(p)+", pack: "+JSON.stringify(n)),h===d)return"continue";switch(c){case"text":s[u].textContent=h;break;case"label":s[u].label=h;break;case"html":s[u].innerHTML=h;break;case"value":s[u].value=h;break;case"title":s[u].title=h;break;case"placeholder":s[u].placeholder=h;break;case"href":s[u].setAttribute("href",h)}}}var f,g},p=0,d=l.length;p<d;p++)c(p);s[u].removeAttribute("i18n")}i&&console.timeEnd("i18n::translate_dom_node")},t.getEventEmitter=function(){return this.eventEmitter=this.eventEmitter||new r.EventEmitter,this.eventEmitter},t.getLanguageCodeTextDirection=function(t){if(!t)return"ltr";switch(t.toLowerCase()){case"ar":case"ara":case"arc":case"ae":case"ave":case"egy":case"he":case"heb":case"nqo":case"pal":case"phn":case"sam":case"syc":case"syr":case"fa":case"per":case"fas":case"ku":case"kur":case"ur":case"urd":return"rtl";default:return"ltr"}},t.applyTextFilter=function(t,e){switch(t){case"multiline":return e.replace(/[\n\r]+[ \t]+/g," ").trim();case"":default:return e}},t.getEditorTranslationPackLanguageCode=function(){return null===this.languageCode?this.translationPacks[this.TRANSLATION_PACK_APPLICATION]&&this.translationPacks[this.TRANSLATION_PACK_APPLICATION].getHeader("language")||"en":this.languageCode},t.EVENT_CHANGE_TRANSLATION_PACK="change.translation-pack",t.TRANSLATION_PACK_APPLICATION="app",t.TRANSLATION_PACK_VIEW_FORM="form",t.translationPacks={},t.applicationCache={},t.languageCode=null,t}();e.I18n=i}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(0),n(3),n(54),n(21),n(20),n(11),n(1),n(18)],void 0===(o=function(t,e,n,r,o,i,a,u,l,c){var p;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.FLAT_COLOR="flat",t.DEFAULT="default"}(p=e.DialogStyle||(e.DialogStyle={}));var d=function(t){function e(n){var r=t.call(this)||this;if(r.captionText="",r.isFullScreen=!1,r.fullScreen=!1,(n&&void 0!==n.modal&&n.modal||!n||void 0===n.modal)&&(e.NUMBER_OF_OPENED_DIALOGS++,r.modalBox=document.createElement("div"),r.modalBox.setAttribute("data-role","dialog-modal"),r.modalBox.onmousewheel=function(t){t.stopPropagation()},document.body.appendChild(r.modalBox)),r.root=document.createElement("div"),r.root.setAttribute("data-role","dialog"),r.root.className="ui ui-dialog",r.root.tabIndex=0,r.root.onmousewheel=function(t){t.stopPropagation()},r.titlebar=document.createElement("div"),r.titlebar.setAttribute("data-role","title"),r.caption=document.createElement("label"),r.caption.setAttribute("data-role","caption"),r.titlebar.appendChild(r.caption),r.root.appendChild(r.titlebar),r.body=document.createElement("div"),r.body.setAttribute("data-role","body"),r.root.appendChild(r.body),n&&(n.style?r.root.setAttribute("data-dialog-style",n.style):r.root.setAttribute("data-dialog-style",p.DEFAULT),n.id&&r.root.setAttribute("id",n.id),void 0!==n.title&&r.setCaption(n.title),n.fullScreen?r.fullScreen=!0:(n.width&&(r.root.style.width=n.width),n.height&&(r.root.style.height=n.height),n.left&&(r.root.style.left=n.left),n.top&&(r.root.style.top=n.top),r.fullScreen=!1),n.fullScreen&&(r.root.setAttribute("data-full-screen","1"),r.isFullScreen=!0),r.closable=!!n.closable,void 0!==n.closable&&n.closable&&(r.root.setAttribute("data-is-closable","1"),r.closeButton=document.createElement("div"),r.closeButton.setAttribute("data-role","modal-button"),r.closeButton.setAttribute("data-modal-command","close"),r.closeButton.innerHTML='<span class="vfb vfb-close"></span>',r.closeButton.title=l.I18n.translateApplicationText("Close","ui.dialog"),r.titlebar.appendChild(r.closeButton),r.closeButton.onclick=function(){if(n.onBeforeClose)n.onBeforeClose().then((function(t){if(!0===t)if(n.onClose){if(!1===n.onClose(r))return;r.close()}else r.close()}));else if(n.onClose){if(!1===n.onClose(r))return;r.close()}else r.close()}),n.movable&&(r.root.setAttribute("data-movable","1"),r.initializeMovable(n))),n.buttons&&n.buttons.length){r.buttons=document.createElement("div"),r.buttons.setAttribute("data-role","buttons"),r.root.setAttribute("data-has-buttons","1");for(var o=function(t,e){if(null===n.buttons[t])return"continue";var r,o=document.createElement("button");n.buttons[t].isHTMLCaption?o.innerHTML=n.buttons[t].caption:o.textContent=n.buttons[t].caption,n.buttons[t].classNames&&(o.className=n.buttons[t].classNames),o.setAttribute("data-role","button"),r=n.buttons[t],o.onclick=function(){r.callback()},n.buttons[t].id&&o.setAttribute("data-button-id",n.buttons[t].id),i.buttons.appendChild(o)},i=this,s=0,a=n.buttons.length;s<a;s++)o(s);r.root.appendChild(r.buttons)}return document.body.appendChild(r.root),r.isFullScreen&&document.body.setAttribute("data-full-screen-dialog-opened","1"),r.caption.tabIndex=0,void 0!==(n||{}).modal&&!1!==(n||{}).modal||void 0!==(n||{}).focusOnOpen&&!0!==(n||{}).focusOnOpen||r.caption.focus(),r}return s(e,t),e.prototype.setWidth=function(t){return this.root.style.width=t,this},e.prototype.setHeight=function(t){return this.root.style.height=t,this},e.prototype.addLoadRequest=function(){return this.loader=this.loader||new u.Loader(this.root),this.loader.reattachToElement(this.root).addLoadRequest(),this},e.prototype.removeLoadRequest=function(){return this.loader&&this.loader.removeLoadRequest(),this},e.prototype.getButtonsBar=function(){return this.buttons||null},e.prototype.setButtons=function(t){if(t&&t.length){for(this.buttons=this.buttons||document.createElement("div");this.buttons.firstChild;)this.buttons.removeChild(this.buttons.firstChild);this.buttons.setAttribute("data-role","buttons"),this.root.setAttribute("data-has-buttons","1");for(var e=function(e,r){if(null===t[e])return"continue";var o,i=document.createElement("button");t[e].isHTMLCaption?i.innerHTML=t[e].caption:i.textContent=t[e].caption,t[e].classNames&&(i.className=t[e].classNames),i.setAttribute("data-role","button"),o=t[e],i.onclick=function(){o.callback()},t[e].id&&i.setAttribute("data-button-id",t[e].id),n.buttons.appendChild(i)},n=this,r=0,o=t.length;r<o;r++)e(r);this.root.appendChild(this.buttons)}else this.buttons&&(this.root.removeChild(this.buttons),this.buttons=void 0),this.root.removeAttribute("data-has-buttons");return this},e.prototype.getRoot=function(){return this.root},e.prototype.getTitlebar=function(){return this.titlebar},e.prototype.getBody=function(){return this.body},e.prototype.getCaption=function(){return this.captionText},e.prototype.isClosable=function(){return this.closable},e.prototype.close=function(){this.onMoveStart&&(n(this.dragableRootNode).off(o.HIDManager.mousedown(),this.onMoveStart),this.onMoveStart=void 0,o.HIDManager.getEmitter().off("change.hid-device",this.onHidDeviceChanged)),this.onMoveRun&&(n(document.body).off(o.HIDManager.mousemove(),this.onMoveRun),this.onMoveRun=void 0),this.onMoveDone&&(n(document.body).off(o.HIDManager.mouseup(),this.onMoveDone),this.onMoveDone=void 0),this.root&&(this.root.parentNode&&this.root.parentNode.removeChild(this.root),this.titlebar=this.caption=this.body=this.buttons=void 0),this.modalBox&&(e.NUMBER_OF_OPENED_DIALOGS--,this.modalBox.parentNode&&this.modalBox.parentNode.removeChild(this.modalBox),this.modalBox=void 0),this.setTabTrapCallback(null),this.isFullScreen&&document.body.removeAttribute("data-full-screen-dialog-opened"),this.trigger("close")},e.prototype.setCaption=function(t){return this.captionText=String(t||""),this.caption&&(this.caption.textContent=this.captionText),this},e.prototype.center=function(){return this.root.setAttribute("data-centered",""),this},e.prototype.setTabTrapCallback=function(t){this.tabTrapCallback&&(console.warn("REMOVE DIALOG TAB TRAP"),this.root.removeEventListener("keydown",this.tabTrapCallback),this.tabTrapCallback=void 0),this.tabTrapCallback=t||null,this.tabTrapCallback&&(console.warn("ADD DIALOG TAB TRAP"),this.root.addEventListener("keydown",this.tabTrapCallback,!0))},e.prototype.tabTrap=function(t){var r=[];return n(this.root).find(t||e.TABBABLE_ELEMENTS_CSS_SELECTOR).each((function(){n(this).is("[data-role=dialog] > [data-role=title] > [data-role=caption]")||r.push(this)})),this.setTabTrapCallback(r.length?function(t){if((t.keyCode||t.charCode)===i.KeyboardDriver.TAB){if(i.KeyboardDriver.isControlOrMetaKey(t)||i.KeyboardDriver.isAltOrOptionKey(t))return;var e=i.KeyboardDriver.isShiftKey(t)?-1:1,n=document.activeElement,o=r.indexOf(n);(o+=e)<0?o=r.length-1:o>=r.length&&(o=0),t.preventDefault(),t.stopPropagation();try{r[o].focus()}catch(t){console.warn("TAB TRAP FOCUS FAILED: "+t.toString()),console.error(t)}}}:null),this},e.prototype.getModalBox=function(){return this.modalBox},e.confirm=function(t,r,o){return n.Deferred((function(n){var i=new e({width:"500px",title:t||"Confirmation",style:p.FLAT_COLOR,movable:!0,buttons:[{caption:l.I18n.translateApplicationText("Yes","ui.dialog"),id:"yes",classNames:"btn-primary",callback:function(){i.close(),n.resolve(!0)}},{caption:l.I18n.translateApplicationText("No","ui.dialog"),id:"no",classNames:"cancel",callback:function(){i.close(),n.reject(new Error("User declined"))}}]});void 0!==o&&(o.dialog=i);var s=document.createElement("span");s.className="vfb vfb-question",s.setAttribute("data-role","icon"),i.getBody().appendChild(s);for(var a=String(r||"Confirmation").split("\n"),u=document.createElement("div"),c=0,d=a.length;c<d;c++)u.appendChild(document.createTextNode(a[c])),c<d-1&&u.appendChild(document.createElement("br"));i.getBody().appendChild(u),i.getRoot().setAttribute("data-dialog-role","sysmodal-confirm"),i.center()}))},e.getNumberOfOpenedModalDialogs=function(){return this.NUMBER_OF_OPENED_DIALOGS},e.prototype.hide=function(){this.isFullScreen&&document.body.removeAttribute("data-full-screen-dialog-opened"),this.modalBox&&this.modalBox.parentNode&&this.modalBox.parentNode.removeChild(this.modalBox),this.root.parentNode&&this.root.parentNode.removeChild(this.root)},e.prototype.show=function(){this.isFullScreen&&document.body.setAttribute("data-full-screen-dialog-opened","1"),this.modalBox&&document.body.appendChild(this.modalBox),this.root&&document.body.appendChild(this.root)},e.prototype.initializeMovable=function(t){this.dragableRootNode=t.dragableBody?this.getRoot():this.titlebar,function(t){var e,r;t.onMoveRun=function(n){if(null!==(n=o.HIDManager.normalizeJQueryEvent(n))){var i=n.clientX-e.left,s=n.clientY-e.top;t.root.style.left=i+r.left+"px",t.root.style.top=s+r.top+"px",t.trigger("move",{left:i+r.left,top:s+r.top}),n.preventDefault(),n.stopPropagation()}},t.onMoveDone=function(e){null!==(e=o.HIDManager.normalizeJQueryEvent(e))&&(n(document.body).off(o.HIDManager.mousemove(),t.onMoveRun).off(o.HIDManager.mouseup(),t.onMoveDone),o.HIDManager.onDragEnd(),e.preventDefault(),e.stopPropagation())},t.onMoveStart=function(i){t.fullScreen||null!==(i=o.HIDManager.normalizeJQueryEvent(i))&&n(i.target).is("[data-role=title], [data-role=caption], [data-role=dialog]")&&(n(i.target).is("[data-role=dialog]")&&t.dragableRootNode!==t.root||(r={left:t.root.offsetLeft,top:t.root.offsetTop},e={left:i.clientX,top:i.clientY},n(document.body).on(o.HIDManager.mousemove(),t.onMoveRun).on(o.HIDManager.mouseup(),t.onMoveDone),o.HIDManager.onDragStart()))},t.onHidDeviceChanged=function(e,r){r&&n(t.titlebar).off(r.mousedown(),t.onMoveStart).on(o.HIDManager.mousedown(),t.onMoveStart)},n(t.dragableRootNode).on(o.HIDManager.mousedown(),t.onMoveStart),o.HIDManager.getEmitter().on("change.hid-device",t.onHidDeviceChanged)}(this)},e.alert=function(t,r){return n.Deferred((function(n){var o=new e({title:r||l.I18n.translateApplicationText("Alert","ui.dialog"),closable:!0,width:"500px",style:p.FLAT_COLOR,movable:!0,modal:!0,onClose:function(){n.resolve()},buttons:[{caption:l.I18n.translateApplicationText("Ok","ui.dialog"),callback:function(){o.close(),n.resolve()},classNames:"btn btn-primary"}]});o.getRoot().setAttribute("data-dialog-role","sysmodal-alert");var i=document.createElement("span");i.setAttribute("data-role","icon"),i.className="vfb vfb-error2",o.getBody().appendChild(i);for(var s=String(t||"").split("\n"),a=document.createElement("div"),u=0,c=s.length;u<c;u++){var d=document.createElement("p");d.textContent=s[u],a.appendChild(d)}o.body.appendChild(a),o.center()}))},e.prototype.print=function(t){var r=this;a.BrowserUtils.openTabOrPopup("/static/templates/ui/modal-print.html","_blank",{width:Math.min(800,screen.width-100),height:Math.min(800,screen.height-100),scrollbars:!1,menubar:!1,status:!1}).then((function(e){try{setTimeout((function(){e.document.querySelector("head").textContent=r.getCaption();try{if(t){var o=e.document.createElement("link");o.setAttribute("type","text/css"),o.setAttribute("rel","stylesheet"),o.setAttribute("href",t),e.document.querySelector("head").appendChild(o)}}catch(t){}var i=r.getRoot().cloneNode(!0);n(i).find("> [data-role=buttons]").remove(),e.document.body.innerHTML=i.outerHTML,e.print(),e.close()}),100)}catch(t){alert("Error printing")}})).fail((function(){e.alert("Failed to print","Print")}))},e.prompt=function(t){return n.Deferred((function(n){var r;(t=t||{defaultValue:"",title:l.I18n.translateApplicationText("Prompt","ui.dialog"),question:l.I18n.translateApplicationText("Input value","ui.dialog"),height:"300px",width:"500px",icon:"question",password:!1,placeholder:""}).defaultValue=t.defaultValue||"",t.title=t.title||l.I18n.translateApplicationText("Prompt","ui.dialog"),t.question=t.question||l.I18n.translateApplicationText("Input value","ui.dialog"),t.width=t.width||"500px",t.height=t.height||"300px",t.icon=t.icon||"",t.password=t.password||!1,t.placeholder=t.placeholder||"";var o=new e({title:t.title,width:t.width,height:t.height,closable:!0,style:p.FLAT_COLOR,movable:!0,onClose:function(){n.reject(new Error("User canceled"))},buttons:[{caption:l.I18n.translateApplicationText("Ok","ui.dialog"),callback:function(){r()&&r()}},{caption:l.I18n.translateApplicationText("Cancel","ui.dialog"),callback:function(){o.close(),n.reject(new Error("User canceled"))}}]}).center();o.getRoot().setAttribute("data-dialog-role","sysmodal-prompt");var s=document.createElement("span");s.className="icon vfb vfb-"+t.icon;var a=document.createElement("div");a.className="header",a.appendChild(s);for(var u=String(t.question||"").split("\n"),c=0,d=u.length;c<d;c++){var h=document.createElement("p");h.textContent=u[c],a.appendChild(h)}o.getBody().appendChild(a);var f=document.createElement("input");f.setAttribute("type",t.password?"password":"text"),f.setAttribute("placeholder",t.placeholder),f.value=t.defaultValue,o.getBody().appendChild(f);var g=document.createElement("div");g.className="error",o.getBody().appendChild(g),r=function(){var e=f.value;if(t.validator){var r=t.validator(e);if(r)return g.textContent=r,f.focus(),void f.select()}o.close(),n.resolve(e)},f.oninput=function(){g.textContent=""},f.onkeydown=function(t){var e=t.keyCode||t.charCode;e!==i.KeyboardDriver.ENTER?e===i.KeyboardDriver.ESC&&(o.close(),n.reject(new Error("User canceled"))):r()},f.focus(),f.select()}))},e.confirmWithRememberValue=function(t,e,r){var o=this;return r=r||"test",n.Deferred((function(n){var i=o.getRememberableChoice(r);if(null===i){var s={dialog:null},a=document.createElement("input");a.type="checkbox",o.confirm(t,e,s).then((function(){a.checked&&o.setRememberableChoice(r,!0),n.resolve(!0)})).fail((function(t){a.checked&&o.setRememberableChoice(r,!1),n.reject(t)}));var u=s.dialog,c=document.createElement("div");c.setAttribute("data-role","cancelable");var p=document.createElement("label");p.appendChild(a),p.appendChild(document.createTextNode(l.I18n.translateApplicationText("Remember my choice in the future","ui.dialog"))),c.appendChild(p),u.getRoot().appendChild(c)}else i?n.resolve(!0):n.reject(new Error("Remembered choices is NO"))}))},e.setRememberableChoice=function(t,e){var n;try{n=JSON.parse(c.PersistentStorage.getItem("remember_choices"))}catch(t){}n=n||{},null===e?delete n[t]:n[t]=!!e;try{c.PersistentStorage.setItem("remember_choices",JSON.stringify(n),c.DataPersistenceType.CRITICAL)}catch(t){}},e.getRememberableChoice=function(t){var e=c.PersistentStorage.getItem("remember_choices");if(e)try{var n=JSON.parse(e);return void 0===n[t]?null:!!n[t]}catch(t){}return null},e.TABBABLE_ELEMENTS_CSS_SELECTOR="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]",e.NUMBER_OF_OPENED_DIALOGS=0,e}(r.EventEmitter);e.Dialog=d}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r;void 0===(r=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this._events={}}return t.prototype.setEventEmitterState=function(t){return this._emittingState=!!t&&void 0,this},t.prototype.on=function(t,e){return(this._events[t]=this._events[t]||[]).push({once:!1,callback:e}),this},t.prototype.once=function(t,e){return(this._events[t]=this._events[t]||[]).push({once:!0,callback:e}),this},t.prototype.off=function(t,e){if(void 0!==this._events[t])if(e){for(var n=0,r=this._events[t].length;n<r;n++)if(this._events[t][n].callback===e){this._events[t].splice(n,1);break}0===this._events[t].length&&delete this._events[t]}else delete this._events[t];return this},t.prototype.trigger=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(void 0===this._emittingState&&void 0!==this._events[t]){for(var o=this._events[t].slice(0),i=this._events[t].length-1;i>-1;i--)this._events[t][i].once&&this._events[t].slice(i,1);i=0;for(var s=o.length;i<s;i++)try{(e=o[i]).callback.apply(e,n)}catch(t){console.error(t)}}return this},t}();e.EventEmitter=n}.apply(e,[n,e]))||(t.exports=r)},function(t,e,n){"use strict";var r;void 0===(r=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.SELECTION=-1,t.THEME=-2,t.DOCUMENT=1,t.PAGE=2,t.FLEXBOX=3,t.NAVIGATION=32,t.COLUMNS=33,t.COLUMN=34,t.CONTAINER=35,t.ADVANCED_SLIDER=36,t.REPEATABLE=40,t.LABEL_DECORATOR=48,t.ROW=53,t.ROW_CONTAINER=54,t.SPACER=55,t.BIG_DATA_ROW_VIEWER=59,t.REPEATABLE_CONTAINER=64,t.BUTTON=4,t.TEXT_BOX=5,t.TEXT_AREA=6,t.DROP_DOWN=7,t.RADIO=8,t.CHECKBOX=9,t.RICH_TEXT=10,t.DATE=11,t.MAP=12,t.PICTURE=13,t.FILE=14,t.ICON=15,t.RATING=16,t.TIME=17,t.SHOPPING_CART=18,t.PAYMENT_PROCESSOR=19,t.LABEL=20,t.MENU=21,t.SLIDER=22,t.FORM=23,t.VIDEO=24,t.IFRAME=25,t.BREADCRUMBS=26,t.CHART=27,t.HYPERLINK=28,t.PRODUCT=29,t.SHOP=30,t.SURVEY=31,t.CALENDAR=37,t.NAME=38,t.ADDRESS=39,t.SIGNATURE=41,t.SHOPPING_CART_BUTTON=42,t.WEB_DOCUMENT=43,t.SOCIAL_MEDIA=44,t.CAMERA=45,t.GPS=46,t.CODE=47,t.TERMS_OF_SERVICE=49,t.EMAIL=50,t.LINK=51,t.PHONE=52,t.AUTO_BUTTONS=56,t.NET_PROMOTER_SCORE=57,t.BIG_DATA_DROPDOWN=58,t.WORKFLOWS_CURRENT_USER_EMAIL=60,t.HIDDEN_SHORT_TEXT=61,t.HIDDEN_LONG_TEXT=62,t.QUIZ=63,t.FORM_PROGRESS_INDICATOR=65,t.HEADER=999,t.FOOTER=1e3,t.ADDON_CONTROL=1e5,t}();e.NodeTypes=n}.apply(e,[n,e]))||(t.exports=r)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(0),n(27),n(16),n(3),n(66)],void 0===(o=function(t,e,n,r,o,i,a){var u,l;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.DEFAULT=0]="DEFAULT",t[t.OPTIONAL_AUTHENTICATION=1]="OPTIONAL_AUTHENTICATION"}(u=e.APIAuthenticationStrategy||(e.APIAuthenticationStrategy={})),function(t){t[t.GET=0]="GET",t[t.POST=1]="POST",t[t.PUT=2]="PUT",t[t.DELETE=3]="DELETE"}(l=e.EApiMethod||(e.EApiMethod={}));var c=function(){function t(t,e,n){this.router=t,this.method=e,this.route=n}return t.prototype.willReturn=function(t){return this.callback=t,this.router.add(this),this},t.prototype.match=function(t,e){return!(t!==this.method||!this.route)&&(this.route instanceof RegExp?this.route.test(e):this.route===e)},t.prototype.exec=function(e,o,i){var s=this;return n.Deferred((function(n){s.callback?s.callback(e,o,i).then((function(t){n.resolve(t)})).fail((function(t){n.reject(t)})):n.reject(new r.BackendException("Offline route callback not set").setType("NET").setFile("API").setCode(t.ERR_OFFLINE_CALLBACK_NOT_SET))}))},t.ERR_OFFLINE_CALLBACK_NOT_SET="ERR_OFFLINE_CALLBACK_NOT_SET",t.ERR_OFFLINE_ROUTE_NOT_FOUND="ERR_OFFLINE_ROUTE_NOT_FOUND",t}();e.APIOfflineRoute=c;var p=function(){function t(t){this.routes=[],this.api=t}return t.prototype.add=function(t){return-1===this.routes.indexOf(t)&&this.routes.push(t),this},t.prototype.get=function(t){return new c(this,l.GET,t)},t.prototype.post=function(t){return new c(this,l.POST,t)},t.prototype.delete=function(t){return new c(this,l.DELETE,t)},t.prototype.put=function(t){return new c(this,l.PUT,t)},t.prototype.getRoute=function(t,e){for(var n=0,r=this.routes.length;n<r;n++)if(this.routes[n].match(t,e))return this.routes[n];return null},t.prototype.isOnLine=function(){return!!window.navigator.onLine},t}();e.APIOfflineRouter=p;var d=function(t){function e(e){var n=t.call(this)||this;return n.authorizedEndpoints=[],n.forcedOfflineMode=!1,n.baseURL=e,n.offlineRouter=new p(n),n}return s(e,t),e.prototype.getRootAddress=function(){return this.baseURL},e.prototype.method=function(t,e,n,r){switch(void 0===r&&(r=u.DEFAULT),t){case l.GET:return this.get(e,n,r);case l.POST:return this.post(e,n,r);case l.PUT:return this.put(e,n,r);case l.DELETE:return this.delete(e,n,r);default:throw new Error("Invalid API.method() argument `method`")}},e.prototype.cacheable=function(){return this.nextRequestIsCacheable=!0,this},e.prototype.isCacheableRequest=function(){var t=this.nextRequestIsCacheable;return this.nextRequestIsCacheable=!1,t},e.prototype.get=function(t,e,o){var i=this;void 0===o&&(o=u.DEFAULT);var s=this.isCacheableRequest();return console.warn("[API] GET"+(s?".cacheable":"")+": ",t),n.Deferred((function(a){i.performAuthorization(t,o).then((function(o){if(!i.offlineRouter.isOnLine()||i.isForcedOfflineMode()){var u=i.offlineRouter.getRoute(l.GET,t);if(u)return void u.exec(i.appendJWTToEndpointURL(i.baseURL+"/"+t,o),e).then((function(t){a.resolve(t)})).fail((function(e){a.reject(i.triggerAuthenticationOrUpgradeErrorIfNeeded(e||new Error("GET "+JSON.stringify(t)+" failed")))}))}n.ajax(i.appendJWTToEndpointURL(i.baseURL+"/"+t,o),{data:e||{},type:"GET",cache:s,xhrFields:{withCredentials:!0}}).then((function(t){a.resolve(t)})).fail((function(e){a.reject(i.triggerAuthenticationOrUpgradeErrorIfNeeded(r.BackendException.createFromXHR(e)||new Error("GET "+JSON.stringify(t)+" failed")))}))})).fail((function(t){a.reject(t)}))})).promise()},e.prototype.post=function(t,e,o){var i=this;void 0===o&&(o=u.DEFAULT);var s=this.isCacheableRequest();return"users/analytics"!==t&&console.warn("[API] POST"+(s?".cacheable":"")+": ",t),n.Deferred((function(a){i.performAuthorization(t,o).then((function(o){if(!i.offlineRouter.isOnLine()||i.isForcedOfflineMode()){var u=i.offlineRouter.getRoute(l.POST,t);if(u)return void u.exec(i.appendJWTToEndpointURL(i.baseURL+"/"+t,o),e).then((function(t){a.resolve(t)})).fail((function(e){a.reject(i.triggerAuthenticationOrUpgradeErrorIfNeeded(e||new Error("POST "+JSON.stringify(t)+" failed")))}))}n.ajax(i.appendJWTToEndpointURL(i.baseURL+"/"+t,o),{data:e||{},type:"POST",cache:s,xhrFields:{withCredentials:!0}}).then((function(t){a.resolve(t)})).fail((function(e){a.reject(i.triggerAuthenticationOrUpgradeErrorIfNeeded(r.BackendException.createFromXHR(e)||new Error("POST "+JSON.stringify(t)+" failed")))}))})).fail((function(t){a.reject(t)}))})).promise()},e.prototype.put=function(t,e,o){var i=this;void 0===o&&(o=u.DEFAULT);var s=this.isCacheableRequest();return console.warn("[API] PUT"+(s?".cacheable":"")+": ",t),n.Deferred((function(a){i.performAuthorization(t,o).then((function(o){if(!i.offlineRouter.isOnLine()||i.isForcedOfflineMode()){var u=i.offlineRouter.getRoute(l.PUT,t);if(u)return void u.exec(i.appendJWTToEndpointURL(i.baseURL+"/"+t,o),e).then((function(t){a.resolve(t)})).fail((function(e){a.reject(i.triggerAuthenticationOrUpgradeErrorIfNeeded(e||new Error("PUT "+JSON.stringify(t)+" failed")))}))}n.ajax(i.appendJWTToEndpointURL(i.baseURL+"/"+t,o),{data:e||{},type:"PUT",cache:s,xhrFields:{withCredentials:!0}}).then((function(t){a.resolve(t)})).fail((function(e){a.reject(i.triggerAuthenticationOrUpgradeErrorIfNeeded(r.BackendException.createFromXHR(e)||new Error("PUT "+JSON.stringify(t)+" failed!")))}))})).fail((function(t){a.reject(t)}))})).promise()},e.prototype.delete=function(t,e,o){var i=this;void 0===o&&(o=u.DEFAULT);var s=this.isCacheableRequest();return console.warn("[API] DELETE"+(s?".cacheable":"")+": ",t),n.Deferred((function(a){i.performAuthorization(t,o).then((function(o){if(!i.offlineRouter.isOnLine()||i.isForcedOfflineMode()){var u=i.offlineRouter.getRoute(l.DELETE,t);if(u)return void u.exec(i.appendJWTToEndpointURL(i.baseURL+"/"+t,o),e).then((function(t){a.resolve(t)})).fail((function(e){a.reject(i.triggerAuthenticationOrUpgradeErrorIfNeeded(e||new Error("DELETE "+JSON.stringify(t)+" failed")))}))}n.ajax(i.appendJWTToEndpointURL(i.baseURL+"/"+t,o),{data:e||{},type:"DELETE",cache:s,xhrFields:{withCredentials:!0}}).then((function(t){a.resolve(t)})).fail((function(t){a.reject(i.triggerAuthenticationOrUpgradeErrorIfNeeded(r.BackendException.createFromXHR(t)||new Error("DELETE "+JSON.stringify(a)+" failed")))}))})).fail((function(t){a.reject(t)}))})).promise()},e.prototype.upload=function(t,e,o,i,s,c){var p=this;if(void 0===s&&(s=u.DEFAULT),!e||!(e instanceof File||e instanceof a.IndexedDBMockedFile))throw new Error("Invalid argument file: File|IndexedDBMockFile expected!");if(!FormData)throw new Error("FormData support is not present in your browser!");var d=this.isCacheableRequest();return console.warn("[API] UPLOAD"+(d?".cacheable":"")+"["+e.size+" bytes]: ",t),n.Deferred((function(u){p.performAuthorization(t,s).then((function(s){if(!p.offlineRouter.isOnLine()||p.isForcedOfflineMode()){var h=p.offlineRouter.getRoute(l.POST,t);if(h&&!(e instanceof a.IndexedDBMockedFile))return void h.exec(p.appendJWTToEndpointURL(p.baseURL+"/"+t,s),o,e).then((function(t){i&&i(100,e.size,e.size),u.resolve(t)})).fail((function(e){u.reject(p.triggerAuthenticationOrUpgradeErrorIfNeeded(e||new Error("UPLOAD "+JSON.stringify(t)+" failed")))}))}var f=new FormData;if(e instanceof a.IndexedDBMockedFile?f.append("file",e.getBlob(),e.name):f.append("file",e),o)for(var g in o)o.hasOwnProperty(g)&&o.propertyIsEnumerable(g)&&f.append(g,o[g]);n.ajax({xhr:function(){var t=new XMLHttpRequest;return t.upload.addEventListener("progress",(function(t){if(t.lengthComputable){var e=~~(t.loaded/t.total*100);i&&i(e,t.loaded,t.total)}})),t.addEventListener("progress",(function(t){if(t.lengthComputable){var e=~~(t.loaded/t.total*100);i&&i(e)}})),c&&c(t),t},url:p.appendJWTToEndpointURL(p.baseURL+"/"+t,s),data:f,type:"POST",xhrFields:{withCredentials:!0},cache:d,processData:!1,contentType:!1}).then((function(t){u.resolve(t)})).fail((function(t){u.reject(p.triggerAuthenticationOrUpgradeErrorIfNeeded(r.BackendException.createFromXHR(t)))}))})).fail((function(t){u.reject(t)}))})).promise()},e.prototype.addAuthorizedEndpoint=function(t){if(!t||!(t instanceof RegExp||"string"==typeof t))throw new Error("Invalid argument: string|RegExp expected!");return this.authorizedEndpoints.push(t),this},e.prototype.isAuthorizedEndpoint=function(t){for(var e=0,n=this.authorizedEndpoints.length;e<n;e++)if(this.authorizedEndpoints[e]instanceof RegExp){if(this.authorizedEndpoints[e].test(t))return!0}else if(this.authorizedEndpoints[e]===t)return!0;return!1},e.prototype.performAuthorization=function(t,e){return this.isAuthorizedEndpoint(t)||e!==u.DEFAULT?this.authorizationCallback?this.authorizationCallback(e):n.Deferred((function(t){t.reject(new Error("No authorization callback provider was set"))})).promise():n.Deferred((function(t){t.resolve(null)})).promise()},e.prototype.setAuthorizationCallback=function(t){return this.authorizationCallback=t||null,this},e.prototype.getAuthorizationCallback=function(){return this.authorizationCallback||null},e.prototype.appendJWTToEndpointURL=function(t,e){if(!e)return t;var n=o.URLParser.parseURL(t);return n.search.JWT=e,o.URLParser.createURL(n)},e.prototype.triggerAuthenticationOrUpgradeErrorIfNeeded=function(t){switch(!0){case r.BackendException.matches(t,"AuthorizationException","ERR_TOS_VIOLATION"):this.trigger(h.EVENT_TOS_VIOLATION),console.warn("[API]: Tos violation");break;case r.BackendException.matches(t,"UserException","ERR_DUPLICATE_GLOBAL_USER_ID"):case r.BackendException.matches(t,"AuthenticationException","ERR_DUPLICATE_GLOBAL_USER_ID"):break;case r.BackendException.matches(t,"TokenException","ERR_TOKEN_EXPIRED"):case r.BackendException.matches(t,"UserException","ERR_USER_NOT_FOUND"):case r.BackendException.matches(t,"TokenException","ERR_RUNTIME_ERROR"):this.trigger(h.EVENT_AUTHENTICATION_EXPIRED),console.warn("[API]: Authentication expired");break;case r.BackendException.matches(t,"AuthenticationException","ERR_AUTHENTICATION_REQUIRED"):this.trigger(h.EVENT_AUTHENTICATION_REQUIRED),console.warn("[API]: Authentication required");break;case r.BackendException.matches(t,"UpgradeException"):this.trigger(h.EVENT_UPGRADE_EXCEPTION),console.warn("[API]: Upgrade exception")}return t},e.prototype.getOfflineRouter=function(){return this.offlineRouter},e.prototype.isForcedOfflineMode=function(){return this.forcedOfflineMode},e.prototype.setForcedOfflineMode=function(t){return this.forcedOfflineMode=!!t,this},e.prototype.clearAuthorizedEndpoints=function(){this.authorizedEndpoints=[]},e.prototype.formDownload=function(t,e,r){var o=this;return n.Deferred((function(n){o.offlineRouter.isOnLine()&&!o.isForcedOfflineMode()?o.performAuthorization(t,r).then((function(r){var i=o.baseURL+"/"+t,s=o.appendJWTToEndpointURL(i,r),a=document.createElement("form");if(a.style.width="1px",a.style.height="1px",a.method=e,a.action=i,i!==s){var u=document.createElement("input");u.type="hidden",u.name="JWT",u.value=r,a.appendChild(u)}document.body.appendChild(a);try{a.submit(),document.body.removeChild(a),n.resolve()}catch(t){n.reject(t)}})).fail((function(t){n.reject(t)})):n.reject(new Error("Offline"))}))},e}(i.EventEmitter);e.APIInstance=d;var h=function(){function t(){}return t.getInstance=function(){return this.instance||(this.instance=new d("/api/v1")),this.instance},t.on=function(t,e){return this.getInstance().on(t,e)},t.once=function(t,e){return this.getInstance().once(t,e)},t.off=function(t,e){return this.getInstance().off(t,e)},t.trigger=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return(e=this.getInstance()).trigger.apply(e,[t].concat(n))},t.method=function(t,e,n,r){return void 0===r&&(r=u.DEFAULT),this.getInstance().method(t,e,n,r)},t.cacheable=function(){return this.getInstance().cacheable()},t.formDownload=function(t,e,n){return void 0===n&&(n=u.DEFAULT),this.getInstance().formDownload(t,e,n)},t.get=function(t,e,n){return void 0===n&&(n=u.DEFAULT),this.getInstance().get(t,e,n)},t.post=function(t,e,n){return void 0===n&&(n=u.DEFAULT),this.getInstance().post(t,e,n)},t.put=function(t,e,n){return void 0===n&&(n=u.DEFAULT),this.getInstance().put(t,e,n)},t.delete=function(t,e,n){return void 0===n&&(n=u.DEFAULT),this.getInstance().delete(t,e,n)},t.upload=function(t,e,n,r,o,i){return void 0===o&&(o=u.DEFAULT),this.getInstance().upload(t,e,n,r,o,i)},t.addAuthorizedEndpoint=function(t){return this.getInstance().addAuthorizedEndpoint(t)},t.isAuthorizedEndpoint=function(t){return this.getInstance().isAuthorizedEndpoint(t)},t.setAuthorizationCallback=function(t){return this.getInstance().setAuthorizationCallback(t)},t.getAuthorizationCallback=function(){return this.getInstance().getAuthorizationCallback()},t.getOfflineRouter=function(){return this.getInstance().getOfflineRouter()},t.isForcedOfflineMode=function(){return this.getInstance().isForcedOfflineMode()},t.setForcedOfflineMode=function(t){return this.getInstance().setForcedOfflineMode(t)},t.clearAuthorizedEndpoints=function(){this.getInstance().clearAuthorizedEndpoints()},t.getRootAddress=function(){return this.getInstance().getRootAddress()},t.isVirusFileUploadException=function(t){return r.BackendException.matches(t,"StorageException","ERR_SCAN_FILE_VIRUS_FOUND")},t.EVENT_AUTHENTICATION_REQUIRED="authentication-required",t.EVENT_AUTHENTICATION_EXPIRED="authentication-expired",t.EVENT_UPGRADE_EXCEPTION="upgrade-exception",t.EVENT_TOS_VIOLATION="tos-violation",t}();e.API=h}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r;void 0===(r=function(t,e){var n;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.PAD_BOTH=0]="PAD_BOTH",t[t.PAD_LEFT=1]="PAD_LEFT",t[t.PAD_RIGHT=2]="PAD_RIGHT"}(n=e.EStringPadType||(e.EStringPadType={}));var r=function(){function t(){}return t.convertStringToSafeFileNameOnDisk=function(t){return String(t||"").replace(/(^[\s]+|[\s]+$)/g,"-").replace(/[^a-zA-Z0-9_-]/g,"-").replace(/[- ]+/g,"-")},t.strPad=function(t,e,r,o){void 0===r&&(r=" "),void 0===o&&(o=n.PAD_LEFT);var i=String(t);r=String(r)||" ";var s=i.length,a=r.length;switch(o){case n.PAD_LEFT:for(;s<e;)i=r.concat(i),s+=a;break;case n.PAD_RIGHT:for(;s<e;)i=i.concat(r),s+=a;break;case n.PAD_BOTH:for(var u=!1;s<e;)i=u?r.concat(i):i.concat(r),s+=a,u=!u;break;default:throw new Error("Invalid argument: padType: Expected a valid EStringPadType, got: "+JSON.stringify(o))}return i},t.toHTML=function(t){this.escape.textContent=String(t);var e=this.escape.innerHTML;return this.escape.innerHTML="",e},t.fromHTML=function(t){return this.unescape.innerHTML=String(t||""),this.unescape.value},t.isJSONObjectOrArrayString=function(t){try{var e=JSON.parse(t);return Array.isArray(e)||e&&e instanceof Object}catch(t){return!1}},t.trim=function(t,e){if(void 0===e&&(e=" \r\n\t"),!t)return"";for(var n=e.split(""),r=0,o=t.length-1;n.indexOf(t.charAt(r))>-1;)r++;if(r>o)return"";for(;n.indexOf(t.charAt(o))>-1;)o--;return t.substring(r,o+1)},t.regexpEscape=function(t){for(var e="",n=0,r=t.length;n<r;n++){var o=t.charAt(n);switch(o){case"/":case"+":case"*":case"[":case"]":case"\\":case"{":case"}":case".":case"?":e+="\\"+o;break;default:e+=o}}return e},t.createRegexp=function(t){for(var e="",n=0,r=t.length;n<r;n++){var o=t.charAt(n);switch(o){case"/":case"+":case"*":case"[":case"]":case"\\":case"{":case"}":case".":case"?":case"(":case")":e+="\\"+o;break;default:e+=o}}return new RegExp(e,"g")},t.nl2br=function(e){var n=e.split("\n");if(n.length>1){for(var r=[],o=0,i=n.length;o<i;o++)r.push(t.toHTML(n[o]));return r.join("<br />")}return t.toHTML(n[0])},t.base64ToUTF8=function(t){return decodeURIComponent(escape(window.atob(t)))},t.quoted_printable_decode=function(t){var e=t.replace(/=\r\n/gm,"").replace(/=([0-9A-F]{2})/gim,(function(t,e){return String.fromCharCode(parseInt(e,16))}));return decodeURIComponent(escape(e))},t.mb_decode_mime_header=function(t){var e;if(!(e=/^=\?([^?]+)\?([^?]+)\?(.*)\?=$/.exec(t)))return t;e[1];var n=e[2],r=e[3];switch(n.toLowerCase()){case"q":return this.quoted_printable_decode(r);case"b":return this.base64ToUTF8(r);default:return t}},t.prepareUTF8StringForDownload=function(t){return t?"Ã¯Â»Â¿"+unescape(encodeURIComponent(t)):t},t.isMultiline=function(t){return"string"==typeof t&&(t.indexOf("\n")>1||t.indexOf("\r")>-1)},t.getLinesOf=function(t){return String(t).replace(/\r\n/g,"\n").replace(/\r/g,"\n").split("\n")},t.base64ToUInt8ArrayBuffer=function(t){for(var e=atob(t),n=e.length,r=new Uint8Array(n),o=0;o<n;o++)r[o]=e.charCodeAt(o);return r},t.ALPHA_REGEX=/^[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7B9\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]+$/i,t.ALPHA_NUMERIC_REGEX=/^[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7B9\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]+$/i,t.ALPHA_SPACE_REGEX=/^[ A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7B9\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]+$/i,t.ALPHA_NUMERIC_SPACE_REGEX=/^[ 0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7B9\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]+$/i,t.escape=document.createElement("span"),t.unescape=document.createElement("textarea"),t}();e.Strings=r;var o=function(){function t(t){this.remaining=String(t||""),this.consumed=""}return t.prototype.read=function(t){var e=this.remaining.substr(0,t);return this.consumed=this.consumed.concat(e),this.remaining=this.remaining.slice(e.length),e},t.prototype.rewind=function(t){var e=this.consumed.substr(-t),n=e.length;return this.remaining=e.concat(this.remaining),this.consumed=this.consumed.substr(0,this.consumed.length-n),e},t.prototype.seek=function(t){t<0&&(t=0);var e=this.getPosition();t!==e&&(t<e?this.rewind(e-t):this.read(t-e))},t.prototype.getPosition=function(){return this.consumed.length},t.prototype.getConsumed=function(){return this.consumed},t.prototype.getRemaining=function(){return this.remaining},t}();e.StringBuffer=o}.apply(e,[n,e]))||(t.exports=r)},function(t,e,n){"use strict";var r,o,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r=[n,e,n(10)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.copy=function(t){if(t instanceof Object||"function"==typeof t){var e={};for(var n in t)t.hasOwnProperty(n)&&t.propertyIsEnumerable(n)&&(e[n]=t[n]);return e}return t},t.clone=function(t){var e;if(null===t)return null;if(t instanceof n.ThemePropertyValue)return t.clone();switch(void 0===t?"undefined":i(t)){case"boolean":case"number":case"string":case"function":return t;case"object":if(Array.isArray(t)){e=[];for(var r=0,o=t.length;r<o;r++)e.push(this.clone(t[r]))}else{if(!t)return null;if(t instanceof Date){var s=new Date;return s.setTime(t.getTime()),s}for(var a in e={},t)t.hasOwnProperty(a)&&t.propertyIsEnumerable(a)&&(e[a]=this.clone(t[a]))}default:if(t)for(var a in e=e||{},t)void 0===e[a]&&t.hasOwnProperty(a)&&t.propertyIsEnumerable(a)&&(e[a]=t[a]);return e}},t.areTheSame=function(e,n,r){if(void 0===r&&(r=[]),e===n)return!0;switch(!0){case null===e:case null===n:case"number"==typeof e&&"number"==typeof n&&(isNaN(e)||isNaN(n)):case(void 0===e?"undefined":i(e))!==(void 0===n?"undefined":i(n)):return!1;default:if(Array.isArray(e)!==Array.isArray(n))return!1;if("function"==typeof e&&"function"==typeof n)return e.toString()!==n.toString();if("symbol"===(void 0===e?"undefined":i(e))||"symbol"===(void 0===n?"undefined":i(n)))return!1;if(Array.isArray(e)){var o=e.length;if(o!==n.length)return!1;for(var s=0,a=o;s<a;s++)if(!t.areTheSame(e[s],n[s],r))return!1;return!0}if("object"!==(void 0===e?"undefined":i(e))||"object"!==(void 0===n?"undefined":i(n)))return!1;var u=Object.keys(e),l=Object.keys(n),c=u.sort().filter((function(t){return-1===r.indexOf(t)&&void 0!==e[t]})),p=l.sort().filter((function(t){return-1===r.indexOf(t)&&void 0!==n[t]}));if(!t.areTheSame(c,p,r))return!1;for(s=0,a=c.length;s<a;s++)if(!t.areTheSame(e[c[s]],n[p[s]],r))return!1;return!0}},t.arrayUnique=function(t,e){var n=e||function(t,e){return t===e?0:-1},r=[];if(Array.isArray(t)&&t.length){r.push(t[0]);for(var o=void 0,i=1,s=t.length;i<s;i++){o=!0;for(var a=0,u=i;a<u;a++)if(0===n(t[i],t[a])){o=!1;break}o&&r.push(t[i])}return r}return t},t.arrayShuffle=function(e){if(!Array.isArray(e))return t.clone(e);for(var n,r,o=e.slice(0),i=e.length;0!==i;)r=Math.floor(Math.random()*i),n=o[i-=1],o[i]=o[r],o[r]=n;return o},t}();e.Helpers=r}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(0),n(46)],void 0===(o=function(t,e,n,r){Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.flushCache=function(){for(var t in this.cache)this.cache.hasOwnProperty(t)&&delete this.cache[t];console.warn("[NETCACHE]: Cache cleared")},t.appendRevisionToURL=function(t){return t?t.indexOf("?")>-1?t+"&_revision_="+r.Platform.getPlatformDetails().revision:t+"?_revision_="+r.Platform.getPlatformDetails().revision:t},t.getNetworkCache=function(){var t=this;return void 0!==this.networkCache?this.networkCache:this.networkCache=n.Deferred((function(e){var r=n(document).find('link[rel=network_cache][type="application/json"]').attr("href");r?(r=t.appendRevisionToURL(r),n.get(r).then((function(n){if(n)for(var r in n)if(n.hasOwnProperty(r)&&"string"==typeof n[r])try{var o=atob(n[r]);if(r.indexOf(".json")>-1)try{o=JSON.parse(o)}catch(t){}t.memoryCache[t.appendRevisionToURL(r)]=o}catch(t){}e.resolve()})).fail((function(){console.warn("[NET] Failed to fetch network_cache"),e.resolve()}))):e.resolve()}))},t.get=function(t){var e=this;try{return t=this.appendRevisionToURL(t),void 0!==this.cache[t]?this.cache[t]:(this.cache[t]=n.Deferred((function(r){e.getNetworkCache().then((function(){if(e.memoryCache[t])return console.warn("[NET] GET.memory_cache: ",t),void r.resolve(e.memoryCache[t]);console.warn("[NET] GET: ",t),n.get(t).then((function(t){r.resolve(t)})).fail((function(n){setTimeout((function(){navigator.onLine||delete e.cache[t]}),10),r.reject(n)}))}))})),this.cache[t])}catch(e){return n.Deferred((function(n){n.reject(new Error("Fetch "+JSON.stringify(t)+" failed: "+e.toString()))}))}},t.cache={},t.memoryCache={},t}();e.NetworkCache=o}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(0),n(3),n(17),n(4),n(7),n(1),n(10),n(13),n(26)],void 0===(o=function(t,e,n,r,o,i,u,l,c,p,d){var h,f,g,m;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.FIELD="field",t.LABEL="label",t.INPUT="input"}(h=e.SelectionInputContext||(e.SelectionInputContext={})),function(t){t[t.FULL=0]="FULL",t[t.HALF=1]="HALF",t[t.THIRD=2]="THIRD",t[t.QUARTER=3]="QUARTER",t[t.FIFTH=4]="FIFTH",t[t.ONE_UNIT=5]="ONE_UNIT",t[t.TWO_UNITS=6]="TWO_UNITS",t[t.THREE_UNITS=7]="THREE_UNITS",t[t.FOUR_UNITS=8]="FOUR_UNITS",t[t.FIVE_UNITS=9]="FIVE_UNITS",t[t.REMAINING=10]="REMAINING"}(f=e.InputSpan||(e.InputSpan={})),function(t){t.LEFT="left",t.TOP="top",t.RIGHT="right",t.INSIDE="inside"}(g=e.LabelAlignment||(e.LabelAlignment={})),function(t){t.LEFT="left",t.CENTER="center",t.RIGHT="right",t.JUSTIFY="justify"}(e.TextAlign||(e.TextAlign={})),function(t){t[t.NONE=0]="NONE",t[t.HORIZONTAL=1]="HORIZONTAL",t[t.HORIZONTAL_AND_VERTICAL=2]="HORIZONTAL_AND_VERTICAL"}(m=e.InputResizeCapabilities||(e.InputResizeCapabilities={}));var y=function(t){function e(e,n,r){var i=t.call(this)||this;return i.error=null,i.visible=!0,i.filled=!1,i.focused=!1,i.repeatedIndex=null,i.document=e,i.root=d.DOM.document.createElement(i.getRootNodeType()),i.setId(r||o.UniqueId.next()),i.properties=n,i.root.className="node",i.root.setAttribute("data-node-type-id",String(i.getTypeId())),i.dragIndicator=d.DOM.document.createElement("div"),i.dragIndicator.className="drag-svg",i.onSizeChanged(),i.onRequiredChanged(),i}return a(e,t),e.prototype.getRoot=function(){return this.root},e.prototype.getId=function(){return this.id},e.prototype.setId=function(t){return this.id=t,t?this.root.setAttribute("id",t):this.root.removeAttribute("id"),this},e.prototype.addClass=function(t){return n(this.root).addClass(t),this},e.prototype.removeClass=function(t){return n(this.root).removeClass(t),this},e.prototype.getParent=function(){return this.parent||null},e.prototype.flatten=function(){return[this]},e.prototype.getDocument=function(){return this.document},e.prototype.setParent=function(t){return this.parent=t,this},e.prototype.remove=function(){return this.parent&&this.parent.removeChild(this),this},e.getDefaultProperties=function(t){return{}},e.addSizeProperties=function(t){return(t=t||{}).size={width:20},t},e.addLabelProperties=function(t,e,n){return void 0===e&&(e="Label"),t.label={text:e,align:n.getThemeValues().getProperty("label.align").inherit(),width:n.getThemeValues().getProperty("label.width").inherit(),color:n.getThemeValues().getProperty("label.color").inherit(),font:{family:n.getThemeValues().getProperty("label.font.family").inherit(),size:n.getThemeValues().getProperty("label.font.size").inherit(),align:n.getThemeValues().getProperty("label.font.align").inherit(),bold:n.getThemeValues().getProperty("label.font.bold").inherit(),italic:n.getThemeValues().getProperty("label.font.italic").inherit(),underline:n.getThemeValues().getProperty("label.font.underline").inherit()}},t},e.addInputProperties=function(t,e){return t.input={color:e.getThemeValues().getProperty("input.color").inherit(),backgroundColor:e.getThemeValues().getProperty("input.backgroundColor").inherit(),borderColor:e.getThemeValues().getProperty("input.borderColor").inherit(),borderRadius:e.getThemeValues().getProperty("input.borderRadius").inherit(),borderStyle:e.getThemeValues().getProperty("input.borderStyle").inherit(),borderWidth:e.getThemeValues().getProperty("input.borderWidth").inherit(),font:{family:e.getThemeValues().getProperty("input.font.family").inherit(),size:e.getThemeValues().getProperty("input.font.size").inherit(),bold:e.getThemeValues().getProperty("input.font.bold").inherit(),italic:e.getThemeValues().getProperty("input.font.italic").inherit(),underline:e.getThemeValues().getProperty("input.font.underline").inherit(),align:e.getThemeValues().getProperty("input.font.align").inherit()}},t},e.addValidationProperties=function(t){return t.validation={required:!1,format:"",minLength:null,maxLength:null,minValue:"",maxValue:"",customErrorMessage:""},t},e.prototype.onDrop=function(){},e.prototype.onParentPageMergedWithAnotherPage=function(){},e.prototype.onDeletedFromForm=function(){},e.prototype.onSizeChanged=function(){this.hasProperty("size.width")&&this.root.setAttribute("data-w",this.getProperty("size.width")),this.hasProperty("size.height")&&this.root.setAttribute("data-h",this.getProperty("size.height"))},e.prototype.getRootNodeType=function(){return"div"},e.prototype.getProperties=function(){return this.properties},e.prototype.getProperty=function(t){if(!this.properties||!t)return null;for(var e=String(t||"").split("."),n=this.properties,r=0,o=e.length;r<o;r++){if(void 0===n[e[r]])return null;n=n[e[r]]}return n instanceof c.ThemePropertyValue?n.getValue():n},e.prototype.hasProperty=function(t){if(!this.properties)return!1;for(var e=String(t||"").split("."),n=this.properties,r=0,o=e.length;r<o;r++){if(void 0===n[e[r]])return!1;n=n[e[r]]}return void 0!==n},e.prototype.setProperty=function(t,e,n){if(!this.properties)throw new Error("Failed to set property "+JSON.stringify(t)+": No default properties were previously set");for(var r,o=String(t||"").split("."),i=this.properties,s=0,a=o.length;s<a;s++){if(void 0===i)throw new Error("Illegal property "+JSON.stringify(t)+": Segment ");if(s===a-1)i[o[s]]instanceof c.ThemePropertyValue?(r=i[o[s]].getValue(),i[o[s]].setValue(e)):(r=i[o[s]],i[o[s]]=e);else if(void 0===(i=i[o[s]]))throw new Error("Illegal property "+JSON.stringify(t)+": Segment #"+s+" - "+JSON.stringify(o[s])+" is not defined!")}return this.trigger("property.changed",this,t,e,r,n),this.document&&(this.document.trigger("property.changed",this,t,e,r,n),"name"!==t&&"choices.text"!==t||this.document.runDuplicateFieldNameCheck()),this},e.prototype.serialize=function(){return{id:this.getId()||null,typeId:this.getTypeId(),properties:this.getProperties()||{}}},e.prototype.render=function(){var t=this.getFieldsLayout();if(t){for(var n=this.hasLabel(),r=0;this.root.firstChild;)this.root.removeChild(this.root.firstChild);if(this.resizers&&(this.resizers.north&&this.root.appendChild(this.resizers.north),this.resizers.south&&this.root.appendChild(this.resizers.south),this.resizers.east&&this.root.appendChild(this.resizers.east),this.resizers.west&&this.root.appendChild(this.resizers.west),this.resizers.label&&this.root.appendChild(this.resizers.label)),this.fieldsDOMNode)for(;this.fieldsDOMNode.firstChild;)this.fieldsDOMNode.removeChild(this.fieldsDOMNode.firstChild);else this.fieldsDOMNode=d.DOM.document.createElement("div"),this.fieldsDOMNode.className="f";if(n)switch(this.labelDOMNode=this.labelDOMNode||d.DOM.document.createElement("label"),this.labelDOMNode.textContent=l.I18n.translateViewFormText(this.properties.label.text,this.getLabelI18nContext()),c.cast(this.properties.label.align)){case g.LEFT:r=c.cast(this.properties.label.width),this.getProperty("size.width")-r<1&&(r=this.getProperty("size.width")-1),this.labelDOMNode.setAttribute("data-wp",String(r)),this.resizers&&this.resizers.label&&(this.resizers.label.setAttribute("data-wl",String(r)),this.resizers.label.removeAttribute("data-wr")),this.setLabelTextAlignClass("label-pl-left"),this.root.appendChild(this.dragIndicator),this.root.appendChild(this.labelDOMNode),this.root.appendChild(this.fieldsDOMNode);break;case g.RIGHT:r=c.cast(this.properties.label.width),this.getProperty("size.width")-r<1&&(r=this.getProperty("size.width")-1),this.labelDOMNode.setAttribute("data-wp",String(r)),this.resizers&&this.resizers.label&&(this.resizers.label.setAttribute("data-wr",String(r)),this.resizers.label.removeAttribute("data-wl")),this.setLabelTextAlignClass("label-pl-right"),this.root.appendChild(this.dragIndicator),this.root.appendChild(this.fieldsDOMNode),this.root.appendChild(this.labelDOMNode);break;case g.INSIDE:this.supportsLabelInsideRendering()?(this.labelDOMNode.setAttribute("data-wp",this.getProperty("size.width")),this.setLabelTextAlignClass("label-pl-inside"),this.root.appendChild(this.dragIndicator),this.root.appendChild(this.labelDOMNode),this.root.appendChild(this.fieldsDOMNode)):(this.labelDOMNode.setAttribute("data-wp",this.getProperty("size.width")),this.setLabelTextAlignClass("label-pl-top label-pl-emulated-inside"),this.root.appendChild(this.dragIndicator),this.root.appendChild(this.labelDOMNode),this.root.appendChild(this.fieldsDOMNode));break;case g.TOP:default:this.labelDOMNode.setAttribute("data-wp",this.getProperty("size.width")),this.setLabelTextAlignClass("label-pl-top"),this.root.appendChild(this.dragIndicator),this.root.appendChild(this.labelDOMNode),this.root.appendChild(this.fieldsDOMNode)}else this.root.appendChild(this.dragIndicator),this.root.appendChild(this.fieldsDOMNode);var o=this.properties.size.width;r?this.fieldsDOMNode.setAttribute("data-w",String(o=Math.max(this.properties.size.width-r,1))):this.fieldsDOMNode.removeAttribute("data-w"),o<this.getMinFieldsRegionWidthForMobileModeForcedRendering()&&(t=e.forceFieldsLayoutToFullWidthMode(t));for(var i=[],s=[],a=[],u=0,p=t.length;u<p;u++)if(i[t[u].row]||(i[t[u].row]=d.DOM.document.createElement("div"),i[t[u].row].className="r",s[t[u].row]=0,a[t[u].row]=[]),i[t[u].row].appendChild(t[u].domNode),t[u].span!==f.REMAINING){var h=this.getWidthAttribute(t[u].span,r);t[u].domNode.setAttribute("data-wp",String(h)),s[t[u].row]+=h}else a[t[u].row].push(t[u].domNode);for(u=0,p=i.length;u<p;u++)i[u]&&this.fieldsDOMNode.appendChild(i[u]);1===i.length?this.addClass("single-row"):this.removeClass("single-row");for(u=0,p=a.length;u<p;u++)if(a[u]){var m=0;if(a[u]&&(m=a[u].length))for(var y=0;y<m;y++)a[u][y].setAttribute("data-wp",String(Math[y===m-1||1===m?"round":"floor"]((o-s[u])/m)))}if(this.error){var v=d.DOM.document.createElement("div");v.textContent=l.I18n.translateViewFormText.apply(l.I18n,[this.error.message,"form-fields-errors",0].concat(this.error.args||[])),v.className="error",this.fieldsDOMNode.appendChild(v)}}},e.prototype.getWidthAttribute=function(t,e){switch(t){case f.ONE_UNIT:return 1;case f.TWO_UNITS:return 2;case f.THREE_UNITS:return 3;case f.FOUR_UNITS:return 4;case f.FIVE_UNITS:return 5;default:var n=this.properties.size.width-e;switch(n<0&&(n=0),t){case f.FULL:return n;case f.FIFTH:return Math.floor(n/5);case f.QUARTER:return Math.floor(n/4);case f.THIRD:return Math.floor(n/3);case f.HALF:return Math.floor(n/2);default:return 1}}},e.prototype.setLabelDOMNodeText=function(t,e){return t.textContent=e,this},e.prototype.setLabelTextAlignClass=function(t){return t===this.labelTextAlignClass||(this.labelTextAlignClass&&this.removeClass(this.labelTextAlignClass),this.labelTextAlignClass=t,this.labelTextAlignClass&&this.addClass(t)),this},e.prototype.setLabelTextWhichIsComingFromTheUser=function(t,e){if(e===this.labelDOMNode){var n=String(t||"").trim().replace(/[\r\n]+/g," ");this.setProperty("label.text",n,this)}return this},e.prototype.getLabelDOMNode=function(){return this.labelDOMNode},e.prototype.onLabelTextChanged=function(){this.labelDOMNode&&(this.labelDOMNode.textContent=String(this.getProperty("label.text")||""))},e.prototype.getRenderedCSS=function(){return null},e.prototype.onRequiredChanged=function(){this.hasProperty("validation.required")&&this[this.getProperty("validation.required")?"addClass":"removeClass"]("required")},e.prototype.onPlaceholderChanged=function(){},e.prototype.isDeletable=function(){return!0},e.prototype.isClonable=function(){return!0},e.prototype.isDragable=function(){return!0},e.prototype.getResizeCapabilities=function(){return m.HORIZONTAL},e.prototype.showResizers=function(t){if(t){if(!this.resizers){var e=void 0,n=this.getResizeCapabilities();if(this.resizers={north:n===m.HORIZONTAL_AND_VERTICAL?d.DOM.document.createElement("div"):null,south:n===m.HORIZONTAL_AND_VERTICAL?d.DOM.document.createElement("div"):null,east:n===m.HORIZONTAL_AND_VERTICAL||n===m.HORIZONTAL?d.DOM.document.createElement("div"):null,west:n===m.HORIZONTAL_AND_VERTICAL||n===m.HORIZONTAL?d.DOM.document.createElement("div"):null},this.hasProperty("label.width")){switch(this.resizers.label=d.DOM.document.createElement("div"),this.resizers.label.className="resizer label",c.cast(this.properties.label.align)){case g.LEFT:e=c.cast(this.properties.label.width),this.getProperty("size.width")-e<1&&(e=this.getProperty("size.width")-1),this.resizers.label.setAttribute("data-wl",String(e));break;case g.RIGHT:e=c.cast(this.properties.label.width),this.getProperty("size.width")-e<1&&(e=this.getProperty("size.width")-1),this.resizers.label.setAttribute("data-wr",String(e))}this.root.appendChild(this.resizers.label)}else this.resizers.label=null;this.resizers.north&&(this.resizers.north.className="resizer north",this.root.appendChild(this.resizers.north)),this.resizers.south&&(this.resizers.south.className="resizer south",this.root.appendChild(this.resizers.south)),this.resizers.east&&(this.resizers.east.className="resizer east",this.root.appendChild(this.resizers.east)),this.resizers.west&&(this.resizers.west.className="resizer west",this.root.appendChild(this.resizers.west))}}else this.resizers&&(this.resizers.north&&this.resizers.north.parentNode&&this.resizers.north.parentNode.removeChild(this.resizers.north),this.resizers.south&&this.resizers.south.parentNode&&this.resizers.south.parentNode.removeChild(this.resizers.south),this.resizers.east&&this.resizers.east.parentNode&&this.resizers.east.parentNode.removeChild(this.resizers.east),this.resizers.west&&this.resizers.west.parentNode&&this.resizers.west.parentNode.removeChild(this.resizers.west),this.resizers.label&&this.resizers.label.parentNode&&this.resizers.label.parentNode.removeChild(this.resizers.label),this.resizers=void 0)},e.prototype.getMinWidth=function(){return 2},e.prototype.isSelectable=function(){return!0},e.prototype.getTextAssociatedWithLabel=function(t){return t===this.labelDOMNode?this.getProperty("label.text"):""},e.prototype.onSelect=function(){this.addClass("selected"),this.showResizers(!0)},e.prototype.onSelectSubfield=function(t){},e.prototype.onDeselect=function(){this.removeClass("selected"),this.showResizers(!1)},e.prototype.getMinFieldsRegionWidthForMobileModeForcedRendering=function(){return 1},e.forceFieldsLayoutToFullWidthMode=function(t){for(var e=0,n=t.length;e<n;e++)t[e].span=f.FULL,t[e].row=e;return t},e.prototype.getPage=function(){return this.parent?this.parent.getTypeId()===i.NodeTypes.PAGE?this.parent:this.parent.getPage():null},e.prototype.onInsertedIntoFormByUser=function(){if(this.hasProperty("name")){var t=this.getProperty("name");t&&(t=this.document.getNameAutoIncrement(t.replace(/([ ]+)?([\d]+)$/g,"")),this.setProperty("name",t,this))}},e.prototype.setError=function(t){if(t===this.error)return this;this.error="string"==typeof t?{message:t,code:null}:t,this.error?this.root.classList.add("error"):this.root.classList.remove("error");var e=document.activeElement;this.render();try{e.focus()}catch(t){}return this},e.prototype.getError=function(){return this.error},e.prototype.isVisible=function(){return this.visible},e.prototype.setVisible=function(t){return t!==this.visible&&(this.visible=!!t,this.visible?this.root.classList.remove("hidden"):this.root.classList.add("hidden")),this},e.prototype.enumerateSubFields=function(){return null},e.prototype.getSubFieldValue=function(t){return null},e.prototype.getIcon=function(){return"plugin"},e.prototype.getRepeatedIndex=function(){return this.repeatedIndex},e.prototype.setRepeatedIndex=function(t){return this.repeatedIndex=t,this},e.prototype.listenToUserInput=function(t){},e.prototype.onClonedInsideRepeatableField=function(){},e.prototype.getAllowedValidators=function(){return["","alpha","alpha.numeric","alpha.space","alpha.numeric.space","email","name","number.float","number.ufloat","number.int","number.uint","url","phone","phone.libphonenumber","pattern"]},e.prototype.scrollIntoView=function(){var t=this.getPage();return t&&(this.document.getActivePage()!==t&&this.document.setActivePage(t),this.root.scrollIntoView({behavior:"smooth",block:"nearest"})),this},e.prototype.requestUserAttention=function(){var t=this;return this.addClass("buzz"),setTimeout((function(){t.removeClass("buzz")}),50),setTimeout((function(){t.addClass("buzz")}),100),setTimeout((function(){t.removeClass("buzz")}),150),this},e.prototype.getFieldContexts=function(){for(var t=[],e=this.getFieldsLayout(),n=0,r=e.length;n<r;n++)t.push({node:e[n].domNode,context:h.INPUT});return t},e.prototype.clone=function(){return this.document.createElement(this.getTypeId(),u.Helpers.clone(this.properties),o.UniqueId.next())},e.prototype.getTranslations=function(){return null},e.prototype.performTranslation=function(){console.log("[TODO] Implement "+this.constructor.toString().replace(/^function ([\S]+)\(([\s\S]+)$/g,"$1")+".performTranslation()")},e.prototype.getLabelI18nContext=function(){return null},e.prototype.getAncestorOfType=function(t){for(var e=this;e&&e.getTypeId()!==i.NodeTypes.DOCUMENT;){if(e.getTypeId()===t)return e;e=e.getParent()}return null},e.prototype.resetObjectFormatting=function(t){if(t&&"object"===(void 0===t?"undefined":s(t)))for(var e in t)t.propertyIsEnumerable(e)&&(t[e]instanceof c.ThemePropertyValue?t[e].setValue(null):t[e]&&"object"===s(t[e])&&this.resetObjectFormatting(t[e]))},e.prototype.scanForCustomFormatting=function(t,e){if(t&&"object"===(void 0===t?"undefined":s(t)))for(var n in t)t.propertyIsEnumerable(n)&&(t[n]instanceof c.ThemePropertyValue?t[n].isCustomValue()&&e():t[n]&&"object"===s(t[n])&&this.scanForCustomFormatting(t[n],e))},e.prototype.clearFormatting=function(t){return void 0===t&&(t=!0),this.resetObjectFormatting(this.properties),t&&this.document&&(this.render(),this.document.trigger("property.changed",this,"void","1","0",this),this.document.getTheme().markAsModified()),this},e.prototype.hasOwnThemeProperties=function(){var t=!1;return this.scanForCustomFormatting(this.properties,(function(){t=!0})),t},e.prototype.setFilledState=function(t){return t!==this.filled&&(this.filled=!!t,this.filled?this.addClass("filled"):this.removeClass("filled")),this},e.prototype.onFilledStateChanged=function(t){this.setFilledState(!(""===t||null===t))},e.prototype.isFilled=function(){return this.filled},e.prototype.setFocused=function(t){return t!==this.focused&&(this.focused=!!t,this.focused?this.addClass("has-focus"):this.removeClass("has-focus")),this},e.prototype.isFocused=function(){return this.focused},e.prototype.isRequired=function(){return!!this.hasProperty("validation.required")&&this.getProperty("validation.required")},e.prototype.embedInPDFPage=function(t){if(this.root){var e=t.getDocument().create(p.PDFNodeEntityType.INPUT_UNKNOWN);t.initializeFieldDimensions(this.root,e),t.appendChild(e);var n=t.getDocument().create(p.PDFNodeEntityType.TEXT);n.setFontSize(8).setFontFamily("Roboto").setPoint({top:e.getDimensions().top+10,left:e.getDimensions().left+10}).setText("Incompatible"),t.write(n)}},e.prototype.checkIfFieldHasInvalidSubfieldNames=function(){return!1},e.prototype.supportsDefaultValue=function(){return!1},e.prototype.getDefaultValueStrategy=function(){return null},e}(r.EventEmitter);e.Input=y}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r;void 0===(r=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,n){this.value=null,this.value=t,this.parent=e||null,this.theme=n||null}return t.prototype.isCustomValue=function(){return!!this.parent&&null!==this.value},t.prototype.getOwnValue=function(){return this.value},t.prototype.getValue=function(){return null===this.value?this.parent?this.parent.getValue():null:this.value},t.prototype.setValue=function(t){return void 0===t||null===t&&!this.parent||(this.parent&&t===this.parent.getValue()?this.value=null:this.value=t,this.theme&&this.theme.onChange()),this},t.prototype.inherit=function(){return new t(null,this)},t.prototype.clone=function(){return new t(this.value,this.parent)},t}();e.ThemePropertyValue=n,e.cast=function(t){return t instanceof n?t.getValue():t}}.apply(e,[n,e]))||(t.exports=r)},function(t,e,n){"use strict";var r;void 0===(r=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.loadingRequests=0,this.rootNode=t}return t.prototype.addLoadRequest=function(){return this.loadingRequests++,this.updateLoadingState(),this},t.prototype.removeLoadRequest=function(){return this.loadingRequests--,this.loadingRequests<0&&(this.loadingRequests=0),this.updateLoadingState(),this},t.prototype.getRootNode=function(){return this.rootNode},t.prototype.updateLoadingState=function(){if(this.loadingRequests>0){if(!this.overlay){this.overlay=document.createElement("div"),this.overlay.setAttribute("data-role","loader");var t=document.createElement("span");t.setAttribute("data-role","animation"),t.className="vfb vfb-refresh rotating",this.overlay.appendChild(t),this.overlay.onmousedown=this.overlay.onmousewheel=function(t){return t.preventDefault(),t.stopPropagation(),!1}}this.rootNode.appendChild(this.overlay)}else this.overlay&&(this.overlay.parentNode&&this.overlay.parentNode.removeChild(this.overlay),this.overlay=void 0)},t.prototype.isBusy=function(){return this.loadingRequests>0},t.prototype.reattachToElement=function(t){return this.rootNode=t,this},t}();e.Loader=n}.apply(e,[n,e]))||(t.exports=r)},function(t,e,n){"use strict";var r;void 0===(r=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.create=function(t,e){void 0===e&&(e=0);var n=null;return function(){clearTimeout(n),n=setTimeout((function(){t()}),e)}},t}();e.Debouncer=n}.apply(e,[n,e]))||(t.exports=r)},function(t,e,n){"use strict";var r;void 0===(r=function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.DOCUMENT="document",t.PAGE="page",t.TEXT="text",t.IMAGE="image",t.RECTANGLE="rectangle",t.BUTTON="button",t.INPUT_TEXT="text_field",t.INPUT_RADIO="radio_field",t.INPUT_CHECKBOX="checkbox_field",t.INPUT_DROPDOWN="dropdown_field",t.INPUT_SIGNATURE="signature_field",t.INPUT_UNKNOWN="unknown_field"}(e.PDFNodeEntityType||(e.PDFNodeEntityType={})),function(t){t.SUBMIT="submit",t.RESET="reset"}(e.PDFButtonType||(e.PDFButtonType={})),function(t){t[t.RESOURCE=0]="RESOURCE",t[t.FONT=1]="FONT"}(e.PDFResourceType||(e.PDFResourceType={}))}.apply(e,[n,e]))||(t.exports=r)},function(t,e,n){"use strict";var r,o,i=(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});void 0===(r=function(t,e){var n;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.TOK_IF=0]="TOK_IF",t[t.TOK_UNLESS=1]="TOK_UNLESS",t[t.TOK_EACH=2]="TOK_EACH",t[t.TOK_WITH=3]="TOK_WITH",t[t.TOK_ELSE=4]="TOK_ELSE",t[t.TOK_END=5]="TOK_END",t[t.TOK_VAR=6]="TOK_VAR",t[t.TOK_TEXT=7]="TOK_TEXT"}(n||(n={}));var r=function(){function t(t,e){this.parent=null,this.type=t,this.params=e}return t.prototype.withParent=function(t){return this.parent=t,this},t.prototype.getParent=function(){return this.parent},t.prototype.getBlockType=function(){return this.type},t.prototype.getParam=function(t){return this.params&&this.params[t]||null},t.prototype.setParam=function(t,e){this.params[t]=e},t}(),o=function(){function t(t,e,n){this.parent=null,this.model=t,this.parent=e||null,this.helpers=n||[]}return t.prototype.getModel=function(){return this.model},t.prototype.get=function(t){if("this"===t)return this.model;var e,n=t.split("/"),r=n.length;return null==(e=r>1?this.cd(n.slice(0,r-1).join("/")).get(n[r-1]):".."==n[0]?this.getParent().getModel():this.model[n[0]])?"":e},t.prototype.getHelper=function(t){for(var e=0,n=this.helpers.length;e<n;e++)if(this.helpers[e].name===t)return this.helpers[e];throw new Error('HELPER "'+t+'" not found!')},t.prototype.isNotEmpty=function(t){var e=this.get(t);return!!e&&!(e instanceof Array&&0===e.length)},t.prototype.cd=function(e){var n=e.split("/");return 1===n.length?new t(this.get(n[0])||{},this,this.helpers):new t(this.get(n[0])||{},this,this.helpers).cd(n.slice(1).join("/"))},t.prototype.each=function(e,n){var r=this.get(e)||[];if(r&&r instanceof Array)for(var o=0,i=r.length;o<i;o++)n(new t(r[o],this,this.helpers))},t.prototype.getParent=function(){if(this.parent)return this.parent;throw new Error("Failed to get context parent!")},t}(),s=function(t){function e(e){var r=t.call(this,n.TOK_EACH,[])||this;if(r.children=[],r.params.push(c.normalizePath(e[0])),null===r.params[0])throw new Error("Illegal each argument!");return r}return i(e,t),e.prototype.allowChildren=function(){return!0},e.prototype.parse=function(t){var e="";return function(n){t.each(n.getParam(0),(function(t){for(var r=0,o=n.children.length;r<o;r++)e=e.concat(n.children[r].parse(t))}))}(this),e},e.prototype.append=function(t){return this.children.push(t.withParent(this)),t},e}(r),a=function(t){function e(){return t.call(this,n.TOK_ELSE,null)||this}return i(e,t),e.prototype.allowChildren=function(){return!1},e.prototype.parse=function(t){throw new Error("Should never be parsed")},e.prototype.append=function(t){throw new Error("Cannot have children")},e.prototype.withParent=function(t){if(!t||t.getBlockType()!==n.TOK_IF&&t.getBlockType()!==n.TOK_UNLESS)throw new Error("Invalid ELSE block parent: Expected IF or UNLESS!");return this},e}(r),u=function(t){function e(){return t.call(this,n.TOK_END,null)||this}return i(e,t),e.prototype.allowChildren=function(){return!1},e.prototype.parse=function(t){return""},e.prototype.append=function(t){throw new Error("Cannot append something into a END block!")},e}(r),l=function(t){function e(e){var r=t.call(this,n.TOK_IF,[])||this;if(r.elseAppended=!1,r.trueBranchChildren=[],r.falseBranchChildren=[],r.params[0]=c.normalizePath(e[0]),null===r.params[0])throw new Error("Illegal IF variable: "+e[0]);return r}return i(e,t),e.prototype.append=function(t){if(t.getBlockType()===n.TOK_ELSE){if(this.elseAppended)throw new Error("Else appended!");return this.elseAppended=!0,t}return this.elseAppended?this.falseBranchChildren.push(t):this.trueBranchChildren.push(t),t.withParent(this)},e.prototype.allowChildren=function(){return!0},e.prototype.parse=function(t){var e="";if(t.isNotEmpty(this.getParam(0)))for(var n=0,r=this.trueBranchChildren.length;n<r;n++)e=e.concat(this.trueBranchChildren[n].parse(t));else for(n=0,r=this.falseBranchChildren.length;n<r;n++)e=e.concat(this.falseBranchChildren[n].parse(t));return e},e}(r),c=function(){function t(e){this.helpers=[],this.instructions=t.tokenize(e);for(var n=0,r=t.GLOBAL_HELPERS.length;n<r;n++)this.helpers.push(t.GLOBAL_HELPERS[n])}return t.to_html=function(e,n,r){var o=new t(e);if(r)for(var i=0,s=r.length;i<s;i++)o.withHelper(r[i]);return o.parse(n)},t.createEmptyBlockText=function(){return{token:n.TOK_TEXT,params:null,settings:null,text:""}},t.tokenize=function(e){for(var r,o,i,s,a,u=0,l=e.length,c=null,p=[],d=[];u<l;)(o="{"===(r=e.charAt(u))?this.readToken(u,e):null)?(c&&p.push(c),c={text:o.text,token:o.token,params:o.params,settings:o.settings},p.push(c),u+=i=c.text.length,i,c=null):((c=c||t.createEmptyBlockText()).text+=r,u++);if(c&&p.push(c),!p.length)return[];for(var h=0,f=p.length;h<f;h++)if(p[h].token===n.TOK_END){if(!a)throw new Error("Unexpected TOKEN END!");a=a.getParent()}else s=this.createInstructionFromBlock(p[h]),a?(a.append(s),s.withParent(a)):(d.push(s),s.withParent(null)),s.allowChildren()&&(a=s);return d},t.prototype.parse=function(t){for(var e=[],n=new o(t,null,this.helpers),r=0,i=this.instructions.length;r<i;r++)e.push(this.instructions[r].parse(n));return e.join("")},t.readToken=function(t,e){if("{"!==e.charAt(t)||"{"!==e.charAt(t+1))return null;var n=!0,r=t+2,o=[],i=!1,s=void 0,a="",u=void 0,l=0,c=!1;for("{"===e.charAt(t+2)?(n=!1,r++,a="{{{"):a="{{";!i;)a+=l>=1&&c?this.repeat(" ",u=this.readPipeAndSpaces(e,r)):this.repeat(" ",u=this.readSpaces(e,r)),r+=u,(u=(s=this.readArgument(e,r)).length)?(a+=s,r+=u,r+=u=this.readSpaces(e,r),a+=this.repeat(" ",u),o.push(s),1===++l&&(c=!this.isReservedKeyword(s))):i=!0;return t=r,"}"===e.charAt(t)&&"}"===e.charAt(t+1)?(a+="}}",n?o.length>0?this.convertArgsToToken(o,n,a):null:"}"===e.charAt(t+2)&&o.length?(a+="}",this.convertArgsToToken(o,n,a)):null):void 0},t.readPipeAndSpaces=function(t,e){for(var n,r=0,o=0;(n=t.charAt(e))&&(" "===n||"\n"===n||"\r"===n||"\t"===n||"|"===n);)r++,"|"===n&&o++,e++;return 1===o?r:0},t.readSpaces=function(t,e){for(var n,r=0;(n=t.charAt(e))&&(" "===n||"\n"===n||"\r"===n||"\t"===n);)r++,e++;return r},t.readArgument=function(e,n){for(var r,o="";(r=e.charAt(n))&&t.VALID_CHARS_LIST_FOR_ARGUMENTS.indexOf(r)>-1;)o+=r,n++;return o},t.convertArgsToToken=function(t,e,r){var o=t.length;if(0===o)return null;if(1===o)return this.isReservedKeyword(t[0])?"#end"===t[0]||"#else"===t[0]?{text:r,params:null,token:"#end"===t[0]?n.TOK_END:n.TOK_ELSE,settings:null}:null:{text:r,params:t,token:n.TOK_VAR,settings:{escaped:e}};if(!this.isReservedKeyword(t[0]))return{text:r,params:t,token:n.TOK_VAR,settings:{escaped:e}};if(!e)return null;switch(t[0]){case"#if":case"#unless":return 2===o&&this.isValidContextPath(t[1])?{token:"#if"===t[0]?n.TOK_IF:n.TOK_UNLESS,params:[t[1]],text:r,settings:{negated:"#unless"===t[0]}}:null;case"#each":return 2===o&&this.isValidContextPath(t[1])?{token:n.TOK_EACH,params:[t[1]],text:r,settings:null}:4===o&&"in"===t[2]&&this.isValidContextPath(t[1])&&this.isValidVariableName(t[3])?{token:n.TOK_EACH,params:[t[1],t[3]],text:r,settings:null}:null;case"#with":return 2===o&&this.isValidContextPath(t[1])?{token:n.TOK_WITH,params:[t[1]],text:r,settings:null}:null;default:throw new Error("Invalid keyword: "+t[0])}},t.isReservedKeyword=function(t){return"#if"===t||"#each"===t||"#unless"===t||"#else"===t||"#end"===t||"#with"===t},t.isValidContextPath=function(t){if(!t)return!1;for(var e=t.split("/"),n=0,r=e.length;n<r;n++)if("."!==e[n]&&".."!==e[n]&&!this.isValidVariableName(e[n]))return!1;return!0},t.isValidVariableName=function(e){if(e){for(var n=e.split("."),r=0,o=n.length;r<o;r++){if(!(t.VALID_CHARS_LIST_FOR_VARIABLES.indexOf(n[r].charAt(0))>-1))return!1;for(var i=1,s=n[r].length;i<s;i++)if(-1===t.VALID_OTHER_CARS_FOR_VARIABLES.indexOf(n[r].charAt(i)))return!1}return!0}return!1},t.repeat=function(t,e){for(var n="",r=0;r<e;r++)n+=t;return n},t.createInstructionFromBlock=function(t){switch(t.token){case n.TOK_IF:return new l(t.params);case n.TOK_UNLESS:return new d(t.params);case n.TOK_END:return new u;case n.TOK_TEXT:return new p(t.text);case n.TOK_VAR:return new h(t.params,t.settings.escaped);case n.TOK_EACH:return new s(t.params);case n.TOK_WITH:return new f(t.params);case n.TOK_ELSE:return new a;default:throw new Error("Unknown block type: "+JSON.stringify(t))}},t.normalizePath=function(t){if(t){for(var e=t.split("/"),n=[],r=0,o=void 0,i=0,s=e.length;i<s;i++)if("."!==e[i]&&""!==e[i])if(".."===e[i])r>0?(r--,n.pop()):(r++,n.push(".."));else for(var a=0,u=(o=e[i].split(".")).length;a<u;a++){if(""===o[a])return null;n.push(o[a]),r++}for(i=r-1;i>-1;i--)"this"===n[i]&&i>1&&(n.splice(i,1),r--);return r?n.join("/"):null}return t},t.addGlobalHelper=function(t){if(!t)throw new Error("Invalid argument!");for(var e=0,n=this.GLOBAL_HELPERS.length;e<n;e++)if(this.GLOBAL_HELPERS[e].name===t.name)throw new Error('Helper "'+t.name+'" already added!');this.GLOBAL_HELPERS.push(t)},t.prototype.withHelper=function(t){if(!t)throw new Error("Invalid argument!");for(var e=0,n=this.helpers.length;e<n;e++)if(this.helpers[e].name===t.name)throw new Error('Helper "'+t.name+'" already added!');return this.helpers.push(t),this},t.GLOBAL_HELPERS=[{name:"upper",transformer:function(t){return String(t).toUpperCase()}},{name:"lower",transformer:function(t){return String(t).toLowerCase()}},{name:"base64",transformer:function(t){return"string"==typeof t?atob(t):atob(String(t))}}],t.VALID_CHARS_LIST_FOR_ARGUMENTS="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789./_$#",t.VALID_CHARS_LIST_FOR_VARIABLES="$abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_",t.VALID_OTHER_CARS_FOR_VARIABLES="$abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_0123456789",t}();e.Handlebars=c;var p=function(t){function e(e){var r=t.call(this,n.TOK_TEXT,null)||this;return r.text=e,r}return i(e,t),e.prototype.allowChildren=function(){return!1},e.prototype.parse=function(t){return this.text},e.prototype.append=function(t){throw new Error("Method not allowed.")},e}(r),d=function(t){function e(e){var r=t.call(this,n.TOK_UNLESS,[])||this;if(r.elseAppended=!1,r.trueBranchChildren=[],r.falseBranchChildren=[],r.params[0]=c.normalizePath(e[0]),null===r.params[0])throw new Error("Illegal UNLESS variable: "+e[0]);return r}return i(e,t),e.prototype.append=function(t){if(t.getBlockType()===n.TOK_ELSE){if(this.elseAppended)throw new Error("Else appended!");this.elseAppended=!0}return this.elseAppended?this.falseBranchChildren.push(t):this.trueBranchChildren.push(t),t.withParent(this)},e.prototype.allowChildren=function(){return!0},e.prototype.parse=function(t){var e="";if(t.isNotEmpty(this.getParam(0)))for(n=0,r=this.falseBranchChildren.length;n<r;n++)e=e.concat(this.falseBranchChildren[n].parse(t));else for(var n=0,r=this.trueBranchChildren.length;n<r;n++)e=e.concat(this.trueBranchChildren[n].parse(t));return e},e}(r),h=function(t){function e(e,r){var o=t.call(this,n.TOK_VAR,[])||this;if(o.params.push(c.normalizePath(e[0])),null===o.params[0])throw new Error("Illegal variable: "+e[0]);for(var i=1,s=e.length;i<s;i++)o.params.push(e[i]);return o.isEscaped=r,o}return i(e,t),e.prototype.allowChildren=function(){return!1},e.prototype.parse=function(t){for(var e=String(t.get(this.getParam(0))),n=1,r=this.params.length;n<r;n++)e=t.getHelper(this.params[n]).transformer(e);return this.isEscaped?e.replace(/"/g,"&quot;").replace(/>/g,"&gt;").replace(/</g,"&lt;"):e},e.prototype.append=function(t){throw new Error("A VAR block does not allow insertion")},e}(r),f=function(t){function e(e){var r=t.call(this,n.TOK_WITH,[])||this;if(r.children=[],r.params.push(c.normalizePath(e[0])),null===r.params[0])throw new Error("Illegal WITH argument");return r}return i(e,t),e.prototype.allowChildren=function(){return!0},e.prototype.parse=function(t){for(var e=t.cd(this.getParam(0)),n="",r=0,o=this.children.length;r<o;r++)n=n.concat(this.children[r].parse(e));return n},e.prototype.append=function(t){return this.children.push(t.withParent(this)),t},e}(r)}.apply(e,[n,e]))||(t.exports=r)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(0),n(56),n(4),n(9),n(125),n(76),n(12),n(314),n(315),n(317),n(6),n(20),n(16),n(318),n(17),n(319),n(1),n(18),n(2),n(204),n(10),n(175),n(205),n(26),n(333)],void 0===(o=function(t,e,n,r,o,i,a,u,l,c,p,d,h,f,g,m,y,v,b,C,E,A,I,T,S,w,_){var N;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.ANONYMOUS_CREATORS="anonymous",t.AUTHENTICATED_CREATORS="auth",t.FORBID_LATER_MODIFICATIONS="forbid"}(N=e.SubmissionEditingPolicy||(e.SubmissionEditingPolicy={})),function(t){t.SHOW_THANK_YOU_PAGE="show-thank-you-page",t.REDIRECT_TO_URL="redirect-to-url"}(e.EDocumentSubmitActionType||(e.EDocumentSubmitActionType={}));var D=function(t){function e(n,o,i,s){var u=t.call(this,null,n||e.getDefaultProperties(),o)||this;return u.indexes=Object.create(null),u.activePage=null,u.defaultPaymentGatewayTypeId=null,u.focusedElement=null,u.language=null,u.addClass("form"),u.factory=new a.Factory(u),u.factory.addDeltaNodeProperties(u,e,"theme"),u.themeValues=new A.DefaultTheme(u),u.themeValues.load(u.properties.theme),u.properties.theme=u.themeValues.getAllProperties(),u.documentTranslations=new v.DocumentTranslations(u),u.documentTranslations.on(v.DocumentTranslations.EVENT_CHANGE,(function(){u.updateTranslationsToolbar()})),i||b.I18n.getEventEmitter().on(b.I18n.EVENT_CHANGE_TRANSLATION_PACK,(function(){u.documentTranslations.onTranslationChanged()})),u.header=new r.ContainerBody("header"),u.footer=new r.ContainerBody("footer"),u.header.on(r.ContainerBody.EVENT_EMPTY_STATE_CHANGED,(function(t){t?u.removeClass("has-header"):u.addClass("has-header")})),u.footer.on(r.ContainerBody.EVENT_EMPTY_STATE_CHANGED,(function(t){console.log("footer empty state changed to ",t),t?u.removeClass("has-footer"):u.addClass("has-footer")})),u.bodies.push(u.header),u.bodies.push(u.footer),u.blankSpaceBeforeFormDOMNode=w.DOM.document.createElement("div"),u.blankSpaceBeforeFormDOMNode.id="blank-space",u.brandingDOMNode=w.DOM.document.createElement("div"),u.brandingDOMNode.id="branding",u.root.insertBefore(u.blankSpaceBeforeFormDOMNode,u.root.firstChild),u.grid=new d.DocumentGrid(u),u.selection=new c.DocumentSelection,u.theme=new p.DocumentTheme(u),u.themeValues.on(A.DefaultTheme.EVENT_CHANGE,(function(){u.theme.markAsModified()})),u.root.insertBefore(u.grid.getRoot(),u.root.firstChild),u.root.insertBefore(u.theme.getRoot(),u.root.firstChild),u.root.appendChild(u.brandingDOMNode),u.runIndexer=l.Debouncer.create((function(){u.runIndexerInSyncMode()}),4),u.runDuplicateFieldNameCheck=l.Debouncer.create((function(){u.runDuplicateFieldNameCheckInSyncMode()}),100),u.editMode=i,u.invoice=s.setDocument(u),u.loadNativeDocumentVersion(),u.editMode||(u.root.addEventListener("submit",(function(t){t.preventDefault(),t.stopPropagation()}),!0),u.sizeChangeObserver=new m.SizeChangeObserver(u),u.root.addEventListener("focus",(function(t){u.onFocusEventOccurred(t,!0)}),!0),u.root.addEventListener("blur",(function(t){u.onFocusEventOccurred(t,!1)}),!0)),u}return s(e,t),e.prototype.getThemeValues=function(){return this.themeValues},e.prototype.getNodeName=function(){return"Form"},e.prototype.createElement=function(t,e,n){return this.factory.create(t,this,e,n)},e.prototype.getTypeId=function(){return o.NodeTypes.DOCUMENT},e.prototype.getRootNodeType=function(){return"form"},e.prototype.onSizeChanged=function(){this.root.style.width=this.getProperty("size.width")},e.prototype.getPages=function(){for(var t=[],e=0,n=this.bodies[0].getChildren(),r=n.length;e<r;e++)t.push(n[e]);return t},e.prototype.getChildNodes=function(){return this.getChildren()},e.prototype.onPagesInsertedOrRemoved=function(){var t=this,n=this.bodies[0].getChildren(),r=n.length;r>1?(n[0]&&n[0].addClass("first").removeClass("last"),n[r-1]&&n[r-1].addClass("last").removeClass("first")):1===r&&n[0].addClass("first").addClass("last");for(var o=1,i=r-1;o<i;o++)n[o].removeClass("first").removeClass("last");setTimeout((function(){t.trigger(e.EVENT_PAGE_INSERTED_OR_REMOVED)}),50)},e.prototype.getActivePage=function(){return this.activePage},e.prototype.setActivePage=function(t){var n=t!==this.activePage;if(!n&&this.isEditMode())return this;if(this.activePage&&this.activePage.removeClass("active"),this.activePage=t,this.activePage&&(this.activePage.addClass("active"),n&&(this.header.bindTo(this.activePage.getHeaderDOMNode()),this.footer.bindTo(this.activePage.getFooterDOMNode()))),this.trigger(e.EVENT_ACTIVE_PAGE_CHANGED,t),!this.isEditMode()&&this.activePage)try{this.blankSpaceBeforeFormDOMNode.scrollIntoView({behavior:"auto",block:"center"})}catch(t){this.blankSpaceBeforeFormDOMNode.scrollIntoView()}return this},e.prototype.getParent=function(){return null},e.prototype.getDocument=function(){return this},e.getDefaultProperties=function(e){var n=t.addSizeProperties.call(this,{document:{name:b.I18n.translateApplicationText("My Form","control-defaults.form"),isTemplate:!1,type:"form",sharing:null,lang:b.I18n.getEditorTranslationPackLanguageCode()},seo:{title:"",keywords:"",description:"",googleAnalyticsCode:"",googleTagManagerCode:"",facebookPixelCode:""},publish:{dnsHostname:""},text:{direction:"ltr",adaptiveTextDirection:!0},notifications:{recipientEmail:""},submission:{editing:{editingPolicy:N.FORBID_LATER_MODIFICATIONS,editingExpirationTime:"1W"},defaultSubmitAction:'{"action":"show-thank-you-page"}',limitSubmissionsToMaxCount:0,acceptSubmissionsBasedOnSchedule:"111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111 0"},payments:{discardUnpaidSubmissions:!1,sendNotifications:!0,recipientEmail:""},security:{enableCaptcha:T.DefaultDocumentSettings.getDefaultSettings().recaptchaEnabled,oneSubmissionPerIp:!1,allowedCountries:"",forbiddenCountries:"",authenticationRequired:!1,passwordProtection:null,allowPDFSubmit:!1,fileAccessType:"anonymous",fileAccessPassword:""},autoButtons:{enabled:!0,showSave:!1,showReset:!1,showPrint:!1,previousCaption:b.I18n.translateApplicationText("Previous","control-defaults.form"),nextCaption:b.I18n.translateApplicationText("Next","control-defaults.form"),resetCaption:b.I18n.translateApplicationText("Clear and start from scratch","control-defaults.form"),saveCaption:b.I18n.translateApplicationText("Save","control-defaults.form"),submitCaption:b.I18n.translateApplicationText("Submit","control-defaults.form"),printCaption:b.I18n.translateApplicationText("Print","control-defaults.form"),align:i.TextAlign.LEFT},nameCounters:{}});return n.size.width="800px",n.rules="[]",n.theme={},n},e.prototype.getNameAutoIncrement=function(t,e){void 0===e&&(e=0);var n="Q"===t?"":" ";t=String(t||""),void 0===this.properties.nameCounters[t]&&(this.properties.nameCounters[t]=0);for(var r,o=[],i=0,s=this.flatten(),a=s.length;i<a;i++)s[i].hasProperty("name")&&o.push(s[i].getProperty("name"));do{this.properties.nameCounters[t]++,this.properties.nameCounters[t]<e||(r=t+n+this.properties.nameCounters[t])}while(o.indexOf(r)>-1);return r},e.prototype.runIndexerInSyncMode=function(){for(var t in this.indexes)delete this.indexes[t];for(var e=this.flatten(),n=0,r=e.length;n<r;n++)this.indexes[e[n].getId()]=e[n]},e.prototype.getElementById=function(t){return this.indexes[t]||null},e.prototype.getGrid=function(){return this.grid},e.prototype.appendChild=function(n,r){void 0===r&&(r=e.BODY_DEFAULT_INDEX);var i=t.prototype.appendChild.call(this,n,r);return n.getTypeId()===o.NodeTypes.PAGE&&this.onPagesInsertedOrRemoved(),i},e.prototype.removeChild=function(e){var n=t.prototype.removeChild.call(this,e);return e.getTypeId()===o.NodeTypes.PAGE&&this.onPagesInsertedOrRemoved(),n},e.prototype.insertBefore=function(e,n){var r=t.prototype.insertBefore.call(this,e,n);return e.getTypeId()===o.NodeTypes.PAGE&&this.onPagesInsertedOrRemoved(),r},e.prototype.insertAfter=function(e,n){var r=t.prototype.insertAfter.call(this,e,n);return e.getTypeId()===o.NodeTypes.PAGE&&this.onPagesInsertedOrRemoved(),r},e.prototype.getSelection=function(){return this.selection},e.prototype.getTheme=function(){return this.theme},e.prototype.isEditMode=function(){return this.editMode},e.prototype.normalizeInSyncMode=function(){var t,e=[".node.row > .body > .node.spacer:first-child:last-child",".node.row > .body:empty",".node.row-container > .body:empty",'.node.spacer[data-w="0"]'];do{t=!0;for(var r=null,o=0,i=e.length;o<i;o++)if(r=n(this.root).find(e[o]).first().get(0)||null){t=!1;break}if(r){var s=n(r).closest(".node").attr("id");if(s){var a=this.getElementById(s);a&&a.getParent().removeChild(a)}}}while(!t)},e.prototype.getPage=function(){return null},e.prototype.updateAutoButtons=function(t){void 0===t&&(t=!0);for(var e=this.getPages().filter((function(t){return t.getProperty("type")===u.EPageType.FORM_PAGE&&t.isVisible()})),n=0,r=e.length;n<r;n++)e[n].updateAutoButtons(n>=r-1,0===n,n,t),n===r-1?e[n].getRoot().classList.add("last-of-type"):e[n].getRoot().classList.remove("last-of-type");1===e.length?e[0].addClass("no-close"):e[0]&&e[0].removeClass("no-close")},e.prototype.runDuplicateFieldNameCheckInSyncMode=function(){var t={};for(var e in this.flatten().forEach((function(e){if(e.hasProperty("name")){var n=e.getProperty("name");void 0===t[n]?t[n]=[e.getId()]:t[n].push(e.getId())}})),t){var n=t[e].length;if(e)if(e.match(/[.\[\]`"}{]/))for(o=0;o<n;o++)this.getElementById(t[e][o]).setError('Field name cannot contain characters: " . [ ] ` { }');else if(n>1)for(o=0;o<n;o++)this.getElementById(t[e][o]).setError('Duplicate field name "'+e+'"');else for(o=0;o<n;o++){var r=this.getElementById(t[e][o]);r.setError(r.checkIfFieldHasInvalidSubfieldNames()?"Field choice can't contain characters . ] [ ` \" } {":null)}else for(var o=0;o<n;o++)this.getElementById(t[e][o]).setError("Field name cannot be empty")}},e.prototype.getFluxVariables=function(t){void 0===t&&(t=!1);for(var e=[],n=0,r=this.flatten(),o=r.length;n<o;n++)if((t||r[n].hasValue())&&r[n].hasProperty("name")){var i=r[n].getProperty("name");if(i){var s=r[n].getIcon(),a=r[n].hasProperty("label.text")?r[n].getProperty("label.text"):null;i&&s&&e.push({typeId:r[n].getTypeId(),icon:s,name:i,placeholderRegularExpression:h.Strings.createRegexp(i),subFields:r[n].enumerateSubFields(),label:a,hasValue:r[n].hasValue()})}}return e},e.prototype.getElementsByNameAndRepeatedDataIndex=function(t,e){void 0===e&&(e=null);for(var n=[],r=0,o=this.flatten(),i=o.length;r<i;r++)o[r].hasProperty("name")&&o[r].getProperty("name")===t&&e===o[r].getRepeatedIndex()&&n.push(o[r]);return n},e.prototype.getElementByName=function(t,e){if(void 0===e&&(e=!0),e){if(void 0===this.elementNamesToInputsCache){this.elementNamesToInputsCache={};for(var n=0,r=(a=this.flatten()).length;n<r;n++){if(a[n].hasProperty("name"))if(u=a[n].getProperty("name")){this.elementNamesToInputsCache[u]=a[n];var o=a[n].enumerateSubFields();if(o)for(var i=0,s=o.length;i<s;i++)this.elementNamesToInputsCache[u+"."+o[i]]=a[n]}}}return this.elementNamesToInputsCache[t]||null}var a;for(n=0,r=(a=this.flatten()).length;n<r;n++){var u;if(a[n].hasProperty("name"))if((u=a[n].getProperty("name"))&&u===t)return a[n]}return null},e.prototype.getPageByType=function(t){for(var e=0,n=this.getPages(),r=n.length;e<r;e++)if(n[e].getProperty("type")===t)return n[e];return null},e.prototype.getFieldErrorsTextWhichAreCurrentlyHiddenAndResetHiddenFieldsErrorsAfter10Milliseconds=function(t,e){void 0===e&&(e=!1);for(var n=[],r=[],o=this.flatten(),i=function(e,i){var s=o[e].getError();if(s){var a=b.I18n.translateViewFormText.apply(b.I18n,[s.message,"form-field-errors",0].concat(s.args||[]));t.indexOf(o[e].getId())>-1&&(n.push(a),setTimeout((function(){var t;(t=o[e]).getError()&&t.setError(null)}),10)),r.push(a)}},s=0,a=o.length;s<a;s++)i(s);return n&&n.length&&(n=r),e?n&&n.length?"<ul><li>"+n.map((function(t){return h.Strings.toHTML(t)})).join("</li>\n<li>")+"</li></ul>":null:n.length?"* "+n.join("\n* "):null},e.prototype.getInvoice=function(){return this.invoice},e.prototype.setDefaultPaymentGatewayTypeId=function(t){return t!==this.defaultPaymentGatewayTypeId&&(this.defaultPaymentGatewayTypeId=t||null,this.trigger(e.EVENT_DEFAULT_PAYMENT_GATEWAY_CHANGED,this.defaultPaymentGatewayTypeId)),this},e.prototype.getDefaultPaymentGatewayTypeId=function(){return this.defaultPaymentGatewayTypeId},e.prototype.getBlankSpaceDOMNode=function(){return this.blankSpaceBeforeFormDOMNode},e.prototype.getBrandingDOMNode=function(){return this.brandingDOMNode},e.prototype.getSpaceBeforePage=function(){return~~I.cast(this.properties.theme.page.spaceBefore)},e.prototype.setSpaceBeforePage=function(t){return(t=~~t)<0&&(t=0),this.setProperty("theme.page.spaceBefore",t,this)},e.prototype.clearNativeDocumentVersion=function(){return this.nativeDocVersion="0.2",this},e.prototype.getNativeDocumentVersion=function(){return this.nativeDocVersion},e.prototype.setNativeDocumentVersion=function(t){return this.nativeDocVersion=t,this},e.prototype.getActualDocumentVersion=function(){return"0.2"},e.prototype.loadNativeDocumentVersion=function(){var t=document.getElementById("doc-version");t?(this.nativeDocVersion=t.textContent,t.parentNode&&t.parentNode.removeChild(t)):this.nativeDocVersion="0.2"},e.prototype.getElementsByName=function(t,e){void 0===e&&(e=null);for(var n=[],r=0,o=this.flatten(),i=o.length;r<i;r++)o[r].hasProperty("name")&&o[r].getProperty("name")===t&&e===o[r].getRepeatedIndex()&&n.push(o[r]);return n},e.prototype.handleInternalApplicationURLCommand=function(t){var n=g.URLParser.parseInternalApplicationURL(t);if(null===n)return this.trigger(e.EVENT_NAVIGATION,null),void console.warn("HANDLE MENU COMMAND: NULL COMMAND. IGNORE IT",n);switch(n.action){case g.MenuItemActionType.OPEN_URL:f.BrowserUtils.openTabOrPopup(n.url,n.target);break;case g.MenuItemActionType.SWITCH_PAGE:var r=n.page;try{var o=this.getPageByName(r);if(!o)throw new Error("Page "+r+" not found");this.setActivePage(o),console.warn("HANDLE MENU COMMAND: SET ACTIVE PAGE: "+n.page)}catch(t){console.warn("HANDLE MENU COMMAND: FAILED TO SWITCH TO PAGE: "+n.page),console.error(t)}}this.trigger(e.EVENT_NAVIGATION,t)},e.prototype.getPageByName=function(t){for(var e=0,n=this.getPages(),r=n.length;e<r;e++)if(n[e].getProperty("name")===t)return n[e];return null},e.prototype.onMobileModeChanged=function(){this.grid.isMobileMode()?document.body.id="mobile":document.body.id="not-mobile",this.sizeChangeObserver&&this.sizeChangeObserver.notifyInSyncMode()},e.prototype.getSizeChangeObserver=function(){return this.sizeChangeObserver||null},e.prototype.appendField=function(t,e,n){n&&n.name&&(n.name=n.name+"_"+y.UniqueId.next());var r=this.createElement(t,n),i=this.createElement(o.NodeTypes.ROW);i.appendChild(r),r.onInsertedIntoFormByUser(),e.appendChild(i),i.render(),this.getTheme().markAsModified()},e.prototype.isFieldCompatibleWithPageType=function(t,e){return e!==u.EPageType.THANK_YOU_PAGE&&e!==u.EPageType.PAYMENTS_ERROR_PAGE||[o.NodeTypes.BUTTON,o.NodeTypes.CODE,o.NodeTypes.MAP,o.NodeTypes.PICTURE,o.NodeTypes.RICH_TEXT,o.NodeTypes.SOCIAL_MEDIA,o.NodeTypes.SPACER,o.NodeTypes.VIDEO,o.NodeTypes.QUIZ].indexOf(t)>-1},e.prototype.isFieldCompatibleWithHeaderOrFooter=function(t){return[o.NodeTypes.BUTTON,o.NodeTypes.CODE,o.NodeTypes.MAP,o.NodeTypes.PICTURE,o.NodeTypes.RICH_TEXT,o.NodeTypes.SOCIAL_MEDIA,o.NodeTypes.SPACER,o.NodeTypes.VIDEO,o.NodeTypes.QUIZ,o.NodeTypes.FORM_PROGRESS_INDICATOR].indexOf(t)>-1},e.prototype.movePage=function(t,e,n){if(this.isEditMode()&&t!==e){var r=this.getPages(),o=[];if(!(t>=r.length||e>=r.length)){for(var i=0,s=r.length;i<s;i++)i!==t&&(i===e?"after"===n?(o.push(r[i]),o.push(r[t])):(o.push(r[t]),o.push(r[i])):o.push(r[i]));this.bodies[0].setChildrenInMemoryWithoutAffectingDOM(o);for(i=0,s=o.length;i<s;i++)this.bodies[0].getRoot().appendChild(o[i].getRoot());this.onPagesInsertedOrRemoved(),this.updateAutoButtons(!0)}}},e.prototype.deletePage=function(t){if(this.isEditMode()){var e=this.getPages(),n=e.indexOf(t),r=e[n-1]||e[n+1]||null;-1!==n&&(t.remove(),this.onPagesInsertedOrRemoved(),this.updateAutoButtons(!0),this.setActivePage(r),this.runDuplicateFieldNameCheck())}},e.prototype.getDocumentTranslations=function(){return this.documentTranslations},e.prototype.getTranslations=function(){var t=[];return this.properties.autoButtons.enabled&&(t.push({original:this.properties.autoButtons.nextCaption,context:"form-button"}),t.push({original:this.properties.autoButtons.previousCaption,context:"form-button"}),t.push({original:this.properties.autoButtons.submitCaption,context:"form-button"}),this.properties.autoButtons.showSave&&t.push({original:this.properties.autoButtons.saveCaption,context:"form-button"}),this.properties.autoButtons.showPrint&&t.push({original:this.properties.autoButtons.printCaption,context:"form-button"}),this.properties.autoButtons.showReset&&t.push({original:this.properties.autoButtons.resetCaption,context:"form-button"})),this.getPages().forEach((function(e){t.push({context:"form-page",original:e.getProperty("name")})})),t.push({context:"form-page",original:b.I18n.translateApplicationText("Thank you","control-defaults.page")}),t.push({context:"form-page",original:b.I18n.translateApplicationText("Error processing payment","control-defaults.page")}),_.FormFieldsHardcodedErrors.MESSAGES.forEach((function(e){t.push({context:"form-fields-errors",original:e})})),t},e.prototype.updateTranslationsToolbar=function(){var t=this,e=this.documentTranslations.enumerateTranslations().filter((function(t){return void 0===t.enabled||!!t.enabled})).sort((function(t,e){return~~e.default-~~t.default}));if(e.length){for(this.translationsContainerDOMNode||(this.translationsContainerDOMNode=w.DOM.document.createElement("div"),this.translationsContainerDOMNode.id="form-translations"),this.translationsContainerDOMNode.parentNode||this.root.insertBefore(this.translationsContainerDOMNode,this.blankSpaceBeforeFormDOMNode.nextSibling),this.translationsDropdown||(this.translationsDropdown=w.DOM.document.createElement("select")),this.translationsDropdown.parentNode||this.translationsContainerDOMNode.appendChild(this.translationsDropdown);this.translationsDropdown.options.length;)this.translationsDropdown.remove(0);for(var n=0,r=e.length;n<r;n++){var o=w.DOM.document.createElement("option");o.value=e[n].code,o.text=e[n].language,this.translationsDropdown.add(o)}if(this.translationsContainerDOMNode.style.display=1===e.length?"none":"",!this.editMode){this.translationsDropdown.onchange=function(){t.setLanguage(t.translationsDropdown.value)};var i=C.PersistentStorage.getItem("form_language")||null;null!==i&&this.documentTranslations.hasTranslation(i,!0)?this.setLanguage(i):this.setLanguage(this.translationsDropdown.value)}}else this.translationsContainerDOMNode&&this.translationsContainerDOMNode.parentNode&&this.root.removeChild(this.translationsContainerDOMNode),this.translationsDropdown=void 0,this.translationsContainerDOMNode=void 0},e.prototype.setLanguage=function(t){if(t!==this.language){if(null!==t&&!this.documentTranslations.hasTranslation(t))throw new Error("Form does not have language "+JSON.stringify(t)+" installed");this.language=t,null!==t&&this.translationsDropdown&&(this.translationsDropdown.value=this.language),C.PersistentStorage.setItem("form_language",String(this.language||""),C.DataPersistenceType.CRITICAL),null===t?b.I18n.setTranslationContext(b.I18n.TRANSLATION_PACK_VIEW_FORM,null):b.I18n.setTranslationContext(b.I18n.TRANSLATION_PACK_VIEW_FORM,this.documentTranslations.getTranslationFileForLanguageCode(t))}},e.prototype.getLanguage=function(){return this.language},e.prototype.performTranslation=function(){},e.prototype.promptUserToInputADocumentName=function(){var t=this;E.Dialog.prompt({defaultValue:b.I18n.translateApplicationText(this.getProperty("document.name"),"form-names-translations"),icon:"save",placeholder:b.I18n.translateApplicationText("Type a name for your form","editor-windows"),width:"500px",question:b.I18n.translateApplicationText("Please provide a name for this form:","editor-windows"),title:b.I18n.translateApplicationText("Provide a name for your form","editor-windows"),validator:function(t){return""===h.Strings.trim(String(t||""))?b.I18n.translateApplicationText("Form name cannot be empty","editor-windows"):""}}).then((function(e){try{t.setProperty("document.name",e,t)}catch(t){}}))},e.prototype.clearFormatting=function(t){return void 0===t&&(t=!0),this.bodies.forEach((function(t){t.getChildren().forEach((function(t){t.clearFormatting(!1)}))})),t&&(this.render(),this.trigger("property.changed",this,"void","1","0",this),this.theme.markAsModified()),this},e.prototype.hasOwnThemeProperties=function(){return!1},e.prototype.supportsLabelInsideRendering=function(){return!1},e.prototype.setFocusedElement=function(t){return t!==this.focusedElement&&(this.focusedElement&&this.focusedElement.setFocused(!1),this.focusedElement=t,this.focusedElement&&this.focusedElement.setFocused(!0)),this},e.prototype.getFocusedElement=function(){return this.focusedElement||null},e.prototype.onFocusEventOccurred=function(t,e){var r=this,o=t.target||t.srcElement;if(o){var i=null;!function(t){n(o).closest(".node[data-node-type-id]").each((function(){var e=this.getAttribute("id");e&&(i=t.getElementById(e))}))}(this),i&&(e?this.setFocusedElement(i):setTimeout((function(){r.getFocusedElement()!==i&&i.setFocused(!1)}),10))}},e.prototype.getPDF=function(){var t=this;return n.Deferred((function(e){n(t.root).addClass("pdf"),t.waitForMediaLoad().then((function(){var r=(new S.PDFDocument).setTitle(t.getProperty("document.name")).setFormId(t.getId()),o=t.getPages().filter((function(t){return t.getPageType()===u.EPageType.FORM_PAGE&&t.isVisible()})),i=t.getActivePage();o.forEach((function(e){t.setActivePage(e);var n=e.createPDFPage(r);r.appendChild(n)})),n(t.root).removeClass("pdf"),t.setActivePage(i),e.resolve(r)}))}))},e.prototype.waitForMediaLoad=function(){var t=this;return n.Deferred((function(e){var r=Array.prototype.slice.call(t.root.querySelectorAll("img"),0);n.when.apply(n,r.map((function(t){return n.Deferred((function(e){t.addEventListener("error",(function(){return e.resolve()})),t.addEventListener("load",(function(){return e.resolve()})),(t.width||t.height)&&e.resolve()}))}))).then((function(){e.resolve()})),setTimeout((function(){e.resolve()}),5e3)}))},e.BODY_DEFAULT_INDEX=0,e.BODY_HEADER_INDEX=1,e.BODY_FOOTER_INDEX=2,e.EVENT_SUBMIT="submit",e.EVENT_RESET="reset",e.EVENT_NEXT_PAGE="next-page",e.EVENT_PREVIOUS_PAGE="previous-page",e.EVENT_PRINT="print",e.EVENT_SAVE="save",e.EVENT_FOLLOW_LINK="follow-link",e.EVENT_PAGE_INSERTED_OR_REMOVED="page-change",e.EVENT_ACTIVE_PAGE_CHANGED="set-active-page",e.EVENT_NAVIGATION="navigation",e.EVENT_SHOW_PAGE_BY_ID="show-page",e.EVENT_REQUEST_SAVE="request-save",e.EVENT_EDITOR_REQUEST_IMAGE_SOURCE="request-image-source",e.EVENT_EDITOR_REQUEST_VIDEO_SOURCE="request-video-source",e.EVENT_EDITOR_CODE_SOURCE="request-code-source",e.EVENT_PAYMENT_SETTINGS_CHANGED="payment-settings-changed",e.EVENT_DEFAULT_PAYMENT_GATEWAY_CHANGED="payment-default-gateway-changed",e.EVENT_READY="ready",e.EVENT_SUBMIT_DISPATCH="submitted",e.EVENT_THEME_APPLIED="theme-applied",e.EVENT_REPEATABLE_CONTAINER_ADDED="repeatable-group-add",e.EVENT_REPEATABLE_CONTAINER_REMOVED="repeatable-group-remove",e}(r.Container);e.Document=D}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r;void 0===(r=function(t,e){var n;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.OPEN_URL=0]="OPEN_URL",t[t.SWITCH_PAGE=1]="SWITCH_PAGE"}(n=e.MenuItemActionType||(e.MenuItemActionType={}));var r=function(){function t(){}return t.parseURL=function(t){return this.parser=this.parser||document.createElement("a"),this.parser.href=t,{protocol:this.parser.protocol,hostname:this.parser.hostname,port:this.parser.port,pathname:this.parser.pathname,search:this.parseQueryString(this.parser.search),hash:this.parser.hash}},t.createURL=function(t){var e=[];if(e.push(t.protocol?t.protocol+"//":"//"),e.push(t.hostname),t.port&&e.push(":"+t.port),e.push(t.pathname||""),t.search){var n=[];for(var r in t.search)r&&t.search.propertyIsEnumerable(r)&&(t.search[r]?n.push(encodeURIComponent(r)+"="+encodeURIComponent(t.search[r])):n.push(encodeURIComponent(r)));n.length&&e.push("?"+n.join("&"))}return e.push(t.hash||""),e.join("")},t.parseQueryString=function(t){if(!t||"?"===t)return{};for(var e,n,r,o=(t=t.replace(/^\?/g,"")).split("&"),i={},s=0,a=o.length;s<a;s++)o[s]&&(-1===(r=o[s].indexOf("="))?(e=o[s],n=""):(e=o[s].substr(0,r),n=o[s].substr(r+1)),e&&(i[decodeURIComponent(e)]=decodeURIComponent(n).replace(/\+/g," ")));return i},t.getURLDomainIfURLIsEmbeddableInIFrame=function(t){if(!t)return null;var e=this.parseURL(t);return"https:"!==e.protocol&&"http:"!==e.protocol&&""!==e.protocol?null:e.hostname?"80"===e.port||"443"===e.port||"8080"===e.port||""===e.port?e.hostname:void 0:null},t.parseInternalApplicationURL=function(t){var e=/^(http|https):(\/\/[\S]+)([\s]+([\S]+))?$/.exec(String(t||"")||"")||/^(page):(\/\/[\S\s]+)$/.exec(String(t||"")||"");switch(!0){case!e:return null;case"http"===e[1]:case"https"===e[1]:return{action:n.OPEN_URL,url:e[1]+":"+e[2],target:e[4]||"_self"};case"page"===e[1]:var r=e[2].replace(/^\/\//g,"");return{action:n.SWITCH_PAGE,page:r}}},t}();e.URLParser=r;var o=function(){function t(){}return t.getVideoIdFromUrl=function(t){if(!t)return null;var e=r.parseURL(t);return"http:"!==e.protocol&&"https:"!==e.protocol||"youtube.com"!==e.hostname&&"www.youtube.com"!==e.hostname||"80"!==e.port&&"443"!==e.port&&""!==e.port?null:e.search&&e.search.v?e.search.v:null},t}();e.YouTubeURLParser=o}.apply(e,[n,e]))||(t.exports=r)},function(t,e,n){"use strict";var r;void 0===(r=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.next=function(){return"id_"+(+new Date).toString(32)+"_"+(~~(65535*Math.random())).toString(32)},t}();e.UniqueId=n}.apply(e,[n,e]))||(t.exports=r)},function(t,e,n){"use strict";var r,o;r=[n,e,n(66)],void 0===(o=function(t,e,n){var r,o;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.NON_CRITICAL=0]="NON_CRITICAL",t[t.CRITICAL=1]="CRITICAL"}(r=e.DataPersistenceType||(e.DataPersistenceType={})),function(t){t.AUTO="AUTO",t.LOCAL_STORAGE="LOCAL_STORAGE",t.SESSION_STORAGE="SESSION_STORAGE",t.COOKIE_STORAGE="COOKIE_STORAGE"}(o=e.PersistentDataStorageType||(e.PersistentDataStorageType={}));var i=function(){function t(){this.assertDriverIsSupported()}return t.prototype.getItem=function(t){return window.localStorage.getItem(t)},t.prototype.setItem=function(t,e,n){if(!this.isSupported())throw alert("This feature requires your browser 'localStorage' capability, which is not supported. This typically happens on older browsers, or in Private browsing mode. Please correct the situation then try again"),new Error("This feature requires your browser 'localStorage' capability, which is not supported. This typically happens on older browsers, or in Private browsing mode. Please correct the situation then try again");return window.localStorage.setItem(t,e),!0},t.prototype.hasItem=function(t){return window.localStorage.hasItem(t)},t.prototype.removeItem=function(t){return window.localStorage.removeItem(t),!0},t.prototype.clear=function(){window.localStorage.clear()},t.prototype.isSupported=function(){return this.supported},t.prototype.assertDriverIsSupported=function(){try{window.localStorage.setItem("test_local_storage","asd");var t=window.localStorage.getItem("test_local_storage");window.localStorage.removeItem("test_local_storage"),this.supported="asd"===t}catch(t){this.supported=!1}},t.prototype.getDriverType=function(){return o.LOCAL_STORAGE},t}(),s=function(){function t(){this.assertDriverIsSupported()}return t.prototype.getItem=function(t){return window.sessionStorage.getItem(t)},t.prototype.setItem=function(t,e,n){if(!this.isSupported())throw alert("This feature requires your browser 'sessionStorage' capability, which is not supported. This typically happens on older browsers, or in Private browsing mode. Please correct the situation then try again"),new Error("This feature requires your browser 'sessionStorage' capability, which is not supported. This typically happens on older browsers, or in Private browsing mode. Please correct the situation then try again");return window.sessionStorage.setItem(t,e),!0},t.prototype.hasItem=function(t){return window.sessionStorage.hasItem(t)},t.prototype.removeItem=function(t){return window.sessionStorage.removeItem(t),!0},t.prototype.clear=function(){window.sessionStorage.clear()},t.prototype.isSupported=function(){return this.supported},t.prototype.assertDriverIsSupported=function(){try{window.sessionStorage.setItem("test_local_storage","asd");var t=window.sessionStorage.getItem("test_local_storage");window.sessionStorage.removeItem("test_local_storage"),this.supported="asd"===t}catch(t){this.supported=!1}},t.prototype.getDriverType=function(){return o.SESSION_STORAGE},t}(),a=function(){function t(){}return t.prototype.isSupported=function(){return!0},t.prototype.escapeCookieValue=function(e){if(!e)return"";for(var n="",r=0,o=e.length;r<o;r++)switch(e.charAt(r)){case"=":n+=t.ESCAPE_CHAR+t.CHR_EQUAL;break;case'"':n+=t.ESCAPE_CHAR+t.CHR_QUOTE;break;case";":n+=t.ESCAPE_CHAR+t.CHR_SEMICOLON;break;case t.ESCAPE_CHAR:n+=t.ESCAPE_CHAR+t.ESCAPE_CHAR;break;case"\n":n+=t.ESCAPE_CHAR+t.CHR_NEW_LINE;break;case"\r":n+=t.ESCAPE_CHAR+t.CHR_LINE_FEED;break;case"\t":n+=t.ESCAPE_CHAR+t.CHR_TAB;break;case" ":n+=t.ESCAPE_CHAR+t.CHR_SPACE;break;default:n+=e.charAt(r)}return n},t.prototype.unescapeCookieValue=function(e){if(!e)return"";for(var n="",r=0,o=e.length;r<o;r++)switch(e.charAt(r)){case t.ESCAPE_CHAR:var i=e.charAt(r+1);if(i)switch(i){case String(t.CHR_EQUAL):n+="=",r++;break;case String(t.CHR_QUOTE):n+='"',r++;break;case String(t.CHR_SEMICOLON):n+=";",r++;break;case t.ESCAPE_CHAR:n+=t.ESCAPE_CHAR,r++;break;case String(t.CHR_NEW_LINE):n+="\n",r++;break;case String(t.CHR_LINE_FEED):n+="\r",r++;break;case String(t.CHR_TAB):n+="\t",r++;break;case String(t.CHR_SPACE):n+=" ",r++;break;default:n+=t.ESCAPE_CHAR}else n+=t.ESCAPE_CHAR;break;default:n+=e.charAt(r)}return n},t.prototype.getParsedCookies=function(){for(var t={},e=document.cookie.split(";"),n=0,r=e.length;n<r;n++)if(e[n]=e[n].replace(/^[\s]+|[\s]+$/g,""),e[n]){var o=e[n].split("="),i=(o[0]||"").replace(/^[\s]+|[\s]+$/g,""),s=(o[1]||"").replace(/^[\s]+|[\s]+$/g,"");i&&(t[this.unescapeCookieValue(i)]=this.unescapeCookieValue(s))}return t},t.prototype.getItem=function(t){return this.getParsedCookies()[t]||null},t.prototype.setItem=function(t,e,n){if(n===r.NON_CRITICAL)return!1;if(!t)throw new Error("Invalid item name!");if(!e)return this.removeItem(t);var o=this.escapeCookieValue(t)+"="+this.escapeCookieValue(e),i=new Date;if(i.setFullYear(i.getFullYear()+10),(o=o+";expires="+i+";domain="+window.location.hostname+";path=/").length>4e3)throw alert("Sorry, this feature is not supported when you are in Private Browsing mode, because no storage is provided by your browser"),new Error("Not enough storage!");return this.hasItem(t)&&this.removeItem(t),document.cookie=o,this.getItem(t)===e},t.prototype.hasItem=function(t){return void 0!==this.getParsedCookies()[t]},t.prototype.removeItem=function(t){return!this.hasItem(t)||(document.cookie=this.escapeCookieValue(t)+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+window.location.hostname+";path=/",void 0===this.getParsedCookies()[this.escapeCookieValue(t)])},t.prototype.clear=function(){var t=this.getParsedCookies();for(var e in t)t.hasOwnProperty(e)&&t.propertyIsEnumerable(e)&&this.removeItem(e)},t.prototype.getDriverType=function(){return o.COOKIE_STORAGE},t.ESCAPE_CHAR=".",t.CHR_EQUAL=1,t.CHR_QUOTE=2,t.CHR_SEMICOLON=3,t.CHR_DOLLAR=4,t.CHR_NEW_LINE=5,t.CHR_LINE_FEED=6,t.CHR_TAB=7,t.CHR_SPACE=8,t}(),u=function(){function t(){this.localStorageDriver=new i,this.sessionStorageDriver=new s,this.cookieStorageDriver=new a,this.driver=this.localStorageDriver,this.driver.isSupported()||(this.driver=this.sessionStorageDriver),this.driver.isSupported()||(this.driver=this.cookieStorageDriver)}return t.prototype.getDriverByType=function(t){switch(t){case o.LOCAL_STORAGE:return this.localStorageDriver;case o.SESSION_STORAGE:return this.sessionStorageDriver;case o.COOKIE_STORAGE:return this.cookieStorageDriver;case o.AUTO:default:return this.driver}},t.prototype.getItem=function(t,e){return void 0===e&&(e=o.AUTO),this.getDriverByType(e).getItem(t)},t.prototype.hasItem=function(t,e){return void 0===e&&(e=o.AUTO),this.getDriverByType(e).hasItem(t)},t.prototype.setItem=function(t,e,n,r){return void 0===r&&(r=o.AUTO),this.getDriverByType(r).setItem(t,e,n)},t.prototype.removeItem=function(t,e){return void 0===e&&(e=o.AUTO),this.getDriverByType(e).removeItem(t)},t.prototype.clear=function(t){void 0===t&&(t=o.AUTO),this.getDriverByType(t).clear()},t.prototype.getCurrentDriverType=function(){return this.driver.getDriverType()},t.prototype.createIndexedDB=function(t){return new n.IndexedDB(t)},t}(),l=function(){function t(){}return t.getInstance=function(){return this.instance||(this.instance=new u),this.instance},t.getItem=function(t,e){return void 0===e&&(e=o.AUTO),this.getInstance().getItem(t,e)},t.hasItem=function(t,e){return void 0===e&&(e=o.AUTO),this.getInstance().hasItem(t,e)},t.setItem=function(t,e,n,r){return void 0===r&&(r=o.AUTO),this.getInstance().setItem(t,e,n,r)},t.removeItem=function(t,e){return void 0===e&&(e=o.AUTO),this.getInstance().removeItem(t,e)},t.clear=function(t){void 0===t&&(t=o.AUTO),this.getInstance().clear(t)},t.getCurrentDriverType=function(){return this.getInstance().getCurrentDriverType()},t.createIndexedDB=function(t){return this.getInstance().createIndexedDB(t)},t}();e.PersistentStorage=l}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(0),n(3),n(16),n(18),n(8),n(2),n(27),n(5),n(42),n(73),n(115),n(116),n(20),n(1),n(117)],void 0===(o=function(t,e,n,r,o,i,a,u,l,c,p,d,h,f,g,m,y){Object.defineProperty(e,"__esModule",{value:!0});var v=function(){function t(){}return t.getInstance=function(){return this.instance||(this.instance=new b),this.instance},t.on=function(t,e){return this.getInstance().on(t,e)},t.once=function(t,e){return this.getInstance().once(t,e)},t.off=function(t,e){return this.getInstance().off(t,e)},t.trigger=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return(e=this.getInstance()).trigger.apply(e,[t].concat(n))},t.onJWTChanged=function(){this.getInstance().onJWTChanged()},t.login=function(t,e){return void 0===e&&(e=!1),this.getInstance().login(t,e)},t.isLoggedIn=function(){return this.getInstance().isLoggedIn()},t.logout=function(){return this.getInstance().logout()},t.changePassword=function(){return this.getInstance().changePassword()},t.forgotPassword=function(){return this.getInstance().forgotPassword()},t.executeUserResetPassword=function(t,e,n){return this.getInstance().executeUserResetPassword(t,e,n)},t.createAccount=function(){return this.getInstance().createAccount()},t.oneClickSignup=function(){return this.getInstance().oneClickSignup()},t.getJWT=function(){return this.getInstance().getJWT()},t.renewJWT=function(){return this.getInstance().renewJWT()},t.getAuthZero=function(){return this.getInstance().getAuthZero()},t.EVENT_JWT_CHANGE="jwt.change",t.EVENT_LOGOUT="logout",t.EVENT_LOGIN="login",t}();e.UserManager=v;var b=function(t){function e(){var n=t.call(this)||this;n.jwt=null,n.authZero=(new p.AuthZero).withPlugin(new h.AuthZeroGooglePlugin({sdkURL:"//plus.google.com/js/client:plusone.js?onload=startApp",client_id:"883960237098-dldh77lrd5hj5v5sut1eqmqvi5mg621c.apps.googleusercontent.com",cookiepolicy:"single_host_origin",fecth_basic_profile:!0,scope:"profile"})).withPlugin(new f.AuthZeroFacebookPlugin({sdkURL:"//connect.facebook.net/en_US/sdk.js",appId:"2391242764498194",cookie:!0,xfbml:!0,version:"v2.11"})).withPlugin(new y.AuthZeroMicrosoftPlugin({sdkURL:"//alcdn.msauth.net/lib/1.2.1/js/msal.js"})),n.loginAndSignup=new d.LoginAndSignUp(n),n.hookToAPI();try{var r=void 0,s=o.URLParser.parseURL(window.location.toString()),a=!1;if(r=i.PersistentStorage.getItem("jwt")||null,s&&s.search&&s.search.jwt&&(a=!0,r=s.search.jwt),e.isJWTExpired(r))n.setJWT(null);else if(n.setJWT(r),r)if(a){console.warn("[USR] Using JWT from URL query (and fixate it to current session)"),i.PersistentStorage.setItem("jwt",r,i.DataPersistenceType.NON_CRITICAL),delete s.search.jwt;try{window.history.replaceState({},document.title,o.URLParser.createURL(s))}catch(t){console.error("[USR]: Failed to clear JWT from URL")}}else console.warn("[USR] Using cached JWT")}catch(t){console.warn("[USR] Error initializing JWT"),console.error(t),n.setJWT(null)}return n}return s(e,t),e.prototype.onJWTChanged=function(){try{var t=this.jwt?e.parseJWT(this.jwt):null;this.trigger(v.EVENT_JWT_CHANGE,this.jwt,t),this.jwt?document.body.setAttribute("data-user-plan-id",String(t.planId)):document.body.removeAttribute("data-user-plan-id"),t&&t.abcSubmitAdminUserId&&t.abcSubmitAdminName}catch(t){}},e.prototype.setJWT=function(t){this.jwt=t;try{t?i.PersistentStorage.setItem("jwt",t,i.DataPersistenceType.CRITICAL):i.PersistentStorage.removeItem("jwt")}catch(t){}this.onJWTChanged()},e.prototype.login=function(t,r){var o=this;return void 0===r&&(r=!1),n.Deferred((function(n){null===o.jwt?o.getUserJWT(t,r).then((function(t){o.setJWT(t),t&&o.trigger(v.EVENT_LOGIN),n.resolve(e.parseJWT(o.jwt))})).fail((function(t){n.reject(t)})):n.resolve(e.parseJWT(o.jwt))}))},e.prototype.getUserJWT=function(t,e){return void 0===e&&(e=!1),this.loginAndSignup.loginOrSignupAndReturnJWT(t||d.LoginOrSignupSection.LOGIN,e)},e.prototype.isLoggedIn=function(){return!!this.jwt},e.prototype.logout=function(){var t=this;return n.Deferred((function(e){t.trigger(v.EVENT_LOGOUT),t.setJWT(null),e.resolve(!0)})).promise()},e.prototype.changePassword=function(){var t=this;return n.Deferred((function(e){a.NetworkCache.get("/static/templates/ui-v2/login/change-password.html").then((function(r){t.login().then((function(t){var o=new u.Dialog({width:"400px",height:"400px",title:t.userName,closable:!0,onClose:function(){e.reject(new Error("User aborted the change password process"))},buttons:[{id:"change-password",caption:m.I18n.translateApplicationText("Change Password","users-manager"),classNames:"btn-primary",callback:function(){n(o.getRoot()).find("[data-role=error]").remove(),c.API.post("users/change-password",{old_password:n(o.getBody()).find("[name=old-password]").val(),new_password:n(o.getBody()).find("[name=new-password]").val(),confirm_password:n(o.getBody()).find("[name=confirm-password]").val()}).then((function(){o.close(),e.resolve(!0)})).fail((function(t){if((t=t||new l.BackendException("Unknown server error")).getField()&&n(o.getBody()).find("[name="+t.getField()+"]").length>0){var e=document.createElement("span");e.setAttribute("data-role","error"),e.textContent=m.I18n.translateApplicationText(t.getMessage(),"users-manager"),e.setAttribute("for",t.getField()),n(o.getBody()).find("[name="+t.getField()+"]").before(e)}else u.Dialog.alert(m.I18n.translateApplicationText(t.getMessage(),"users-manager"),m.I18n.translateApplicationText("Change Password","users-manager"))}))}}],movable:!0,style:u.DialogStyle.FLAT_COLOR}).center();o.getRoot().setAttribute("data-dialog-role","change-password"),o.getBody().innerHTML=r,m.I18n.translateDOMNode(o.getBody()),n(o.getBody()).find("form").on("submit",(function(t){t.preventDefault(),t.stopPropagation()})),n(o.getBody()).on("input","input",(function(){n(this).prev("[data-role=error]").remove()}))}))}))})).promise()},e.prototype.forgotPassword=function(){this.loginAndSignup.loginOrSignupAndReturnJWT(d.LoginOrSignupSection.FORGOT_PASSWORD)},e.prototype.executeUserResetPassword=function(t,e,r){var o=this;return n.Deferred((function(i){t?e&&32===e.length?(r||i.reject(new Error("Bad email!")),a.NetworkCache.get("/static/templates/ui-v2/login/reset-password-invitation.html").then((function(s){var a=new u.Dialog({width:"500px",height:"300px",title:"Reset Password - "+r,movable:!0,style:u.DialogStyle.FLAT_COLOR,buttons:[{id:"reset-password",caption:"Reset Password",classNames:"btn-primary",callback:function(){n(a.getRoot()).find("[data-role=error]").remove(),c.API.post("users/reset-password-by-pending-key",{request_id:t,pending_key:e,new_password:n(a.getBody()).find("[name=new-password]").val(),confirm_password:n(a.getBody()).find("[name=confirm-password]").val()}).then((function(t){a.close(),o.setJWT(t),i.resolve(!0),u.Dialog.alert("Your password has been successfully changed","Reset password")})).fail((function(t){var e=document.createElement("span");e.setAttribute("data-role","error"),e.textContent=t.getMessage(),t.getField()?(e.setAttribute("for",t.getField()),n(a.getBody()).find("[name="+t.getField()+"]").before(e)):n(a.getBody()).append(e)}))}},{id:"cancel",caption:"Cancel",callback:function(){a.close(),i.resolve(!0)}}]}).center();a.getRoot().setAttribute("data-dialog-role","reset-password"),a.getBody().innerHTML=s,n(a.getBody()).find("form").on("submit",(function(t){t.preventDefault(),t.stopPropagation()})),n(a.getBody()).on("input","input",(function(){n(this).prev("[data-role=error]").remove()}))})).fail((function(t){i.reject(t)}))):i.reject(new Error("Bad pending key")):i.reject(new Error("Bad request ID"))})).promise()},e.prototype.createAccount=function(){return this.loginAndSignup.loginOrSignupAndReturnJWT(d.LoginOrSignupSection.CREATE_ACCOUNT)},e.prototype.oneClickSignup=function(){var t=this;try{if(i.PersistentStorage.getItem("jwt"))return n.Deferred((function(t){u.Dialog.alert("Hi there, we noticed you already have an account","One-click Signup"),t.resolve(null)}))}catch(t){}return n.Deferred((function(e){t.createAccount().then((function(n){t.setJWT(n),setTimeout((function(){t.login().then((function(t){u.Dialog.alert("Your account has been successfully created","Welcome to AbcSubmit, "+t.firstName)}))}),3e3),e.resolve(null)})).fail((function(t){u.Dialog.alert("There was an error while completing your signup process","Failed to complete Signup"),e.reject(t)}))}))},e.prototype.getJWT=function(){return this.jwt},e.prototype.renewJWT=function(){var t=this;return console.warn("[USR] renew JWT"),n.Deferred((function(e){t.jwt?c.API.post("users/login/renew").then((function(n){t.setJWT(n),e.resolve(n)})).fail((function(t){e.reject(t)})):e.reject(new Error("Not authenticated!"))}))},e.prototype.hookToAPI=function(){var t=this;c.API.on(c.API.EVENT_AUTHENTICATION_EXPIRED,(function(){setTimeout((function(){t.setJWT(null),location.reload(!0)}),0)})),c.API.on(c.API.EVENT_TOS_VIOLATION,(function(){u.Dialog.confirm("Terms of Service violation","Sorry for the inconvenience, but your account is suspect of Terms of Service violation. Until we clarify the problem, we are blocking access to some functionality of the platform.\n\nDo you wish to get in touch with us?").then((function(){g.BrowserUtils.openTabOrPopup("https://www.abcsubmit.com/site/contact-us/","_blank")}))}))},e.isJWTExpired=function(t){try{if(!t)return!1;var e=t.split(".");if(3!==e.length)return!1;var n=JSON.parse(atob(e[1]));if(!n||"number"!=typeof n.exp)return!0;var r=new Date,o=new Date;r.setTime(1e3*n.exp);var i=o.getTime()-r.getTime()>864e5;return!0===i&&console.warn("[USR] Ignore expired JWT"),i}catch(t){return!1}},e.parseJWT=function(t){var e=t.split(".");if(3!==e.length)return null;var n=JSON.parse(atob(e[1])),r={id:n.userId,companyId:n.companyId||null,firstName:n.firstName,lastName:n.lastName,userName:n.userName,role:n.tokenRole,planId:n.planId,planName:n.planName,hasInvoicing:n.hasInvoicing,subscriptionId:n.subscriptionId,jwt:t};return void 0!==n.abcSubmitAdminUserId&&void 0!==n.abcSubmitAdminName&&(r.abcSubmitAdminUserId=n.abcSubmitAdminUserId,r.abcSubmitAdminName=n.abcSubmitAdminName),r},e.prototype.getAuthZero=function(){return this.authZero},e}(r.EventEmitter)}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(0),n(17),n(2),n(11),n(16)],void 0===(o=function(t,e,n,r,o,i,s){Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.POST="POST",t.GET="GET"}(e.PopupMethod||(e.PopupMethod={}));var a=function(){function t(){}return t.openTabOrPopup=function(t,e,s,a,u,l,c){var p=this;if(!t||!e||"_self"!==e){var d=s?"popup":"new tab";return void 0!==e&&"_blank"===e&&s&&(e=e.concat("_"+r.UniqueId.next())),u=void 0!==u&&!!u,n.Deferred((function(n){var h=new o.Dialog({width:"300px",height:"300px",title:a||"Opening "+d,closable:!1}).center(),f=new i.Loader(h.getBody());h.getRoot().setAttribute("data-dialog-role","popup-opener"),f.addLoadRequest();try{var g=[],m=r.UniqueId.next(),y=!1;g.push("pid="+m),g.push("url="+encodeURIComponent(t||"")),g.push("_="+String(+new Date)),void 0!==l&&l&&g.push("method="+l),void 0!==c&&c&&c instanceof Object&&g.push("vars="+encodeURIComponent(JSON.stringify(c)));var v=window.open("/static/templates/ui/popup.html?"+g.join("&"),e,p.convertPopupFeaturesToString(s)),b=function t(e){var r=e.data;r&&r.type&&"popup-confirm"===r.type&&r.popupId&&r.popupId===m&&(window.removeEventListener("message",t,!0),y||(y=!0,f.removeLoadRequest(),h.close(),v.postMessage("continue",location.origin)),n.resolve(v),e.preventDefault(),e.stopPropagation())};window.addEventListener("message",b,!0),u||setTimeout((function(){window.removeEventListener("message",b,!0),n.reject(new Error("Timeout after 10 seconds")),y||(y=!0,f.removeLoadRequest(),h.close())}),1e4);var C=8;setTimeout((function(){f.removeLoadRequest();try{h.getBody().innerHTML='<div data-role="manual-open"><p>It seems your browser is blocking popups</p>'+(u?"":"<p data-role='auto-close'>Auto close in <span class='seconds'>"+C+"</span> seconds</p>")+"</div>"}catch(t){return}u||setTimeout((function(){!function t(){try{--C>=0&&(h.getBody().querySelector(".seconds").textContent=String(C||"0"),setTimeout(t,1e3))}catch(t){}}()}),1e3),h.setButtons([{caption:"<span class='vfb vfb-floating-bar' style='font-size: 18px; float: left; margin-right: 10px'></span> Open "+d,classNames:"btn btn-primary",isHTMLCaption:!0,callback:function(){v=window.open("/static/templates/ui/popup.html?"+g.join("&"),e,p.convertPopupFeaturesToString(s)),f.reattachToElement(h.getBody()).addLoadRequest()}},u?null:{caption:"Cancel",classNames:"btn btn-danger",callback:function(){f.removeLoadRequest(),h.close(),y=!0,window.removeEventListener("message",b,!0),n.reject(new Error("User canceled "+d))}}])}),2e3)}catch(t){n.reject(new Error("Failed to open popup: "+String(t)))}}))}window.location.href=t},t.convertPopupFeaturesToString=function(t){var e=[];return t&&(void 0!==t.width&&e.push("width="+String(Math.max(~~t.width,100))),void 0!==t.height&&e.push("height="+String(Math.max(~~t.height,100))),void 0!==t.top&&e.push("top="+String(Math.max(~~t.top,0))),void 0!==t.left&&e.push("left="+String(Math.max(~~t.left,0))),void 0!==t.status&&e.push("status="+(t.status?"yes":"no")),void 0!==t.scrollbars&&e.push("scrollbars="+(t.scrollbars?"yes":"no")),void 0!==t.menubar&&e.push("menubar="+(t.menubar?"yes":"no"))),e.join(",")||void 0},t.stripQueryStringArgumentsFromLocation=function(t){var e=s.URLParser.parseURL(window.location.href);if(e.search){if(null===t)e.search={};else for(var n=0,r=t.length;n<r;n++)void 0!==e.search[t[n]]&&delete e.search[t[n]];try{history.replaceState(null,void 0,s.URLParser.createURL(e))}catch(e){console.warn("[BROWSER]: Failed to strip query string args: "+JSON.stringify(t)),console.error(e)}}},t}();e.BrowserUtils=a}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(41)],void 0===(o=function(t,e,n){var r;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.STANDARD="standard",t.MAC="mac",t.OTHER="other"}(r||(r={}));var o=function(){function t(){}return t.isControlOrMetaKey=function(t){switch(this.getKeyboardLayoutType()){case r.MAC:return t.metaKey||t.ctrlKey;case r.STANDARD:default:return t.ctrlKey}},t.isAltOrOptionKey=function(t){return t.altKey},t.isShiftKey=function(t){return t.shiftKey},t.getKeyboardEventAccelerator=function(e){var n=e.keyCode;if(n===t.BACKSPACE&&this.getKeyboardLayoutType()===r.MAC&&(n=t.DEL),void 0!==this.KEYMAP[n]){var o=[];return(e.metaKey||e.ctrlKey)&&o.push("CTRL"),e.altKey&&o.push("ALT"),e.shiftKey&&o.push("SHIFT"),o.push(this.KEYMAP[n]),o.join(" ")}return null},t.getKeyboardLayoutType=function(){if(null!==this.keyboardLayoutType)return this.keyboardLayoutType;switch(n.Browser.toString(),n.Browser.getOperatingSystemName()){case"android":case"ios":case"windows-mobile":case"other":return this.keyboardLayoutType=r.OTHER;case"mac":return this.keyboardLayoutType=r.MAC;case"windows":case"linux":case"unix":default:return this.keyboardLayoutType=r.STANDARD}},t.keyboardizeHTMLText=function(t){return t?t.replace(/\[([^\s\]]+?)]/g,(function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];switch(e[0]){case"BACKSPACE":return'<span class="keyboard backspace"></span>';case"TAB":return'<span class="keyboard tab"></span>';case"ENTER":return'<span class="keyboard enter"></span>';case"ESC":return'<span class="keyboard esc"></span>';case"PAGE_UP":return'<span class="keyboard page-up"></span>';case"PAGE_DOWN":return'<span class="keyboard page-down"></span>';case"END":return'<span class="keyboard end"></span>';case"HOME":return'<span class="keyboard home"></span>';case"LEFT":return'<span class="keyboard left"></span>';case"UP":return'<span class="keyboard up"></span>';case"RIGHT":return'<span class="keyboard right"></span>';case"DOWN":return'<span class="keyboard down"></span>';case"ARROWS":return'<span class="keyboard up"></span>, <span class="keyboard down"></span>, <span class="keyboard left"></span>, <span class="keyboard right"></span>';case"INS":return'<span class="keyboard ins"></span>';case"DEL":return'<span class="keyboard del"></span>';case"0":return'<span class="keyboard zero"></span>';case"1":return'<span class="keyboard one"></span>';case"2":return'<span class="keyboard two"></span>';case"3":return'<span class="keyboard three"></span>';case"4":return'<span class="keyboard four"></span>';case"5":return'<span class="keyboard five"></span>';case"6":return'<span class="keyboard six"></span>';case"7":return'<span class="keyboard seven"></span>';case"8":return'<span class="keyboard eight"></span>';case"9":return'<span class="keyboard nine"></span>';case"A":case"B":case"C":case"D":case"E":case"F":case"G":case"H":case"I":case"J":case"K":case"L":case"M":case"N":case"O":case"P":case"Q":case"R":case"S":case"T":case"U":case"V":case"W":case"X":case"Y":case"Z":case"F1":case"F2":case"F3":case"F4":case"F5":case"F6":case"F7":case"F8":case"F9":case"F10":case"F11":case"F12":return'<span class="keyboard '+e[0].toLowerCase()+'"></span>';case"/":return'<span class="keyboard slash"></span>';case"\\":return'<span class="keyboard backslash"></span>';case"[":return'<span class="keyboard open-square-bracket"></span>';case"]":return'<span class="keyboard close-square-bracket"></span>';case";":return'<span class="keyboard semicolon"></span>';case"'":return'<span class="keyboard apostrophe"></span>';case",":return'<span class="keyboard coma"></span>';case".":return'<span class="keyboard dot"></span>';case"CTRL":return'<span class="keyboard ctrl"></span>';case"ALT":return'<span class="keyboard alt"></span>';case"SHIFT":return'<span class="keyboard shift"></span>';case"LMB":return'<span class="keyboard lmb"></span>';case"RMB":return'<span class="keyboard rmb"></span>';default:return t}})):t},t.keyboardLayoutType=null,t.KEYMAP={8:"BACKSPACE",9:"TAB",13:"ENTER",27:"ESC",33:"PAGE_UP",34:"PAGE_DOWN",35:"END",36:"HOME",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",45:"INS",46:"DEL",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",191:"/",220:"\\",219:"[",221:"]",186:";",222:"'",188:",",190:"."},t.BACKSPACE=8,t.TAB=9,t.ENTER=13,t.SHIFT=16,t.CTRL=17,t.ALT=18,t.META_LEFT=91,t.META_RIGHT=93,t.ESC=27,t.SPACE=32,t.PAGE_UP=33,t.PAGE_DOWN=34,t.END=35,t.HOME=36,t.LEFT=37,t.UP=38,t.RIGHT=39,t.DOWN=40,t.INS=45,t.DEL=46,t.KEY_0=48,t.KEY_1=49,t.KEY_2=50,t.KEY_3=51,t.KEY_4=52,t.KEY_5=53,t.KEY_6=54,t.KEY_7=55,t.KEY_8=56,t.KEY_9=57,t.A=65,t.B=66,t.C=67,t.D=68,t.E=69,t.F=70,t.G=71,t.H=72,t.I=73,t.J=74,t.K=75,t.L=76,t.M=77,t.N=78,t.O=79,t.P=80,t.Q=81,t.R=82,t.S=83,t.T=84,t.U=85,t.V=86,t.W=87,t.X=88,t.Y=89,t.Z=90,t.F1=112,t.F2=113,t.F3=114,t.F4=115,t.F5=116,t.F6=117,t.F7=118,t.F8=119,t.F9=120,t.F10=121,t.F11=122,t.F12=123,t.SLASH=191,t.BACKSLASH=220,t.OPEN_SQUARE_BRACKET=219,t.CLOSE_SQUARE_BRACKET=221,t.SEMICOLON=186,t.SINGLE_QUOTE=222,t.COMA=188,t.DOT=190,t}();e.KeyboardDriver=o}.apply(e,r))||(t.exports=o)},,function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(0),n(112),n(3),n(134)],void 0===(o=function(t,e,n,r,o,i){Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e,n){void 0===e&&(e="div"),void 0===n&&(n=!1);var r=t.call(this)||this;return r.disabled=!1,r.id=null,r.root=n?i.SmartDOMTextOverflowElement.createElement(e):document.createElement(e),r.parent=null,r}return s(e,t),e.prototype.getNodeType=function(){return r.UINodeType.NODE},e.prototype.getRoot=function(){return this.root},e.prototype.setClass=function(t){return this.root.className=t||"",this},e.prototype.addClass=function(t){return n(this.root).addClass(t),this},e.prototype.removeClass=function(t){return n(this.root).removeClass(t),this},e.prototype.getId=function(){return this.id},e.prototype.setId=function(t){return this.root.id=this.id=t||null,this},e.prototype.getParent=function(){return this.parent||null},e.prototype.getFirstParent=function(t){return this.parent?this.parent instanceof t?this.parent:this.parent.getFirstParent(t):null},e.prototype.setParent=function(t){return this.parent=t,this},e.prototype.setTooltip=function(t){return this.tooltip=t,this.root.title=t||"",this},e.prototype.isDisabled=function(){return this.disabled},e.prototype.setDisabled=function(t){return t!==this.disabled&&(this.disabled=t,t?this.addClass("disabled"):this.removeClass("disabled")),this},e}(o.EventEmitter);e.NodeAbstract=a}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(39)],void 0===(o=function(t,e,n){var r;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.VERTICAL=0]="VERTICAL",t[t.HORIZONTAL=1]="HORIZONTAL"}(r=e.LayoutDirection||(e.LayoutDirection={}));var o=function(t){function e(e){var n=t.call(this)||this;return n.direction=e,n.setClass(n.direction===r.HORIZONTAL?"ui ui-ribbon-layout horizontal":"ui ui-ribbon-layout vertical"),n}return s(e,t),e.prototype.setWidth=function(t){return this.root.style.width=t,this},e.prototype.setHeight=function(t){return this.root.style.height=t,this},e.DIRECTION_VERTICAL=r.VERTICAL,e.DIRECTION_HORIZONTAL=r.HORIZONTAL,e}(n.ContainerAbstract);e.Layout=o}.apply(e,r))||(t.exports=o)},,function(t,e,n){"use strict";var r,o;r=[n,e,n(217)],void 0===(o=function(t,e,n){var r;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.PHYSICAL=0]="PHYSICAL",t[t.VIRTUAL=1]="VIRTUAL"}(r=e.DOMImplementation||(e.DOMImplementation={}));var o=function(){function t(){}return Object.defineProperty(t,"implementation",{get:function(){return this._impl},set:function(t){t!==this._impl&&(this._impl=t,this._doc=this._impl===r.PHYSICAL?window.document:new n.VirtualDocument)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"document",{get:function(){return this._doc},enumerable:!0,configurable:!0}),t._doc=window.document,t._impl=r.PHYSICAL,t}();e.DOM=o}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r;void 0===(r=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.message=t}return t.prototype.getMessage=function(){return this.message},t.prototype.setType=function(t){return this.type=t,this},t.prototype.getType=function(){return this.type},t.prototype.setCode=function(t){return this.code=t,this},t.prototype.getCode=function(){return this.code},t.prototype.setFile=function(t){return this.file=t,this},t.prototype.setField=function(t){return this.field=t,this},t.prototype.getField=function(){return this.field},t.prototype.getPrevious=function(){return this.previous||null},t.prototype.setPrevious=function(t){return this.previous=t,this},t.createFromObject=function(e){var n=new t(e.message).setFile(e.file).setType(e.type.split("::")[0]).setCode(e.type.split("::")[1]).setField(e.field||null);return e.previous&&n.setPrevious(this.createFromObject(e.previous)),n},t.createFromXHR=function(t){return t.responseJSON?this.createFromObject(t.responseJSON):null},t.prototype.toString=function(t){return void 0===t&&(t=""),t+this.type+"::"+this.code+" @ "+this.file+" - "+this.message+(this.previous?"\n"+this.previous.toString(t+"    "):"")},t.matches=function(e,n,r){return void 0===n&&(n=null),void 0===r&&(r=null),!!(e&&e instanceof t)&&(!(null!==n&&e.getType()!==n||null!==r&&e.getCode()!==r)||!!e.getPrevious()&&this.matches(e.getPrevious(),n,r))},t}();e.BackendException=n}.apply(e,[n,e]))||(t.exports=r)},function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,__extends=(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}extendStatics(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),extendStatics;__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__,exports,__webpack_require__(6)],__WEBPACK_AMD_DEFINE_RESULT__=function(require,exports,Strings_1){Object.defineProperty(exports,"__esModule",{value:!0});var ReduceCSSCalc=eval(atob("KGZ1bmN0aW9uKCl7DQp2YXIgbz1mdW5jdGlvbihrLHYsbyxsKXtmb3Iobz1vfHx7fSxsPWsubGVuZ3RoO2wtLTtvW2tbbF1dPXYpO3JldHVybiBvfSwkVjA9WzEsNV0sJFYxPVsxLDNdLCRWMj1bMSw0XSwkVjM9WzEsMjRdLCRWND1bMSw5XSwkVjU9WzEsMTBdLCRWNj1bMSwxMV0sJFY3PVsxLDEyXSwkVjg9WzEsMTNdLCRWOT1bMSwxNF0sJFZhPVsxLDE1XSwkVmI9WzEsMTZdLCRWYz1bMSwxN10sJFZkPVsxLDE4XSwkVmU9WzEsMTldLCRWZj1bMSwyMF0sJFZnPVsxLDIxXSwkVmg9WzEsMjJdLCRWaT1bMSwyM10sJFZqPVsxLDI2XSwkVms9WzEsMjddLCRWbD1bMSwyOF0sJFZtPVsxLDI5XSwkVm49WzEsMzVdLCRWbz1bNSw2LDcsOCw5LDExXSwkVnA9WzUsNiw3LDExXTsNCnZhciBwYXJzZXIgPSB7dHJhY2U6IGZ1bmN0aW9uIHRyYWNlKCkgeyB9LA0KeXk6IHt9LA0Kc3ltYm9sc186IHsiZXJyb3IiOjIsImV4cHJlc3Npb24iOjMsIm1hdGhfZXhwcmVzc2lvbiI6NCwiRU9GIjo1LCJBREQiOjYsIlNVQiI6NywiTVVMIjo4LCJESVYiOjksIkxQQVJFTiI6MTAsIlJQQVJFTiI6MTEsIk5FU1RFRF9DQUxDIjoxMiwiUFJFRklYIjoxMywiY3NzX3ZhcmlhYmxlIjoxNCwiY3NzX3ZhbHVlIjoxNSwidmFsdWUiOjE2LCJOVU1CRVIiOjE3LCJDU1NfVkFSIjoxOCwiTEVOR1RIIjoxOSwiQU5HTEUiOjIwLCJUSU1FIjoyMSwiRlJFUSI6MjIsIlJFUyI6MjMsIkVNUyI6MjQsIkVYUyI6MjUsIkNIUyI6MjYsIlJFTVMiOjI3LCJWSFMiOjI4LCJWV1MiOjI5LCJWTUlOUyI6MzAsIlZNQVhTIjozMSwiUEVSQ0VOVEFHRSI6MzIsIiRhY2NlcHQiOjAsIiRlbmQiOjF9LA0KdGVybWluYWxzXzogezI6ImVycm9yIiw1OiJFT0YiLDY6IkFERCIsNzoiU1VCIiw4OiJNVUwiLDk6IkRJViIsMTA6IkxQQVJFTiIsMTE6IlJQQVJFTiIsMTI6Ik5FU1RFRF9DQUxDIiwxMzoiUFJFRklYIiwxNzoiTlVNQkVSIiwxODoiQ1NTX1ZBUiIsMTk6IkxFTkdUSCIsMjA6IkFOR0xFIiwyMToiVElNRSIsMjI6IkZSRVEiLDIzOiJSRVMiLDI0OiJFTVMiLDI1OiJFWFMiLDI2OiJDSFMiLDI3OiJSRU1TIiwyODoiVkhTIiwyOToiVldTIiwzMDoiVk1JTlMiLDMxOiJWTUFYUyIsMzI6IlBFUkNFTlRBR0UifSwNCnByb2R1Y3Rpb25zXzogWzAsWzMsMl0sWzQsM10sWzQsM10sWzQsM10sWzQsM10sWzQsM10sWzQsNF0sWzQsN10sWzQsMV0sWzQsMV0sWzQsMV0sWzE2LDFdLFsxNiwyXSxbMTQsMV0sWzE1LDFdLFsxNSwxXSxbMTUsMV0sWzE1LDFdLFsxNSwxXSxbMTUsMV0sWzE1LDFdLFsxNSwxXSxbMTUsMV0sWzE1LDFdLFsxNSwxXSxbMTUsMV0sWzE1LDFdLFsxNSwxXSxbMTUsMl1dLA0KcGVyZm9ybUFjdGlvbjogZnVuY3Rpb24gYW5vbnltb3VzKHl5dGV4dCwgeXlsZW5nLCB5eWxpbmVubywgeXksIHl5c3RhdGUgLyogYWN0aW9uWzFdICovLCAkJCAvKiB2c3RhY2sgKi8sIF8kIC8qIGxzdGFjayAqLykgew0KLyogdGhpcyA9PSB5eXZhbCAqLw0KDQp2YXIgJDAgPSAkJC5sZW5ndGggLSAxOw0Kc3dpdGNoICh5eXN0YXRlKSB7DQpjYXNlIDE6DQogcmV0dXJuICQkWyQwLTFdOyANCmJyZWFrOw0KY2FzZSAyOiBjYXNlIDM6IGNhc2UgNDogY2FzZSA1Og0KIHRoaXMuJCA9IHsgdHlwZTogJ2V4cHJlc3Npb24nLCBvcGVyYXRvcjogJCRbJDAtMV0sIGxlZnQ6ICQkWyQwLTJdLCByaWdodDogJCRbJDBdIH07IA0KYnJlYWs7DQpjYXNlIDY6IGNhc2UgNzogY2FzZSA4Og0KIHRoaXMuJCA9ICQkWyQwLTFdOyANCmJyZWFrOw0KY2FzZSA5OiBjYXNlIDEwOiBjYXNlIDExOg0KIHRoaXMuJCA9ICQkWyQwXTsgDQpicmVhazsNCmNhc2UgMTI6DQogdGhpcy4kID0geyB0eXBlOiAnbnVtYmVyJywgdmFsdWU6IHBhcnNlRmxvYXQoJCRbJDBdKSB9OyANCmJyZWFrOw0KY2FzZSAxMzoNCiB0aGlzLiQgPSB7IHR5cGU6ICdudW1iZXInLCB2YWx1ZTogcGFyc2VGbG9hdCgkJFskMF0pICogLTEgfTsgDQpicmVhazsNCmNhc2UgMTQ6DQogdGhpcy4kID0geyB0eXBlOiAnQ3NzVmFyaWFibGUnLCB2YWx1ZTogJCRbJDBdIH07IA0KYnJlYWs7DQpjYXNlIDE1OiBjYXNlIDE2OiBjYXNlIDE3OiBjYXNlIDE4OiBjYXNlIDE5Og0KIHRoaXMuJCA9IHsgdHlwZTogJ3VuaXQnLCB2YWx1ZTogcGFyc2VGbG9hdCgkJFskMF0pLCB1bml0OiAvW2Etel0rLy5leGVjKCQkWyQwXSlbMF0gfTsgDQpicmVhazsNCmNhc2UgMjA6DQogdGhpcy4kID0geyB0eXBlOiAndW5pdCcsIHZhbHVlOiBwYXJzZUZsb2F0KCQkWyQwXSksIHVuaXQ6ICdlbScgfTsgDQpicmVhazsNCmNhc2UgMjE6DQogdGhpcy4kID0geyB0eXBlOiAndW5pdCcsIHZhbHVlOiBwYXJzZUZsb2F0KCQkWyQwXSksIHVuaXQ6ICdleCcgfTsgDQpicmVhazsNCmNhc2UgMjI6DQogdGhpcy4kID0geyB0eXBlOiAndW5pdCcsIHZhbHVlOiBwYXJzZUZsb2F0KCQkWyQwXSksIHVuaXQ6ICdjaCcgfTsgDQpicmVhazsNCmNhc2UgMjM6DQogdGhpcy4kID0geyB0eXBlOiAndW5pdCcsIHZhbHVlOiBwYXJzZUZsb2F0KCQkWyQwXSksIHVuaXQ6ICdyZW0nIH07IA0KYnJlYWs7DQpjYXNlIDI0Og0KIHRoaXMuJCA9IHsgdHlwZTogJ3VuaXQnLCB2YWx1ZTogcGFyc2VGbG9hdCgkJFskMF0pLCB1bml0OiAndmgnIH07IA0KYnJlYWs7DQpjYXNlIDI1Og0KIHRoaXMuJCA9IHsgdHlwZTogJ3VuaXQnLCB2YWx1ZTogcGFyc2VGbG9hdCgkJFskMF0pLCB1bml0OiAndncnIH07IA0KYnJlYWs7DQpjYXNlIDI2Og0KIHRoaXMuJCA9IHsgdHlwZTogJ3VuaXQnLCB2YWx1ZTogcGFyc2VGbG9hdCgkJFskMF0pLCB1bml0OiAndm1pbicgfTsgDQpicmVhazsNCmNhc2UgMjc6DQogdGhpcy4kID0geyB0eXBlOiAndW5pdCcsIHZhbHVlOiBwYXJzZUZsb2F0KCQkWyQwXSksIHVuaXQ6ICd2bWF4JyB9OyANCmJyZWFrOw0KY2FzZSAyODoNCiB0aGlzLiQgPSB7IHR5cGU6ICd1bml0JywgdmFsdWU6IHBhcnNlRmxvYXQoJCRbJDBdKSwgdW5pdDogJyUnIH07IA0KYnJlYWs7DQpjYXNlIDI5Og0KIHZhciBwcmV2ID0gJCRbJDBdOyBwcmV2LnZhbHVlICo9IC0xOyB0aGlzLiQgPSBwcmV2OyANCmJyZWFrOw0KfQ0KfSwNCnRhYmxlOiBbezM6MSw0OjIsNzokVjAsMTA6JFYxLDEyOiRWMiwxNDo2LDE1OjcsMTY6OCwxNzokVjMsMTg6JFY0LDE5OiRWNSwyMDokVjYsMjE6JFY3LDIyOiRWOCwyMzokVjksMjQ6JFZhLDI1OiRWYiwyNjokVmMsMjc6JFZkLDI4OiRWZSwyOTokVmYsMzA6JFZnLDMxOiRWaCwzMjokVml9LHsxOlszXX0sezU6WzEsMjVdLDY6JFZqLDc6JFZrLDg6JFZsLDk6JFZtfSx7NDozMCw3OiRWMCwxMDokVjEsMTI6JFYyLDE0OjYsMTU6NywxNjo4LDE3OiRWMywxODokVjQsMTk6JFY1LDIwOiRWNiwyMTokVjcsMjI6JFY4LDIzOiRWOSwyNDokVmEsMjU6JFZiLDI2OiRWYywyNzokVmQsMjg6JFZlLDI5OiRWZiwzMDokVmcsMzE6JFZoLDMyOiRWaX0sezEwOlsxLDMxXX0sezc6JFZuLDEzOlsxLDMyXSwxNTozMywxNzpbMSwzNF0sMTk6JFY1LDIwOiRWNiwyMTokVjcsMjI6JFY4LDIzOiRWOSwyNDokVmEsMjU6JFZiLDI2OiRWYywyNzokVmQsMjg6JFZlLDI5OiRWZiwzMDokVmcsMzE6JFZoLDMyOiRWaX0sbygkVm8sWzIsOV0pLG8oJFZvLFsyLDEwXSksbygkVm8sWzIsMTFdKSxvKCRWbyxbMiwxNF0pLG8oJFZvLFsyLDE1XSksbygkVm8sWzIsMTZdKSxvKCRWbyxbMiwxN10pLG8oJFZvLFsyLDE4XSksbygkVm8sWzIsMTldKSxvKCRWbyxbMiwyMF0pLG8oJFZvLFsyLDIxXSksbygkVm8sWzIsMjJdKSxvKCRWbyxbMiwyM10pLG8oJFZvLFsyLDI0XSksbygkVm8sWzIsMjVdKSxvKCRWbyxbMiwyNl0pLG8oJFZvLFsyLDI3XSksbygkVm8sWzIsMjhdKSxvKCRWbyxbMiwxMl0pLHsxOlsyLDFdfSx7NDozNiw3OiRWMCwxMDokVjEsMTI6JFYyLDE0OjYsMTU6NywxNjo4LDE3OiRWMywxODokVjQsMTk6JFY1LDIwOiRWNiwyMTokVjcsMjI6JFY4LDIzOiRWOSwyNDokVmEsMjU6JFZiLDI2OiRWYywyNzokVmQsMjg6JFZlLDI5OiRWZiwzMDokVmcsMzE6JFZoLDMyOiRWaX0sezQ6MzcsNzokVjAsMTA6JFYxLDEyOiRWMiwxNDo2LDE1OjcsMTY6OCwxNzokVjMsMTg6JFY0LDE5OiRWNSwyMDokVjYsMjE6JFY3LDIyOiRWOCwyMzokVjksMjQ6JFZhLDI1OiRWYiwyNjokVmMsMjc6JFZkLDI4OiRWZSwyOTokVmYsMzA6JFZnLDMxOiRWaCwzMjokVml9LHs0OjM4LDc6JFYwLDEwOiRWMSwxMjokVjIsMTQ6NiwxNTo3LDE2OjgsMTc6JFYzLDE4OiRWNCwxOTokVjUsMjA6JFY2LDIxOiRWNywyMjokVjgsMjM6JFY5LDI0OiRWYSwyNTokVmIsMjY6JFZjLDI3OiRWZCwyODokVmUsMjk6JFZmLDMwOiRWZywzMTokVmgsMzI6JFZpfSx7NDozOSw3OiRWMCwxMDokVjEsMTI6JFYyLDE0OjYsMTU6NywxNjo4LDE3OiRWMywxODokVjQsMTk6JFY1LDIwOiRWNiwyMTokVjcsMjI6JFY4LDIzOiRWOSwyNDokVmEsMjU6JFZiLDI2OiRWYywyNzokVmQsMjg6JFZlLDI5OiRWZiwzMDokVmcsMzE6JFZoLDMyOiRWaX0sezY6JFZqLDc6JFZrLDg6JFZsLDk6JFZtLDExOlsxLDQwXX0sezQ6NDEsNzokVjAsMTA6JFYxLDEyOiRWMiwxNDo2LDE1OjcsMTY6OCwxNzokVjMsMTg6JFY0LDE5OiRWNSwyMDokVjYsMjE6JFY3LDIyOiRWOCwyMzokVjksMjQ6JFZhLDI1OiRWYiwyNjokVmMsMjc6JFZkLDI4OiRWZSwyOTokVmYsMzA6JFZnLDMxOiRWaCwzMjokVml9LHs3OlsxLDQyXX0sbygkVm8sWzIsMjldKSxvKCRWbyxbMiwxM10pLHs3OiRWbiwxNTozMywxOTokVjUsMjA6JFY2LDIxOiRWNywyMjokVjgsMjM6JFY5LDI0OiRWYSwyNTokVmIsMjY6JFZjLDI3OiRWZCwyODokVmUsMjk6JFZmLDMwOiRWZywzMTokVmgsMzI6JFZpfSxvKCRWcCxbMiwyXSx7ODokVmwsOTokVm19KSxvKCRWcCxbMiwzXSx7ODokVmwsOTokVm19KSxvKCRWbyxbMiw0XSksbygkVm8sWzIsNV0pLG8oJFZvLFsyLDZdKSx7NjokVmosNzokVmssODokVmwsOTokVm0sMTE6WzEsNDNdfSx7MTI6WzEsNDRdfSxvKCRWbyxbMiw3XSksezEwOlsxLDQ1XX0sezQ6NDYsNzokVjAsMTA6JFYxLDEyOiRWMiwxNDo2LDE1OjcsMTY6OCwxNzokVjMsMTg6JFY0LDE5OiRWNSwyMDokVjYsMjE6JFY3LDIyOiRWOCwyMzokVjksMjQ6JFZhLDI1OiRWYiwyNjokVmMsMjc6JFZkLDI4OiRWZSwyOTokVmYsMzA6JFZnLDMxOiRWaCwzMjokVml9LHs2OiRWaiw3OiRWayw4OiRWbCw5OiRWbSwxMTpbMSw0N119LG8oJFZvLFsyLDhdKV0sDQpkZWZhdWx0QWN0aW9uczogezI1OlsyLDFdfSwNCnBhcnNlRXJyb3I6IGZ1bmN0aW9uIHBhcnNlRXJyb3Ioc3RyLCBoYXNoKSB7DQogICAgaWYgKGhhc2gucmVjb3ZlcmFibGUpIHsNCiAgICAgICAgdGhpcy50cmFjZShzdHIpOw0KICAgIH0gZWxzZSB7DQogICAgICAgIHZhciBlcnJvciA9IG5ldyBFcnJvcihzdHIpOw0KICAgICAgICBlcnJvci5oYXNoID0gaGFzaDsNCiAgICAgICAgdGhyb3cgZXJyb3I7DQogICAgfQ0KfSwNCnBhcnNlOiBmdW5jdGlvbiBwYXJzZShpbnB1dCkgew0KICAgIHZhciBzZWxmID0gdGhpcywgc3RhY2sgPSBbMF0sIHRzdGFjayA9IFtdLCB2c3RhY2sgPSBbbnVsbF0sIGxzdGFjayA9IFtdLCB0YWJsZSA9IHRoaXMudGFibGUsIHl5dGV4dCA9ICcnLCB5eWxpbmVubyA9IDAsIHl5bGVuZyA9IDAsIHJlY292ZXJpbmcgPSAwLCBURVJST1IgPSAyLCBFT0YgPSAxOw0KICAgIHZhciBhcmdzID0gbHN0YWNrLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTsNCiAgICB2YXIgbGV4ZXIgPSBPYmplY3QuY3JlYXRlKHRoaXMubGV4ZXIpOw0KICAgIHZhciBzaGFyZWRTdGF0ZSA9IHsgeXk6IHt9IH07DQogICAgZm9yICh2YXIgayBpbiB0aGlzLnl5KSB7DQogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGhpcy55eSwgaykpIHsNCiAgICAgICAgICAgIHNoYXJlZFN0YXRlLnl5W2tdID0gdGhpcy55eVtrXTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBsZXhlci5zZXRJbnB1dChpbnB1dCwgc2hhcmVkU3RhdGUueXkpOw0KICAgIHNoYXJlZFN0YXRlLnl5LmxleGVyID0gbGV4ZXI7DQogICAgc2hhcmVkU3RhdGUueXkucGFyc2VyID0gdGhpczsNCiAgICBpZiAodHlwZW9mIGxleGVyLnl5bGxvYyA9PSAndW5kZWZpbmVkJykgew0KICAgICAgICBsZXhlci55eWxsb2MgPSB7fTsNCiAgICB9DQogICAgdmFyIHl5bG9jID0gbGV4ZXIueXlsbG9jOw0KICAgIGxzdGFjay5wdXNoKHl5bG9jKTsNCiAgICB2YXIgcmFuZ2VzID0gbGV4ZXIub3B0aW9ucyAmJiBsZXhlci5vcHRpb25zLnJhbmdlczsNCiAgICBpZiAodHlwZW9mIHNoYXJlZFN0YXRlLnl5LnBhcnNlRXJyb3IgPT09ICdmdW5jdGlvbicpIHsNCiAgICAgICAgdGhpcy5wYXJzZUVycm9yID0gc2hhcmVkU3RhdGUueXkucGFyc2VFcnJvcjsNCiAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLnBhcnNlRXJyb3IgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcykucGFyc2VFcnJvcjsNCiAgICB9DQogICAgZnVuY3Rpb24gcG9wU3RhY2sobikgew0KICAgICAgICBzdGFjay5sZW5ndGggPSBzdGFjay5sZW5ndGggLSAyICogbjsNCiAgICAgICAgdnN0YWNrLmxlbmd0aCA9IHZzdGFjay5sZW5ndGggLSBuOw0KICAgICAgICBsc3RhY2subGVuZ3RoID0gbHN0YWNrLmxlbmd0aCAtIG47DQogICAgfQ0KICAgIF90b2tlbl9zdGFjazoNCiAgICAgICAgdmFyIGxleCA9IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgIHZhciB0b2tlbjsNCiAgICAgICAgICAgIHRva2VuID0gbGV4ZXIubGV4KCkgfHwgRU9GOw0KICAgICAgICAgICAgaWYgKHR5cGVvZiB0b2tlbiAhPT0gJ251bWJlcicpIHsNCiAgICAgICAgICAgICAgICB0b2tlbiA9IHNlbGYuc3ltYm9sc19bdG9rZW5dIHx8IHRva2VuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHRva2VuOw0KICAgICAgICB9Ow0KICAgIHZhciBzeW1ib2wsIHByZUVycm9yU3ltYm9sLCBzdGF0ZSwgYWN0aW9uLCBhLCByLCB5eXZhbCA9IHt9LCBwLCBsZW4sIG5ld1N0YXRlLCBleHBlY3RlZDsNCiAgICB3aGlsZSAodHJ1ZSkgew0KICAgICAgICBzdGF0ZSA9IHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdOw0KICAgICAgICBpZiAodGhpcy5kZWZhdWx0QWN0aW9uc1tzdGF0ZV0pIHsNCiAgICAgICAgICAgIGFjdGlvbiA9IHRoaXMuZGVmYXVsdEFjdGlvbnNbc3RhdGVdOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgaWYgKHN5bWJvbCA9PT0gbnVsbCB8fCB0eXBlb2Ygc3ltYm9sID09ICd1bmRlZmluZWQnKSB7DQogICAgICAgICAgICAgICAgc3ltYm9sID0gbGV4KCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBhY3Rpb24gPSB0YWJsZVtzdGF0ZV0gJiYgdGFibGVbc3RhdGVdW3N5bWJvbF07DQogICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhY3Rpb24gPT09ICd1bmRlZmluZWQnIHx8ICFhY3Rpb24ubGVuZ3RoIHx8ICFhY3Rpb25bMF0pIHsNCiAgICAgICAgICAgICAgICB2YXIgZXJyU3RyID0gJyc7DQogICAgICAgICAgICAgICAgZXhwZWN0ZWQgPSBbXTsNCiAgICAgICAgICAgICAgICBmb3IgKHAgaW4gdGFibGVbc3RhdGVdKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnRlcm1pbmFsc19bcF0gJiYgcCA+IFRFUlJPUikgew0KICAgICAgICAgICAgICAgICAgICAgICAgZXhwZWN0ZWQucHVzaCgnXCcnICsgdGhpcy50ZXJtaW5hbHNfW3BdICsgJ1wnJyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgaWYgKGxleGVyLnNob3dQb3NpdGlvbikgew0KICAgICAgICAgICAgICAgICAgICBlcnJTdHIgPSAnUGFyc2UgZXJyb3Igb24gbGluZSAnICsgKHl5bGluZW5vICsgMSkgKyAnOlxuJyArIGxleGVyLnNob3dQb3NpdGlvbigpICsgJ1xuRXhwZWN0aW5nICcgKyBleHBlY3RlZC5qb2luKCcsICcpICsgJywgZ290IFwnJyArICh0aGlzLnRlcm1pbmFsc19bc3ltYm9sXSB8fCBzeW1ib2wpICsgJ1wnJzsNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICBlcnJTdHIgPSAnUGFyc2UgZXJyb3Igb24gbGluZSAnICsgKHl5bGluZW5vICsgMSkgKyAnOiBVbmV4cGVjdGVkICcgKyAoc3ltYm9sID09IEVPRiA/ICdlbmQgb2YgaW5wdXQnIDogJ1wnJyArICh0aGlzLnRlcm1pbmFsc19bc3ltYm9sXSB8fCBzeW1ib2wpICsgJ1wnJyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHRoaXMucGFyc2VFcnJvcihlcnJTdHIsIHsNCiAgICAgICAgICAgICAgICAgICAgdGV4dDogbGV4ZXIubWF0Y2gsDQogICAgICAgICAgICAgICAgICAgIHRva2VuOiB0aGlzLnRlcm1pbmFsc19bc3ltYm9sXSB8fCBzeW1ib2wsDQogICAgICAgICAgICAgICAgICAgIGxpbmU6IGxleGVyLnl5bGluZW5vLA0KICAgICAgICAgICAgICAgICAgICBsb2M6IHl5bG9jLA0KICAgICAgICAgICAgICAgICAgICBleHBlY3RlZDogZXhwZWN0ZWQNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgaWYgKGFjdGlvblswXSBpbnN0YW5jZW9mIEFycmF5ICYmIGFjdGlvbi5sZW5ndGggPiAxKSB7DQogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BhcnNlIEVycm9yOiBtdWx0aXBsZSBhY3Rpb25zIHBvc3NpYmxlIGF0IHN0YXRlOiAnICsgc3RhdGUgKyAnLCB0b2tlbjogJyArIHN5bWJvbCk7DQogICAgICAgIH0NCiAgICAgICAgc3dpdGNoIChhY3Rpb25bMF0pIHsNCiAgICAgICAgY2FzZSAxOg0KICAgICAgICAgICAgc3RhY2sucHVzaChzeW1ib2wpOw0KICAgICAgICAgICAgdnN0YWNrLnB1c2gobGV4ZXIueXl0ZXh0KTsNCiAgICAgICAgICAgIGxzdGFjay5wdXNoKGxleGVyLnl5bGxvYyk7DQogICAgICAgICAgICBzdGFjay5wdXNoKGFjdGlvblsxXSk7DQogICAgICAgICAgICBzeW1ib2wgPSBudWxsOw0KICAgICAgICAgICAgaWYgKCFwcmVFcnJvclN5bWJvbCkgew0KICAgICAgICAgICAgICAgIHl5bGVuZyA9IGxleGVyLnl5bGVuZzsNCiAgICAgICAgICAgICAgICB5eXRleHQgPSBsZXhlci55eXRleHQ7DQogICAgICAgICAgICAgICAgeXlsaW5lbm8gPSBsZXhlci55eWxpbmVubzsNCiAgICAgICAgICAgICAgICB5eWxvYyA9IGxleGVyLnl5bGxvYzsNCiAgICAgICAgICAgICAgICBpZiAocmVjb3ZlcmluZyA+IDApIHsNCiAgICAgICAgICAgICAgICAgICAgcmVjb3ZlcmluZy0tOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgc3ltYm9sID0gcHJlRXJyb3JTeW1ib2w7DQogICAgICAgICAgICAgICAgcHJlRXJyb3JTeW1ib2wgPSBudWxsOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgYnJlYWs7DQogICAgICAgIGNhc2UgMjoNCiAgICAgICAgICAgIGxlbiA9IHRoaXMucHJvZHVjdGlvbnNfW2FjdGlvblsxXV1bMV07DQogICAgICAgICAgICB5eXZhbC4kID0gdnN0YWNrW3ZzdGFjay5sZW5ndGggLSBsZW5dOw0KICAgICAgICAgICAgeXl2YWwuXyQgPSB7DQogICAgICAgICAgICAgICAgZmlyc3RfbGluZTogbHN0YWNrW2xzdGFjay5sZW5ndGggLSAobGVuIHx8IDEpXS5maXJzdF9saW5lLA0KICAgICAgICAgICAgICAgIGxhc3RfbGluZTogbHN0YWNrW2xzdGFjay5sZW5ndGggLSAxXS5sYXN0X2xpbmUsDQogICAgICAgICAgICAgICAgZmlyc3RfY29sdW1uOiBsc3RhY2tbbHN0YWNrLmxlbmd0aCAtIChsZW4gfHwgMSldLmZpcnN0X2NvbHVtbiwNCiAgICAgICAgICAgICAgICBsYXN0X2NvbHVtbjogbHN0YWNrW2xzdGFjay5sZW5ndGggLSAxXS5sYXN0X2NvbHVtbg0KICAgICAgICAgICAgfTsNCiAgICAgICAgICAgIGlmIChyYW5nZXMpIHsNCiAgICAgICAgICAgICAgICB5eXZhbC5fJC5yYW5nZSA9IFsNCiAgICAgICAgICAgICAgICAgICAgbHN0YWNrW2xzdGFjay5sZW5ndGggLSAobGVuIHx8IDEpXS5yYW5nZVswXSwNCiAgICAgICAgICAgICAgICAgICAgbHN0YWNrW2xzdGFjay5sZW5ndGggLSAxXS5yYW5nZVsxXQ0KICAgICAgICAgICAgICAgIF07DQogICAgICAgICAgICB9DQogICAgICAgICAgICByID0gdGhpcy5wZXJmb3JtQWN0aW9uLmFwcGx5KHl5dmFsLCBbDQogICAgICAgICAgICAgICAgeXl0ZXh0LA0KICAgICAgICAgICAgICAgIHl5bGVuZywNCiAgICAgICAgICAgICAgICB5eWxpbmVubywNCiAgICAgICAgICAgICAgICBzaGFyZWRTdGF0ZS55eSwNCiAgICAgICAgICAgICAgICBhY3Rpb25bMV0sDQogICAgICAgICAgICAgICAgdnN0YWNrLA0KICAgICAgICAgICAgICAgIGxzdGFjaw0KICAgICAgICAgICAgXS5jb25jYXQoYXJncykpOw0KICAgICAgICAgICAgaWYgKHR5cGVvZiByICE9PSAndW5kZWZpbmVkJykgew0KICAgICAgICAgICAgICAgIHJldHVybiByOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKGxlbikgew0KICAgICAgICAgICAgICAgIHN0YWNrID0gc3RhY2suc2xpY2UoMCwgLTEgKiBsZW4gKiAyKTsNCiAgICAgICAgICAgICAgICB2c3RhY2sgPSB2c3RhY2suc2xpY2UoMCwgLTEgKiBsZW4pOw0KICAgICAgICAgICAgICAgIGxzdGFjayA9IGxzdGFjay5zbGljZSgwLCAtMSAqIGxlbik7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBzdGFjay5wdXNoKHRoaXMucHJvZHVjdGlvbnNfW2FjdGlvblsxXV1bMF0pOw0KICAgICAgICAgICAgdnN0YWNrLnB1c2goeXl2YWwuJCk7DQogICAgICAgICAgICBsc3RhY2sucHVzaCh5eXZhbC5fJCk7DQogICAgICAgICAgICBuZXdTdGF0ZSA9IHRhYmxlW3N0YWNrW3N0YWNrLmxlbmd0aCAtIDJdXVtzdGFja1tzdGFjay5sZW5ndGggLSAxXV07DQogICAgICAgICAgICBzdGFjay5wdXNoKG5ld1N0YXRlKTsNCiAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICBjYXNlIDM6DQogICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICByZXR1cm4gdHJ1ZTsNCn19Ow0KLyogZ2VuZXJhdGVkIGJ5IGppc29uLWxleCAwLjMuNCAqLw0KdmFyIGxleGVyID0gKGZ1bmN0aW9uKCl7DQp2YXIgbGV4ZXIgPSAoew0KDQpFT0Y6MSwNCg0KcGFyc2VFcnJvcjpmdW5jdGlvbiBwYXJzZUVycm9yKHN0ciwgaGFzaCkgew0KICAgICAgICBpZiAodGhpcy55eS5wYXJzZXIpIHsNCiAgICAgICAgICAgIHRoaXMueXkucGFyc2VyLnBhcnNlRXJyb3Ioc3RyLCBoYXNoKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihzdHIpOw0KICAgICAgICB9DQogICAgfSwNCg0KLy8gcmVzZXRzIHRoZSBsZXhlciwgc2V0cyBuZXcgaW5wdXQNCnNldElucHV0OmZ1bmN0aW9uIChpbnB1dCwgeXkpIHsNCiAgICAgICAgdGhpcy55eSA9IHl5IHx8IHRoaXMueXkgfHwge307DQogICAgICAgIHRoaXMuX2lucHV0ID0gaW5wdXQ7DQogICAgICAgIHRoaXMuX21vcmUgPSB0aGlzLl9iYWNrdHJhY2sgPSB0aGlzLmRvbmUgPSBmYWxzZTsNCiAgICAgICAgdGhpcy55eWxpbmVubyA9IHRoaXMueXlsZW5nID0gMDsNCiAgICAgICAgdGhpcy55eXRleHQgPSB0aGlzLm1hdGNoZWQgPSB0aGlzLm1hdGNoID0gJyc7DQogICAgICAgIHRoaXMuY29uZGl0aW9uU3RhY2sgPSBbJ0lOSVRJQUwnXTsNCiAgICAgICAgdGhpcy55eWxsb2MgPSB7DQogICAgICAgICAgICBmaXJzdF9saW5lOiAxLA0KICAgICAgICAgICAgZmlyc3RfY29sdW1uOiAwLA0KICAgICAgICAgICAgbGFzdF9saW5lOiAxLA0KICAgICAgICAgICAgbGFzdF9jb2x1bW46IDANCiAgICAgICAgfTsNCiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5yYW5nZXMpIHsNCiAgICAgICAgICAgIHRoaXMueXlsbG9jLnJhbmdlID0gWzAsMF07DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5vZmZzZXQgPSAwOw0KICAgICAgICByZXR1cm4gdGhpczsNCiAgICB9LA0KDQovLyBjb25zdW1lcyBhbmQgcmV0dXJucyBvbmUgY2hhciBmcm9tIHRoZSBpbnB1dA0KaW5wdXQ6ZnVuY3Rpb24gKCkgew0KICAgICAgICB2YXIgY2ggPSB0aGlzLl9pbnB1dFswXTsNCiAgICAgICAgdGhpcy55eXRleHQgKz0gY2g7DQogICAgICAgIHRoaXMueXlsZW5nKys7DQogICAgICAgIHRoaXMub2Zmc2V0Kys7DQogICAgICAgIHRoaXMubWF0Y2ggKz0gY2g7DQogICAgICAgIHRoaXMubWF0Y2hlZCArPSBjaDsNCiAgICAgICAgdmFyIGxpbmVzID0gY2gubWF0Y2goLyg/OlxyXG4/fFxuKS4qL2cpOw0KICAgICAgICBpZiAobGluZXMpIHsNCiAgICAgICAgICAgIHRoaXMueXlsaW5lbm8rKzsNCiAgICAgICAgICAgIHRoaXMueXlsbG9jLmxhc3RfbGluZSsrOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy55eWxsb2MubGFzdF9jb2x1bW4rKzsNCiAgICAgICAgfQ0KICAgICAgICBpZiAodGhpcy5vcHRpb25zLnJhbmdlcykgew0KICAgICAgICAgICAgdGhpcy55eWxsb2MucmFuZ2VbMV0rKzsNCiAgICAgICAgfQ0KDQogICAgICAgIHRoaXMuX2lucHV0ID0gdGhpcy5faW5wdXQuc2xpY2UoMSk7DQogICAgICAgIHJldHVybiBjaDsNCiAgICB9LA0KDQovLyB1bnNoaWZ0cyBvbmUgY2hhciAob3IgYSBzdHJpbmcpIGludG8gdGhlIGlucHV0DQp1bnB1dDpmdW5jdGlvbiAoY2gpIHsNCiAgICAgICAgdmFyIGxlbiA9IGNoLmxlbmd0aDsNCiAgICAgICAgdmFyIGxpbmVzID0gY2guc3BsaXQoLyg/OlxyXG4/fFxuKS9nKTsNCg0KICAgICAgICB0aGlzLl9pbnB1dCA9IGNoICsgdGhpcy5faW5wdXQ7DQogICAgICAgIHRoaXMueXl0ZXh0ID0gdGhpcy55eXRleHQuc3Vic3RyKDAsIHRoaXMueXl0ZXh0Lmxlbmd0aCAtIGxlbik7DQogICAgICAgIC8vdGhpcy55eWxlbmcgLT0gbGVuOw0KICAgICAgICB0aGlzLm9mZnNldCAtPSBsZW47DQogICAgICAgIHZhciBvbGRMaW5lcyA9IHRoaXMubWF0Y2guc3BsaXQoLyg/OlxyXG4/fFxuKS9nKTsNCiAgICAgICAgdGhpcy5tYXRjaCA9IHRoaXMubWF0Y2guc3Vic3RyKDAsIHRoaXMubWF0Y2gubGVuZ3RoIC0gMSk7DQogICAgICAgIHRoaXMubWF0Y2hlZCA9IHRoaXMubWF0Y2hlZC5zdWJzdHIoMCwgdGhpcy5tYXRjaGVkLmxlbmd0aCAtIDEpOw0KDQogICAgICAgIGlmIChsaW5lcy5sZW5ndGggLSAxKSB7DQogICAgICAgICAgICB0aGlzLnl5bGluZW5vIC09IGxpbmVzLmxlbmd0aCAtIDE7DQogICAgICAgIH0NCiAgICAgICAgdmFyIHIgPSB0aGlzLnl5bGxvYy5yYW5nZTsNCg0KICAgICAgICB0aGlzLnl5bGxvYyA9IHsNCiAgICAgICAgICAgIGZpcnN0X2xpbmU6IHRoaXMueXlsbG9jLmZpcnN0X2xpbmUsDQogICAgICAgICAgICBsYXN0X2xpbmU6IHRoaXMueXlsaW5lbm8gKyAxLA0KICAgICAgICAgICAgZmlyc3RfY29sdW1uOiB0aGlzLnl5bGxvYy5maXJzdF9jb2x1bW4sDQogICAgICAgICAgICBsYXN0X2NvbHVtbjogbGluZXMgPw0KICAgICAgICAgICAgICAgIChsaW5lcy5sZW5ndGggPT09IG9sZExpbmVzLmxlbmd0aCA/IHRoaXMueXlsbG9jLmZpcnN0X2NvbHVtbiA6IDApDQogICAgICAgICAgICAgICAgICsgb2xkTGluZXNbb2xkTGluZXMubGVuZ3RoIC0gbGluZXMubGVuZ3RoXS5sZW5ndGggLSBsaW5lc1swXS5sZW5ndGggOg0KICAgICAgICAgICAgICB0aGlzLnl5bGxvYy5maXJzdF9jb2x1bW4gLSBsZW4NCiAgICAgICAgfTsNCg0KICAgICAgICBpZiAodGhpcy5vcHRpb25zLnJhbmdlcykgew0KICAgICAgICAgICAgdGhpcy55eWxsb2MucmFuZ2UgPSBbclswXSwgclswXSArIHRoaXMueXlsZW5nIC0gbGVuXTsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLnl5bGVuZyA9IHRoaXMueXl0ZXh0Lmxlbmd0aDsNCiAgICAgICAgcmV0dXJuIHRoaXM7DQogICAgfSwNCg0KLy8gV2hlbiBjYWxsZWQgZnJvbSBhY3Rpb24sIGNhY2hlcyBtYXRjaGVkIHRleHQgYW5kIGFwcGVuZHMgaXQgb24gbmV4dCBhY3Rpb24NCm1vcmU6ZnVuY3Rpb24gKCkgew0KICAgICAgICB0aGlzLl9tb3JlID0gdHJ1ZTsNCiAgICAgICAgcmV0dXJuIHRoaXM7DQogICAgfSwNCg0KLy8gV2hlbiBjYWxsZWQgZnJvbSBhY3Rpb24sIHNpZ25hbHMgdGhlIGxleGVyIHRoYXQgdGhpcyBydWxlIGZhaWxzIHRvIG1hdGNoIHRoZSBpbnB1dCwgc28gdGhlIG5leHQgbWF0Y2hpbmcgcnVsZSAocmVnZXgpIHNob3VsZCBiZSB0ZXN0ZWQgaW5zdGVhZC4NCnJlamVjdDpmdW5jdGlvbiAoKSB7DQogICAgICAgIGlmICh0aGlzLm9wdGlvbnMuYmFja3RyYWNrX2xleGVyKSB7DQogICAgICAgICAgICB0aGlzLl9iYWNrdHJhY2sgPSB0cnVlOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VFcnJvcignTGV4aWNhbCBlcnJvciBvbiBsaW5lICcgKyAodGhpcy55eWxpbmVubyArIDEpICsgJy4gWW91IGNhbiBvbmx5IGludm9rZSByZWplY3QoKSBpbiB0aGUgbGV4ZXIgd2hlbiB0aGUgbGV4ZXIgaXMgb2YgdGhlIGJhY2t0cmFja2luZyBwZXJzdWFzaW9uIChvcHRpb25zLmJhY2t0cmFja19sZXhlciA9IHRydWUpLlxuJyArIHRoaXMuc2hvd1Bvc2l0aW9uKCksIHsNCiAgICAgICAgICAgICAgICB0ZXh0OiAiIiwNCiAgICAgICAgICAgICAgICB0b2tlbjogbnVsbCwNCiAgICAgICAgICAgICAgICBsaW5lOiB0aGlzLnl5bGluZW5vDQogICAgICAgICAgICB9KTsNCg0KICAgICAgICB9DQogICAgICAgIHJldHVybiB0aGlzOw0KICAgIH0sDQoNCi8vIHJldGFpbiBmaXJzdCBuIGNoYXJhY3RlcnMgb2YgdGhlIG1hdGNoDQpsZXNzOmZ1bmN0aW9uIChuKSB7DQogICAgICAgIHRoaXMudW5wdXQodGhpcy5tYXRjaC5zbGljZShuKSk7DQogICAgfSwNCg0KLy8gZGlzcGxheXMgYWxyZWFkeSBtYXRjaGVkIGlucHV0LCBpLmUuIGZvciBlcnJvciBtZXNzYWdlcw0KcGFzdElucHV0OmZ1bmN0aW9uICgpIHsNCiAgICAgICAgdmFyIHBhc3QgPSB0aGlzLm1hdGNoZWQuc3Vic3RyKDAsIHRoaXMubWF0Y2hlZC5sZW5ndGggLSB0aGlzLm1hdGNoLmxlbmd0aCk7DQogICAgICAgIHJldHVybiAocGFzdC5sZW5ndGggPiAyMCA/ICcuLi4nOicnKSArIHBhc3Quc3Vic3RyKC0yMCkucmVwbGFjZSgvXG4vZywgIiIpOw0KICAgIH0sDQoNCi8vIGRpc3BsYXlzIHVwY29taW5nIGlucHV0LCBpLmUuIGZvciBlcnJvciBtZXNzYWdlcw0KdXBjb21pbmdJbnB1dDpmdW5jdGlvbiAoKSB7DQogICAgICAgIHZhciBuZXh0ID0gdGhpcy5tYXRjaDsNCiAgICAgICAgaWYgKG5leHQubGVuZ3RoIDwgMjApIHsNCiAgICAgICAgICAgIG5leHQgKz0gdGhpcy5faW5wdXQuc3Vic3RyKDAsIDIwLW5leHQubGVuZ3RoKTsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gKG5leHQuc3Vic3RyKDAsMjApICsgKG5leHQubGVuZ3RoID4gMjAgPyAnLi4uJyA6ICcnKSkucmVwbGFjZSgvXG4vZywgIiIpOw0KICAgIH0sDQoNCi8vIGRpc3BsYXlzIHRoZSBjaGFyYWN0ZXIgcG9zaXRpb24gd2hlcmUgdGhlIGxleGluZyBlcnJvciBvY2N1cnJlZCwgaS5lLiBmb3IgZXJyb3IgbWVzc2FnZXMNCnNob3dQb3NpdGlvbjpmdW5jdGlvbiAoKSB7DQogICAgICAgIHZhciBwcmUgPSB0aGlzLnBhc3RJbnB1dCgpOw0KICAgICAgICB2YXIgYyA9IG5ldyBBcnJheShwcmUubGVuZ3RoICsgMSkuam9pbigiLSIpOw0KICAgICAgICByZXR1cm4gcHJlICsgdGhpcy51cGNvbWluZ0lucHV0KCkgKyAiXG4iICsgYyArICJeIjsNCiAgICB9LA0KDQovLyB0ZXN0IHRoZSBsZXhlZCB0b2tlbjogcmV0dXJuIEZBTFNFIHdoZW4gbm90IGEgbWF0Y2gsIG90aGVyd2lzZSByZXR1cm4gdG9rZW4NCnRlc3RfbWF0Y2g6ZnVuY3Rpb24gKG1hdGNoLCBpbmRleGVkX3J1bGUpIHsNCiAgICAgICAgdmFyIHRva2VuLA0KICAgICAgICAgICAgbGluZXMsDQogICAgICAgICAgICBiYWNrdXA7DQoNCiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5iYWNrdHJhY2tfbGV4ZXIpIHsNCiAgICAgICAgICAgIC8vIHNhdmUgY29udGV4dA0KICAgICAgICAgICAgYmFja3VwID0gew0KICAgICAgICAgICAgICAgIHl5bGluZW5vOiB0aGlzLnl5bGluZW5vLA0KICAgICAgICAgICAgICAgIHl5bGxvYzogew0KICAgICAgICAgICAgICAgICAgICBmaXJzdF9saW5lOiB0aGlzLnl5bGxvYy5maXJzdF9saW5lLA0KICAgICAgICAgICAgICAgICAgICBsYXN0X2xpbmU6IHRoaXMubGFzdF9saW5lLA0KICAgICAgICAgICAgICAgICAgICBmaXJzdF9jb2x1bW46IHRoaXMueXlsbG9jLmZpcnN0X2NvbHVtbiwNCiAgICAgICAgICAgICAgICAgICAgbGFzdF9jb2x1bW46IHRoaXMueXlsbG9jLmxhc3RfY29sdW1uDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICB5eXRleHQ6IHRoaXMueXl0ZXh0LA0KICAgICAgICAgICAgICAgIG1hdGNoOiB0aGlzLm1hdGNoLA0KICAgICAgICAgICAgICAgIG1hdGNoZXM6IHRoaXMubWF0Y2hlcywNCiAgICAgICAgICAgICAgICBtYXRjaGVkOiB0aGlzLm1hdGNoZWQsDQogICAgICAgICAgICAgICAgeXlsZW5nOiB0aGlzLnl5bGVuZywNCiAgICAgICAgICAgICAgICBvZmZzZXQ6IHRoaXMub2Zmc2V0LA0KICAgICAgICAgICAgICAgIF9tb3JlOiB0aGlzLl9tb3JlLA0KICAgICAgICAgICAgICAgIF9pbnB1dDogdGhpcy5faW5wdXQsDQogICAgICAgICAgICAgICAgeXk6IHRoaXMueXksDQogICAgICAgICAgICAgICAgY29uZGl0aW9uU3RhY2s6IHRoaXMuY29uZGl0aW9uU3RhY2suc2xpY2UoMCksDQogICAgICAgICAgICAgICAgZG9uZTogdGhpcy5kb25lDQogICAgICAgICAgICB9Ow0KICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5yYW5nZXMpIHsNCiAgICAgICAgICAgICAgICBiYWNrdXAueXlsbG9jLnJhbmdlID0gdGhpcy55eWxsb2MucmFuZ2Uuc2xpY2UoMCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBsaW5lcyA9IG1hdGNoWzBdLm1hdGNoKC8oPzpcclxuP3xcbikuKi9nKTsNCiAgICAgICAgaWYgKGxpbmVzKSB7DQogICAgICAgICAgICB0aGlzLnl5bGluZW5vICs9IGxpbmVzLmxlbmd0aDsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLnl5bGxvYyA9IHsNCiAgICAgICAgICAgIGZpcnN0X2xpbmU6IHRoaXMueXlsbG9jLmxhc3RfbGluZSwNCiAgICAgICAgICAgIGxhc3RfbGluZTogdGhpcy55eWxpbmVubyArIDEsDQogICAgICAgICAgICBmaXJzdF9jb2x1bW46IHRoaXMueXlsbG9jLmxhc3RfY29sdW1uLA0KICAgICAgICAgICAgbGFzdF9jb2x1bW46IGxpbmVzID8NCiAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lc1tsaW5lcy5sZW5ndGggLSAxXS5sZW5ndGggLSBsaW5lc1tsaW5lcy5sZW5ndGggLSAxXS5tYXRjaCgvXHI/XG4/LylbMF0ubGVuZ3RoIDoNCiAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnl5bGxvYy5sYXN0X2NvbHVtbiArIG1hdGNoWzBdLmxlbmd0aA0KICAgICAgICB9Ow0KICAgICAgICB0aGlzLnl5dGV4dCArPSBtYXRjaFswXTsNCiAgICAgICAgdGhpcy5tYXRjaCArPSBtYXRjaFswXTsNCiAgICAgICAgdGhpcy5tYXRjaGVzID0gbWF0Y2g7DQogICAgICAgIHRoaXMueXlsZW5nID0gdGhpcy55eXRleHQubGVuZ3RoOw0KICAgICAgICBpZiAodGhpcy5vcHRpb25zLnJhbmdlcykgew0KICAgICAgICAgICAgdGhpcy55eWxsb2MucmFuZ2UgPSBbdGhpcy5vZmZzZXQsIHRoaXMub2Zmc2V0ICs9IHRoaXMueXlsZW5nXTsNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLl9tb3JlID0gZmFsc2U7DQogICAgICAgIHRoaXMuX2JhY2t0cmFjayA9IGZhbHNlOw0KICAgICAgICB0aGlzLl9pbnB1dCA9IHRoaXMuX2lucHV0LnNsaWNlKG1hdGNoWzBdLmxlbmd0aCk7DQogICAgICAgIHRoaXMubWF0Y2hlZCArPSBtYXRjaFswXTsNCiAgICAgICAgdG9rZW4gPSB0aGlzLnBlcmZvcm1BY3Rpb24uY2FsbCh0aGlzLCB0aGlzLnl5LCB0aGlzLCBpbmRleGVkX3J1bGUsIHRoaXMuY29uZGl0aW9uU3RhY2tbdGhpcy5jb25kaXRpb25TdGFjay5sZW5ndGggLSAxXSk7DQogICAgICAgIGlmICh0aGlzLmRvbmUgJiYgdGhpcy5faW5wdXQpIHsNCiAgICAgICAgICAgIHRoaXMuZG9uZSA9IGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIGlmICh0b2tlbikgew0KICAgICAgICAgICAgcmV0dXJuIHRva2VuOw0KICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2JhY2t0cmFjaykgew0KICAgICAgICAgICAgLy8gcmVjb3ZlciBjb250ZXh0DQogICAgICAgICAgICBmb3IgKHZhciBrIGluIGJhY2t1cCkgew0KICAgICAgICAgICAgICAgIHRoaXNba10gPSBiYWNrdXBba107DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7IC8vIHJ1bGUgYWN0aW9uIGNhbGxlZCByZWplY3QoKSBpbXBseWluZyB0aGUgbmV4dCBydWxlIHNob3VsZCBiZSB0ZXN0ZWQgaW5zdGVhZC4NCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgfSwNCg0KLy8gcmV0dXJuIG5leHQgbWF0Y2ggaW4gaW5wdXQNCm5leHQ6ZnVuY3Rpb24gKCkgew0KICAgICAgICBpZiAodGhpcy5kb25lKSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy5FT0Y7DQogICAgICAgIH0NCiAgICAgICAgaWYgKCF0aGlzLl9pbnB1dCkgew0KICAgICAgICAgICAgdGhpcy5kb25lID0gdHJ1ZTsNCiAgICAgICAgfQ0KDQogICAgICAgIHZhciB0b2tlbiwNCiAgICAgICAgICAgIG1hdGNoLA0KICAgICAgICAgICAgdGVtcE1hdGNoLA0KICAgICAgICAgICAgaW5kZXg7DQogICAgICAgIGlmICghdGhpcy5fbW9yZSkgew0KICAgICAgICAgICAgdGhpcy55eXRleHQgPSAnJzsNCiAgICAgICAgICAgIHRoaXMubWF0Y2ggPSAnJzsNCiAgICAgICAgfQ0KICAgICAgICB2YXIgcnVsZXMgPSB0aGlzLl9jdXJyZW50UnVsZXMoKTsNCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBydWxlcy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgdGVtcE1hdGNoID0gdGhpcy5faW5wdXQubWF0Y2godGhpcy5ydWxlc1tydWxlc1tpXV0pOw0KICAgICAgICAgICAgaWYgKHRlbXBNYXRjaCAmJiAoIW1hdGNoIHx8IHRlbXBNYXRjaFswXS5sZW5ndGggPiBtYXRjaFswXS5sZW5ndGgpKSB7DQogICAgICAgICAgICAgICAgbWF0Y2ggPSB0ZW1wTWF0Y2g7DQogICAgICAgICAgICAgICAgaW5kZXggPSBpOw0KICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuYmFja3RyYWNrX2xleGVyKSB7DQogICAgICAgICAgICAgICAgICAgIHRva2VuID0gdGhpcy50ZXN0X21hdGNoKHRlbXBNYXRjaCwgcnVsZXNbaV0pOw0KICAgICAgICAgICAgICAgICAgICBpZiAodG9rZW4gIT09IGZhbHNlKSB7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG9rZW47DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5fYmFja3RyYWNrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBtYXRjaCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7IC8vIHJ1bGUgYWN0aW9uIGNhbGxlZCByZWplY3QoKSBpbXBseWluZyBhIHJ1bGUgTUlTbWF0Y2guDQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAvLyBlbHNlOiB0aGlzIGlzIGEgbGV4ZXIgcnVsZSB3aGljaCBjb25zdW1lcyBpbnB1dCB3aXRob3V0IHByb2R1Y2luZyBhIHRva2VuIChlLmcuIHdoaXRlc3BhY2UpDQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLm9wdGlvbnMuZmxleCkgew0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgaWYgKG1hdGNoKSB7DQogICAgICAgICAgICB0b2tlbiA9IHRoaXMudGVzdF9tYXRjaChtYXRjaCwgcnVsZXNbaW5kZXhdKTsNCiAgICAgICAgICAgIGlmICh0b2tlbiAhPT0gZmFsc2UpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gdG9rZW47DQogICAgICAgICAgICB9DQogICAgICAgICAgICAvLyBlbHNlOiB0aGlzIGlzIGEgbGV4ZXIgcnVsZSB3aGljaCBjb25zdW1lcyBpbnB1dCB3aXRob3V0IHByb2R1Y2luZyBhIHRva2VuIChlLmcuIHdoaXRlc3BhY2UpDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgaWYgKHRoaXMuX2lucHV0ID09PSAiIikgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuRU9GOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VFcnJvcignTGV4aWNhbCBlcnJvciBvbiBsaW5lICcgKyAodGhpcy55eWxpbmVubyArIDEpICsgJy4gVW5yZWNvZ25pemVkIHRleHQuXG4nICsgdGhpcy5zaG93UG9zaXRpb24oKSwgew0KICAgICAgICAgICAgICAgIHRleHQ6ICIiLA0KICAgICAgICAgICAgICAgIHRva2VuOiBudWxsLA0KICAgICAgICAgICAgICAgIGxpbmU6IHRoaXMueXlsaW5lbm8NCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgfSwNCg0KLy8gcmV0dXJuIG5leHQgbWF0Y2ggdGhhdCBoYXMgYSB0b2tlbg0KbGV4OmZ1bmN0aW9uIGxleCgpIHsNCiAgICAgICAgdmFyIHIgPSB0aGlzLm5leHQoKTsNCiAgICAgICAgaWYgKHIpIHsNCiAgICAgICAgICAgIHJldHVybiByOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMubGV4KCk7DQogICAgICAgIH0NCiAgICB9LA0KDQovLyBhY3RpdmF0ZXMgYSBuZXcgbGV4ZXIgY29uZGl0aW9uIHN0YXRlIChwdXNoZXMgdGhlIG5ldyBsZXhlciBjb25kaXRpb24gc3RhdGUgb250byB0aGUgY29uZGl0aW9uIHN0YWNrKQ0KYmVnaW46ZnVuY3Rpb24gYmVnaW4oY29uZGl0aW9uKSB7DQogICAgICAgIHRoaXMuY29uZGl0aW9uU3RhY2sucHVzaChjb25kaXRpb24pOw0KICAgIH0sDQoNCi8vIHBvcCB0aGUgcHJldmlvdXNseSBhY3RpdmUgbGV4ZXIgY29uZGl0aW9uIHN0YXRlIG9mZiB0aGUgY29uZGl0aW9uIHN0YWNrDQpwb3BTdGF0ZTpmdW5jdGlvbiBwb3BTdGF0ZSgpIHsNCiAgICAgICAgdmFyIG4gPSB0aGlzLmNvbmRpdGlvblN0YWNrLmxlbmd0aCAtIDE7DQogICAgICAgIGlmIChuID4gMCkgew0KICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uZGl0aW9uU3RhY2sucG9wKCk7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICByZXR1cm4gdGhpcy5jb25kaXRpb25TdGFja1swXTsNCiAgICAgICAgfQ0KICAgIH0sDQoNCi8vIHByb2R1Y2UgdGhlIGxleGVyIHJ1bGUgc2V0IHdoaWNoIGlzIGFjdGl2ZSBmb3IgdGhlIGN1cnJlbnRseSBhY3RpdmUgbGV4ZXIgY29uZGl0aW9uIHN0YXRlDQpfY3VycmVudFJ1bGVzOmZ1bmN0aW9uIF9jdXJyZW50UnVsZXMoKSB7DQogICAgICAgIGlmICh0aGlzLmNvbmRpdGlvblN0YWNrLmxlbmd0aCAmJiB0aGlzLmNvbmRpdGlvblN0YWNrW3RoaXMuY29uZGl0aW9uU3RhY2subGVuZ3RoIC0gMV0pIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbmRpdGlvbnNbdGhpcy5jb25kaXRpb25TdGFja1t0aGlzLmNvbmRpdGlvblN0YWNrLmxlbmd0aCAtIDFdXS5ydWxlczsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbmRpdGlvbnNbIklOSVRJQUwiXS5ydWxlczsNCiAgICAgICAgfQ0KICAgIH0sDQoNCi8vIHJldHVybiB0aGUgY3VycmVudGx5IGFjdGl2ZSBsZXhlciBjb25kaXRpb24gc3RhdGU7IHdoZW4gYW4gaW5kZXggYXJndW1lbnQgaXMgcHJvdmlkZWQgaXQgcHJvZHVjZXMgdGhlIE4tdGggcHJldmlvdXMgY29uZGl0aW9uIHN0YXRlLCBpZiBhdmFpbGFibGUNCnRvcFN0YXRlOmZ1bmN0aW9uIHRvcFN0YXRlKG4pIHsNCiAgICAgICAgbiA9IHRoaXMuY29uZGl0aW9uU3RhY2subGVuZ3RoIC0gMSAtIE1hdGguYWJzKG4gfHwgMCk7DQogICAgICAgIGlmIChuID49IDApIHsNCiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbmRpdGlvblN0YWNrW25dOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgcmV0dXJuICJJTklUSUFMIjsNCiAgICAgICAgfQ0KICAgIH0sDQoNCi8vIGFsaWFzIGZvciBiZWdpbihjb25kaXRpb24pDQpwdXNoU3RhdGU6ZnVuY3Rpb24gcHVzaFN0YXRlKGNvbmRpdGlvbikgew0KICAgICAgICB0aGlzLmJlZ2luKGNvbmRpdGlvbik7DQogICAgfSwNCg0KLy8gcmV0dXJuIHRoZSBudW1iZXIgb2Ygc3RhdGVzIGN1cnJlbnRseSBvbiB0aGUgc3RhY2sNCnN0YXRlU3RhY2tTaXplOmZ1bmN0aW9uIHN0YXRlU3RhY2tTaXplKCkgew0KICAgICAgICByZXR1cm4gdGhpcy5jb25kaXRpb25TdGFjay5sZW5ndGg7DQogICAgfSwNCm9wdGlvbnM6IHt9LA0KcGVyZm9ybUFjdGlvbjogZnVuY3Rpb24gYW5vbnltb3VzKHl5LHl5XywkYXZvaWRpbmdfbmFtZV9jb2xsaXNpb25zLFlZX1NUQVJUKSB7DQp2YXIgWVlTVEFURT1ZWV9TVEFSVDsNCnN3aXRjaCgkYXZvaWRpbmdfbmFtZV9jb2xsaXNpb25zKSB7DQpjYXNlIDA6Lyogc2tpcCB3aGl0ZXNwYWNlICovDQpicmVhazsNCmNhc2UgMTpyZXR1cm4gODsNCmJyZWFrOw0KY2FzZSAyOnJldHVybiA5Ow0KYnJlYWs7DQpjYXNlIDM6cmV0dXJuIDY7DQpicmVhazsNCmNhc2UgNDpyZXR1cm4gNzsNCmJyZWFrOw0KY2FzZSA1OnJldHVybiAxOTsNCmJyZWFrOw0KY2FzZSA2OnJldHVybiAxOTsNCmJyZWFrOw0KY2FzZSA3OnJldHVybiAxOTsNCmJyZWFrOw0KY2FzZSA4OnJldHVybiAxOTsNCmJyZWFrOw0KY2FzZSA5OnJldHVybiAxOTsNCmJyZWFrOw0KY2FzZSAxMDpyZXR1cm4gMTk7DQpicmVhazsNCmNhc2UgMTE6cmV0dXJuIDIwOw0KYnJlYWs7DQpjYXNlIDEyOnJldHVybiAyMDsNCmJyZWFrOw0KY2FzZSAxMzpyZXR1cm4gMjA7DQpicmVhazsNCmNhc2UgMTQ6cmV0dXJuIDIwOw0KYnJlYWs7DQpjYXNlIDE1OnJldHVybiAyMTsNCmJyZWFrOw0KY2FzZSAxNjpyZXR1cm4gMjE7DQpicmVhazsNCmNhc2UgMTc6cmV0dXJuIDIyOw0KYnJlYWs7DQpjYXNlIDE4OnJldHVybiAyMjsNCmJyZWFrOw0KY2FzZSAxOTpyZXR1cm4gMjM7DQpicmVhazsNCmNhc2UgMjA6cmV0dXJuIDIzOw0KYnJlYWs7DQpjYXNlIDIxOnJldHVybiAyMzsNCmJyZWFrOw0KY2FzZSAyMjpyZXR1cm4gMjQ7DQpicmVhazsNCmNhc2UgMjM6cmV0dXJuIDI1Ow0KYnJlYWs7DQpjYXNlIDI0OnJldHVybiAyNjsNCmJyZWFrOw0KY2FzZSAyNTpyZXR1cm4gMjc7DQpicmVhazsNCmNhc2UgMjY6cmV0dXJuIDI5Ow0KYnJlYWs7DQpjYXNlIDI3OnJldHVybiAyODsNCmJyZWFrOw0KY2FzZSAyODpyZXR1cm4gMzA7DQpicmVhazsNCmNhc2UgMjk6cmV0dXJuIDMxOw0KYnJlYWs7DQpjYXNlIDMwOnJldHVybiAzMjsNCmJyZWFrOw0KY2FzZSAzMTpyZXR1cm4gMTc7DQpicmVhazsNCmNhc2UgMzI6cmV0dXJuIDEyOw0KYnJlYWs7DQpjYXNlIDMzOnJldHVybiAxODsNCmJyZWFrOw0KY2FzZSAzNDpyZXR1cm4gMTM7DQpicmVhazsNCmNhc2UgMzU6cmV0dXJuIDEwOw0KYnJlYWs7DQpjYXNlIDM2OnJldHVybiAxMTsNCmJyZWFrOw0KY2FzZSAzNzpyZXR1cm4gNTsNCmJyZWFrOw0KfQ0KfSwNCnJ1bGVzOiBbL14oPzpccyspLywvXig/OlwqKS8sL14oPzpcLykvLC9eKD86XCspLywvXig/Oi0pLywvXig/OihbMC05XSsoXC5bMC05XSopP3xcLlswLTldKylweFxiKS8sL14oPzooWzAtOV0rKFwuWzAtOV0qKT98XC5bMC05XSspY21cYikvLC9eKD86KFswLTldKyhcLlswLTldKik/fFwuWzAtOV0rKW1tXGIpLywvXig/OihbMC05XSsoXC5bMC05XSopP3xcLlswLTldKylpblxiKS8sL14oPzooWzAtOV0rKFwuWzAtOV0qKT98XC5bMC05XSspcHRcYikvLC9eKD86KFswLTldKyhcLlswLTldKik/fFwuWzAtOV0rKXBjXGIpLywvXig/OihbMC05XSsoXC5bMC05XSopP3xcLlswLTldKylkZWdcYikvLC9eKD86KFswLTldKyhcLlswLTldKik/fFwuWzAtOV0rKWdyYWRcYikvLC9eKD86KFswLTldKyhcLlswLTldKik/fFwuWzAtOV0rKXJhZFxiKS8sL14oPzooWzAtOV0rKFwuWzAtOV0qKT98XC5bMC05XSspdHVyblxiKS8sL14oPzooWzAtOV0rKFwuWzAtOV0qKT98XC5bMC05XSspc1xiKS8sL14oPzooWzAtOV0rKFwuWzAtOV0qKT98XC5bMC05XSspbXNcYikvLC9eKD86KFswLTldKyhcLlswLTldKik/fFwuWzAtOV0rKUh6XGIpLywvXig/OihbMC05XSsoXC5bMC05XSopP3xcLlswLTldKylrSHpcYikvLC9eKD86KFswLTldKyhcLlswLTldKik/fFwuWzAtOV0rKWRwaVxiKS8sL14oPzooWzAtOV0rKFwuWzAtOV0qKT98XC5bMC05XSspZHBjbVxiKS8sL14oPzooWzAtOV0rKFwuWzAtOV0qKT98XC5bMC05XSspZHBweFxiKS8sL14oPzooWzAtOV0rKFwuWzAtOV0qKT98XC5bMC05XSspZW1cYikvLC9eKD86KFswLTldKyhcLlswLTldKik/fFwuWzAtOV0rKWV4XGIpLywvXig/OihbMC05XSsoXC5bMC05XSopP3xcLlswLTldKyljaFxiKS8sL14oPzooWzAtOV0rKFwuWzAtOV0qKT98XC5bMC05XSspcmVtXGIpLywvXig/OihbMC05XSsoXC5bMC05XSopP3xcLlswLTldKyl2d1xiKS8sL14oPzooWzAtOV0rKFwuWzAtOV0qKT98XC5bMC05XSspdmhcYikvLC9eKD86KFswLTldKyhcLlswLTldKik/fFwuWzAtOV0rKXZtaW5cYikvLC9eKD86KFswLTldKyhcLlswLTldKik/fFwuWzAtOV0rKXZtYXhcYikvLC9eKD86KFswLTldKyhcLlswLTldKik/fFwuWzAtOV0rKSUpLywvXig/OihbMC05XSsoXC5bMC05XSopP3xcLlswLTldKylcYikvLC9eKD86KGNhbGMpKS8sL14oPzoodmFyXChbXlwpXSpcKSkpLywvXig/OihbYS16XSspKS8sL14oPzpcKCkvLC9eKD86XCkpLywvXig/OiQpL10sDQpjb25kaXRpb25zOiB7IklOSVRJQUwiOnsicnVsZXMiOlswLDEsMiwzLDQsNSw2LDcsOCw5LDEwLDExLDEyLDEzLDE0LDE1LDE2LDE3LDE4LDE5LDIwLDIxLDIyLDIzLDI0LDI1LDI2LDI3LDI4LDI5LDMwLDMxLDMyLDMzLDM0LDM1LDM2LDM3XSwiaW5jbHVzaXZlIjp0cnVlfX0NCn0pOw0KcmV0dXJuIGxleGVyOw0KfSkoKTsNCnBhcnNlci5sZXhlciA9IGxleGVyOw0KZnVuY3Rpb24gUGFyc2VyICgpIHsNCiAgdGhpcy55eSA9IHt9Ow0KfQ0KUGFyc2VyLnByb3RvdHlwZSA9IHBhcnNlcjtwYXJzZXIuUGFyc2VyID0gUGFyc2VyOw0KcmV0dXJuIG5ldyBQYXJzZXI7DQp9KSgpOw0K")),CSSUtils=function(){function t(){}return t.parseCSSExpression=function(t){try{return CSSExpressionAST.create(ReduceCSSCalc.parse(t))}catch(t){return null}},t.reduceCSSExpression=function(t){var e=t,n=!1;do{n=!1,e=e.replace(/(\+|-|^)([\s]+)?([+\-]?[\d.]+px)([\s]+)?([+\-])([\s]+)?([+\-]?[\d.]+px)([\s]+)?$/,(function(){var t=parseFloat(arguments[3]),e=parseFloat(arguments[7]);"-"===arguments[1]&&(t=-t);var r,o="+"===arguments[5]?t+e:t-e;"-"===arguments[1]&&o<0&&(arguments[1]="+",o=-o),r=o.toFixed(2).replace(/[0]+$/g,"").replace(/\.$/g,"");var i=String(arguments[1]||"")+" "+r+"px";return n=!0,i.replace(/(^[\s]+|[\s]+$)/g,"")}))}while(n);return e},t.incrementCSSExpression=function(t,e){if(isNaN(e)||!isFinite(e)||null===e)return null;var n=this.parseCSSExpression(t);if(null===n)return null;var r=new CSSMath(CSSMathOperator.ADD);return r.setLeft(n),r.setRight(new CSSUnit(CSSUnitType.PX,e)),r.getUnitType()===CSSUnitType.PX?r.toString():"calc("+this.reduceCSSExpression(r.toString())+")"},t.rgbToHsl=function(t,e,n,r){t/=255,e/=255,n/=255;var o,i,s=Math.max(t,e,n),a=Math.min(t,e,n),u=(s+a)/2;if(s==a)o=i=0;else{var l=s-a;switch(i=u>.5?l/(2-s-a):l/(s+a),s){case t:o=(e-n)/l+(e<n?6:0);break;case e:o=(n-t)/l+2;break;case n:o=(t-e)/l+4}o/=6}return[o,i,u,r]},t.hslToRgb=function(t,e,n,r){var o,i,s;if(0==e)o=i=s=n;else{var a=function(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t},u=n<.5?n*(1+e):n+e-n*e,l=2*n-u;o=a(l,u,t+1/3),i=a(l,u,t),s=a(l,u,t-1/3)}return[255*o,255*i,255*s,r]},t.rgbToHsv=function(t,e,n,r){t/=255,e/=255,n/=255;var o,i,s=Math.max(t,e,n),a=Math.min(t,e,n),u=s,l=s-a;if(i=0==s?0:l/s,s==a)o=0;else{switch(s){case t:o=(e-n)/l+(e<n?6:0);break;case e:o=(n-t)/l+2;break;case n:o=(t-e)/l+4}o/=6}return[Math.round(360*o),Math.round(100*i),Math.round(100*u),r]},t.hsvToRgb=function(t,e,n,r,o){var i,s,a;void 0===o&&(o=!0),o&&(t/=360,e/=100,n/=100);var u=Math.floor(6*t),l=6*t-u,c=n*(1-e),p=n*(1-l*e),d=n*(1-(1-l)*e);switch(u%6){case 0:i=n,s=d,a=c;break;case 1:i=p,s=n,a=c;break;case 2:i=c,s=n,a=d;break;case 3:i=c,s=p,a=n;break;case 4:i=d,s=c,a=n;break;case 5:i=n,s=c,a=p}return[Math.floor(255*i),Math.floor(255*s),Math.floor(255*a),r]},t.parseCSSColor=function(t){if("transparent"===(t=String(t||"").toLowerCase()))return[0,0,0,0];var e=[0,0,0,1];if(void 0!==this.HTML_COLORS[t])return e[0]=this.HTML_COLORS[t][0],e[1]=this.HTML_COLORS[t][1],e[2]=this.HTML_COLORS[t][2],e;var n=void 0,r=void 0,o=void 0,i=void 0;if(n=/^#([a-f0-9]{6})([a-f0-9]{2})?$/.exec(t))return e[0]=parseInt(n[1].substr(0,2),16),e[1]=parseInt(n[1].substr(2,2),16),e[2]=parseInt(n[1].substr(4,2),16),n[2]&&(e[3]=parseFloat((parseInt(n[2],16)/255).toFixed(2))),e;if(n=/^#([a-f0-9]{3})([a-f0-9])?$/.exec(t))return e[0]=parseInt(n[1].charAt(0)+n[1].charAt(0),16),e[1]=parseInt(n[1].charAt(1)+n[1].charAt(1),16),e[2]=parseInt(n[1].charAt(2)+n[1].charAt(2),16),n[2]&&(e[3]=parseFloat((parseInt(n[2].charAt(0)+n[2].charAt(0),16)/255).toFixed(2))),e;if(n=/^([\s]+)?rgb([\s]+)?\(([\s]+)?([\d]+)([\s]+)?,([\s]+)?([\d]+)([\s]+)?,([\s]+)?([\d]+)([\s]+)?\)([\s]+)?$/.exec(t)){if(r=parseInt(n[4],10),o=parseInt(n[7],10),i=parseInt(n[10],10),r>=0&&r<=255&&o>=0&&o<=255&&i>=0&&i<=255)return e[0]=r,e[1]=o,e[2]=i,e}else if(n=/^([\s]+)?rgba([\s]+)?\(([\s]+)?([\d]+)([\s]+)?,([\s]+)?([\d]+)([\s]+)?,([\s]+)?([\d]+)([\s]+)?,([\s]+)?([\d.]+)([\s]+)?\)([\s]+)?$/.exec(t)){var s;if(r=parseInt(n[4],10),o=parseInt(n[7],10),i=parseInt(n[10],10),s=parseFloat(n[13]),!isNaN(s)&&s>=0&&s<=1&&r>=0&&r<=255&&o>=0&&o<=255&&i>=0&&i<=255)return e[0]=r,e[1]=o,e[2]=i,e[3]=s,e}return null},t.lighten=function(t,e){var n=this.parseCSSColor(t);if(!n)return t;var r=this.rgbToHsl(n[0],n[1],n[2],n[3]);if(!r)return t;r[2]+=e/100,r[2]>1&&(r[2]=1);var o=this.hslToRgb(r[0],r[1],r[2],r[3]);return"rgba("+Math.floor(o[0]).toString()+","+Math.floor(o[1]).toString()+","+Math.floor(o[2]).toString()+","+o[3].toFixed(2).replace(/\.00$/g,"")+")"},t.darken=function(t,e){var n=this.parseCSSColor(t);if(!n)return t;var r=this.rgbToHsl(n[0],n[1],n[2],n[3]);if(!r)return t;r[2]-=e/100,r[2]<0&&(r[2]=0);var o=this.hslToRgb(r[0],r[1],r[2],r[3]);return"rgba("+Math.floor(o[0]).toString()+","+Math.floor(o[1]).toString()+","+Math.floor(o[2]).toString()+","+o[3].toFixed(2)+")"},t.parseCSSBuffer=function(t){return CSSReader.parse(t)},t.HTML_COLORS={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},t}(),CSSUnitType;exports.CSSUtils=CSSUtils,function(t){t.NUMBER="",t.PX="px",t.CM="cm",t.MM="mm",t.IN="in",t.PT="pt",t.PC="pc",t.DEG="deg",t.GRAD="grad",t.RAD="rad",t.TURN="turn",t.S="s",t.MS="ms",t.HZ="Hz",t.KHZ="kHz",t.DPI="dpi",t.DPCM="dpcm",t.DPPX="dppx",t.EM="em",t.EX="ex",t.CH="ch",t.REM="rem",t.VW="vw",t.VH="vh",t.VMIN="vmin",t.VMAX="vmax",t.PERCENT="%"}(CSSUnitType||(CSSUnitType={}));var CSSExpression=function(){},CSSNumber=function(t){function e(e){var n=t.call(this)||this;return n.value=e,n}return __extends(e,t),e.prototype.getUnitType=function(){return CSSUnitType.NUMBER},e.prototype.toString=function(){return this.value.toString(10)},e.prototype.getValue=function(){return this.value},e}(CSSExpression),CSSUnit=function(t){function e(e,n){var r=t.call(this,n)||this;return r.unitType=e,r}return __extends(e,t),e.prototype.getUnitType=function(){return this.unitType},e.prototype.toString=function(){return this.value.toString(10)+this.unitType},e}(CSSNumber),CSSMathOperator;!function(t){t.ADD="+",t.SUB="-",t.MUL="*",t.DIV="/"}(CSSMathOperator||(CSSMathOperator={}));var CSSMath=function(t){function e(e,n,r){void 0===n&&(n=null),void 0===r&&(r=null);var o=t.call(this)||this;return o.operator=e,o.left=n?CSSExpressionAST.create(n):null,o.right=r?CSSExpressionAST.create(r):null,o}return __extends(e,t),e.prototype.setLeft=function(t){return this.left=t,this},e.prototype.setRight=function(t){return this.right=t,this},e.prototype.getValue=function(){var t,e=this.left.getValue(),n=this.right.getValue();if(null===e||null===n)return null;switch(this.operator){case CSSMathOperator.ADD:t=e+n;break;case CSSMathOperator.SUB:t=e-n;break;case CSSMathOperator.MUL:t=e*n;break;case CSSMathOperator.DIV:t=e/n}return parseFloat(t.toFixed(2))},e.prototype.getUnitType=function(){var t=this.left.getUnitType(),e=this.right.getUnitType();return null===t||null==e?null:t===CSSUnitType.NUMBER&&e===CSSUnitType.NUMBER?CSSUnitType.NUMBER:e===CSSUnitType.NUMBER?t:t!==e||this.operator!==CSSMathOperator.ADD&&this.operator!==CSSMathOperator.SUB?null:t},e.prototype.toString=function(){var t=this.getUnitType();return null===t?this.operator===CSSMathOperator.ADD||this.operator===CSSMathOperator.SUB?this.left.toString()+" "+this.operator+" "+this.right.toString():"("+this.left.toString()+" "+this.operator+" "+this.right.toString()+")":this.getValue()+t},e}(CSSExpression),CSSValueType;!function(t){t.NUMBER="number",t.UNIT="unit",t.EXPRESSION="expression"}(CSSValueType||(CSSValueType={}));var CSSExpressionAST=function(){function t(){}return t.create=function(t){switch(t.type){case CSSValueType.NUMBER:return new CSSNumber(t.value);case CSSValueType.UNIT:return new CSSUnit(t.unit,t.value);case CSSValueType.EXPRESSION:return new CSSMath(t.operator,t.left,t.right)}},t}(),CSSReader=function(){function t(){}return t.parse=function(t){var e,n,r,o,i=t instanceof Strings_1.StringBuffer?t:new Strings_1.StringBuffer(t),s=new ParsedCSSCollection;do{switch(!0){case!!this.readWhitespace(i):break;case!!(e=this.readComment(i)):s.addNode(e);break;case!!(o=this.readForeignInstruction(i)):s.addNode(o);break;case!!(n=this.readMedia(i)):s.addNode(n);break;case!!this.readEOF(i):return s;case!!(r=this.readBlock(i)):s.addNode(r);break;default:i.read(1)}}while(""!==i.getRemaining());return s},t.readBlock=function(t){var e,n=t.getPosition(),r=this.consume(this.ANYTHING_BEFORE_BLOCK_START,t);if(r){if(this.consume(this.CSS_BLOCK_START,t)&&(e=this.consume(CSSReaderConsumer.ANYTHING_BEFORE_BLOCK_END,t))&&this.consume(this.CSS_BLOCK_END,t)){var o=String(e[0]||""),i=String(r[2]||"").trim();if(i){for(var s=i.split(","),a=[],u=0,l=s.length;u<l;u++)s[u]=s[u].trim(),s[u]&&a.push(s[u]);if(a.length){var c=new CSSBlock(o.trim());for(u=0,l=a.length;u<l;u++)c.addSelector(new CSSRuleSelector(a[u]));return c}}}t.seek(n)}return null},t.readEOF=function(t){return!!this.consume(this.CSS_BLOCK_END,t)},t.readComment=function(t){var e;return(e=this.consume(this.COMMENT,t))?new CSSComment(e[1]):null},t.readMedia=function(t){var e,n=t.getPosition();if(this.consume(this.MEDIA_START,t)){if((e=this.consume(this.ANYTHING_BEFORE_BLOCK_START,t))&&this.consume(this.CSS_BLOCK_START,t)){var r=new CSSMedia(e[2]||""),o=this.parse(t);return r.import(o),r}t.seek(n)}return null},t.readForeignInstruction=function(t){var e;return(e=this.consume(this.FOREIGN_INSTRUCTION_WITHOUT_BLOCK,t))?new CSSForeignInstruction(e[0]):null},t.readWhitespace=function(t){var e;return(e=this.consume(this.WHITESPACE,t))?e[0].length:0},t.consume=function(t,e){if(t instanceof RegExp){var n=t.exec(e.getRemaining());return n?(e.read(n[0].length),n):null}switch(t){case CSSReaderConsumer.ANYTHING_BEFORE_BLOCK_END:return this.CONSUMER_ANYTHING_BEFORE_BLOCK_END(e);default:throw new Error("Unknown CSSReader consumer: "+JSON.stringify(t))}},t.CONSUMER_ANYTHING_BEFORE_BLOCK_END=function(t){for(var e=1,n="",r=t.getPosition(),o=t.read(1);""!==o&&e>0;){switch(o){case"{":e++,n=n.concat(o);break;case"}":if(0===--e)return t.rewind(1),[n];n=n.concat("}");break;default:n=n.concat(o)}o=t.read(1)}return n?e>0?(t.seek(r),null):[n]:(t.seek(r),null)},t.COMMENT=/^\/\*([\s\S]+?)?(\*\/|$)/,t.MEDIA_START=/^@media[\s+]/,t.ANYTHING_BEFORE_BLOCK_START=/^([\s]+)?([^{]+)([\s]+)?/,t.CSS_BLOCK_START=/^([\s]+)?{/,t.CSS_BLOCK_END=/^([\s]+)?(}|([\s]+)?$)/,t.FOREIGN_INSTRUCTION_WITHOUT_BLOCK=/^([\s]+)?@(charset|import)([^;]+)+(;|$)/,t.WHITESPACE=/^[\s]+/,t}(),CSSNodeType,CSSReaderConsumer;!function(t){t[t.COMMENT=0]="COMMENT",t[t.MEDIA_QUERY=1]="MEDIA_QUERY",t[t.BLOCK=2]="BLOCK",t[t.FOREIGN_INSTRUCTION=3]="FOREIGN_INSTRUCTION"}(CSSNodeType||(CSSNodeType={})),function(t){t[t.ANYTHING_BEFORE_BLOCK_END=0]="ANYTHING_BEFORE_BLOCK_END"}(CSSReaderConsumer||(CSSReaderConsumer={}));var CSSNode=function(){},ParsedCSSCollection=function(){function t(){this.nodes=[]}return t.prototype.addNode=function(t){return this.nodes.push(t),this},t.prototype.getLength=function(){return this.nodes.length},t.prototype.getNodeAt=function(t){return this.nodes[t]||null},t.prototype.toString=function(){return this.nodes.map((function(t){return t.toString()})).join("\n")},t.prototype.flatten=function(){for(var t,e=[],n=0,r=this.nodes.length;n<r;n++)e.push(this.nodes[n]),(t=this.nodes[n].getChildNodes())&&(e=e.concat(t.flatten()));return e},t.prototype.getCSSSelectors=function(){var t=[];return this.flatten().filter((function(t){return t.getTypeId()===CSSNodeType.BLOCK})).forEach((function(e){t=t.concat(e.getSelectors())})),t},t}();exports.ParsedCSSCollection=ParsedCSSCollection;var CSSComment=function(t){function e(e){var n=t.call(this)||this;return n.comment=e,n}return __extends(e,t),e.prototype.getChildNodes=function(){return null},e.prototype.getTypeId=function(){return CSSNodeType.COMMENT},e.prototype.toString=function(){return""},e}(CSSNode),CSSMedia=function(t){function e(e){var n=t.call(this)||this;return n.descriptor=String(e||"").trim(),n.childNodes=new ParsedCSSCollection,n}return __extends(e,t),e.prototype.getChildNodes=function(){return this.childNodes},e.prototype.getTypeId=function(){return CSSNodeType.MEDIA_QUERY},e.prototype.toString=function(){return this.descriptor?"@media "+this.descriptor+" {"+this.childNodes.toString()+"\n}":""},e.prototype.import=function(t){for(var e=0,n=t.getLength();e<n;e++)this.childNodes.addNode(t.getNodeAt(e))},e}(CSSNode),CSSRuleSelector=function(){function t(t){this.text=t}return t.prototype.getText=function(){return this.text},t.prototype.setText=function(t){return this.text=String(t||""),this},t.prototype.toString=function(){return String(this.text||"")},t.prototype.isSpecial=function(){return this.text&&/^([\s]+)?@([a-z]+) /.test(this.text)},t}();exports.CSSRuleSelector=CSSRuleSelector;var CSSBlock=function(t){function e(e){var n=t.call(this)||this;return n.selectors=[],n.body=e,n}return __extends(e,t),e.prototype.addSelector=function(t){this.selectors.push(t)},e.prototype.getSelectors=function(){return this.selectors.slice(0)},e.prototype.toString=function(){if(!this.body)return"";var t=this.selectors.filter((function(t){return!!t.getText()})).join(", ");return t?t+" {"+this.body+"}":""},e.prototype.getChildNodes=function(){return null},e.prototype.getTypeId=function(){return CSSNodeType.BLOCK},e}(CSSNode),CSSForeignInstruction=function(t){function e(e){var n=t.call(this)||this;return n.body=e,n}return __extends(e,t),e.prototype.getChildNodes=function(){return null},e.prototype.getTypeId=function(){return CSSNodeType.FOREIGN_INSTRUCTION},e.prototype.toString=function(){return this.body},e}(CSSNode),CSSColor=function(){function t(){}return t.rgb2Hsl=function(t,e,n,r){void 0===r&&(r=1),t=t%this.RGB_MAX/this.RGB_MAX,e=e%this.RGB_MAX/this.RGB_MAX,n=n%this.RGB_MAX/this.RGB_MAX;var o,i,s=Math.max(t,e,n),a=Math.min(t,e,n),u=(s+a)/2;if(s===a)o=i=0;else{var l=s-a;switch(i=u>.5?l/(2-s-a):l/(s+a),s){case t:o=(e-n)/l+(e<n?6:0);break;case e:o=(n-t)/l+2;break;case n:o=(t-e)/l+4}o/=6}return{h:Math.floor(o*this.HUE_MAX),s:Math.floor(i*this.SV_MAX),l:Math.floor(u*this.SV_MAX),a:r}},t.rgb2Hsv=function(t,e,n,r){void 0===r&&(r=1),t=t===this.RGB_MAX?1:t%this.RGB_MAX/this.RGB_MAX,e=e===this.RGB_MAX?1:e%this.RGB_MAX/this.RGB_MAX,n=n===this.RGB_MAX?1:n%this.RGB_MAX/this.RGB_MAX;var o,i,s=Math.max(t,e,n),a=Math.min(t,e,n),u=s,l=s-a;if(i=0===s?0:l/s,s===a)o=0;else{switch(s){case t:o=(e-n)/l+(e<n?6:0);break;case e:o=(n-t)/l+2;break;case n:o=(t-e)/l+4}o/=6}return{h:Math.floor(o*this.HUE_MAX),s:Math.floor(i*this.SV_MAX),v:Math.floor(u*this.SV_MAX),a:r}},t.hue2rgb=function(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t},t.hsl2Rgb=function(t,e,n,r){var o,i,s;if(t=t===this.HUE_MAX?1:t%this.HUE_MAX/this.HUE_MAX*6,e=e===this.SV_MAX?1:e%this.SV_MAX/this.SV_MAX,n=n===this.SV_MAX?1:n%this.SV_MAX/this.SV_MAX,0===e)o=i=s=n;else{var a=n<.5?n*(1+e):n+e-n*e,u=2*n-a;o=this.hue2rgb(u,a,t+1/3),i=this.hue2rgb(u,a,t),s=this.hue2rgb(u,a,t-1/3)}return{r:Math.round(o*this.RGB_MAX),g:Math.round(i*this.RGB_MAX),b:Math.round(s*this.RGB_MAX),a:r}},t.hsv2Rgb=function(t,e,n,r){t=t===this.HUE_MAX?1:t%this.HUE_MAX/this.HUE_MAX*6,e=e===this.SV_MAX?1:e%this.SV_MAX/this.SV_MAX,n=n===this.SV_MAX?1:n%this.SV_MAX/this.SV_MAX;var o=Math.floor(t),i=t-o,s=n*(1-e),a=n*(1-i*e),u=n*(1-(1-i)*e),l=o%6,c=[n,a,s,s,u,n][l],p=[u,n,n,a,s,s][l],d=[s,s,u,n,n,a][l];return{r:Math.round(c*this.RGB_MAX),g:Math.round(p*this.RGB_MAX),b:Math.round(d*this.RGB_MAX),a:r}},t.rgb2Hex=function(t,e,n,r){return void 0===r&&(r=1),t=Math.round(t).toString(16),e=Math.round(e).toString(16),n=Math.round(n).toString(16),r=Math.round(255*r).toString(16),"#"+(t=1===t.length?"0"+t:t)+(e=1===e.length?"0"+e:e)+(n=1===n.length?"0"+n:n)+("ff"===(r=1===r.length?"0"+r:r)?"":r)},t.hex2Rgb=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16),a:e[4]?parseInt(e[4],16)/255:1}:null},t.hsv2Hex=function(t,e,n,r){var o=this.hsv2Rgb(t,e,n,r);return this.rgb2Hex(o.r,o.g,o.b,o.a)},t.hex2Hsv=function(t){var e=this.hex2Rgb(t);return this.rgb2Hsv(e.r,e.g,e.b,e.a)},t.hsl2Hex=function(t,e,n,r){var o=this.hsl2Rgb(t,e,n,r);return this.rgb2Hex(o.r,o.g,o.b,o.a)},t.hex2Hsl=function(t){var e=this.hex2Rgb(t);return this.rgb2Hsl(e.r,e.g,e.b)},t.hsv2Hsl=function(t){var e=this.hsv2Rgb(t.h,t.s,t.v,t.a);return this.rgb2Hsl(e.r,e.g,e.b,e.a)},t.RGB_MAX=255,t.HUE_MAX=360,t.SV_MAX=100,t}();exports.CSSColor=CSSColor}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(t,e,n){"use strict";var r,o;r=[n,e,n(6),n(1)],void 0===(o=function(t,e,n,r){Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.SECONDS="s",t.MINUTES="m",t.HOURS="h",t.DAYS="D",t.WEEKS="W",t.MONTHS="M",t.YEARS="Y"}(e.EDurationUnit||(e.EDurationUnit={}));var o=function(){function t(){}return t.MSG_HOUR="hour",t.MSG_HOURS="hours",t.MSG_MINUTE="minute",t.MSG_MINUTES="minutes",t.MSG_SECOND="second",t.MSG_SECONDS="seconds",t.MSG_DAY="day",t.MSG_DAYS="days",t.MSG_MONTH="month",t.MSG_MONTHS="months",t.MSG_YEAR="year",t.MSG_YEARS="years",t.CONTEXT="date-text",t}();e.DateUtilsTextResources=o;var i=function(){function t(){this.timeShift=60*(new Date).getTimezoneOffset()}return t.prototype.createFromUTCTimestamp=function(t,e){if(void 0===e&&(e=!1),null===t)return null;var n=new Date;return n.setTime(1e3*(t+(e?this.timeShift:0))),n},t.formatTimeFriendly=function(e,n){void 0===n&&(n=!1);var r={years:0,months:0,weeks:0,days:0,hours:0,minutes:0,seconds:0};e>t.YEAR_SECONDS&&(r.years=Math.floor(e/t.YEAR_SECONDS),e-=t.YEAR_SECONDS*r.years),e>t.MONTH_SECONDS&&(r.months=Math.floor(e/t.MONTH_SECONDS),e-=t.MONTH_SECONDS*r.months),e>t.WEEK_SECONDS&&(r.weeks=Math.floor(e/t.WEEK_SECONDS),e-=t.WEEK_SECONDS*r.weeks),e>t.DAY_SECONDS&&(r.days=Math.floor(e/t.DAY_SECONDS),e-=t.DAY_SECONDS*r.days),e>t.HOUR_SECONDS&&(r.hours=Math.floor(e/t.HOUR_SECONDS),e-=t.HOUR_SECONDS*r.hours),e>t.MINUTE_SECONDS&&(r.minutes=Math.floor(e/t.MINUTE_SECONDS),e-=t.MINUTE_SECONDS*r.minutes),r.seconds=e;var o=[];r.years>0&&o.push(r.years+" Y"+(n?"":"ear"+(1!==r.years?"s":""))),r.months>0&&o.push(r.months+" M"+(n?"":"onth"+(1!==r.months?"s":""))),r.weeks>0&&o.push(r.weeks+" W"+(n?"":"eek"+(1!==r.weeks?"s":""))),r.days>0&&o.push(r.days+" D"+(n?"":"ay"+(1!==r.days?"s":""))),r.hours>0&&o.push(r.hours+" h"+(n?"":"our"+(1!==r.hours?"s":""))),r.minutes>0&&o.push(r.minutes+" m"+(n?"":"inute"+(1!==r.minutes?"s":""))),r.seconds>0&&o.push(r.seconds+" s"+(n?"":"econd"+(1!==r.seconds?"s":"")));var i=o.join(" ");return n&&(i=i.replace(/([\d]+) ([a-z])/gi,"$1$2")),i},t.getUTCTimestamp=function(t){if(null===t)return null;if("number"==typeof t){var e=new Date;e.setTime(1e3*t);var n=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),0);return Math.round(n/1e3)}if(t instanceof Date){n=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),0);return Math.round(n/1e3)}throw new Error("Invalid argument dateOrUnixTimestamp: null | int | Date expected!")},t.getInstance=function(){return this.instance||(this.instance=new t)},t.createDateFromUTCTimestamp=function(t,e){return void 0===e&&(e=!1),this.getInstance().createFromUTCTimestamp(t,e)},t.createFromUnixTimestampWithoutApplyingLocalTime=function(t){var e=new Date;return e.setTime(1e3*t),e},t.cloneDate=function(t){var e=new Date;return e.setTime(t.getTime()),e},t.parseTime=function(t){if(!t||"string"!=typeof t)return null;var e=t.split(":");if(e.length<2||e.length>3)return null;for(var n=0,r=e.length;n<r;n++)if(!/^[0-9]{2}$/.test(e[n]))return null;var o=parseInt(e[0]),i=parseInt(e[1]),s=e[2]?parseInt(e[2]):null;if(o<0||o>23)return null;if(i<0||i>59)return null;if(null!==s&&(s<0||s>59))return null;var a={hours:e[0],minutes:e[1],intHours:parseInt(e[0]),intMinutes:parseInt(e[1]),secondsSinceStartOfDay:0};return e[2]?(a.seconds=e[2],a.intSeconds=parseInt(e[2]),a.secondsSinceStartOfDay=a.intSeconds+60*a.intMinutes+3600*a.intHours):a.secondsSinceStartOfDay=60*a.intMinutes+3600*a.intHours,a},t.parseDuration=function(t){if(!t||"string"!=typeof t)return null;var e;if(!(e=/^([\d]+)([smhDWMY])$/.exec(t)))return null;var n={value:parseInt(e[1]),unit:e[2]};return 0===n.value?null:n},t.computeHourOfDay=function(t){return Math.floor(t/3600)},t.computeMinuteOfHourOfDay=function(t){return Math.floor((t-3600*Math.floor(t/3600))/60)},t.formatSecondsDuration=function(t){if(!t)return"Empty";var e,n,i,s;t-=86400*(e=Math.floor(t/86400)),t-=3600*(n=Math.floor(t/3600)),s=t-=60*(i=Math.floor(t/60));var a=[];return e>0&&a.push(e+" "+(1===e?r.I18n.translateViewFormText(o.MSG_DAY,o.CONTEXT):r.I18n.translateViewFormText(o.MSG_DAYS,o.CONTEXT))),n>0&&a.push(n+" "+(1===n?r.I18n.translateViewFormText(o.MSG_HOUR,o.CONTEXT):r.I18n.translateViewFormText(o.MSG_HOURS,o.CONTEXT))),i>0&&a.push(i+" "+(1===i?r.I18n.translateViewFormText(o.MSG_MINUTE,o.CONTEXT):r.I18n.translateViewFormText(o.MSG_MINUTES,o.CONTEXT))),s>0&&a.push(s+" "+(1===s?r.I18n.translateViewFormText(o.MSG_SECOND,o.CONTEXT):r.I18n.translateViewFormText(o.MSG_SECONDS,o.CONTEXT))),a.join(" ")||"Empty"},t.formatTimeToString=function(t){return t?n.Strings.strPad(String(t.intHours),2,"0",n.EStringPadType.PAD_LEFT)+":"+n.Strings.strPad(String(t.intMinutes),2,"0",n.EStringPadType.PAD_LEFT):"#invalid_time"},t.isValidDate=function(t,e,n){var r=new Date;return r.setMilliseconds(0),r.setSeconds(0),r.setMinutes(0),r.setHours(0),r.setDate(1),r.setMonth(e-1),r.setFullYear(n),r.setDate(t),r.getDate()===t&&r.getMonth()===e-1&&r.getFullYear()===n},t.now=function(){return new Date},t.getMonthId=function(t){return t.getMonth()+12*t.getFullYear()},t.getDayId=function(t){return Math.round(365.25*t.getFullYear())+this.MONTH_DAYS_AT_BEGINNING[t.getMonth()]+t.getDate()},t.getHourId=function(t){return 24*this.getDayId(t)+t.getHours()},t.getMinuteId=function(t){return 60*this.getHourId(t)+t.getMinutes()},t.getMonthNameShort=function(t){return this.MONTH_NAMES_SHORT[t]},t.MONTH_NAMES_SHORT=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],t.YEAR_SECONDS=Math.round(31557600),t.MONTH_SECONDS=Math.round(2629800),t.WEEK_SECONDS=604800,t.DAY_SECONDS=86400,t.HOUR_SECONDS=3600,t.MINUTE_SECONDS=60,t.MONTH_DAYS_AT_BEGINNING=[0,31,60,91,121,152,182,213,244,274,305,335],t.MMDDYYYY="mmddyyyy",t.DDMMYYYY="ddmmyyyy",t.YYYYMMDD="yyyymmdd",t.instance=null,t}();e.DateUtils=i}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r;void 0===(r=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.running=!0,this.callback=t,this.setAggresivity(e)}return t.prototype.setAggresivity=function(t){var e=this;(t=~~t)<0&&(t=0),t!==this.aggresivity&&(this.aggresivity=t,clearInterval(this.id),this.id=setInterval((function(){e.running&&e.callback()}),this.aggresivity))},t.create=function(e,n){return new t(e,n)},t.prototype.stop=function(){return this.running=!1,this},t.prototype.start=function(){return this.running=!0,this},t.prototype.isRunning=function(){return this.running},t}();e.Thread=n}.apply(e,[n,e]))||(t.exports=r)},function(t,e,n){"use strict";var r,o;r=[n,e,n(16)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.getInstance=function(){return this.instance||(this.instance=new i),this.instance},t.isEnabled=function(){return this.getInstance().isEnabled()},t.getServersPool=function(){return this.getInstance().getServersPool()},t.getSupportedExtensions=function(){return this.getInstance().getSupportedExtensions()},t.cdnizeHTMLString=function(t){return this.getInstance().cdnizeHTMLString(t)},t.getCDNUrl=function(t){return this.getInstance().getCDNUrl(t)},t}();e.CDN=r;var o=function(){function t(t){this.config=t}return t.prototype.matchPath=function(t){for(var e=0,n=this.config.urlRewritePaths.length;e<n;e++)if(this.config.urlRewritePaths[e].test(t))return!0;return!1},t.prototype.getServers=function(){return this.config.servers},t.prototype.getName=function(){return this.config.name},t}(),i=function(){function t(){this.loadConfigFromDOM()}return t.prototype.isEnabled=function(){return this.config.enabled},t.prototype.getServersPool=function(){return this.config.servers},t.prototype.getSupportedExtensions=function(){return this.config.supportedExtensions},t.prototype.cdnizeHTMLString=function(t){var e=this;return t?String(t||"").replace(/ src=('[^']+'|"[^"]+")/,(function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return' src="'+e.getCDNUrl(n[0].substr(1,n[0].length-2))+'"'})):t},t.prototype.getCDNUrl=function(t){if(!this.isEnabled()||!t||"string"!=typeof t)return t;var e,r=n.URLParser.parseURL(t);if(!r)return t;if(!(e=/\.([a-z0-9_\-]+)$/i.exec(r.pathname)))return t;var o=e[1].toLowerCase();return-1===this.getSupportedExtensions().indexOf(o)||r.hostname!==window.location.hostname?t:(r.protocol=window.location.protocol,r.hostname=this.getSameHostnameForPath(r.pathname),r.port=window.location.port,null===r.hostname?t:n.URLParser.createURL(r))},t.prototype.loadConfigFromDOM=function(){var t;try{var e=document.querySelector('script[type="application/json"]#cdn-settings');t=e?JSON.parse(e.textContent):{enabled:!1,servers:null,supportedExtensions:null,groups:null}}catch(e){t={enabled:!1,servers:null,supportedExtensions:null,groups:null}}t&&t instanceof Object||(t={enabled:!1,servers:[],supportedExtensions:[],groups:null}),t.enabled=t.enabled||!1,t.servers=t.servers||[],t.supportedExtensions=t.supportedExtensions||[],null!==t.groups&&Array.isArray(t.groups)&&(0===t.groups.length?t.groups=null:t.groups=t.groups.map((function(t){return new o({name:t.name,urlRewritePaths:t.urlRewritePaths.map((function(t){return new RegExp(t)})),servers:t.servers})}))),this.config=t},t.prototype.getSameHostnameForPath=function(t){var e,n=this.getServersPool(),r=t.toLowerCase();if(this.config.groups&&this.config.groups.length){e=null;for(var o=0,i=this.config.groups.length;o<i;o++)if(this.config.groups[o].matchPath(t)){e=this.config.groups[o];break}null!==e&&(n=e.getServers())}else console.warn("for url "+JSON.stringify(t)+", no server group has been elected");if(!n||0===n.length)return null;var s=0;for(o=0,i=r.length;o<i;o++)s+=r.charCodeAt(o);return n[s%n.length]},t}()}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(39),n(145),n(24),n(113),n(45),n(59)],void 0===(o=function(t,e,n,r,o,i,a,u){Object.defineProperty(e,"__esModule",{value:!0});var l=function(t){function e(){var e=t.call(this)||this;return e.setClass("ui ui-ribbon-group-body"),e}return s(e,t),e}(n.ContainerAbstract),c=function(t){function e(){var e=t.call(this)||this;e.addClass("ui ui-ribbon-group-icon"),e.iconDOMNode=document.createElement("div"),e.expanderDOMNode=document.createElement("div"),e.iconDOMNode.className="icon",e.expanderDOMNode.className="expander";var n=document.createElement("span");return n.className="vfb vfb-caret-down",e.expanderDOMNode.appendChild(n),e.root.appendChild(e.iconDOMNode),e.root.appendChild(e.expanderDOMNode),e}return s(e,t),e.prototype.setIcon=function(t){for(;this.iconDOMNode.firstChild;)this.iconDOMNode.removeChild(this.iconDOMNode.firstChild);if(t){var e=document.createElement("span");e.className="vfb vfb-"+t,this.iconDOMNode.appendChild(e)}return this},e}(i.Clickable);e.RibbonGroupIcon=c;var p=function(t){function e(){var e=t.call(this)||this;return e.minWidth=null,e.expanded=!0,e.opened=!1,e.isConstructed=!1,e.collapsePriority=50,e.setClass("ui ui-ribbon-group"),e.caption=new r.TextNode,e.layout=new o.Layout(o.LayoutDirection.VERTICAL),e.body=new l,e.icon=new c,e.append(e.layout),e.layout.append(e.icon),e.layout.append(e.body),e.layout.append(e.caption),e.isConstructed=!0,e.icon.on("click",(function(){e.setOpened(!e.isOpened())})),e.onBodyMouseDownEventListener=function(t){return e.closeOpenedRibbonOverlayOnClickOutsideRibbon(t)},e.onClickInsideRibbonEventListener=function(t,n,r){e.closeOpenedRibbonOverlayOnClickInsideRibbon(t,n,r)},e}return s(e,t),e.prototype.setCollapsePriority=function(t){return this.collapsePriority=~~t,this},e.prototype.getCollapsePriority=function(){return this.collapsePriority},e.prototype.setCaption=function(t){return this.caption.setText(t),this},e.prototype.append=function(e){return this.isConstructed?(this.body.append(e),this):t.prototype.append.call(this,e)},e.prototype.remove=function(t){return this.body.remove(t),this},e.prototype.getMinWidth=function(){return this.minWidth},e.prototype.setMinWidth=function(t){return this.minWidth=t,this},e.prototype.getActualWidth=function(){return this.expanded?this.minWidth:86},e.prototype.setExpanded=function(t){return t===this.expanded||(this.expanded=t,this.expanded?this.removeClass("collapsed"):this.addClass("collapsed"),this.setOpened(!1)),this},e.prototype.isExpanded=function(){return this.expanded},e.prototype.setIcon=function(t){return this.icon.setIcon(t),this},e.prototype.isOpened=function(){return this.opened},e.prototype.setOpened=function(t){var e=this;this.opened=t;var n=this.getFirstParent(a.RibbonMenu);if(this.body.getRoot().style.width="",t){if(null!==this.minWidth){this.body.getRoot().style.width=this.getMinWidth()-8+"px";var r=this.icon.getRoot().getBoundingClientRect(),o=Math.max(document.documentElement.clientWidth,window.innerWidth||0);r.left+this.minWidth<o?this.body.getRoot().style.left="10px":r.left+r.width-this.minWidth>=0?this.body.getRoot().style.left=r.width-this.minWidth+26+"px":this.body.getRoot().style.left=o-r.left-this.minWidth+20+"px"}else this.body.getRoot().style.left="0";this.addClass("opened"),document.documentElement.addEventListener("mousedown",this.onBodyMouseDownEventListener,!0),n&&setTimeout((function(){n.on("click",e.onClickInsideRibbonEventListener),n.on("change",e.onClickInsideRibbonEventListener)}),10)}else this.body.getRoot().style.left="",this.removeClass("opened"),document.documentElement.removeEventListener("mousedown",this.onBodyMouseDownEventListener,!0),n&&(n.off("click",this.onClickInsideRibbonEventListener),n.off("change",this.onClickInsideRibbonEventListener));return this},e.prototype.closeOpenedRibbonOverlayOnClickOutsideRibbon=function(t){for(var e=t.srcElement||t.target,n=!1;e!==document.documentElement;){if(e===this.body.getRoot()){n=!0;break}e=e.$__REAL_PARENT_NODE&&e.$__REAL_PARENT_NODE instanceof Node?e.$__REAL_PARENT_NODE:e.parentNode}n||this.setOpened(!1)},e.prototype.closeOpenedRibbonOverlayOnClickInsideRibbon=function(t,e,n){t&&t instanceof u.TextField||this.setOpened(!1)},e}(n.ContainerAbstract);e.RibbonGroup=p;var d=function(t){function e(){var e=t.call(this)||this;return e.setClass("ui ui-ribbon-group-proxy"),e}return s(e,t),e.prototype.getRibbon=function(){return this.ribbon||null},e.prototype.setRibbon=function(t){if(t!==this.ribbon){for(;this.children.length;)this.remove(this.children[0]);this.ribbon=t,t&&this.append(t);var e=this.getFirstParent(a.RibbonMenu);return e&&e.resize(),this}},e.prototype.getCollapsePriority=function(){return this.ribbon?this.ribbon.getCollapsePriority():50},e.prototype.getActualWidth=function(){return this.ribbon?this.ribbon.getActualWidth():0},e.prototype.getMinWidth=function(){return this.ribbon?this.ribbon.getMinWidth():0},e.prototype.isExpanded=function(){return!!this.ribbon&&this.ribbon.isExpanded()},e.prototype.setExpanded=function(t){return this.ribbon&&this.ribbon.setExpanded(t),this},e.prototype.isOpened=function(){return!!this.ribbon&&this.ribbon.isOpened()},e.prototype.setOpened=function(t){return this.ribbon&&this.ribbon.setOpened(t),this},e}(n.ContainerAbstract);e.RibbonGroupProxy=d}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(23),n(181),n(40),n(45),n(52)],void 0===(o=function(t,e,n,r,o,i,a){Object.defineProperty(e,"__esModule",{value:!0});var u=function(t){function e(){var e=t.call(this)||this;return e.expanded=!1,e.setClass("ui ui-dropdown"),e.valueRenderer=document.createElement("div"),e.valueRenderer.className="value",e.expanderButton=document.createElement("div"),e.expanderButton.className="expander",e.expanderButton.appendChild(document.createElement("span")).className="icon vfb vfb-caret-down",e.root.appendChild(e.valueRenderer),e.root.appendChild(e.expanderButton),e.root.tabIndex=0,e.list=new r.List,e.list.getRoot().$__REAL_PARENT_NODE=e.root,e.list.addClass("dropdown-list"),e.expanderButton.addEventListener("click",(function(){e.setExpanded(!0)}),!1),e.valueRenderer.addEventListener("click",(function(){e.setExpanded(!0)}),!1),e.list.on("blur",(function(){e.setExpanded(!1)})),e.list.on("change",(function(){var t=e.list.getValue();e.setValue(t),e.setExpanded(!1),e.onChanged()})),e}return s(e,t),e.prototype.add=function(t){return this.list.append(t),this},e.prototype.onBeforeOpen=function(){},e.prototype.onClosed=function(){},e.prototype.setExpanded=function(t){if(t===this.expanded)return this;if(this.expanded=!!t,this.expanded){this.addClass("opened"),this.onBeforeOpen();var e=this.root.getBoundingClientRect(),n=Math.round(e.left),r=Math.round(e.top),o=Math.round(e.width),i=Math.round(e.height),s=Math.max(document.documentElement.clientHeight,window.innerHeight||0),a=r-this.list.getHeight(),u=void 0;u=r+i+this.list.getHeight()<=s?r+i:a>=0?a:r+i,document.body.appendChild(this.list.getRoot()),this.list.getRoot().style.left=n+"px",this.list.getRoot().style.top=u+"px",null===this.list.getWidth()?this.list.getRoot().style.width=o+"px":this.list.getRoot().style.width=Math.max(this.list.getWidth(),o)+"px",this.list.setValue(this.getValue()),this.list.focus()}else this.removeClass("opened"),this.list.getRoot().parentNode&&this.list.getRoot().parentNode.removeChild(this.list.getRoot()),this.onClosed();return this},e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t){return this.value=t,this.render(t),this},e.prototype.renderValue=function(t){this.valueRenderer.textContent=this.valueFormatter?this.valueFormatter(t):String(t||"")},e.prototype.render=function(t){for(;this.valueRenderer.firstChild;)this.valueRenderer.removeChild(this.valueRenderer.firstChild);if(void 0===t){var e=this.list.getSelectedItem();e&&(e instanceof a.TextListItem?this.renderValue(e.getText()):e instanceof o.ValueListItem&&this.renderValue(e.getValue()))}else this.renderValue(t)},e.prototype.onChanged=function(){this.trigger("change");var t=this.getFirstParent(i.RibbonMenu);t&&t.trigger("change",this,this.getValue())},e.prototype.setValueFormatter=function(t){return this.valueFormatter=t,this},e}(n.NodeAbstract);e.Dropdown=u}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r;void 0===(r=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.document=t,this.children=[],this.initProperties()}return t.prototype.get=function(t){return void 0===this.properties[t]?void 0:this.properties[t]},t.prototype.set=function(t,e){return this.properties[t]=e,this},t.prototype.appendChild=function(t){return t&&this.children.push(t),t},t.prototype.withChild=function(t){return this.appendChild(t),this},t.prototype.getDocument=function(){return this.document},t.prototype.serialize=function(){var t={type:this.getType(),properties:this.properties};return this.children&&this.children.length&&(t.children=this.children.map((function(t){return t.serialize()}))),t},t.prototype.getChildren=function(){return this.children},t.prototype.render=function(t,e,n,r){},t.prototype.flatten=function(){var t=[this];return this.children&&this.children.length&&this.children.forEach((function(e){t=t.concat(e.flatten())})),t},t.prototype.isInput=function(){return!1},t.prototype.enumerateNames=function(){return[]},t.prototype.writePlaceholders=function(t){},t.prototype.unserialize=function(t){var e=this;if(t.type!==this.getType())throw new Error("Wrong entity type");return this.properties=t.properties,t.children&&t.children.forEach((function(t){var n=e.getDocument().create(t.type).unserialize(t);e.appendChild(n)})),this},t}();e.PDFNode=n}.apply(e,[n,e]))||(t.exports=r)},function(t,e,n){"use strict";var r,o;r=[n,e,n(62),n(16)],void 0===(o=function(t,e,n,r){Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.getIconNamesUsedByFileExtensions=function(){var e=[];for(var n in t.EXT_MAPPINGS)if(t.EXT_MAPPINGS.hasOwnProperty(n)){var r=t.EXT_MAPPINGS[n];e.indexOf(r)>-1&&e.push(r)}return e},t.getFileIconFromFileNameOrURL=function(e){var n=/^(.*\/)?([^\/]+)\.([a-z0-9]+)(\?.*|#.*|$)?$/.exec(String(e).toLowerCase()),r=null;return n?(r=n[3],t.EXT_MAPPINGS[r]||"file-ext-generic"):"file-ext-generic"},t.getFileNameFromABCSubmitStorageFileURL=function(t){if(t){var e=/^(http:|https:)?\/\/([^/:@\r\n]+)(:[\d]+)?\/static\/storage\/[\d]+\/[\d]+\/[\d]+-([^\/#?]+)$/.exec(t);return e?decodeURIComponent(e[4]).replace(/\+/g," "):null}return null},t.isFileType=function(e,n){if(!e)return!1;if(!n)return!1;if(!t.FILE_TYPES[n])return!1;var r="string"==typeof e?e:e instanceof File?e.name:"",o=/\.([^.]+)$/.exec(r);return!!o&&t.FILE_TYPES[n].indexOf(o[1])>-1},t.formatFileSize=function(t){var e=Number(t),r="b";switch(!0){case 0===e:return"N/A";case Math.abs(e)>=this.PB:e/=this.PB,r="PB";break;case Math.abs(e)>=this.TB:e/=this.TB,r="TB";break;case Math.abs(e)>=this.GB:e/=this.GB,r="GB";break;case Math.abs(e)>=this.MB:e/=this.MB,r="MB";break;case Math.abs(e)>=this.KB:default:e/=this.KB,r="KB"}return n.NumberUtils.formatFloat(e,2)+" "+r},t.download=function(e,n,r){var o,i,s=window,a="application/octet-stream",u=r||a,l=e,c=!n&&!r&&l,p=document.createElement("a"),d=function(t){return String(t)},h=s.Blob||s.MozBlob||s.WebKitBlob||d,f=n||"download";h=h.call?h.bind(s):Blob;var g=function(t,e){if("download"in p)return p.href=t,p.setAttribute("download",f),p.className="download-js-link",p.innerHTML="downloading...",p.style.display="none",document.body.appendChild(p),setTimeout((function(){p.click(),document.body.removeChild(p),!0===e&&setTimeout((function(){s.URL.revokeObjectURL(p.href)}),250)}),66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-+]+)/,a)),window.open(t)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=t),!0;var n=document.createElement("iframe");document.body.appendChild(n),!e&&/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-+]+)/,a)),n.src=t,setTimeout((function(){document.body.removeChild(n)}),333)},m=function(t){for(var e=t.split(/[:;,]/),n=e[1],r=("base64"==e[2]?atob:decodeURIComponent)(e.pop()),o=r.length,i=0,s=new Uint8Array(o);i<o;++i)s[i]=r.charCodeAt(i);return new h([s],{type:n})};if("true"===String(this)&&(u=(l=[l,u])[0],l=l[1]),c&&c.length<2048&&(f=c.split("/").pop().split("?")[0],p.href=c,-1!==p.href.indexOf(c))){var y=new XMLHttpRequest;return y.open("GET",c,!0),y.responseType="blob",y.onload=function(e){t.download(e.target.response,f,a)},setTimeout((function(){y.send()}),0),y}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(l)){if(!(l.length>2096103.424&&h!==d))return navigator.msSaveBlob?navigator.msSaveBlob(m(l),f):g(l);u=(l=m(l)).type||a}else if(/([\x80-\xff])/.test(l)){for(var v=0,b=new Uint8Array(l.length),C=b.length;v<C;++v)b[v]=l.charCodeAt(v);l=new h([b],{type:u})}if(o=l instanceof h?l:new h([l],{type:u}),navigator.msSaveBlob)return navigator.msSaveBlob(o,f);if(s.URL)g(s.URL.createObjectURL(o),!0);else{if("string"==typeof o||o.constructor===d)try{return g("data:"+u+";base64,"+s.btoa(o))}catch(t){return g("data:"+u+","+encodeURIComponent(o))}(i=new FileReader).onload=function(){g(this.result)},i.readAsDataURL(o)}return!0},t.getMileFileTypeFromFileName=function(t){var e=/\.([^.]+)$/.exec(String(t||".bin").toLowerCase());if(!e)return"application/octet-stream";switch(e[1]){case"png":return"image/png";case"jpg":case"jpeg":return"image/jpg";case"gif":return"image/gif";case"json":return"application/json";case"csv":return"text/csv";default:return"application/octet-stream"}},t.createBlobFromBase64Data=function(t,e){try{for(var n=atob(t),r=n.length,o=new Array(r),i=0;i<r;i++)o[i]=n.charCodeAt(i);var s=new Uint8Array(o);return new Blob([s],{type:e})}catch(t){return null}},t.getFileNameFromURL=function(t){var e,n=r.URLParser.parseURL(t);return(e=/[^\/]+$/.exec(n.pathname))?decodeURIComponent(e[0]).replace(/\+/," "):null},t.KB=1024,t.MB=1048576,t.GB=1073741824,t.TB=1099511627776,t.PB=0x4000000000000,t.FILE_TYPES={pictures:["tiff","jpeg","jpg","bmp","raw","pdf","tga","ani","ico","png","svg","oxps","gif"],documents:["doc","docx","odt","pdf","rtf","tex","wks","wps","wpd","txt","xls","xlsx","ppt","pptx"],video:["avi","flv","wmv","mov","mp4","mkv","mpg","mp4","mpeg"],audio:["wav","mp3","wma","vorbis","aac","flac"],archives:["zip","rar","arj","tar","gz"],text:["txt","ini"]},t.EXT_MAPPINGS={tiff:"file-ext-picture",jpeg:"file-ext-picture",jpg:"file-ext-picture",bmp:"file-ext-picture",raw:"file-ext-picture",tga:"file-ext-picture",ani:"file-ext-picture",ico:"file-ext-picture",png:"file-ext-picture",gif:"file-ext-picture",svg:"file-ext-picture",oxps:"file-ext-picture",pdf:"file-ext-pdf",doc:"file-ext-word",docx:"file-ext-word",odt:"file-ext-word",rtf:"file-ext-word",tex:"file-ext-document",wks:"file-ext-document",wps:"file-ext-document",wpd:"file-ext-document",txt:"file-ext-text",xls:"file-ext-excel",xlsx:"file-ext-excel",ppt:"file-ext-document",pptx:"file-ext-document",avi:"file-ext-video",flv:"file-ext-video",wmv:"file-ext-video",mov:"file-ext-video",mkv:"file-ext-video",mpg:"file-ext-video",mp4:"file-ext-video",mpeg:"file-ext-video",wav:"file-ext-audio",mp3:"file-ext-audio",wma:"file-ext-audio",vorbis:"file-ext-audio",aac:"file-ext-audio",flac:"file-ext-audio",rar:"file-ext-archive",zip:"file-ext-archive",arj:"file-ext-archive",tar:"file-ext-archive",gz:"file-ext-archive",ini:"file-ext-text"},t}();e.FileUtils=o}.apply(e,r))||(t.exports=o)},,function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(3),n(62),n(74),n(227),n(153),n(228),n(229),n(154),n(12)],void 0===(o=function(t,e,n,r,o,i,a,u,l,c,p){var d;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.PRODUCT="product",t.DISCOUNT_OR_TAX="discount",t.SHIPPING="shipping"}(d=e.EInvoiceItemType||(e.EInvoiceItemType={})),function(t){t[t.FIXED=0]="FIXED",t[t.PERCENTUAL=1]="PERCENTUAL"}(e.EInvoiceItemValueType||(e.EInvoiceItemValueType={}));var h=function(t){function e(e){var n=t.call(this,e)||this;return n.type=d.DISCOUNT_OR_TAX,n}return s(e,t),e.prototype.getComputedUnitPrice=function(){return this.getComputedValue()},e}(o.InvoiceRow);e.InvoiceRowDiscount=h;var f=function(t){function e(e){var n=t.call(this,e)||this;return n.type=d.SHIPPING,n}return s(e,t),e.prototype.getComputedUnitPrice=function(){return this.getComputedValue()},e}(o.InvoiceRow);e.InvoiceRowShipping=f;var g=function(t){function e(){var e=t.call(this)||this;return e.rows=[],e.computedInvoice=null,e.computeDelayed=p.Debouncer.create((function(){e.compute()}),0),e.computeDelayedLong=p.Debouncer.create((function(){e.compute()}),100),e}return s(e,t),e.prototype.setScriptingEnvironment=function(t){return this.scriptingEnvironment=t,this},e.prototype.setDocument=function(t){return this.document=t,this},e.prototype.addRow=function(t){return this.rows.push(t),this},e.prototype.removeRow=function(t){var e;if((e=this.rows.indexOf(t))>-1)return this.rows.splice(e,1),this;throw new Error("Row not found in invoice!")},e.prototype.getRowAt=function(t){return this.rows[t]||null},e.prototype.getCurrency=function(){return this.currency||"USD"},e.prototype.setCurrency=function(t){return this.currency=t,this.trigger(e.EVENT_CHANGE),this},e.prototype.serialize=function(){for(var t=[],e=0,n=this.rows.length;e<n;e++)t.push(this.rows[e].serialize());var r={rows:t&&t.length?t:null,currency:this.currency||null};return r.rows||r.currency?r:null},e.prototype.unserialize=function(t){if(null===t)return this.rows=[],this.currency=void 0,this;if(!t)throw new Error("Failed to unserialize invoice: Object expected!");this.setEventEmitterState(!1),this.rows=[];try{if(null!==t.rows){if(!Array.isArray(t.rows))throw new Error("Failed to unserialize invoice: 'rows' property is expected to be array|null");for(var e=0,n=t.rows.length;e<n;e++)this.rows.push(this.createInvoiceRow(t.rows[e]))}this.currency=t.currency}catch(t){throw this.setEventEmitterState(!0),t}return this.setEventEmitterState(!0),this},e.prototype.createInvoiceRow=function(t){var e;if(!t)throw new Error("Failed to unserialize invoice: Invalid argument!");switch(t.type){case d.PRODUCT:(e=new i.InvoiceRowStaticProduct(this)).setComputedValue(void 0),e.setComputedQuantity(void 0),e.setItemName(t.name),e.setValueFormula(t.valueFormula),e.setQuantityFormula(t.quantityFormula),e.setValueType(t.valueType);break;case d.SHIPPING:(e=new f(this)).setComputedValue(void 0),e.setItemName(t.name),e.setValueFormula(t.valueFormula),e.setValueType(t.valueType);break;case d.DISCOUNT_OR_TAX:(e=new h(this)).setComputedValue(void 0),e.setItemName(t.name),e.setValueFormula(t.valueFormula),e.setValueType(t.valueType);break;default:throw new Error("Failed to unserialize invoice: Unknown invoice row type!")}return e},e.prototype.compute=function(){try{this.total=0,this.subTotal=0,this.computedInvoice={currency:this.currency,items:[],subtotal:0,total:0,objectType:"ComputedInvoice"},this.currency||(this.currency="USD");var t=0,n=0,o=void 0;o=this.subTotal=0,this.scriptingEnvironment&&this.scriptingEnvironment.registerPrivateIdentifier("$_SHOPPING_CART_PRODUCT_ROWS",0).registerPrivateIdentifier("$_SHOPPING_CART_PRODUCT_QUANTITIES",0).registerPrivateIdentifier("$_SHOPPING_CART_PRODUCTS_TOTAL",0);for(var i=0,s=this.rows.length;i<s;i++)this.rows[i].compileExpressions(),this.rows[i].getItemType()===d.PRODUCT&&(this.rows[i].getValueExpression()&&this.rows[i].setComputedValue(this.rows[i].getValueExpression().compute(this.scriptingEnvironment)),this.rows[i].getItemType()===d.PRODUCT&&this.rows[i].getQuantityExpression()&&this.rows[i].setComputedQuantity(this.rows[i].getQuantityExpression().compute(this.scriptingEnvironment)),(o=this.rows[i].incrementSubtotal(this.subTotal))-this.subTotal==0&&null!==o||(t++,n+=this.rows[i].getComputedQuantity(),null!==o&&(this.subTotal=o)));this.scriptingEnvironment&&this.scriptingEnvironment.registerPrivateIdentifier("$_SHOPPING_CART_PRODUCT_ROWS",t).registerPrivateIdentifier("$_SHOPPING_CART_PRODUCT_QUANTITIES",parseFloat(n.toFixed(2))).registerPrivateIdentifier("$_SHOPPING_CART_PRODUCTS_TOTAL",parseFloat(this.subTotal.toFixed(2)));for(i=0,s=this.rows.length;i<s;i++)this.rows[i].getItemType()!==d.PRODUCT&&this.rows[i].getValueExpression()&&this.rows[i].setComputedValue(this.rows[i].getValueExpression().compute(this.scriptingEnvironment));o=this.subTotal=0;for(i=0,s=this.rows.length;i<s;i++)if(this.rows[i].getItemType()===d.PRODUCT&&((o=this.rows[i].incrementSubtotal(this.subTotal))-this.subTotal!=0||null===o)){var a={value:r.NumberUtils.castNumberAsCurrency(null===o?0:o-this.subTotal),unitPrice:r.NumberUtils.castNumberAsCurrency(this.rows[i].getComputedUnitPrice()),quantity:this.rows[i].getComputedQuantity(),type:d.PRODUCT,name:String(this.rows[i].getItemName()||null)+String(this.rows[i].getChoice()?" ("+this.rows[i].getChoice()+")":"")||null,choice:this.rows[i].getChoice()||null,productId:this.rows[i].getProductControlId(),shopItemId:this.rows[i].getShopItemId()};this.computedInvoice.items.push(a),t++,null!==o&&(this.subTotal=o)}for(i=0,s=this.rows.length;i<s;i++)this.rows[i].getItemType()===d.DISCOUNT_OR_TAX&&this.rows[i].getComputedValue()<0&&(o=this.rows[i].incrementSubtotal(this.subTotal))-this.subTotal!=0&&(this.computedInvoice.items.push({value:r.NumberUtils.castNumberAsCurrency(o-this.subTotal),type:d.DISCOUNT_OR_TAX,name:this.rows[i].getItemName()||null}),this.subTotal=o);var u=this.total=this.subTotal;for(i=0,s=this.rows.length;i<s;i++)this.rows[i].getItemType()===d.SHIPPING&&(u=this.rows[i].incrementTotal(this.subTotal,this.total))-this.total!=0&&(this.computedInvoice.items.push({value:r.NumberUtils.castNumberAsCurrency(u-this.total),type:d.SHIPPING,name:this.rows[i].getItemName()||null}),this.total=u);for(i=0,s=this.rows.length;i<s;i++)this.rows[i].getItemType()===d.DISCOUNT_OR_TAX&&this.rows[i].getComputedValue()>0&&(u=this.rows[i].incrementTotal(this.subTotal,this.total))-this.total!=0&&(this.computedInvoice.items.push({value:r.NumberUtils.castNumberAsCurrency(u-this.total),type:d.DISCOUNT_OR_TAX,name:this.rows[i].getItemName()||null}),this.total=u);return this.computedInvoice.currency=this.currency,this.computedInvoice.total=this.total,this.computedInvoice.subtotal=this.subTotal,this.computedInvoice.total&&(this.computedInvoice.total=parseFloat(this.computedInvoice.total.toFixed(2))),this.computedInvoice.subtotal&&(this.computedInvoice.subtotal=parseFloat(this.computedInvoice.subtotal.toFixed(2))),this.trigger(e.EVENT_COMPUTE),this.computedInvoice}catch(t){return console.warn("Cannot compute invoice!"),console.error(t),this.lastComputeError=t,null}},e.prototype.getTotal=function(){return this.total},e.prototype.getSubtotal=function(){return this.subTotal},e.prototype.getComputedInvoice=function(){return this.computedInvoice},e.prototype.getStatistics=function(){for(var t={products:0,shippings:0,discounts:0},e=0,n=this.rows.length;e<n;e++)switch(this.rows[e].getItemType()){case d.PRODUCT:t.products++;break;case d.SHIPPING:t.shippings++;break;case d.DISCOUNT_OR_TAX:t.discounts++}return t},e.prototype.getLastError=function(){return this.lastComputeError},e.prototype.removeProductRowByProductIdAndChoice=function(t,e){for(var n=this.rows.length-1;n>-1;n--)this.rows[n].getProductControlId()===t&&this.rows[n].getChoice()===e&&(this.rows[n].onRemovedFromInvoice(),this.rows.splice(n,1))},e.prototype.getProductPictureUrl=function(t){if(!t)return null;if(t.type!==d.PRODUCT)return null;if(!t.productId)return null;for(var e=0,n=this.rows.length;e<n;e++)if(this.rows[e].getItemType()===d.PRODUCT&&this.rows[e].getProductControlId()===t.productId)switch(!0){case this.rows[e]instanceof c.InvoiceRowDynamicJVMProduct:case this.rows[e]instanceof a.InvoiceRowDynamicProduct:return this.document.isEditMode()?null:this.rows[e].getProductPictureURL();case this.rows[e]instanceof u.InvoiceRowDynamicShopProduct:if(this.document.isEditMode())return null;if(this.rows[e].getShopItemId()===t.shopItemId)return this.rows[e].getProductPictureUrl();break;case this.rows[e]instanceof l.InvoiceRowDynamicCalendarEvent:return this.rows[e].getProductPictureURL()}return null},e.prototype.getProductUnitType=function(t){if(!t)return null;if(t.type!==d.PRODUCT)return null;if(!t.productId)return null;for(var e=0,n=this.rows.length;e<n;e++)if(this.rows[e].getItemType()===d.PRODUCT&&this.rows[e].getProductControlId()===t.productId)switch(!0){case this.rows[e]instanceof a.InvoiceRowDynamicProduct:return this.document.isEditMode()?null:this.rows[e].getProductUnitType();case this.rows[e]instanceof u.InvoiceRowDynamicShopProduct:if(this.document.isEditMode())return null;if(this.rows[e].getShopItemId()===t.shopItemId)return this.rows[e].getProductUnitType();break;case this.rows[e]instanceof l.InvoiceRowDynamicCalendarEvent:return this.rows[e].getProductUnitType()}return null},e.prototype.getRows=function(){return this.rows.slice(0)},e.prototype.getScriptingEnvironment=function(){return this.scriptingEnvironment},e.EVENT_CHANGE="change",e.EVENT_COMPUTE="compute",e}(n.EventEmitter);e.Invoice=g}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(113)],void 0===(o=function(t,e,n){var r;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.TINNY="tinny",t.LARGE="large"}(r||(r={}));var o=function(t){function e(){var e=t.call(this)||this;return e.setClass("ui ui-ribbon-button"),e}return s(e,t),e.prototype.setIcon=function(t){return this.icon=t,this.render(),this},e.prototype.setWidth=function(t){return this.root.style.width=t||"",this},e.prototype.setCaption=function(t){return this.caption=t,this.caption?this.addClass("has-text"):this.removeClass("has-text"),this.render(),this},e.prototype.setSize=function(t){switch(this.size=t,t){case r.TINNY:this.removeClass(r.LARGE).addClass(r.TINNY);break;case r.LARGE:this.removeClass(r.TINNY).addClass(r.LARGE);break;default:this.removeClass(r.LARGE).removeClass(r.TINNY)}return this},e.prototype.render=function(){for(;this.root.firstChild;)this.root.removeChild(this.root.firstChild);if(this.icon&&(this.root.appendChild(document.createElement("span")).className="icon vfb vfb-"+this.icon),this.caption){var t=document.createElement("span");t.className="caption",this.root.appendChild(t).textContent=this.caption}},e.SIZE_TINNY=r.TINNY,e.SIZE_LARGE=r.LARGE,e}(n.Clickable);e.Button=o}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(23),n(112)],void 0===(o=function(t,e,n,r){Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){var e=t.call(this)||this;return e.children=[],e}return s(e,t),e.prototype.getNodeType=function(){return r.UINodeType.CONTAINER},e.prototype.append=function(t){return null===t||(this.children.push(t),this.root.appendChild(t.getRoot()),t.setParent(this)),this},e.prototype.remove=function(t){var e;return(e=this.children.indexOf(t))>-1&&this.children.splice(e,1),t.getRoot().parentNode===this.root&&this.root.removeChild(t.getRoot()),this},e.prototype.getChildren=function(){return this.children},e.prototype.getChildById=function(t){for(var e=0,n=this.children.length;e<n;e++){if(this.children[e].getId()===t)return this.children[e];if(this.children[e].getNodeType()===r.UINodeType.CONTAINER){var o=this.children[e].getChildById(t);if(null!==o)return o}}return null},e.prototype.getChildByRoot=function(t){for(var e=0,n=this.children.length;e<n;e++){if(this.children[e].getRoot()===t)return this.children[e];if(this.children[e].getNodeType()===r.UINodeType.CONTAINER){var o=this.children[e].getChildByRoot(t);if(null!==o)return o}}return null},e}(n.NodeAbstract);e.ContainerAbstract=o}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(212)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){var e=t.call(this)||this;return e.value=null,e}return s(e,t),e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t){return this.value=t,this},e.prototype.valueEquals=function(t){return this.value===t},e}(n.ListItem);e.ValueListItem=r}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r;void 0===(r=function(t,e){var n,r,o,i;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.ANDROID=0]="ANDROID",t[t.IOS=1]="IOS",t[t.MAC=2]="MAC",t[t.WINDOWS_MOBILE=3]="WINDOWS_MOBILE",t[t.WINDOWS=4]="WINDOWS",t[t.LINUX=5]="LINUX",t[t.UNIX=6]="UNIX",t[t.OTHER=7]="OTHER"}(n=e.E_OS_TYPE||(e.E_OS_TYPE={})),function(t){t[t.WIN_95=0]="WIN_95",t[t.WIN_98=1]="WIN_98",t[t.WIN_2000=2]="WIN_2000",t[t.WIN_NT=3]="WIN_NT",t[t.WIN_ME=4]="WIN_ME",t[t.WIN_XP=5]="WIN_XP",t[t.WIN_SERVER_2003=6]="WIN_SERVER_2003",t[t.WIN_VISTA=7]="WIN_VISTA",t[t.WIN_7=8]="WIN_7",t[t.WIN_8=9]="WIN_8",t[t.WIN_10=10]="WIN_10",t[t.WIN_OTHER=11]="WIN_OTHER",t[t.UNKNOWN=12]="UNKNOWN"}(r||(r={})),function(t){t.CHROME="chrome",t.FIREFOX="firefox",t.MSIE="msie",t.EDGE="edge",t.SAFARI="safari",t.OPERA="opera",t.UNKNOWN="unknown"}(o=e.E_BROWSER_TYPE||(e.E_BROWSER_TYPE={})),function(t){t[t.E_NONE=0]="E_NONE",t[t.E_SYNTAX_ERROR=1]="E_SYNTAX_ERROR",t[t.E_BAD_OS=2]="E_BAD_OS",t[t.E_MOBILE_APP=3]="E_MOBILE_APP",t[t.E_DESKTOP_APP=4]="E_DESKTOP_APP",t[t.E_BAD_CPU_CLASS=5]="E_BAD_CPU_CLASS",t[t.E_BROWSER_VERSION=6]="E_BROWSER_VERSION",t[t.E_BROWSER_TYPE=7]="E_BROWSER_TYPE",t[t.E_API_MISSING=8]="E_API_MISSING",t[t.E_UNKNOWN_ERROR=9]="E_UNKNOWN_ERROR"}(i||(i={}));var s=function(){};e.BrowserNavigatorInterface=s;var a=function(){function t(){}return t.winVersionCompare=function(t,e){var n=this.WIN_VERSIONS_RELEASE_ORDER.indexOf(t);return this.WIN_VERSIONS_RELEASE_ORDER.indexOf(e)-n},t.getNavigator=function(){return this.navigator||window.navigator},Object.defineProperty(t,"isIPad",{get:function(){return!!this.getNavigator().userAgent.match(/iPad/i)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isIPod",{get:function(){return!!this.getNavigator().userAgent.match(/iPod/i)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isIPhone",{get:function(){return!!this.getNavigator().userAgent.match(/iPhone/i)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isAndroid",{get:function(){return!!this.getNavigator().userAgent.match(/Android/i)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isWindowsPhone",{get:function(){return!!this.getNavigator().userAgent.match(/(Windows (Phone )?8.1|Windows NT 6.3|Windows Phone [\d.]+)/i)&&this.getNavigator().userAgent.toLowerCase().indexOf("mobile")>-1},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cpuClass",{get:function(){var t,e=this.getNavigator().userAgent,n=this.CPU_64_CLASSES.length;for(t=0;t<n;t++)if(e.indexOf(this.CPU_64_CLASSES[t])>-1)return 64;return 32},enumerable:!0,configurable:!0}),Object.defineProperty(t,"operatingSystem",{get:function(){return this.isWindowsPhone?n.WINDOWS_MOBILE:this.isAndroid?n.ANDROID:this.isIPad||this.isIPhone||this.isIPod?n.IOS:this.getNavigator().userAgent.indexOf("Mac")>-1?n.MAC:this.getNavigator().userAgent.indexOf("Linux")>-1?n.LINUX:this.getNavigator().userAgent.indexOf("Windows")?n.WINDOWS:this.getNavigator().userAgent.indexOf("X11")>-1?n.UNIX:n.OTHER},enumerable:!0,configurable:!0}),Object.defineProperty(t,"operatingSystemVersion",{get:function(){if(this.operatingSystem!=n.WINDOWS)return r.UNKNOWN;switch(!0){case/(Windows 10\.0|Windows NT 10\.0)/.test(this.getNavigator().userAgent):return r.WIN_10;case/(Windows 8|Windows NT 6\.([23]))/.test(this.getNavigator().userAgent):return r.WIN_8;case/(Windows 7|Windows NT 6\.1)/.test(this.getNavigator().userAgent):return r.WIN_7;case/Windows NT 6\.0/.test(this.getNavigator().userAgent):return r.WIN_VISTA;case/Windows NT 5\.2/.test(this.getNavigator().userAgent):return r.WIN_SERVER_2003;case/(Windows NT 5\.1|Windows XP)/.test(this.getNavigator().userAgent):return r.WIN_XP;case/(Windows NT 5\.0|Windows 2000)/.test(this.getNavigator().userAgent):return r.WIN_2000;case/(Win 9x 4\.90|Windows ME)/.test(this.getNavigator().userAgent):return r.WIN_ME;case/(Windows 98|Win98)/.test(this.getNavigator().userAgent):return r.WIN_98;case/(Windows 95|Win95|Windows_95)/.test(this.getNavigator().userAgent):return r.WIN_95;case/(Windows NT 4\.0|WinNT4\.0|WinNT|Windows NT)/.test(this.getNavigator().userAgent):return r.WIN_NT;default:return r.WIN_OTHER}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"browserType",{get:function(){switch(!0){case!!this.getNavigator().userAgent.match(new RegExp("[\\s]+Edge\\/[\\d]+","i")):return o.EDGE;case this.getNavigator().userAgent.indexOf("Opera")>-1:case this.getNavigator().userAgent.indexOf("OPR")>-1:return o.OPERA;case this.getNavigator().userAgent.indexOf("MSIE")>-1:return o.MSIE;case this.getNavigator().userAgent.indexOf("Chrome")>-1:return o.CHROME;case this.getNavigator().userAgent.indexOf("Safari")>-1:return o.SAFARI;case this.getNavigator().userAgent.indexOf("Firefox")>-1:return o.FIREFOX;case this.getNavigator().userAgent.indexOf("Trident/")>-1:return o.MSIE;default:return o.UNKNOWN}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"browserVersion",{get:function(){var t,e,n,r=this.getNavigator().userAgent,o=""+parseFloat(navigator.appVersion);return(t=r.indexOf("Edge/"))>-1?o=r.substr(t+5):(t=r.indexOf("Opera"))>-1?(o=r.substring(t+6),-1!=(t=r.indexOf("Version"))&&(o=r.substring(t+8))):-1!=(t=r.indexOf("OPR"))?o=r.substring(t+4):-1!=(t=r.indexOf("MSIE"))?o=r.substring(t+5):-1!=(t=r.indexOf("Chrome"))?o=r.substring(t+7):-1!=(t=r.indexOf("Safari"))?(o=r.substring(t+7),-1!=(t=r.indexOf("Version"))&&(o=r.substring(t+8))):-1!=(t=r.indexOf("Firefox"))?o=r.substring(t+8):-1!=r.indexOf("Trident/")?o=r.substring(r.indexOf("rv:")+3):r.lastIndexOf(" ")+1<(t=r.lastIndexOf("/"))&&(o=r.substring(t+1)),-1!=(e=o.indexOf(";"))&&(o=o.substring(0,e)),-1!=(e=o.indexOf(" "))&&(o=o.substring(0,e)),-1!=(e=o.indexOf(")"))&&(o=o.substring(0,e)),n=parseInt(""+o,10),isNaN(n)&&(o=""+parseFloat(this.getNavigator().appVersion)),parseFloat(o)||1},enumerable:!0,configurable:!0}),Object.defineProperty(t,"browserTechnologies",{get:function(){var t,e=[],n=this.APIS_LIST.length;for(t=0;t<n;t++)try{(window[this.APIS_LIST[t]]||window["moz"+this.APIS_LIST[t]]||window["webkit"+this.APIS_LIST[t]]||window["ms"+this.APIS_LIST[t]]||window["o"+this.APIS_LIST[t]])&&e.push(this.APIS_LIST[t].toLowerCase())}catch(t){}var r=this.getNavigator().plugins||[],o=!1,i=0,s=0;for(t=0,n=r.length;t<n;t++)try{if(r[t].description.toString().toLowerCase().indexOf("flash")>-1)o=!0;else if(void 0!==r[t]["application/x-nmpcbrowserplugin"])e.push("nagra");else if(r[t].length)for(i=0,s=r[t].length;i<s;i++)if("application/vnd.rcsrds.secureplayer.pepper.plugin"==r[t][i].type){e.push("nagrapepper");break}}catch(t){}return o&&e.push("flash"),e.join(",")},enumerable:!0,configurable:!0}),t.toString=function(){if(void 0!==this.CACHED_VERSION)return this.CACHED_VERSION;var t="";switch(this.operatingSystemVersion){case r.WIN_95:t+="win95";break;case r.WIN_98:t+="win98";break;case r.WIN_2000:t+="win2k";break;case r.WIN_NT:t+="winnt4";break;case r.WIN_ME:t+="winme";break;case r.WIN_XP:t+="winxp";break;case r.WIN_SERVER_2003:t+="win2k3";break;case r.WIN_VISTA:t+="winvista";break;case r.WIN_7:t+="win7";break;case r.WIN_8:t+="win8";break;case r.WIN_10:t+="win10";break;case r.WIN_OTHER:t+="winother";break;case r.UNKNOWN:switch(this.operatingSystem){case n.ANDROID:t+="android";break;case n.IOS:t+="ios";break;case n.MAC:t+="mac";break;case n.WINDOWS_MOBILE:t+="winmobile";break;case n.WINDOWS:t+="winother";break;case n.LINUX:t+="linux";break;case n.UNIX:t+="unix";break;case n.OTHER:t+="other";break;default:t+="unknown"}break;default:t+="unknown"}switch(this.cpuClass){case 32:t+=" 32";break;case 64:t+=" 64"}switch(/Mobile|mini|Fennec|Android|iP(ad|od|hone)/.test(this.getNavigator().appVersion)?t+=" mobile":t+=" desktop",this.browserType){case o.CHROME:t+=" chrome";break;case o.FIREFOX:t+=" firefox";break;case o.MSIE:t+=" msie";break;case o.EDGE:t+=" edge";break;case o.SAFARI:t+=" safari";break;case o.OPERA:t+=" opera";break;case o.UNKNOWN:t+=" other";break;default:t+=" other"}return this.CACHED_VERSION=t+" "+this.browserVersion.toFixed(2).replace(/[0]+$/g,"").replace(/\.$/,"")+" apis="+this.browserTechnologies},t.explainMissingApis=function(t){if(!t||!t.length)return"An error occurred while detecting your browser capabilities";var e,n=[],r=t.length;for(e=0;e<r;e++)this.API_NAMES[t[e]]?n.push('"'+t[e].toUpperCase()+'" ('+this.API_NAMES[t[e]]+")"):n.push('"'+t[e].toUpperCase()+'"');return n.join(" or ")},t.meetsRequirements=function(t){var e=/^(win((95|98|2k|nt4|me|xp|2k3|vista|7|8|10|other)(\+)?)?|android|ios|mac|winmobile|linux|unix|other|\*) (32|64|\*) (desktop|mobile|\*) (chrome|firefox|msie|edge|opera|safari|other|\*) ([\d.]+(\+)?|\*)( apis=([a-z_,|\d]+))?$/i.exec(String(t||""));if(!e)return"E_SYNTAX_ERROR: Invalid requirement: "+JSON.stringify(t);var n,r,o,i,s,a,u=e[1],l=~~e[5],c=e[6],p=e[7],d=parseFloat(e[8])||-1,h=!!e[4],f=e[8]&&e[8].match(/\+$/)?"gte":"eq",g=e[11]?String(e[11]).split(","):[],m=(e=/^(win((95|98|2k|nt4|me|xp|2k3|vista|7|8|10|other)(\+)?)?|android|ios|mac|winmobile|linux|unix|other) (32|64|\*) (desktop|mobile) (chrome|firefox|msie|edge|opera|safari|other) ([\d.]+) apis=([a-z_,\d]+)$/i.exec(this.toString()))[1],y=~~e[5],v=e[6],b=e[7],C=parseFloat(e[8]),E=/^win/.test(m)&&"mobile"!=v,A=e[9]?String(e[9]).split(","):null;if("*"!=u){if(h&&!E)return"E_BAD_OS: Sorry, you need Windows in order to enjoy this application";if(h){if(u=u.substr(0,u.length-1),this.winVersionCompare(u,m)<0)return"E_BAD_OS:"+u+": Sorry, you need at least "+(this.WIN_VERSIONS_NAMES[u]||"an Unknown Windows ("+u+") version")+", but you have "+(this.WIN_VERSIONS_NAMES[m]||"an Unknown Windows ("+m+") version")+" installed on your PC"}else if(u!=m)switch(u){case"win95":case"win98":case"win2k":case"winnt4":case"winme":case"winxp":case"win2k3":case"winvista":case"win7":case"win8":case"win10":case"winother":return"E_BAD_OS: This application requires the '"+this.WIN_VERSIONS_NAMES[m]+"' operating system in order to run properly.";case"android":return"E_BAD_OS: This application requires the Android operating system in order to run properly.";case"mac":return"E_BAD_OS: This application requires the Mac OS operating system in order to run properly.";case"ios":return"E_BAD_OS: This application requires the IOS operating system in order to run properly.";case"winmobile":return"E_BAD_OS: This application requires the Windows Mobile operating system in order to run properly.";case"linux":return"E_BAD_OS: This application requires the Linux operating system in order to run properly";case"unix":return"E_BAD_OS: This application requires a Unix operating system in order to run properly";case"other":default:return"E_BAD_OS: Your operating system is not compatible with this application"}}if(0!=l&&y!=l)return"E_BAD_CPU_CLASS: This application requires a "+String(l)+"bit CPU in order to run properly, and we detected that you have a "+String(y)+"bit CPU";if("*"!=p&&b!=p)return"E_BAD_BROWSER: Sorry, you need a "+(this.BROWSER_NAMES[p]||"Special")+" web browser in order to run this application, but we detected that you have "+(this.BROWSER_NAMES[b]||"Special")+" web browser";if("*"!=c&&v!=c)switch(c){case"mobile":return"E_MOBILE_APP: This application is not intended to be used on desktop computers. Please try using a mobile device";case"desktop":return"E_DESKTOP_APP: This application is not intended to be used on mobile devices. Please try using a desktop computer or a laptop"}if(d>-1&&C<d&&"gte"==f)return"E_BROWSER_VERSION: You need at least "+(this.BROWSER_NAMES[b]||"Special")+" web browser version "+d.toFixed(2)+" in order to run this application, but we detected that you have a lower version ("+C.toFixed(2)+")";if(d>-1&&~~C!=~~d&&"eq"==f)return"E_BROWSER_VERSION: You need the "+(this.BROWSER_NAMES[b]||"Special")+" web browser version "+~~d+" in order to run this application, but we detected that you have a different version ("+~~C+"), which is "+(C>d?"greater":"lower")+" that the designed browser version of this application";if(g&&g.length)for(n=0,o=g.length;n<o;n++)if(i=(s=g[n].split("|")).length){for(a=!1,r=0;r<i;r++)if(A.indexOf(s[r])>-1){a=!0;break}if(!a)return"E_API_MISSING: Some plugins, browser capabilities or extensions, were not detected: "+this.explainMissingApis(s)}return""},t.getRequirementErrorCode=function(t){if(""==t)return i.E_NONE;var e=/^([A-Z\d_]+):/.exec(t);if(!e)return i.E_NONE;switch(e[1]){case"E_SYNTAX_ERROR":return i.E_SYNTAX_ERROR;case"E_BAD_OS":return i.E_BAD_OS;case"E_MOBILE_APP":return i.E_MOBILE_APP;case"E_DESKTOP_APP":return i.E_DESKTOP_APP;case"E_BAD_CPU_CLASS":return i.E_BAD_CPU_CLASS;case"E_BROWSER_VERSION":return i.E_BROWSER_VERSION;case"E_BROWSER_TYPE":return i.E_BROWSER_TYPE;case"E_API_MISSING":return i.E_API_MISSING;default:return i.E_UNKNOWN_ERROR}},t.isMobileDefaultBrowser=function(){return""!=this.meetsRequirements("android * mobile chrome 42+")&&""==this.meetsRequirements("android * mobile chrome *")},t.getOperatingSystemName=function(){switch(this.toString(),this.operatingSystem){case n.ANDROID:return"android";case n.IOS:return"ios";case n.LINUX:return"linux";case n.MAC:return"mac";case n.UNIX:return"unix";case n.WINDOWS:return"windows";case n.WINDOWS_MOBILE:return"windows-mobile";case n.OTHER:return"other"}},t.navigator=window.navigator,t.CPU_64_CLASSES=["x86_64","x86-64","Win64","x64;","amd64","amd64","AMD64","WOW64","x64_64","ia64","sparc64","ppc64","IRIX64"],t.WIN_VERSIONS_NAMES={win95:"Windows 95",win98:"Windows 98",win2k:"Windows 2000",winnt4:"Windows NT 4.0",winme:"Windows Millennium",winxp:"Windows XP",win2k3:"Windows 2003 Server",winvista:"Windows Vista",win7:"Windows 7",win8:"Windows 8",win10:"Windows 10",winother:"Windows > 10",win:"Windows"},t.WIN_VERSIONS_RELEASE_ORDER=["win","win95","win98","winnt4","winme","win2k","winxp","win2k3","winvista","win7","win8","win10","winother"],t.BROWSER_NAMES={chrome:"Google Chrome",firefox:"Mozilla Firefox",msie:"Microsoft Internet Explorer",edge:"Microsoft Edge",opera:"Opera",safari:"Safari",other:"Non Standard"},t.APIS_LIST=["ArrayBuffer","Audio","localStorage","sessionStorage","DataView","Crypto","CryptoKey","File","FileReader","Blob","Int16Array","Int32Array","Int8Array","HTMLCanvasElement","HTMLVideoElement","HTMLAudioElement","HTMLShadowElement","CanvasRenderingContext2D","URL","MediaSource","MediaStream","AudioBuffer","Promise","Worker","postMessage","XMLHttpRequest"],t.API_NAMES={arraybuffer:"HTML5 ArrayBuffer API ( fixed length, raw binary data buffer )",audio:"HTML5 Audio element API ( support for playing audio )",localStorage:"HTML5 Local Storage API ( support for storing data on your browser )",sessionStorage:"HTML5 Session Storage API ( support for storing data on your browser )",dataview:"HTML5 DataView API ( low-level interface for reading data from and writing it to an ArrayBuffer )",crypto:"HTML5 Cryptography functions",cryptokey:"HTML5 Cryptography functions",file:"HTML5 File API ( provides information about files and allows to access their contents )",filereader:"HTML5 FileReader API ( lets web applications asynchronously read the contents of files / raw data buffers stored on your device or computer, using File or Blob objects to specify the file or data to read )",blob:"HTML5 Blob API ( a file-like object of immutable, raw data )",int16array:"HTML5 Int16Array API ( an array of twos-complement 16-bit signed integers in the platform byte order )",int8array:"HTML5 Int8Array API ( an array of twos-complement 8-bit signed integers )",int32array:"HTML5 Int32Array API ( an array of twos-complement 32-bit signed integers )",htmlcanvaselement:"HTML5 Canvas API ( allows application to draw 2D or 3D graphics using accelerated techniques / and your video card's hardware )",htmlvideoelement:"HTML5 Video Element API ( allows playing videos on your web browser, without the need of using external plugins )",htmlaudioelement:"HTML5 Audio Element API ( allows playing sounds on your web browser, without the need of using external plugins )",htmlshadowelement:"HTML5 Shadow DOM API ( provides encapsulation for the JavaScript, CSS and HTML support for web developers, in order to create high speed web pages )",canvasrenderingcontext2d:"HTML5 Canvas element 2D drawing routines API",url:"HTML5 URL API ( allows functions related with URL's and in-memory URL's for your web browser, including Video Streaming and Audio Streaming related ones )",mediasource:"HTML5 MediaSource API ( technology that provides video and audio streaming for your web browser )",audiobuffer:"HTML5 AudioBuffer API ( technology that provides audio streaming and buffer for your web browser )",flash:"Adobe Flash plugin",nagra:"Encrypted video streaming support Player",nagrapepper:"Encrypted video streaming support Player Google Chrome browser extension",promise:"Asynchronous data types, which make your browser run smoothly",worker:"HTML5 Web Worker API",postmessage:"A technology used for inter-frame communication",xmlhttprequest:"HTML async transport inside browser (AJAX)"},t}();e.Browser=a}.apply(e,[n,e]))||(t.exports=r)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(3)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.FACEBOOK="facebook",t.GOOGLE="google",t.MICROSOFT="microsoft"}(e.EAuthZeroPlugin||(e.EAuthZeroPlugin={}));var r=function(t){function e(){var e=t.call(this)||this;return e.plugins=[],e.callbackId=0,e}return s(e,t),e.prototype.withPlugin=function(t){for(var e=0,n=this.plugins.length;e<n;e++)if(this.plugins[e].getType()===t.getType())throw new Error("Plugin "+t.getType()+" already configured!");return this.plugins.push(t.withAuthZero(this)),this},e.prototype.getPlugin=function(t){for(var e=0,n=this.plugins.length;e<n;e++)if(this.plugins[e].getType()===t)return this.plugins[e];throw new Error("Plugin "+t+" not configured!")},e.prototype.createCallback=function(t,e){var n="auth_zero_callback_"+this.callbackId;return this.callbackId++,window[n]=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];t.apply(e,n)},{name:n,callback:t}},e}(n.EventEmitter);e.AuthZero=r}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r;void 0===(r=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.isURL=function(t){return"string"==typeof t&&/^(http(s)?:)?\/\/[a-z0-9\-_.]+(:[\d]+)?(\/([\S]+)?)?$/.test(t)},t.isCalendarURL=function(t){return"string"==typeof t&&/^calendar:\/\/\?n=(.*)$/.test(t)},t.isEmail=function(t){return"string"==typeof t&&/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)},t.isStringUID=function(t){return"string"==typeof t&&/^uid:[\d]+,[^$]+$/.test(t)},t.isStringGID=function(t){return"string"==typeof t&&/^gid:[\d]+,[^$]+$/.test(t)},t.isSignature=function(t){return"string"==typeof t&&/^<signature value="(\[\[3,"[^"]+"]]|[^"]+)" \/>/.test(t)},t.isDOMHTMLFragment=function(t){return t&&t.constructor&&t.constructor===this.getDocumentFragmentConstructor().constructor},t.getDocumentFragmentConstructor=function(){return this.cachedDocumentFragment||(this.cachedDocumentFragment=document.createDocumentFragment())},t}();e.DataFormat=n}.apply(e,[n,e]))||(t.exports=r)},,function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(39),n(24),n(179),n(112),n(12),n(102)],void 0===(o=function(t,e,n,r,o,i,a,u){Object.defineProperty(e,"__esModule",{value:!0});var l=function(t){function e(){var e=t.call(this)||this;return e.ribbons=[],e.selectedRibbon=null,e.ribbonWidth=100,e.root.className="ui ui-ribbon",e.append(e.quickCommandsBar=new r.Layout(r.Layout.DIRECTION_HORIZONTAL).addClass("ui-ribbon-bar quick")),e.append(e.tabsBar=new r.Layout(r.Layout.DIRECTION_HORIZONTAL).addClass("ui-ribbon-bar tabs")),e.append(e.commandsBar=new r.Layout(r.LayoutDirection.HORIZONTAL).addClass("ui-ribbon-bar commands")),e.on("click",(function(t){t instanceof o.RibbonTab&&null!==t.getRibbon()&&e.setSelectedRibbon(t.getRibbon())})),e.resize=a.Debouncer.create((function(){e.resizeSync()}),50),e}return s(e,t),e.prototype.append=function(e){return e&&e instanceof o.Ribbon?(this.ribbons.push(e),this.tabsBar.append(e.getTab()),e.setParent(this)):e&&e instanceof o.RibbonTab||e&&e instanceof u.GreedySpace?(this.tabsBar.append(e),e.setParent(this)):t.prototype.append.call(this,e),this},e.prototype.getQuickCommandsBar=function(){return this.quickCommandsBar},e.prototype.getTabsBar=function(){return this.tabsBar},e.prototype.getCommandsBar=function(){return this.commandsBar},e.prototype.getRibbonById=function(t){for(var e=0,n=this.ribbons.length;e<n;e++)if(this.ribbons[e].getId()===t)return this.ribbons[e];return null},e.prototype.getSelectedRibbon=function(){return this.selectedRibbon},e.prototype.setSelectedRibbon=function(t){if(t!==this.selectedRibbon)return this.selectedRibbon&&(this.selectedRibbon.setSelected(!1),this.commandsBar.remove(this.selectedRibbon)),this.selectedRibbon=t||null,this.selectedRibbon&&(this.selectedRibbon.setSelected(!0),this.commandsBar.append(this.selectedRibbon)),this},e.prototype.getRibbonWidth=function(){return this.ribbonWidth},e.prototype.resizeSync=function(){this.ribbonWidth=this.root.offsetWidth;for(var t=0,e=this.ribbons.length;t<e;t++)this.ribbons[t].resize(this.ribbonWidth)},e.prototype.getChildById=function(t){for(var e=this.children.concat(this.ribbons),n=0,r=e.length;n<r;n++){if(e[n].getId()===t)return e[n];if(e[n].getNodeType()===i.UINodeType.CONTAINER){var o=e[n].getChildById(t);if(null!==o)return o}}return null},e}(n.ContainerAbstract);e.RibbonMenu=l}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r;void 0===(r=function(t,e){var n;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.WWW="www",t.WEEBLY="weebly",t.WORDPRESS="wordpress",t.PLENTYMARKETS="plentymarkets"}(n=e.Platforms||(e.Platforms={}));var r=function(){function t(){}return t.getPlatformDetails=function(){if(this.platformDetails)return this.platformDetails;try{this.platformDetails=JSON.parse(document.getElementById("environment").textContent)}catch(t){console.warn("[Platform]: Using mock platform (#environment not found in DOM or has undecodable value)"),this.platformDetails={revision:(+new Date).toString(16).substr(0,8),platform:n.WWW}}return this.platformDetails},t}();e.Platform=r}.apply(e,[n,e]))||(t.exports=r)},function(t,e,n){"use strict";var r;void 0===(r=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.isOnPremiseInstallation=function(){return void 0!==this.onPremise?this.onPremise:!!document.getElementById("on-premise")||(this.onPremise=!1)},t.getUIConfig=function(){if(void 0!==this.uiConfig)return this.uiConfig;var t=document.getElementById("on-premise");if(t){try{this.uiConfig=JSON.parse(t.textContent)}catch(t){this.uiConfig={submissions:!1,files:!1,translations:!1,payments:!1,integrations:!1,workflows:!1,calendars:!1,allowSignups:!1,signInMethods:{facebookPlugin:!1,googlePlugin:!1,microsoftPlugin:!1,password:!0}}}try{Object.freeze(this.uiConfig)}catch(t){}return this.uiConfig}return this.uiConfig=null},t.isSignupAllowed=function(){return!this.getUIConfig()||this.getUIConfig().allowSignups},t.getSignInMethods=function(){return this.getUIConfig()?this.getUIConfig().signInMethods:{facebookPlugin:!0,googlePlugin:!0,microsoftPlugin:!0,password:!0}},t}();e.OnPremiseInstallation=n}.apply(e,[n,e]))||(t.exports=r)},,function(t,e,n){"use strict";var r,o;r=[n,e,n(16),n(6),n(137),n(18)],void 0===(o=function(t,e,n,r,o,i){var s;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.VIEW_SUBMISSION="view-submission",t.EDIT_SUBMISSION="edit-submission",t.RESUME_SUBMISSION_EDITING="resume-submission",t.PWA_MODE="pwa_mode",t.DYNAMIC_FORM="dynamic-form"}(s=e.ViewFormSubmissionActionType||(e.ViewFormSubmissionActionType={}));var a=function(){function t(){}return t.getSubmissionId=function(){return this.submissionId||null},t.getSubmissionData=function(){return this.submissionData||null},t.getActionType=function(){return this.actionType||null},t.load=function(t){var e=n.URLParser.parseURL(t||location.href);if([s.EDIT_SUBMISSION,s.VIEW_SUBMISSION,s.RESUME_SUBMISSION_EDITING,s.DYNAMIC_FORM].indexOf(e.search.action)>-1&&e.search.submission_id&&(e.search.action!==s.RESUME_SUBMISSION_EDITING||e.search.action===s.RESUME_SUBMISSION_EDITING&&e.search.auth))return this.loadSubmission(e.search.submission_id,e.search.action,void 0===t||s.RESUME_SUBMISSION_EDITING!==e.search.action),void(e.search.action===s.RESUME_SUBMISSION_EDITING&&(this.authToken=e.search.auth||null,void 0!==t&&this.authToken&&window.history.replaceState({},document.title,location.pathname+"?action="+s.RESUME_SUBMISSION_EDITING+"&submission_id="+this.getSubmissionId()+"&auth="+this.authToken)));if("1"===e.search.pwa_mode){if(this.actionType=s.PWA_MODE,this.submissionId=null,e.search.load_offline_submission&&(this.loadedOfflineSubmissionDate=parseInt(e.search.load_offline_submission)||null,this.loadedOfflineSubmissionDate))try{var r;if(r=/^\/view\/(id_[\da-z_]+)$/i.exec(e.pathname)){var a=r[1];if(!a)return;var u=JSON.parse(i.PersistentStorage.getItem("offline_submissions"));if(u[a])for(var l=0,c=u[a].length;l<c;l++)if(u[a][l].createdDate===this.loadedOfflineSubmissionDate){this.submissionData=JSON.parse((u[a][l].request||{submission:{}}).submission||{});break}this.submissionData||(this.submissionData=void 0,this.loadedOfflineSubmissionDate=null)}}catch(t){console.error("Failed loading submission by date in PWA mode:",t)}o.OfflineSubmissionManager.activateOfflineSubmissionAPIEndpoints()}},t.loadSubmission=function(t,e,n){if(!/^[\d]+$/.test(t))throw new Error("Invalid url argument value: submission_id: uint expected");if(n){var o=document.querySelector("script#load-submission");if(!o)throw new Error("Load data script not found");var i=o.getAttribute("data-submission-id");if(!/^[\d]+$/.test(i))throw new Error("Invalid script value: 'data-submission-id': uint expected");if(t!==i)throw new Error("Submission id's don't match!");var s=o.textContent,a=s?r.Strings.base64ToUTF8(s):s;if(!a)throw new Error("Submission could not be decoded as UTF8");try{this.submissionData=JSON.parse(a),this.submissionId=parseInt(i),this.actionType=e}catch(t){throw new Error("Failed to decode submitted data!")}}else this.submissionId=parseInt(t),this.actionType=e},t.getAuthToken=function(){return this.authToken||null},t.setSubmissionAsNotBeingPartial=function(){this.getActionType()===s.RESUME_SUBMISSION_EDITING&&(history.replaceState({},window.document.title,window.location.pathname),this.actionType=null)},t.getLoadedOfflineSubmissionDate=function(){return this.loadedOfflineSubmissionDate},t.authToken=null,t.loadedOfflineSubmissionDate=null,t}();e.EditSubmissionManager=a}.apply(e,r))||(t.exports=o)},,function(t,e,n){"use strict";var r,o;r=[n,e,n(0),n(5),n(18)],void 0===(o=function(t,e,n,r,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t.setEnabled=function(t){console.warn("[CIO] enabled = ",t),this.enabled=!!t},t.event=function(t,e,o){return void 0===o&&(o=1),this.enabled?n.Deferred((function(n){r.API.post("users/analytics",{event:JSON.stringify({n:t,t:e||void 0,c:o})}).always((function(){n.resolve()}))})):n.Deferred((function(t){t.resolve()}))},t.getReferrer=function(){return o.PersistentStorage.getItem("cio_referrer",o.PersistentDataStorageType.SESSION_STORAGE)},t.enabled=!1,t}();e.UsersAnalytics=i}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(40)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.text="",e}return s(e,t),e.prototype.getText=function(){return this.text},e.prototype.setText=function(t){return this.text=t,this.root.textContent=String(t||""),this},e}(n.ValueListItem);e.TextListItem=r}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(82)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(e){this.msgid="",this.msgctxt=null,this.references=[],this.msgid_plural=null,this.msgstr=[],this.comments=[],this.flags={},this.extractedComments=[],this.obsolete=!1,this.id=t.PO_TRANSLATION_ID++,this.msgid="",this.msgctxt=null,this.references=[],this.msgid_plural=null,this.msgstr=[],this.comments=[],this.extractedComments=[],this.flags={},this.obsolete=!1;var n=e&&e.nplurals,r=Number(n);this.nplurals=isNaN(r)?2:r}return t.prototype.setMsgid=function(t){return this.msgid=t,this},t.prototype.setMsgstr=function(t){return Array.isArray(t)?this.msgstr=t:this.msgstr=[t],this},t.prototype.toString=function(){var t=[],e=this,n=function(t){return t=String(t||"").replace(/[\x07\b\t\v\f\r"\\]/g,(function(t){switch(t){case"":return"\\a";case"\b":return"\\b";case"\t":return"\\t";case"\v":return"\\v";case"\f":return"\\f";case"\r":return"\\r";default:return"\\"+t}}))},r=function(t,e,r){var o=[],i=e.split(/\n/),s=void 0!==r?"["+r+"]":"";return i.length>1?(o.push(t+s+' ""'),i.forEach((function(t){o.push('"'+n(t)+'"')}))):o.push(t+s+' "'+n(e)+'"'),o},o=function(t,e,n){for(var o=r(t,e,n),i=1;i<o.length-1;i++)o[i]=o[i].slice(0,-1)+'\\n"';return o};this.comments.forEach((function(e){t.push("# "+e)})),this.extractedComments.forEach((function(e){t.push("#. "+e)})),this.references.forEach((function(e){t.push("#: "+e)}));var i=Object.keys(this.flags).filter((function(t){return!!e.flags[t]}),this);i.length>0&&t.push("#, "+i.join(","));var s=this.obsolete?"#~ ":"";return["msgctxt","msgid","msgid_plural","msgstr"].forEach((function(n){var i=e[n];if(null!=i){var a=!1;if(Array.isArray(i)&&(a=i.some((function(t){return t}))),Array.isArray(i)&&i.length>1)i.forEach((function(e,r){var i=o(n,e,r);t=t.concat(s+i.join("\n"+s))}));else if(e.msgid_plural&&"msgstr"===n&&!a)for(var u=0;u<e.nplurals;u++)t=t.concat(s+r(n,"",u));else{var l=e.msgid_plural&&Array.isArray(i)?0:void 0;i=Array.isArray(i)?i.join():i;var c=o(n,i,l);t=t.concat(s+c.join("\n"+s))}}})),t.join("\n")},t.prototype.translate=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return t=t||0,(e=void 0!==this.msgstr[t]?this.msgstr[t]||t>0&&this.msgid_plural&&this.msgid_plural||this.msgid||null:this.msgstr[0]||(t>0&&this.msgid_plural?this.msgid_plural:this.msgid)||this.msgid||"")?e.replace(/%[\d]+(\$[isfb])?/g,(function(t){var e=parseInt(t.substr(1));return isNaN(e)||void 0===n[e-1]?t:String(n[e-1])})):null},t.prototype.setContext=function(t){return this.msgctxt=t,this},t.PO_TRANSLATION_ID=1,t}();e.POTranslation=r;var o=function(){function t(){this.comments=[],this.extractedComments=[],this.headers={},this.headerOrder=[],this.items=[]}return t.prototype.setItems=function(t){return this.items=t,this},t.prototype.appendItem=function(t){this.items.push(t)},t.prototype.removeItem=function(t){for(var e=0,n=this.items.length;e<n;e++)if(this.items[e]===t)return this.items.splice(e,1),1;return 0},t.prototype.toString=function(t){void 0===t&&(t=!1);var e=[];this.comments&&this.comments.forEach((function(t){e.push(("# "+t).trim())})),this.extractedComments&&this.extractedComments.forEach((function(t){e.push(("#. "+t).trim())})),e.push('msgid ""'),e.push('msgstr ""');var n=this,r=[];return this.headerOrder.forEach((function(t){t in n.headers&&r.push(t)})),Object.keys(this.headers).forEach((function(t){-1===r.indexOf(t)&&r.push(t)})),r.forEach((function(t){e.push('"'+t+": "+n.headers[t]+'\\n"')})),e.push(""),this.items.forEach((function(t){e.push(t.toString()),e.push("")})),t?unescape(encodeURIComponent(e.join("\n"))):e.join("\n")},t.prototype.getLanguage=function(){return this.headers.Language?n.I18nLanguage.getLanguageByCode(this.headers.Language):null},t.parse=function(e){var n;e=String(e||"").replace(/\r\n/g,"\n");for(var o=new t,i=e.split(/\n\n/),s=[];i[0]&&(0===s.length||s[s.length-1].indexOf('msgid ""')<0);)i[0].match(/msgid "[^"]/)?s.push('msgid ""'):s.push(i.shift());s=s.join("\n");var a=i.join("\n").split(/\n/);o.headers={"Project-Id-Version":"","Report-Msgid-Bugs-To":"","POT-Creation-Date":"","PO-Revision-Date":"","Last-Translator":"",Language:"","Language-Team":"","Content-Type":"","Content-Transfer-Encoding":"","Plural-Forms":""},o.headerOrder=[],s.split(/\n/).reduce((function(t,e){return t.merge&&(e=t.pop().slice(0,-1)+e.slice(1),delete t.merge),/^".*"$/.test(e)&&!/^".*\\n"$/.test(e)&&(t.merge=!0),t.push(e),t}),[]).forEach((function(t){if(t.match(/^#\./))o.extractedComments.push(t.replace(/^#\.\s*/,""));else if(t.match(/^#/))o.comments.push(t.replace(/^#\s*/,""));else if(t.match(/^"/)){var e=(t=t.trim().replace(/^"/,"").replace(/\\n"$/,"")).split(/:/),n=e.shift().trim();o.headers[n]=e.join(":").trim(),o.headerOrder.push(n)}}));var u=t.parsePluralForms(o.headers["Plural-Forms"]).nplurals,l=new r({nplurals:u}),c=null,p=0,d=0,h=0;function f(){l.msgid.length>0&&(d>=h&&(l.obsolete=!0),d=0,h=0,o.items.push(l),l=new r({nplurals:u}))}for(var g=function(t){return String(t||"").replace(/^\s+|\s+$/g,"")},m=function(t){return t=(t=(t=g(t)).replace(/^[^"]*"|"$/g,"")).replace(/\\([abtnvfr'"\\?]|([0-7]{3})|x([0-9a-fA-F]{2}))/g,(function(t,e,n,r){if(n)return String.fromCharCode(parseInt(n,8));if(r)return String.fromCharCode(parseInt(r,16));switch(e){case"a":return"";case"b":return"\b";case"t":return"\t";case"n":return"\n";case"v":return"\v";case"f":return"\f";case"r":return"\r";default:return e}}))};a.length>0;){var y=!1;if((n=g(a.shift())).match(/^#\~/)&&(n=g(n.substring(2)),y=!0),n.match(/^#:/))f(),l.references.push(g(n.replace(/^#:/,"")));else if(n.match(/^#,/)){f();for(var v=g(n.replace(/^#,/,"")).split(","),b=0;b<v.length;b++)l.flags[v[b]]=!0}else if(n.match(/^#($|\s+)/))f(),l.comments.push(g(n.replace(/^#($|\s+)/,"")));else if(n.match(/^#\./))f(),l.extractedComments.push(g(n.replace(/^#\./,"")));else if(n.match(/^msgid_plural/))l.msgid_plural=m(n),c="msgid_plural",h++;else if(n.match(/^msgid/))f(),l.msgid=m(n),c="msgid",h++;else if(n.match(/^msgstr/)){var C=n.match(/^msgstr\[(\d+)\]/);p=C&&C[1]?parseInt(C[1]):0,l.msgstr[p]=m(n),c="msgstr",h++}else n.match(/^msgctxt/)?(f(),l.msgctxt=m(n),c="msgctxt",h++):n.length>0&&(h++,"msgstr"===c?l.msgstr[p]+=m(n):"msgid"===c?l.msgid+=m(n):"msgid_plural"===c?l.msgid_plural+=m(n):"msgctxt"===c&&(l.msgctxt+=m(n)));y&&d++}return f(),o},t.parsePluralForms=function(t){var e=(t||"").split(";").reduce((function(t,e){var n=e.trim(),r=n.indexOf("=");return t[n.substring(0,r).trim()]=n.substring(r+1).trim(),t}),{});return{nplurals:e.nplurals,plural:e.plural}},t.prototype.getTranslationByMessageId=function(t,e){void 0===e&&(e=null);for(var n=0,o=this.items.length;n<o;n++)if((this.items[n].msgid===t||t&&t===this.items[n].msgid_plural)&&this.items[n].msgctxt===e)return this.items[n];return(new r).setMsgid(t).setMsgstr(t).setContext(e)},t.prototype.hasTranslation=function(t,e){void 0===e&&(e=null);for(var n=this.items||[],r=n.length,o=0;o<r;o++)if(n[o].msgid===t&&n[o].msgctxt===e)return!0;return!1},t.prototype.addTranslation=function(t,e,n){void 0===n&&(n=null);var o=new r;return this.items.push(o),o.msgid=t,o.msgstr=[e],o.msgctxt=n,this},t.prototype.isEmpty=function(){return!this.items||!this.items.length},t.prototype.setHeader=function(t,e){if(!t)return this;var n=!1,r=t;t=String(t).toLowerCase();for(var o=Object.keys(this.headers||{}),i=0,s=o.length;i<s;i++)if(o[i].toLowerCase()===t){this.headers[r]=String(e||null),n=!0;break}if(n||(this.headers[r]=e,n=!0),n){this.headerOrder=[];var a=Object.keys(this.headers||{});for(i=0,s=a.length;i<s;i++)this.headerOrder.push(a[i])}return this},t.prototype.getItems=function(){return this.items.slice(0)},t.prototype.getItemById=function(t){for(var e=0,n=this.items.length;e<n;e++)if(this.items[e].id===t)return this.items[e];return null},t.prototype.getHeader=function(t){var e=t.toString().toLowerCase();for(var n in this.headers)if(this.headers.hasOwnProperty(n)&&this.headers.propertyIsEnumerable(n)&&n.toLowerCase()===e)return this.headers[n];return null},t}();e.POFile=o}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(41),n(7),n(3),n(30)],void 0===(o=function(t,e,n,r,o,i){var s,a;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.MOUSE=0]="MOUSE",t[t.TOUCH=1]="TOUCH"}(s=e.HumanInputDeviceType||(e.HumanInputDeviceType={})),function(t){t[t.NONE=0]="NONE",t[t.LEFT=1]="LEFT",t[t.RIGHT=2]="RIGHT",t[t.BOTH=3]="BOTH",t[t.MIDDLE=4]="MIDDLE"}(a=e.EMouseManagerButtonType||(e.EMouseManagerButtonType={}));var u=function(){function t(){this.browserType=n.Browser.browserType}return t.prototype.getDeviceName=function(){return"MOUSE"},t.prototype.getDeviceType=function(){return s.MOUSE},t.prototype.onDragStart=function(){},t.prototype.onDragEnd=function(){},t.prototype.mousedown=function(){return"mousedown"},t.prototype.mousemove=function(){return"mousemove"},t.prototype.mouseup=function(){return"mouseup"},t.prototype.click=function(){return"click"},t.prototype.getEventButton=function(t){if(!t)return null;switch(this.browserType){case n.E_BROWSER_TYPE.SAFARI:return t.which;default:return t.buttons}},t}(),l=function(){function t(){this.dragListenerAdded=!1,this.dragStart=function(t){2!==t.targetTouches.length&&t.preventDefault()}}return t.prototype.getDeviceName=function(){return"TOUCH"},t.prototype.getDeviceType=function(){return s.TOUCH},t.prototype.onDragStart=function(){this.dragListenerAdded||(document.body.addEventListener("touchmove",this.dragStart,{passive:!1,capture:!0}),this.dragListenerAdded=!0)},t.prototype.onDragEnd=function(){this.dragListenerAdded&&(document.body.removeEventListener("touchmove",this.dragStart,!0),this.dragListenerAdded=!1)},t.prototype.mousedown=function(){return"touchstart"},t.prototype.mousemove=function(){return"touchmove"},t.prototype.mouseup=function(){return"touchend"},t.prototype.click=function(){return"click"},t.prototype.getEventButton=function(t){return t?a.LEFT:null},t}(),c=function(){function t(){}return t.getStrategy=function(){var e=this;if(!1===this.domEventListenersAdded&&(this.scrollbarMeasurementDiv=document.createElement("div"),this.scrollbarMeasurementDiv.style.width="100px",this.scrollbarMeasurementDiv.style.height="100px",this.scrollbarMeasurementDiv.style.overflow="scroll",this.scrollbarMeasurementDiv.style.position="absolute",this.scrollbarMeasurementDiv.style.display="block",this.scrollbarMeasurementDiv.style.top="-9999px",this.scrollbarMeasurementDiv.style.pointerEvents="none",this.scrollbarMeasurementDiv.setAttribute("data-role","scrollbar-ruller"),document.body.appendChild(this.scrollbarMeasurementDiv),this.scrollbarMeasurementUpdater=i.Thread.create((function(){var n=e.scrollbarMeasurementDiv.offsetWidth-e.scrollbarMeasurementDiv.clientWidth;n!==e.scrollbarWidth&&(e.scrollbarWidth=n,e.emitter.trigger(t.EVENT_SCROLLBAR_SIZE_CHANGED,n))}),300),document.body.addEventListener("mousemove",(function(t){t.which===a.NONE&&(null!==e.lastMouseEventDate&&+new Date-e.lastMouseEventDate>500?e.switchToHumanInputDeviceType(s.MOUSE):e.lastMouseEventDate=+new Date)}),!0),document.body.addEventListener("touchmove",(function(){e.lastMouseEventDate=null,e.switchToHumanInputDeviceType(s.TOUCH)}),!0),document.body.addEventListener("touchstart",(function(){e.lastMouseEventDate=null,e.switchToHumanInputDeviceType(s.TOUCH)}),!0),this.domEventListenersAdded=!0),null===this.strategy)switch(n.Browser.getOperatingSystemName()){case"android":case"ios":case"windows-mobile":this.strategy=new l;break;default:this.strategy=new u}return document.body.setAttribute("data-hid-driver",this.strategy.getDeviceName()),document.body.setAttribute("data-hid-supports-"+this.strategy.getDeviceName(),""),this.strategy},t.getScrollbarWidth=function(){return this.scrollbarWidth},t.mousedown=function(){return this.getStrategy().mousedown()},t.mousemove=function(){return this.getStrategy().mousemove()},t.mouseup=function(){return this.getStrategy().mouseup()},t.click=function(){return this.getStrategy().click()},t.onDragStart=function(){this.getStrategy().onDragStart()},t.onDragEnd=function(){this.getStrategy().onDragEnd()},t.getDeviceType=function(){return this.getStrategy().getDeviceType()},t.getDeviceName=function(){return this.getStrategy().getDeviceName()},t.normalizeJQueryEvent=function(t){var e,n=t.originalEvent;switch(t.type){case"touchstart":if(1!==n.touches.length)return null;(e=r.Helpers.copy(t)).ctrlKey=!1,e.altKey=!1,e.shiftKey=!1,e.metaKey=!1,e.which=e.buttons=a.LEFT,e.target=n.touches[0].target,e.clientX=n.touches[0].clientX,e.clientY=n.touches[0].clientY;var o=n.targetTouches[0].target.getBoundingClientRect();return e.offsetX=Math.round(n.targetTouches[0].pageX-o.left-~~window.scrollX),e.offsetY=Math.round(n.targetTouches[0].pageY-o.top-~~window.scrollY),e.stopPropagation=function(){t.stopPropagation()},e.preventDefault=function(){t.preventDefault()},e.stopImmediatePropagation=function(){t.stopImmediatePropagation()},e;case"touchmove":case"touchend":if(1!==n.changedTouches.length)return null;(e=r.Helpers.copy(t)).ctrlKey=!1,e.altKey=!1,e.shiftKey=!1,e.metaKey=!1,e.which=e.buttons=a.LEFT,e.srcElement=n.srcElement,e.target=this.getElementFromPoint(n.changedTouches[0].clientX,n.changedTouches[0].clientY),e.clientX=n.changedTouches[0].clientX,e.clientY=n.changedTouches[0].clientY;try{var i=e.target.getBoundingClientRect();e.offsetX=n.changedTouches[0].pageX-i.left-~~window.scrollX,e.offsetY=n.changedTouches[0].pageY-i.top-~~window.scrollY}catch(t){e.offsetX=0,e.offsetY=0}return e.stopPropagation=function(){t.stopPropagation()},e.preventDefault=function(){t.preventDefault()},e.stopImmediatePropagation=function(){t.stopImmediatePropagation()},e;default:return t}},t.getElementFromPoint=function(t,e){var n=document.elementFromPoint(t,e);if(!n)return null;for(var r=window.getComputedStyle(n);n&&n!==document.body&&n!==document.documentElement;){if("none"!==r.pointerEvents)return n;n=n.parentNode,r=window.getComputedStyle(n)}return n},t.switchToHumanInputDeviceType=function(e){var n,r=null;if(null!==this.strategy){if(this.strategy.getDeviceType()===e)return;r=this.strategy}switch(e){case s.TOUCH:this.strategy=new l,console.warn("[HID] Using TOUCH events");break;case s.MOUSE:this.strategy=new u,console.warn("[HID] Using MOUSE events");break;default:throw new Error("[HID] Invalid human input device type: "+JSON.stringify(e))}n=this.strategy,document.body.setAttribute("data-hid-driver",n.getDeviceName()),document.body.setAttribute("data-hid-supports-"+n.getDeviceName(),""),this.emitter.trigger(t.EVENT_HID_DEVICE_CHANGED,n,r)},t.getEmitter=function(){return this.emitter},t.getButtonType=function(t){return this.getStrategy().getEventButton(t)},t.EVENT_HID_DEVICE_CHANGED="change.hid-device",t.EVENT_SCROLLBAR_SIZE_CHANGED="change.hid-scrollbar-size",t.scrollbarWidth=20,t.strategy=null,t.domEventListenersAdded=!1,t.emitter=new o.EventEmitter,t.lastMouseEventDate=null,t}();e.HIDManager=c}.apply(e,r))||(t.exports=o)},,function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(9),n(3),n(26)],void 0===(o=function(t,e,n,r,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e){void 0===e&&(e="default");var n=t.call(this)||this;return n.children=[],n.root=o.DOM.document.createElement("div"),n.root.className="body "+e,n.emptyState=!0,n}return s(e,t),e.prototype.updateEmptyState=function(){var t=!this.children.length;t!==this.emptyState&&(this.emptyState=t,this.trigger(e.EVENT_EMPTY_STATE_CHANGED,t))},e.prototype.getRoot=function(){return this.root},e.prototype.getBindedRoot=function(){return this.bindedRoot||this.root},e.prototype.getChildren=function(){return this.children},e.prototype.hasChild=function(t){return this.children.indexOf(t)>-1},e.prototype.removeChild=function(t){var e;if((e=this.children.indexOf(t))>-1)return this.children.splice(e,1),this.getBindedRoot().removeChild(t.getRoot()),this.updateEmptyState(),t;throw new Error("Element is not a child of this container body")},e.prototype.appendChild=function(t){return this.children.push(t),this.getBindedRoot().appendChild(t.getRoot()),this.updateEmptyState(),t},e.prototype.insertFirst=function(t){var e=this.getChildren();return e&&e.length?this.insertBefore(t,e[0]):this.appendChild(t)},e.prototype.insertBefore=function(t,e){var n=this.children.indexOf(e);if(-1===n)throw new Error("ContainerBody::insertBefore: assertion failed that reference child is a child of this body");return this.children.splice(n,0,t),this.getBindedRoot().insertBefore(t.getRoot(),e.getRoot()),this.updateEmptyState(),t},e.prototype.insertAfter=function(t,e){var n=this.children.indexOf(e);if(-1===n)throw new Error("ContainerBody::insertAfter: assertion failed that reference child is a child of this body");return this.children.splice(n+1,0,t),this.getBindedRoot().insertBefore(t.getRoot(),e.getRoot().nextSibling),this.updateEmptyState(),t},e.prototype.setChildrenInMemoryWithoutAffectingDOM=function(t){var e;return(e=this.children).splice.apply(e,[0,this.children.length].concat(t)),this.updateEmptyState(),this},e.prototype.bindTo=function(t){this.bindedRoot=t||null;for(var e=0,n=this.children.length;e<n;e++)this.getBindedRoot().appendChild(this.children[e].getRoot())},e.prototype.flatten=function(){for(var t=[],e=0,n=(this.children||[]).length;e<n;e++)t=t.concat.apply(t,this.children[e].flatten());return t},e.EVENT_EMPTY_STATE_CHANGED="empty-state",e}(r.EventEmitter);e.ContainerBody=i;var a=function(t){function e(e,n,r){var s=t.call(this,e,n,r)||this;return s.addClass("container"),s.bodies=[new i],s.dragIndicator=o.DOM.document.createElement("div"),s.dragIndicator.className="drag-svg",s.root.appendChild(s.bodies[0].getRoot()),s}return s(e,t),e.prototype.getBodies=function(){return this.bodies},e.prototype.getChildren=function(t){var e=[];if(void 0===t)for(var n=0,r=this.bodies.length;n<r;n++)e=e.concat(this.bodies[n].getChildren());else e=this.bodies[0].getChildren();return e},e.prototype.removeChild=function(t){for(var e=0,n=this.bodies.length;e<n;e++)if(this.bodies[e].hasChild(t)){var r=t.getDocument();return this.bodies[e].removeChild(t).setParent(null),r&&r.runIndexer(),t}throw new Error("Container.removeChild(): Attempted to remove a child which is not contained by this container")},e.prototype.appendChild=function(t,e){return void 0===e&&(e=0),t.remove(),this.bodies[e].appendChild(t).setParent(this),t.getDocument()&&t.getDocument().runIndexer(),t},e.prototype.hasChild=function(t){for(var e=0,n=this.bodies.length;e<n;e++)if(this.bodies[e].hasChild(t))return!0;return!1},e.prototype.getChildBody=function(t){for(var e=0,n=this.bodies.length;e<n;e++)if(this.bodies[e].hasChild(t))return this.bodies[e];return null},e.prototype.insertFirst=function(t,e){void 0===e&&(e=0);var n=this.bodies[e].insertFirst(t).setParent(this);return n.getDocument()&&n.getDocument().runIndexer(),n},e.prototype.insertBefore=function(t,e){var n=this.getChildBody(e);if(null===n)throw new Error("Container::insertBefore - referenced child is not a child of this container");if(t===e)throw new Error("Container::insertBefore - reference child is the same as new child");return t.remove(),n.insertBefore(t,e).setParent(this),t.getDocument()&&t.getDocument().runIndexer(),t},e.prototype.insertAfter=function(t,e){var n=this.getChildBody(e);if(null===n)throw new Error("Container::insertAfter - referenced child is not a child of this container");if(t===e)throw new Error("Container::insertAfter - reference child is the same as new child");return t.remove(),n.insertAfter(t,e).setParent(this),t.getDocument()&&t.getDocument().runIndexer(),t},e.prototype.hasLabel=function(){return!1},e.prototype.hasValue=function(){return!1},e.prototype.getValue=function(){},e.prototype.setValue=function(t){return this},e.prototype.getFieldsLayout=function(){return null},e.prototype.serialize=function(){var e,n=t.prototype.serialize.call(this);if((e=this.bodies[0].getChildren()).length){n.children=[];for(var r=0,o=e.length;r<o;r++)n.children.push(e[r].serialize())}if(this.bodies[1]&&(e=this.bodies[1].getChildren()).length){n.children1=[];for(r=0,o=e.length;r<o;r++)n.children1.push(e[r].serialize())}if(this.bodies[2]&&(e=this.bodies[2].getChildren()).length){n.children2=[];for(r=0,o=e.length;r<o;r++)n.children2.push(e[r].serialize())}return n},e.prototype.flatten=function(){for(var t=[this],e=0,n=this.bodies.length;e<n;e++)for(var r=this.bodies[e].getChildren(),o=0,i=r.length;o<i;o++)t=t.concat(r[o].flatten());return t},e.prototype.render=function(){this.root.appendChild(this.dragIndicator);for(var t=0,e=this.bodies.length;t<e;t++)for(var n=0,r=this.bodies[t].getChildren(),o=r.length;n<o;n++)r[n].render()},e.prototype.makeChildrenFitContent=function(t){for(var n=[],r=this.getChildren(),o=0,i=r.length;o<i;o++)r[o].hasProperty("size.width")&&n.push({node:r[o],width:r[o].getProperty("size.width"),modified:0});var s=n.length;if(s){var a=function(){for(var t=0,e=0,r=s;e<r;e++)t+=n[e].width+n[e].modified;return t};t<s&&(t=s),t>20&&(t=20),t<1&&(t=1);for(var u,l=function(t){return t.modified+t.width>t.node.getMinWidth()},c=!0;a()!==t&&c;){if(c=!1,a()<t){n.sort((function(t,e){return t.modified+t.width-(e.modified+e.width)}));for(o=0;o<s;o++)if((u=n[o]).modified+u.width<t-s+1){c=!0,n[o].modified++;break}}else{n.sort((function(t,e){return e.modified+e.width-(t.modified+t.width)}));for(o=0;o<s;o++)if(l(n[o])){c=!0,n[0].modified--;break}}}for(o=0;o<s;o++){var p=n[o].width+n[o].modified;n[o].node.setProperty("size.width",p),n[o].node.onSizeChanged(),n[o].node.render(),n[o].node instanceof e&&n[o].node.makeChildrenFitContent(p)}}},e.prototype.isDeletable=function(){return!1},e.prototype.isClonable=function(){return!1},e.prototype.getResizeCapabilities=function(){return n.InputResizeCapabilities.NONE},e.prototype.isSelectable=function(){return!1},e.prototype.isDragable=function(){return!1},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),n=0,r=this.bodies.length;n<r;n++)for(var o=this.bodies[n].getChildren(),i=0,s=o.length;i<s;i++)e.appendChild(o[i].clone(),n);return e},e.prototype.getWidthForChild=function(){return this.getProperty("size.width")},e.prototype.clearFormatting=function(e){return void 0===e&&(e=!0),t.prototype.clearFormatting.call(this,!1),this.bodies.forEach((function(t){t.getChildren().forEach((function(t){t.clearFormatting(!1)}))})),e&&this.document&&(this.render(),this.document.trigger("property.changed",this,"void","1","0",this),this.document.getTheme().markAsModified()),this},e.prototype.embedInPDFPage=function(t){},e}(n.Input);e.Container=a}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r=[n,e,n(57)],void 0===(o=function(t,e,r){!function(t){var e={};function r(){return"Markdown.mk_block( "+uneval(this.toString())+", "+uneval(this.trailing)+", "+uneval(this.lineNumber)+" )"}function o(){var t=n(129);return"Markdown.mk_block( "+t.inspect(this.toString())+", "+t.inspect(this.trailing)+", "+t.inspect(this.lineNumber)+" )"}e.mk_block=function(t,e,n){1===arguments.length&&(e="\n\n");var i=new String(t);return i.trailing=e,i.inspect=o,i.toSource=r,void 0!==n&&(i.lineNumber=n),i};var s=e.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};Array.prototype.forEach?e.forEach=function(t,e,n){return t.forEach(e,n)}:e.forEach=function(t,e,n){for(var r=0;r<t.length;r++)e.call(n||t,t[r],r,t)},e.isEmpty=function(t){for(var e in t)if(hasOwnProperty.call(t,e))return!1;return!0},e.extract_attr=function(t){return s(t)&&t.length>1&&"object"===i(t[1])&&!s(t[1])?t[1]:void 0};var a=function t(e){switch(void 0===e?"undefined":i(e)){case"undefined":this.dialect=t.dialects.Gruber;break;case"object":this.dialect=e;break;default:if(!(e in t.dialects))throw new Error("Unknown Markdown dialect '"+String(e)+"'");this.dialect=t.dialects[e]}this.em_state=[],this.strong_state=[],this.debug_indent=""};a.dialects={};var u=a.mk_block=e.mk_block;s=e.isArray;function l(t){return t.split("\n").length-1}a.parse=function(t,e){return new a(e).toTree(t)},a.prototype.split_blocks=function(t){t=t.replace(/\r\n?/g,"\n");var e,n=/([\s\S]+?)($|\n#|\n(?:\s*\n|$)+)/g,r=[],o=1;for(null!==(e=/^(\s*\n)/.exec(t))&&(o+=l(e[0]),n.lastIndex=e[0].length);null!==(e=n.exec(t));)"\n#"===e[2]&&(e[2]="\n",n.lastIndex--),r.push(u(e[1],e[2],o)),o+=l(e[0]);return r},a.prototype.processBlock=function(t,e){var n=this.dialect.block,r=n.__order__;if("__call__"in n)return n.__call__.call(this,t,e);for(var o=0;o<r.length;o++){var i=n[r[o]].call(this,t,e);if(i)return(!s(i)||i.length>0&&!s(i[0])&&"string"!=typeof i[0])&&this.debug(r[o],"didn't return proper JsonML"),i}return[]},a.prototype.processInline=function(t){return this.dialect.inline.__call__.call(this,String(t))},a.prototype.toTree=function(t,e){var n=t instanceof Array?t:this.split_blocks(t),r=this.tree;try{for(this.tree=e||this.tree||["markdown"];n.length;){var o=this.processBlock(n.shift(),n);o.length&&this.tree.push.apply(this.tree,o)}return this.tree}finally{e&&(this.tree=r)}},a.prototype.debug=function(){var t=Array.prototype.slice.call(arguments);t.unshift(this.debug_indent),"undefined"!=typeof print&&print.apply(print,t),"undefined"!=typeof console&&void 0!==console.log&&console.log.apply(null,t)},a.prototype.loop_re_over_block=function(t,e,n){for(var r,o=e.valueOf();o.length&&null!==(r=t.exec(o));)o=o.substr(r[0].length),n.call(this,r);return o},a.buildBlockOrder=function(t){var e=[];for(var n in t)"__order__"!==n&&"__call__"!==n&&e.push(n);t.__order__=e},a.buildInlinePatterns=function(t){var e=[];for(var n in t)if(!n.match(/^__.*__$/)){var r=n.replace(/([\\.*+?^$|()\[\]{}])/g,"\\$1").replace(/\n/,"\\n");e.push(1===n.length?r:"(?:"+r+")")}e=e.join("|"),t.__patterns__=e;var o=t.__call__;t.__call__=function(t,n){return void 0!==n?o.call(this,t,n):o.call(this,t,e)}};var c=e.extract_attr;function p(t){return t&&t.length>0?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"):""}function d(t){if("string"==typeof t)return p(t);var e=t.shift(),n={},r=[];for(!t.length||"object"!==i(t[0])||t[0]instanceof Array||(n=t.shift());t.length;)r.push(d(t.shift()));var o="";for(var s in void 0!==n.src&&(o+=' src="'+p(n.src)+'"',delete n.src),n){var a=p(n[s]);a&&a.length&&(o+=" "+s+'="'+a+'"')}return"img"===e||"br"===e||"hr"===e?"<"+e+o+"/>":"<"+e+o+">"+r.join("")+"</"+e+">"}a.renderJsonML=function(t,e){(e=e||{}).root=e.root||!1,t=JSON.parse(JSON.stringify(t));var n=[];if(e.root)n.push(d(t));else for(t.shift(),!t.length||"object"!==i(t[0])||t[0]instanceof Array||t.shift();t.length;)n.push(d(t.shift()));return n.join("\n\n")},a.toHTMLTree=function(t,e,n){"string"==typeof t&&(t=this.parse(t,e));var r=c(t),o={};r&&r.references&&(o=r.references);var i=function t(e,n,r){var o;r=r||{};var i=e.slice(0);"function"==typeof r.preprocessTreeNode&&(i=r.preprocessTreeNode(i,n));var s=c(i);if(s){for(o in i[1]={},s)i[1][o]=s[o];s=i[1]}if("string"==typeof i)return i;switch(i[0]){case"header":i[0]="h"+i[1].level,delete i[1].level;break;case"bulletlist":i[0]="ul";break;case"numberlist":i[0]="ol";break;case"listitem":i[0]="li";break;case"para":i[0]="p";break;case"markdown":i[0]="html",s&&delete s.references;break;case"code_block":i[0]="pre",o=s?2:1;var a=["code"];a.push.apply(a,i.splice(o,i.length-o)),i[o]=a;break;case"inlinecode":i[0]="code";break;case"img":i[1].src=i[1].href,delete i[1].href;break;case"linebreak":i[0]="br";break;case"link":i[0]="a";break;case"link_ref":if(i[0]="a",!(u=n[s.ref]))return s.original;delete s.ref,s.href=u.href,u.title&&(s.title=u.title),delete s.original;break;case"img_ref":var u;if(i[0]="img",!(u=n[s.ref]))return s.original;delete s.ref,s.src=u.href,u.title&&(s.title=u.title),delete s.original}if(o=1,s){for(var l in i[1]){o=2;break}1===o&&i.splice(o,1)}for(;o<i.length;++o)i[o]=t(i[o],n,r);return i}(t,o,n);return function t(e){var n=c(e)?2:1;for(;n<e.length;)"string"==typeof e[n]?n+1<e.length&&"string"==typeof e[n+1]?e[n]+=e.splice(n+1,1)[0]:++n:(t(e[n]),++n)}(i),i},a.toHTML=function(t,e,n){var r=this.toHTMLTree(t,e,n);return this.renderJsonML(r)};var h={inline_until_char:function(t,e){for(var n=0,r=[];;){if(t.charAt(n)===e)return[++n,r];if(n>=t.length)return[n,null,r];var o=this.dialect.inline.__oneElement__.call(this,t.substr(n));n+=o[0],r.push.apply(r,o.slice(1))}},subclassDialect:function(t){function e(){}function n(){}return e.prototype=t.block,n.prototype=t.inline,{block:new e,inline:new n}}},f=e.forEach,g=(c=e.extract_attr,u=e.mk_block,e.isEmpty),m=h.inline_until_char,y=/(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?/i.source,v={block:{atxHeader:function(t,e){var n=t.match(/^(#{1,6})\s*(.*?)\s*#*\s*(?:\n|$)/);if(n){var r=["header",{level:n[1].length}];return Array.prototype.push.apply(r,this.processInline(n[2])),n[0].length<t.length&&e.unshift(u(t.substr(n[0].length),t.trailing,t.lineNumber+2)),[r]}},setextHeader:function(t,e){var n=t.match(/^(.*)\n([-=])\2\2+(?:\n|$)/);if(n){var r=["header",{level:"="===n[2]?1:2}].concat(this.processInline(n[1]));return n[0].length<t.length&&e.unshift(u(t.substr(n[0].length),t.trailing,t.lineNumber+2)),[r]}},code:function(t,e){var n=[],r=/^(?: {0,3}\t| {4})(.*)\n?/;if(t.match(r)){t:for(;;){var o=this.loop_re_over_block(r,t.valueOf(),(function(t){n.push(t[1])}));if(o.length){e.unshift(u(o,t.trailing));break t}if(!e.length)break t;if(!e[0].match(r))break t;n.push(t.trailing.replace(/[^\n]/g,"").substring(2)),t=e.shift()}return[["code_block",n.join("\n")]]}},horizRule:function(t,e){var n=t.match(/^(?:([\s\S]*?)\n)?[ \t]*([-_*])(?:[ \t]*\2){2,}[ \t]*(?:\n([\s\S]*))?$/);if(n){var r=[["hr"]];if(n[1]){var o=u(n[1],"",t.lineNumber);r.unshift.apply(r,this.toTree(o,[]))}return n[3]&&e.unshift(u(n[3],t.trailing,t.lineNumber+1)),r}},lists:function(){var t=/[*+-]/,e=new RegExp("^( {0,3})([*+-]|\\d+\\.)[ \t]+"),n="(?: {0,3}\\t| {4})";function r(t,e,n,r){if(e)t.push(["para"].concat(n));else{var o=t[t.length-1]instanceof Array&&"para"===t[t.length-1][0]?t[t.length-1]:t;r&&t.length>1&&n.unshift(r);for(var i=0;i<n.length;i++){var s=n[i];"string"==typeof s&&o.length>1&&"string"==typeof o[o.length-1]?o[o.length-1]+=s:o.push(s)}}}function o(t,e){for(var r=new RegExp("^("+n+"{"+t+"}.*?\\n?)*$"),o=new RegExp("^"+n+"{"+t+"}","gm"),i=[];e.length>0&&r.exec(e[0]);){var s=e.shift(),a=s.replace(o,"");i.push(u(a,s.trailing,s.lineNumber))}return i}function i(t,e,n){var r=t.list,o=r[r.length-1];if(!(o[1]instanceof Array&&"para"===o[1][0]))if(e+1===n.length)o.push(["para"].concat(o.splice(1,o.length-1)));else{var i=o.pop();o.push(["para"].concat(o.splice(1,o.length-1)),i)}}return function(s,a){var u=s.match(e);if(u){for(var l,c,p,d=[],h=O(u),g=!1,m=[d[0].list];;){for(var y=s.split(/(?=\n)/),v="",b="",C=0;C<y.length;C++){b="";var E=y[C].replace(/^\n/,(function(t){return b=t,""})),A=(p=d.length,new RegExp("(?:^("+n+"{0,"+p+"} {0,3})([*+-]|\\d+\\.)\\s+)|(^"+n+"{0,"+(p-1)+"}[ ]{0,4})"));if(void 0!==(u=E.match(A))[1]){v.length&&(r(l,g,this.processInline(v),b),g=!1,v=""),u[1]=u[1].replace(/ {0,3}\t/g,"    ");var I=Math.floor(u[1].length/4)+1;if(I>d.length)h=O(u),l.push(h),l=h[1]=["listitem"];else{var T=!1;for(c=0;c<d.length;c++)if(d[c].indent===u[1]){h=d[c].list,d.splice(c+1,d.length-(c+1)),T=!0;break}T||(++I<=d.length?(d.splice(I,d.length-I),h=d[I-1].list):(h=O(u),l.push(h))),l=["listitem"],h.push(l)}b=""}E.length>u[0].length&&(v+=b+E.substr(u[0].length))}if(v.length){var S=this.processBlock(v,[]),w=S[0];w&&(w.shift(),S.splice.apply(S,[0,1].concat(w)),r(l,g,S,b),"\n"===l[l.length-1]&&l.pop(),g=!1,v="")}var _=o(d.length,a);_.length>0&&(f(d,i,this),l.push.apply(l,this.toTree(_,[])));var N=a[0]&&a[0].valueOf()||"";if(!N.match(e)&&!N.match(/^ /))break;s=a.shift();var D=this.dialect.block.horizRule.call(this,s,a);if(D){m.push.apply(m,D);break}d[d.length-1].indent===s.match(/^\s*/)[0]&&f(d,i,this),g=!0}return m}function O(e){var n=t.exec(e[2])?["bulletlist"]:["numberlist"];return d.push({list:n,indent:e[1]}),n}}}(),blockquote:function(t,e){var n=/(^|\n) +(\>[\s\S]*)/.exec(t);if(n&&n[2]&&n[2].length){var r=t.replace(/(^|\n) +\>/,"$1>");return e.unshift(r),[]}if(t.match(/^>/m)){var o=[];if(">"!==t[0]){for(var i=t.split(/\n/),s=[],a=t.lineNumber;i.length&&">"!==i[0][0];)s.push(i.shift()),a++;var l=u(s.join("\n"),"\n",t.lineNumber);o.push.apply(o,this.processBlock(l,[])),t=u(i.join("\n"),t.trailing,a)}for(;e.length&&">"===e[0][0];){var p=e.shift();t=u(t+t.trailing+p,p.trailing,t.lineNumber)}var d=t.replace(/^> ?/gm,""),h=(this.tree,this.toTree(d,["blockquote"])),f=c(h);return f&&f.references&&(delete f.references,g(f)&&h.splice(1,1)),o.push(h),o}},referenceDefn:function(t,e){var n=/^\s*\[([^\[\]]+)\]:\s*(\S+)(?:\s+(?:(['"])(.*)\3|\((.*?)\)))?\n?/;if(t.match(n)){var r=C.call(this),o=this.loop_re_over_block(n,t,(function(t){E(r,t)}));return o.length&&e.unshift(u(o,t.trailing)),[]}},para:function(t){return[["para"].concat(this.processInline(t))]}},inline:{__oneElement__:function(t,e,n){var r,o;return e=e||this.dialect.inline.__patterns__,(r=new RegExp("([\\s\\S]*?)("+(e.source||e)+")").exec(t))?r[1]?[r[1].length,r[1]]:(r[2]in this.dialect.inline&&(o=this.dialect.inline[r[2]].call(this,t.substr(r.index),r,n||[])),o=o||[r[2].length,r[2]]):[t.length,t]},__call__:function(t,e){var n,r=[];function o(t){"string"==typeof t&&"string"==typeof r[r.length-1]?r[r.length-1]+=t:r.push(t)}for(;t.length>0;)n=this.dialect.inline.__oneElement__.call(this,t,e,r),t=t.substr(n.shift()),f(n,o);return r},"]":function(){},"}":function(){},__escape__:/^\\[\\`\*_{}<>\[\]()#\+.!\-]/,"\\":function(t){return this.dialect.inline.__escape__.exec(t)?[2,t.charAt(1)]:[1,"\\"]},"![":function(t){if(!(t.indexOf("(")>=0&&-1===t.indexOf(")"))){var e=t.match(new RegExp("^!\\[(.*?)][ \\t]*\\(("+y+")\\)([ \\t])*([\"'].*[\"'])?"))||t.match(/^!\[(.*?)\][ \t]*\([ \t]*([^")]*?)(?:[ \t]+(["'])(.*?)\3)?[ \t]*\)/);if(e){e[2]&&"<"===e[2][0]&&">"===e[2][e[2].length-1]&&(e[2]=e[2].substring(1,e[2].length-1)),e[2]=this.dialect.inline.__call__.call(this,e[2],/\\/)[0];var n={alt:e[1],href:e[2]||""};return void 0!==e[4]&&(n.title=e[4]),[e[0].length,["img",n]]}return(e=t.match(/^!\[(.*?)\][ \t]*\[(.*?)\]/))?[e[0].length,["img_ref",{alt:e[1],ref:e[2].toLowerCase(),original:e[0]}]]:[2,"!["]}},"[":function(t){for(var e=1,n=0;n<t.length;n++){var r=t.charAt(n);if("["===r&&e++,"]"===r&&e--,e>3)return[1,"["]}var o=String(t),i=m.call(this,t.substr(1),"]");if(!i[1])return[i[0]+1,t.charAt(0)].concat(i[2]);if(1===i[0])return[2,"[]"];var s,a,u=1+i[0],l=i[1],c=(t=t.substr(u)).match(/^\s*\([ \t]*([^"']*)(?:[ \t]+(["'])(.*?)\2)?[ \t]*\)/);if(c){var p=c[1].replace(/\s+$/,"");if(u+=c[0].length,p&&"<"===p[0]&&">"===p[p.length-1]&&(p=p.substring(1,p.length-1)),!c[3])for(var d=1,h=0;h<p.length;h++)switch(p[h]){case"(":d++;break;case")":0==--d&&(u-=p.length-h,p=p.substring(0,h))}return a={href:(p=this.dialect.inline.__call__.call(this,p,/\\/)[0])||""},void 0!==c[3]&&(a.title=c[3]),s=["link",a].concat(l),[u,s]}return(c=t.match(new RegExp("^\\(("+y+")\\)")))&&c[1]?(u+=c[0].length,s=["link",{href:c[1]}].concat(l),[u,s]):(c=t.match(/^\s*\[(.*?)\]/))&&(u+=c[0].length,a={ref:(c[1]||String(l)).toLowerCase(),original:o.substr(0,u)},l&&l.length>0)?(s=["link_ref",a].concat(l),[u,s]):(c=o.match(/^\s*\[(.*?)\]:\s*(\S+)(?:\s+(?:(['"])(.*?)\3|\((.*?)\)))?\n?/))?(E(a=C.call(this),c),[c[0].length]):1===l.length&&"string"==typeof l[0]?(s=["link_ref",a={ref:l[0].toLowerCase().replace(/\s+/," "),original:o.substr(0,u)},l[0]],[u,s]):[1,"["]},"<":function(t){var e;return null!==(e=t.match(/^<(?:((https?|ftp|mailto):[^>]+)|(.*?@.*?\.[a-zA-Z]+))>/))?e[3]?[e[0].length,["link",{href:"mailto:"+e[3]},e[3]]]:"mailto"===e[2]?[e[0].length,["link",{href:e[1]},e[1].substr("mailto:".length)]]:[e[0].length,["link",{href:e[1]},e[1]]]:[1,"<"]},"`":function(t){var e=t.match(/(`+)(([\s\S]*?)\1)/);return e&&e[2]?[e[1].length+e[2].length,["inlinecode",e[3]]]:[1,"`"]},"  \n":function(){return[3,["linebreak"]]}}};function b(t,e){var n=t+"_state",r="strong"===t?"em_state":"strong_state";function o(t){this.len_after=t,this.name="close_"+e}return function(i){if(this[n][0]===e)return this[n].shift(),[i.length,new o(i.length-e.length)];var s=this[r].slice(),a=this[n].slice();this[n].unshift(e);var u=this.processInline(i.substr(e.length)),l=u[u.length-1];this[n].shift();return l instanceof o?(u.pop(),[i.length-l.len_after,[t].concat(u)]):(this[r]=s,this[n]=a,[e.length,e])}}function C(){c(this.tree)||this.tree.splice(1,0,{});var t=c(this.tree);return void 0===t.references&&(t.references={}),t}function E(t,e){e[2]&&"<"===e[2][0]&&">"===e[2][e[2].length-1]&&(e[2]=e[2].substring(1,e[2].length-1));var n=t.references[e[1].toLowerCase()]={href:e[2]};void 0!==e[4]?n.title=e[4]:void 0!==e[5]&&(n.title=e[5])}v.inline["**"]=b("strong","**"),v.inline.__=b("strong","__"),v.inline["*"]=b("em","*"),v.inline._=b("em","_"),a.dialects.Gruber=v,a.buildBlockOrder(a.dialects.Gruber.block),a.buildInlinePatterns(a.dialects.Gruber.inline);var A=h.subclassDialect(v);c=e.extract_attr,f=e.forEach;A.processMetaHash=function(t){for(var e=function(t){var e=t.split(""),n=[""],r=!1;for(;e.length;){var o=e.shift();switch(o){case" ":r?n[n.length-1]+=o:n.push("");break;case"'":case'"':r=!r;break;case"\\":o=e.shift();default:n[n.length-1]+=o}}return n}(t),n={},r=0;r<e.length;++r)if(/^#/.test(e[r]))n.id=e[r].substring(1);else if(/^\./.test(e[r]))n.class?n.class=n.class+e[r].replace(/./," "):n.class=e[r].substring(1);else if(/\=/.test(e[r])){var o=e[r].split(/\=/);n[o[0]]=o[1]}return n},A.block.document_meta=function(t){if(!(t.lineNumber>1)&&t.match(/^(?:\w+:.*\n)*\w+:.*$/)){c(this.tree)||this.tree.splice(1,0,{});var e=t.split(/\n/);for(var n in e){var r=e[n].match(/(\w+):\s*(.*)$/),o=r[1].toLowerCase(),i=r[2];this.tree[1][o]=i}return[]}},A.block.block_meta=function(t){var e=t.match(/(^|\n) {0,3}\{:\s*((?:\\\}|[^\}])*)\s*\}$/);if(e){var n,r=this.dialect.processMetaHash(e[2]);if(""===e[1]){var o=this.tree[this.tree.length-1];if(n=c(o),"string"==typeof o)return;for(var i in n||(n={},o.splice(1,0,n)),r)n[i]=r[i];return[]}var s=t.replace(/\n.*$/,""),a=this.processBlock(s,[]);for(var i in(n=c(a[0]))||(n={},a[0].splice(1,0,n)),r)n[i]=r[i];return a}},A.block.definition_list=function(t,e){var n,r=/^((?:[^\s:].*\n)+):\s+([\s\S]+)$/,o=["dl"];if(a=t.match(r)){for(var i=[t];e.length&&r.exec(e[0]);)i.push(e.shift());for(var s=0;s<i.length;++s){var a,u=(a=i[s].match(r))[1].replace(/\n$/,"").split(/\n/),l=a[2].split(/\n:\s+/);for(n=0;n<u.length;++n)o.push(["dt",u[n]]);for(n=0;n<l.length;++n)o.push(["dd"].concat(this.processInline(l[n].replace(/(\n)\s+/,"$1"))))}return[o]}},A.block.table=function(t){var e,n,r=function(t,e){(e=e||"\\s").match(/^[\\|\[\]{}?*.+^$]$/)&&(e="\\"+e);for(var n,r=[],o=new RegExp("^((?:\\\\.|[^\\\\"+e+"])*)"+e+"(.*)");n=t.match(o);)r.push(n[1]),t=n[2];return r.push(t),r};if(n=t.match(/^ {0,3}\|(.+)\n {0,3}\|\s*([\-:]+[\-| :]*)\n((?:\s*\|.*(?:\n|$))*)(?=\n|$)/))n[3]=n[3].replace(/^\s*\|/gm,"");else if(!(n=t.match(/^ {0,3}(\S(?:\\.|[^\\|])*\|.*)\n {0,3}([\-:]+\s*\|[\-| :]*)\n((?:(?:\\.|[^\\|])*\|.*(?:\n|$))*)(?=\n|$)/)))return;var o=["table",["thead",["tr"]],["tbody"]];n[2]=n[2].replace(/\|\s*$/,"").split("|");var i=[];for(f(n[2],(function(t){t.match(/^\s*-+:\s*$/)?i.push({align:"right"}):t.match(/^\s*:-+\s*$/)?i.push({align:"left"}):t.match(/^\s*:-+:\s*$/)?i.push({align:"center"}):i.push({})})),n[1]=r(n[1].replace(/\|\s*$/,""),"|"),e=0;e<n[1].length;e++)o[1][1].push(["th",i[e]||{}].concat(this.processInline(n[1][e].trim())));return f(n[3].replace(/\|\s*$/gm,"").split("\n"),(function(t){var n=["tr"];for(t=r(t,"|"),e=0;e<t.length;e++)n.push(["td",i[e]||{}].concat(this.processInline(t[e].trim())));o[2].push(n)}),this),[o]},A.inline["{:"]=function(t,e,n){if(!n.length)return[2,"{:"];var r=n[n.length-1];if("string"==typeof r)return[2,"{:"];var o=t.match(/^\{:\s*((?:\\\}|[^\}])*)\s*\}/);if(!o)return[2,"{:"];var i=this.dialect.processMetaHash(o[1]),s=c(r);for(var a in s||(s={},r.splice(1,0,s)),i)s[a]=i[a];return[o[0].length,""]},a.dialects.Maruku=A,a.dialects.Maruku.inline.__escape__=/^\\[\\`\*_{}\[\]()#\+.!\-|:]/,a.buildBlockOrder(a.dialects.Maruku.block),a.buildInlinePatterns(a.dialects.Maruku.inline),t.Markdown=a,t.parse=a.parse,t.toHTML=a.toHTML,t.toHTMLTree=a.toHTMLTree,t.renderJsonML=a.renderJsonML,t.DialectHelpers=h}((window.markdown={},window.markdown)),e.markdown=window.markdown}.apply(e,r))||(t.exports=o)},,function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(23),n(45),n(134)],void 0===(o=function(t,e,n,r,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){var e=t.call(this)||this;return e.labelDOMNode=o.SmartDOMTextOverflowElement.createElement("label"),e.iconDOMNode=document.createElement("span"),e.inputDOMNode=document.createElement("input"),e.inputDOMNode.setAttribute("type","text"),e.setClass("ui ui-ribbon-text-field"),e.root.appendChild(e.iconDOMNode),e.root.appendChild(e.labelDOMNode.getRoot()),e.root.appendChild(e.inputDOMNode),e.inputDOMNode.oninput=function(){var t=e.getFirstParent(r.RibbonMenu);t&&t.trigger("change",e,e.getValue()),e.trigger("change")},e}return s(e,t),e.prototype.getInputDOMNode=function(){return this.inputDOMNode},e.prototype.setIcon=function(t){return this.iconDOMNode.className="icon "+(t?"vfb vfb-"+t:""),this},e.prototype.setLabel=function(t){return this.labelDOMNode.textContent=t||"",this},e.prototype.setLabelWidth=function(t){return this.labelDOMNode.getRoot().style.width=t,this.labelDOMNode.update(),this},e.prototype.setWidth=function(t){return this.inputDOMNode.style.width=t,this},e.prototype.setValue=function(t){return this.inputDOMNode.value=t,this},e.prototype.getValue=function(){return this.inputDOMNode.value},e.prototype.setTooltip=function(t){return this.tooltip=t,this.inputDOMNode.title=t||"",this},e.prototype.setPlaceholder=function(t){return this.inputDOMNode.placeholder=t||"",this},e.prototype.focus=function(){this.inputDOMNode.focus()},e.prototype.setDisabled=function(e){return this.inputDOMNode.disabled=e,t.prototype.setDisabled.call(this,e)},e}(n.NodeAbstract);e.TextField=i}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(0)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){this.sdkLoaded=!1}return t.prototype.withAuthZero=function(t){return this.authZero=t,this},t.prototype.getAuthZero=function(){return this.authZero},t.prototype.loadSDK=function(){var t=this;return this.sdkLoaded?n.Deferred((function(t){t.resolve(!0)})):n.Deferred((function(e){t.getAuthZero().trigger("before-load");var n=document.createElement("script"),r=document.getElementsByTagName("script")[0];n.setAttribute("src",t.config.sdkURL),n.setAttribute("type","text/javascript"),n.addEventListener("load",(function(r){e.resolve(!0),t.sdkLoaded=!0,n.parentNode.removeChild(n),t.getAuthZero().trigger("after-load")}),!1),n.addEventListener("error",(function(r){e.reject(new Error('Failed to load SDK: "'+t.config.sdkURL+'"')),n.parentNode.removeChild(n),t.getAuthZero().trigger("after-load")}),!1),r.parentNode.insertBefore(n,r)}))},t}();e.AuthZeroPlugin=r}.apply(e,r))||(t.exports=o)},,function(t,e,n){"use strict";var r,o;r=[n,e,n(6),n(1)],void 0===(o=function(t,e,n,r){Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.formatFloat=function(t,e){return void 0===e&&(e=2),this.formatNumberParts(t.toFixed(e).split("."),e)},t.formatInt=function(t){return this.formatNumberParts(String(t.toFixed(0)).split("."),0)},t.formatNumberParts=function(t,e){return t[0]=parseInt(t[0]).toLocaleString(),t[1]&&(t[1].length>e&&(t[1]=t[1].substr(0,e)),t[1]=t[1].replace(/[0]+$/g,""),t[1]===this.getThousandsSeparator()&&(t[1]=""),""===t[1]&&t.splice(1,1)),t.join(this.getDecimalSeparator())},t.getDecimalSeparator=function(){return 1.1.toLocaleString().substr(1,1)},t.getThousandsSeparator=function(){return 1e4.toLocaleString().substr(2,1)},t.castNumberAsCurrency=function(t){return parseFloat((Number(t)||0).toFixed(2))},t.priceToHTML=function(t){if(!t)return t;if("string"!=typeof t)return t;if(void 0!==this.priceToHTMLCache[t])return this.priceToHTMLCache[t];var e=t.split(" ");if(2!==e.length)return t;if(e[0]=e[0].replace(new RegExp("["+this.getThousandsSeparator()+"]+","g"),"").replace(new RegExp("["+this.getDecimalSeparator()+"]+","g"),"."),isNaN(Number(e[0]))&&"?"!==e[0])return t;if(!Number(e[0])&&"?"!==e[0])return r.I18n.translateApplicationText("Free","i18n.currency.price-format");var n=e[0].split(".");1===n.length&&n.push("?"===n[0]?"?":"0");for(var o,i="?"===n[0]?"?":~~n[0],s=~~n[1],a=0;"0"===n[1].charAt(0);)a++,n[1]=n[1].substr(1);switch(e[1]){case"USD":o=this.formatPrice("&dollar;",i,s,a,!0);break;case"EUR":o=this.formatPrice("&euro;",i,s,a,!0);break;case"GBP":o=this.formatPrice("&#163;",i,s,a,!0);break;case"JPY":o=this.formatPrice("&yen;",i,s,a,!0);break;case"AUD":o=this.formatPrice("A&dollar; ",i,s,a,!0);break;case"CAD":o=this.formatPrice("C&dollar; ",i,s,a,!0);break;case"NZD":o=this.formatPrice("NZ&dollar; ",i,s,a,!0);break;case"PKR":case"INR":o=this.formatPrice("&#8360;",i,s,a,!0);break;case"BRL":o=this.formatPrice("R&dollar; ",i,s,a,!0);break;case"MYR":o=this.formatPrice("RM",i,s,a,!0);break;case"ZAR":o=this.formatPrice("R",i,s,a,!0);break;case"UAH":o=this.formatPrice("&#8372;",i,s,a,!0);break;case"PHP":o=this.formatPrice("&#8369;",i,s,a,!0);break;case"EGP":o=this.formatPrice("LE",i,s,a,!0);break;default:o=this.formatPrice(r.I18n.translateApplicationText(e[1],"i18n.currency")+" ",i,s,a,!1)}return this.priceToHTMLCache[t]='<span data-role="price">'+o+"</span>"},t.formatPrice=function(t,e,o,i,s){return r.I18n.translateApplicationText((e<0?"-":"")+"%1"+(s?"":" ")+"%2","i18n.currency.price-format"+(s?".symbol":""),0," "+t,(0!==e?"?"===e?"?":this.formatInt(Math.abs(e)):"0")+(o>0?"<sup>"+n.Strings.strPad(n.Strings.strPad("",i,"0",n.EStringPadType.PAD_LEFT)+String(o),2,"0",n.EStringPadType.PAD_RIGHT).substr(0,2)+"</sup>":"")).trim()},t.priceToHTMLCache={},t}();e.NumberUtils=o}.apply(e,r))||(t.exports=o)},,,,function(t,e,n){"use strict";var r,o;r=[n,e,n(0)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.indexedDB=window.indexedDB||window.webkitIndexedDB||window["mozIndexedDB "]||window["OIndexedDB "]||window.msIndexedDB||null,this.IDBTransaction=window.IDBTransaction||window.webkitIDBTransaction||window.OIDBTransaction||window.msIDBTransaction||null,this.dbVersion=1,this.databaseName=t}return t.prototype.isSupported=function(){return null!==this.indexedDB&&null!==this.IDBTransaction},t.prototype.getDatabaseName=function(){return this.databaseName},t.prototype.getIndexedDBPrototype=function(){return this.indexedDB},t.prototype.getIDBTransactionPrototype=function(){return this.IDBTransaction},t.prototype.createObjectStore=function(t){var e=this;return this.connection||(this.connection=n.Deferred((function(n){var r,i=e.indexedDB.open(e.databaseName,e.dbVersion),s=function(e){e.createObjectStore(t)};i.onerror=function(t){n.reject(new Error("Error creating/accessing IndexedDB database (in request)"))},i.onsuccess=function(a){if(console.warn("[IndexedDB] database created / accessed"),(r=i.result).onerror=function(t){n.reject(new Error("Error creating / accessing IndexedDB database (in db)"))},r.setVersion)if(r.version!==e.dbVersion){var u=r.setVersion(e.dbVersion);u.onsuccess=function(){s(r),n.resolve(new o(r,e.databaseName,t,e))},u.onerror=function(){n.reject(new Error("Error creating / accessing IndexedDB database (in setVersion)"))}}else n.resolve(new o(r,e.databaseName,t,e));else n.resolve(new o(r,e.databaseName,t,e))},i.onupgradeneeded=function(r){s(r.target.result),console.warn("on upgrade ended"),n.resolve(new o(r.target.result,e.databaseName,t,e))}}))),this.connection},t}();e.IndexedDB=r;var o=function(){function t(t,e,n,r){this.db=t,this.objectStoreName=n,this.databaseName=e,this.indexedDB=r}return t.prototype.getDb=function(){return this.db},t.prototype.getDatabaseName=function(){return this.databaseName},t.prototype.getObjectStoreName=function(){return this.objectStoreName},t.prototype.storeBlob=function(t,e){var r=this;return n.Deferred((function(n){try{var o=r.db.transaction([r.objectStoreName],"readwrite"),s=(o.objectStore(r.objectStoreName).put(t,e),o.objectStore(r.objectStoreName).get(e));s.onsuccess=function(t){n.resolve(new i(t.target.result,e))},s.onerror=function(){n.reject(new Error("Failed to store blob in IndexedDB Object Store ("+r.databaseName+"/"+r.objectStoreName+")!"))}}catch(t){console.error(t),n.reject(new Error("Failed to store blob "+JSON.stringify(e)+" in IndexedDB Object Store: "+t.toString().replace(/^Error /g,"")))}}))},t.prototype.getBlob=function(t){var e=this;return n.Deferred((function(n){try{var r=e.db.transaction([e.objectStoreName],"readonly").objectStore(e.objectStoreName).get(t);r.onsuccess=function(e){n.resolve(new i(e.target.result,t))},r.onerror=function(){n.reject(new Error("Failed to fetch blob "+JSON.stringify(t)+" from IndexedDB Object Store ("+e.databaseName+"/"+e.objectStoreName+")!"))}}catch(e){console.error(e),n.reject(new Error("Failed to fetch blob "+JSON.stringify(t)+" from IndexedDB Object Store: "+e.toString().replace(/^Error /g,"")))}}))},t.prototype.deleteBlob=function(t){var e=this;return n.Deferred((function(n){try{var r=e.db.transaction([e.objectStoreName],"readwrite").objectStore(e.objectStoreName).delete(t);r.onsuccess=function(t){n.resolve()},r.onerror=function(){n.reject(new Error("Failed to store blob in IndexedDB Object Store ("+e.databaseName+"/"+e.objectStoreName+")!"))}}catch(e){n.reject(new Error("Failed to delete blob "+JSON.stringify(t)+"from IndexedDB Object Store: "+e.toString().replace(/^Error /g,"")))}}))},t.prototype.clear=function(){var t=this;return n.Deferred((function(e){try{var n=t.db.transaction([t.objectStoreName],"readwrite").objectStore(t.objectStoreName).clear();n.onsuccess=function(){e.resolve()},n.onerror=function(){e.reject(new Error("Failed to clear IndexedDB object store ("+t.databaseName+"/"+t.objectStoreName+")"))}}catch(n){e.reject(new Error("Failed to clear IndexedDB object store ("+t.databaseName+"/"+t.objectStoreName+"): "+n.toString().replace(/^Error: /g,"")))}}))},t}();e.IndexedDBObjectStore=o;var i=function(){function t(t,e){this.blob=t,this.name=e}return t.prototype.getName=function(){return this.name},t.prototype.getBlob=function(){return this.blob},t.prototype.createObjectURL=function(t){var e=window.URL||window.webkitURL;if(!e||!e.createObjectURL||!e.revokeObjectURL)return null;var n=e.createObjectURL(this.blob);return t&&setTimeout((function(){e.revokeObjectURL(n)}),t),n},t.prototype.createMockFile=function(t,e){return new s(this.blob,t,e)},t}();e.IndexedDBBlob=i;var s=function(){function t(t,e,n){this.blob=t,this.fileName=e,this.fileType=n}return t.prototype.getBlob=function(){return this.blob},Object.defineProperty(t.prototype,"name",{get:function(){return this.fileName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this.fileType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.blob.size},enumerable:!0,configurable:!0}),t}();e.IndexedDBMockedFile=s}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(38),n(45)],void 0===(o=function(t,e,n,r){Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){var e=t.call(this)||this;return e.value=!1,e.addClass("checkable"),e}return s(e,t),e.prototype.onClick=function(){this.setValue(!this.getValue()),this.trigger("click");var t=this.getFirstParent(r.RibbonMenu);t&&t.trigger("change",this,this.getValue())},e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t){return this.value=t,this.value?this.addClass("pressed"):this.removeClass("pressed"),this},e}(n.Button);e.TwoStateButton=o}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(225),n(105),n(226)],void 0===(o=function(t,e,n,r,o){var i;Object.defineProperty(e,"__esModule",{value:!0}),n.yy.parseError=n.parseError,function(t){t[t.NO_ERRORS=0]="NO_ERRORS",t[t.ERROR_PARSING_EXPRESSION=1]="ERROR_PARSING_EXPRESSION"}(i=e.ECompilerResult||(e.ECompilerResult={}));var s=function(){function t(){}return t.prototype.setResult=function(t){return this.result=t,this},t.prototype.getResult=function(){return this.result},t.prototype.getError=function(){return this.error},t.prototype.setError=function(t){return this.error=t,this},t.prototype.setParsedData=function(t){return this.parsedData=t,this},t.prototype.getParsedData=function(){if(this.error)throw new Error("Failed to parse expression");return this.parsedData},t.prototype.getExpression=function(){return this.compiledExpression||(this.compiledExpression=r.Expression.createFrom(this.getParsedData()))},t}();e.CompilerResult=s;var a=function(){function t(){}return t.compile=function(t){this.upgradeJisonFormula();try{return(new s).setResult(i.NO_ERRORS).setParsedData(n.parse(t))}catch(t){return(new s).setResult(i.ERROR_PARSING_EXPRESSION).setError(t)}},t.upgradeJisonFormula=function(){if(!this.JisonFormulaUpgraded){for(var t=0,e=n.lexer.rules.length;t<e;t++)n.lexer.rules[t]=o.RegexUtils.upgradeRegex(n.lexer.rules[t]);this.JisonFormulaUpgraded=!0}},t.formulaToAST=function(t,e){return this.compile(t).getExpression().toAST(e)},t.ASTToFormula=function(t){try{return(new s).setResult(i.NO_ERRORS).setParsedData(t)}catch(t){return(new s).setResult(i.ERROR_PARSING_EXPRESSION).setError(t)}},t.JisonFormulaUpgraded=!1,t}();e.ScriptingEngine=a}.apply(e,r))||(t.exports=o)},,function(t,e,n){"use strict";var r;void 0===(r=function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.SINGLE_LINE_TEXT=0]="SINGLE_LINE_TEXT",t[t.MULTI_LINE_TEXT=1]="MULTI_LINE_TEXT",t[t.MULTIPLE_SELECTION=2]="MULTIPLE_SELECTION",t[t.SINGLE_SELECTION=3]="SINGLE_SELECTION",t[t.BOOLEAN_VALUE=4]="BOOLEAN_VALUE",t[t.SIGNATURE_VALUE=5]="SIGNATURE_VALUE"}(e.EInputDefaultValue||(e.EInputDefaultValue={}));var n=function(){function t(){}return t.prototype.setValue=function(t){return this.value=t,this},t}();e.InputDefaultValue=n}.apply(e,[n,e]))||(t.exports=r)},,,function(t,e,n){"use strict";var r,o;r=[n,e,n(0),n(19),n(2),n(8),n(95),n(6),n(27),n(46),n(18),n(47),n(5),n(1),n(14),n(51)],void 0===(o=function(t,e,n,r,o,i,s,a,u,l,c,p,d,h,f,g){var m,y;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.US="com",t.EU="eu",t.UNKNOWN="unknown"}(m||(m={})),function(t){t[t.LOGIN=0]="LOGIN",t[t.CREATE_ACCOUNT=1]="CREATE_ACCOUNT",t[t.FORGOT_PASSWORD=2]="FORGOT_PASSWORD"}(y=e.LoginOrSignupSection||(e.LoginOrSignupSection={}));var v=function(){function t(t){this.userManager=t}return t.prototype.loginOrSignupAndReturnJWT=function(t,e){var r=this;return void 0===e&&(e=!1),n.Deferred((function(a){if(!navigator.onLine)return o.Dialog.alert("In order to authenticate, you must be connected to the internet","No internet connection"),void a.reject(new Error("No internet connection"));var u,l=new o.Dialog({width:"450px",height:"740px",closable:!e,title:"Loading ...",style:o.DialogStyle.FLAT_COLOR,onClose:function(){u(),a.reject(new Error("User aborted"))}}).center();l.getRoot().setAttribute("data-dialog-role","login-signup"),u=r.setupAuthZeroCallbacksAndReturnCleanupFunction(l),l.addLoadRequest(),n.when(i.NetworkCache.get("/static/templates/ui-v2/login/login-and-signup.html"),r.getWeeblyUserDetailsDeferForInternalUse(),d.API.get("cloud/platform")).then((function(e,o,i){l.removeLoadRequest(),l.getBody().innerHTML=e,h.I18n.translateDOMNode(l.getBody());var c,d,g,m=l.getBody().querySelector("script[data-id=login-form]").textContent.replace(/\[\[/g,"{{").replace(/]]/g,"}}"),v=l.getBody().querySelector("script[data-id=signup-form]").textContent.replace(/\[\[/g,"{{").replace(/]]/g,"}}"),b=l.getBody().querySelector("script[data-id=forgot-password]").textContent,C=p.OnPremiseInstallation.isSignupAllowed(),E=p.OnPremiseInstallation.isOnPremiseInstallation(),A=new s.TabsPanel,I=p.OnPremiseInstallation.getSignInMethods(),T={methods:{password:I.password,google:I.googlePlugin,facebook:I.facebookPlugin,microsoft:I.microsoftPlugin,hasThirdParty:I.googlePlugin||I.facebookPlugin||I.microsoftPlugin}};A.withPanel(c=(new s.TabsPanelSheet).setTitle(h.I18n.translateApplicationText("Log In","login-signup")).withId("login").setHTMLContent(f.Handlebars.to_html(m,T))),l.getRoot().setAttribute("data-on-premise",E?"1":"0"),C?(T.methods.password&&l.getRoot().setAttribute("data-form-signup","1"),A.withPanel(d=(new s.TabsPanelSheet).setTitle(h.I18n.translateApplicationText("Create Account","login-signup")).withId("signup").setHTMLContent(f.Handlebars.to_html(v,T)))):l.getRoot().setAttribute("data-form-signup","0"),A.withPanel(g=(new s.TabsPanelSheet).setTitle(h.I18n.translateApplicationText("Forgot Password","login-signup")).withId("forgot-password").setHTMLContent(b)),r.injectPlatformMigrationsTab(A,i),l.getBody().appendChild(A.getRoot()),h.I18n.translateDOMNode(l.getBody());var S={userName:c.getRootNode().querySelector("input[name=username]"),password:c.getRootNode().querySelector("input[name=password]")},w={firstName:d?d.getRootNode().querySelector("input[name=first_name]"):null,lastName:d?d.getRootNode().querySelector("input[name=last_name]"):null,email:d?d.getRootNode().querySelector("input[name=email]"):null,password:d?d.getRootNode().querySelector("input[name=password]"):null,confirmPassword:d?d.getRootNode().querySelector("input[name=confirm_password]"):null},_={usernameOrEmail:g.getRootNode().querySelector("input[name=email]")};-1!==window.location.href.indexOf("cmd=signup")&&(t=y.CREATE_ACCOUNT),function(t){n(l.getBody()).on("submit","form",(function(e){switch(e.preventDefault(),e.stopPropagation(),this.getAttribute("data-role")){case"login":t.handleLoginFormSubmit(S,l,a,u);break;case"signup":t.handleSignupFormSubmit(w,l,a,u);break;case"forgot-password":t.handleForgotPasswordFormSubmit(_,l,A,c)}})).on("click","button[data-role=auth-zero][data-platform]",(function(e){e.preventDefault(),e.stopPropagation();var n=this.getAttribute("data-platform");"email"===n?t.activateSignUpViaForm(l):t.handleAuthenticationUsingAuthZeroPlugin(n,l,a)})).on("click","a[data-role=cancel-form-signup]",(function(){t.cancelSignUpViaForm(l)})).on("click","a[data-role=cancel-forgot-password]",(function(){t.deactivateForgotPasswordTab(l,A,c)})).on("click","a[data-role=forgot-password]",(function(){t.activateForgotPasswordTab(l,A,g)})).on("input","form input",(function(){t.removeFieldError(this)}))}(r),r.prefillCreateAccountDialogWithWeeblyUserDetails(o,S,w),r.loadStartScreenTabBasedOnSection(l,t,A,d,g)})).fail((function(t){l.removeLoadRequest(),u(),l.close(),o.Dialog.alert("Failed to open Login / Signup window. Please retry. If the problem persists, contact support","Authentication"),a.reject(t)}))}))},t.prototype.loadStartScreenTabBasedOnSection=function(t,e,n,r,o){switch(e){case y.LOGIN:break;case y.CREATE_ACCOUNT:r&&n.setActiveSheet(r);break;case y.FORGOT_PASSWORD:this.activateForgotPasswordTab(t,n,o)}},t.prototype.setupAuthZeroCallbacksAndReturnCleanupFunction=function(t){var e=function(){t.addLoadRequest()},n=function(){t.removeLoadRequest()};return r.UserManager.getAuthZero().on("before-load",e),r.UserManager.getAuthZero().on("after-load",n),function(){r.UserManager.getAuthZero().off("before-load",e),r.UserManager.getAuthZero().off("after-load",n)}},t.prototype.handleAuthenticationUsingAuthZeroPlugin=function(t,e,n){var i=this;t&&(e.addLoadRequest(),r.UserManager.getAuthZero().getPlugin(t).authorize().then((function(r){var o={email:r.email,firstName:r.firstName,lastName:r.lastName,profilePicture:r.profilePicture,profileId:r.profileId,plugin:r.plugin};d.API.post("users/login/auth-zero",o).then((function(t){e.close(),setTimeout((function(){g.UsersAnalytics.event("login_authzero",{referrer:g.UsersAnalytics.getReferrer()})}),1e3),n.resolve(t)})).fail((function(e){i.isDuplicateGlobalUserIdException(e)&&i.triggerAuthZeroLoginInForeignRegion(o,e,t)||i.displayAuthenticationPluginErrorMessage(t)}))})).fail((function(){o.Dialog.alert(h.I18n.translateApplicationText("We encountered an error while trying to authenticate you with authentication provider %1. Please retry. If the problem persists, contact our support team","login-signup",0,t),h.I18n.translateApplicationText("Failed to authenticate with %1","login-signup",0,t))})).always((function(){e.removeLoadRequest()})))},t.prototype.displayAuthenticationPluginErrorMessage=function(t){o.Dialog.alert("We encountered an error while trying to sign you in with your "+t+" account. Please retry. If the problem persists, contact our support team","Failed to login you with "+t)},t.prototype.isDuplicateGlobalUserIdException=function(t){return u.BackendException.matches(t,"UserException","ERR_DUPLICATE_GLOBAL_USER_ID")||u.BackendException.matches(t,"AuthenticationException","ERR_DUPLICATE_GLOBAL_USER_ID")},t.prototype.activateSignUpViaForm=function(t){t.getRoot().setAttribute("data-form-signup","1")},t.prototype.cancelSignUpViaForm=function(t){t.getRoot().removeAttribute("data-form-signup")},t.prototype.addFieldError=function(t,e){var r=n(t).closest("label");r.addClass("error"),r.find("> .error").remove(),r.append("<div class='error' title='"+a.Strings.toHTML(e)+"'>"+a.Strings.toHTML(e)+"</div>")},t.prototype.removeFieldError=function(t){var e=n(t).closest("label");e.removeClass("error"),e.find("> .error").remove()},t.prototype.handleLoginFormSubmit=function(t,e,r,i){var s=this;if(!navigator.onLine)return o.Dialog.alert("In order to Sign in, you must be connected to the internet","No internet connection"),void r.reject(new Error("No internet connection"));var l={username:t.userName.value,password:t.password.value};this.removeFieldError(t.userName),this.removeFieldError(t.password),""!==a.Strings.trim(t.userName.value)?""!==t.password.value?(e.addLoadRequest(),n.ajax("/api/v1/users/login",{data:l,type:"POST"}).then((function(t){i(),e.close(),setTimeout((function(){g.UsersAnalytics.event("login",{referrer:g.UsersAnalytics.getReferrer()})}),1e3),r.resolve(t)})).fail((function(e){var n=u.BackendException.createFromXHR(e);if(s.isDuplicateGlobalUserIdException(n)&&s.triggerUserAndPasswordLoginInForeignRegion(l,n),!n){if(429!==e.status)return void o.Dialog.alert("An error occurred while attempting to login. Please check if you are connected to the internet, and retry. If the problem persists, contact support","Login error");n=new u.BackendException("Too many failed login requests").setCode("ERR_TOO_MANY_REQUESTS").setField("username").setType("NetworkError")}switch(n.getField()){case"username":s.addFieldError(t.userName,s.translateExceptionMessage(n.getMessage()));break;case"password":s.addFieldError(t.password,s.translateExceptionMessage(n.getMessage()));break;default:o.Dialog.alert(s.translateExceptionMessage(n.getMessage()),h.I18n.translateApplicationText("Login failed","login-signup"))}})).always((function(){e.removeLoadRequest()}))):this.addFieldError(t.password,h.I18n.translateApplicationText("Please provide your password","login-signup")):this.addFieldError(t.userName,h.I18n.translateApplicationText("Please provide your email","login-signup"))},t.prototype.handleSignupFormSubmit=function(t,e,n,r){var i=this;if(t.firstName&&t.lastName&&t.email&&t.password&&t.confirmPassword)if(navigator.onLine)if(""!==a.Strings.trim(t.firstName.value))if(""!==a.Strings.trim(t.email.value))if(""!==a.Strings.trim(t.password.value)){var s={first_name:a.Strings.trim(t.firstName.value),last_name:a.Strings.trim(t.lastName.value),email:a.Strings.trim(t.email.value),password:t.password.value,confirm_password:t.confirmPassword.value,user_name:a.Strings.trim(t.email.value)};e.addLoadRequest(),d.API.post("users/create-account",s).then((function(t){r(),e.close(),setTimeout((function(){g.UsersAnalytics.event("create_account",{referrer:g.UsersAnalytics.getReferrer()})}),1e3),n.resolve(t)})).fail((function(e){if(!i.isDuplicateGlobalUserIdException(e)||!i.triggerAccountCreationInForeignRegion(s,e))if(e instanceof u.BackendException)switch(e.getField()){case"first_name":i.addFieldError(t.firstName,i.translateExceptionMessage(e.getMessage()));break;case"last_name":i.addFieldError(t.lastName,i.translateExceptionMessage(e.getMessage()));break;case"email":i.addFieldError(t.email,i.translateExceptionMessage(e.getMessage()));break;case"password":i.addFieldError(t.password,i.translateExceptionMessage(e.getMessage()));break;case"confirm_password":i.addFieldError(t.confirmPassword,i.translateExceptionMessage(e.getMessage()));break;default:o.Dialog.alert(i.translateExceptionMessage(e.getMessage()),h.I18n.translateApplicationText("Create Account","login-signup"))}else o.Dialog.alert(h.I18n.translateApplicationText("Failed to create account. Please ensure all fields are filled, and that you have internet access. If the problem persists, contact support","create-account"),h.I18n.translateApplicationText("Create Account","login-signup"))})).always((function(){e.removeLoadRequest()}))}else this.addFieldError(t.password,h.I18n.translateApplicationText("Please provide a password","login-signup"));else this.addFieldError(t.email,h.I18n.translateApplicationText("Please provide your email","login-signup"));else this.addFieldError(t.firstName,h.I18n.translateApplicationText("Please provide your first name","login-signup"));else o.Dialog.alert("In order to Sign up, you must be connected to the internet","No internet connection")},t.prototype.handleForgotPasswordFormSubmit=function(t,e,n,r){var i=this;""!==a.Strings.trim(t.usernameOrEmail.value)?(this.removeFieldError(t.usernameOrEmail),e.addLoadRequest(),d.API.post("users/forgot-password",{email:t.usernameOrEmail.value}).then((function(){t.usernameOrEmail.value="",i.deactivateForgotPasswordTab(e,n,r),o.Dialog.alert(h.I18n.translateApplicationText("An email containing instructions has been sent to your email address. Please check your email (also check in Spam or Trash folder if email don't reach your inbox in a couple of minutes)","login-signup"),h.I18n.translateApplicationText("Forgot Password","login-signup"))})).fail((function(e){i.isDuplicateGlobalUserIdException(e)?i.triggerForgotPasswordInForeignRegion(e,t.usernameOrEmail.value):o.Dialog.alert(h.I18n.translateApplicationText("A server error occurred while attempting to reset your password. Please retry. If the problem persists, contact support","login-signup"),h.I18n.translateApplicationText("Forgot Password","login-signup"))})).always((function(){e.removeLoadRequest()}))):this.addFieldError(t.usernameOrEmail,h.I18n.translateApplicationText("Please provide your email","login-signup"))},t.prototype.prefillCreateAccountDialogWithWeeblyUserDetails=function(t,e,n){if(t&&(e.userName&&(e.userName.value=t.email),n.email&&(n.email.value=t.email),t.name&&n.firstName&&n.lastName)){var r=t.name.split(" "),o=r[0]||"",i=r.slice(1).join(" ")||"";a.Strings.trim(o)&&(n.firstName.value=a.Strings.trim(o)),a.Strings.trim(i)&&(n.lastName.value=a.Strings.trim(i))}},t.prototype.getWeeblyUserDetailsDeferForInternalUse=function(){var t=this;return n.Deferred((function(e){l.Platform.getPlatformDetails().platform===l.Platforms.WEEBLY?t.fetchWeeblyUserDetailsFromServer().then((function(t){e.resolve(t)})).fail((function(){e.resolve(null)})):e.resolve(null)}))},t.prototype.fetchWeeblyUserDetailsFromServer=function(){var t=null;return n.Deferred((function(e){try{t=c.PersistentStorage.getItem("weeblySiteId")}catch(t){e.reject(new Error("Local storage support not detected!"))}t||e.reject(new Error("Weebly site id or element id not set")),d.API.get("users/integration/weebly/"+t).then((function(t){e.resolve(t)})).fail((function(t){e.reject(t)}))}))},t.prototype.activateForgotPasswordTab=function(t,e,n){t.getRoot().setAttribute("data-forgot-password-form","1"),e.setActiveSheet(n)},t.prototype.deactivateForgotPasswordTab=function(t,e,n){t.getRoot().removeAttribute("data-forgot-password-form"),e.setActiveSheet(n)},t.prototype.translateExceptionMessage=function(t){if(!t)return t;var e;switch(!0){case!!(e=/^User not found or invalid password \((.*)\)$/i.exec(t)):return h.I18n.translateApplicationText("User not found or invalid password (%1)","login-signup",0,e[1]);case!!(e=/^The address "(.*)" does not seem to be a valid email address!$/i.exec(t)):return h.I18n.translateApplicationText("The address '%1' does not seem to be a valid email address!","login-signup",0,e[1]);default:return h.I18n.translateApplicationText(t,"login-signup")}},t.prototype.injectPlatformMigrationsTab=function(t,e){var n=[];switch(!0){case"main"===e.platform&&e.region===m.US&&!!e.supportedMigrationRegions&&e.supportedMigrationRegions.indexOf(m.EU)>-1:n.push(m.EU);break;case"main"===e.platform&&e.region===m.EU&&!!e.supportedMigrationRegions&&e.supportedMigrationRegions.indexOf(m.US)>-1:n.push(m.US)}if(0!==n.length){var r=t.getSheetTitlesNode().appendChild(document.createElement("div"));r.setAttribute("data-role","sheet-title"),r.className="datacenter-region",r.innerHTML='<img alt="region-flag" src="'+this.getRegionFlag(e.region)+'" />'+this.getShortRegionName(e.region)+' <span class="vfb vfb-expand"></span>',r.tabIndex=0;var o=r.appendChild(document.createElement("div"));o.className="overlay";var i=o.appendChild(document.createElement("div"));i.innerHTML="<img alt='region-flag' src=\""+this.getRegionFlag(e.region)+'" />'+h.I18n.translateApplicationText("Current <b>AbcSubmit region</b>: <b>%1</b>","login-signup",0,h.I18n.translateApplicationText(this.getLongRegionName(e.region),"login-signup")),i.className="region";var s=o.appendChild(document.createElement("div"));s.className="new-region",s.innerHTML="<img alt='region-flag' src=\""+this.getRegionFlag(n[0])+'" /><div>'+h.I18n.translateApplicationText("Use <a href='%1'>AbcSubmit %2</a> region instead","login-signup",0,this.generateURLForRegion(n[0],e.region),h.I18n.translateApplicationText(this.getLongRegionName(n[0]),"login-signup"))+"</div>"}},t.prototype.getShortRegionName=function(t){switch(t){case m.EU:return"EU";case m.US:return"US";case m.UNKNOWN:default:return"Unknown"}},t.prototype.getLongRegionName=function(t){switch(t){case m.EU:return"Europe";case m.US:return"United States";case m.UNKNOWN:default:return"Unknown"}},t.prototype.getRegionFlag=function(t){switch(t){case m.EU:return"/css/shared/img/eu.png";case m.US:return"/css/shared/img/us.png";default:return null}},t.prototype.generateURLForRegion=function(t,e){var n=window.location.href.replace(t===m.US?"abcsubmit.eu":"abcsubmit.com","abcsubmit."+t);return-1===n.indexOf("original-region=")&&(n=n.indexOf("?")>-1?n.concat("&original-region="+e):n.concat("?original-region="+e)),n},t.prototype.getForeignAPIInstance=function(t){switch(t){case m.US:return new d.APIInstance("//www.abcsubmit.com/api/v1");case m.EU:return new d.APIInstance("//www.abcsubmit.eu/api/v1");default:return null}},t.prototype.triggerAuthZeroLoginInForeignRegion=function(t,e,n){var r=this,o=e.getMessage().split(": ")[1];if(!o)return!1;var i=this.getForeignAPIInstance(o);return!!i&&(i.post("users/login/auth-zero",t).then((function(t){var e=r.generateURLForRegion(o,"unknown");e=e.concat("&jwt="+t),location.href=e})).fail((function(){r.displayAuthenticationPluginErrorMessage(n)})),!0)},t.prototype.triggerUserAndPasswordLoginInForeignRegion=function(t,e){var n=this,r=e.getMessage().split(": ")[1];if(!r)return!1;var o=this.getForeignAPIInstance(r);return!!o&&(o.post("users/login",t).then((function(t){var e=n.generateURLForRegion(r,"unknown");e=e.concat("&jwt="+t),location.href=e})),!0)},t.prototype.triggerAccountCreationInForeignRegion=function(t,e){var n=this,r=e.getMessage().split(": ")[1];return!!r&&(o.Dialog.confirm(h.I18n.translateApplicationText("Account already exists","login-signup"),h.I18n.translateApplicationText("Account associated with email %1 already exists in Abcsubmit %2 region.\n\nDo you want to switch to Abcsubmit %2 region and try to login from there?","login-signup",0,t.email,h.I18n.translateApplicationText(this.getLongRegionName(r),"login-signup"))).then((function(){window.location.href=n.generateURLForRegion(r,"unknown")})),!0)},t.prototype.triggerForgotPasswordInForeignRegion=function(t,e){var n=this,r=t.getMessage().split(": ")[1];return!!r&&(o.Dialog.confirm(h.I18n.translateApplicationText("Forgot Password","login-signup"),h.I18n.translateApplicationText("Account associated with email %1 already exists in Abcsubmit %2 region.\n\nDo you want to switch to Abcsubmit %2 region and try to login from there?","login-signup",0,e,h.I18n.translateApplicationText(this.getLongRegionName(r),"login-signup"))).then((function(){window.location.href=n.generateURLForRegion(r,"unknown")})),!0)},t}();e.LoginAndSignUp=v}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(68),n(37)],void 0===(o=function(t,e,n,r){Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){this.invoice=t}return t.prototype.isRemovable=function(){return!1},t.prototype.getProductControlId=function(){return null},t.prototype.getShopItemId=function(){return null},t.prototype.getChoice=function(){return null},t.prototype.serialize=function(){return{type:this.type,name:this.name,valueFormula:this.valueFormula,valueType:this.valueType,quantityFormula:this.quantityFormula?this.quantityFormula:null}},t.prototype.getItemType=function(){return this.type},t.prototype.setItemName=function(t){return this.name=t,this},t.prototype.getItemName=function(){return this.name},t.prototype.setValueFormula=function(t){return this.valueFormula=t,this},t.prototype.getValueFormula=function(){return this.valueFormula},t.prototype.setComputedValue=function(t){var e=Number(t)||0;return e!==this.computedValue&&(this.computedValue=e,this.invoice.trigger("compute")),this},t.prototype.getComputedValue=function(){return this.computedValue},t.prototype.setValueType=function(t){return this.valueType=t,this},t.prototype.getValueType=function(){return this.valueType},t.prototype.compileExpressions=function(){void 0!==this.valueExpression&&void 0!==this.quantityExpression||(this.valueFormula?this.valueExpression=n.ScriptingEngine.compile(this.valueFormula).getExpression():this.valueExpression=null,this.quantityFormula?this.quantityExpression=n.ScriptingEngine.compile(this.quantityFormula).getExpression():this.quantityExpression=null)},t.prototype.getValueExpression=function(){return this.valueExpression},t.prototype.getQuantityExpression=function(){return this.quantityExpression},t.prototype.incrementSubtotal=function(t){var e=t;return this.valueType===r.EInvoiceItemValueType.PERCENTUAL?e+=t/100*this.computedValue:e+=this.computedValue,e},t.prototype.incrementTotal=function(t,e){var n=e;return this.valueType===r.EInvoiceItemValueType.PERCENTUAL?n+=e/100*this.computedValue:n+=this.computedValue,n},t.prototype.onRemovedFromInvoice=function(){},t}();e.InvoiceRow=o}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(7)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.getCountriesList=function(){return n.Helpers.clone(this.COUNTRIES)},t.getCountryNameByCode=function(t){for(var e=t?t.toUpperCase():null,n=0,r=this.COUNTRIES.length;n<r;n++)if(this.COUNTRIES[n].code===e)return this.COUNTRIES[n].name;return null},t.getCountryByCode=function(t){for(var e=t?t.toUpperCase():null,n=0,r=this.COUNTRIES.length;n<r;n++)if(this.COUNTRIES[n].code===e)return this.COUNTRIES[n];return null},t.getConnectionDetails=function(){if(void 0!==this.CONNECTION_DETAILS)return this.CONNECTION_DETAILS;var t=document.querySelector('script[type="application/json"]#connection-details');if(t)try{this.CONNECTION_DETAILS=JSON.parse(t.textContent)}catch(t){this.CONNECTION_DETAILS=null}else this.CONNECTION_DETAILS=null;return this.CONNECTION_DETAILS},t.isAllowedViewerCountry=function(t,e){return null===t||!e||!e.length||e.indexOf(t.toUpperCase())>-1},t.isForbiddenViewerCountry=function(t,e){return!(null===t||!e||!e.length)&&e.indexOf(t.toUpperCase())>-1},t.COUNTRIES=[{name:"Afghanistan",code:"AF",flag:"AF"},{name:"Ãland Islands",code:"AX",flag:"AX"},{name:"Albania",code:"AL",flag:"AL"},{name:"Algeria",code:"DZ",flag:"DZ"},{name:"American Samoa",code:"AS",flag:"AS"},{name:"Andorra",code:"AD",flag:"AD"},{name:"Angola",code:"AO",flag:"AO"},{name:"Anguilla",code:"AI",flag:"AI"},{name:"Antarctica",code:"AQ",flag:"AQ"},{name:"Antigua and Barbuda",code:"AG",flag:"AG"},{name:"Argentina",code:"AR",flag:"AR"},{name:"Armenia",code:"AM",flag:"AM"},{name:"Aruba",code:"AW",flag:"AW"},{name:"Australia",code:"AU",flag:"AU"},{name:"Austria",code:"AT",flag:"AT"},{name:"Azerbaijan",code:"AZ",flag:"AZ"},{name:"Bahamas",code:"BS",flag:"BS"},{name:"Bahrain",code:"BH",flag:"BH"},{name:"Bangladesh",code:"BD",flag:"BD"},{name:"Barbados",code:"BB",flag:"BB"},{name:"Belarus",code:"BY",flag:"BY"},{name:"Belgium",code:"BE",flag:"BE"},{name:"Belize",code:"BZ",flag:"BZ"},{name:"Benin",code:"BJ",flag:"BJ"},{name:"Bermuda",code:"BM",flag:"BM"},{name:"Bhutan",code:"BT",flag:"BT"},{name:"Bolivia",code:"BO",flag:"BO"},{name:"Bosnia and Herzegovina",code:"BA",flag:"BA"},{name:"Botswana",code:"BW",flag:"BW"},{name:"Bouvet Island",code:"BV",flag:"NO"},{name:"Brazil",code:"BR",flag:"BR"},{name:"British Indian Ocean Territory",code:"IO",flag:"UNKNOWN"},{name:"Brunei Darussalam",code:"BN",flag:"BN"},{name:"Bulgaria",code:"BG",flag:"BG"},{name:"Burkina Faso",code:"BF",flag:"BF"},{name:"Burundi",code:"BI",flag:"BI"},{name:"Cambodia",code:"KH",flag:"KH"},{name:"Cameroon",code:"CM",flag:"CM"},{name:"Canada",code:"CA",flag:"CA"},{name:"Cape Verde",code:"CV",flag:"CV"},{name:"Cayman Islands",code:"KY",flag:"KY"},{name:"Central African Republic",code:"CF",flag:"CF"},{name:"Chad",code:"TD",flag:"TD"},{name:"Chile",code:"CL",flag:"CL"},{name:"China",code:"CN",flag:"CN"},{name:"Christmas Island",code:"CX",flag:"CX"},{name:"Cocos (Keeling) Islands",code:"CC",flag:"CC"},{name:"Colombia",code:"CO",flag:"CO"},{name:"Comoros",code:"KM",flag:"KM"},{name:"Congo",code:"CG",flag:"CG"},{name:"Congo, The Democratic Republic of the",code:"CD",flag:"CD"},{name:"Cook Islands",code:"CK",flag:"CK"},{name:"Costa Rica",code:"CR",flag:"CR"},{name:"Cote D'Ivoire",code:"CI",flag:"CI"},{name:"Croatia",code:"HR",flag:"HR"},{name:"Cuba",code:"CU",flag:"CU"},{name:"Cyprus",code:"CY",flag:"CY"},{name:"Czech Republic",code:"CZ",flag:"CZ"},{name:"Denmark",code:"DK",flag:"DK"},{name:"Djibouti",code:"DJ",flag:"DJ"},{name:"Dominica",code:"DM",flag:"DM"},{name:"Dominican Republic",code:"DO",flag:"DO"},{name:"Ecuador",code:"EC",flag:"EC"},{name:"Egypt",code:"EG",flag:"EG"},{name:"El Salvador",code:"SV",flag:"SV"},{name:"Equatorial Guinea",code:"GQ",flag:"GQ"},{name:"Eritrea",code:"ER",flag:"ER"},{name:"Estonia",code:"EE",flag:"EE"},{name:"Ethiopia",code:"ET",flag:"ET"},{name:"Falkland Islands (Malvinas)",code:"FK",flag:"FK"},{name:"Faroe Islands",code:"FO",flag:"FO"},{name:"Fiji",code:"FJ",flag:"FJ"},{name:"Finland",code:"FI",flag:"FI"},{name:"France",code:"FR",flag:"FR"},{name:"French Guiana",code:"GF",flag:"UNKNOWN"},{name:"French Polynesia",code:"PF",flag:"PF"},{name:"French Southern Territories",code:"TF",flag:"TF"},{name:"Gabon",code:"GA",flag:"GA"},{name:"Gambia",code:"GM",flag:"GM"},{name:"Georgia",code:"GE",flag:"GE"},{name:"Germany",code:"DE",flag:"DE"},{name:"Ghana",code:"GH",flag:"GH"},{name:"Gibraltar",code:"GI",flag:"GI"},{name:"Greece",code:"GR",flag:"GR"},{name:"Greenland",code:"GL",flag:"GL"},{name:"Grenada",code:"GD",flag:"GD"},{name:"Guadeloupe",code:"GP",flag:"UNKNOWN"},{name:"Guam",code:"GU",flag:"GU"},{name:"Guatemala",code:"GT",flag:"GT"},{name:"Guernsey",code:"GG",flag:"GG"},{name:"Guinea",code:"GN",flag:"GN"},{name:"Guinea-Bissau",code:"GW",flag:"GW"},{name:"Guyana",code:"GY",flag:"GY"},{name:"Haiti",code:"HT",flag:"HT"},{name:"Heard Island and Mcdonald Islands",code:"HM",flag:"GB"},{name:"Holy See (Vatican City State)",code:"VA",flag:"VA"},{name:"Honduras",code:"HN",flag:"HN"},{name:"Hong Kong",code:"HK",flag:"HK"},{name:"Hungary",code:"HU",flag:"HU"},{name:"Iceland",code:"IS",flag:"IS"},{name:"India",code:"IN",flag:"IN"},{name:"Indonesia",code:"ID",flag:"ID"},{name:"Iran, Islamic Republic Of",code:"IR",flag:"IR"},{name:"Iraq",code:"IQ",flag:"IQ"},{name:"Ireland",code:"IE",flag:"IE"},{name:"Isle of Man",code:"IM",flag:"IM"},{name:"Israel",code:"IL",flag:"IL"},{name:"Italy",code:"IT",flag:"IT"},{name:"Jamaica",code:"JM",flag:"JM"},{name:"Japan",code:"JP",flag:"JP"},{name:"Jersey",code:"JE",flag:"JE"},{name:"Jordan",code:"JO",flag:"JO"},{name:"Kazakhstan",code:"KZ",flag:"KZ"},{name:"Kenya",code:"KE",flag:"KE"},{name:"Kiribati",code:"KI",flag:"KI"},{name:"Korea, Democratic People'S Republic of",code:"KP",flag:"KP"},{name:"Korea, Republic of",code:"KR",flag:"KR"},{name:"Kuwait",code:"KW",flag:"KW"},{name:"Kyrgyzstan",code:"KG",flag:"KG"},{name:"Lao People'S Democratic Republic",code:"LA",flag:"LA"},{name:"Latvia",code:"LV",flag:"LV"},{name:"Lebanon",code:"LB",flag:"LB"},{name:"Lesotho",code:"LS",flag:"LS"},{name:"Liberia",code:"LR",flag:"LR"},{name:"Libyan Arab Jamahiriya",code:"LY",flag:"LY"},{name:"Liechtenstein",code:"LI",flag:"LI"},{name:"Lithuania",code:"LT",flag:"LT"},{name:"Luxembourg",code:"LU",flag:"LU"},{name:"Macao",code:"MO",flag:"MO"},{name:"Macedonia, The Former Yugoslav Republic of",code:"MK",flag:"MK"},{name:"Madagascar",code:"MG",flag:"MG"},{name:"Malawi",code:"MW",flag:"MW"},{name:"Malaysia",code:"MY",flag:"MY"},{name:"Maldives",code:"MV",flag:"MV"},{name:"Mali",code:"ML",flag:"ML"},{name:"Malta",code:"MT",flag:"MT"},{name:"Marshall Islands",code:"MH",flag:"MH"},{name:"Martinique",code:"MQ",flag:"MQ"},{name:"Mauritania",code:"MR",flag:"MR"},{name:"Mauritius",code:"MU",flag:"MU"},{name:"Mayotte",code:"YT",flag:"UNKNOWN"},{name:"Mexico",code:"MX",flag:"MX"},{name:"Micronesia, Federated States of",code:"FM",flag:"FM"},{name:"Moldova, Republic of",code:"MD",flag:"MD"},{name:"Monaco",code:"MC",flag:"MC"},{name:"Mongolia",code:"MN",flag:"MN"},{name:"Montserrat",code:"MS",flag:"MS"},{name:"Morocco",code:"MA",flag:"MA"},{name:"Mozambique",code:"MZ",flag:"MZ"},{name:"Myanmar",code:"MM",flag:"MM"},{name:"Namibia",code:"NA",flag:"NA"},{name:"Nauru",code:"NR",flag:"NR"},{name:"Nepal",code:"NP",flag:"NP"},{name:"Netherlands",code:"NL",flag:"NL"},{name:"Netherlands Antilles",code:"AN",flag:"AN"},{name:"New Caledonia",code:"NC",flag:"NC"},{name:"New Zealand",code:"NZ",flag:"NZ"},{name:"Nicaragua",code:"NI",flag:"NI"},{name:"Niger",code:"NE",flag:"NE"},{name:"Nigeria",code:"NG",flag:"NG"},{name:"Niue",code:"NU",flag:"NU"},{name:"Norfolk Island",code:"NF",flag:"NF"},{name:"Northern Mariana Islands",code:"MP",flag:"MP"},{name:"Norway",code:"NO",flag:"NO"},{name:"Oman",code:"OM",flag:"OM"},{name:"Pakistan",code:"PK",flag:"PK"},{name:"Palau",code:"PW",flag:"PW"},{name:"Palestinian Territory, Occupied",code:"PS",flag:"PS"},{name:"Panama",code:"PA",flag:"PA"},{name:"Papua New Guinea",code:"PG",flag:"PG"},{name:"Paraguay",code:"PY",flag:"PY"},{name:"Peru",code:"PE",flag:"PE"},{name:"Philippines",code:"PH",flag:"PH"},{name:"Pitcairn",code:"PN",flag:"PN"},{name:"Poland",code:"PL",flag:"PL"},{name:"Portugal",code:"PT",flag:"PT"},{name:"Puerto Rico",code:"PR",flag:"PR"},{name:"Qatar",code:"QA",flag:"QA"},{name:"Reunion",code:"RE",flag:"UNKNOWN"},{name:"Romania",code:"RO",flag:"RO"},{name:"Russian Federation",code:"RU",flag:"RU"},{name:"RWANDA",code:"RW",flag:"RW"},{name:"Saint Helena",code:"SH",flag:"SH"},{name:"Saint Kitts and Nevis",code:"KN",flag:"KN"},{name:"Saint Lucia",code:"LC",flag:"LC"},{name:"Saint Pierre and Miquelon",code:"PM",flag:"UNKNOWN"},{name:"Saint Vincent and the Grenadines",code:"VC",flag:"VC"},{name:"Samoa",code:"WS",flag:"UNKNOWN"},{name:"San Marino",code:"SM",flag:"SM"},{name:"Sao Tome and Principe",code:"ST",flag:"ST"},{name:"Saudi Arabia",code:"SA",flag:"SA"},{name:"Senegal",code:"SN",flag:"SN"},{name:"Serbia and Montenegro",code:"CS",flag:"UNKNOWN"},{name:"Seychelles",code:"SC",flag:"SC"},{name:"Sierra Leone",code:"SL",flag:"SL"},{name:"Singapore",code:"SG",flag:"SG"},{name:"Slovakia",code:"SK",flag:"SK"},{name:"Slovenia",code:"SI",flag:"SI"},{name:"Solomon Islands",code:"SB",flag:"SB"},{name:"Somalia",code:"SO",flag:"SO"},{name:"South Africa",code:"ZA",flag:"UNKNOWN"},{name:"South Georgia and the South Sandwich Islands",code:"GS",flag:"GS"},{name:"Spain",code:"ES",flag:"ES"},{name:"Sri Lanka",code:"LK",flag:"LK"},{name:"Sudan",code:"SD",flag:"SD"},{name:"Suriname",code:"SR",flag:"SR"},{name:"Svalbard and Jan Mayen",code:"SJ",flag:"UNKNOWN"},{name:"Swaziland",code:"SZ",flag:"SZ"},{name:"Sweden",code:"SE",flag:"SE"},{name:"Switzerland",code:"CH",flag:"CH"},{name:"Syrian Arab Republic",code:"SY",flag:"SY"},{name:"Taiwan, Province of China",code:"TW",flag:"TW"},{name:"Tajikistan",code:"TJ",flag:"TJ"},{name:"Tanzania, United Republic of",code:"TZ",flag:"TZ"},{name:"Thailand",code:"TH",flag:"TH"},{name:"Timor-Leste",code:"TL",flag:"TL"},{name:"Togo",code:"TG",flag:"TG"},{name:"Tokelau",code:"TK",flag:"TK"},{name:"Tonga",code:"TO",flag:"TO"},{name:"Trinidad and Tobago",code:"TT",flag:"TT"},{name:"Tunisia",code:"TN",flag:"TN"},{name:"Turkey",code:"TR",flag:"TR"},{name:"Turkmenistan",code:"TM",flag:"TM"},{name:"Turks and Caicos Islands",code:"TC",flag:"TC"},{name:"Tuvalu",code:"TV",flag:"TV"},{name:"Uganda",code:"UG",flag:"UG"},{name:"Ukraine",code:"UA",flag:"UA"},{name:"United Arab Emirates",code:"AE",flag:"AE"},{name:"United Kingdom",code:"GB",flag:"GB"},{name:"United States",code:"US",flag:"US"},{name:"United States Minor Outlying Islands",code:"UM",flag:"UNKNOWN"},{name:"Uruguay",code:"UY",flag:"UY"},{name:"Uzbekistan",code:"UZ",flag:"UZ"},{name:"Vanuatu",code:"VU",flag:"VU"},{name:"Venezuela",code:"VE",flag:"VE"},{name:"Viet Nam",code:"VN",flag:"VN"},{name:"Virgin Islands, British",code:"VG",flag:"VG"},{name:"Virgin Islands, U.S.",code:"VI",flag:"VI"},{name:"Wallis and Futuna",code:"WF",flag:"UNKNOWN"},{name:"Western Sahara",code:"EH",flag:"EH"},{name:"Yemen",code:"YE",flag:"UNKNOWN"},{name:"Zambia",code:"ZM",flag:"UNKNOWN"},{name:"Zimbabwe",code:"ZW",flag:"UNKNOWN"}],t}();e.Geolocation=r}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(56),n(4),n(15),n(1),n(13),n(26)],void 0===(o=function(t,e,n,r,o,i,a,u){var l;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.FORM_PAGE="",t.THANK_YOU_PAGE="thank-you",t.PAYMENTS_ERROR_PAGE="payments-error"}(l=e.EPageType||(e.EPageType={}));var c=function(t){function e(r,o,i){var s=t.call(this,r,o||e.getDefaultProperties(r),i)||this;return s.autoButtons=null,s.addClass("page"),s.headerDOMNode=u.DOM.document.createElement("div"),s.headerDOMNode.className="body header",s.footerDOMNode=u.DOM.document.createElement("div"),s.footerDOMNode.className="body footer",s.root.insertBefore(s.headerDOMNode,s.root.firstChild),s.autoButtonsBody=new n.ContainerBody("auto-buttons"),s.bodies.push(s.autoButtonsBody),s.root.appendChild(s.autoButtonsBody.getRoot()),s.root.appendChild(s.footerDOMNode),s.root.tabIndex=0,s.updatePageType(),s.appendPageCommandButtons(),s}return s(e,t),e.prototype.appendPageCommandButtons=function(){this.document.isEditMode()&&(this.pageCommandsDOMNode=u.DOM.document.createElement("div"),this.pageCommandsDOMNode.className="page-commands",this.buttonInsertPage=u.DOM.document.createElement("button"),this.buttonInsertPage.textContent=i.I18n.translateApplicationText("Insert Page","editor"),this.buttonInsertPage.setAttribute("type","button"),this.buttonInsertPage.className="cmd insert-page",this.buttonInsertPage.setAttribute("data-command","insert-page"),this.buttonMergePages=u.DOM.document.createElement("button"),this.buttonMergePages.textContent=i.I18n.translateApplicationText("Merge Pages","editor"),this.buttonMergePages.setAttribute("type","button"),this.buttonMergePages.className="cmd merge-pages",this.buttonMergePages.setAttribute("data-command","merge-pages"),this.pageCommandsDOMNode.appendChild(this.buttonInsertPage),this.pageCommandsDOMNode.appendChild(this.buttonMergePages),this.root.appendChild(this.pageCommandsDOMNode))},e.prototype.getTypeId=function(){return r.NodeTypes.PAGE},e.getDefaultProperties=function(t){return{name:i.I18n.translateApplicationText("Page","control-defaults.page")+" 1",type:l.FORM_PAGE,visibility:"",dynamic:!1}},e.prototype.mergeWith=function(t){for(var e=t.getChildren();e.length;)this.appendChild(e.shift());return t.remove(),this},e.prototype.getNodeName=function(){return"Page"},e.prototype.getPage=function(){return this},e.prototype.setVisible=function(e){var n=this.isVisible();return t.prototype.setVisible.call(this,e),this.document.updateAutoButtons(!0),n!==e&&this.document.trigger(o.Document.EVENT_PAGE_VISIBILITY_CHANGED,this),this},e.prototype.updateAutoButtons=function(t,e,n,o){if(void 0===o&&(o=!0),!this.autoButtons){this.autoButtons=this.document.createElement(r.NodeTypes.AUTO_BUTTONS);var i=this.document.createElement(r.NodeTypes.ROW);i.appendChild(this.autoButtons),this.appendChild(i,1),this.document.runIndexerInSyncMode()}this.autoButtons.setFirstPage(e).setLastPage(t),this.document.getProperty("autoButtons.enabled")?this.autoButtons.setProperty("hasNext",!t).setProperty("hasPrevious",!e).setProperty("hasSubmit",t).setProperty("hasSave",this.document.getProperty("autoButtons.showSave")).setProperty("hasReset",this.document.getProperty("autoButtons.showReset")).setProperty("hasPrint",this.document.getProperty("autoButtons.showPrint")).setProperty("previousCaption",this.document.getProperty("autoButtons.previousCaption"),this.autoButtons).setProperty("nextCaption",this.document.getProperty("autoButtons.nextCaption"),this.autoButtons).setProperty("resetCaption",this.document.getProperty("autoButtons.resetCaption"),this.autoButtons).setProperty("saveCaption",this.document.getProperty("autoButtons.saveCaption"),this.autoButtons).setProperty("submitCaption",this.document.getProperty("autoButtons.submitCaption"),this.autoButtons).setProperty("printCaption",this.document.getProperty("autoButtons.printCaption"),this.autoButtons).setEnabled(!0):this.autoButtons.setProperty("hasNext",!1).setProperty("hasPrevious",!1).setProperty("hasSubmit",!1).setProperty("hasSave",!1).setProperty("hasReset",!1).setProperty("hasPrint",!1).setEnabled(!1),this.autoButtons.updateButtons(o)},e.prototype.removeAutoButtons=function(){this.autoButtons&&(this.removeChild(this.autoButtons.getParent()),this.autoButtons=void 0)},e.prototype.serialize=function(){var e=t.prototype.serialize.call(this);return delete e.children1,e},e.prototype.getAutoButtons=function(){return this.autoButtons||null},e.prototype.updatePageType=function(){this.root.setAttribute("data-type",String(this.properties.type))},e.prototype.setProperty=function(e,n,r){var i=t.prototype.setProperty.call(this,e,n,r);return"type"===e&&this.updatePageType(),"name"===e&&this.document.trigger(o.Document.EVENT_PAGE_NAME_CHANGED,this),i},e.prototype.getPageType=function(){return this.properties.type||l.FORM_PAGE},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e.flatten().forEach((function(t){t.getTypeId()===r.NodeTypes.AUTO_BUTTONS&&t.getParent().remove()})),e},e.prototype.getHeaderDOMNode=function(){return this.headerDOMNode},e.prototype.getFooterDOMNode=function(){return this.footerDOMNode},e.prototype.performTranslation=function(){},e.prototype.getWidthForChild=function(){return 20},e.prototype.getRenderedCSS=function(){return'\n            body[data-bootstrap-mode=edit] & > .body.default:empty:after {\n                content: "'+i.I18n.translateApplicationText("This page is empty. Please drag some fields inside this page.","editor")+'";\n            }\n        '},e.prototype.hasOwnThemeProperties=function(){return!1},e.prototype.supportsLabelInsideRendering=function(){return!1},e.prototype.createPDFPage=function(t){var e=t.create(a.PDFNodeEntityType.PAGE),n=this.root.getBoundingClientRect(),r={left:~~n.left,top:~~n.top,width:~~n.width,height:~~n.height};return e.setDimensions(r),this.flatten().filter((function(t){return t.isVisible()})).forEach((function(t){return t.embedInPDFPage(e)})),e},e.prototype.embedInPDFPage=function(t){var e=this.insertAcrobatReaderWarning();t.writeHTMLElement(e),e.parentNode.removeChild(e),this.headerDOMNode&&t.writeHTMLElement(this.headerDOMNode)},e.prototype.insertAcrobatReaderWarning=function(){var t=u.DOM.document.createElement("div");return t.style.display="block",t.style.position="absolute",t.style.left=Math.round(this.bodies[0].getRoot().offsetLeft-8)+"px",t.style.right=Math.round(this.bodies[0].getRoot().offsetLeft-8)+"px",t.style.bottom="10px",t.style.textAlign="right",t.style.fontFamily="Roboto",t.style.fontSize="10px",t.style.padding="8px",t.style.color="black",t.textContent=i.I18n.translateApplicationText("For best functionality please use Adobe Acrobat Reader","control-defaults.form"),this.root.appendChild(t),t},e}(n.Container);e.Page=c}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(70),n(6)],void 0===(o=function(t,e,n,r){Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.getValueType=function(){return n.EInputDefaultValue.SINGLE_LINE_TEXT},e.prototype.getValue=function(){if("string"==typeof this.value)return r.Strings.trim(this.value.replace(/[\r\n\t]+/g," "))||void 0},e.prototype.explainValue=function(){return this.getValue()||void 0},e}(n.InputDefaultValue);e.SingleLineTextInputDefaultValue=o}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r;void 0===(r=function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.CALCULATION="formula",t.VISIBILITY="visibility",t.REDIRECT="redirect",t.NEURAL_AUTO_FILLER="neural-auto-filler",t.DEFAULT_VALUES="default-values"}(e.ERuleType||(e.ERuleType={})),function(t){t.IS_EQUAL_TO="eq",t.IS_NOT_EQUAL_TO="neq",t.CONTAINS="contains",t.DOES_NOT_CONTAIN="not_contains",t.STARTS_WITH="start_with",t.DOES_NOT_START_WITH="not_start_with",t.ENDS_WITH="ends_with",t.DOES_NOT_ENDS_WITH="not_ends_with",t.IS_LOWER_THAN="lt",t.IS_NOT_LOWER_THAN="nlt",t.IS_GREATER_THAN="gt",t.IS_NOT_GREATER_THAN="ngt",t.IS_LOWER_OR_EQUAL_THAN="lte",t.IS_NOT_LOWER_OR_EQUAL_THAN="nlte",t.IS_GREATER_OR_EQUAL_THAN="gte",t.IS_NOT_GREATER_OR_EQUAL_THAN="ngte",t.IS_EMPTY="is_empty",t.IS_FILLED="is_filled"}(e.EOperator||(e.EOperator={})),function(t){t.OR="or",t.AND="and"}(e.EMatchType||(e.EMatchType={})),function(t){t.SHOW_FIELD="show",t.HIDE_FIELD="hide",t.SHOW_MULTIPLE_FIELDS="show_multiple",t.HIDE_MULTIPLE_FIELDS="hide_multiple"}(e.EVisibilityRuleActionType||(e.EVisibilityRuleActionType={})),function(t){t.COPY_FIELD_VALUE="copy",t.COPY_MULTIPLE_FIELD_VALUES="copy_multiple",t.CALCULATE_FIELD_VALUE="calculate"}(e.ECalculationRuleActionType||(e.ECalculationRuleActionType={})),function(t){t.REDIRECT_IN_SELF_FRAME="_self",t.REDIRECT_IN_PARENT_FRAME="_parent"}(e.EPageRedirectRuleActionType||(e.EPageRedirectRuleActionType={}))}.apply(e,[n,e]))||(t.exports=r)},,,function(t,e,n){"use strict";var r;void 0===(r=function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.INT="int",t.UNSIGNED_INT="uint",t.FLOAT="float",t.UNSIGNED_FLOAT="ufloat",t.BOOLEAN="boolean",t.STRING="string",t.COLOR="color",t.PICTURE="picture"}(e.BigDataType||(e.BigDataType={})),function(t){t.CREATE_BLANK_COLLECTION="blank",t.IMPORT_FROM_WIZARD_COLLECTION="wizard",t.BROWSE_EXISTING_COLLECTION="browse"}(e.BigDataBrowseForCollectionEmbedURLMode||(e.BigDataBrowseForCollectionEmbedURLMode={}))}.apply(e,[n,e]))||(t.exports=r)},function(t,e,n){"use strict";var r;void 0===(r=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.init=function(){var t=this;if(!this.initialized){this.initialized=!0;var e=function(e,n,r,o){t.languages.push({name:e,iso639Code1:n,iso639Code2T:r,iso639Code2B:o})},n=function(e,n,r,o){t.languages.push({name:e,iso639Code1:null,iso639Code2T:n,iso639Code2B:r})};e("Abkhazian","ab","abk","abk"),n("Achinese","ace","ace"),n("Acoli","ach","ach"),n("Adangme","ada","ada"),n("Adyghe; Adygei","ady","ady"),e("Afar","aa","aar","aar"),n("Afrihili","afh","afh"),e("Afrikaans","af","afr","afr"),n("Afro-Asiatic (Other)","afa","afa"),n("Ainu","ain","ain"),e("Akan","ak","aka","aka"),n("Akkadian","akk","akk"),e("Albanian","sq","sqi","alb"),n("Aleut","ale","ale"),n("Algonquian languages","alg","alg"),n("Southern Altai","alt","alt"),n("Altaic (Other)","tut","tut"),e("Amharic","am","amh","amh"),n("Angika","anp","anp"),n("Apache languages","apa","apa"),e("Arabic","ar","ara","ara"),e("Aragonese","an","arg","arg"),n("Aramaic","arc","arc"),n("Arapaho","arp","arp"),n("Araucanian","arn","arn"),n("Arawak","arw","arw"),e("Armenian","hy","hye","arm"),n("Aromanian; Arumanian; Macedo-Romanian","rup","rup"),n("Artificial (Other)","art","art"),e("Assamese","as","asm","asm"),n("Asturian; Bable","ast","ast"),n("Athapascan languages","ath","ath"),n("Australian languages","aus","aus"),n("Austronesian (Other)","map","map"),e("Avaric","av","ava","ava"),e("Avestan","ae","ave","ave"),n("Awadhi","awa","awa"),n("Aguaruna","agr","agr"),e("Aymara, Southern","ay","ayc","ayc"),e("Aymara","ay","aym","aym"),e("Azerbaijani","az","aze","aze"),e("North Azerbaijani","az","azj","aze"),e("South Azerbaijani","az","azb","aze"),n("Balinese","ban","ban"),n("Baltic (Other)","bat","bat"),n("Baluchi","bal","bal"),e("Bambara","bm","bam","bam"),n("Bamileke languages","bai","bai"),n("Banda","bad","bad"),n("Bantu (Other)","bnt","bnt"),n("Basa","bas","bas"),e("Bashkir","ba","bak","bak"),e("Basque","eu","eus","baq"),n("Batak (Indonesia)","btk","btk"),n("Beja","bej","bej"),e("Belarusian","be","bel","bel"),n("Bemba","bem","bem"),e("Bangla","bn","ben","ben"),n("Berber (Other)","ber","ber"),n("Bhili","bhb","bhb"),n("Bhojpuri","bho","bho"),e("Bihari","bh","bih","bih"),n("Bikol","bik","bik"),n("Bini","bin","bin"),e("Bislama","bi","bis","bis"),n("Blin; Bilin","byn","byn"),n("Bodo","brx","brx"),e("Bosnian","bs","bos","bos"),n("Braj","bra","bra"),e("Breton","br","bre","bre"),n("Buginese","bug","bug"),e("Bulgarian","bg","bul","bul"),n("Buriat","bua","bua"),e("Burmese","my","mya","bur"),n("Caddo","cad","cad"),n("Carib","car","car"),e("Catalan; Valencian","ca","cat","cat"),n("Caucasian (Other)","cau","cau"),n("Cebuano","ceb","ceb"),n("Celtic (Other)","cel","cel"),n("Central American Indian (Other)","cai","cai"),n("Central Nahuatl","nhn","nhn"),n("Central Sama","sml","sml"),n("Chagatai","chg","chg"),n("Chamic languages","cmc","cmc"),e("Chamorro","ch","cha","cha"),e("Chechen","ce","che","che"),n("Cherokee","chr","chr"),n("Cheyenne","chy","chy"),n("Chibcha","chb","chb"),e("Chichewa; Chewa; Nyanja","ny","nya","nya"),n("Chiga","cgg","cgg"),e("Chinese","zh","zho","chi"),n("Chinook jargon","chn","chn"),n("Chipewyan","chp","chp"),n("Choctaw","cho","cho"),e("Church Slavic; Old Slavonic; Church Slavonic; Old Bulgarian; Old Church Slavonic","cu","chu","chu"),n("Chuukese","chk","chk"),e("Chuvash","cv","chv","chv"),n("Classical Newari; Old Newari; Classical Nepal Bhasa","nwc","nwc"),n("Coptic","cop","cop"),e("Cornish","kw","cor","cor"),e("Corsican","co","cos","cos"),n("Creek","mus","mus"),e("Cree","cr","cre","cre"),n("Creoles and pidgins (Other)","crp","crp"),n("Creoles and pidgins, English based (Other)","cpe","cpe"),n("Creoles and pidgins, French-based (Other)","cpf","cpf"),n("Creoles and pidgins, Portuguese-based (Other)","cpp","cpp"),n("Crimean Tatar; Crimean Turkish","crh","crh"),e("Croatian","hr","hrv","scr"),n("Cushitic (Other)","cus","cus"),e("Czech","cs","ces","cze"),n("Dakota","dak","dak"),e("Danish","da","dan","dan"),n("Dargwa","dar","dar"),n("Dayak","day","day"),n("Delaware","del","del"),n("Dinka","din","din"),e("Divehi","dv","div","div"),n("Dogrib","dgr","dgr"),n("Dogri","doi","doi"),n("Dravidian (Other)","dra","dra"),n("Duala","dua","dua"),n("Dutch, Middle (ca.1050-1350)","dum","dum"),e("Dutch; Flemish","nl","nld","dut"),n("Dyula","dyu","dyu"),e("Dzongkha","dz","dzo","dzo"),n("Efik","efi","efi"),n("Egyptian (Ancient)","egy","egy"),n("Ekajuk","eka","eka"),n("Elamite","elx","elx"),n("English, Middle (1100-1500)","enm","enm"),n("English, Old (ca.450-1100)","ang","ang"),e("English","en","eng","eng"),n("Erzya","myv","myv"),e("Esperanto","eo","epo","epo"),e("Estonian","et","est","est"),e("Ewe","ee","ewe","ewe"),n("Ewondo","ewo","ewo"),n("Fang","fan","fan"),n("Fanti","fat","fat"),e("Faroese","fo","fao","fao"),n("Fiji Hindi","hif","hif"),e("Fijian","fj","fij","fij"),n("Filipino; Pilipino","fil","fil"),e("Finnish","fi","fin","fin"),n("Finno-Ugrian (Other)","fiu","fiu"),n("Fon","fon","fon"),n("French, Middle (ca.1400-1800)","frm","frm"),n("French, Old (842-ca.1400)","fro","fro"),e("French","fr","fra","fre"),n("Northern Frisian","frr","frr"),n("Eastern Frisian","frs","frs"),e("Western Frisian","fy","fry","fry"),n("Friulian","fur","fur"),e("Fulah","ff","ful","ful"),e("Gaelic; Scottish Gaelic","gd","gla","gla"),e("Galician","gl","glg","glg"),n("Gan Chinese","gan","gan"),e("Ganda","lg","lug","lug"),n("Gayo","gay","gay"),n("Ga","gaa","gaa"),n("Gbaya","gba","gba"),n("Geez","gez","gez"),e("Georgian","ka","kat","geo"),n("German, Middle High (ca.1050-1500)","gmh","gmh"),n("German, Old High (ca.750-1050)","goh","goh"),n("Germanic (Other)","gem","gem"),e("German","de","deu","ger"),n("Swiss German; Alemannic","gsw","gsw"),n("Gilbertese","gil","gil"),n("Gondi","gon","gon"),n("Gorontalo","gor","gor"),n("Gothic","got","got"),n("Grebo","grb","grb"),n("Greek, Ancient (to 1453)","grc","grc"),e("Greek, Modern (1453-)","el","ell","gre"),e("Guarani","gn","grn","grn"),e("Gujarati","gu","guj","guj"),n("GwichÂ´in","gwi","gwi"),n("Haida","hai","hai"),e("Haitian; Haitian Creole","ht","hat","hat"),n("Hakka Chinese","hak","hak"),e("Hausa","ha","hau","hau"),n("Hawaiian","haw","haw"),e("Hebrew","he","heb","heb"),e("Herero","hz","her","her"),n("Hiligaynon","hil","hil"),n("Himachali","him","him"),e("Hindi","hi","hin","hin"),e("Hiri Motu","ho","hmo","hmo"),n("Hittite","hit","hit"),n("Hmong","hmn","hmn"),n("Huizhou Chinese","czh","czh"),e("Hungarian","hu","hun","hun"),n("Hupa","hup","hup"),n("Iban","iba","iba"),e("Icelandic","is","isl","ice"),e("Ido","io","ido","ido"),e("Igbo","ig","ibo","ibo"),n("Ijo","ijo","ijo"),n("Iloko","ilo","ilo"),n("Inari Sami","smn","smn"),n("Indic (Other)","inc","inc"),n("Indo-European (Other)","ine","ine"),e("Indonesian","id","ind","ind"),n("Ingush","inh","inh"),e("Interlingua (International Auxiliary Language Association)","ia","ina","ina"),e("Interlingue","ie","ile","ile"),e("Inuktitut","iu","iku","iku"),e("Inupiaq","ik","ipk","ipk"),n("Iranian (Other)","ira","ira"),n("Irish, Middle (900-1200)","mga","mga"),n("Irish, Old (to 900)","sga","sga"),e("Irish","ga","gle","gle"),n("Iroquoian languages","iro","iro"),e("Italian","it","ita","ita"),e("Japanese","ja","jpn","jpn"),e("Javanese","jv","jav","jav"),n("Jinyu Chinese","cjy","cjy"),n("Judeo-Arabic","jrb","jrb"),n("Judeo-Persian","jpr","jpr"),n("Kabardian","kbd","kbd"),n("Kabyle","kab","kab"),n("Kachin","kac","kac"),e("Kalaallisut; Greenlandic","kl","kal","kal"),n("Kalmyk","xal","xal"),n("Kamba","kam","kam"),e("Kannada","kn","kan","kan"),e("Kanuri","kr","kau","kau"),n("Kara-Kalpak","kaa","kaa"),n("Karachay-Balkar","krc","krc"),n("Karbi","mjw","mjw"),n("Karelian","krl","krl"),n("Karen","kar","kar"),e("Kashmiri","ks","kas","kas"),n("Kashubian","csb","csb"),n("Kawi","kaw","kaw"),e("Kazakh","kk","kaz","kaz"),n("Khasi","kha","kha"),e("Khmer","km","khm","khm"),n("Khoisan (Other)","khi","khi"),n("Khotanese","kho","kho"),e("Kikuyu; Gikuyu","ki","kik","kik"),n("Kimbundu","kmb","kmb"),e("Kinyarwanda","rw","kin","kin"),e("Kirghiz","ky","kir","kir"),n("Klingon; tlhIngan-Hol","tlh","tlh"),e("Komi","kv","kom","kom"),e("Kongo","kg","kon","kon"),n("Konkani","kok","kok"),e("Korean","ko","kor","kor"),n("Kosraean","kos","kos"),n("Kpelle","kpe","kpe"),n("Kru","kro","kro"),e("Kuanyama; Kwanyama","kj","kua","kua"),n("Kumyk","kum","kum"),e("Kurdish","ku","kur","kur"),n("Kurukh","kru","kru"),n("Kutenai","kut","kut"),n("Ladino","lad","lad"),n("Lahnda","lah","lah"),n("Lamba","lam","lam"),e("Lao","lo","lao","lao"),e("Latin","la","lat","lat"),e("Latvian","lv","lav","lav"),n("Lezghian","lez","lez"),n("Ligurian","lij","lij"),e("Limburgan; Limburger; Limburgish","li","lim","lim"),e("Lingala","ln","lin","lin"),n("Literary Chinese","lzh","lzh"),e("Lithuanian","lt","lit","lit"),n("Lojban","jbo","jbo"),n("Low German; Low Saxon; German, Low; Saxon, Low","nds","nds"),n("Lower Sorbian","dsb","dsb"),n("Lozi","loz","loz"),e("Luba-Katanga","lu","lub","lub"),n("Luba-Lulua","lua","lua"),n("Luiseno","lui","lui"),n("Lule Sami","smj","smj"),n("Lunda","lun","lun"),n("Luo (Kenya and Tanzania)","luo","luo"),n("Lushai","lus","lus"),e("Luxembourgish; Letzeburgesch","lb","ltz","ltz"),e("Macedonian","mk","mkd","mac"),n("Madurese","mad","mad"),n("Magahi","mag","mag"),n("Maithili","mai","mai"),n("Makasar","mak","mak"),e("Malagasy","mg","mlg","mlg"),e("Malayalam","ml","mal","mal"),e("Malay","ms","msa","may"),e("Maltese","mt","mlt","mlt"),n("Manchu","mnc","mnc"),n("Mandarin Chinese","cmn","cmn"),n("Mandar","mdr","mdr"),n("Mandingo","man","man"),n("Manipuri","mni","mni"),n("Manobo languages","mno","mno"),e("Manx","gv","glv","glv"),e("Maori","mi","mri","mao"),e("Marathi","mr","mar","mar"),n("Mari","chm","chm"),e("Marshallese","mh","mah","mah"),n("Marwari","mwr","mwr"),n("Masai","mas","mas"),n("Morisyen","mfe","mfe"),n("Mayan languages","myn","myn"),n("Meadow Mari","mhr","mhr"),n("Mende","men","men"),n("Mi'kmaq; Micmac","mic","mic"),n("Miskito","miq","miq"),n("Minangkabau","min","min"),n("Min Bei Chinese","mnp","mnp"),n("Min Dong Chinese","cdo","cdo"),n("Min Nan Chinese","nan","nan"),n("Min Zhong Chinese","czo","czo"),n("Mirandese","mwl","mwl"),n("Miscellaneous languages","mis","mis"),n("Mohawk","moh","moh"),n("Moksha","mdf","mdf"),e("Moldavian","mo","mol","mol"),n("Mon-Khmer (Other)","mkh","mkh"),e("Mongolian","mn","mon","mon"),n("Mongo","lol","lol"),n("Moroccan Arabic","ary","ary"),n("Mossi","mos","mos"),n("Multiple languages","mul","mul"),n("Munda languages","mun","mun"),n("Nahuatl","nah","nah"),e("Nauru","na","nau","nau"),e("Navajo; Navaho","nv","nav","nav"),e("Ndebele, North; North Ndebele","nd","nde","nde"),e("Ndebele, South; South Ndebele","nr","nbl","nbl"),e("Ndonga","ng","ndo","ndo"),n("Neapolitan","nap","nap"),n("Nepal Bhasa; Newari","new","new"),e("Nepali","ne","nep","nep"),n("Nias","nia","nia"),n("Niger-Kordofanian (Other)","nic","nic"),n("Nilo-Saharan (Other)","ssa","ssa"),n("Niuean","niu","niu"),n("N'Ko","nqo","nqo"),n("Nogai","nog","nog"),n("Norse, Old","non","non"),n("North American Indian","nai","nai"),e("Northern Sami","se","sme","sme"),n("Northern Sotho; Pedi; Sepedi","nso","nso"),e("Norwegian BokmÃ¥l","nb","nob","nob"),e("Norwegian Nynorsk","nn","nno","nno"),e("Norwegian","no","nor","nor"),n("Nubian languages","nub","nub"),n("Nyamwezi","nym","nym"),n("Nyankole","nyn","nyn"),n("Nyoro","nyo","nyo"),n("Nzima","nzi","nzi"),e("Occitan (post 1500); ProvenÃ§al","oc","oci","oci"),e("Ojibwa","oj","oji","oji"),e("Odia","or","ori","ori"),e("Oromo","om","orm","orm"),n("Osage","osa","osa"),e("Ossetian; Ossetic","os","oss","oss"),n("Otomian languages","oto","oto"),n("Pahlavi","pal","pal"),n("Palauan","pau","pau"),e("Pali","pi","pli","pli"),n("Pampanga","pam","pam"),n("Pangasinan","pag","pag"),e("Panjabi; Punjabi","pa","pan","pan"),n("Papiamento","pap","pap"),n("Papuan (Other)","paa","paa"),n("Persian, Old (ca.600-400 B.C.)","peo","peo"),e("Persian","fa","fas","per"),n("Philippine (Other)","phi","phi"),n("Phoenician","phn","phn"),n("Pohnpeian","pon","pon"),e("Polish","pl","pol","pol"),e("Portuguese","pt","por","por"),n("Prakrit languages","pra","pra"),n("ProvenÃ§al, Old (to 1500)","pro","pro"),n("Pu-Xian Chinese","cpx","cpx"),e("Pushto","ps","pus","pus"),e("Quechua","qu","que","que"),n("Quechua, Southern","quz","quz"),e("Raeto-Romance","rm","roh","roh"),n("Rajasthani","raj","raj"),n("Rapanui","rap","rap"),n("Rarotongan","rar","rar"),n("Romance (Other)","roa","roa"),e("Romanian","ro","ron","rum"),n("Romany","rom","rom"),e("Rundi","rn","run","run"),e("Russian","ru","rus","rus"),n("Samogitian","sgs","sgs"),n("Salishan languages","sal","sal"),n("Samaritan Aramaic","sam","sam"),n("Sami languages (Other)","smi","smi"),e("Samoan","sm","smo","smo"),n("Sandawe","sad","sad"),e("Sango","sg","sag","sag"),e("Sanskrit","sa","san","san"),n("Santali","sat","sat"),e("Sardinian","sc","srd","srd"),n("Sasak","sas","sas"),n("Scots","sco","sco"),n("Selkup","sel","sel"),n("Semitic (Other)","sem","sem"),e("Serbian","sr","srp","scc"),n("Serer","srr","srr"),n("Shan","shn","shn"),e("Shona","sn","sna","sna"),n("Shuswap","shs","shs"),e("Sichuan Yi","ii","iii","iii"),n("Sicilian","scn","scn"),n("Sidamo","sid","sid"),n("Sign Languages","sgn","sgn"),n("Siksika","bla","bla"),n("Silesian","szl","szl"),e("Sindhi","sd","snd","snd"),e("Sinhala; Sinhalese","si","sin","sin"),n("Sino-Tibetan (Other)","sit","sit"),n("Siouan languages","sio","sio"),n("Skolt Sami","sms","sms"),n("Slave (Athapascan)","den","den"),n("Slavic (Other)","sla","sla"),e("Slovak","sk","slk","slo"),e("Slovenian","sl","slv","slv"),n("Sogdian","sog","sog"),e("Somali","so","som","som"),n("Songhai","son","son"),n("Soninke","snk","snk"),n("Sorani","ckb","ckb"),n("Sorbian languages","wen","wen"),e("Sotho, Southern","st","sot","sot"),n("South American Indian (Other)","sai","sai"),n("Southern Sami","sma","sma"),e("Spanish; Castilian","es","spa","spa"),n("Sranan Tongo","srn","srn"),n("Sukuma","suk","suk"),n("Sumerian","sux","sux"),e("Sundanese","su","sun","sun"),n("Susu","sus","sus"),e("Swahili","sw","swa","swa"),e("Swati","ss","ssw","ssw"),e("Swedish","sv","swe","swe"),n("Classical Syriac","syc","syc"),n("Syriac","syr","syr"),e("Tagalog","tl","tgl","tgl"),e("Tahitian","ty","tah","tah"),n("Tai (Other)","tai","tai"),e("Tajik","tg","tgk","tgk"),n("Talossan","tzl","tzl"),n("Tamashek","tmh","tmh"),e("Tamil","ta","tam","tam"),e("Tatar","tt","tat","tat"),e("Telugu","te","tel","tel"),n("Tereno","ter","ter"),n("Tetum","tet","tet"),e("Thai","th","tha","tha"),n("Tharu, Chitwani","the","the"),e("Tibetan","bo","bod","tib"),n("Tigre","tig","tig"),e("Tigrinya","ti","tir","tir"),n("Timne","tem","tem"),n("Tiv","tiv","tiv"),n("Tlingit","tli","tli"),n("Tok Pisin","tpi","tpi"),n("Tokelau","tkl","tkl"),n("Tonga (Nyasa)","tog","tog"),e("Tonga (Tonga Islands)","to","ton","ton"),n("Tsimshian","tsi","tsi"),e("Tsonga","ts","tso","tso"),e("Tswana","tn","tsn","tsn"),n("Tulu","tcy","tcy"),n("Tumbuka","tum","tum"),n("Tupi languages","tup","tup"),n("Turkish, Ottoman (1500-1928)","ota","ota"),e("Turkish","tr","tur","tur"),e("Turkmen","tk","tuk","tuk"),n("Tuvalu","tvl","tvl"),n("Tuvinian","tyv","tyv"),e("Twi","tw","twi","twi"),n("Udmurt","udm","udm"),n("Ugaritic","uga","uga"),e("Uighur; Uyghur","ug","uig","uig"),e("Ukrainian","uk","ukr","ukr"),n("Umbundu","umb","umb"),n("Unami Delaware","unm","unm"),n("Undetermined","und","und"),n("Upper Sorbian","hsb","hsb"),e("Urdu","ur","urd","urd"),e("Uzbek","uz","uzb","uzb"),n("Vai","vai","vai"),e("Venda","ve","ven","ven"),e("Vietnamese","vi","vie","vie"),e("VolapÃ¼k","vo","vol","vol"),n("Votic","vot","vot"),n("Wakashan languages","wak","wak"),n("Walser","wae","wae"),n("Walaita","wal","wal"),e("Walloon","wa","wln","wln"),n("Waray","war","war"),n("Washo","was","was"),e("Welsh","cy","cym","wel"),e("Wolof","wo","wol","wol"),n("Wu Chinese","wuu","wuu"),e("Xhosa","xh","xho","xho"),n("Xiang Chinese","hsn","hsn"),n("Yakut","sah","sah"),n("Yao","yao","yao"),n("Yau (Uruwa)","yuw","yuw"),n("Yapese","yap","yap"),e("Yiddish","yi","yid","yid"),e("Yoruba","yo","yor","yor"),n("Yue Chinese","yue","yue"),n("Yupik languages","ypk","ypk"),n("Zande","znd","znd"),n("Zapotec","zap","zap"),n("Zenaga","zen","zen"),e("Zhuang; Chuang","za","zha","zha"),e("Zulu","zu","zul","zul"),n("Zuni","zun","zun"),n("Zaza; Dimili; Dimli; Kirdki; Kirmanjki; Zazaki","zza","zza")}},t.getLanguageByCode=function(t){if(!t)return null;this.init(),t=t.toLowerCase();for(var e=0,n=this.languages.length;e<n;e++)if(t===this.languages[e].iso639Code1||t===this.languages[e].iso639Code2T||t===this.languages[e].iso639Code2B)return this.languages[e].name;return null},t.enumerateLanguages=function(){this.init();for(var t=[],e=0,n=this.languages.length;e<n;e++)t.push({code:this.languages[e].iso639Code1||this.languages[e].iso639Code2T||this.languages[e].iso639Code2B,language:this.languages[e].name});return t},t.getLocaleByLanguageCode=function(t){if(!t||"string"!=typeof t)return null;this.init();for(var e=t.toLowerCase(),n=0,r=this.languages.length;n<r;n++)if(this.languages[n].iso639Code1===e||this.languages[n].iso639Code2T===e||this.languages[n].iso639Code2B===e)return{code:this.languages[n].iso639Code1||this.languages[n].iso639Code2T||this.languages[n].iso639Code2B,language:this.languages[n].name}},t.initialized=!1,t.languages=[],t}();e.I18nLanguage=n}.apply(e,[n,e]))||(t.exports=r)},function(t,e,n){"use strict";var r;void 0===(r=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.fletcher=function(t){for(var e=0,n=0,r=0,o=t.length;r<o;r++)n=(n+(e=(e+t[r])%255))%255;return n<<8|e},t.safe_add=function(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n},t.bit_rol=function(t,e){return t<<e|t>>>32-e},t.cmn=function(t,e,n,r,o,i){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(e,t),this.safe_add(r,i)),o),n)},t.ff=function(t,e,n,r,o,i,s){return this.cmn(e&n|~e&r,t,e,o,i,s)},t.gg=function(t,e,n,r,o,i,s){return this.cmn(e&r|n&~r,t,e,o,i,s)},t.hh=function(t,e,n,r,o,i,s){return this.cmn(e^n^r,t,e,o,i,s)},t.ii=function(t,e,n,r,o,i,s){return this.cmn(n^(e|~r),t,e,o,i,s)},t.binl_md5=function(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;var n,r,o,i,s,a,u=1732584193,l=-271733879,c=-1732584194,p=271733878;for(n=0,a=t.length;n<a;n+=16)r=u,o=l,i=c,s=p,u=this.ff(u,l,c,p,t[n],7,-680876936),p=this.ff(p,u,l,c,t[n+1],12,-389564586),c=this.ff(c,p,u,l,t[n+2],17,606105819),l=this.ff(l,c,p,u,t[n+3],22,-1044525330),u=this.ff(u,l,c,p,t[n+4],7,-176418897),p=this.ff(p,u,l,c,t[n+5],12,1200080426),c=this.ff(c,p,u,l,t[n+6],17,-1473231341),l=this.ff(l,c,p,u,t[n+7],22,-45705983),u=this.ff(u,l,c,p,t[n+8],7,1770035416),p=this.ff(p,u,l,c,t[n+9],12,-1958414417),c=this.ff(c,p,u,l,t[n+10],17,-42063),l=this.ff(l,c,p,u,t[n+11],22,-1990404162),u=this.ff(u,l,c,p,t[n+12],7,1804603682),p=this.ff(p,u,l,c,t[n+13],12,-40341101),c=this.ff(c,p,u,l,t[n+14],17,-1502002290),l=this.ff(l,c,p,u,t[n+15],22,1236535329),u=this.gg(u,l,c,p,t[n+1],5,-165796510),p=this.gg(p,u,l,c,t[n+6],9,-1069501632),c=this.gg(c,p,u,l,t[n+11],14,643717713),l=this.gg(l,c,p,u,t[n],20,-373897302),u=this.gg(u,l,c,p,t[n+5],5,-701558691),p=this.gg(p,u,l,c,t[n+10],9,38016083),c=this.gg(c,p,u,l,t[n+15],14,-660478335),l=this.gg(l,c,p,u,t[n+4],20,-405537848),u=this.gg(u,l,c,p,t[n+9],5,568446438),p=this.gg(p,u,l,c,t[n+14],9,-1019803690),c=this.gg(c,p,u,l,t[n+3],14,-187363961),l=this.gg(l,c,p,u,t[n+8],20,1163531501),u=this.gg(u,l,c,p,t[n+13],5,-1444681467),p=this.gg(p,u,l,c,t[n+2],9,-51403784),c=this.gg(c,p,u,l,t[n+7],14,1735328473),l=this.gg(l,c,p,u,t[n+12],20,-1926607734),u=this.hh(u,l,c,p,t[n+5],4,-378558),p=this.hh(p,u,l,c,t[n+8],11,-2022574463),c=this.hh(c,p,u,l,t[n+11],16,1839030562),l=this.hh(l,c,p,u,t[n+14],23,-35309556),u=this.hh(u,l,c,p,t[n+1],4,-1530992060),p=this.hh(p,u,l,c,t[n+4],11,1272893353),c=this.hh(c,p,u,l,t[n+7],16,-155497632),l=this.hh(l,c,p,u,t[n+10],23,-1094730640),u=this.hh(u,l,c,p,t[n+13],4,681279174),p=this.hh(p,u,l,c,t[n],11,-358537222),c=this.hh(c,p,u,l,t[n+3],16,-722521979),l=this.hh(l,c,p,u,t[n+6],23,76029189),u=this.hh(u,l,c,p,t[n+9],4,-640364487),p=this.hh(p,u,l,c,t[n+12],11,-421815835),c=this.hh(c,p,u,l,t[n+15],16,530742520),l=this.hh(l,c,p,u,t[n+2],23,-995338651),u=this.ii(u,l,c,p,t[n],6,-198630844),p=this.ii(p,u,l,c,t[n+7],10,1126891415),c=this.ii(c,p,u,l,t[n+14],15,-1416354905),l=this.ii(l,c,p,u,t[n+5],21,-57434055),u=this.ii(u,l,c,p,t[n+12],6,1700485571),p=this.ii(p,u,l,c,t[n+3],10,-1894986606),c=this.ii(c,p,u,l,t[n+10],15,-1051523),l=this.ii(l,c,p,u,t[n+1],21,-2054922799),u=this.ii(u,l,c,p,t[n+8],6,1873313359),p=this.ii(p,u,l,c,t[n+15],10,-30611744),c=this.ii(c,p,u,l,t[n+6],15,-1560198380),l=this.ii(l,c,p,u,t[n+13],21,1309151649),u=this.ii(u,l,c,p,t[n+4],6,-145523070),p=this.ii(p,u,l,c,t[n+11],10,-1120210379),c=this.ii(c,p,u,l,t[n+2],15,718787259),l=this.ii(l,c,p,u,t[n+9],21,-343485551),u=this.safe_add(u,r),l=this.safe_add(l,o),c=this.safe_add(c,i),p=this.safe_add(p,s);return[u,l,c,p]},t.binl2rstr=function(t){var e,n,r="";for(e=0,n=32*t.length;e<n;e+=8)r+=String.fromCharCode(t[e>>5]>>>e%32&255);return r},t.rstr2binl=function(t){var e,n,r=[];for(r[(t.length>>2)-1]=void 0,e=0,n=r.length;e<n;e+=1)r[e]=0;for(e=0,n=t.length;e<8*n;e+=8)r[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return r},t.rstr_md5=function(t){return this.binl2rstr(this.binl_md5(this.rstr2binl(t),8*t.length))},t.hmacMD5=function(t,e){var n,r,o=this.rstr2binl(t),i=[],s=[];for(i[15]=s[15]=void 0,o.length>16&&(o=this.binl_md5(o,8*t.length)),n=0;n<16;n+=1)i[n]=909522486^o[n],s[n]=1549556828^o[n];return r=this.binl_md5(i.concat(this.rstr2binl(e)),512+8*e.length),this.binl2rstr(this.binl_md5(s.concat(r),640))},t.rstr2hex=function(t){var e,n,r,o="";for(n=0,r=t.length;n<r;n++)e=t.charCodeAt(n),o+="0123456789abcdef".charAt(e>>>4&15)+"0123456789abcdef".charAt(15&e);return o},t.str2rstr_utf8=function(t){return unescape(encodeURIComponent(t))},t.raw_md5=function(t){return this.rstr_md5(this.str2rstr_utf8(t))},t.MD5=function(t){return this.rstr2hex(this.raw_md5(t))},t}();e.Hash=n}.apply(e,[n,e]))||(t.exports=r)},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,l=[],c=!1,p=-1;function d(){c&&u&&(c=!1,u.length?l=u.concat(l):p=-1,l.length&&h())}function h(){if(!c){var t=a(d);c=!0;for(var e=l.length;e;){for(u=l,l=[];++p<e;)u&&u[p].run();p=-1,e=l.length}u=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function g(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new f(t,e)),1!==l.length||c||a(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){"use strict";var r;void 0===(r=function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.CANCEL=0]="CANCEL",t[t.SET_VALUE=1]="SET_VALUE",t[t.REFOCUS=2]="REFOCUS"}(e.PickerCloseEffect||(e.PickerCloseEffect={}))}.apply(e,[n,e]))||(t.exports=r)},function(t,e,n){"use strict";var r;void 0===(r=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.getDefaultAllowedTags=function(){return["br","img","h1","h2","h3","h4","h5","h6","p","ul","li","span","a","img","em","b","i","strong","hr","table","thead","tr","td","article","aside","section","font","div","main","header"]},t.getDefaultAllowedNodeAttributeNames=function(){return["align","style","size","multiple","value","src","href","font","colspan","rowspan","color","alt","description","type","class","name"]},t.sanitize=function(t,e,n){if(!t)return t;var r=this.parseHTML(t);if(!r)return"";e=e||this.getDefaultAllowedTags(),n=n||this.getDefaultAllowedNodeAttributeNames();for(var o=r.body.querySelectorAll("*"),i=0,s=o.length;i<s;i++)if(-1===e.indexOf(o[i].nodeName.toLowerCase()))o[i].parentNode&&o[i].parentNode.removeChild(o[i]);else for(var a=o[i].attributes.length-1;a>-1;a--){var u=o[i].attributes[a].name.toLowerCase();if(-1===n.indexOf(u))o[i].removeAttribute(o[i].attributes[a].name);else if(["src","href"].indexOf(u)>-1)null===this.sanitizeHTMLSrc(o[i].attributes[a].value)&&o[i].removeAttribute(o[i].attributes[a].name)}return"\x3c!-- abcsubmit-html-sanitizer --\x3e"+r.body.innerHTML},t.parseHTML=function(t){if(!t)return null;var e,n;try{return(e=new DOMParser).parseFromString&&(n=e.parseFromString(t,"text/html"))?n:null}catch(t){return null}},t.sanitizeHTMLSrc=function(t){if(t){var e=/^([a-z]+):/i.exec(t);if(e&&-1===["http","https"].indexOf(e[1].toLowerCase()))return null}return t},t}();e.HTMLSanitizer=n}.apply(e,[n,e]))||(t.exports=r)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(0),n(293),n(295),n(296),n(297),n(298),n(174),n(299),n(300),n(301),n(3),n(17),n(6),n(14),n(2),n(16),n(7),n(28),n(12)],void 0===(o=function(t,e,n,r,o,i,a,u,l,c,p,d,h,f,g,m,y,v,b,C,E){Object.defineProperty(e,"__esModule",{value:!0});var A,I=function(t){function e(e,n,r,o){var i=t.call(this)||this;return i.parsedDocumentBodyInnerHTML="",i.domLevel3DelegatedEventsAdded=!1,i.document=e,i.code=n,i.formCommands=r,i.submissionModel=o,i}return s(e,t),e.prototype.getDocument=function(){return this.document},e.prototype.clear=function(t){void 0===t&&(t=!0),this.vm=e.createDefaultVM(),this.model=e.createEmptyModel(),t&&(this.document.innerHTML="")},e.prototype.write=function(t){var n=this;this.links=new D,this.scripts=new O,this.renderedID=f.UniqueId.next(),this.document.setAttribute("data-rendered-id",this.renderedID),this.clear(),this.renderedHTML="",this.trigger(e.EVENT_RENDER);try{var r=e.parseHTML(t);if(r){!function t(r){if(r&&r.nodeType===Node.ELEMENT_NODE)switch(r.nodeName.toLowerCase()){case"link":n.links.addLink(r),r.parentNode.removeChild(r);break;case"style":n.links.addStyle(r),r.parentNode.removeChild(r);break;case"script":n.scripts.addScript(r),r.parentNode.removeChild(r);break;case"iframe":case"frame":r.parentNode.removeChild(r);break;default:if(e.patchNodeAttributes(r),r.hasChildNodes())for(var o=r.childNodes,i=o.length-1;i>-1;i--)t(o[i])}}(r.documentElement),this.links.fetch().then((function(t){n.parsedDocumentBodyInnerHTML=r.body.innerHTML,n.render(t)})).fail((function(t){n.document.innerHTML="<span class='vfb vfb-error'></span> "+g.Strings.toHTML(String(t).replace(/^Error: /g,"")),n.trigger(e.EVENT_ERROR)}))}else this.document.innerHTML="",this.trigger(e.EVENT_LOAD)}catch(t){this.document.innerHTML="<span class='vfb vfb-error'></span> "+g.Strings.toHTML(String(t).replace(/^Error: /g,"")),this.trigger(e.EVENT_ERROR)}},e.prototype.setHTML=function(t,n){if(t)if(n){var r=e.parseHTML(n);r||(t.innerHTML="");for(var o=r.querySelectorAll("body script, body style, body link, body iframe, body frame"),i=o.length;i>-1;i--)o[i]&&o[i].parentNode.removeChild(o[i]);t.innerHTML=r.body.innerHTML,this.modernizeDOM(t,!1)}else t.innerHTML=""},e.prototype.render=function(t){for(var n in this.trigger(e.EVENT_BEFORE_RENDER),this.exposeJavascriptAPIs(this.vm),t)t.hasOwnProperty(n)&&(this.model[n]=t[n]);var r=m.Handlebars.to_html(this.parsedDocumentBodyInnerHTML,this.model).replace(/<!--([\s]+)?-->/g,""),o=this.links.getEmbeddableCSS(this.renderedID);this.renderedHTML="<style>"+o+"</style>"+r,this.document.innerHTML=this.renderedHTML;for(var i=0,s=this.scripts.getScripts(),a=s.length;i<a;i++)this.vm.eval(s[i],"event.js",e.EVAL_TIMEOUT);this.modernizeDOM(this.document,!0),this.trigger(e.EVENT_RENDER)},e.prototype.modernizeDOM=function(t,r){var o=this;void 0===r&&(r=!1),function(i){n(t).find("[data-events]").each((function(){try{var t=this.getAttribute("data-events"),n=JSON.parse(t);if(Array.isArray(n))for(var r=0,o=n.length;r<o;r++)n[r]instanceof Object&&n[r].event&&n[r].code&&(this[n[r].event]=function(t){return function(){return i.vm.eval(t,void 0,e.EVAL_TIMEOUT)}}(n[r].code))}catch(t){}})),r&&(o.domLevel3DelegatedEventsAdded||(n(t).on("click","a[href]",(function(t){var e=n(this).attr("href"),r=this.hasAttribute("target")?this.getAttribute("target"):null;i.Location&&null!==i.Location.setHref(e,r)&&(t.preventDefault(),t.stopPropagation())})),o.domLevel3DelegatedEventsAdded=!0))}(this)},e.prototype.exposeJavascriptAPIs=function(t){var e=this;t.realm.global.window=t.realm.global,this.Location=this.Location||new o.VDLocation(this,this.code),t.realm.global.location=this.Location.getSDK(),this.DataSources=this.DataSources||new a.VDDataSources(this),t.realm.global.dataSources=this.DataSources.getSDK(),this.Invoice=this.Invoice||new i.VDInvoice(this,this.code),this.Invoice.resetInvoiceListeners(),t.realm.global.invoice=this.Invoice.getSDK(),this.Console=this.Console||new d.VDConsole(this),t.realm.global.console=this.Console.getSDK(),this.Document=this.Document||new l.VDDocument(this),t.realm.global.document=this.Document.getSDK(),this.JQuery=this.JQuery||new u.VDJQuery(this,t.realm.global.document,this.Document),t.realm.global.$=this.JQuery.getSDK(),this.Timers=this.Timers||new c.VDTimers(this);var n=this.Timers.getSDK();t.realm.global.setTimeout=n.setTimeout,t.realm.global.clearTimeout=n.clearTimeout,t.realm.global.setInterval=n.setInterval,t.realm.global.clearInterval=n.clearInterval,this.Form=this.Form||new p.VDForm(this.code,this,this.formCommands,this.submissionModel),t.realm.global.form=this.Form.getSDK(),t.realm.global.alert=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];y.Dialog.alert.apply(e,t)},t.realm.global.htmlEntities=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return g.Strings.toHTML(t[0])},t.realm.global.encodeURIComponent=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return encodeURIComponent(t[0])},t.realm.global.escape=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return escape(t[0])},t.realm.global.btoa=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return btoa(t[0])},t.realm.global.atob=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return atob(t[0])},t.realm.global.debounce=function(t,e){return E.Debouncer.create(t,e)},t.realm.global.test=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=new RegExp(t[0]);return n.test(t[1])},t.realm.global.charAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t[0].charAt(t[1])}},e.prototype.getModel=function(){return this.model},e.prototype.getLinks=function(){return this.links},e.prototype.getScripts=function(){return this.scripts},e.prototype.getVm=function(){return this.vm},e.prototype.getRenderedId=function(){return this.renderedID},e.createDefaultVM=function(){return r.JavascriptVM.create(!1,!1)},e.patchNodeAttributes=function(t){for(var n=[],r=!1,o=t.attributes.length-1;o>-1;o--)/^on/i.test(t.attributes[o].name)?(n.push({event:t.attributes[o].name,code:t.attributes[o].value}),t.removeAttribute(t.attributes[o].name),r=!0):/^(href|src)$/i.test(t.attributes[o].name)&&("a"===t.nodeName.toLowerCase()&&"href"===t.attributes[o].name||t.setAttribute(t.attributes[o].name,e.patchSourceAttributes(t.attributes[o].value)));r&&t.setAttribute("data-events",JSON.stringify(n))},e.patchSourceAttributes=function(t){return t&&/([\s]+)?javascript:/.test(t)?"javascript:;":t},e.createEmptyModel=function(){return{}},e.parseHTML=function(t){if(!t)return null;var e,n;try{return(e=new DOMParser).parseFromString&&(n=e.parseFromString(t,"text/html"))?n:null}catch(t){return null}},e.EVAL_TIMEOUT=1e5,e.EVENT_RENDER="render",e.EVENT_ERROR="error",e.EVENT_LOAD="load",e.EVENT_BEFORE_RENDER="render.before",e}(h.EventEmitter);e.VirtualDOM=I,function(t){t.GENERIC="generic",t.ABCSUBMIT="abcsubmit"}(A=e.RemoteFetchDataSourceEngine||(e.RemoteFetchDataSourceEngine={}));var T=function(){function t(t){this.source=t,this.where=null,this.limit=20,this.skip=0}return t.prototype.setWhere=function(t){return this.where=t,this},t.prototype.setLimit=function(t){return this.limit=t,this},t.prototype.setSkip=function(t){return this.skip=t,this},t.prototype.execute=function(){var t=this;return n.Deferred((function(e){var r=v.URLParser.parseURL(t.source.getDataSourceHREF());r.search=r.search||{},t.limit&&(r.search.limit=String(t.limit)),t.skip&&(r.search.skip=String(t.skip)),t.where&&(r.search.where=String(t.where));var o=v.URLParser.createURL(r);n.get(o).then((function(t){e.resolve(t)})).fail((function(t){e.reject(new Error("Failed to execute select statement to "+o))}))}))},t}();e.RemoteFetchDataSourceSelectStatement=T;var S=function(){function t(t){this.source=t,this.where=null,this.fields=null}return t.prototype.setWhere=function(t){return this.where=t,this},t.prototype.setFields=function(t){return this.fields=t,this},t.prototype.execute=function(){var t=this;return n.Deferred((function(e){var r=v.URLParser.parseURL(t.source.getDataSourceHREF());if(r.search=r.search||{},t.where)if(r.search.where=String(t.where),t.fields){var o=v.URLParser.createURL(r);n.ajax(v.URLParser.createURL(r),{data:{document:JSON.stringify(t.fields)},type:"PUT",cache:!1,xhrFields:{withCredentials:!0}}).then((function(t){e.resolve(t)})).fail((function(){e.reject(new Error("Failed to execute update statement to "+o))}))}else e.reject(new Error("You must specify fields to be updated"));else e.reject(new Error("You must specify a filter condition!"))}))},t}();e.RemoteFetchDataSourceUpdateStatement=S;var w,_=function(){function t(t,e){this.result=void 0,this.offline=!1,this.dataSourceName=t,this.dataSourceHREF=e,this.engine=A.GENERIC,this.params=null}return t.prototype.getDataSourceHREF=function(){return this.dataSourceHREF},t.prototype.setOffline=function(t){return this.offline=!!t,t?console.log("[VIRTUAL_DOM] put source "+this.dataSourceName+" in offline mode"):console.log("[VIRTUAL_DOM] put source "+this.dataSourceName+" in online mode"),this},t.prototype.isOffline=function(){return this.offline},t.prototype.setEngine=function(t){switch(t){case A.ABCSUBMIT:case A.GENERIC:this.engine=t;break;default:throw new Error("Unknown remote fetch data source engine: "+JSON.stringify(t))}return this},t.prototype.getEngine=function(){return this.engine},t.prototype.getPromise=function(){var t=this;return n.Deferred((function(e){if(t.result=null,t.offline)e.resolve(t);else{console.log("[VIRTUAL_DOM] fetch "+t.dataSourceName,t.dataSourceHREF);var r={dataType:"json",type:"GET"};null!==t.params&&(r.data=b.Helpers.clone(t.params)),n.ajax(t.dataSourceHREF,r).then((function(n){t.result=n,e.resolve(t)})).fail((function(n){t.result=void 0,e.reject(new Error("Failed to fetch data source: "+t.dataSourceName))}))}}))},t.prototype.getName=function(){return this.dataSourceName},t.prototype.getData=function(){return this.result},t.prototype.getParams=function(){return b.Helpers.clone(this.params)},t.prototype.setParams=function(t){if(!(t instanceof Object))throw new Error("Illegal argument: params: Object expected!");var e={},n=0;for(var r in t)if(r&&t.hasOwnProperty(r)&&t.propertyIsEnumerable(r)&&null!==t[r]){if("string"!=typeof t[r])throw new Error("Illegal argument: params: Key "+JSON.stringify(r)+" must be of type string");e[r]=t[r],n++}this.params=n?e:null,console.log("[VIRTUAL_DOM] Set source "+JSON.stringify(this.dataSourceName)+" params to "+JSON.stringify(this.params))},t.prototype.select=function(){return this.engine!==A.ABCSUBMIT?null:new T(this)},t.prototype.update=function(){return this.engine!==A.ABCSUBMIT?null:new S(this)},t}();e.RemoteFetchDataSource=_,function(t){t.GLOBAL="global",t.SANDBOX="sandbox"}(w||(w={}));var N=function(){function t(t){this.cssText=String(t||"")}return t.prototype.setIsolationMode=function(t){switch(t){case w.GLOBAL:this.isolationMode=w.GLOBAL;break;case w.SANDBOX:default:this.isolationMode=w.SANDBOX}return this},t.prototype.getCSSAccordingToIsolationMode=function(t){switch(this.isolationMode){case w.GLOBAL:return this.cssText;case w.SANDBOX:default:try{var e=C.CSSUtils.parseCSSBuffer(this.cssText);return e.getCSSSelectors().forEach((function(e){e.isSpecial()||(e.getText().match(/([ ]+)?body([\[."'>+$])?/)?e.setText(e.getText().replace(/([ ]+)?body([\[."'>+$])?/g,'$1[data-rendered-id="'+t+'"]$2')):e.setText('[data-rendered-id="'+t+'"] '+e.getText()))})),e.toString()}catch(t){return""}}},t}(),D=function(){function t(){this.dataSources=[],this.styles=[]}return t.prototype.addLink=function(t){if(t&&t.hasAttribute("type")&&"application/json"===t.getAttribute("type")&&t.hasAttribute("name")&&t.getAttribute("name")&&t.hasAttribute("href")&&t.getAttribute("href")&&t.hasAttribute("rel")&&"data-source"===t.getAttribute("rel")){if(this.source(t.getAttribute("name")))throw new Error("Duplicate source "+JSON.stringify(t.getAttribute("name")));if(!this.isValidSourceName(t.getAttribute("name")))throw new Error("Illegal source name "+JSON.stringify(t.getAttribute("name")));this.dataSources.unshift(new _(t.getAttribute("name"),t.getAttribute("href")).setOffline(t.hasAttribute("offline")).setEngine(t.hasAttribute("engine")&&"abcsubmit"===t.getAttribute("engine")?A.ABCSUBMIT:A.GENERIC))}},t.prototype.source=function(t){for(var e=0,n=this.dataSources.length;e<n;e++)if(this.dataSources[e].getName()===t)return this.dataSources[e];return null},t.prototype.isValidSourceName=function(t){return t&&/^[a-z_$]([a-z0-9_$]+)?$/i.test(t)},t.prototype.addStyle=function(t){this.styles.unshift(new N(t.textContent).setIsolationMode(t.getAttribute("isolation")))},t.prototype.getEmbeddableCSS=function(t){for(var e=[],n=0,r=this.styles.length;n<r;n++)e.push(this.styles[n].getCSSAccordingToIsolationMode(t));return e.join("\n")},t.prototype.fetch=function(){var t=this;return n.Deferred((function(e){for(var r={},o=[],i=0,s=t.dataSources.length;i<s;i++)o.push(t.dataSources[i].getPromise());n.when.apply(t,o).then((function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var o=0,i=t.length;o<i;o++)r[t[o].getName()]=t[o].getData();e.resolve(r)})).fail((function(t){e.reject(t)}))}))},t.prototype.getDataSources=function(){return this.dataSources},t}(),O=function(){function t(){this.scripts=[]}return t.prototype.addScript=function(t){t.hasAttribute("type")&&"text/javascript"!==t.getAttribute("type")||t.hasAttribute("src")||this.scripts.unshift(t.textContent)},t.prototype.getScripts=function(){return this.scripts},t}()}.apply(e,r))||(t.exports=o)},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(0),n(215),n(147),n(216),n(183),n(114),n(45),n(2),n(8),n(28),n(12),n(7),n(18),n(1)],void 0===(o=function(t,e,n,r,o,i,a,u,l,c,p,d,h,f,g,m){Object.defineProperty(e,"__esModule",{value:!0});var y=function(t){function e(){var e=t.call(this)||this;return e.allowTransparency=!0,e.allowEmptyColor=!0,e.lastValue="#000000",e.addClass("color-picker"),e.list.setWidth(175),e}return s(e,t),e.prototype.isAllowTransparency=function(){return this.allowTransparency},e.prototype.setAllowTransparency=function(t){return this.allowTransparency=t,this},e.prototype.isAllowEmptyColor=function(){return this.allowEmptyColor},e.prototype.setAllowEmptyColor=function(t){return this.allowEmptyColor=t,this},e.prototype.onBeforeOpen=function(){if(this.allowEmptyColor&&this.list.append((new u.IconListItem).setValue("").setText(m.I18n.translateApplicationText("Automatic","ui.color-picker")).setIcon("square")),e.loadRecentColors(),this.list.append((new o.ListHeader).setText(m.I18n.translateApplicationText("Theme colors","ui.color-picker"))),this.list.append(new i.ColorListItem("#ffffff")),this.list.append(new i.ColorListItem("#000000")),this.list.append(new i.ColorListItem("#e7e6e6")),this.list.append(new i.ColorListItem("#44546a")),this.list.append(new i.ColorListItem("#4472c4")),this.list.append(new i.ColorListItem("#ed7d31")),this.list.append(new i.ColorListItem("#a5a5a5")),this.list.append(new i.ColorListItem("#ffc000")),this.list.append(new i.ColorListItem("#5b9bd5")),this.list.append(new i.ColorListItem("#70ad47")),this.list.append(new a.Separator),this.list.append(new i.ColorListItem("#f2f2f2")),this.list.append(new i.ColorListItem("#7f7f7f")),this.list.append(new i.ColorListItem("#d0cece")),this.list.append(new i.ColorListItem("#d6dce4")),this.list.append(new i.ColorListItem("#d9e2f3")),this.list.append(new i.ColorListItem("#fbe5d5")),this.list.append(new i.ColorListItem("#ededed")),this.list.append(new i.ColorListItem("#fff2cc")),this.list.append(new i.ColorListItem("#deebf6")),this.list.append(new i.ColorListItem("#e2efd9")),this.list.append((new a.Separator).addClass("collapse")),this.list.append(new i.ColorListItem("#d8d8d8")),this.list.append(new i.ColorListItem("#595959")),this.list.append(new i.ColorListItem("#aeabab")),this.list.append(new i.ColorListItem("#adb9ca")),this.list.append(new i.ColorListItem("#b4c6e7")),this.list.append(new i.ColorListItem("#f7cbac")),this.list.append(new i.ColorListItem("#dbdbdb")),this.list.append(new i.ColorListItem("#fee599")),this.list.append(new i.ColorListItem("#bdd7ee")),this.list.append(new i.ColorListItem("#c5e0b3")),this.list.append((new a.Separator).addClass("collapse")),this.list.append(new i.ColorListItem("#bfbfbf")),this.list.append(new i.ColorListItem("#3f3f3f")),this.list.append(new i.ColorListItem("#757070")),this.list.append(new i.ColorListItem("#8496b0")),this.list.append(new i.ColorListItem("#8eaadb")),this.list.append(new i.ColorListItem("#f4b183")),this.list.append(new i.ColorListItem("#c9c9c9")),this.list.append(new i.ColorListItem("#ffd965")),this.list.append(new i.ColorListItem("#9cc3e5")),this.list.append(new i.ColorListItem("#a8d08d")),this.list.append((new a.Separator).addClass("collapse")),this.list.append(new i.ColorListItem("#a5a5a5")),this.list.append(new i.ColorListItem("#262626")),this.list.append(new i.ColorListItem("#3a3838")),this.list.append(new i.ColorListItem("#323f4f")),this.list.append(new i.ColorListItem("#2f5496")),this.list.append(new i.ColorListItem("#c55a11")),this.list.append(new i.ColorListItem("#7b7b7b")),this.list.append(new i.ColorListItem("#bf9000")),this.list.append(new i.ColorListItem("#2e75b5")),this.list.append(new i.ColorListItem("#538135")),this.list.append((new a.Separator).addClass("collapse")),this.list.append(new i.ColorListItem("#7f7f7f")),this.list.append(new i.ColorListItem("#0c0c0c")),this.list.append(new i.ColorListItem("#171616")),this.list.append(new i.ColorListItem("#222a35")),this.list.append(new i.ColorListItem("#1f3864")),this.list.append(new i.ColorListItem("#833c0b")),this.list.append(new i.ColorListItem("#525252")),this.list.append(new i.ColorListItem("#7f6000")),this.list.append(new i.ColorListItem("#1e4e79")),this.list.append(new i.ColorListItem("#375623")),this.list.append((new o.ListHeader).setText(m.I18n.translateApplicationText("Standard colors","ui.color-picker"))),this.list.append(new i.ColorListItem("#c00000")),this.list.append(new i.ColorListItem("#ff0000")),this.list.append(new i.ColorListItem("#ffc000")),this.list.append(new i.ColorListItem("#ffff00")),this.list.append(new i.ColorListItem("#92d050")),this.list.append(new i.ColorListItem("#00b050")),this.list.append(new i.ColorListItem("#00b0f0")),this.list.append(new i.ColorListItem("#0070c0")),this.list.append(new i.ColorListItem("#002060")),this.list.append(new i.ColorListItem("#7030a0")),e.RECENT_COLORS&&e.RECENT_COLORS.length){this.list.append((new o.ListHeader).setText(m.I18n.translateApplicationText("Recent colors","ui.color-picker")));for(var t=0,n=e.RECENT_COLORS.length;t<n;t++)this.list.append(new i.ColorListItem(e.RECENT_COLORS[t]))}this.list.append((new o.ListHeader).setText(m.I18n.translateApplicationText("Other colors","ui.color-picker"))),this.list.append((new u.IconListItem).setValue("custom").setText(m.I18n.translateApplicationText("Custom color...","ui.color-picker")).setIcon("theme")),this.allowTransparency&&this.list.append((new u.IconListItem).setValue("transparent").setText(m.I18n.translateApplicationText("No color","ui.color-picker")).setIcon("no-color"))},e.loadRecentColors=function(){if(!e.isRecentColorsLoaded){try{var t=g.PersistentStorage.getItem("recent_colors");if(t){var n=JSON.parse(t);if(Array.isArray(n)){e.RECENT_COLORS=[];for(var r=0,o=n.length;r<o;r++)n[r]&&"string"==typeof n[r]&&e.RECENT_COLORS.push(n[r])}}}catch(t){}e.isRecentColorsLoaded=!0}},e.prototype.onClosed=function(){this.list.clear()},e.prototype.renderValue=function(t){for(;this.valueRenderer.firstChild;)this.valueRenderer.removeChild(this.valueRenderer.firstChild);var e=document.createElement("div");e.className="color",e.style.backgroundColor=t,this.valueRenderer.appendChild(e)},e.prototype.setValue=function(e){return"custom"!==e&&(this.lastValue=e),t.prototype.setValue.call(this,e)},e.prototype.onChanged=function(){var t=this;if("custom"===this.value)this.value=this.lastValue,this.render(this.value),v.pickColor(this.value||"#000000",this.allowTransparency).then((function(n){t.setValue(n),e.addRecentColor(n),t.onChanged()}));else{this.trigger("change"),e.addRecentColor(this.value);var n=this.getFirstParent(l.RibbonMenu);n&&n.trigger("change",this,this.getValue())}},e.addRecentColor=function(t){t&&d.CSSUtils.parseCSSColor(t)&&"transparent"!==t&&(e.RECENT_COLORS=f.Helpers.arrayUnique([t].concat(e.RECENT_COLORS)).slice(0,10),g.PersistentStorage.setItem("recent_colors",JSON.stringify(e.RECENT_COLORS),g.DataPersistenceType.NON_CRITICAL))},e.RECENT_COLORS=[],e.isRecentColorsLoaded=!1,e}(r.IconDropdown);e.ColorPicker=y;var v=function(){function t(){}return t.pickColor=function(t,e){var r=this;if(void 0===e&&(e=!0),t){var o=d.CSSUtils.parseCSSColor(t);if(o){var i=d.CSSColor.rgb2Hsv(o[0],o[1],o[2],o[3]);i&&(this.currentColorHSVA.h=i.h,this.currentColorHSVA.s=i.s,this.currentColorHSVA.v=i.v,this.currentColorHSVA.a=i.a)}}return n.Deferred((function(t){p.NetworkCache.get("/static/templates/ui-v2/ui-controls/color-picker-dialog.html").then((function(o){var i=new c.Dialog({title:m.I18n.translateApplicationText("Pick custom color","ui.color-picker"),style:c.DialogStyle.FLAT_COLOR,closable:!0,movable:!0,modal:!0,buttons:[{caption:m.I18n.translateApplicationText("Ok","ui.dialog"),callback:function(){i.close(),t.resolve(d.CSSColor.hsv2Hex(r.currentColorHSVA.h,r.currentColorHSVA.s,r.currentColorHSVA.v,r.currentColorHSVA.a))}},{caption:m.I18n.translateApplicationText("Cancel","ui.dialog"),callback:function(){i.close(),t.reject(new Error("Cancel pressed"))}}],width:"440px",height:"420px",onClose:function(){t.reject(new Error("User aborted"))}}).center();i.getRoot().setAttribute("data-allow-transparency",e?"1":"0"),i.getRoot().setAttribute("id","sys-color-picker"),i.getBody().innerHTML=o,m.I18n.translateDOMNode(i.getBody());var s=i.getBody().querySelector(".palette canvas"),a=i.getBody().querySelector(".hue-slider canvas"),u=i.getBody().querySelector(".format.rgb input"),l=i.getBody().querySelector(".format.hex input"),p=i.getBody().querySelector(".hue"),f=i.getBody().querySelector(".sat-val"),g=i.getBody().querySelector(".alpha"),y=i.getBody().querySelector(".alpha-slider"),v=i.getBody().querySelector(".solid-color"),b=a.offsetWidth,C=a.offsetHeight,E=s.offsetWidth,A=s.offsetHeight,I=y.offsetWidth;a.width=b,a.height=C,r.paintHueSliderBackground(a,b,C),s.width=E,s.height=A,r.paintPaletteBackground(s,E,A,r.currentColorHSVA.h),r.updateValues(l,u,v,g),r.updateHueDragHandle(p,b),r.updateSaturationAndValueDragHandle(f,E,A),n(p.parentNode).on("mousedown",(function(t){t.preventDefault(),t.stopPropagation(),r.currentColorHSVA.h=Math.min(359,Math.max(0,Math.round(t.offsetX/(b/360))||0)),r.updateHueDragHandle(p,b),r.paintPaletteBackground(s,E,A,r.currentColorHSVA.h),r.updateSaturationAndValueDragHandle(f,E,A),r.updateValues(l,u,v,g);var e=h.Debouncer.create((function(){r.paintPaletteBackground(s,E,A,r.currentColorHSVA.h),r.updateSaturationAndValueDragHandle(f,E,A),r.updateValues(l,u,v,g)}),0),o=p.parentNode.getBoundingClientRect(),i=function(t){r.currentColorHSVA.h=Math.min(359,Math.max(0,Math.round((t.clientX-o.left)/(b/360))||0)),r.updateHueDragHandle(p,b),e(),t.preventDefault(),t.stopPropagation()};n(document.body).on("mousemove",i).on("mouseup",(function t(e){e.preventDefault(),e.stopPropagation(),n(document.body).off("mousemove",i).off("mouseup",t)}))})),n(f.parentNode).on("mousedown",(function(t){t.preventDefault(),t.stopPropagation(),r.currentColorHSVA.s=Math.min(100,Math.max(0,Math.round(t.offsetX/(E/100))||0)),r.currentColorHSVA.v=100-Math.min(100,Math.max(0,Math.round(t.offsetY/(A/100))||0)),r.updateSaturationAndValueDragHandle(f,E,A),r.updateValues(l,u,v,g);var e=f.parentNode.getBoundingClientRect(),o=function(t){r.currentColorHSVA.s=Math.min(100,Math.max(0,Math.round((t.clientX-e.left)/(E/100))||0)),r.currentColorHSVA.v=100-Math.min(100,Math.max(0,Math.round((t.clientY-e.top)/(A/100))||0)),r.updateSaturationAndValueDragHandle(f,E,A),r.updateValues(l,u,v,g),t.preventDefault(),t.stopPropagation()};n(document.body).on("mousemove",o).on("mouseup",(function t(e){e.preventDefault(),e.stopPropagation(),n(document.body).off("mousemove",o).off("mouseup",t)}))})),n(g.parentNode).on("mousedown",(function(t){var e=y.getBoundingClientRect();t.preventDefault(),t.stopPropagation();var o=Math.round(Math.min(100,Math.max(0,Math.round(t.offsetX/(I/100))||0)));g.style.left=o+"%",r.currentColorHSVA.a=Math.max(0,Math.min(o/100,1)),r.updateValues(l,u,v,g);var i=function(t){var n=Math.round(Math.min(100,Math.max(0,Math.round((t.clientX-e.left)/(I/100))||0)));r.currentColorHSVA.a=Math.max(0,Math.min(100,n/100)),r.updateValues(l,u,v,g)};n(document.body).on("mousemove",i).on("mouseup",(function t(){n(document.body).off("mousemove",i).off("mouseup",t)}))})),n(l).on("input",(function(){if(r.isHexColor(l.value)){var t=d.CSSColor.hex2Hsv(l.value);console.log("parsedColor=",JSON.stringify(t,void 0,4)),r.currentColorHSVA.h=t.h,r.currentColorHSVA.s=t.s,r.currentColorHSVA.v=t.v,r.currentColorHSVA.a=t.a,r.updateValues(null,u,v,g),r.updateHueDragHandle(p,b),r.updateSaturationAndValueDragHandle(f,E,A),r.paintPaletteBackground(s,E,A,r.currentColorHSVA.h)}})).on("blur",(function(){r.isHexColor(l.value)||r.updateValues(l,u,v,g)})),n(u).on("input",(function(){var t=r.parseRGB(u.value);if(null!==t){var e=d.CSSColor.rgb2Hsv(t.r,t.g,t.b,t.a);r.currentColorHSVA.h=e.h,r.currentColorHSVA.s=e.s,r.currentColorHSVA.v=e.v,r.currentColorHSVA.a=e.a,r.updateValues(l,null,v,g),r.updateHueDragHandle(p,b),r.updateSaturationAndValueDragHandle(f,E,A),r.paintPaletteBackground(s,E,A,r.currentColorHSVA.h)}})).on("blur",(function(){null===r.parseRGB(u.value)&&r.updateValues(l,u,v,g)}))})).fail((function(e){t.reject(e)}))}))},t.paintHueSliderBackground=function(t,e,n){for(var r=360/e,o=0,i=t.getContext("2d"),s=0;s<e;s++)i.fillStyle="hsl("+Math.round(o)+",100%, 50%)",i.fillRect(s,0,1,n),o+=r},t.paintPaletteBackground=function(t,e,n,r){var o,i,s,a=100/e,u=100/n,l=t.getContext("2d");o=0,i=0;for(var c=0;c<e;c++){s=100;for(var p=0;p<n;p++){var h=d.CSSColor.hsv2Rgb(r,i,Math.round(s),this.currentColorHSVA.a);l.fillStyle="rgb("+h.r+","+h.g+","+h.b+")",l.fillRect(c,p,1,1),s-=u}o+=a,i=Math.round(o)}},t.updateValues=function(t,e,n,r){var o=d.CSSColor.hsv2Hex(this.currentColorHSVA.h,this.currentColorHSVA.s,this.currentColorHSVA.v,this.currentColorHSVA.a);if(t&&(t.value=o),n.style.backgroundColor=o,n.style.opacity=1===this.currentColorHSVA.a?"":String(this.currentColorHSVA.a),r.style.left=100*this.currentColorHSVA.a+"%",e){var i=d.CSSColor.hsv2Rgb(this.currentColorHSVA.h,this.currentColorHSVA.s,this.currentColorHSVA.v,this.currentColorHSVA.a);e.value=i.r+", "+i.g+", "+i.b+(1===i.a?"":", "+i.a)}},t.updateHueDragHandle=function(t,e){t.style.backgroundColor="hsl("+this.currentColorHSVA.h+", 100%, 50%)",t.style.left=(e/360*this.currentColorHSVA.h).toFixed(2)+"px"},t.updateSaturationAndValueDragHandle=function(t,e,n){var r=e/100*this.currentColorHSVA.s,o=n/100*(100-this.currentColorHSVA.v);t.style.left=r+"px",t.style.top=o+"px",t.style.backgroundColor=d.CSSColor.hsv2Hex(this.currentColorHSVA.h,this.currentColorHSVA.s,this.currentColorHSVA.v,1)},t.isHexColor=function(t){return!!t.match(/^#[a-f0-9]{6}([a-f0-9]{2})?$/i)},t.parseRGB=function(t){var e;if(e=/^([ ]+)?([\d]+)([ ]+)?,([ ]+)?([\d]+)([ ]+)?,([ ]+)?([\d]+)([ ]+)?,([ ]+)?([\d.]+)([ ]+)?$/.exec(t)){var n=~~e[2],r=~~e[5],o=~~e[8];if(n>=0&&n<256&&r>=0&&r<=256&&o>=0&&o<=256)return{r:n,g:r,b:o,a:e[11]?parseFloat(e[11])||0:1}}return null},t.currentColorHSVA={h:0,s:0,v:0,a:1},t}()}.apply(e,r))||(t.exports=o)},,,function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},,,function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(0),n(17),n(3),n(1)],void 0===(o=function(t,e,n,r,o,i){Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(){this.rootNode=document.createElement("div"),this.rootNode.setAttribute("data-role","tabs-sheet"),this.sheetTitle=document.createElement("div"),this.sheetTitle.setAttribute("data-role","sheet-title"),this.id=r.UniqueId.next(),this.rootNode.setAttribute("data-sheet-id",this.id),this.sheetTitle.setAttribute("data-sheet-id",this.id)}return t.prototype.getRootNode=function(){return this.rootNode},t.prototype.getTitleNode=function(){return this.sheetTitle},t.prototype.setTitle=function(t){return this.sheetTitle.textContent=t,this},t.prototype.setHTMLContent=function(t){return this.rootNode.innerHTML=t,i.I18n.translateDOMNode(this.rootNode),this},t.prototype.getId=function(){return this.id},t.prototype.withId=function(t){return this.id=t||r.UniqueId.next(),this.rootNode.setAttribute("data-sheet-id",this.id),this.sheetTitle.setAttribute("data-sheet-id",this.id),this},t}();e.TabsPanelSheet=a;var u=function(t){function e(){var e=t.call(this)||this;return e.sheets=[],e.activeSheet=null,e.rootNode=document.createElement("div"),e.rootNode.setAttribute("data-role","tabs-panel"),e.sheetTitlesNode=document.createElement("div"),e.sheetTitlesNode.setAttribute("data-role","titlebar"),e.rootNode.appendChild(e.sheetTitlesNode),e.pageContainerNode=document.createElement("div"),e.pageContainerNode.setAttribute("data-role","body"),e.rootNode.appendChild(e.pageContainerNode),function(t){n(e.sheetTitlesNode).on("click","[data-role=sheet-title]",(function(){var e=this.getAttribute("data-sheet-id");e&&(t.setActiveSheet(t.getSheetById(e)),t.trigger("click",e))}))}(e),e}return s(e,t),e.prototype.getRoot=function(){return this.rootNode},e.prototype.getSheetTitlesNode=function(){return this.sheetTitlesNode},e.prototype.withPanel=function(t){return this.sheets.push(t),this.sheetTitlesNode.appendChild(t.getTitleNode()),this.pageContainerNode.appendChild(t.getRootNode()),1!==this.sheets.length||this.activeSheet||this.setActiveSheet(t),this},e.prototype.getSheetById=function(t){for(var e=0,n=this.sheets.length;e<n;e++)if(this.sheets[e].getId()===t)return this.sheets[e];return null},e.prototype.setActiveSheet=function(t){return this.activeSheet&&(this.activeSheet.getRootNode().removeAttribute("data-active"),this.activeSheet.getTitleNode().removeAttribute("data-active")),this.activeSheet=t,this.activeSheet&&(this.activeSheet.getRootNode().setAttribute("data-active","1"),this.activeSheet.getTitleNode().setAttribute("data-active","1")),this.trigger("change",t),this},e.prototype.getActiveSheetId=function(){return this.activeSheet?this.activeSheet.getId():this.sheets[0].getId()},e}(o.EventEmitter);e.TabsPanel=u}.apply(e,r))||(t.exports=o)},,,,,function(t,e,n){"use strict";var r,o;r=[n,e,n(0),n(123),n(5),n(162),n(196)],void 0===(o=function(t,e,n,r,o,i,s){Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(){}return t.saveNeuralNetwork=function(t){return n.Deferred((function(e){var n=new File([new Blob([JSON.stringify(t)],{type:"text/plain"})],"network.json");o.API.upload("neural-networks",n,void 0,(function(t){console.log("save: "+t+"%")})).then((function(t){e.resolve(t)})).fail((function(t){e.reject(t||new Error("Failed to upload neural network on server"))}))}))},t.getNeuralNetworkById=function(t){return n.Deferred((function(e){o.API.get("neural-networks/"+t).then((function(t){e.resolve(t)})).fail((function(t){e.reject(t)}))}))},t.deleteNeuralNetwork=function(t){return n.Deferred((function(e){o.API.delete("neural-networks/"+t).then((function(t){!0===t?e.resolve():e.reject(new Error("Expected true from server when deleting a neural network, got something else"))})).fail((function(t){e.reject(t)}))}))},t.getNeuralNetworks=function(){return n.Deferred((function(t){o.API.get("neural-networks").then((function(e){t.resolve(e)})).fail((function(e){t.reject(e)}))}))},t.factory=function(t){return n.Deferred((function(e){i.BrainJsSDK.load().then((function(n){var o;switch(t.type){case r.NeuralNetworkType.NEURAL_NETWORK:o=new n.NeuralNetwork,t.model&&!0!==t.model?(o.fromJSON(t.model.net),o.stemmer=(new s.Stemmer).fromJSON(t.model.stemmer)):o.stemmer=new s.Stemmer;break;case r.NeuralNetworkType.RECURRENT_LSTM:o=new n.recurrent.LSTM,t.model&&!0!==t.model&&o.fromJSON(t.model);break;default:throw new Error("Don't know how to build a neural network of type "+JSON.stringify(t.type))}e.resolve({net:o,model:t})})).fail((function(t){e.reject(t)}))}))},t}();e.NeuralNetworkManager=a}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(70)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.choices={},e}return s(e,t),e.prototype.getValueType=function(){return n.EInputDefaultValue.SINGLE_SELECTION},e.prototype.getValue=function(){var t=void 0;for(var e in this.choices)if(this.choices.hasOwnProperty(e)&&this.choices[e]===this.value){t=this.value;break}return t},e.prototype.addChoice=function(t,e){return this.choices[t]=e,this},e.prototype.explainValue=function(){for(var t in this.choices)if(this.choices[t]===this.value)return t},e.prototype.getChoices=function(){return Object.keys(this.choices)},e.prototype.getChoiceValues=function(){var t=this;return Object.keys(this.choices).map((function(e){return t.choices[e]}))},e}(n.InputDefaultValue);e.SingleSelectionInputDefaultValue=r}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(23)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){var n=t.call(this)||this;return n.addClass("ui ui-greedy-space"),void 0!==e&&(n.root.style.width=e),n}return s(e,t),e}(n.NodeAbstract);e.GreedySpace=r}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r;void 0===(r=function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.PAYPAL=1]="PAYPAL",t[t.STRIPE_CHECKOUT=2]="STRIPE_CHECKOUT",t[t.SQUARE=3]="SQUARE",t[t.BRAINTREE=4]="BRAINTREE",t[t.PAYPAL_CHECKOUT=5]="PAYPAL_CHECKOUT",t[t.CASH_ON_DELIVERY=6]="CASH_ON_DELIVERY",t[t.EU_PLATESC=7]="EU_PLATESC",t[t.BITPAY=8]="BITPAY"}(e.EPaymentProcessorTypes||(e.EPaymentProcessorTypes={})),function(t){t.STRING="string",t.LONG_TEXT="textarea",t.LIST="list",t.INT="int",t.UNSIGNED_INT="uint",t.FLOAT="float",t.UNSIGNED_FLOAT="ufloat",t.BOOL="boolean"}(e.EPaymentProcessorPropertyType||(e.EPaymentProcessorPropertyType={}))}.apply(e,[n,e]))||(t.exports=r)},,function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(6),n(152)],void 0===(o=function(t,e,n,r){var o,i,a,u;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.NOT_MODIFIED=0]="NOT_MODIFIED",t[t.BACKTICKS=1]="BACKTICKS",t[t.BRACKETS=2]="BRACKETS"}(o=e.EIdentifierNotation||(e.EIdentifierNotation={})),function(t){t.PARENTHESIS="group",t.MATH="math",t.BOOLEAN="boolean",t.UNARY="unary",t.CONSTANT="constant",t.IDENTIFIER="identifier",t.FUNCTION_CALL="call"}(i=e.EExpressionType||(e.EExpressionType={})),function(t){t.ADD="add",t.SUB="sub",t.DIV="div",t.MOD="mod",t.MUL="mul",t.OR="or",t.AND="and",t.LT="lt",t.LTE="lte",t.GT="gt",t.GTE="gte",t.EQ="eq",t.NEQ="neq",t.STARTS_WITH="swith",t.ENDS_WITH="ewith",t.CONTAINS="contains",t.UMINUS="uminus",t.UPLUS="uplus",t.UNOT="not"}(a||(a={})),function(t){t.DATE="date",t.STRING="string",t.BOOLEAN="boolean",t.NUMBER="number",t.NULL="null"}(u||(u={}));var l=function(){function t(){}return t.prototype.getTargetField=function(){return this.targetField},t.createFrom=function(e){if(!e)throw new Error("Invalid argument: o: Object expected!");if(void 0===e.type)throw new Error('Invalid argument: o: "type" property expected: '+JSON.stringify(e,void 0,4));if("expression"===e.type){if(e.expressionType===i.MATH){if(void 0===e.a)throw new Error("Math expression operand A not defined!");if(void 0===e.b)throw new Error("Math expression operand B not defined!");if(void 0===e.operator)throw new Error("Math expression operator not defined!");switch(e.operator){case a.ADD:return new y(this.createFrom(e.a),this.createFrom(e.b));case a.SUB:return new v(this.createFrom(e.a),this.createFrom(e.b));case a.DIV:return new b(this.createFrom(e.a),this.createFrom(e.b));case a.MOD:return new C(this.createFrom(e.a),this.createFrom(e.b));case a.MUL:return new E(this.createFrom(e.a),this.createFrom(e.b));default:throw new Error("Unknown math expression operator: "+JSON.stringify(e.operator))}}if(e.expressionType===i.BOOLEAN){if(void 0===e.a)throw new Error("Boolean expression operand A not defined!");if(void 0===e.b)throw new Error("Boolean expression operand B not defined!");if(void 0===e.operator)throw new Error("Boolean expression operator not defined!");switch(e.operator){case a.OR:return new A(this.createFrom(e.a),this.createFrom(e.b));case a.AND:return new I(this.createFrom(e.a),this.createFrom(e.b));case a.LT:return new T(this.createFrom(e.a),this.createFrom(e.b));case a.LTE:return new S(this.createFrom(e.a),this.createFrom(e.b));case a.GT:return new w(this.createFrom(e.a),this.createFrom(e.b));case a.GTE:return new _(this.createFrom(e.a),this.createFrom(e.b));case a.EQ:return new N(this.createFrom(e.a),this.createFrom(e.b));case a.NEQ:return new D(this.createFrom(e.a),this.createFrom(e.b));case a.STARTS_WITH:return new O(this.createFrom(e.a),this.createFrom(e.b));case a.ENDS_WITH:return new P(this.createFrom(e.a),this.createFrom(e.b));case a.CONTAINS:return new x(this.createFrom(e.a),this.createFrom(e.b));default:throw new Error("Unknown boolean expression operator: "+JSON.stringify(e.operator))}}if(e.expressionType===i.UNARY){if(void 0===e.a)throw new Error("Unary expression operand A not defined!");if(void 0===e.operator)throw new Error("Unary expression operator not defined!");switch(e.operator){case a.UMINUS:return new R(this.createFrom(e.a));case a.UPLUS:return new M(this.createFrom(e.a));case a.UNOT:return new L(this.createFrom(e.a));default:throw new Error("Unknown binary expression operator: "+JSON.stringify(e.operator))}}if(e.expressionType===i.IDENTIFIER){if(void 0===e.name)throw new Error("Identifier name not defined!");return new d(e.name)}if(e.expressionType===i.CONSTANT){if(void 0===e.constantType)throw new Error("Constant type not defined!");if(void 0===e.value)throw new Error("Constant value not defined!");switch(e.constantType){case u.DATE:return new B(e.value);case u.BOOLEAN:return new k(e.value);case u.NUMBER:return new V(e.value);case u.STRING:return new F(e.value);case u.NULL:return new U(e.value);default:throw new Error("Constant type is unknown: "+JSON.stringify(e.constantType))}}if(e.expressionType===i.FUNCTION_CALL){if("string"!=typeof e.function_name||!e.function_name)throw new Error("Function name not defined or empty!");if(!Array.isArray(e.arguments))throw new Error("Arguments list of function "+JSON.stringify(e.function_name)+" is not of type array (got "+JSON.stringify(e.function_name)+")");for(var n=[],r=0,o=e.arguments,s=o.length;r<s;r++)n.push(t.createFrom(o[r]));return new m(e.function_name,n)}if(e.expressionType===i.PARENTHESIS){if(void 0===e.value)throw new Error("Parentheses contents value not defined!");return new g(this.createFrom(e.value))}throw new Error("Don't know how to properly tokenize expression!")}},t.castToLowerCaseString=function(t){return 0===t?"0":!0===t?"1":String(t||"").toLowerCase()},t.escapeIdentifierIfNeeded=function(t){return/^[a-z_$]([a-z_\d$]+)$/i.test(t)?t:"`"+t.split(".").join("`.`")+"`"},t}();e.Expression=l;var c=function(t){function e(e,n,r){var o=t.call(this)||this;return o.a=e,o.b=n,o.operator=r,o}return s(e,t),e.prototype.setTargetField=function(t){return this.a.setTargetField(t),this.b.setTargetField(t),this.targetField=t,this},e.prototype.getOperator=function(){return this.operator},e.prototype.getType=function(){return i.MATH},e.prototype.toAST=function(t){return{type:"expression",expressionType:i.MATH,a:this.a.toAST(t),b:this.b.toAST(t),operator:this.operator}},e.prototype.toString=function(){switch(this.operator){case a.ADD:return this.a.toString()+" + "+this.b.toString();case a.SUB:return this.a.toString()+" - "+this.b.toString();case a.DIV:return this.a.toString()+" / "+this.b.toString();case a.MOD:return this.a.toString()+" % "+this.b.toString();case a.MUL:return this.a.toString()+" * "+this.b.toString();default:throw new Error("Failed to convert expression to string!")}},e.prototype.toHTML=function(){switch(this.operator){case a.ADD:return this.a.toHTML()+' <span class="operator add">+</span> '+this.b.toHTML();case a.SUB:return this.a.toHTML()+' <span class="operator sub">-</span> '+this.b.toHTML();case a.DIV:return this.a.toHTML()+' <span class="operator div">/</span> '+this.b.toHTML();case a.MOD:return this.a.toHTML()+' <span class="operator mod">%</span> '+this.b.toHTML();case a.MUL:return this.a.toHTML()+' <span class="operator mul">*</span> '+this.b.toHTML();default:throw new Error("Failed to convert expression to HTML!")}},e.prototype.getFunctionsList=function(){return this.a.getFunctionsList().concat(this.b.getFunctionsList())},e.prototype.getIdentifiersList=function(){return this.a.getIdentifiersList().concat(this.b.getIdentifiersList())},e}(l),p=function(t){function e(e,n,r){var o=t.call(this)||this;return o.a=e,o.b=n,o.operator=r,o}return s(e,t),e.prototype.setTargetField=function(t){return this.a.setTargetField(t),this.b.setTargetField(t),this.targetField=t,this},e.prototype.getOperator=function(){return this.operator},e.prototype.getType=function(){return i.BOOLEAN},e.prototype.toAST=function(t){return{type:"expression",expressionType:i.BOOLEAN,a:this.a.toAST(t),b:this.b.toAST(t),operator:this.operator}},e.prototype.toString=function(){switch(this.operator){case a.OR:return this.a.toString()+" || "+this.b.toString();case a.AND:return this.a.toString()+" && "+this.b.toString();case a.LT:return this.a.toString()+" < "+this.b.toString();case a.LTE:return this.a.toString()+" <= "+this.b.toString();case a.GT:return this.a.toString()+" > "+this.b.toString();case a.GTE:return this.a.toString()+" >= "+this.b.toString();case a.EQ:return this.a.toString()+" == "+this.b.toString();case a.NEQ:return this.a.toString()+" != "+this.b.toString();case a.STARTS_WITH:return this.a.toString()+" =~ "+this.b.toString();case a.ENDS_WITH:return this.a.toString()+" ~= "+this.b.toString();case a.CONTAINS:return this.a.toString()+" ~ "+this.b.toString();default:throw new Error("Failed to convert boolean expression to string!")}},e.prototype.toHTML=function(){switch(this.operator){case a.OR:return this.a.toHTML()+" <span class='operator or'>||</span> "+this.b.toHTML();case a.AND:return this.a.toHTML()+" <span class='operator and'>&&</span> "+this.b.toHTML();case a.LT:return this.a.toHTML()+" <span class='operator lt'>&lt;</span> "+this.b.toHTML();case a.LTE:return this.a.toHTML()+" <span class='operator lte'>&lt;=</span> "+this.b.toHTML();case a.GT:return this.a.toHTML()+" <span class='operator gt'>&gt;</span> "+this.b.toHTML();case a.GTE:return this.a.toHTML()+" <span class='operator gte'>&gt;=</span> "+this.b.toHTML();case a.EQ:return this.a.toHTML()+" <span class='operator eq'>==</span> "+this.b.toHTML();case a.NEQ:return this.a.toHTML()+" <span class='operator neq'>!=</span> "+this.b.toHTML();case a.STARTS_WITH:return this.a.toHTML()+" <span class='operator swith'>=~</span> "+this.b.toHTML();case a.ENDS_WITH:return this.a.toHTML()+" <span class='operator ewith'>~=</span> "+this.b.toHTML();case a.CONTAINS:return this.a.toHTML()+" <span class='operator contains'>~</span> "+this.b.toHTML();default:throw new Error("Failed to convert boolean expression to HTML!")}},e.prototype.getFunctionsList=function(){return this.a.getFunctionsList().concat(this.b.getFunctionsList())},e.prototype.getIdentifiersList=function(){return this.a.getIdentifiersList().concat(this.b.getIdentifiersList())},e}(l),d=function(t){function e(e){var n=t.call(this)||this;return n.parent=null,n.name=e,n.preferredNotation=o.NOT_MODIFIED,n}return s(e,t),e.prototype.setTargetField=function(t){return this.targetField=t,this},e.prototype.setParent=function(t){return this.parent=t,this},e.prototype.getParent=function(){return this.parent},e.prototype.compute=function(t){e.TARGET_FIELD=this.targetField;var n=t.getIdentifierValue(this.name);return e.TARGET_FIELD=void 0,n},e.prototype.getType=function(){return i.IDENTIFIER},e.prototype.toAST=function(t){if(!t.allowIdentifiers)throw new Error("Identifiers are not supported");return{type:"expression",expressionType:i.IDENTIFIER,name:this.name}},e.prototype.toString=function(){var t=l.escapeIdentifierIfNeeded(this.name);return this.preferredNotation===o.BRACKETS&&-1===t.indexOf("{")&&-1===t.indexOf("}")&&(t="{"+t.replace(/`/g,"")+"}"),(void 0!==this.prepend?this.prepend:"")+t+(void 0!==this.append?this.append:"")},e.prototype.toHTML=function(){var t=this.name.split(".");return 2!==t.length?'<span class="identifier">'+n.Strings.toHTML(this.name)+"</span>":'<span class="identifier">'+n.Strings.toHTML(t[0])+"<span class='dot'>.</span>"+n.Strings.toHTML(t[1])+"</span>"},e.prototype.getFunctionsList=function(){return[]},e.prototype.getIdentifiersList=function(){return[this]},e.prototype.getName=function(){return this.name},e.prototype.withPrepend=function(t){return this.prepend=t,this},e.prototype.withAppend=function(t){return this.append=t,this},e.prototype.withPreferredNotation=function(t){this.preferredNotation=t},e}(l);e.IdentifierExpression=d;var h=function(t){function e(e,n){var r=t.call(this)||this;return r.a=e,r.operator=n,r}return s(e,t),e.prototype.setTargetField=function(t){return this.a.setTargetField(this.targetField=t),this},e.prototype.toAST=function(t){return{type:"expression",expressionType:i.UNARY,operator:this.operator,a:this.a.toAST(t)}},e.prototype.getOperator=function(){return this.operator},e.prototype.getType=function(){return i.UNARY},e.prototype.toString=function(){switch(this.operator){case a.UMINUS:return"-"+this.a.toString();case a.UPLUS:return"+"+this.a.toString();case a.UNOT:return"!"+this.a.toString();default:throw new Error("Failed to convert unary expression to string!")}},e.prototype.toHTML=function(){switch(this.operator){case a.UMINUS:return"<span class='operator uminus'>-</span>"+this.a.toHTML();case a.UPLUS:return"<span class='operator uplus'>+</span>"+this.a.toHTML();case a.UNOT:return"<span class='operator unot'>!</span>"+this.a.toHTML();default:throw new Error("Failed to convert unary expression to string!")}},e.prototype.getFunctionsList=function(){return this.a.getFunctionsList()},e.prototype.getIdentifiersList=function(){return this.a.getIdentifiersList()},e}(l),f=function(t){function e(e){var n=t.call(this)||this;return n.constant=e,n}return s(e,t),e.prototype.toAST=function(){return{type:"expression",expressionType:i.CONSTANT,constantType:this.getConstantType(),value:this.constant}},e.prototype.compute=function(t){return this.constant},e.prototype.getType=function(){return i.CONSTANT},e.prototype.toString=function(){return JSON.stringify(this.constant)},e.prototype.toHTML=function(){return'<span class="constant '+this.getConstantType()+'">'+n.Strings.toHTML(String(this.constant))+"</span>"},e.prototype.getFunctionsList=function(){return[]},e.prototype.getIdentifiersList=function(){return[]},e}(l),g=function(t){function e(e){var n=t.call(this)||this;return n.expression=e,n}return s(e,t),e.prototype.setTargetField=function(t){return this.expression.setTargetField(this.targetField=t),this},e.prototype.toAST=function(t){return{type:"expression",expressionType:i.PARENTHESIS,value:this.expression.toAST(t)}},e.prototype.compute=function(t){return this.expression.compute(t)},e.prototype.getType=function(){return i.PARENTHESIS},e.prototype.toString=function(){return"( "+this.expression.toString()+" )"},e.prototype.toHTML=function(){return"<span class='parenthesis open'>(</span> "+this.expression.toHTML()+' <span class="parenthesis close">)</span>'},e.prototype.getFunctionsList=function(){return this.expression.getFunctionsList()},e.prototype.getIdentifiersList=function(){return this.expression.getIdentifiersList()},e}(l),m=function(t){function e(e,n){var r=t.call(this)||this;return r.argumentsList=[],r.functionName=e,r.argumentsList=n,r.dissolved=!1,r}return s(e,t),e.prototype.setTargetField=function(t){return this.targetField=t,this.argumentsList.forEach((function(e){return e.setTargetField(t)})),this},e.prototype.toAST=function(t){if(!t.allowFunctionCalls)throw new Error("Function calls are not supported");for(var e={type:"expression",expressionType:i.FUNCTION_CALL,function_name:this.functionName,arguments:[]},n=0,r=this.argumentsList.length;n<r;n++)e.arguments.push(this.argumentsList[n].toAST(t));return e},e.prototype.compute=function(t){var n,r,o=t.getFunction(this.functionName);if(!o)throw new Error("Function: "+JSON.stringify(this.functionName)+" not found in current environment!");if(e.TARGET_FIELD=this.targetField,o.passExpressions)r=(n=o.func).call.apply(n,[window,t].concat(this.argumentsList));else{for(var i=[],s=0,a=this.argumentsList.length;s<a;s++)i.push(this.argumentsList[s].compute(t));r=o.func.apply(window,i)}return e.TARGET_FIELD=void 0,r},e.prototype.getType=function(){return i.FUNCTION_CALL},e.prototype.toString=function(){return this.dissolved?this.argumentsList.join(", "):l.escapeIdentifierIfNeeded(this.functionName)+"("+this.argumentsList.join(", ")+")"},e.prototype.toHTML=function(){for(var t=[],e=0,r=this.argumentsList.length;e<r;e++)t.push('<span class="argument">'+this.argumentsList[e].toHTML()+"</span>");var o=n.Strings.toHTML(this.functionName);return'<span class="function-call" data-function-name="'+o+'"><span class="function-name">'+o+'</span><span class="open-bracket">(</span>'+t.join('<span class="argument-separator">,</span> ')+'<span class="close-bracket">)</span></span>'},e.prototype.getFunctionsList=function(){for(var t=[this],e=0,n=this.argumentsList.length;e<n;e++)t=t.concat(this.argumentsList[e].getFunctionsList());return t},e.prototype.getIdentifiersList=function(){for(var t=[],e=0,n=this.argumentsList.length;e<n;e++)t=t.concat(this.argumentsList[e].getIdentifiersList());for(e=0,n=t.length;e<n;e++)t[e].setParent(this);return t},e.prototype.getArgumentsList=function(){return this.argumentsList},e.prototype.getName=function(){return this.functionName},e.prototype.dissolve=function(){return this.dissolved=!0,this},e.TARGET_FIELD=void 0,e}(l);e.FunctionCallExpression=m;var y=function(t){function e(e,n){return t.call(this,e,n,a.ADD)||this}return s(e,t),e.prototype.compute=function(t){var e=this.a.compute(t),n=this.b.compute(t);switch(!0){case e instanceof Date&&"number"==typeof n:return e.setDate(e.getDate()+Math.round(Number(n)||0)),e;case n instanceof Date&&"number"==typeof e:return n.setDate(n.getDate()+Math.round(Number(e)||0)),n;default:return e+n}},e}(c),v=function(t){function e(e,n){return t.call(this,e,n,a.SUB)||this}return s(e,t),e.prototype.compute=function(t){var e=this.a.compute(t),n=this.b.compute(t);switch(!0){case e instanceof Date&&n instanceof Date:var r=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),o=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate());return Math.floor(r-o)/864e5;case e instanceof Date&&"number"==typeof n:return e.setDate(e.getDate()-Math.round(Number(n)||0)),e;case n instanceof Date&&"number"==typeof e:return null;default:return e-n}},e}(c),b=function(t){function e(e,n){return t.call(this,e,n,a.DIV)||this}return s(e,t),e.prototype.compute=function(t){return this.a.compute(t)/this.b.compute(t)},e}(c),C=function(t){function e(e,n){return t.call(this,e,n,a.MOD)||this}return s(e,t),e.prototype.compute=function(t){return this.a.compute(t)%this.b.compute(t)},e}(c),E=function(t){function e(e,n){return t.call(this,e,n,a.MUL)||this}return s(e,t),e.prototype.compute=function(t){return this.a.compute(t)*this.b.compute(t)},e}(c),A=function(t){function e(e,n){return t.call(this,e,n,a.OR)||this}return s(e,t),e.prototype.setTargetField=function(t){return this.targetField=t,this},e.prototype.compute=function(t){return this.a.compute(t)||this.b.compute(t)},e}(p),I=function(t){function e(e,n){return t.call(this,e,n,a.AND)||this}return s(e,t),e.prototype.setTargetField=function(t){return this.targetField=t,this},e.prototype.compute=function(t){return this.a.compute(t)&&this.b.compute(t)},e}(p),T=function(t){function e(e,n){return t.call(this,e,n,a.LT)||this}return s(e,t),e.prototype.compute=function(t){var e=this.a.compute(t),n=this.b.compute(t);return e instanceof Date&&n instanceof Date?e.getTime()<n.getTime():e<n},e}(p),S=function(t){function e(e,n){return t.call(this,e,n,a.LTE)||this}return s(e,t),e.prototype.compute=function(t){var e=this.a.compute(t),n=this.b.compute(t);return e instanceof Date&&n instanceof Date?e.getTime()<=n.getTime():e<=n},e}(p),w=function(t){function e(e,n){return t.call(this,e,n,a.GT)||this}return s(e,t),e.prototype.compute=function(t){var e=this.a.compute(t),n=this.b.compute(t);return e instanceof Date&&n instanceof Date?e.getTime()>n.getTime():e>n},e}(p),_=function(t){function e(e,n){return t.call(this,e,n,a.GTE)||this}return s(e,t),e.prototype.compute=function(t){var e=this.a.compute(t),n=this.b.compute(t);return e instanceof Date&&n instanceof Date?e.getTime()>=n.getTime():e>=n},e}(p),N=function(t){function e(e,n){return t.call(this,e,n,a.EQ)||this}return s(e,t),e.prototype.compute=function(t){return r.FormulaUtils.isEqual(this.a,this.b,t)},e}(p),D=function(t){function e(e,n){return t.call(this,e,n,a.NEQ)||this}return s(e,t),e.prototype.compute=function(t){return r.FormulaUtils.isDifferent(this.a,this.b,t)},e}(p),O=function(t){function e(e,n){return t.call(this,e,n,a.STARTS_WITH)||this}return s(e,t),e.prototype.compute=function(t){var e=l.castToLowerCaseString(this.a.compute(t)),n=l.castToLowerCaseString(this.b.compute(t));return 0===e.indexOf(n)},e}(p),P=function(t){function e(e,n){return t.call(this,e,n,a.ENDS_WITH)||this}return s(e,t),e.prototype.compute=function(t){var e=l.castToLowerCaseString(this.a.compute(t)),n=l.castToLowerCaseString(this.b.compute(t)),r=e.length,o=n.length;return e.substr(r-o,o)==n},e}(p),x=function(t){function e(e,n){return t.call(this,e,n,a.CONTAINS)||this}return s(e,t),e.prototype.compute=function(t){var e=l.castToLowerCaseString(this.a.compute(t)),n=l.castToLowerCaseString(this.b.compute(t));return e.indexOf(n)>-1},e}(p),M=function(t){function e(e){return t.call(this,e,a.UPLUS)||this}return s(e,t),e.prototype.compute=function(t){return+this.a.compute(t)},e}(h),R=function(t){function e(e){return t.call(this,e,a.UMINUS)||this}return s(e,t),e.prototype.compute=function(t){return-this.a.compute(t)},e}(h),L=function(t){function e(e){return t.call(this,e,a.UNOT)||this}return s(e,t),e.prototype.compute=function(t){return!this.a.compute(t)},e}(h),F=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.getConstantType=function(){return u.STRING},e.prototype.setTargetField=function(t){return this.targetField=t,this},e.prototype.getFunctionsList=function(){return[]},e}(f),k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.setTargetField=function(t){return this.targetField=t,this},e.prototype.getConstantType=function(){return u.BOOLEAN},e}(f),B=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.getConstantType=function(){return u.DATE},e.prototype.setTargetField=function(t){return this.targetField=t,this},e.prototype.toAST=function(){return{type:"expression",expressionType:i.CONSTANT,constantType:u.DATE,value:this.toString()}},e.prototype.toString=function(){return n.Strings.strPad(String(this.constant.getFullYear()),4,"0")+"/"+n.Strings.strPad(String(this.constant.getMonth()+1),2,"0")+"/"+n.Strings.strPad(String(this.constant.getDate()),2,"0")},e.prototype.toHTML=function(){return'<span class="constant '+this.getConstantType()+'">'+n.Strings.toHTML(this.toString())+"</span>"},e}(f),V=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.setTargetField=function(t){return this.targetField=t,this},e.prototype.getConstantType=function(){return u.NUMBER},e}(f),U=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.setTargetField=function(t){return this.targetField=t,this},e.prototype.getConstantType=function(){return u.NULL},e}(f)}.apply(e,r))||(t.exports=o)},,,,function(t,e,n){"use strict";var r,o;r=[n,e,n(0),n(166),n(2),n(11),n(1),n(8),n(14),n(110)],void 0===(o=function(t,e,n,r,o,i,s,a,u,l){Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function t(){}return t.addDataset=function(t){this.datasets.push(t)},t.importChoices=function(t){var e=this,c=new o.Dialog({modal:!0,movable:!0,closable:!0,style:o.DialogStyle.FLAT_COLOR,title:s.I18n.translateApplicationText("Import choices","editor-datasets"),width:"500px",height:"500px",id:"editor-common-datasets"}).center(),p=new i.Loader(c.getBody()).addLoadRequest(),d=null;n.when(a.NetworkCache.get("/static/templates/ui-v2/editor/dialogs/common-datasets-dialog.html")).then((function(o){p.removeLoadRequest();var i={datasets:e.datasets.map((function(t,e){return{index:String(e),name:s.I18n.translateApplicationText(t.getName(),"editor-datasets")}}))};c.getBody().innerHTML=u.Handlebars.to_html(o,i),c.setButtons([{caption:s.I18n.translateApplicationText("Save","ui.dialog"),callback:function(){d&&t&&d.getChoices().then((function(e){t.setProperty("choices.text",e.join("\n"),t),t.hasProperty("choices.allowOther")&&t.setProperty("choices.allowOther",!1),t instanceof r.Radio||t instanceof l.CheckBox?(t.onChoicesChanged(!0),20==t.getProperty("size.width")?(t.setProperty("layout.type","4-cols"),t.render()):t.getProperty("size.width")>=15?(t.setProperty("layout.type","3-cols"),t.render()):t.getProperty("size.width")>=10?(t.setProperty("layout.type","2-cols"),t.render()):(t.setProperty("layout.type","none"),t.render())):(t.onChoicesChanged(),t.onDeselect(),t.onSelect())})),c.close()}},{caption:s.I18n.translateApplicationText("Cancel","ui.dialog"),callback:function(){c.close()}}]);var a=n(c.getBody()).find("#ecd-preview"),h=n(c.getBody()).find("#ecd-list"),f=n(c.getBody()).find("#ecd-renderer").text().replace(/\[/g,"{").replace(/]/g,"}"),g=function(t){var n=e.datasets[t];a.text(""),d=n,n.getChoices().then((function(t){a.html(u.Handlebars.to_html(f,{choices:t}))}))};h.on("focus",".dataset",(function(){var t=~~n(this).attr("data-index");n(this).addClass("selected").siblings(".selected").removeClass("selected"),g(t)})),e.datasets[0]&&(g(0),h.find(".dataset:first-child").addClass("selected"))})).fail((function(){p.removeLoadRequest(),c.close(),o.Dialog.alert("Error loading common datasets. Please retry. If the problem persists, contact support","Error loading application module")}))},t.datasets=[],t}();e.EditorCommonDatasetsManager=c}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(0),n(9),n(4),n(127),n(250),n(251),n(7),n(1),n(10),n(13),n(128),n(252)],void 0===(o=function(t,e,n,r,o,i,a,u,l,c,p,d,h,f){var g;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.NONE="none",t.TWO_COLUMNS="2-cols",t.THREE_COLUMNS="3-cols",t.FOUR_COLUMNS="4-cols",t.TWO_ROWS="2-rows",t.THREE_ROWS="3-rows",t.FOUR_ROWS="4-rows"}(g=e.CheckboxLayout||(e.CheckboxLayout={}));var m=function(t){function e(n,r,o){var i=t.call(this,n,r||e.getDefaultProperties(n),o)||this;return i.inputs=[],i.addClass("checkbox"),i.onChoicesChanged(!1),i.root.tabIndex=0,i}return s(e,t),e.prototype.getFieldsLayout=function(){var t=[],e=this.getLayoutType();if(e===g.NONE){for(var n=this.inputs.length,o=0,i=n;o<i;o++)t.push({row:o,span:r.InputSpan.FULL,domNode:this.inputs[o].getRoot()});this.other&&(t.push({row:n,span:r.InputSpan.FULL,domNode:this.other.getRoot()}),n++),this.addOtherInput&&t.push({row:n,span:r.InputSpan.FULL,domNode:this.addOtherInput.getRoot()})}else{var s=void 0,a=void 0;switch(e){case g.TWO_COLUMNS:s=2,a=r.InputSpan.HALF;break;case g.THREE_COLUMNS:a=r.InputSpan.THIRD,s=3;break;case g.FOUR_COLUMNS:a=r.InputSpan.QUARTER,s=4}var u=0,l=this.inputs,c=0;for(o=0,i=l.length;o<i;o++)t.push({row:c,span:u===s-1?r.InputSpan.REMAINING:a,domNode:l[o].getRoot()}),++u===s&&(u=0,c++);0!==u&&c++,this.other&&(t.push({row:c,span:r.InputSpan.FULL,domNode:this.other.getRoot()}),c++),this.addOtherInput&&t.push({row:c,span:r.InputSpan.FULL,domNode:this.addOtherInput.getRoot()})}return t},e.prototype.getLayoutType=function(){switch(this.hasProperty("layout.type")?this.getProperty("layout.type"):g.NONE){case g.TWO_COLUMNS:case g.TWO_ROWS:return g.TWO_COLUMNS;case g.THREE_COLUMNS:case g.THREE_ROWS:return g.THREE_COLUMNS;case g.FOUR_COLUMNS:case g.FOUR_ROWS:return g.FOUR_COLUMNS;default:return g.NONE}},e.prototype.getNodeName=function(){return"Choice"},e.prototype.getTypeId=function(){return o.NodeTypes.CHECKBOX},e.prototype.getValue=function(){for(var t=[],e=0,n=this.inputs.length;e<n;e++){var r=this.inputs[e].getValue();this.inputs[e].isChecked()&&r&&t.push(r)}if(this.other){r=this.other.getValue();this.other.isChecked()&&r&&t.push(r)}return t.length?l.Helpers.arrayUnique(t,(function(t,e){return String(t||"").toLowerCase()===String(e||"").toLowerCase()?0:-1})):null},e.prototype.hasLabel=function(){return!0},e.prototype.hasValue=function(){return!0},e.prototype.setValue=function(t){if(Array.isArray(t)){for(var e=[],n=0,r=this.inputs.length;n<r;n++)this.inputs[n].setChecked(t.indexOf(this.inputs[n].getValue())>-1),e.push(this.inputs[n].getValue());if(this.other){this.other.setChecked(!1).setValue("");for(n=0,r=t.length;n<r;n++)if(t[n]&&-1===e.indexOf(t[n])){this.other.setValue(t[n]).setChecked(!0);break}}}else{for(n=0,r=this.inputs.length;n<r;n++)this.inputs[n].setChecked(!1);this.other&&this.other.setChecked(!1).setValue("")}return this},e.getDefaultProperties=function(t){var e=c.I18n.translateApplicationText("Choice","control-defaults");return this.addLabelProperties(this.addInputProperties(this.addSizeProperties({name:"Q",visibility:"",formula:"",choices:{text:c.I18n.translateApplicationText("Choice 1\nChoice 2\nChoice 3","control-defaults"),allowOther:!1},layout:{type:g.NONE},validation:{required:!1,customErrorMessage:""}}),t),e,t)},e.prototype.getTranslations=function(){var t=[];this.properties.label.text&&t.push({original:this.properties.label.text});for(var e=this.getTextChoices(),n=e.length,r=0;r<n;r++)t.push({original:e[r]});if(this.properties.choices.allowOther&&t.push({original:c.I18n.translateApplicationText("Other:","control-defaults.choice")}),this.hasProperty("validation.customErrorMessage")){var o=this.getProperty("validation.customErrorMessage");o&&t.push({original:o,context:"form-fields-errors"})}return t},e.prototype.getTextChoices=function(){return void 0!==this.cachedGetTextChoicesResult?this.cachedGetTextChoicesResult:String(this.properties.choices.text||"").split(/(\r\n|\r|\n)/).map((function(t){return t.trim()})).filter((function(t){return""!==t}))},e.prototype.onChoicesChanged=function(t){void 0===t&&(t=!0);for(var e,n=this.getTextChoices(),r=n.length;(e=this.inputs.length)!==r;)e>r?this.inputs.pop():this.inputs.push(new i.CheckBoxInput(this,this.document.isEditMode()));for(var o=0;o<r;o++)this.inputs[o].setChecked(!1).setIndex(o).setValue(n[o]).setDisabled(this.document.isEditMode()).setRemovable(this.document.isEditMode()).setDragable(this.document.isEditMode());this.properties.choices.allowOther?this.other=this.other||new a.CheckBoxOtherInput(this,this.document.isEditMode()).setRemovable(this.document.isEditMode()):this.other&&(this.other=void 0),this.document.isEditMode()&&(this.addOtherInput=this.addOtherInput||new u.AddOtherOptionCheckBoxInput(this),this.addOtherInput.update()),t&&this.render()},e.prototype.getTextAssociatedWithLabel=function(t){if(t===this.labelDOMNode)return this.getProperty("label.text");for(var e=0,n=this.inputs.length;e<n;e++)if(this.inputs[e].getLabelDOMNode()===t)return this.inputs[e].getValue();return""},e.prototype.setLabelTextWhichIsComingFromTheUser=function(e,n){if(n===this.labelDOMNode)return t.prototype.setLabelTextWhichIsComingFromTheUser.call(this,e,n);for(var r=this.getTextChoices(),o=0,i=this.inputs.length;o<i;o++)if(this.inputs[o].getLabelDOMNode()===n){var s=h.RulesTextNormalizer.normalizeText(String(e||"").trim().replace(/[\r\n]+/g," "));return r[o]=s,this.inputs[o].setValue(s,!1),this.setProperty("choices.text",r.join("\n"),this),this}return this},e.prototype.getRenderedCSS=function(){var t=p.cast(this.properties.label.color),e=p.cast(this.properties.label.font.family),n=p.cast(this.properties.label.font.size),r=p.cast(this.properties.label.font.bold)?"bold":"normal",o=p.cast(this.properties.label.font.italic)?"italic":"normal",i=p.cast(this.properties.label.font.underline)?"underline":"none",s=p.cast(this.properties.label.font.align),a=p.cast(this.properties.input.color),u=p.cast(this.properties.input.backgroundColor),l=p.cast(this.properties.input.borderColor),c=p.cast(this.properties.input.borderWidth),d=p.cast(this.properties.input.borderRadius),h=p.cast(this.properties.input.borderStyle),f=p.cast(this.properties.input.font.family),g=p.cast(this.properties.input.font.size),m=p.cast(this.properties.input.font.bold)?"bold":"normal",y=p.cast(this.properties.input.font.italic)?"italic":"normal",v=p.cast(this.properties.input.font.underline)?"underline":"none",b=p.cast(this.properties.input.font.align),C=this.document.getProperty("theme.selection.borderColor");return"\n            > label {\n                color: "+t+";\n                font-size: "+n+'px;\n                font-family: "'+e+'";\n                font-weight: '+r+";\n                font-style: "+o+";\n                text-decoration: "+i+";\n                text-align: "+s+";\n            }\n\n            .input label {\n                font-weight: "+m+";\n                font-style: "+y+";\n                text-decoration: "+v+";\n                text-align: "+b+";\n                font-size: "+g+'px;\n                font-family: "'+f+'";\n                color: '+a+";\n            }\n\n            .input {\n                .decorator {\n                    color: "+a+";\n                }\n                &:hover {\n                    .decorator {\n                        color: "+C+";\n                    }\n                }\n                input[type=text] {\n                    color: "+a+";\n                    background-color: "+u+";\n                    border: "+c+" "+h+" "+l+";\n                    border-radius: "+d+";\n                    font-weight: "+m+";\n                    font-style: "+y+";\n                    text-decoration: "+v+";\n                    text-align: "+b+";\n                    font-size: "+g+'px;\n                    font-family: "'+f+'";\n                    \n                    &:hover,\n                    &:focus {\n                        border-color: '+C+";\n                    }\n                    \n                    &:focus {\n                        background-color: "+this.document.getProperty("theme.selection.backgroundColor")+";\n                    }\n                }\n            }\n        "},e.prototype.appendOption=function(){var t=this.getTextChoices();t.push(c.I18n.translateApplicationText("Choice %1","control-defaults.choice",0,t.length+1)),this.setProperty("choices.text",t.join("\n")),this.onChoicesChanged(!0)},e.prototype.appendOtherOption=function(){this.setProperty("choices.allowOther",!0),this.onChoicesChanged(!0)},e.prototype.removeOption=function(t){if(t===this.other)this.setProperty("choices.allowOther",!1);else{var e=this.getTextChoices(),n=t.getIndex();e.splice(n,1),this.setProperty("choices.text",e.join("\n"),this)}this.onChoicesChanged(!0)},e.prototype.getChoiceInputs=function(){return this.inputs.slice(0)},e.prototype.moveChoiceBefore=function(t,e,n){var r;if(t!==e){for(var o=[],i=0,s=this.inputs.length;i<s;i++)this.inputs[i]===t||(this.inputs[i]===e?n?(o.push(e),o.push(t)):(o.push(t),o.push(e)):o.push(this.inputs[i]));(r=this.inputs).splice.apply(r,[0,this.inputs.length].concat(o));var a=[];for(i=0,s=this.inputs.length;i<s;i++)a.push(this.inputs[i].getValue());this.setProperty("choices.text",a.join("\n"),this),this.render()}},e.prototype.listenToUserInput=function(t){for(var e=this,r=0,o=this.inputs.length;r<o;r++)this.inputs[r].getInput().onclick=function(){t.updateValue(e)};this.other&&(this.other.getInput().onclick=function(){t.updateValue(e)},n(this.other.getOtherInput).on("input",(function(){t.updateValue(e)})))},e.prototype.enumerateSubFields=function(){for(var t=[],e=0,n=this.inputs.length;e<n;e++)t.push(this.inputs[e].getValue());return this.other&&t.push("$other"),t},e.prototype.getSubFieldValue=function(t){if(t){if("$other"===t)return this.other?!!this.other.isChecked()&&this.other.getValue():void 0;for(var e=0,n=this.inputs.length;e<n;e++)if(this.inputs[e].getValue()===t)return this.inputs[e].isChecked();return!1}return this.getValue()},e.prototype.performTranslation=function(){this.labelDOMNode&&(this.labelDOMNode.textContent=c.I18n.translateViewFormText(this.getProperty("label.text"),this.getLabelI18nContext()));for(var t=0,e=this.inputs.length;t<e;t++)this.inputs[t].getLabelDOMNode().textContent=c.I18n.translateViewFormText(this.inputs[t].getValue());this.other&&(this.other.getLabelDOMNode().textContent=c.I18n.translateViewFormText(c.I18n.translateApplicationText("Other:","control-defaults.choice")))},e.prototype.randomizeChoices=function(){return this.cachedGetTextChoicesResult=l.Helpers.arrayShuffle(l.Helpers.arrayShuffle(this.getTextChoices())),this.onChoicesChanged(!0),this},e.prototype.supportsLabelInsideRendering=function(){return!1},e.prototype.embedInPDFPage=function(t){t.writeHTMLElement(this.labelDOMNode);var e=t.getDocument().create(d.PDFNodeEntityType.INPUT_CHECKBOX);e.setName(this.getProperty("name")).setFontFamily(p.cast(this.properties.input.font.family)).setFontSize(p.cast(this.properties.input.font.size)).setRequired(this.isRequired()).setRepeatedIndex(this.getRepeatedIndex());for(var n=0,r=this.getChoiceInputs(),o=r.length;n<o;n++){var i=~~(a=r[n].getInput().nextSibling.getBoundingClientRect()).top-t.getDimensions().top,s=~~a.left-t.getDimensions().left;t.writeHTMLElement(r[n].getLabelDOMNode()),e.addOption(r[n].getValue(),{left:s,top:i},r[n].isOther())}if(this.other){var a,u=t.getDocument().create(d.PDFNodeEntityType.INPUT_TEXT),l=p.cast(this.properties.input.backgroundColor),c=p.cast(this.properties.input.borderColor),h=parseInt(p.cast(this.properties.input.borderWidth))||1;i=~~(a=this.other.getInput().nextSibling.getBoundingClientRect()).top-t.getDimensions().top,s=~~a.left-t.getDimensions().left;e.addOption("$other",{left:s,top:i},!0),t.initializeFieldDimensions(this.other.getOtherInput(),u),u.setName(this.getProperty("name")+".$other_$text").setRepeatedIndex(this.getRepeatedIndex()).setBorderColor(c).setBorderWidth(h).setBackgroundColor(l),t.appendChild(u),t.writeHTMLElement(this.other.getLabelDOMNode())}t.appendChild(e)},e.prototype.checkIfFieldHasInvalidSubfieldNames=function(){for(var t=(this.getProperty("choices.text")||"").split("\n"),e=0,n=t.length;e<n;e++)if(/[.\[\]`"}{]/.test(t[e]))return!0;return!1},e.prototype.supportsDefaultValue=function(){return!0},e.prototype.getDefaultValueStrategy=function(){var t=new f.MultipleSelectionInputDefaultValue;return this.getTextChoices().forEach((function(e){t.addChoice(e,e)})),t},e}(r.Input);e.CheckBox=m}.apply(e,r))||(t.exports=o)},,function(t,e,n){"use strict";var r;void 0===(r=function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.NODE=0]="NODE",t[t.CONTAINER=1]="CONTAINER"}(e.UINodeType||(e.UINodeType={}))}.apply(e,[n,e]))||(t.exports=r)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(23),n(45)],void 0===(o=function(t,e,n,r){Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){var e=t.call(this)||this;return e.root.tabIndex=0,e.root.addEventListener("click",(function(){e.onClick()}),!1),e}return s(e,t),e.prototype.onClick=function(){this.trigger("click");var t=this.getFirstParent(r.RibbonMenu);t&&t.trigger("click",this)},e}(n.NodeAbstract);e.Clickable=o}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(40)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){var e=t.call(this)||this;return e.iconDOMNode=document.createElement("div"),e.textDOMNode=document.createElement("div"),e.iconDOMNode.className="icon",e.textDOMNode.className="text",e.root.appendChild(e.iconDOMNode),e.root.appendChild(e.textDOMNode),e}return s(e,t),e.prototype.setIcon=function(t){for(;this.iconDOMNode.firstChild;)this.iconDOMNode.removeChild(this.iconDOMNode.firstChild);return t?(this.addClass("has-icon"),this.iconDOMNode.appendChild(document.createElement("span")).className="vfb vfb-"+t):this.removeClass("has-icon"),this},e.prototype.setText=function(t){return this.textDOMNode.textContent=String(t||""),this},e}(n.ValueListItem);e.IconListItem=r}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(0),n(60),n(42)],void 0===(o=function(t,e,n,r,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e){var n=t.call(this)||this;return n.config=e,n}return s(e,t),e.prototype.getType=function(){return o.EAuthZeroPlugin.GOOGLE},e.prototype.authorize=function(){var t=this;return n.Deferred((function(n){t.getAPI().then((function(t){t.signIn().then((function(t){var r=t.getBasicProfile();r.error?n.reject(new Error("An error occurred: "+r.error)):n.resolve(e.normalizeProfile(r))})).catch((function(t){n.reject(new Error("Plugin error"))}))})).fail((function(t){n.reject(t)}))}))},e.prototype.getAPI=function(){var t=this;return this.api?n.Deferred((function(e){e.resolve(t.api)})):n.Deferred((function(e){t.getAuthZero().trigger("before-load"),window.startApp=function(){delete window.startApp,window.gapi.load("auth2",(function(){window.gapi.auth2.init({client_id:t.config.client_id,cookiepolicy:t.config.cookiepolicy,fetch_basic_profile:t.config.fecth_basic_profile,scope:t.config.scope}).then((function(){t.getAuthZero().trigger("after-load"),t.api=window.gapi.auth2.getAuthInstance(),e.resolve(t.api)}))})),setTimeout((function(){t.api||(t.getAuthZero().trigger("after-load"),e.reject(new Error("Failed to initialize gapi.auth2 module after 15 seconds!")))}),15e3)},t.loadSDK().then((function(){})).fail((function(t){e.reject("Failed to load Google+ API SDK: "+t)}))}))},e.normalizeProfile=function(t){return{profileId:t.getId(),email:t.getEmail()||null,plugin:o.EAuthZeroPlugin.GOOGLE,profilePicture:t.getImageUrl()||null,firstName:t.getGivenName()||"",lastName:t.getFamilyName()||""}},e}(r.AuthZeroPlugin);e.AuthZeroGooglePlugin=i}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(0),n(42),n(60)],void 0===(o=function(t,e,n,r,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e){var n=t.call(this)||this;return n.fb=null,n.config=e,n}return s(e,t),e.prototype.getType=function(){return r.EAuthZeroPlugin.FACEBOOK},e.prototype.authorize=function(){var t=this;return n.Deferred((function(n){t.getAPI().then((function(t){t.getLoginStatus((function(r){"connected"===r.status?t.api("/me",{fields:"last_name,first_name,email"},(function(t){n.resolve(e.normalizeFacebookResponse(t))})):t.login((function(r){r.authResponse?t.api("/me",(function(t){n.resolve(e.normalizeFacebookResponse(t))})):n.reject(new Error("cancelled"))}),{scope:"email,user_likes"})}))})).fail((function(t){n.reject(t||new Error("Failed to load API!"))}))}))},e.prototype.getAPI=function(){var t=this;return null!==this.fb?n.Deferred((function(e){e.resolve(t.fb)})):n.Deferred((function(e){window.fbAsyncInit=function(){t.fb=window.FB,t.fb.init({appId:t.config.appId,xfbml:t.config.xfbml,version:t.config.version,cookie:t.config.cookie}),delete window.fbAsyncInit,e.resolve(t.fb)},t.loadSDK()}))},e.normalizeFacebookResponse=function(t){return{plugin:r.EAuthZeroPlugin.FACEBOOK,profileId:t.id,email:t.email,profilePicture:"http://graph.facebook.com/"+t.id+"/picture?type=large",firstName:t.first_name||null,lastName:t.last_name||null}},e}(o.AuthZeroPlugin);e.AuthZeroFacebookPlugin=i}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(0),n(60),n(42),n(7),n(43),n(5)],void 0===(o=function(t,e,n,r,o,i,a,u){Object.defineProperty(e,"__esModule",{value:!0});var l=function(t){function e(e){var n=t.call(this)||this;return n.config=e,n}return s(e,t),e.prototype.getType=function(){return o.EAuthZeroPlugin.MICROSOFT},e.prototype.authorize=function(){var t=this;return n.Deferred((function(e){n.when(t.getAPI(),u.API.get("auth-zero/microsoft/config")).then((function(n,r){console.log(r);var o={auth:{clientId:r.clientId,authority:r.authority,redirectUri:"https://"+location.hostname+"/api/v1/auth-zero/microsoft"},cache:{cacheLocation:"sessionStorage",storeAuthStateInCookie:!1}},i=new n.UserAgentApplication(o);i.loginPopup({scopes:["openid","profile","User.Read"],prompt:"select_account"}).then((function(){var n;if(n=i.getAccount()){var r=t.normalizeResponse(n);if(r)return void e.resolve(r)}e.reject(new Error("Account not accepted"))})).catch((function(t){e.reject(t)}))})).fail((function(t){e.reject(t)}))}))},e.prototype.getAPI=function(){var t=this;return this.api?n.Deferred((function(e){e.resolve(t.api)})):n.Deferred((function(e){var n=window.define;window.define=function(){},t.getAuthZero().trigger("before-load");var r=document.createElement("script");r.setAttribute("type","text/javascript"),r.setAttribute("src",t.config.sdkURL),r.setAttribute("crossorigin","anonymous"),t.getAuthZero().trigger("before-load");setTimeout((function(){t.getAuthZero().trigger("after-load"),window.define=n,e.reject(new Error("Failed to load MSAL"))}),1e4),document.getElementsByTagName("head")[0].appendChild(r),function r(){if(void 0!==window.Msal)return t.getAuthZero().trigger("after-load"),t.api=window.Msal,window.define=n,void e.resolve(t.api);setTimeout((function(){r()}),100)}()}))},e.prototype.normalizeResponse=function(t){var e={firstName:"",lastName:"",plugin:o.EAuthZeroPlugin.MICROSOFT,email:"",profileId:"",profilePicture:""};if(!t)return null;if(!t.accountIdentifier||"string"!=typeof t.accountIdentifier)return null;if(e.profileId=t.accountIdentifier,t.name){var n=t.name.split(" ");e.firstName=n[0]||"",e.lastName=n.slice(1).join(" ")||""}var r=[];if(t.userName&&r.push(t.userName),t.idTokenClaims&&t.idTokenClaims.preferred_username&&r.push(t.idTokenClaims.preferred_username),t.idToken&&t.idToken.name){n=t.idToken.name.split(" ");e.firstName=e.firstName||n[0]||"",e.lastName=e.lastName||n.slice(1).join(" ")||""}return(r=i.Helpers.arrayUnique(r).filter((function(t){return!!t})).filter((function(t){return a.DataFormat.isEmail(t)}))).length?(e.email=r[0],e.firstName?(e.lastName||(e.lastName="last name"),e):null):null},e}(r.AuthZeroPlugin);e.AuthZeroMicrosoftPlugin=l}.apply(e,r))||(t.exports=o)},,,function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(3),n(21),n(29),n(30),n(6),n(85),n(1)],void 0===(o=function(t,e,n,r,o,i,a,u,l){var c;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.NONE=0]="NONE",t[t.MONTHS=1]="MONTHS",t[t.YEARS=2]="YEARS"}(c||(c={}));var p=function(t){function e(){var e=t.call(this)||this;return e.modal=!1,e.root=null,e.input=null,e.setTodayDate(),e.viewType=c.NONE,e.minDate=null,e.maxDate=null,e.onWindowScroll=function(){e.root&&e.root.parentNode&&e.anchorToInput()},e}return s(e,t),e.prototype.setMinDate=function(t){return this.minDate=t||null,this.ensureDateIsConstrainedByMinAndMaxDate(),this},e.prototype.setMaxDate=function(t){return this.maxDate=t||null,this.ensureDateIsConstrainedByMinAndMaxDate(),this},e.prototype.ensureDateIsConstrainedByMinAndMaxDate=function(){this.minDate&&e.dateToInt(this.day,this.month,this.year)<e.dateConstraintToInt(this.minDate)&&(this.day=this.minDate.day,this.month=this.minDate.month,this.year=this.minDate.year),this.maxDate&&e.dateToInt(this.day,this.month,this.year)>e.dateConstraintToInt(this.maxDate)&&(this.day=this.maxDate.day,this.month=this.maxDate.month,this.year=this.maxDate.year)},e.prototype.isValidDateDMY=function(t,n,r){return!(this.minDate&&e.dateToInt(t,n,r)<e.dateConstraintToInt(this.minDate)||this.maxDate&&e.dateToInt(t,n,r)>e.dateConstraintToInt(this.maxDate))},e.monthYearToInt=function(t,e){return 12*e+t},e.prototype.isValidDateMY=function(t,n){if(!this.minDate&&!this.maxDate)return!0;var r=e.monthYearToInt(t,n);return this.minDate&&this.maxDate?e.monthYearToInt(this.minDate.month,this.minDate.year)<=r&&e.monthYearToInt(this.maxDate.month,this.maxDate.year)>=r:!(this.minDate&&e.monthYearToInt(this.minDate.month,this.minDate.year)>r||this.maxDate&&e.monthYearToInt(this.maxDate.month,this.maxDate.year)<r)},e.dateConstraintToInt=function(t){return this.dateToInt(t.day,t.month,t.year)},e.dateToInt=function(t,e,n){return 372*n+31*e+t},e.prototype.setInput=function(t){return this.input=t,this},e.prototype.show=function(){var t=this;return this.root?(this.anchorToInput(),this.monthDaysListingView.getRoot().focus(),this):(this.ensureDateIsConstrainedByMinAndMaxDate(),this.modal&&(this.modalOverlay=document.createElement("div"),this.modalOverlay.setAttribute("data-role","date-picker-modal"),document.body.appendChild(this.modalOverlay),this.modalOverlay.onmousedown=function(){t.hide(u.PickerCloseEffect.CANCEL)}),this.root=document.createElement("div"),this.root.setAttribute("data-role","date-picker-overlay"),this.root.tabIndex=0,this.datePickerToolbar=new h(this,(function(e,n,r){return t.isValidDateDMY(e,n,r)}),(function(e,n){return t.isValidDateMY(e,n)})),this.datePickerToolbar.setMonthAndYear(this.month,this.year),this.datePickerToolbar.on("month.change",(function(){t.onMonthChanged()})),this.datePickerToolbar.on("today",(function(){t.onMonthChanged(),t.pickCurrentDate()})),this.datePickerToolbar.on("toggle.view",(function(){t.onToggleViewButtonClick()})),this.root.appendChild(this.datePickerToolbar.getRoot()),this.monthDaysListingView=new f(this,(function(e,n,r){return t.isValidDateDMY(e,n,r)})),this.monthDaysListingView.setMonthAndYear(this.month,this.year),this.monthDaysListingView.on("day.click",(function(e,n,r){t.pickClickedDate(e,n,r)})),this.monthDaysListingView.on("month.decrement",(function(){t.datePickerToolbar.decrementMonth()})),this.monthDaysListingView.on("month.increment",(function(){t.datePickerToolbar.incrementMonth()})),this.yearMonthsListingView=new g(this.minDate?this.minDate.year:null,this.maxDate?this.maxDate.year:null,(function(e,n){return t.isValidDateMY(e,n)})),this.yearMonthsListingView.on("month.change",(function(){t.onYearAndMonthChanged()})),document.body.appendChild(this.root),this.anchorToInput(),this.monthDaysListingView.render(),this.initDOMEvents(),this.setViewType(c.MONTHS),this)},e.prototype.onYearAndMonthChanged=function(){var t=this.yearMonthsListingView.getMonth(),e=this.yearMonthsListingView.getYear();this.setViewType(c.MONTHS),this.datePickerToolbar.setMonthAndYear(t,e),this.datePickerToolbar.trigger("month.change")},e.prototype.setViewType=function(t){switch(this.viewType=t,t){case c.MONTHS:this.monthDaysListingView&&this.root.appendChild(this.monthDaysListingView.getRoot()),this.yearMonthsListingView&&this.yearMonthsListingView.getRoot().parentNode&&this.yearMonthsListingView.getRoot().parentNode.removeChild(this.yearMonthsListingView.getRoot()),this.datePickerToolbar.getDropdown().focus();break;case c.YEARS:this.yearMonthsListingView&&(this.root.appendChild(this.yearMonthsListingView.getRoot()),this.yearMonthsListingView.open(this.getYear())),this.monthDaysListingView&&this.monthDaysListingView.getRoot().parentNode&&this.monthDaysListingView.getRoot().parentNode.removeChild(this.monthDaysListingView.getRoot()),this.datePickerToolbar.getDropdown().focus();break;case c.NONE:default:this.monthDaysListingView&&this.monthDaysListingView.getRoot().parentNode&&this.monthDaysListingView.getRoot().parentNode.removeChild(this.monthDaysListingView.getRoot()),this.yearMonthsListingView&&this.yearMonthsListingView.getRoot().parentNode&&this.yearMonthsListingView.getRoot().parentNode.removeChild(this.yearMonthsListingView.getRoot())}return this},e.prototype.getViewType=function(){return this.viewType},e.prototype.hide=function(t){if(!this.root)return this;var n;for(window.removeEventListener("orientationchange",this.onWindowScroll,!0),window.removeEventListener("resize",this.onWindowScroll,!0),window.removeEventListener("scroll",this.onWindowScroll,!0),this.modalOverlay&&(this.modalOverlay.parentNode&&this.modalOverlay.parentNode.removeChild(this.modalOverlay),this.modalOverlay=void 0),this.root.parentNode&&this.root.parentNode.removeChild(this.root);n=this.root.firstChild;)this.root.removeChild(n);return this.setViewType(c.NONE),this.datePickerToolbar=null,this.monthDaysListingView=null,this.yearMonthsListingView&&this.yearMonthsListingView.destroy(),this.yearMonthsListingView=null,this.root=null,void 0!==t&&this.trigger(e.EVENT_CLOSE,t),this},e.prototype.anchorToInput=function(){var t,e,n=this.input.getBoundingClientRect(),r=Math.max(document.documentElement.clientHeight,window.innerHeight||0),o=Math.max(document.documentElement.clientWidth,window.innerWidth||0),i=this.root.offsetHeight,s=this.root.offsetWidth,a=!1;if(n.top+n.height+i<=r)t=Math.round(n.top+n.height+1),e=Math.round(n.left);else if(n.top-i>=0)t=Math.round(n.top-i),e=Math.round(n.left);else{var u=Math.max(document.documentElement.clientWidth,window.innerWidth||0),l=this.root.offsetWidth;a=!0,t=Math.round(r/2-i/2),e=Math.round(u/2-l/2)}a||e+n.left+s>o-10&&(e=Math.round(n.left+n.width-s)),e<0&&(e=0),t<0&&(t=0),this.root.style.left=e+"px",this.root.style.top=t+"px"},e.prototype.setTodayDate=function(){var t=new Date;this.day=t.getDate(),this.month=t.getMonth()+1,this.year=t.getFullYear(),this.datePickerToolbar&&this.datePickerToolbar.setMonthAndYear(this.month,this.year),this.monthDaysListingView&&this.monthDaysListingView.setMonthAndYear(this.month,this.year)},e.prototype.getDay=function(){return this.day},e.prototype.getMonth=function(){return this.month},e.prototype.getYear=function(){return this.year},e.prototype.onMonthChanged=function(){this.month=this.datePickerToolbar.getMonth(),this.year=this.datePickerToolbar.getYear(),this.monthDaysListingView.setMonthAndYear(this.month,this.year)},e.prototype.onToggleViewButtonClick=function(){switch(this.viewType){case c.MONTHS:this.setViewType(c.YEARS);break;case c.YEARS:case c.NONE:default:this.setViewType(c.MONTHS)}},e.prototype.pickCurrentDate=function(){var t=new Date;this.day=t.getDate(),this.month=t.getMonth()+1,this.year=t.getFullYear(),this.datePickerToolbar.setMonthAndYear(this.month,this.year),this.monthDaysListingView.setMonthAndYear(this.month,this.year),this.trigger(e.EVENT_INPUT,this.day,this.month,this.year)},e.prototype.pickClickedDate=function(t,n,r){this.day=t,this.month=n,this.year=r,this.datePickerToolbar.setMonthAndYear(n,r),this.monthDaysListingView.setMonthAndYear(n,r),this.trigger(e.EVENT_INPUT,this.day,this.month,this.year)},e.prototype.initDOMEvents=function(){var t=this;this.root.addEventListener("keydown",(function(e){var n=e.keyCode||e.charCode;switch(n){case r.KeyboardDriver.ESC:case r.KeyboardDriver.LEFT:case r.KeyboardDriver.RIGHT:case r.KeyboardDriver.UP:case r.KeyboardDriver.DOWN:case r.KeyboardDriver.TAB:case r.KeyboardDriver.SPACE:case r.KeyboardDriver.ENTER:e.ctrlKey||e.altKey||e.metaKey||t.dispatchKeyboardNavigationEvent(n,e)}}),!0),window.addEventListener("orientationchange",this.onWindowScroll,!0),window.addEventListener("resize",this.onWindowScroll,!0),window.addEventListener("scroll",this.onWindowScroll,!0)},e.prototype.dispatchKeyboardNavigationEvent=function(t,e){var n=[this.root,this.datePickerToolbar.getRoot(),this.datePickerToolbar.getDropdown(),this.datePickerToolbar.getButtonPreviousMonth(),this.datePickerToolbar.getButtonCurrentMonth(),this.datePickerToolbar.getButtonNextMonth()];if(this.getViewType()===c.MONTHS&&n.push(this.monthDaysListingView.getRoot()),this.getViewType()===c.YEARS&&n.push(this.yearMonthsListingView.getRoot()),t===r.KeyboardDriver.TAB){if(document.activeElement===this.root||document.activeElement===this.datePickerToolbar.getRoot())e.shiftKey?n[n.length-1].focus():this.datePickerToolbar.getDropdown().focus();else switch(document.activeElement){case this.root:case this.datePickerToolbar.getRoot():e.shiftKey?n[n.length-1].focus():this.datePickerToolbar.getDropdown().focus();break;case this.datePickerToolbar.getDropdown():e.shiftKey?n[n.length-1].focus():this.datePickerToolbar.getButtonPreviousMonth().focus();break;case this.datePickerToolbar.getButtonPreviousMonth():e.shiftKey?this.datePickerToolbar.getDropdown().focus():this.datePickerToolbar.getButtonCurrentMonth().focus();break;case this.datePickerToolbar.getButtonCurrentMonth():e.shiftKey?this.datePickerToolbar.getButtonPreviousMonth().focus():this.datePickerToolbar.getButtonNextMonth().focus();break;case this.datePickerToolbar.getButtonNextMonth():e.shiftKey?this.datePickerToolbar.getButtonCurrentMonth().focus():n[n.length-1].focus();break;case this.monthDaysListingView.getRoot():case this.yearMonthsListingView.getRoot():e.shiftKey?this.datePickerToolbar.getButtonNextMonth().focus():this.datePickerToolbar.getDropdown().focus()}return e.preventDefault(),void e.stopPropagation()}if(t===r.KeyboardDriver.SPACE){switch(document.activeElement){case this.datePickerToolbar.getDropdown():this.datePickerToolbar.toggleDatePickerView();break;case this.datePickerToolbar.getButtonPreviousMonth():case this.datePickerToolbar.getButtonCurrentMonth():case this.datePickerToolbar.getButtonNextMonth():return}return e.preventDefault(),void e.stopPropagation()}if(t===r.KeyboardDriver.ESC)return this.viewType===c.YEARS?this.yearMonthsListingView.getNavigationType()===d.BY_MONTH?this.yearMonthsListingView.setNavigationType(d.BY_YEAR):this.setViewType(c.MONTHS):this.hide(u.PickerCloseEffect.REFOCUS),e.preventDefault(),void e.stopPropagation();if(t===r.KeyboardDriver.ENTER){switch(document.activeElement){case this.datePickerToolbar.getDropdown():this.datePickerToolbar.toggleDatePickerView();break;case this.datePickerToolbar.getButtonPreviousMonth():case this.datePickerToolbar.getButtonCurrentMonth():case this.datePickerToolbar.getButtonNextMonth():return;case this.monthDaysListingView.getRoot():return this.monthDaysListingView.clickOnSelectedDay(),e.preventDefault(),void e.stopPropagation();case this.yearMonthsListingView.getRoot():return this.yearMonthsListingView.getNavigationType()===d.BY_YEAR?(this.yearMonthsListingView.setNavigationType(d.BY_MONTH),this.yearMonthsListingView.focusNext()):this.yearMonthsListingView.selectCurrentYear(),e.preventDefault(),void e.stopPropagation()}return e.preventDefault(),void e.stopPropagation()}if(t===r.KeyboardDriver.LEFT||t===r.KeyboardDriver.RIGHT)switch(document.activeElement){case this.root:case this.datePickerToolbar.getRoot():return t===r.KeyboardDriver.LEFT?this.datePickerToolbar.getButtonNextMonth().focus():this.datePickerToolbar.getDropdown().focus(),e.preventDefault(),void e.stopPropagation();case this.datePickerToolbar.getDropdown():return t===r.KeyboardDriver.LEFT?this.datePickerToolbar.getButtonNextMonth().focus():this.datePickerToolbar.getButtonPreviousMonth().focus(),e.preventDefault(),void e.stopPropagation();case this.datePickerToolbar.getButtonPreviousMonth():return t===r.KeyboardDriver.LEFT?this.datePickerToolbar.getDropdown().focus():this.datePickerToolbar.getButtonCurrentMonth().focus(),e.preventDefault(),void e.stopPropagation();case this.datePickerToolbar.getButtonCurrentMonth():return t===r.KeyboardDriver.LEFT?this.datePickerToolbar.getButtonPreviousMonth().focus():this.datePickerToolbar.getButtonNextMonth().focus(),e.preventDefault(),void e.stopPropagation();case this.datePickerToolbar.getButtonNextMonth():return t===r.KeyboardDriver.LEFT?this.datePickerToolbar.getButtonCurrentMonth().focus():this.datePickerToolbar.getDropdown().focus(),e.preventDefault(),void e.stopPropagation()}if(t===r.KeyboardDriver.UP)switch(document.activeElement){case this.root:case this.datePickerToolbar.getRoot():return n[n.length-1].focus(),e.preventDefault(),void e.stopPropagation();case this.datePickerToolbar.getDropdown():case this.datePickerToolbar.getButtonPreviousMonth():case this.datePickerToolbar.getButtonCurrentMonth():case this.datePickerToolbar.getButtonNextMonth():return n[n.length-1].focus(),e.preventDefault(),void e.stopPropagation();case this.monthDaysListingView.getRoot():return this.monthDaysListingView.canFocusUp()?this.monthDaysListingView.focusUp():this.datePickerToolbar.getDropdown().focus(),e.preventDefault(),void e.stopPropagation();case this.yearMonthsListingView.getRoot():return this.yearMonthsListingView.focusPrev(),e.preventDefault(),void e.stopPropagation()}if(t===r.KeyboardDriver.DOWN)switch(document.activeElement){case this.root:case this.datePickerToolbar.getRoot():return this.datePickerToolbar.getDropdown().focus(),e.preventDefault(),void e.stopPropagation();case this.datePickerToolbar.getDropdown():case this.datePickerToolbar.getButtonPreviousMonth():case this.datePickerToolbar.getButtonNextMonth():case this.datePickerToolbar.getButtonCurrentMonth():return n[n.length-1].focus(),e.preventDefault(),void e.stopPropagation();case this.monthDaysListingView.getRoot():return this.monthDaysListingView.canFocusDown()?this.monthDaysListingView.focusDown():this.datePickerToolbar.getDropdown().focus(),e.preventDefault(),void e.stopPropagation();case this.yearMonthsListingView.getRoot():return this.yearMonthsListingView.focusNext(),e.preventDefault(),void e.stopPropagation()}if(t===r.KeyboardDriver.LEFT)switch(document.activeElement){case this.monthDaysListingView.getRoot():return this.monthDaysListingView.focusLeft(),e.preventDefault(),void e.stopPropagation();case this.yearMonthsListingView.getRoot():return this.yearMonthsListingView.focusLeft(),e.preventDefault(),void e.stopPropagation()}if(t===r.KeyboardDriver.RIGHT)switch(document.activeElement){case this.monthDaysListingView.getRoot():return this.monthDaysListingView.focusRight(),e.preventDefault(),void e.stopPropagation();case this.yearMonthsListingView.getRoot():return this.yearMonthsListingView.focusRight(),e.preventDefault(),void e.stopPropagation()}},e.prototype.setModal=function(t){return this.modal=t,this},e.prototype.setDate=function(t,e,n){var r=!1;if(null===t||null===e||null===n||t<1||t>31||e<1||e>12||n<0||n>9999?r=!0:o.DateUtils.isValidDate(t,e,n)||(r=!0),r){var i=new Date;this.day=i.getDate(),this.month=i.getMonth()+1,this.year=i.getFullYear()}else this.day=t,this.month=e,this.year=n;return this},e.prototype.destroy=function(){this.input=void 0,this.hide(),this.off(e.EVENT_INPUT).off(e.EVENT_CLOSE)},e.EVENT_INPUT="input",e.EVENT_CLOSE="close",e.FULL_MONTH_NAMES=["January","February","March","April","May","June","July","August","September","October","November","December"],e.SHORT_MONTH_NAMES=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],e.WEEK_DAY_SHORT_NAMES=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],e}(n.EventEmitter);e.DatePicker=p;var d,h=function(t){function e(e,n,r){var o=t.call(this)||this;return o.validDateDMYValidator=n,o.validDateMYValidator=r,o.picker=e,o.root=document.createElement("div"),o.root.setAttribute("data-role","date-picker-toolbar"),o.dropdownMonthYear=document.createElement("div"),o.dropdownMonthYear.setAttribute("data-role","month-picker"),o.dropdownMonthYear.tabIndex=0,o.buttonPreviousMonth=document.createElement("button"),o.buttonPreviousMonth.innerHTML="<span class='vfb vfb-caret-left'></span>",o.buttonPreviousMonth.setAttribute("data-role","dec-month"),o.buttonPreviousMonth.tabIndex=0,o.buttonCurrentMonth=document.createElement("button"),o.buttonCurrentMonth.innerHTML="<span class='vfb vfb-radio-unchecked'></span>",o.buttonCurrentMonth.setAttribute("data-role","cur-month"),o.buttonCurrentMonth.tabIndex=0,o.buttonNextMonth=document.createElement("button"),o.buttonNextMonth.innerHTML="<span class='vfb vfb-caret-right'></span>",o.buttonNextMonth.setAttribute("data-role","next-month"),o.buttonNextMonth.tabIndex=0,o.root.appendChild(o.dropdownMonthYear),o.root.appendChild(o.buttonPreviousMonth),o.root.appendChild(o.buttonCurrentMonth),o.root.appendChild(o.buttonNextMonth),o.setToday(),o.initDOMEvents(),o.updateDropdownText(),o.updateToolbarButtonsVisibility(),o}return s(e,t),e.prototype.getPrevMonth=function(){var t={day:1,month:this.month,year:this.year};return t.month--,t.month<1&&(t.month=12,t.year--),t},e.prototype.getNextMonth=function(){var t={day:31,month:this.month,year:this.year};return t.month++,t.month>12&&(t.month=1,t.year++),t},e.prototype.updateToolbarButtonsVisibility=function(){var t=new Date,e=this.validDateDMYValidator(t.getDate(),t.getMonth()+1,t.getFullYear()),n=this.getPrevMonth(),r=this.getNextMonth(),o=this.validDateMYValidator(n.month,n.year),i=this.validDateMYValidator(r.month,r.year);this.buttonCurrentMonth.style.visibility=e?"":"hidden",this.buttonPreviousMonth.style.visibility=o?"":"hidden",this.buttonNextMonth.style.visibility=i?"":"hidden",o||i?this.dropdownMonthYear.removeAttribute("data-disabled"):this.dropdownMonthYear.setAttribute("data-disabled","")},e.prototype.getDropdown=function(){return this.dropdownMonthYear},e.prototype.getButtonPreviousMonth=function(){return this.buttonPreviousMonth},e.prototype.getButtonCurrentMonth=function(){return this.buttonCurrentMonth},e.prototype.getButtonNextMonth=function(){return this.buttonNextMonth},e.prototype.getRoot=function(){return this.root},e.prototype.getMonth=function(){return this.month},e.prototype.getYear=function(){return this.year},e.prototype.setMonthAndYear=function(t,e){return this.month=t,this.year=e,this.updateDropdownText(),this.updateToolbarButtonsVisibility(),this},e.prototype.setToday=function(){var t=new Date;this.month=t.getMonth()+1,this.year=t.getFullYear()},e.prototype.updateDropdownText=function(){this.dropdownMonthYear.innerHTML=a.Strings.toHTML(l.I18n.translateViewFormText(p.FULL_MONTH_NAMES[this.month-1],"date-picker"))+" "+String(this.year)+" <span class='vfb vfb-expand'></span>"},e.prototype.decrementMonth=function(){if(this.picker.getViewType()===c.MONTHS){var t=this.getPrevMonth();this.validDateMYValidator(t.month,t.year)&&(this.month--,0===this.month&&(this.month=12,this.year--),this.updateDropdownText(),this.trigger("month.change"),this.updateToolbarButtonsVisibility())}else this.picker.setViewType(c.MONTHS)},e.prototype.incrementMonth=function(){if(this.picker.getViewType()===c.MONTHS){var t=this.getNextMonth();this.validDateMYValidator(t.month,t.year)&&(this.month++,13===this.month&&(this.month=1,this.year++),this.updateDropdownText(),this.trigger("month.change"),this.updateToolbarButtonsVisibility())}else this.picker.setViewType(c.MONTHS)},e.prototype.setCurrentMonth=function(){if(this.picker.getViewType()===c.MONTHS){var t=new Date;this.validDateDMYValidator(t.getDate(),t.getMonth()+1,t.getFullYear())&&(this.month=t.getMonth(),this.year=t.getFullYear(),this.updateDropdownText(),this.trigger("today"))}else this.picker.setViewType(c.MONTHS)},e.prototype.toggleDatePickerView=function(){var t=this.getPrevMonth(),e=this.getNextMonth(),n=this.validDateMYValidator(t.month,t.year),r=this.validDateMYValidator(e.month,e.year);(n||r)&&this.trigger("toggle.view")},e.prototype.initDOMEvents=function(){var t=this;this.dropdownMonthYear.onclick=function(){t.toggleDatePickerView()},this.buttonPreviousMonth.onclick=function(){t.decrementMonth()},this.buttonCurrentMonth.onclick=function(){t.setCurrentMonth()},this.buttonNextMonth.onclick=function(){t.incrementMonth()}},e}(n.EventEmitter),f=function(t){function e(e,n){var r=t.call(this)||this;return r.dateValidatorDMY=n,r.picker=e,r.root=document.createElement("div"),r.root.setAttribute("data-role","month-listing"),r.headerRow=document.createElement("div"),r.headerRow.setAttribute("data-role","header"),r.daysBody=document.createElement("div"),r.daysBody.setAttribute("data-role","body"),r.updateHeaderRowCells(),r.root.appendChild(r.headerRow),r.root.appendChild(r.daysBody),r.root.tabIndex=0,r.setToday(),r.initDOMEvents(),r}return s(e,t),e.prototype.getRoot=function(){return this.root},e.prototype.updateHeaderRowCells=function(){for(var t;t=this.headerRow.firstChild;)this.headerRow.removeChild(t);for(var e=0;e<7;e++){var n=document.createElement("div");n.setAttribute("data-role","header-cell"),n.textContent=l.I18n.translateViewFormText(p.WEEK_DAY_SHORT_NAMES[e],"date-picker"),this.headerRow.appendChild(n)}},e.prototype.setMonthAndYear=function(t,e){this.month=t,this.year=e,this.render()},e.prototype.setToday=function(){var t=new Date;this.month=t.getMonth()+1,this.year=t.getFullYear()},e.prototype.render=function(){var t=new Date,e=t.getDate(),n=t.getMonth(),r=t.getFullYear();t.setMilliseconds(0),t.setSeconds(0),t.setMinutes(0),t.setHours(0),t.setDate(1),t.setMonth(this.month-1),t.setFullYear(this.year);for(var o=this.picker.getDay(),i=this.picker.getMonth()-1,s=this.picker.getYear();t.getDay();)t.setDate(t.getDate()-1);for(var a,u=0;a=this.daysBody.firstChild;)this.daysBody.removeChild(a);for(;t.getMonth()+1!==this.month;){(l=document.createElement("div")).setAttribute("data-role","day"),l.setAttribute("data-date",String(t.getDate())),l.setAttribute("data-month",String(t.getMonth()+1)),l.setAttribute("data-year",String(t.getFullYear())),l.textContent=String(t.getDate()),l.className="other-month"+(t.getDate()===e&&t.getMonth()===n&&t.getFullYear()===r?" today-date":"")+(t.getDate()===o&&t.getMonth()===i&&t.getFullYear()===s?" selected":""),this.dateValidatorDMY(t.getDate(),t.getMonth()+1,t.getFullYear())||l.setAttribute("data-disabled",""),this.daysBody.appendChild(l),u++,t.setDate(t.getDate()+1)}for(;t.getMonth()+1===this.month;){(l=document.createElement("div")).setAttribute("data-role","day"),l.setAttribute("data-date",String(t.getDate())),l.setAttribute("data-month",String(t.getMonth()+1)),l.setAttribute("data-year",String(t.getFullYear())),l.textContent=String(t.getDate()),l.className="current-month"+(t.getDate()===e&&t.getMonth()===n&&t.getFullYear()===r?" today-date":"")+(t.getDate()===o&&t.getMonth()===i&&t.getFullYear()===s?" selected":""),this.dateValidatorDMY(t.getDate(),t.getMonth()+1,t.getFullYear())||l.setAttribute("data-disabled",""),this.daysBody.appendChild(l),u++,t.setDate(t.getDate()+1)}for(;0!==t.getDay();){(l=document.createElement("div")).setAttribute("data-role","day"),l.setAttribute("data-date",String(t.getDate())),l.setAttribute("data-month",String(t.getMonth()+1)),l.setAttribute("data-year",String(t.getFullYear())),l.textContent=String(t.getDate()),l.className="other-month"+(t.getDate()===e&&t.getMonth()===n&&t.getFullYear()===r?" today-date":"")+(t.getDate()===o&&t.getMonth()===i&&t.getFullYear()===s?" selected":""),this.dateValidatorDMY(t.getDate(),t.getMonth()+1,t.getFullYear())||l.setAttribute("data-disabled",""),this.daysBody.appendChild(l),u++,t.setDate(t.getDate()+1)}for(;u<42;){var l;(l=document.createElement("div")).setAttribute("data-role","day"),l.setAttribute("data-date",String(t.getDate())),l.setAttribute("data-month",String(t.getMonth()+1)),l.setAttribute("data-year",String(t.getFullYear())),l.textContent=String(t.getDate()),l.className="other-month"+(t.getDate()===e&&t.getMonth()===n&&t.getFullYear()===r?" today-date":"")+(t.getDate()===o&&t.getMonth()===i&&t.getFullYear()===s?" selected":""),this.dateValidatorDMY(t.getDate(),t.getMonth()+1,t.getFullYear())||l.setAttribute("data-disabled",""),this.daysBody.appendChild(l),u++,t.setDate(t.getDate()+1)}},e.prototype.initDOMEvents=function(){var t=this;this.daysBody.addEventListener("click",(function(e){var n=e.srcElement||e.target;if(n&&n.hasAttribute&&"day"===n.getAttribute("data-role")&&!n.hasAttribute("data-disabled")){var r=parseInt(n.getAttribute("data-date")),o=parseInt(n.getAttribute("data-month")),i=parseInt(n.getAttribute("data-year"));t.trigger("day.click",r,o,i)}}),!1),this.daysBody.addEventListener("mousewheel",(function(e){var n=e.deltaY;n<0?t.trigger("month.decrement"):n>0&&t.trigger("month.increment")}),!0)},e.prototype.getSelectedDayCell=function(){return this.daysBody.querySelector("div.selected")||null},e.prototype.canFocusDown=function(){var t=this.getSelectedDayCell();if(null===t)return!0;for(var e=0;e<7;e++){if(!t.nextSibling)return!1;if(t=t.nextSibling,6===e&&t.hasAttribute("data-disabled"))return!1}return!0},e.prototype.canFocusUp=function(){var t=this.getSelectedDayCell();if(null===t)return!0;for(var e=0;e<7;e++){if(!t.previousSibling)return!1;if(t=t.previousSibling,6===e&&t.hasAttribute("data-disabled"))return!1}return!0},e.prototype.focusDown=function(){var t=this.getSelectedDayCell();if(null!==t){t.className=t.className.replace(/(^| )selected( |$)/g,"");for(var e=0;e<7;e++)t=t.nextSibling;t.className+=" selected"}else{var n=this.daysBody.querySelector("[data-role=day]");n&&(n.className=n.className+" selected")}},e.prototype.focusUp=function(){var t=this.getSelectedDayCell();if(null!==t){t.className=t.className.replace(/(^| )selected( |$)/g,"");for(var e=0;e<7;e++)t=t.previousSibling;t.className+=" selected"}else{var n=this.daysBody.lastChild;n&&(n.className=n.className+" selected")}},e.prototype.focusLeft=function(){var t=this.getSelectedDayCell();if(t&&t.previousSibling){if(t.previousSibling.hasAttribute("data-disabled"))return;t.className=t.className.replace(/(^| )selected( |$)/g,""),t.previousSibling.className+=" selected"}},e.prototype.focusRight=function(){var t=this.getSelectedDayCell();if(t&&t.nextSibling){if(t.nextSibling.hasAttribute("data-disabled"))return;t.className=t.className.replace(/(^| )selected( |$)/g,""),t.nextSibling.className+=" selected"}},e.prototype.clickOnSelectedDay=function(){var t=this.getSelectedDayCell();if(t){if(t.hasAttribute("data-disabled"))return;var e=parseInt(t.getAttribute("data-date")),n=parseInt(t.getAttribute("data-month")),r=parseInt(t.getAttribute("data-year"));this.trigger("day.click",e,n,r)}},e}(n.EventEmitter);!function(t){t.BY_YEAR="year",t.BY_MONTH="month"}(d||(d={}));var g=function(t){function e(e,n,r){var o=t.call(this)||this;return o.thumbMiddlePosition=0,o.actualThumbPosition=0,o.thumbHeight=0,o.scrollbarHeight=0,o.deltaAddYears=0,o.validDateMY=r,o.minYear=e,o.maxYear=n,o.navigationType=d.BY_YEAR,o.root=document.createElement("div"),o.root.setAttribute("data-role","year-listing"),o.root.tabIndex=0,o.body=document.createElement("div"),o.body.setAttribute("data-role","body"),o.root.appendChild(o.body),o.scrollTopEnforcerElement=document.createElement("div"),o.scrollTopEnforcerElement.setAttribute("data-role","scroll-top"),o.body.appendChild(o.scrollTopEnforcerElement),o.body.addEventListener("click",(function(t){var e=t.srcElement||t.target;if(e&&e.getAttribute&&"month"===e.getAttribute("data-role")&&!e.hasAttribute("data-disabled")){var n=parseInt(e.getAttribute("data-month")),r=parseInt(e.getAttribute("data-year"));o.month=n,o.year=r,o.trigger("month.change")}}),!1),o.scroller=document.createElement("div"),o.scroller.setAttribute("data-role","scroller"),o.thumb=document.createElement("div"),o.thumb.setAttribute("data-role","thumb"),o.scroller.appendChild(o.thumb),o.root.appendChild(o.scroller),o.initDOMEvents(),o.items=[],o}return s(e,t),e.prototype.getValidatorYM=function(){return this.validDateMY},e.prototype.setNavigationType=function(t){this.navigationType=t,this.root.setAttribute("data-navigation-type",this.navigationType)},e.prototype.getNavigationType=function(){return this.navigationType},e.prototype.getRoot=function(){return this.root},e.prototype.open=function(t){for(this.setNavigationType(d.BY_YEAR),this.year=this.expandedYear=t,null!==this.minYear&&this.year<this.minYear&&(this.year=this.expandedYear=this.minYear),null!==this.maxYear&&this.year>this.maxYear&&(this.year=this.expandedYear=this.maxYear),this.month=1;this.items.length;)this.body.removeChild(this.items[0].getRoot()),this.items.shift();this.render(t);var e=this.thumb.offsetHeight,n=this.scroller.offsetHeight;this.thumbMiddlePosition=Math.round((n-e)/2),this.thumbHeight=e,this.scrollbarHeight=n,this.thumb.style.top=this.thumbMiddlePosition+"px",this.actualThumbPosition=this.thumbMiddlePosition,this.initScrollYearsThread()},e.prototype.getMonth=function(){return this.month},e.prototype.getYear=function(){return this.year},e.prototype.render=function(t,e){void 0===e&&(e=3),null!==this.minYear&&t<this.minYear&&(t=this.minYear),null!==this.maxYear&&t>this.maxYear&&(t=this.maxYear);var n=t-3,r=t+e;if(null!==this.minYear&&(n<this.minYear&&(r=(n=this.minYear)+e+3),r<this.minYear&&(r=this.minYear)),null!==this.maxYear&&(r>this.maxYear&&(n=(r=this.maxYear)-e-3),n>this.maxYear&&(n=this.maxYear)),null!==this.minYear&&n<this.minYear&&(n=this.minYear),0===this.items.length)for(var o=n;o<=r;o++){var i=new m(this,o);this.items.push(i),this.body.appendChild(i.getRoot())}else{for(;this.items[0].getYear()>n;){i=new m(this,this.items[0].getYear()-1);this.items.unshift(i),this.body.appendChild(i.getRoot())}for(;this.items[this.items.length-1].getYear()<r;){i=new m(this,this.items[this.items.length-1].getYear()+1);this.items.push(i),this.body.appendChild(i.getRoot())}for(o=this.items.length-1;o>-1;o--)(this.items[o].getYear()>r||this.items[o].getYear()<n)&&(this.body.removeChild(this.items[o].getRoot()),this.items.splice(o,1))}this.updateScrollPosition()},e.prototype.updateScrollPosition=function(){for(var t=this.items[0].getYear()*m.COLLAPSED_ITEM_HEIGHT,e=0,n=this.items.length;e<n;e++)this.items[e].setExpanded(this.items[e].getYear()===this.expandedYear),this.items[e].setTop(t),t+=this.items[e].getHeight();if(this.items.length<4)this.body.scrollTop=this.items[0].getTop();else{var r=null;this.items[0]&&this.items[0].getYear()===this.year&&(r=this.items[0]),this.items[1]&&this.items[0].getYear()===this.getYear()&&(r=this.items[0]),this.body.scrollTop=(r||this.items[3]||this.items[2]||this.items[1]||this.items[0]).getTop()}},e.prototype.setExpandedYear=function(t){this.expandedYear=t;for(var e=null,n=0,r=this.items.length;n<r;n++)this.items[n].setExpanded(this.items[n].getYear()===this.expandedYear),this.items[n].getYear()===this.expandedYear&&(e=this.items[n]);this.updateScrollPosition(),this.render(t),e&&(this.items.length<4&&this.items[0]?this.body.scrollTop=this.items[0].getTop():this.body.scrollTop=e.getTop()-(e!==this.items[0]?m.COLLAPSED_ITEM_HEIGHT:0))},e.prototype.setThumbPos=function(t){var e=this.thumbMiddlePosition-this.thumbHeight/2+t;(e<=0||!e)&&(e=0),e+this.thumbHeight>this.scrollbarHeight&&(e=this.scrollbarHeight-this.thumbHeight),this.thumb.style.top=e+"px",this.actualThumbPosition=e},e.prototype.initDOMEvents=function(){var t=this,e=0,n=0,r=function(r){r.preventDefault(),r.stopPropagation();var o=r.clientY;t.setThumbPos(o-n-e+t.thumbHeight)},o=function e(n){n.preventDefault(),n.stopPropagation(),document.body.removeEventListener("mousemove",r,!0),document.body.removeEventListener("mouseup",e,!0),t.thumb.style.top=t.thumbMiddlePosition+"px",t.actualThumbPosition=t.thumbMiddlePosition,t.scrollYearsThread.stop()};this.thumb.addEventListener("mousedown",(function(i){e=i.offsetY,n=i.clientY,document.body.addEventListener("mousemove",r,!0),document.body.addEventListener("mouseup",o,!0),t.deltaAddYears=0,t.scrollYearsThread.start()}),!0),this.body.addEventListener("mousewheel",(function(e){t.getNavigationType()===d.BY_YEAR&&(e.deltaY<0?t.focusPrev():e.deltaY>0&&t.focusNext())}),!0)},e.prototype.initScrollYearsThread=function(){var t=this;this.scrollYearsThread=i.Thread.create((function(){var e=t.actualThumbPosition-t.thumbMiddlePosition;0!==e&&t.displayYearsByDelta(e)}),100),this.scrollYearsThread.stop()},e.prototype.displayYearsByDelta=function(t){this.deltaAddYears+=t;var e=Math.floor(this.deltaAddYears/m.COLLAPSED_ITEM_HEIGHT),n=this.year;if(0!==e){if(this.deltaAddYears-=e*m.COLLAPSED_ITEM_HEIGHT,this.year+=e,null!==this.minYear&&this.year<this.minYear)return void(this.year=n);if(null!==this.maxYear&&this.year>this.maxYear)return void(this.year=n);this.render(this.year,10)}this.body.scrollTop=this.body.scrollTop+t},e.prototype.destroy=function(){this.scrollYearsThread&&(this.scrollYearsThread.stop(),this.scrollYearsThread=void 0)},e.prototype.getSelectedItemList=function(){for(var t=0,e=this.items.length;t<e;t++)if(this.items[t].getYear()===this.expandedYear)return this.items[t];return this.items[3]||this.items[2]||this.items[1]||this.items[0]||null},e.prototype.focusPrev=function(){var t=this.getSelectedItemList();if(t)if(this.getNavigationType()===d.BY_YEAR){if(null!==this.minYear&&t.getYear()-1<this.minYear)return;this.render(t.getYear()-1);for(var e=0,n=this.items.length;e<n;e++)this.items[e].getYear()===t.getYear()-1&&this.setExpandedYear(t.getYear()-1)}else t.focusPrev()},e.prototype.focusNext=function(){var t=this.getSelectedItemList();if(t)if(this.getNavigationType()===d.BY_YEAR){if(this.maxYear&&t.getYear()+1>this.maxYear)return;this.render(t.getYear()+1);for(var e=0,n=this.items.length;e<n;e++)this.items[e].getYear()===t.getYear()+1&&this.setExpandedYear(t.getYear()+1)}else t.focusNext()},e.prototype.selectCurrentYear=function(){if(this.getNavigationType()!==d.BY_YEAR){var t=this.getSelectedItemList();if(t){var e=t.getSelectedMonthIndex();if(-1!==e){var n=e+1,r=t.getYear();this.month=n,this.year=r,this.trigger("month.change")}}}else this.focusRight()},e.prototype.focusLeft=function(){this.getNavigationType()===d.BY_YEAR&&this.setNavigationType(d.BY_MONTH);var t=this.getSelectedItemList();t&&t.focusLeft()},e.prototype.focusRight=function(){this.getNavigationType()===d.BY_YEAR&&this.setNavigationType(d.BY_MONTH);var t=this.getSelectedItemList();t&&t.focusRight()},e}(n.EventEmitter),m=function(){function t(t,e){var n=this;this.top=0,this.view=t,this.year=e,this.root=document.createElement("div"),this.root.setAttribute("data-role","year"),this.root.setAttribute("data-year",String(e)),this.yearToolbar=document.createElement("div"),this.yearToolbar.setAttribute("data-role","year-toolbar"),this.yearToolbar.textContent=String(e),this.root.appendChild(this.yearToolbar),this.expanded=!1,this.yearToolbar.onclick=function(){n.expand()}}return t.prototype.getRoot=function(){return this.root},t.prototype.getYear=function(){return this.year},t.prototype.getTop=function(){return this.top},t.prototype.getHeight=function(){return this.expanded?t.EXPANDED_ITEM_HEIGHT:t.COLLAPSED_ITEM_HEIGHT},t.prototype.setTop=function(t){return this.top=t,this.root.style.top=t+"px",this},t.prototype.setExpanded=function(t){return this.expanded=t,this.expanded?(this.root.setAttribute("data-expanded",""),this.initMonthsToolbar()):(this.root.removeAttribute("data-expanded"),this.destroyMonthsToolbar()),this},t.prototype.expand=function(){this.view.setExpandedYear(this.getYear())},t.prototype.initMonthsToolbar=function(){if(!this.monthsToolbar){this.monthsToolbar=document.createElement("div"),this.monthsToolbar.setAttribute("data-role","months");for(var t=0;t<12;t++){var e=document.createElement("div");e.setAttribute("data-role","month"),e.setAttribute("data-month",String(t+1)),e.setAttribute("data-year",String(this.year)),e.textContent=l.I18n.translateViewFormText(p.SHORT_MONTH_NAMES[t],"date-picker"),this.view.getValidatorYM()(t+1,this.year)||e.setAttribute("data-disabled",""),this.monthsToolbar.appendChild(e)}this.root.appendChild(this.monthsToolbar)}},t.prototype.destroyMonthsToolbar=function(){this.monthsToolbar&&(this.root.removeChild(this.monthsToolbar),this.monthsToolbar=void 0)},t.prototype.getSelectedMonthIndex=function(){if(!this.monthsToolbar)return null;var t=this.monthsToolbar.querySelector("div[data-role=month]:not([data-disabled]).selected");return t?parseInt(t.getAttribute("data-month"))-1:-1},t.prototype.focusNext=function(){var t=this.getSelectedMonthIndex(),e=t;null!==t&&(-1===t?(t=0,e=11):(t+=4)>=12&&(t-=12),this.monthsToolbar.childNodes[e].className="",this.monthsToolbar.childNodes[t].className="selected")},t.prototype.focusPrev=function(){var t=this.getSelectedMonthIndex(),e=t;null!==t&&(-1===t?(t=8,e=11):(t-=4)<0&&(t=12+t),this.monthsToolbar.childNodes[e].className="",this.monthsToolbar.childNodes[t].className="selected")},t.prototype.focusLeft=function(){var t=this.getSelectedMonthIndex(),e=t;null!==t&&(-1===t?(t=0,e=11):(t-=1)<0&&(t=12+t),this.monthsToolbar.childNodes[t].hasAttribute("data-disabled")||(this.monthsToolbar.childNodes[e].className="",this.monthsToolbar.childNodes[t].className="selected"))},t.prototype.focusRight=function(){var t=this.getSelectedMonthIndex(),e=t;null!==t&&(-1===t?(t=0,e=11):(t+=1)>=12&&(t=12-t),this.monthsToolbar.childNodes[t].hasAttribute("data-disabled")||(this.monthsToolbar.childNodes[e].className="",this.monthsToolbar.childNodes[t].className="selected"))},t.COLLAPSED_ITEM_HEIGHT=40,t.EXPANDED_ITEM_HEIGHT=140,t}()}.apply(e,r))||(t.exports=o)},,function(t,e,n){"use strict";var r,o;r=[n,e,n(1)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.INFO="info",t.SUCCESS="success",t.ERROR="error",t.WARNING="warning"}(e.NotificationType||(e.NotificationType={}));var r=function(){function t(t){this.title=n.I18n.translateApplicationText("Notification","notifications_manager"),this.text="",this.autoCloseTimeout=15,this.type=t}return t.prototype.setClickAction=function(t){return this.clickAction=t,this},t.prototype.setTitle=function(t){return this.title=t,this},t.prototype.getTitle=function(){return this.title},t.prototype.setText=function(t){return this.text=t,this},t.prototype.getText=function(){return this.text},t.prototype.setParent=function(t){return this.parent=t,this},t.prototype.setAutoCloseTimeoutInSeconds=function(t){return this.autoCloseTimeout=t,this},t.prototype.getType=function(){return this.type},t.prototype.show=function(){var t=this;if(this.root)return this.parent.appendChild(this.root),this;this.root=document.createElement("div"),this.root.className="notification "+this.type+(this.clickAction?" clickable":"");var e=document.createElement("div");e.className="title";var n=document.createElement("div");n.className="body";var r=document.createElement("div");return r.className="close",r.innerHTML="<span class='vfb vfb-close'></span>",this.root.appendChild(e),this.root.appendChild(r),this.root.appendChild(n),e.textContent=this.title,n.textContent=this.text,r.onclick=function(e){e.preventDefault(),e.stopPropagation(),t.close()},this.clickAction&&(this.root.onclick=function(e){e.preventDefault(),e.stopPropagation(),t.close(),t.clickAction()}),setTimeout((function(){t.close()}),1e3*this.autoCloseTimeout),this.parent.appendChild(this.root),this},t.prototype.close=function(){this.root&&(this.root.parentNode&&this.root.parentNode.removeChild(this.root),this.root=void 0)},t}();e.Notification=r;var o=function(){function t(){}return t.createNotification=function(t){return new r(t).setParent(this.getContainer())},t.getContainer=function(){return this.container||(this.container=document.createElement("div"),this.container.id="notifications-manager",document.body.appendChild(this.container)),this.container},t}();e.NotificationsManager=o}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r;void 0===(r=function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.NEURAL_NETWORK="NeuralNetwork",t.NEURAL_NETWORK_GPU="NeuralNetworkGPU",t.RECURRENT_RNN_TIME_STEP="RNNTimeStep",t.RECURRENT_LSTM_TIME_STEP="LSTMTimeStep",t.RECURRENT_GRU_TIME_STEP="GRUTimeStep",t.RECURRENT_RNN="RNN",t.RECURRENT_LSTM="LSTM",t.RECURRENT_GRU="GRU"}(e.NeuralNetworkType||(e.NeuralNetworkType={}))}.apply(e,[n,e]))||(t.exports=r)},,function(t,e,n){"use strict";var r,o,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r=[n,e,n(15),n(4),n(76),n(244),n(164),n(245),n(246),n(247),n(166),n(254),n(168),n(193),n(160),n(261),n(264),n(266),n(138),n(171),n(110),n(270),n(272),n(273),n(274),n(277),n(172),n(281),n(283),n(284),n(285),n(286),n(198),n(199),n(200),n(292),n(201),n(305),n(306),n(307),n(309),n(310),n(311),n(202),n(312),n(203),n(313),n(10)],void 0===(o=function(t,e,n,r,o,s,a,u,l,c,p,d,h,f,g,m,y,v,b,C,E,A,I,T,S,w,_,N,D,O,P,x,M,R,L,F,k,B,V,U,G,H,W,j,z,Y,K,X){Object.defineProperty(e,"__esModule",{value:!0});var $=function(){function t(t){this.document=t}return t.prototype.create=function(t,e,n,i){var X;switch(t){case r.NodeTypes.DOCUMENT:throw new Error("Factory.create(NodeTypes.DOCUMENT): Not allowed");case r.NodeTypes.PAGE:X=new o.Page(e,n,i);break;case r.NodeTypes.ROW:X=new s.Row(e);break;case r.NodeTypes.ROW_CONTAINER:X=new u.RowContainer(e,n,i);break;case r.NodeTypes.SPACER:X=new l.Spacer(e,n,i);break;case r.NodeTypes.TEXT_BOX:X=new a.TextBox(e,n,i);break;case r.NodeTypes.DATE:X=new c.Date(e,n,i);break;case r.NodeTypes.RADIO:X=new p.Radio(e,n,i);break;case r.NodeTypes.DROP_DOWN:X=new d.Dropdown(e,n,i);break;case r.NodeTypes.RICH_TEXT:X=new h.RichText(e,n,i);break;case r.NodeTypes.NAME:X=new f.Name(e,n,i);break;case r.NodeTypes.ADDRESS:X=new g.Address(e,n,i);break;case r.NodeTypes.PHONE:X=new m.Phone(e,n,i);break;case r.NodeTypes.BUTTON:X=new y.Button(e,n,i);break;case r.NodeTypes.AUTO_BUTTONS:X=new v.AutoButtons(e,n,i);break;case r.NodeTypes.FILE:X=new b.Upload(e,n,i);break;case r.NodeTypes.TEXT_AREA:X=new C.TextArea(e,n,i);break;case r.NodeTypes.CHECKBOX:X=new E.CheckBox(e,n,i);break;case r.NodeTypes.PICTURE:X=new A.Picture(e,n,i);break;case r.NodeTypes.EMAIL:X=new I.Email(e,n,i);break;case r.NodeTypes.LINK:X=new T.Link(e,n,i);break;case r.NodeTypes.TIME:X=new S.Time(e,n,i);break;case r.NodeTypes.VIDEO:X=new w.Video(e,n,i);break;case r.NodeTypes.SIGNATURE:X=new _.Signature(e,n,i);break;case r.NodeTypes.MAP:X=new N.Map(e,n,i);break;case r.NodeTypes.SHOPPING_CART:X=new D.ShoppingCart(e,n,i);break;case r.NodeTypes.PAYMENT_PROCESSOR:X=new O.PaymentProcessor(e,n,i);break;case r.NodeTypes.RATING:X=new P.Rating(e,n,i);break;case r.NodeTypes.SURVEY:X=new x.Survey(e,n,i);break;case r.NodeTypes.TERMS_OF_SERVICE:X=new M.TermsOfService(e,n,i);break;case r.NodeTypes.SOCIAL_MEDIA:X=new R.SocialMedia(e,n,i);break;case r.NodeTypes.PRODUCT:X=new L.Product(e,n,i);break;case r.NodeTypes.CODE:X=new F.Code(e,n,i);break;case r.NodeTypes.CAMERA:X=new k.Camera(e,n,i);break;case r.NodeTypes.NET_PROMOTER_SCORE:X=new B.NetPromoterScore(e,n,i);break;case r.NodeTypes.BIG_DATA_DROPDOWN:X=new V.BigDataDropdown(e,n,i);break;case r.NodeTypes.BIG_DATA_ROW_VIEWER:X=new U.BigDataRowViewer(e,n,i);break;case r.NodeTypes.WORKFLOWS_CURRENT_USER_EMAIL:X=new G.WorkflowsCurrentUserEmail(e,n,i);break;case r.NodeTypes.HIDDEN_SHORT_TEXT:X=new H.HiddenShortText(e,n,i);break;case r.NodeTypes.HIDDEN_LONG_TEXT:X=new W.HiddenLongText(e,n,i);break;case r.NodeTypes.QUIZ:X=new j.Quiz(e,n,i);break;case r.NodeTypes.REPEATABLE:X=new z.Repeatable(e,n,i);break;case r.NodeTypes.REPEATABLE_CONTAINER:X=new Y.RepeatableContainer(e,n,i);break;case r.NodeTypes.FORM_PROGRESS_INDICATOR:X=new K.FormProgressIndicator(e,n,i);break;default:throw new Error("Factory.create(): Unknown node type "+JSON.stringify(t))}return this.addDeltaNodeProperties(X,this.getStaticClass(X)),X},t.prototype.getStaticClass=function(t){switch(t.getTypeId()){case r.NodeTypes.DOCUMENT:return n.Document;case r.NodeTypes.PAGE:return o.Page;case r.NodeTypes.ROW:return s.Row;case r.NodeTypes.ROW_CONTAINER:return u.RowContainer;case r.NodeTypes.TEXT_BOX:return a.TextBox;case r.NodeTypes.SPACER:return l.Spacer;case r.NodeTypes.DATE:return c.Date;case r.NodeTypes.RADIO:return p.Radio;case r.NodeTypes.DROP_DOWN:return d.Dropdown;case r.NodeTypes.RICH_TEXT:return h.RichText;case r.NodeTypes.NAME:return f.Name;case r.NodeTypes.ADDRESS:return g.Address;case r.NodeTypes.PHONE:return m.Phone;case r.NodeTypes.BUTTON:return y.Button;case r.NodeTypes.AUTO_BUTTONS:return v.AutoButtons;case r.NodeTypes.FILE:return b.Upload;case r.NodeTypes.TEXT_AREA:return C.TextArea;case r.NodeTypes.CHECKBOX:return E.CheckBox;case r.NodeTypes.PICTURE:return A.Picture;case r.NodeTypes.EMAIL:return I.Email;case r.NodeTypes.LINK:return T.Link;case r.NodeTypes.TIME:return S.Time;case r.NodeTypes.VIDEO:return w.Video;case r.NodeTypes.SIGNATURE:return _.Signature;case r.NodeTypes.MAP:return N.Map;case r.NodeTypes.SHOPPING_CART:return D.ShoppingCart;case r.NodeTypes.PAYMENT_PROCESSOR:return O.PaymentProcessor;case r.NodeTypes.RATING:return P.Rating;case r.NodeTypes.SURVEY:return x.Survey;case r.NodeTypes.TERMS_OF_SERVICE:return M.TermsOfService;case r.NodeTypes.SOCIAL_MEDIA:return R.SocialMedia;case r.NodeTypes.PRODUCT:return L.Product;case r.NodeTypes.CODE:return F.Code;case r.NodeTypes.CAMERA:return k.Camera;case r.NodeTypes.NET_PROMOTER_SCORE:return B.NetPromoterScore;case r.NodeTypes.BIG_DATA_DROPDOWN:return V.BigDataDropdown;case r.NodeTypes.BIG_DATA_ROW_VIEWER:return U.BigDataRowViewer;case r.NodeTypes.WORKFLOWS_CURRENT_USER_EMAIL:return G.WorkflowsCurrentUserEmail;case r.NodeTypes.HIDDEN_SHORT_TEXT:return H.HiddenShortText;case r.NodeTypes.HIDDEN_LONG_TEXT:return W.HiddenLongText;case r.NodeTypes.QUIZ:return j.Quiz;case r.NodeTypes.REPEATABLE:return z.Repeatable;case r.NodeTypes.REPEATABLE_CONTAINER:return Y.RepeatableContainer;case r.NodeTypes.FORM_PROGRESS_INDICATOR:return K.FormProgressIndicator;default:throw new Error("Factory.getStaticClass(): Unknown node type "+JSON.stringify(t.getTypeId()))}},t.prototype.addDeltaNodeProperties=function(t,e,n){void 0===n&&(n=void 0);var r=t.properties,o=e.getDefaultProperties(this.document);this.addNewFieldPropertiesAndCastExistingPropertiesToThemePropertyValueIfNeeded(r,o,n)},t.prototype.addNewFieldPropertiesAndCastExistingPropertiesToThemePropertyValueIfNeeded=function(t,e,n){if(e&&!Array.isArray(e)&&t)for(var r in e)e.propertyIsEnumerable(r)&&e.hasOwnProperty(r)&&r!==n&&(e[r]instanceof X.ThemePropertyValue?t[r]=e[r].clone().setValue(t[r]instanceof X.ThemePropertyValue?t[r].getValue():t[r]):void 0!==t[r]?"object"===i(e[r])&&this.addNewFieldPropertiesAndCastExistingPropertiesToThemePropertyValueIfNeeded(t[r],e[r],void 0):t[r]=e[r])},t.getNodeIconByTypeId=function(t){switch(t){case r.NodeTypes.DOCUMENT:return"form-document";case r.NodeTypes.PAGE:return"new-form";case r.NodeTypes.TEXT_BOX:return"textbox";case r.NodeTypes.DATE:return"calendar";case r.NodeTypes.RADIO:return"radio-field";case r.NodeTypes.DROP_DOWN:return"dropdown";case r.NodeTypes.RICH_TEXT:return"rich-text";case r.NodeTypes.NAME:return"name-field";case r.NodeTypes.ADDRESS:return"location";case r.NodeTypes.PHONE:return"phone";case r.NodeTypes.BUTTON:return"button";case r.NodeTypes.FILE:return"storage";case r.NodeTypes.TEXT_AREA:return"textarea";case r.NodeTypes.CHECKBOX:return"checkbox-field";case r.NodeTypes.PICTURE:return"picture";case r.NodeTypes.EMAIL:return"email";case r.NodeTypes.LINK:return"url";case r.NodeTypes.TIME:return"time";case r.NodeTypes.VIDEO:return"video";case r.NodeTypes.SIGNATURE:return"signature";case r.NodeTypes.MAP:return"map";case r.NodeTypes.SHOPPING_CART:return"cart";case r.NodeTypes.PAYMENT_PROCESSOR:return"credit-card";case r.NodeTypes.RATING:return"star-empty";case r.NodeTypes.SURVEY:return"survey";case r.NodeTypes.TERMS_OF_SERVICE:return"tos";case r.NodeTypes.SOCIAL_MEDIA:return"share";case r.NodeTypes.PRODUCT:return"product-field";case r.NodeTypes.CODE:return"embed";case r.NodeTypes.CAMERA:return"photo-camera";case r.NodeTypes.NET_PROMOTER_SCORE:return"net-promoter-score";case r.NodeTypes.BIG_DATA_DROPDOWN:return"dropdown";case r.NodeTypes.BIG_DATA_ROW_VIEWER:return"big-data";case r.NodeTypes.WORKFLOWS_CURRENT_USER_EMAIL:return"email";case r.NodeTypes.HIDDEN_SHORT_TEXT:return"hidden-textbox";case r.NodeTypes.HIDDEN_LONG_TEXT:return"hidden-textarea";case r.NodeTypes.QUIZ:return"quiz";case r.NodeTypes.REPEATABLE:return"repeatable";default:return"warning"}},t}();e.Factory=$}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(0),n(3),n(1)],void 0===(o=function(t,e,n,r,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n){var r=t.call(this)||this;return r.radio=e,r.root=document.createElement(n?"div":"label"),r.root.className="input label-editable",r.input=document.createElement("input"),r.input.setAttribute("type","radio"),r.input.name=e.getId()+"_radio",r.label=document.createElement("label"),r.root.appendChild(r.input),r.root.appendChild(document.createElement("span")).className="decorator",r.root.appendChild(r.label),r}return s(e,t),e.prototype.setDisabled=function(t){return this.input.disabled=t,this},e.prototype.setValue=function(t,e){return void 0===e&&(e=!0),this.value=t,e&&(this.label.textContent=o.I18n.translateViewFormText(t)),this},e.prototype.getValue=function(){return this.value},e.prototype.isChecked=function(){return this.input.checked},e.prototype.setChecked=function(t){return this.input.checked=t,this},e.prototype.getIndex=function(){return this.index},e.prototype.getLabelDOMNode=function(){return this.label},e.prototype.setIndex=function(t){return this.index=t,this.input.id=this.radio.getId()+"_"+t,this.label.htmlFor=this.input.id,this},e.prototype.getRoot=function(){return this.root},e.prototype.setRemovable=function(t){var e=this;return t===!!this.trashButton||(t?(this.trashButton=document.createElement("div"),this.trashButton.className="trash",this.trashButton.innerHTML='<span class="vfb vfb-close"></span>',this.trashButton.title=o.I18n.translateApplicationText("Remove","control-defaults.choice"),this.root.appendChild(this.trashButton),n(this.root).addClass("has-trash"),this.trashButton.onclick=function(){e.radio.removeOption(e)}):this.trashButton&&(this.root.removeChild(this.trashButton),this.trashButton=void 0,n(this.root).removeClass("has-trash"))),this},e.prototype.setDragable=function(t){return t===!!this.dragHandle||(t?(this.dragHandle=document.createElement("div"),this.dragHandle.className="drag-handle",this.root.appendChild(this.dragHandle)):this.dragHandle&&(this.root.removeChild(this.dragHandle),this.dragHandle=void 0)),this},e.prototype.getInput=function(){return this.input},e.prototype.isOther=function(){return!1},e.prototype.getOtherInput=function(){return null},e}(r.EventEmitter);e.RadioInput=i}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(0),n(3),n(1),n(26)],void 0===(o=function(t,e,n,r,o,i){Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e,n){var r=t.call(this)||this;return r.checkBox=e,r.root=i.DOM.document.createElement(n?"div":"label"),r.root.className="input label-editable",r.input=i.DOM.document.createElement("input"),r.input.setAttribute("type","checkbox"),r.input.name=e.getId()+"_checkbox",r.label=i.DOM.document.createElement("label"),r.root.appendChild(r.input),r.root.appendChild(document.createElement("span")).className="decorator",r.root.appendChild(r.label),r}return s(e,t),e.prototype.setDisabled=function(t){return this.input.disabled=t,this},e.prototype.setValue=function(t,e){return void 0===e&&(e=!0),this.value=t,e&&(this.label.textContent=o.I18n.translateViewFormText(t)),this},e.prototype.getValue=function(){return this.value},e.prototype.isChecked=function(){return this.input.checked},e.prototype.setChecked=function(t){return this.input.checked=t,this},e.prototype.getIndex=function(){return this.index},e.prototype.getLabelDOMNode=function(){return this.label},e.prototype.setIndex=function(t){return this.index=t,this.input.id=this.checkBox.getId()+"_"+t,this.label.htmlFor=this.input.id,this},e.prototype.getRoot=function(){return this.root},e.prototype.setRemovable=function(t){var e=this;return t===!!this.trashButton||(t?(this.trashButton=document.createElement("div"),this.trashButton.className="trash",this.trashButton.innerHTML='<span class="vfb vfb-close"></span>',this.trashButton.title=o.I18n.translateApplicationText("Remove","control-defaults.choice"),this.root.appendChild(this.trashButton),n(this.root).addClass("has-trash"),this.trashButton.onclick=function(){e.checkBox.removeOption(e)}):this.trashButton&&(this.root.removeChild(this.trashButton),this.trashButton=void 0,n(this.root).removeClass("has-trash"))),this},e.prototype.setDragable=function(t){return t===!!this.dragHandle||(t?(this.dragHandle=document.createElement("div"),this.dragHandle.className="drag-handle",this.root.appendChild(this.dragHandle)):this.dragHandle&&(this.root.removeChild(this.dragHandle),this.dragHandle=void 0)),this},e.prototype.getInput=function(){return this.input},e.prototype.isOther=function(){return!1},e.prototype.getOtherInput=function(){return null},e}(r.EventEmitter);e.CheckBoxInput=a}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r;void 0===(r=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.normalizeText=function(t){return"string"!=typeof t?t:t.replace(/-/g,"â").replace(/\[/g,"ã").replace(/]/g,"ã").replace(/\./g,"â¤").replace(/`/g,"×³").replace(/"/g,"â")},t}();e.RulesTextNormalizer=n}.apply(e,[n,e]))||(t.exports=r)},function(t,e,n){(function(t){var r=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++)n[e[r]]=Object.getOwnPropertyDescriptor(t,e[r]);return n},o=/%[sdj%]/g;e.format=function(t){if(!y(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(a(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,i=r.length,s=String(t).replace(o,(function(t){if("%%"===t)return"%";if(n>=i)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}})),u=r[n];n<i;u=r[++n])g(u)||!C(u)?s+=" "+u:s+=" "+a(u);return s},e.deprecate=function(n,r){if(void 0!==t&&!0===t.noDeprecation)return n;if(void 0===t)return function(){return e.deprecate(n,r).apply(this,arguments)};var o=!1;return function(){if(!o){if(t.throwDeprecation)throw new Error(r);t.traceDeprecation?console.trace(r):console.error(r),o=!0}return n.apply(this,arguments)}};var i,s={};function a(t,n){var r={seen:[],stylize:l};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),f(n)?r.showHidden=n:n&&e._extend(r,n),v(r.showHidden)&&(r.showHidden=!1),v(r.depth)&&(r.depth=2),v(r.colors)&&(r.colors=!1),v(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=u),c(r,t,r.depth)}function u(t,e){var n=a.styles[e];return n?"["+a.colors[n][0]+"m"+t+"["+a.colors[n][1]+"m":t}function l(t,e){return t}function c(t,n,r){if(t.customInspect&&n&&I(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,t);return y(o)||(o=c(t,o,r)),o}var i=function(t,e){if(v(e))return t.stylize("undefined","undefined");if(y(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(m(e))return t.stylize(""+e,"number");if(f(e))return t.stylize(""+e,"boolean");if(g(e))return t.stylize("null","null")}(t,n);if(i)return i;var s=Object.keys(n),a=function(t){var e={};return t.forEach((function(t,n){e[t]=!0})),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(n)),A(n)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return p(n);if(0===s.length){if(I(n)){var u=n.name?": "+n.name:"";return t.stylize("[Function"+u+"]","special")}if(b(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(E(n))return t.stylize(Date.prototype.toString.call(n),"date");if(A(n))return p(n)}var l,C="",T=!1,S=["{","}"];(h(n)&&(T=!0,S=["[","]"]),I(n))&&(C=" [Function"+(n.name?": "+n.name:"")+"]");return b(n)&&(C=" "+RegExp.prototype.toString.call(n)),E(n)&&(C=" "+Date.prototype.toUTCString.call(n)),A(n)&&(C=" "+p(n)),0!==s.length||T&&0!=n.length?r<0?b(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),l=T?function(t,e,n,r,o){for(var i=[],s=0,a=e.length;s<a;++s)N(e,String(s))?i.push(d(t,e,n,r,String(s),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(d(t,e,n,r,o,!0))})),i}(t,n,r,a,s):s.map((function(e){return d(t,n,r,a,e,T)})),t.seen.pop(),function(t,e,n){if(t.reduce((function(t,e){return e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(l,C,S)):S[0]+C+S[1]}function p(t){return"["+Error.prototype.toString.call(t)+"]"}function d(t,e,n,r,o,i){var s,a,u;if((u=Object.getOwnPropertyDescriptor(e,o)||{value:e[o]}).get?a=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(a=t.stylize("[Setter]","special")),N(r,o)||(s="["+o+"]"),a||(t.seen.indexOf(u.value)<0?(a=g(n)?c(t,u.value,null):c(t,u.value,n-1)).indexOf("\n")>-1&&(a=i?a.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+a.split("\n").map((function(t){return"   "+t})).join("\n")):a=t.stylize("[Circular]","special")),v(s)){if(i&&o.match(/^\d+$/))return a;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function h(t){return Array.isArray(t)}function f(t){return"boolean"==typeof t}function g(t){return null===t}function m(t){return"number"==typeof t}function y(t){return"string"==typeof t}function v(t){return void 0===t}function b(t){return C(t)&&"[object RegExp]"===T(t)}function C(t){return"object"==typeof t&&null!==t}function E(t){return C(t)&&"[object Date]"===T(t)}function A(t){return C(t)&&("[object Error]"===T(t)||t instanceof Error)}function I(t){return"function"==typeof t}function T(t){return Object.prototype.toString.call(t)}function S(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(n){if(v(i)&&(i=t.env.NODE_DEBUG||""),n=n.toUpperCase(),!s[n])if(new RegExp("\\b"+n+"\\b","i").test(i)){var r=t.pid;s[n]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",n,r,t)}}else s[n]=function(){};return s[n]},e.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=h,e.isBoolean=f,e.isNull=g,e.isNullOrUndefined=function(t){return null==t},e.isNumber=m,e.isString=y,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=v,e.isRegExp=b,e.isObject=C,e.isDate=E,e.isError=A,e.isFunction=I,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(130);var w=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function _(){var t=new Date,e=[S(t.getHours()),S(t.getMinutes()),S(t.getSeconds())].join(":");return[t.getDate(),w[t.getMonth()],e].join(" ")}function N(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",_(),e.format.apply(e,arguments))},e.inherits=n(131),e._extend=function(t,e){if(!e||!C(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t};var D="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function O(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(D&&t[D]){var e;if("function"!=typeof(e=t[D]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,D,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,n,r=new Promise((function(t,r){e=t,n=r})),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push((function(t,r){t?n(t):e(r)}));try{t.apply(this,o)}catch(t){n(t)}return r}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),D&&Object.defineProperty(e,D,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,r(t))},e.promisify.custom=D,e.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var o=n.pop();if("function"!=typeof o)throw new TypeError("The last argument must be of type Function");var i=this,s=function(){return o.apply(i,arguments)};e.apply(this,n).then((function(e){t.nextTick(s,null,e)}),(function(e){t.nextTick(O,e,s)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),Object.defineProperties(n,r(e)),n}}).call(this,n(84))},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},,,function(t,e,n){"use strict";var r,o;r=[n,e,n(0),n(12)],void 0===(o=function(t,e,n,r){Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){var e=this;this._textContent="",this.needsTooltip=!1,this.element=t,this.element.setAttribute("sdtoe",""),function(t){n(t.element).on("mouseenter",(function(){t.onElementMouseEnter()})).on("mouseout",(function(){t.onElementMouseOut()}))}(this),this.update=r.Debouncer.create((function(){e.updateElementInSyncMode()}),2)}return t.prototype.isAttached=function(){return document.contains(this.element)},t.prototype.updateElementInSyncMode=function(){var e=this;try{if(this.isAttached()){var n=Math.round(this.element.getBoundingClientRect().width),r=this.getComputedElementTextWidth();this.element.textContent=t.makeTextEllipsis(this._textContent,n,r)}else setTimeout((function(){e.update()}),10)}catch(t){}},t.getFastTextWidth=function(e){return t.measure.textContent=e,t.measure.offsetWidth},t.prototype.getComputedElementTextWidth=function(){t.measure||(t.measure=document.createElement("div"),t.measure.style.position="fixed",t.measure.style.left="-1000px",t.measure.style.top="-1000px",t.measure.style.display="block",t.measure.style.whiteSpace="pre",document.body.appendChild(t.measure));var e=window.getComputedStyle(this.element);return t.measure.style.fontFamily=e.fontFamily,t.measure.style.fontSize=e.fontSize,t.measure.style.padding=e.padding,t.measure.style.boxSizing=e.boxSizing,t.getFastTextWidth(this._textContent)},Object.defineProperty(t.prototype,"textContent",{get:function(){return this._textContent},set:function(t){this._textContent=t,this.update()},enumerable:!0,configurable:!0}),t.prototype.getRoot=function(){return this.element},t.prototype.onElementMouseEnter=function(){try{var t=window.getComputedStyle(this.element);if(this.needsTooltip="ellipsis"===t.textOverflow,this.needsTooltip){this.updateElementInSyncMode();var e=this.element.getBoundingClientRect(),n=window.getComputedStyle(this.element);this.tooltip=document.createElement("div"),this.tooltip.className="ui smart-tooltip",this.tooltip.textContent=this.textContent,this.tooltip.style.left=Math.round(e.left)-5+"px",this.tooltip.style.top=Math.round(e.top)-5+"px",this.tooltip.style.fontSize=n.fontSize,this.tooltip.style.fontFamily=n.fontFamily,this.tooltip.style.lineHeight=n.lineHeight,this.tooltip.style.color=n.color,document.body.appendChild(this.tooltip)}}catch(t){}},t.prototype.onElementMouseOut=function(){this.tooltip&&(this.tooltip.parentNode&&this.tooltip.parentNode.removeChild(this.tooltip),this.tooltip=void 0)},t.createElement=function(e){return new t(document.createElement(e))},t.makeTextEllipsis=function(e,n,r){var o=e.length;if(!e||o<2||n>=r)return e;for(var i=Math.floor(o/2),s=[e.substr(0,i),e.substr(i)];t.getFastTextWidth(s[0]+"â¦"+s[1])>=n&&s[0]&&s[1];)s[0]=s[0].substr(0,s[0].length-1),s[1]=s[1].substr(1);return s[0]+"â¦"+s[1]},t}();e.SmartDOMTextOverflowElement=o}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(0),n(7),n(28)],void 0===(o=function(t,e,n,r,o){var i;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.PEN_DOWN=0]="PEN_DOWN",t[t.PEN_UP=1]="PEN_UP",t[t.LINE_TO=2]="LINE_TO",t[t.BITMAP_START=3]="BITMAP_START"}(i=e.SignatureDrawCommand||(e.SignatureDrawCommand={}));var s=function(){function t(){}return t.bits_encode=function(t,e){for(var n="",r=e?this.PEN_DOWN_BITS:this.PEN_UP_BITS;t>this.MAX_CONSECUTIVE_BITS;)n=n.concat(r.charAt(this.MAX_CONSECUTIVE_BITS)),t-=this.MAX_CONSECUTIVE_BITS;return t>0&&(n=n.concat(r.charAt(t))),n},t.bits_push=function(t,e){var n;if((n=this.PEN_DOWN_BITS.indexOf(e))>0)for(var r=0;r<n;r++)t.push(1);else if((n=this.PEN_UP_BITS.indexOf(e))>0)for(r=0;r<n;r++)t.push(0)},t.validatePenUpCommand=function(t){return 1===t.length},t.validatePenDownCommand=function(t){return"number"==typeof t[1]&&"number"==typeof t[2]&&3===t.length},t.validateLineToCommand=function(t){return"number"==typeof t[1]&&"number"==typeof t[2]&&3===t.length},t.parseSignatureValue=function(t,e){if(void 0===e&&(e=!1),null!==t&&"string"!=typeof t){if(e)return null;throw new Error("Invalid signature: "+JSON.stringify(t))}if(null===t)return{data:[],objectType:"Signature"};try{if('<signature value="'!==t.substr(0,18))throw new Error("Invalid string start");if('" />'!==t.substr(-4))throw new Error("Invalid string end");var n='{"objectType":"Signature","data":'+t.substr(18,t.length-22)+"}",r=JSON.parse(n);if(void 0===r.data||!Array.isArray(r.data))throw new Error("Parsed signature does not have a data property of type array");for(var o=0,s=r.data.length;o<s;o++){if(!Array.isArray(r.data[o]))throw new Error("Invalid signature command @ pos "+o);switch(r.data[o][0]){case i.PEN_UP:if(!this.validatePenUpCommand(r.data[o]))throw new Error("Illegal PEN_UP sequence!");break;case i.PEN_DOWN:if(!this.validatePenDownCommand(r.data[o]))throw new Error("Illegal PEN_DOWN sequence");break;case i.LINE_TO:if(!this.validateLineToCommand(r.data[o]))throw new Error("Illegal LINE_TO sequence");break;case i.BITMAP_START:if(0!==o)throw new Error("Illegal BITMAP_START order");if(!this.validateBitmapStartCommand(r.data[o]))throw new Error("Illegal BITMAP_START sequence");break;default:throw new Error("Unknown signature command at data index "+o)}}return r}catch(t){if(e)return null;throw new Error("Invalid signature: "+String(t).replace(/^Error: /,""))}},t.paintSignature=function(t,e,n,r,o,i){var s=e.getBoundingClientRect(),a=Math.round(s.width),u=Math.round(s.height);a?e.width=a:a=e.width,u?e.height=u:u=e.height,this.drawSignature(e.getContext("2d"),a,u,o,i,t,n,r)},t.drawSignature=function(t,e,n,r,o,s,u,l){var c=!1,p=s&&s.data&&s.data[0]&&s.data[0][0]===i.BITMAP_START;p||(null!==e&&null!==n&&(t.clearRect(0,0,e,n),t.beginPath()),t.lineWidth=r,t.strokeStyle=o,t.lineCap="round");for(var d=0,h=s.data.length;d<h;d++)switch(s.data[d][0]){case i.PEN_DOWN:t.moveTo(u+s.data[d][1],l+s.data[d][2]),c=!0;break;case i.PEN_UP:c=!1;break;case i.LINE_TO:c&&t.lineTo(u+s.data[d][1],l+s.data[d][2]);break;case i.BITMAP_START:try{a.createFromString(s.data[d][1]).paint(u+8,l+8,o,t)}catch(t){console.error(t)}}p||null!==e&&null!==n&&(t.stroke(),t.closePath())},t.shiftSignatureToTopLeftCoordinates=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0);for(var o=null,s=null,a=0,u=t.data.length;a<u;a++)switch(t.data[a][0]){case i.PEN_DOWN:case i.LINE_TO:(null===o||o>t.data[a][1])&&(o=t.data[a][1]),(null===s||s>t.data[a][2])&&(s=t.data[a][2])}var l=r.Helpers.clone(t);if(null===o||null===s)return l;for(a=0,u=l.data.length;a<u;a++)l.data[a][0]!==i.PEN_DOWN&&l.data[a][0]!==i.LINE_TO||(l.data[a][1]-=o-e,l.data[a][2]-=s-n);return l},t.getSignatureBoundingRect=function(t){for(var e=null,n=null,r=null,o=null,s=!1,a=0,u=t.data.length;a<u;a++)switch(t.data[a][0]){case i.PEN_DOWN:s=!0,null===e?(e=r=t.data[a][1],n=o=t.data[a][2]):(e=Math.min(e,t.data[a][1]),r=Math.max(r,t.data[a][1]),n=Math.min(e,t.data[a][2]),o=Math.max(o,t.data[a][2]));break;case i.PEN_UP:s=!1;break;case i.LINE_TO:s&&(null===e?(e=r=t.data[a][1],n=o=t.data[a][2]):(e=Math.min(e,t.data[a][1]),r=Math.max(r,t.data[a][1]),n=Math.min(e,t.data[a][2]),o=Math.max(o,t.data[a][2])))}return null===e?{left:0,top:0,width:0,height:0}:{left:e,top:n,width:r-n,height:o-n}},t.signatureStringToPngImageData=function(t,e,n){var r=this.parseSignatureValue(t,!0);if(null===r)return null;var o=this.getSignatureBoundingRect(r);return this.canvas||(this.canvas=document.createElement("canvas"),this.canvas.style.cssText="position: absolute; left: -10000px; top: -10000px; display: block"),this.canvas.style.width=o.width+"px",this.canvas.style.height=o.height+"px",this.canvas.width=o.width,this.canvas.height=o.height,this.canvas.getContext("2d").clearRect(0,0,o.width,o.height),this.paintSignature(r,this.canvas,-o.left||0,-o.top||0,n,e),String(this.canvas.toDataURL())},t.validateBitmapStartCommand=function(t){return t&&2===t.length&&t[0]===i.BITMAP_START&&"string"==typeof t[1]&&3===t[1].split(",").length},t.MAX_CONSECUTIVE_BITS=32,t.PEN_DOWN_BITS=" ABCDEFGHIJKLMNOPQRSTUVWXYZ12345_",t.PEN_UP_BITS=" abcdefghijklmnopqrstuvwxyz67890=",t}();e.SignatureUtils=s;var a=function(){function t(t,e,n){this.width=t,this.height=e,this.bytes=n}return t.prototype.stringify=function(){for(var t=[],e="",n=0;n<this.height;n++)for(var r=0;r<this.width;r++)t.push(this.bytes[n][r]);if(t.length){var o=0,i=0,a=void 0;do{(a=t.shift())===o?i++:(i>0&&(e=e.concat(s.bits_encode(i,0===a))),i=1),o=a}while(t.length);i>0&&(e=e.concat(s.bits_encode(i,1===a)))}return this.width+","+this.height+","+e},t.prototype.get=function(t,e){return(this.bytes[e]||[])[t]||0},t.prototype.set=function(t,e,n){return(this.bytes[e]||[])[t]=n,this},t.prototype.isValidXY=function(t,e){return t>-1&&e>-1&&t<this.width&&e<this.height},t.prototype.scaleToFit=function(e,n){var r=1,o=this.width,i=this.height;if(o<e&&i<n)return this;do{r-=.001,o=this.width*r,i=this.height*r}while(o>e||i>n);for(var s=Math.round(o),a=Math.round(i),u=this.width/s,l=[],c=0;c<a;c++){for(var p=[],d=0;d<s;d++)p.push(this.getMostSignificantPixelInCluster(Math.round(d/r),Math.round(c/r),u,!0));l.push(p)}return new t(s,a,l)},t.prototype.crop=function(){for(var e=this,n=0,r=0,o=0,i=0,s=function(t){for(var n=0;n<e.width;n++)if(0===e.bytes[t][n])return!1;return!0},a=function(t){for(var n=0;n<e.height;n++)if(0===e.bytes[n][t])return!1;return!0},u=0;u<this.height&&s(u);u++)n++;for(u=this.height-1;u>-1&&s(u);u--)i++;for(var l=0;l<this.width&&a(l);l++)r++;for(l=this.width-1;l>-1&&a(l);l--)o++;var c=[];for(u=n;u<this.height-i;u++){var p=[];for(l=r;l<this.width-o;l++)p.push(this.bytes[u][l]);c.push(p)}return new t(this.width-r-o,this.height-n-i,c)},t.prototype.normalize=function(t){if(t.fg===t.bg)throw new Error("Not enough image contrast");for(var e=!1,n=0;n<this.height;n++)for(var r=0;r<this.width;r++)Math.abs(t.bg-this.bytes[n][r])<Math.abs(t.fg-this.bytes[n][r])?(this.bytes[n][r]=1,!0):(this.bytes[n][r]=0,e=!0);if(!e||!e)throw new Error("Not enough image contrast");return this},t.prototype.getColors=function(){for(var t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<this.height;e++)for(var n=0;n<this.width;n++)t[~~(20*this.bytes[e][n])]++;var r,o=[],i=0,s=[],a=0;r=0;for(var u=0;u<21&&(t[u]>0&&(o.push(u),i+=t[u],r++),!(r>=1||r>0&&0===t[u]));u++);r=0;for(u=20;u>-1&&(t[u]>0&&(s.push(u),a+=t[u],r++),!(1===r||r>0&&0===t[u]));u--);var l=function(t){var e=0;return t.forEach((function(t){e+=t})),e/t.length};return i<a?{fg:l(o)/20,bg:l(s)/20}:{bg:l(o)/20,fg:l(s)/20}},t.prototype.debug=function(t){void 0===t&&(t=!1);var e=document.createElement("canvas");t&&document.body.appendChild(e),e.width=this.width,e.height=this.height;var n,r=e.getContext("2d"),o=0;r.imageSmoothingEnabled=!1,r.mozImageSmoothingEnabled=!1,r.webkitImageSmoothingEnabled=!1;for(var i=r.createImageData(this.width,this.height),s=0;s<this.height;s++)for(var a=0;a<this.width;a++)n=~~(255*this.bytes[s][a]),i.data[o]=n,i.data[o+1]=n,i.data[o+2]=n,i.data[o+3]=255,o+=4;return e.width=this.width,e.height=this.height,r.putImageData(i,0,0),e},t.createFromFile=function(e){return n.Deferred((function(n){var r=new FileReader;r.onload=function(){var e=document.createElement("img");e.onload=function(){var r=document.createElement("canvas"),o=r.getContext("2d");r.width=e.width,r.height=e.height,o.drawImage(e,0,0);for(var i,s,a,u=[],l=o.getImageData(0,0,e.width,e.height),c=0,p=0,d=e.height;p<d;p++){for(var h=[],f=0,g=e.width;f<g;f++)i=l.data[c],s=l.data[c+1],a=l.data[c+2],l.data[c+3],c+=4,h.push(t.getLuminosityAsFloatFromRGB(i,s,a));u.push(h)}n.resolve(new t(e.width,e.height,u))},e.src=r.result},r.onerror=function(){n.reject(new Error("Failed to read file"))},r.readAsDataURL(e)}))},t.createFromString=function(e){if(!e||"string"!=typeof e)throw new Error("ImageMatrix: Invalid argument - string expected");var n=e.split(",");if(3!==n.length)throw new Error("ImageMatrix: Invalid argument - bad split");var r=parseInt(n[0],10),o=parseInt(n[1],10),i=[];if(isNaN(r)||r<1||~~r!==r)throw new Error("ImageMatrix: Illegal width");if(isNaN(o)||o<1||~~o!==o)throw new Error("ImageMatrix: Illegal height");for(var a=0,u=n[2].length;a<u;a++)s.bits_push(i,n[2].charAt(a));if(r*o!==i.length)throw new Error("ImageMatrix: Invalid argument: corrupted signature");for(var l=[],c=0;c<o;c++){for(var p=[],d=0;d<r;d++)p.push(i.shift());l.push(p)}return new t(r,o,l)},t.getLuminosityAsFloatFromRGB=function(t,e,n){t/=255,e/=255,n/=255;var r=Math.max(t,e,n),o=Math.min(t,e,n),i=(r+o)/2;if(r==o);else{var s=r-o;switch(r){case t:(e-n)/s+(e<n?6:0);break;case e:(n-t)/s+2;break;case n:(t-e)/s+4}}return i},t.prototype.getMostSignificantPixelInCluster=function(t,e,n,r){void 0===r&&(r=!0);for(var o=n/2,i=Math.floor(e-o),s=Math.floor(e+o),a=Math.floor(t-o),u=Math.floor(t+o),l=0,c=0,p=i;p<=s;p++)if(this.bytes[p])for(var d=a;d<=u;d++){if(0===this.bytes[p][d])return c++;l++}return r?l>c?1:0:c>0?0:1},t.prototype.paint=function(e,n,r,i){for(var s=o.CSSUtils.parseCSSColor(r),a=0,u=i.createImageData(this.width,this.height),l=0;l<this.height;l++)for(var c=0;c<this.width;c++)0===~~(255*this.bytes[l][c])?(u.data[a]=s[0],u.data[a+1]=s[1],u.data[a+2]=s[2],u.data[a+3]=255):(u.data[a]=0,u.data[a+1]=0,u.data[a+2]=0,u.data[a+3]=0),a+=4;t.tempCanvas=t.tempCanvas||document.createElement("canvas"),t.tempCanvas.width=this.width,t.tempCanvas.height=this.height,t.tempCanvas.getContext("2d").putImageData(u,0,0),i.drawImage(t.tempCanvas,e,n)},t}();e.ImageMatrix=a}.apply(e,r))||(t.exports=o)},,function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(0),n(3),n(5),n(27),n(17),n(18),n(35),n(7)],void 0===(o=function(t,e,n,r,o,i,a,u,l,c){Object.defineProperty(e,"__esModule",{value:!0});var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.activateOfflineSubmissionAPIEndpoints=function(){var t=this;console.warn("[PWA] activating offline submission api mocked endpoints"),o.API.getOfflineRouter().post(/^forms\/[a-z_0123456789]+\/submit$/).willReturn((function(e,r){return n.Deferred((function(n){var o=/\/forms\/([a-z_0123456789]+)\/submit(\?|$)/.exec(e);o?t.storeOfflineSubmission(o[1],r)?n.resolve({}):n.reject(new i.BackendException("Failed to store submission in local Storage").setCode("ERR_SUBMIT_OFFLINE_FORM").setType("OfflineAPIException")):n.reject(new i.BackendException("Failed to parse route "+JSON.stringify(e)).setCode("ERR_SUBMIT_OFFLINE_FORM").setType("OfflineAPIException"))}))})),o.API.getOfflineRouter().post(/^files\/[a-z_0123456789]+$/).willReturn((function(e,r,o){return n.Deferred((function(n){var r=/\/files\/([a-z_0123456789]+)(\?|$)/.exec(e);if(r){var s=r[1];s?t.getIndexedDBObjectStore().then((function(t){if(o.size>20971520)n.reject(new i.BackendException("Uploading files larger than 20MB while in offline mode is not supported").setCode("ERR_SUBMIT_OFFLINE_FILE").setType("OfflineAPIException"));else{var e=o.slice(0,o.size,o.type),r=a.UniqueId.next();t.storeBlob(e,r).then((function(t){var e,a="https://offline.abcsubmit.com/blob/"+r+"/"+encodeURIComponent(o.name.replace(/[^.a-zA-Z0-9_-]+/g," ").replace(/[ ]+/g,"_")),l=u.PersistentStorage.getItem("offline_uploads",u.PersistentDataStorageType.LOCAL_STORAGE)||"{}";try{e=(e=JSON.parse(l))||{}}catch(t){e={}}e[s]=e[s]||[],e[s].push({createdDate:+new Date,fileId:r,fileName:o.name,fileSize:o.size,fileType:o.type}),u.PersistentStorage.setItem("offline_uploads",JSON.stringify(e),u.DataPersistenceType.CRITICAL,u.PersistentDataStorageType.LOCAL_STORAGE)?n.resolve(a):n.reject(new i.BackendException("Failed to update local storage").setCode("ERR_SUBMIT_OFFLINE_FILE").setType("OfflineAPIException"))})).fail((function(t){n.reject(new i.BackendException("Failed to save file in Offline Database").setCode("ERR_SUBMIT_OFFLINE_FILE").setType("OfflineAPIException"))}))}})).fail((function(t){n.reject(new i.BackendException("Failed to access IndexedDB object store").setCode("ERR_SUBMIT_OFFLINE_FILE_OBJECT_STORE_ERROR").setType("OfflineAPIException"))})):n.reject(new i.BackendException("Failed to determine formId from route "+JSON.stringify(e)).setCode("ERR_SUBMIT_OFFLINE_FILE").setType("OfflineAPIException"))}else n.reject(new i.BackendException("Failed to parse route "+JSON.stringify(e)).setCode("ERR_SUBMIT_OFFLINE_FILE").setType("OfflineAPIException"))}))})),o.API.getOfflineRouter().post(/^files\/[a-z_0123456789]+\/bytes$/).willReturn((function(e,r){return n.Deferred((function(n){var o=/\/files\/([a-z_0123456789]+)\/bytes(\?|$)/.exec(e);if(o){var s=o[1];s?r&&r.bytes&&r.name?t.getIndexedDBObjectStore().then((function(t){var e=l.FileUtils.getMileFileTypeFromFileName(r.name),o=l.FileUtils.createBlobFromBase64Data(r.bytes,e);if(null!==o){var c=a.UniqueId.next();t.storeBlob(o,c).then((function(t){var a,l="https://offline.abcsubmit.com/blob/"+c+"/"+encodeURIComponent(r.name.replace(/[^.a-zA-Z0-9_-]+/g," ").replace(/[ ]+/g,"_")),p=u.PersistentStorage.getItem("offline_uploads",u.PersistentDataStorageType.LOCAL_STORAGE)||"{}";try{a=(a=JSON.parse(p))||{}}catch(t){a={}}a[s]=a[s]||[],a[s].push({createdDate:+new Date,fileId:c,fileName:r.name,fileSize:o.size,fileType:e}),u.PersistentStorage.setItem("offline_uploads",JSON.stringify(a),u.DataPersistenceType.CRITICAL,u.PersistentDataStorageType.LOCAL_STORAGE)?n.resolve(l):n.reject(new i.BackendException("Failed to update local storage").setCode("ERR_SUBMIT_OFFLINE_FILE").setType("OfflineAPIException"))})).fail((function(t){n.reject(new i.BackendException("Failed to save file in Offline Database").setCode("ERR_SUBMIT_OFFLINE_FILE").setType("OfflineAPIException"))}))}else n.reject(new i.BackendException("Failed to create blob from base64 data").setCode("ERR_SUBMIT_OFFLINE_FILE_CREATE_BLOB").setType("OfflineAPIException"))})).fail((function(t){n.reject(new i.BackendException("Failed to access IndexedDB object store").setCode("ERR_SUBMIT_OFFLINE_FILE_OBJECT_STORE_ERROR").setType("OfflineAPIException"))})):n.reject(new i.BackendException("Failed to parse request (expected params.bytes, params.name)").setCode("ERR_SUBMIT_OFFLINE_FILE_PARSE_REQUEST").setType("OfflineAPIException")):n.reject(new i.BackendException("Failed to determine formId from route "+JSON.stringify(e)).setCode("ERR_SUBMIT_OFFLINE_FILE").setType("OfflineAPIException"))}else n.reject(new i.BackendException("Failed to parse route "+JSON.stringify(e)).setCode("ERR_SUBMIT_OFFLINE_FILE").setType("OfflineAPIException"))}))}))},e.prototype.getIndexedDBObjectStore=function(){return this.indexedDBObjectStore||(this.indexedDBObjectStore=n.Deferred((function(t){u.PersistentStorage.createIndexedDB("abcsubmit").createObjectStore("offline_files").then((function(e){t.resolve(e)})).fail((function(e){t.reject(e)}))}))),this.indexedDBObjectStore},e.prototype.storeOfflineSubmission=function(t,e){var n=u.PersistentStorage.getItem("offline_submissions")||"{}";try{var r=JSON.parse(n);return r[t]=r[t]||[],r[t].push({createdDate:+new Date,request:c.Helpers.clone(e)}),u.PersistentStorage.setItem("offline_submissions",JSON.stringify(r),u.DataPersistenceType.CRITICAL,u.PersistentDataStorageType.LOCAL_STORAGE),!0}catch(t){return!1}},e.prototype.deleteOfflineSubmissionFormData=function(t,e){var n=u.PersistentStorage.getItem("offline_submissions",u.PersistentDataStorageType.LOCAL_STORAGE);if(n)try{var r=JSON.parse(n);if(!r[t]||!r[t].length)return;for(var o=0,i=r[t].length;o<i;o++)if(r[t][o].createdDate===e)return r[t].splice(o,1),void u.PersistentStorage.setItem("offline_submissions",JSON.stringify(r),u.DataPersistenceType.CRITICAL,u.PersistentDataStorageType.LOCAL_STORAGE)}catch(t){}},e}(r.EventEmitter),d=function(){function t(){}return t.getInstance=function(){return this.instance||(this.instance=new p)},t.activateOfflineSubmissionAPIEndpoints=function(){this.getInstance().activateOfflineSubmissionAPIEndpoints()},t.storeOfflineSubmission=function(t,e){return this.getInstance().storeOfflineSubmission(t,e)},t.getIndexedDBObjectStore=function(){return this.getInstance().getIndexedDBObjectStore()},t.deleteOfflineSubmissionFormData=function(t,e){this.getInstance().deleteOfflineSubmissionFormData(t,e)},t}();e.OfflineSubmissionManager=d}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(0),n(9),n(3),n(35),n(5),n(2),n(12),n(6),n(267),n(21),n(139),n(1),n(4),n(268),n(10)],void 0===(o=function(t,e,n,r,o,i,a,u,l,c,p,d,h,f,g,m,y){Object.defineProperty(e,"__esModule",{value:!0});var v,b,C=function(t){function e(){var e=t.call(this)||this;return e.multiple=!1,e.root=document.createElement("div"),e.root.setAttribute("data-role","browse-file"),e.fileInput=document.createElement("input"),e.fileInput.setAttribute("data-role","file"),e.fileInput.setAttribute("type","file"),e.root.appendChild(e.fileInput),e.fileInput.onchange=function(){if(e.isMultiple()){for(var t=[],n=0,r=e.fileInput.files.length;n<r;n++)t.push(e.fileInput.files[n]);e.fileInput.value="",t.length&&e.trigger("add",t)}else{var o=e.fileInput.files[0]||null;e.fileInput.value="",o&&e.trigger("change",o)}},e.icon=document.createElement("span"),e.icon.setAttribute("data-role","icon"),e.icon.className="vfb vfb-file",e.root.appendChild(e.icon),e}return s(e,t),e.prototype.getRoot=function(){return this.root},e.prototype.click=function(){n(this.fileInput).click()},e.prototype.isMultiple=function(){return this.multiple},e.prototype.setMultiple=function(t){return this.multiple=!!t,this.multiple?this.fileInput.setAttribute("multiple","multiple"):this.fileInput.removeAttribute("multiple"),this},e}(o.EventEmitter),E=function(){function t(t,e){var n=this;this.uploadedBytes=0,this.preventAbortButtonClick=!1,this.list=t,this.file=e,this.root=document.createElement("div"),this.root.setAttribute("data-role","file-item"),this.progress=new p.ProgressBar,this.root.appendChild(this.progress.getRoot()),this.abortButton=document.createElement("div"),this.abortButton.setAttribute("data-role","remove");var r=document.createElement("span");r.className="vfb vfb-close",this.abortButton.appendChild(r),this.root.appendChild(this.abortButton),this.nameDOMNode=document.createElement("div"),this.nameDOMNode.setAttribute("data-role","caption"),this.nameDOMNode.textContent=e.name,this.root.appendChild(this.nameDOMNode),this.abortButton.tabIndex=0,this.abortButton.onclick=function(){n.list.isBusy()||n.onAbortButtonClick()},this.abortButton.onkeydown=function(t){if(!n.list.isBusy()){var e=t.keyCode||t.charCode;e!==d.KeyboardDriver.ENTER&&e!==d.KeyboardDriver.SPACE&&e!==d.KeyboardDriver.ESC||(n.onAbortButtonClick(),t.preventDefault(),t.stopPropagation())}}}return t.prototype.onAbortButtonClick=function(){var t=this;this.preventAbortButtonClick||this.remove().then((function(){t.list.removeFileItem(t)})).fail((function(t){}))},t.prototype.onRemoveBegin=function(){this.preventAbortButtonClick=!0,this.abortButton.textContent="";var t=document.createElement("span");t.className="vfb vfb-refresh rotating",this.abortButton.appendChild(t),this.root.setAttribute("data-is-removing",""),this.list.setBusy(!0)},t.prototype.onRemoveEnd=function(){this.preventAbortButtonClick=!1,this.abortButton.textContent="";var t=document.createElement("span");t.className="vfb vfb-close",this.abortButton.appendChild(t),this.root.removeAttribute("data-is-removing"),this.list.setBusy(!1)},t.prototype.remove=function(t){var e=this;void 0===t&&(t=!1),this.onRemoveBegin();var r=n.Deferred((function(n){if(e.isError())n.resolve();else if(e.isUploadStarted())if(e.isUploadRunning())e.uploadPromise.reject(new Error("Aborted by user")),e.inProgressUploadXHR&&e.inProgressUploadXHR.abort(),n.resolve();else{if(t)return void n.resolve();e.list.getZipModel().then((function(t){var r=e.list.getUploadField().getDocument().getId();a.API.delete("files/"+r+"/archive/"+encodeURIComponent(e.getName()),{archive:JSON.stringify(t)}).then((function(){n.resolve()})).fail((function(t){u.Dialog.alert("A server error occurred while removing file "+e.getName()+". Please retry. If the problem persists, contact support","Remove file - Error"),n.reject(t)}))})).fail((function(t){u.Dialog.alert("Failed to obtain previously created ZIP archive. This is probably a software BUG. Please retry. If the problem persists, contact support","Remove file - Error"),n.reject(t)}))}else n.resolve()}));return r.always((function(){e.onRemoveEnd()})),r},t.prototype.getName=function(){if(this.uploadedFileModel){var t=this.uploadedFileModel.name.split("#");return t[t.length-1]}return this.file.name},t.prototype.getSize=function(){return this.file.size},t.prototype.getUploadedBytes=function(){return this.uploadedBytes},t.prototype.setUploadedBytes=function(t){return t>this.uploadedBytes&&(this.uploadedBytes=t,this.progress.setValue(Math.round(t/(this.getSize()/100)))),this.list.onProgress(),this},t.prototype.isError=function(){return!!this.error},t.prototype.getRoot=function(){return this.root},t.prototype.startUpload=function(){var t=this;this.isUploadStarted()||(this.list.getRoot().scrollTop=Math.max(this.root.offsetTop-10,0),this.uploadPromise=n.Deferred((function(e){var n=t.list.getUploadField().getProperty("validation.allowedFileTypes");if(n&&!i.FileUtils.isFileType(t.file,n)){var r=new Error(f.I18n.translateApplicationText("Only %1 file types are allowed","control-defaults.file",0,n));return t.setError(r),void e.reject(r)}t.list.getZipModel().then((function(n){var r=t.list.getUploadField().getDocument().getId();a.API.upload("files/"+r+"/archive",t.file,{archive:JSON.stringify(n)},(function(e,n){t.setUploadedBytes(n)}),a.APIAuthenticationStrategy.DEFAULT,(function(e){t.inProgressUploadXHR=e})).then((function(n){t.uploadedFileModel=n,t.onUploadCompleted(),e.resolve()})).fail((function(n){t.setError(n),e.reject(n)})).always((function(){t.inProgressUploadXHR=void 0}))})).fail((function(n){t.setError(n),e.reject(n)}))})))},t.prototype.isUploadStarted=function(){return void 0!==this.uploadPromise},t.prototype.isUploadRunning=function(){return this.isUploadStarted()&&"pending"===this.uploadPromise.state()},t.prototype.isUploadCompleted=function(){return this.isUploadStarted()&&"resolved"===this.uploadPromise.state()},t.prototype.setError=function(t){return this.error=t,this.error?(this.errorDOMNode||(this.errorDOMNode=document.createElement("div"),this.errorDOMNode.setAttribute("data-role","error"),this.errorDOMNode.innerHTML='<span class="vfb vfb-error2"></span>',this.root.appendChild(this.errorDOMNode)),this.root.setAttribute("data-is-error","1")):(this.errorDOMNode&&(this.errorDOMNode.parentNode&&this.errorDOMNode.parentNode.removeChild(this.errorDOMNode),this.errorDOMNode=void 0),this.root.removeAttribute("data-is-error")),this.list.setFileState(this,v.COMPLETED),this.list.onFilesChanged(),this},t.prototype.onUploadCompleted=function(){this.list.setFileState(this,v.COMPLETED),this.root.setAttribute("data-completed","1"),this.completedDOMNode=document.createElement("div"),this.completedDOMNode.setAttribute("data-role","info"),this.completedDOMNode.innerHTML='<span class="vfb vfb-'+i.FileUtils.getFileIconFromFileNameOrURL(this.file.name)+'"></span>',this.root.appendChild(this.completedDOMNode),this.list.onFilesChanged()},t.prototype.setTabIndex=function(t){return null!==t?this.abortButton.tabIndex=t:this.abortButton.removeAttribute("tabindex"),this},t}(),A=function(){function t(){}return t.CONTEXT="file_upload_field",t.MSG_DIALOG_TITLE="Protect file with password",t.MSG_DIALOG_TEXT="The owner of this document requires you to protect this file with a password. Please choose a password to proceed",t.MSG_LABEL_PASSWORD=h.PasswordPromptTranslatedUITextResources.MSG_LABEL_PASSWORD,t.MSG_PLACEHOLDER_PASSWORD=h.PasswordPromptTranslatedUITextResources.MSG_PLACEHOLDER_PASSWORD,t.MSG_LABEL_CONFIRM_PASSWORD=h.PasswordPromptTranslatedUITextResources.MSG_LABEL_CONFIRM_PASSWORD,t.MSG_PLACEHOLDER_CONFIRM_PASSWORD=h.PasswordPromptTranslatedUITextResources.MSG_PLACEHOLDER_CONFIRM_PASSWORD,t.MSG_DIALOG_OK=h.PasswordPromptTranslatedUITextResources.MSG_DIALOG_OK,t.MSG_DIALOG_CANCEL=h.PasswordPromptTranslatedUITextResources.MSG_DIALOG_CANCEL,t.MSG_DIALOG_GENERATE_PASSWORD=h.PasswordPromptTranslatedUITextResources.MSG_DIALOG_GENERATE_PASSWORD,t.MSG_DIALOG_COPY_PASSWORD=h.PasswordPromptTranslatedUITextResources.MSG_DIALOG_COPY_PASSWORD,t.MSG_TOOLTIP_COPIED_TO_CLIPBOARD=h.PasswordPromptTranslatedUITextResources.MSG_TOOLTIP_COPIED_TO_CLIPBOARD,t.MSG_ERR_PASSWORDS_DONT_MATCH=h.PasswordPromptTranslatedUITextResources.MSG_ERR_PASSWORDS_DONT_MATCH,t.MSG_ERR_PASSWORD_LENGTH_GT_6=h.PasswordPromptTranslatedUITextResources.MSG_ERR_PASSWORD_LENGTH_GT_6,t.MSG_ERROR_UPLOAD_ABORTED_NOTIFICATION_TITLE="Upload aborted",t.MSG_ERROR_UPLOAD_ABORTED_NOTIFICATION_TEXT="Upload aborted - User did not provided a password to protect file upload",t.MSG_BACKEND_DOWNLOAD_PAGE_MESSAGE="# {{file_name}}\n\n## This file is password protected\n\nThe uploader of __{{file_name}}__ protected this file with a password.\n\nPlease specify the password in order to continue.",t.MSG_BACKEND_LABEL_PASSWORD="Password",t.MSG_BACKEND_PLACEHOLDER_PASSWORD="File access password",t.MSG_BACKEND_BUTTON_DOWNLOAD="Continue to Download",t}();e.UploadFieldPasswordProtectionTextResources=A,function(t){t[t.COMPLETED=0]="COMPLETED",t[t.UPLOADING=1]="UPLOADING",t[t.PENDING=2]="PENDING"}(v||(v={})),function(t){t[t.IDLE=0]="IDLE",t[t.STARTING=1]="STARTING",t[t.UPLOADING=2]="UPLOADING"}(b||(b={}));var I=function(){function t(t){this.downloadURL=t,this.root=document.createElement("div"),this.root.setAttribute("data-role","file-item"),this.root.setAttribute("data-completed","1"),this.iconDOMNode=document.createElement("div"),this.iconDOMNode.setAttribute("data-role","info"),this.iconDOMNode.innerHTML='<span class="vfb vfb-document-file-zip"></span>',this.nameDOMNode=document.createElement("a"),this.nameDOMNode.href=t||"javascript:;",this.nameDOMNode.textContent=this.getFileName(t),this.nameDOMNode.setAttribute("data-role","caption"),this.nameDOMNode.title="Click to download",this.root.appendChild(this.iconDOMNode),this.root.appendChild(this.nameDOMNode)}return t.prototype.getRoot=function(){return this.root},t.prototype.getFileName=function(t){return"Multiple Files.zip"},t}(),T=function(){function t(t){var e=this;this.defers=[],this.lines=[],this.dialog=new u.Dialog({width:"500px",height:"400px",title:t,modal:!0,closable:!0,onClose:function(){for(var t=0,n=e.defers.length;t<n;t++)e.defers[t].reject(new Error("Aborted by user"))},buttons:[{caption:"Cancel",classNames:"btn btn-danger",callback:function(){for(var t=0,n=e.defers.length;t<n;t++)e.defers[t].reject(new Error("Aborted by user"))}}]}).center(),this.log=document.createElement("textarea"),this.log.style.cssText="position: absolute; left: 0; top: 0; right: 0; bottom: 0; display: block; padding: 10px; background-color: transparent; color: #444; width: 100%; height: 100%; border: none; resize: none",this.log.readOnly=!0,this.dialog.getBody().appendChild(this.log)}return t.prototype.registerDefer=function(t){this.defers.push(t)},t.prototype.write=function(t){this.lines.push(t),this.lines.length>25&&this.lines.shift(),this.log.value=this.lines.join("\n"),this.log.scrollTop=1e6},t.prototype.close=function(){this.dialog.close()},t}(),S=function(t){function e(r){var o=t.call(this)||this;return o.files=[],o.uploadingFiles=[],o.pendingFiles=[],o.state=b.IDLE,o.tabIndex=0,o.busy=!1,o.file=r,o.root=document.createElement("div"),o.root.setAttribute("data-role","file-list"),o.root.setAttribute("data-num-files","0"),o.emptyStateDOMNode=document.createElement("div"),o.emptyStateDOMNode.setAttribute("data-role","empty-state"),o.emptyStateDOMNode.textContent=f.I18n.translateViewFormText(f.I18n.translateApplicationText("Click here to upload multiple files, or simply drag files or folders here","control-defaults.file")),o.dropStateDOMNode=document.createElement("div"),o.dropStateDOMNode.setAttribute("data-role","drop-state"),o.dropStateDOMNode.innerHTML='<span class="vfb vfb-file"></span> '+c.Strings.toHTML(f.I18n.translateViewFormText(f.I18n.translateApplicationText("Upload files","control-defaults.file"))),o.root.appendChild(o.emptyStateDOMNode),o.root.appendChild(o.dropStateDOMNode),o.onProgress=l.Debouncer.create((function(){o.onProgressChangedSync()}),100),o.onStateChanged=l.Debouncer.create((function(){o.onStateChangedSync()}),10),o.onNextFile=l.Debouncer.create((function(){o.onNextFileSync()}),100),o.onFilesChanged=l.Debouncer.create((function(){o.trigger("change")}),10),o.file.getDocument().isEditMode()||(o.root.addEventListener("dragover",(function(t){t.preventDefault(),t.stopPropagation(),e.isFileDragEvent(t)&&o.root.setAttribute("data-drag-over","1")})),o.root.addEventListener("dragleave",(function(t){o.root.removeAttribute("data-drag-over"),t.preventDefault(),t.stopPropagation()})),o.root.addEventListener("drop",(function(t){o.root.removeAttribute("data-drag-over"),n.Deferred((function(r){if(e.isFileDragEvent(t)){for(var s,a=[],l=[],c=o.file.getProperty("validation.allowedFileTypes"),p=function(t){return!c||i.FileUtils.isFileType(t,c)},d=0,h=t.dataTransfer.items.length;d<h;d++)if("file"===t.dataTransfer.items[d].kind)try{var f=t.dataTransfer.items[d].webkitGetAsEntry();if(f)if(f.isDirectory)l.push(e.createDirectoryReader(f,a,s||(s=new T(c?"Discovering "+c+"...":"Preparing upload...")),p));else if(f.isFile){var g=t.dataTransfer.items[d].getAsFile();p(g.name)&&a.push(g)}}catch(t){var m=t.dataTransfer.items[d].getAsFile();p(m.name)&&a.push(m)}l.length?n.when.apply(n,l).then((function(){a.length?r.resolve(a):(u.Dialog.alert("No files matching upload filter file types found","Add files"),r.reject(new Error("No files")))})).fail((function(t){u.Dialog.alert("An error occurred while processing your files","Upload canceled")})).always((function(){s&&s.close()})):a.length?r.resolve(a):(u.Dialog.alert("No files matching upload filter file types found","No files added"),r.reject(new Error("No files")))}})).then((function(t){o.file.onUserSelectedMultipleFiles(t)})),t.preventDefault(),t.stopPropagation()}))),o}return s(e,t),e.prototype.getRoot=function(){return this.root},e.prototype.appendFile=function(t){var e=this;if(this.zipVirtualFile)return this;var n=new E(this,t);return n.setTabIndex(this.getTabIndex()),this.root.appendChild(n.getRoot()),this.files.push(n),this.root.setAttribute("data-num-files",String(this.files.length)),setTimeout((function(){e.setFileState(n,v.PENDING)}),0),this.onProgress(),this},e.prototype.removeFileItem=function(t){var e=this.files.indexOf(t);return e>-1&&(t.getRoot().parentNode===this.root&&t.getRoot().parentNode.removeChild(t.getRoot()),this.setFileState(t,v.COMPLETED),this.files.splice(e,1),this.root.setAttribute("data-num-files",String(this.files.length)),this.onProgress(),this.onFilesChanged(),this.trigger("remove-item",t)),t},e.prototype.getTotalUploadSize=function(){for(var t=0,e=0,n=this.files.length;e<n;e++)this.files[e].isError()||(t+=this.files[e].getSize());return t},e.prototype.getTotalUploadedBytes=function(){for(var t=0,e=0,n=this.files.length;e<n;e++)this.files[e].isError()||(t+=this.files[e].getUploadedBytes());return t},e.prototype.onProgressChangedSync=function(){this.trigger("progress")},e.prototype.getCurrentProgress=function(){var t=this.getTotalUploadSize(),e=this.getTotalUploadedBytes();return 0===t?0:Math.round(e/(t/100))},e.prototype.getZipModel=function(){var t=this;return this.uploadZipHandlePromise?this.uploadZipHandlePromise:n.Deferred((function(e){t.file.getUserPasswordIfPasswordIsRequiredForUpload().then((function(r){t.uploadZipHandlePromise=n.Deferred((function(e){var n=t.file.getDocument().getId();if(n){var o={};r&&(o.filePassword=r),a.API.put("files/"+n+"/archive",o).then((function(n){t.zipModel=n,e.resolve(n)})).fail((function(t){u.Dialog.alert("An error occurred on server while initiating download. Please retry. If the problem persists, contact support","Failed to create archive"),e.reject(t)}))}else e.reject(new Error("Form is not saved"))})),t.uploadZipHandlePromise.then((function(t){e.resolve(t)})).fail((function(t){e.reject(t)}))})).fail((function(n){var r=new Error("User did not provided a password to protect it's files"),o=t.file.getLanguagePackForPasswordPromptErrorNotification();u.Dialog.alert(o.MSG_ERROR_UPLOAD_ABORTED_NOTIFICATION_TEXT,o.MSG_ERROR_UPLOAD_ABORTED_NOTIFICATION_TITLE),e.reject(r)}))}))},e.prototype.getFileState=function(t){return this.uploadingFiles.indexOf(t)>-1?v.UPLOADING:this.pendingFiles.indexOf(t)>-1?v.PENDING:v.COMPLETED},e.prototype.setFileState=function(t,e){var n,r=!1;switch(e){case v.COMPLETED:(n=this.uploadingFiles.indexOf(t))>-1&&(this.uploadingFiles.splice(n,1),r=!0),(n=this.pendingFiles.indexOf(t))>-1&&(this.pendingFiles.splice(n,1),r=!0);break;case v.UPLOADING:-1===(n=this.uploadingFiles.indexOf(t))&&(this.uploadingFiles.push(t),t.startUpload(),r=!0),(n=this.pendingFiles.indexOf(t))>-1&&(this.pendingFiles.splice(n,1),r=!0);break;case v.PENDING:(n=this.uploadingFiles.indexOf(t))>-1&&(this.uploadingFiles.splice(n,1),r=!0),-1===(n=this.pendingFiles.indexOf(t))&&(this.pendingFiles.push(t),r=!0);break;default:throw new Error("Illegal file state!")}return r&&this.onStateChangedSync(),this},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){switch(t){case b.UPLOADING:break;case b.STARTING:case b.IDLE:this.onNextFile();break;default:throw new Error("Illegal UploadedFileList state: "+JSON.stringify(t))}this.state!==t&&(this.state=t),this.trigger("state-changed",this.state),this.onProgress()},e.prototype.onStateChangedSync=function(){var t=this.pendingFiles.length,e=this.uploadingFiles.length,n=null;switch(!0){case 0===e&&0===t:n=b.IDLE;break;case 0===e&&t>0:n=b.STARTING;break;case 0===t&&e>0:case t>0&&e>0:n=b.UPLOADING;break;default:throw new Error("Bug while computing onStateChangedSync")}this.setState(n)},e.prototype.onNextFileSync=function(){this.uploadingFiles.length||0!==this.pendingFiles.length&&this.setFileState(this.pendingFiles[0],v.UPLOADING)},e.prototype.getUploadField=function(){return this.file},e.prototype.getAlreadyUploadedFileNames=function(){for(var t=[],e=0,n=this.files.length;e<n;e++)this.files[e].isUploadCompleted()&&t.push(this.files[e].getName());return t},e.prototype.getZipModelSync=function(){return this.zipModel},e.isFileDragEvent=function(t){var e;if(!(t&&t.dataTransfer&&t.dataTransfer.items&&(e=t.dataTransfer.items.length)))return!1;for(var n=0;n<e;n++)if("file"===t.dataTransfer.items[n].kind)return!0;return!1},e.prototype.getTabIndex=function(){return this.tabIndex},e.prototype.setTabIndex=function(t){this.tabIndex=t;for(var e=0,n=this.files.length;e<n;e++)this.files[e].setTabIndex(t);return this},e.prototype.isEmpty=function(){return 0===this.files.length},e.prototype.abortAllAndClear=function(){this.pendingFiles.splice(0,this.pendingFiles.length),this.uploadingFiles.splice(0,this.uploadingFiles.length);for(var t=0,e=this.files.length;t<e;t++)this.files[t].getRoot().parentNode&&this.files[t].getRoot().parentNode.removeChild(this.files[t].getRoot()),this.files[t].remove(!0);return this.files.splice(0,this.files.length),this.uploadZipHandlePromise&&(this.uploadZipHandlePromise.reject(new Error("Aborted")),this.uploadZipHandlePromise=void 0),this.zipModel&&(this.zipModel=void 0),this.root.setAttribute("data-num-files","0"),this.state=b.IDLE,this.trigger("change"),this.trigger("progress"),this.trigger("state-changed"),this},e.prototype.setZIPDownloadURL=function(t){return this.zipVirtualFile&&this.zipVirtualFile.getRoot().parentNode.removeChild(this.zipVirtualFile.getRoot()),t?(this.zipVirtualFile=new I(t),this.root.appendChild(this.zipVirtualFile.getRoot()),this.root.setAttribute("data-has-zip-file","")):(this.root.removeAttribute("data-has-zip-file"),this.zipVirtualFile&&this.zipVirtualFile.getRoot().parentNode&&this.root.removeChild(this.zipVirtualFile.getRoot()),this.zipVirtualFile=void 0),this},e.prototype.isReadOnly=function(){return!!this.zipVirtualFile},e.createDirectoryReader=function(t,e,r,o){return n.Deferred((function(n){r.registerDefer(n);var i=[],s=0;!function t(e){if("."!==e.name.substr(0,1))if(e.isDirectory){s++;var a=e.createReader();r.write("Open folder: "+e.name),a.readEntries((function(e){e.forEach((function(e){t(e)})),s--}),(function(){var t=new Error("Error reading directory "+e.name);console.error(t),n.reject(t),s--}))}else e.isFile&&o(e.name)&&i.push(e)}(t);var a=[];!function t(){var o;"rejected"!==n.state()&&(0===s?(o=i.length,function t(){if("rejected"!==n.state()){var s=i.shift();if(s)r.write("> "+s.name+" ("+a.length+" / "+o+")"),s.file((function(e){a.push(e),setTimeout(t,1)}),(function(){r.write("[ERROR] accessing file "+s.name),n.reject(new Error("Error accessing file: "+s.name))}));else{for(var u=0,l=a.length;u<l;u++)e.push(a[u]);n.resolve()}}}()):setTimeout(t,1e3))}()}))},e.prototype.isBusy=function(){return this.busy},e.prototype.setBusy=function(t){return this.busy=t,this.busy?this.root.setAttribute("data-is-busy",""):this.root.removeAttribute("data-is-busy"),this},e.prototype.getEmptyStateDOMNode=function(){return this.emptyStateDOMNode},e.prototype.getDropStateDOMNode=function(){return this.dropStateDOMNode},e}(o.EventEmitter),w=function(){function t(){}return t.registerFile=function(t){this.files.push(t)},t.getFileByValue=function(t){if(t)for(var e=0,n=this.files.length;e<n;e++)if(this.files[e].getValue()===t)return this.files[e];return null},t.files=[],t}();e.RegisteredUploadFiles=w;var _=function(t){function e(n,r,o){var i=t.call(this,n,r||e.getDefaultProperties(n),o)||this;return i.value="",i.isUploading=!1,i.selected=!1,i.filePassword=null,i.clearable=!1,i.addClass("file"),i.input=document.createElement("input"),i.input.setAttribute("type","text"),i.browse=new C,i.progress=new p.ProgressBar,i.inputAndBrowseButtonAndProgressBarContainer=document.createElement("div"),i.inputAndBrowseButtonAndProgressBarContainer.className="input",i.inputAndBrowseButtonAndProgressBarContainer.appendChild(i.input),i.inputAndBrowseButtonAndProgressBarContainer.appendChild(i.browse.getRoot()),i.inputAndBrowseButtonAndProgressBarContainer.appendChild(i.progress.getRoot()),i.onMultipleSettingChanged(),n.isEditMode()?i.installEditModeEvents():(i.input.setAttribute("readonly","readonly"),i.input.placeholder=i.getProperty("placeholder"),i.input.onkeydown=function(t){var e=t.keyCode||t.charCode;e!==d.KeyboardDriver.SPACE&&e!==d.KeyboardDriver.ENTER&&e!==d.KeyboardDriver.F2||i.browse.click()},i.browse.on("change",(function(t){i.onUserSelectedFile(t)})),i.browse.on("add",(function(t){i.onUserSelectedMultipleFiles(t)})),w.registerFile(i)),i}return s(e,t),e.prototype.setClearable=function(t){var e,r=this;if(t===this.clearable||this.document.isEditMode())return this;this.clearable=!!t,this.clearable?this.clearIcon||(this.clearIcon=document.createElement("div"),this.clearIcon.setAttribute("data-role","clear"),(e=document.createElement("span")).className="vfb vfb-close",this.clearIcon.appendChild(e),this.inputAndBrowseButtonAndProgressBarContainer.appendChild(this.clearIcon),this.inputAndBrowseButtonAndProgressBarContainer.classList.add("allow-clear"),n(this.clearIcon).on("click",(function(){r.clear()}))):this.clearIcon&&(this.clearIcon.parentNode&&(this.clearIcon.parentNode.removeChild(this.clearIcon),this.inputAndBrowseButtonAndProgressBarContainer.classList.remove("allow-clear")),this.clearIcon=void 0)},e.prototype.clear=function(){this.setValue(""),this.isMultiple()&&(this.filesList.abortAllAndClear(),this.filesList.setZIPDownloadURL(void 0)),this.trigger("clear")},e.prototype.onMultipleSettingChanged=function(){this.isMultiple()?(this.addClass("multiple"),this.filesList||(this.filesList=new S(this),this.initListEvents()),this.browse.setMultiple(!0)):(this.removeClass("multiple"),this.filesList&&(this.filesList=void 0),this.browse.setMultiple(!1))},e.prototype.getFieldsLayout=function(){var t;return t=this.isMultiple()?[{domNode:this.inputAndBrowseButtonAndProgressBarContainer,row:0,span:r.InputSpan.FULL},{domNode:this.filesList.getRoot(),row:1,span:r.InputSpan.FULL}]:[{domNode:this.inputAndBrowseButtonAndProgressBarContainer,row:0,span:r.InputSpan.FULL}],this.selected&&t.push({domNode:this.commandsBar.getRoot(),row:t.length,span:r.InputSpan.FULL}),t},e.getDefaultProperties=function(e){var n=f.I18n.translateApplicationText("File","control-defaults"),r=t.addInputProperties.call(this,t.addLabelProperties.call(this,t.addSizeProperties.call(this,{name:"Q",visibility:"",formula:"",placeholder:f.I18n.translateApplicationText("File upload description","control-defaults.file")}),n,e),e);return r.validation={required:!1,allowedFileTypes:"",customErrorMessage:""},r.multiple=!1,r.uploadSettings={passwordProtected:!1,passwordProtectedTexts:""},r},e.prototype.getTranslations=function(){var t=[];if(this.properties.placeholder&&t.push({original:this.properties.placeholder}),this.properties.label.text&&t.push({original:this.properties.label.text}),this.properties.multiple&&(t.push({original:f.I18n.translateApplicationText("Click here to upload multiple files, or simply drag files or folders here","control-defaults.file")}),t.push({original:f.I18n.translateApplicationText("Upload files","control-defaults.file")}),this.hasProperty("uploadSettings.passwordProtected")&&this.getProperty("uploadSettings.passwordProtected")&&this.hasProperty("uploadSettings.passwordProtectedTexts")&&this.getProperty("uploadSettings.passwordProtectedTexts"))){var e=this.getLanguagePack();t.push({context:A.CONTEXT,original:e.MSG_DIALOG_TITLE||A.MSG_DIALOG_TITLE}),t.push({context:A.CONTEXT,original:e.MSG_DIALOG_TEXT||A.MSG_DIALOG_TEXT}),t.push({context:A.CONTEXT,original:e.MSG_DIALOG_OK||A.MSG_DIALOG_OK}),t.push({context:A.CONTEXT,original:e.MSG_DIALOG_CANCEL||A.MSG_DIALOG_CANCEL}),t.push({context:A.CONTEXT,original:e.MSG_DIALOG_GENERATE_PASSWORD||A.MSG_DIALOG_GENERATE_PASSWORD}),t.push({context:A.CONTEXT,original:e.MSG_DIALOG_COPY_PASSWORD||A.MSG_DIALOG_COPY_PASSWORD}),t.push({context:A.CONTEXT,original:e.MSG_TOOLTIP_COPIED_TO_CLIPBOARD||A.MSG_TOOLTIP_COPIED_TO_CLIPBOARD}),t.push({context:A.CONTEXT,original:e.MSG_LABEL_PASSWORD||A.MSG_LABEL_PASSWORD}),t.push({context:A.CONTEXT,original:e.MSG_PLACEHOLDER_PASSWORD||A.MSG_PLACEHOLDER_PASSWORD}),t.push({context:A.CONTEXT,original:e.MSG_LABEL_CONFIRM_PASSWORD||A.MSG_LABEL_CONFIRM_PASSWORD}),t.push({context:A.CONTEXT,original:e.MSG_PLACEHOLDER_CONFIRM_PASSWORD||A.MSG_PLACEHOLDER_CONFIRM_PASSWORD}),t.push({context:A.CONTEXT,original:e.MSG_ERR_PASSWORDS_DONT_MATCH||A.MSG_ERR_PASSWORDS_DONT_MATCH}),t.push({context:A.CONTEXT,original:e.MSG_ERR_PASSWORD_LENGTH_GT_6||A.MSG_ERR_PASSWORD_LENGTH_GT_6}),t.push({context:A.CONTEXT,original:e.MSG_ERROR_UPLOAD_ABORTED_NOTIFICATION_TEXT||A.MSG_ERROR_UPLOAD_ABORTED_NOTIFICATION_TEXT}),t.push({context:A.CONTEXT,original:e.MSG_ERROR_UPLOAD_ABORTED_NOTIFICATION_TITLE||A.MSG_ERROR_UPLOAD_ABORTED_NOTIFICATION_TITLE})}if(this.hasProperty("validation.customErrorMessage")){var n=this.getProperty("validation.customErrorMessage");n&&t.push({original:n,context:"form-fields-errors"})}return t},e.prototype.getTypeId=function(){return g.NodeTypes.FILE},e.prototype.hasLabel=function(){return!0},e.prototype.hasValue=function(){return!0},e.prototype.getNodeName=function(){return"File"},e.prototype.isMultiple=function(){return!!this.hasProperty("multiple")&&!!this.getProperty("multiple")},e.prototype.onUserSelectedMultipleFiles=function(t){var e=this;this.isMultiple()&&this.filesList&&n.Deferred((function(e){for(var n=0,r=t.length,o=0,s=r;o<s;o++)n+=t[o].size;n>10485760||r>10?u.Dialog.confirm("Large upload confirm","You are about to upload "+(1===r?"1 file ":r+" files")+" on server, with a total size of "+i.FileUtils.formatFileSize(n)+". Continue?").then((function(){e.resolve()})).fail((function(){e.reject(new Error("User aborted"))})):e.resolve()})).then((function(){for(var n=0,r=t.length;n<r;n++)e.filesList.appendFile(t[n])}))},e.prototype.setFilePassword=function(t){return this.filePassword=t,this},e.prototype.getFilePassword=function(){return this.filePassword},e.prototype.getUserPasswordIfPasswordIsRequiredForUpload=function(){var t=this;return n.Deferred((function(e){t.hasProperty("uploadSettings.passwordProtected")&&t.getProperty("uploadSettings.passwordProtected")?h.PasswordPrompt.requestPasswordCreation(t.getLanguagePackForPasswordPrompt()).then((function(n){e.resolve(n.getHashedPassword()),t.setFilePassword(n.getPlainPassword())})).fail((function(n){t.setFilePassword(null),e.reject(n)})):e.resolve(null)}))},e.prototype.getLanguagePackForPasswordPrompt=function(t){void 0===t&&(t=!0);var e=this.getLanguagePack(),n={MSG_DIALOG_TITLE:e.MSG_DIALOG_TITLE||A.MSG_DIALOG_TITLE,MSG_DIALOG_TEXT:e.MSG_DIALOG_TEXT||A.MSG_DIALOG_TEXT,MSG_DIALOG_OK:e.MSG_DIALOG_OK||A.MSG_DIALOG_OK,MSG_DIALOG_CANCEL:e.MSG_DIALOG_CANCEL||A.MSG_DIALOG_CANCEL,MSG_DIALOG_COPY_PASSWORD:e.MSG_DIALOG_COPY_PASSWORD||A.MSG_DIALOG_COPY_PASSWORD,MSG_DIALOG_GENERATE_PASSWORD:e.MSG_DIALOG_GENERATE_PASSWORD||A.MSG_DIALOG_GENERATE_PASSWORD,MSG_TOOLTIP_COPIED_TO_CLIPBOARD:e.MSG_TOOLTIP_COPIED_TO_CLIPBOARD||A.MSG_TOOLTIP_COPIED_TO_CLIPBOARD,MSG_ERR_PASSWORDS_DONT_MATCH:e.MSG_ERR_PASSWORDS_DONT_MATCH||A.MSG_ERR_PASSWORDS_DONT_MATCH,MSG_ERR_PASSWORD_LENGTH_GT_6:e.MSG_ERR_PASSWORD_LENGTH_GT_6||A.MSG_ERR_PASSWORD_LENGTH_GT_6,MSG_LABEL_PASSWORD:e.MSG_LABEL_PASSWORD||A.MSG_LABEL_PASSWORD,MSG_LABEL_CONFIRM_PASSWORD:e.MSG_LABEL_CONFIRM_PASSWORD||A.MSG_LABEL_CONFIRM_PASSWORD,MSG_PLACEHOLDER_CONFIRM_PASSWORD:e.MSG_PLACEHOLDER_CONFIRM_PASSWORD||A.MSG_PLACEHOLDER_CONFIRM_PASSWORD,MSG_PLACEHOLDER_PASSWORD:e.MSG_PLACEHOLDER_PASSWORD||A.MSG_PLACEHOLDER_PASSWORD};return t&&(n.MSG_DIALOG_TITLE=f.I18n.translateViewFormText(n.MSG_DIALOG_TITLE,A.CONTEXT),n.MSG_DIALOG_TEXT=f.I18n.translateViewFormText(n.MSG_DIALOG_TEXT,A.CONTEXT),n.MSG_DIALOG_OK=f.I18n.translateViewFormText(n.MSG_DIALOG_OK,A.CONTEXT),n.MSG_DIALOG_CANCEL=f.I18n.translateViewFormText(n.MSG_DIALOG_CANCEL,A.CONTEXT),n.MSG_DIALOG_COPY_PASSWORD=f.I18n.translateViewFormText(n.MSG_DIALOG_COPY_PASSWORD,A.CONTEXT),n.MSG_DIALOG_GENERATE_PASSWORD=f.I18n.translateViewFormText(n.MSG_DIALOG_GENERATE_PASSWORD,A.CONTEXT),n.MSG_TOOLTIP_COPIED_TO_CLIPBOARD=f.I18n.translateViewFormText(n.MSG_TOOLTIP_COPIED_TO_CLIPBOARD,A.CONTEXT),n.MSG_ERR_PASSWORDS_DONT_MATCH=f.I18n.translateViewFormText(n.MSG_ERR_PASSWORDS_DONT_MATCH,A.CONTEXT),n.MSG_ERR_PASSWORD_LENGTH_GT_6=f.I18n.translateViewFormText(n.MSG_ERR_PASSWORD_LENGTH_GT_6,A.CONTEXT),n.MSG_LABEL_PASSWORD=f.I18n.translateViewFormText(n.MSG_LABEL_PASSWORD,A.CONTEXT),n.MSG_LABEL_CONFIRM_PASSWORD=f.I18n.translateViewFormText(n.MSG_LABEL_CONFIRM_PASSWORD,A.CONTEXT),n.MSG_PLACEHOLDER_CONFIRM_PASSWORD=f.I18n.translateViewFormText(n.MSG_PLACEHOLDER_CONFIRM_PASSWORD,A.CONTEXT),n.MSG_PLACEHOLDER_PASSWORD=f.I18n.translateViewFormText(n.MSG_PLACEHOLDER_PASSWORD,A.CONTEXT)),n},e.prototype.getLanguagePack=function(){if(this.hasProperty("uploadSettings.passwordProtectedTexts")){var t=this.getProperty("uploadSettings.passwordProtectedTexts"),e=void 0;try{e=JSON.parse(t)||{}}catch(t){e={}}return e}return{}},e.prototype.getLanguagePackForPasswordPromptErrorNotification=function(t){void 0===t&&(t=!0);var e=this.getLanguagePack(),n={MSG_ERROR_UPLOAD_ABORTED_NOTIFICATION_TITLE:e.MSG_ERROR_UPLOAD_ABORTED_NOTIFICATION_TITLE||A.MSG_ERROR_UPLOAD_ABORTED_NOTIFICATION_TITLE,MSG_ERROR_UPLOAD_ABORTED_NOTIFICATION_TEXT:e.MSG_ERROR_UPLOAD_ABORTED_NOTIFICATION_TEXT||A.MSG_ERROR_UPLOAD_ABORTED_NOTIFICATION_TEXT};return t&&(n.MSG_ERROR_UPLOAD_ABORTED_NOTIFICATION_TITLE=f.I18n.translateViewFormText(n.MSG_ERROR_UPLOAD_ABORTED_NOTIFICATION_TITLE,A.CONTEXT),n.MSG_ERROR_UPLOAD_ABORTED_NOTIFICATION_TEXT=f.I18n.translateViewFormText(n.MSG_ERROR_UPLOAD_ABORTED_NOTIFICATION_TEXT,A.CONTEXT)),n},e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t){return this.value=String(t||""),this.filesList&&(this.filesList.isEmpty()||this.filesList.abortAllAndClear(),this.value&&this.filesList.setZIPDownloadURL(this.value)),this.setDisplayValue(this.value),this.setClearable(!!this.value),this},e.prototype.setDisplayValue=function(t){if(t){var e=t.split("/");this.input.value=e[e.length-1]}else this.input.value=""},e.prototype.listenToUserInput=function(t){var e=this;return this.isMultiple()?this.filesList.on("change.ack",(function(){t.updateValue(e),e.setClearable(!!e.value)})):this.input.onchange=function(){t.updateValue(e),e.setClearable(!!e.value)},this.on("clear",(function(){t.updateValue(e),e.setClearable(!!e.value)})),this},e.prototype.initListEvents=function(){var t=this;this.filesList&&!this.document.isEditMode()&&(this.filesList.on("change",(function(){var e=t.filesList.getAlreadyUploadedFileNames().join(",");t.input.value=e,t.filesList.getZipModelSync()?t.value=e?t.filesList.getZipModelSync().url:"":t.value="",t.filesList.trigger("change.ack")})),this.filesList.on("remove-item",(function(){t.input.focus()})),this.filesList.on("progress",(function(){var e=t.filesList.getCurrentProgress();t.progress.setValue(e)})),this.filesList.on("state-changed",(function(){switch(t.filesList.getState()){case b.IDLE:t.setUploading(!1);break;case b.STARTING:case b.UPLOADING:t.setUploading(!0)}})),this.filesList.getRoot().addEventListener("click",(function(e){(e.target||e.srcElement)===t.filesList.getRoot()&&t.filesList.isEmpty()&&!t.filesList.isReadOnly()&&t.browse.click()}),!0),this.filesList.getRoot().addEventListener("mousedown",(function(e){(e.target||e.srcElement)===t.filesList.getRoot()&&(e.preventDefault(),e.stopPropagation(),t.input.focus())}),!0))},e.prototype.setUploading=function(t){this.isUploading=!!t,this.isUploading?this.addClass("is-uploading"):this.removeClass("is-uploading")},e.prototype.onUserSelectedFile=function(t){var e=this;this.getUserPasswordIfPasswordIsRequiredForUpload().then((function(r){var o=e.getProperty("validation.allowedFileTypes");if(!o||i.FileUtils.isFileType(t,o)){e.setError(null);var s=e.getDocument().getId();if(s){e.setUploading(!0);var l={};null!==r&&(l.filePassword=r),a.API.upload("files/"+s,t,l,(function(t){e.progress.setValue(t)})).then((function(t){e.value=t,e.setDisplayValue(t),n(e.input).trigger("change")})).fail((function(e){a.API.isVirusFileUploadException(e)?u.Dialog.alert(f.I18n.translateApplicationText("File is infected with virus %1.\n\nUpload has been rejected by the server.","control-defaults.file",0,JSON.stringify(e.getMessage())),f.I18n.translateApplicationText("Error uploading file","control-defaults.file")):u.Dialog.alert("Failed to upload "+t.name+". This could be due to a network error or that the server rejected your file","Upload failed")})).always((function(){e.setUploading(!1),e.progress.setValue(0)}))}}else e.setError({code:19,message:"Only "+o+" file types are allowed"})})).fail((function(){var t=new Error("Upload aborted - User did not provided a password for a password protected file upload"),n=e.getLanguagePackForPasswordPromptErrorNotification();console.error(t),u.Dialog.alert(n.MSG_ERROR_UPLOAD_ABORTED_NOTIFICATION_TEXT,n.MSG_ERROR_UPLOAD_ABORTED_NOTIFICATION_TITLE)}))},e.prototype.getRenderedCSS=function(){var t=y.cast(this.properties.label.color),e=y.cast(this.properties.label.font.family),n=y.cast(this.properties.label.font.size),r=y.cast(this.properties.label.font.bold)?"bold":"normal",o=y.cast(this.properties.label.font.italic)?"italic":"normal",i=y.cast(this.properties.label.font.underline)?"underline":"none",s=y.cast(this.properties.label.font.align),a=y.cast(this.properties.input.color),u=y.cast(this.properties.input.backgroundColor),l=y.cast(this.properties.input.borderColor),c=y.cast(this.properties.input.borderWidth),p=y.cast(this.properties.input.borderRadius),d=y.cast(this.properties.input.borderStyle),h=y.cast(this.properties.input.font.family),f=y.cast(this.properties.input.font.size),g=y.cast(this.properties.input.font.bold)?"bold":"normal",m=y.cast(this.properties.input.font.italic)?"italic":"normal",v=y.cast(this.properties.input.font.underline)?"underline":"none",b=y.cast(this.properties.input.font.align),C=this.document.getProperty("theme.selection.borderColor");return"\n            > label {\n                color: "+t+";\n                font-size: "+n+'px;\n                font-family: "'+e+'";\n                font-weight: '+r+";\n                font-style: "+o+";\n                text-decoration: "+i+";\n                text-align: "+s+";\n            }\n            \n            [data-role=clear] {\n                color: "+a+";\n            }\n            \n            input[type=text], [data-role=file-list] {\n                color: "+a+";\n                background-color: "+u+";\n                border: "+c+" "+d+" "+l+";\n                border-radius: "+p+";\n                font-weight: "+g+";\n                font-style: "+m+";\n                text-decoration: "+v+";\n                text-align: "+b+";\n                font-size: "+f+'px;\n                font-family: "'+h+'";\n                &:hover,\n                &:focus {\n                    border-color: '+C+";\n                }\n                &:focus {\n                    background-color: "+this.document.getProperty("theme.selection.backgroundColor")+";\n                }\n                \n                &:focus + [data-role=browse-file] {\n                    border-color: "+C+";\n                }\n            }\n            \n            &:hover {\n                \n                input[type=text],\n                [data-role=file-list],\n                [data-role=browse-file],\n                [data-role=clear] {\n                    border-color: "+C+";\n                }\n                \n            }\n            \n            [data-role=browse-file] {\n                color: "+a+";\n                background-color: "+u+";\n                border-width: "+c+" "+c+" "+c+" 0;\n                border-style: "+d+";\n                border-radius: 0 "+p+" "+p+" 0;\n                border-color: "+l+";\n            }\n            \n            [data-role=clear] {\n                color: "+a+";\n                background-color: "+u+";\n                border-width: "+c+" 0 "+c+" 0;\n                border-style: "+d+";\n                border-color: "+l+";\n            }\n        "},e.prototype.installEditModeEvents=function(){var t=this;this.input.value=this.getProperty("placeholder")||"",this.input.oninput=function(){t.setProperty("placeholder",t.input.value,t),t.input.placeholder=t.input.value},this.input.onfocus=function(){setTimeout((function(){t.getDocument().getSelection().getItem()!==t&&t.getDocument().getSelection().set(t,r.SelectionInputContext.INPUT,t.input)}),0)}},e.prototype.onSelect=function(){this.selected||(this.selected=!0,t.prototype.onSelect.call(this),this.commandsBar=new m.FileUploadCommandsBar(this),this.render())},e.prototype.onDeselect=function(){this.selected&&(this.selected=!1,t.prototype.onDeselect.call(this),this.commandsBar=void 0,this.render())},e.prototype.performTranslation=function(){this.labelDOMNode&&(this.labelDOMNode.textContent=f.I18n.translateViewFormText(this.getProperty("label.text"),this.getLabelI18nContext())),this.input&&(this.input.placeholder=f.I18n.translateViewFormText(this.getProperty("placeholder"))),this.filesList&&(this.filesList.getEmptyStateDOMNode().textContent=f.I18n.translateViewFormText(f.I18n.translateApplicationText("Click here to upload multiple files, or simply drag files or folders here","control-defaults.file")),this.filesList.getDropStateDOMNode().innerHTML='<span class="vfb vfb-file"></span> '+c.Strings.toHTML(f.I18n.translateViewFormText(f.I18n.translateApplicationText("Upload files","control-defaults.file"))))},e.prototype.supportsLabelInsideRendering=function(){return!0},e}(r.Input);e.Upload=_}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(0),n(2),n(11),n(8),n(14),n(83)],void 0===(o=function(t,e,n,r,o,i,s,a){Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(){}return t.MSG_DIALOG_TITLE="Create password",t.MSG_DIALOG_TEXT="Please provide a password",t.MSG_LABEL_PASSWORD="Password",t.MSG_PLACEHOLDER_PASSWORD="Minimum 6 characters",t.MSG_LABEL_CONFIRM_PASSWORD="Confirm password",t.MSG_PLACEHOLDER_CONFIRM_PASSWORD="Just to be sure...",t.MSG_DIALOG_OK="Ok",t.MSG_DIALOG_CANCEL="Cancel",t.MSG_DIALOG_GENERATE_PASSWORD="Generate Password",t.MSG_DIALOG_COPY_PASSWORD="Copy Password",t.MSG_TOOLTIP_COPIED_TO_CLIPBOARD="Copied to clipboard",t.MSG_ERR_PASSWORDS_DONT_MATCH="Passwords don't match",t.MSG_ERR_PASSWORD_LENGTH_GT_6="Password length must be at least 6 characters",t}();e.PasswordPromptTranslatedUITextResources=u;var l=function(){function t(t,e){this.hash=t,this.plain=e}return t.prototype.getPlainPassword=function(){return this.plain},t.prototype.getHashedPassword=function(){return this.hash},t.prototype.toString=function(){return this.getHashedPassword()},t}();e.PasswordResult=l;var c=function(){function t(){}return t.requestPasswordCreation=function(t){var e=t||{MSG_DIALOG_TITLE:u.MSG_DIALOG_TITLE,MSG_DIALOG_TEXT:u.MSG_DIALOG_TEXT,MSG_LABEL_PASSWORD:u.MSG_LABEL_PASSWORD,MSG_PLACEHOLDER_PASSWORD:u.MSG_PLACEHOLDER_PASSWORD,MSG_LABEL_CONFIRM_PASSWORD:u.MSG_LABEL_CONFIRM_PASSWORD,MSG_PLACEHOLDER_CONFIRM_PASSWORD:u.MSG_PLACEHOLDER_CONFIRM_PASSWORD,MSG_DIALOG_OK:u.MSG_DIALOG_OK,MSG_DIALOG_CANCEL:u.MSG_DIALOG_CANCEL,MSG_DIALOG_GENERATE_PASSWORD:u.MSG_DIALOG_GENERATE_PASSWORD,MSG_DIALOG_COPY_PASSWORD:u.MSG_DIALOG_COPY_PASSWORD,MSG_TOOLTIP_COPIED_TO_CLIPBOARD:u.MSG_TOOLTIP_COPIED_TO_CLIPBOARD,MSG_ERR_PASSWORDS_DONT_MATCH:u.MSG_ERR_PASSWORDS_DONT_MATCH,MSG_ERR_PASSWORD_LENGTH_GT_6:u.MSG_ERR_PASSWORD_LENGTH_GT_6};return e.MSG_DIALOG_TITLE=e.MSG_DIALOG_TITLE||u.MSG_DIALOG_TITLE,e.MSG_DIALOG_TEXT=e.MSG_DIALOG_TEXT||u.MSG_DIALOG_TEXT,e.MSG_LABEL_PASSWORD=e.MSG_LABEL_PASSWORD||u.MSG_LABEL_PASSWORD,e.MSG_PLACEHOLDER_PASSWORD=e.MSG_PLACEHOLDER_PASSWORD||u.MSG_PLACEHOLDER_PASSWORD,e.MSG_LABEL_CONFIRM_PASSWORD=e.MSG_LABEL_CONFIRM_PASSWORD||u.MSG_LABEL_CONFIRM_PASSWORD,e.MSG_PLACEHOLDER_CONFIRM_PASSWORD=e.MSG_PLACEHOLDER_CONFIRM_PASSWORD||u.MSG_PLACEHOLDER_CONFIRM_PASSWORD,e.MSG_DIALOG_OK=e.MSG_DIALOG_OK||u.MSG_DIALOG_OK,e.MSG_DIALOG_CANCEL=e.MSG_DIALOG_CANCEL||u.MSG_DIALOG_CANCEL,e.MSG_DIALOG_GENERATE_PASSWORD=e.MSG_DIALOG_GENERATE_PASSWORD||u.MSG_DIALOG_GENERATE_PASSWORD,e.MSG_DIALOG_COPY_PASSWORD=e.MSG_DIALOG_COPY_PASSWORD||u.MSG_DIALOG_COPY_PASSWORD,e.MSG_TOOLTIP_COPIED_TO_CLIPBOARD=e.MSG_TOOLTIP_COPIED_TO_CLIPBOARD||u.MSG_TOOLTIP_COPIED_TO_CLIPBOARD,e.MSG_ERR_PASSWORDS_DONT_MATCH=e.MSG_ERR_PASSWORDS_DONT_MATCH||u.MSG_ERR_PASSWORDS_DONT_MATCH,e.MSG_ERR_PASSWORD_LENGTH_GT_6=e.MSG_ERR_PASSWORD_LENGTH_GT_6||u.MSG_ERR_PASSWORD_LENGTH_GT_6,n.Deferred((function(t){var u,c=Math.max(document.documentElement.clientWidth,window.innerWidth||0),p=Math.max(document.documentElement.clientHeight,window.innerHeight||0),d=String(Math.max(0,Math.round(c/2)-250))+"px",h=String(Math.max(0,Math.round(p/2)-250))+"px",f=new r.Dialog({title:e.MSG_DIALOG_TITLE,width:"500px",height:"500px",left:d,top:h,modal:!0,style:r.DialogStyle.FLAT_COLOR,closable:!0,onClose:function(){t.reject(new Error("User aborted"))},movable:!0,buttons:[{caption:e.MSG_DIALOG_GENERATE_PASSWORD,classNames:"btn btn-primary",callback:function(){u()&&u()}},{caption:e.MSG_DIALOG_CANCEL,classNames:"btn btn-secondary",callback:function(){f.close(),t.reject(new Error("User canceled"))}}]});f.getRoot().setAttribute("data-dialog-role","password-create-dialog");var g=new o.Loader(f.getBody());g.addLoadRequest(),i.NetworkCache.get("/static/templates/ui-v2/ui-controls/password-create-dialog.html").then((function(r){g.removeLoadRequest(),f.getBody().innerHTML=s.Handlebars.to_html(r,{MSG_DIALOG_TEXT:e.MSG_DIALOG_TEXT,MSG_LABEL_PASSWORD:e.MSG_LABEL_PASSWORD,MSG_PLACEHOLDER_PASSWORD:e.MSG_PLACEHOLDER_PASSWORD,MSG_LABEL_CONFIRM_PASSWORD:e.MSG_LABEL_CONFIRM_PASSWORD,MSG_PLACEHOLDER_CONFIRM_PASSWORD:e.MSG_PLACEHOLDER_CONFIRM_PASSWORD});var o=f.getBody().querySelector("[name=prompt-pwd]"),i=f.getBody().querySelector("[name=confirm-pwd]"),c=f.getBody().querySelector(".error-placeholder"),p=null,d=null;n(f.getBody()).find("form").on("submit",(function(e){e.preventDefault(),e.stopPropagation(),null!==p&&(f.close(),t.resolve(new l(p,d)))})),u=function(){for(var n="Na!bAXSPI@cB#dC$eD%Jf^g&Fh*j1k2YTlE3Um4nM56Op7q8GVrZ9s0t-uHW=Kv.w|Lx/yRzQ".split(""),r=n.length,s="",a=8+Math.round(6*Math.random()),u=0;u<a;u++)s=s.concat(n[Math.floor(Math.random()*r)]||"");o.value=i.value=s,h(),o.type="text",f.getRoot().setAttribute("data-has-generated-password","1"),f.setButtons([{caption:e.MSG_DIALOG_OK,classNames:"btn btn-primary",callback:function(){f.close(),t.resolve(new l(p,d))}},{caption:e.MSG_DIALOG_COPY_PASSWORD,classNames:"btn btn-scondary",callback:function(){o.select(),document.execCommand("copy")}},{caption:e.MSG_DIALOG_CANCEL,classNames:"btn btn-secondary",callback:function(){f.close(),t.reject(new Error("User canceled"))}}])};var h=function(){var n=o.value,r=i.value,s=null;d=null,o.type="password",f.getRoot().removeAttribute("data-has-generated-password"),n!==r?s=e.MSG_ERR_PASSWORDS_DONT_MATCH:n&&n.length<6&&(s=e.MSG_ERR_PASSWORD_LENGTH_GT_6),s?(f.getRoot().setAttribute("data-has-errors",""),c.textContent=s,p=null,f.setButtons([{caption:e.MSG_DIALOG_GENERATE_PASSWORD,classNames:"btn btn-primary",callback:function(){u()&&u()}},{caption:e.MSG_DIALOG_CANCEL,classNames:"btn btn-secondary",callback:function(){f.close(),t.reject(new Error("User canceled"))}}])):(f.getRoot().removeAttribute("data-has-errors"),p=a.Hash.MD5(d=n),f.setButtons([{caption:e.MSG_DIALOG_OK,classNames:"btn btn-primary",callback:function(){f.close(),t.resolve(new l(p,d))}},{caption:e.MSG_DIALOG_CANCEL,classNames:"btn btn-secondary",callback:function(){f.close(),t.reject(new Error("User canceled"))}}]))};n(f.getBody()).on("input","input[type=password], input[type=text]",(function(){h()}))})).fail((function(e){g.removeLoadRequest(),f.close();var n=new Error("Error downloading password-create-dialog.html ui resource");r.Dialog.alert("An error occurred while opening the password creation dialog. Please retry. If the problem persists, contact support","Failed to open dialog"),t.reject(n)}))}))},t}();e.PasswordPrompt=c}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(0),n(3),n(12),n(68),n(4),n(15),n(49)],void 0===(o=function(t,e,n,r,o,i,a,u,l){Object.defineProperty(e,"__esModule",{value:!0});var c=function(t){function e(n,r){var i=t.call(this)||this;return i.controls={},i.controlNamesToControlIdCache={},i.controlDefaultValues={},i.scriptingEnvironment=n,i.controlsVisibilityState=r,i.computeFormulaValues=o.Debouncer.create((function(){i.computeFormulaValuesInSyncMode()}),20),i.on(e.EVENT_CHANGE,(function(){i.computeFormulaValues()})),i}return s(e,t),e.prototype.unregisterNode=function(t){if(!t.hasProperty("name"))return this;var e=t.getId();return e&&void 0!==this.controls[e]&&delete this.controls[e],this},e.prototype.registerNode=function(t){if(!t.hasProperty("name"))return this;var e=t.getProperty("name"),n=t.getId(),r=t.getValue(),o=t.hasProperty("formula")?t.getProperty("formula"):null,s=null;try{s=o?i.ScriptingEngine.compile(o).getExpression():null}catch(t){console.error("Failed to compute node value expression!"),console.error(t)}return this.controls[n]={node:t,name:e,value:r,originalValue:r,valueExpression:s?s.setTargetField(t):null},null===l.EditSubmissionManager.getActionType()&&void 0!==this.controlDefaultValues[this.controls[n].name]&&""!==this.controlDefaultValues[this.controls[n].name]&&(this.controls[n].originalValue=this.controlDefaultValues[this.controls[n].name]),this},e.prototype.resetCache=function(){this.controlNamesToControlIdCache={}},e.prototype.getControlIdByControlName=function(t,e){if(void 0===e&&(e=null),null===e){if(void 0!==this.controlNamesToControlIdCache[t])return this.controlNamesToControlIdCache[t];var n=null;for(var r in this.controls)if(this.controls.hasOwnProperty(r)&&this.controls[r].node&&this.controls[r].node.hasProperty("name")&&this.controls[r].node.getProperty("name")===t){n=r;break}return this.controlNamesToControlIdCache[t]=n}n=null;for(var r in this.controls)if(this.controls.hasOwnProperty(r)&&this.controls[r].node&&this.controls[r].node.hasProperty("name")&&this.controls[r].node.getProperty("name")===t&&this.controls[r].node.getRepeatedIndex()===e){n=r;break}return n},e.prototype.updateValue=function(t){if(!t)return this;var n=t.getValue(),r=t.getId();return this.controls[r]&&this.controls[r].value!==n&&(this.controls[r].value=t.getValue(),this.controls[r].node.setError(null),this.controls[r].node.onFilledStateChanged(this.controls[r].value),this.trigger(e.EVENT_CHANGE,t,this.controls[r].value)),this},e.prototype.setValue=function(t,e,n){if(void 0===n&&(n=null),this.controls[t]&&this.controls[t].node.getRepeatedIndex()===n)if(this.controls[t].valueExpression){var r=this.controls[t].valueExpression.compute(this.scriptingEnvironment);this.controls[t].value!==r?(this.controls[t].node.setValue(r),this.controls[t].node.setError(null),this.controls[t].value=r):this.controls[t].node.setValue(r),this.controls[t].node.onFilledStateChanged(r)}else this.controls[t].node.setValue(e),this.controls[t].value=this.controls[t].node.getValue(),this.controls[t].node.onFilledStateChanged(this.controls[t].value);return this},e.prototype.getValue=function(t,e){if(this.controls[t])return e?this.controls[t].node.getSubFieldValue(e):this.controls[t].value},e.prototype.reset=function(){if(this.controls)for(var t in this.controls)this.controls.hasOwnProperty(t)&&this.setValue(t,this.controls[t].originalValue,this.controls[t].node.getRepeatedIndex());this.trigger(e.EVENT_RESET)},e.prototype.getFormData=function(t){var e,n,r={},o=null;if(t){var i=t.getDocument().getBodies()[u.Document.BODY_HEADER_INDEX]?t.getDocument().getBodies()[u.Document.BODY_HEADER_INDEX].flatten():[],s=t.getDocument().getBodies()[u.Document.BODY_FOOTER_INDEX]?t.getDocument().getBodies()[u.Document.BODY_FOOTER_INDEX].flatten():[];o=(e=(n=t.flatten()).concat.apply(n,i)).concat.apply(e,s)}for(var a in this.controls)if(this.controls.hasOwnProperty(a)&&this.controls.propertyIsEnumerable(a)&&(null===o||-1!==o.indexOf(this.controls[a].node))){var l=this.controls[a].name,c=this.controls[a].value,p=this.controls[a].node.getRepeatedIndex();null!==p&&(l=l.concat("["+p+"]")),void 0!==r[l]?Array.isArray(r[l])?r[l].push(c):r[l]=[r[l],c]:r[l]=c}return r},e.prototype.setFormData=function(t){for(var e in t=t||{})if(t.propertyIsEnumerable(e)&&t.hasOwnProperty(e)){var n=this.parseControlName(e);this.setValue(this.getControlIdByControlName(e),t[e],n.repeatedIndex)}return this},e.prototype.parseControlName=function(t){var e;return(e=/^([^\[]+)\[([\d]+)]$/.exec(t))?{name:e[1],repeatedIndex:parseInt(e[2])}:{name:t,repeatedIndex:null}},e.prototype.computeFormulaValuesInSyncMode=function(){for(var t in this.controls)if(this.controls.hasOwnProperty(t)&&this.controls[t].valueExpression){var n=this.controls[t].valueExpression.compute(this.scriptingEnvironment);n!==this.controls[t].value&&(this.setValue(t,n,this.controls[t].node.getRepeatedIndex()),this.trigger(e.EVENT_COMPUTED),this.computeFormulaValues())}},e.prototype.loadSubmissionFromFormData=function(t){var r=this;if(t){for(var o in t)t.hasOwnProperty(o)&&t.propertyIsEnumerable(o)&&this.ensureRepeatedFieldsAreRepeatedForFormDataKey(o);setTimeout((function(){for(var o in t)t.hasOwnProperty(o)&&t.propertyIsEnumerable(o)&&r.loadFieldValueFromFormDataKey(o,t[o]);r.controlsVisibilityState.updateInSyncMode(),setTimeout((function(){n(window).trigger("resize"),r.trigger(e.EVENT_LOADED_SUBMISSION)}),100)}),100)}},e.prototype.loadFieldValueFromFormDataKey=function(t,e){if(t){var n,r=null;(n=/\[([\d]+)]$/.exec(t))&&(r=parseInt(n[1]),t=t.substr(0,t.length-n[0].length));var o=this.getControlIdByControlName(t,r);o&&this.setValue(o,e,r)}},e.prototype.getDocumentNodeById=function(t){return this.controls[t]&&this.controls[t].node?this.controls[t].node:null},e.getRepeatedNodeOfNode=function(t){for(var e=t.getParent();e&&-1===[a.NodeTypes.DOCUMENT,a.NodeTypes.PAGE,a.NodeTypes.HEADER,a.NodeTypes.FOOTER].indexOf(e.getTypeId());){if(e.getTypeId()===a.NodeTypes.REPEATABLE)return e;e=e.getParent()}return null},e.prototype.ensureRepeatedFieldsAreRepeatedForFormDataKey=function(t){if(t){var n,r=null;if(n=/\[([\d]+)]$/.exec(t)){r=parseInt(n[1]),t=t.substr(0,t.length-n[0].length);var o=this.getControlIdByControlName(t);if(o){var i=this.getDocumentNodeById(o);if(i){var s=e.getRepeatedNodeOfNode(i);s&&s.setMinRepeatedGroups(r+1)}}}}},e.prototype.setDefaultValues=function(t){this.controlDefaultValues=t},e.prototype.hasDefaultValues=function(){return this.controlDefaultValues&&Object.keys(this.controlDefaultValues).length>0},e.EVENT_CHANGE="change",e.EVENT_RESET="reset",e.EVENT_LOADED_SUBMISSION="submission.loaded",e.EVENT_COMPUTED="rules-computation",e}(r.EventEmitter);e.SubmissionModel=c}.apply(e,r))||(t.exports=o)},,,,,function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(23)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){var e=t.call(this)||this;return e.setClass("ui ui-text"),e.update(),e}return s(e,t),e.prototype.setIcon=function(t){return this.icon=t,this.update(),this},e.prototype.getIcon=function(){return this.icon||null},e.prototype.getText=function(){return this.text},e.prototype.setText=function(t){return this.text=t,this.update(),this},e.prototype.update=function(){for(;this.root.firstChild;)this.root.removeChild(this.root.firstChild);this.icon&&(this.root.appendChild(document.createElement("span")).className="vfb vfb-"+this.icon),this.text&&this.root.appendChild(document.createTextNode(this.text))},e}(n.NodeAbstract);e.TextNode=r}.apply(e,r))||(t.exports=o)},function(t,e,n){var r;void 0===(r=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.FONTS=["Roboto","Open Sans","Lato","Montserrat","Roboto Condensed","Source Sans Pro","Oswald","Raleway","Roboto Mono","Merriweather","Roboto Slab","Poppins","Noto Sans","PT Sans","Ubuntu","Playfair Display","Open Sans Condensed","Muli","PT Serif","Lora","Slabo 27px","Nunito","Titillium Web","Fira Sans","Rubik","Noto Serif","Nanum Gothic","Noto Sans JP","Work Sans","Inconsolata","Quicksand","Arimo","PT Sans Narrow","Noto Sans KR","Nunito Sans","Dosis","Oxygen","Heebo","Libre Franklin","Bitter","Libre Baskerville","Karla","Cabin","Crimson Text","Hind","Josefin Sans","Fjalla One","Indie Flower","Anton","Source Code Pro","Lobster","Noto Sans TC","Barlow","Mukta","Abel","Arvo","Dancing Script","Source Serif Pro","Varela Round","Merriweather Sans","Exo 2","Abril Fatface","Teko","Asap","Acme","Bree Serif","Questrial","Hind Siliguri","Overpass","Archivo Narrow","Cairo","EB Garamond","Yanone Kaffeesatz","Exo","Comfortaa","Barlow Condensed","Kanit","Maven Pro","IBM Plex Sans","Fira Sans Condensed","Amatic SC","Righteous","Catamaran","Signika","Domine","Ubuntu Condensed","Play","PT Sans Caption","Assistant","Monda","Crete Round","Cinzel","Vollkorn","Patua One","Ropa Sans","News Cycle","Prompt","Francois One","Permanent Marker","Rajdhani","Cuprum","ABeeZee","Caveat","Cormorant Garamond","Courgette","Noticia Text","Alegreya Sans","Kalam","Fira Sans Extra Condensed","Rokkitt","Amiri","Martel","Alfa Slab One","Pathway Gothic One","Old Standard TT","Alegreya","Tinos","Orbitron","Zilla Slab","Barlow Semi Condensed","Cardo","Noto Sans SC","Hind Madurai","Fredoka One","Quattrocento Sans","Archivo Black","Istok Web","Nanum Myeongjo","Cookie","Advent Pro","Tajawal","Lobster Two","Cantarell","Didact Gothic","Luckiest Guy","Patrick Hand","Concert One","Volkhov","Poiret One","Sacramento","Frank Ruhl Libre","M PLUS 1p","Changa","Quattrocento","Vidaloka","Economica","Gothic A1","BenchNine","IBM Plex Serif","Passion One","Noto Serif JP","Neuton","Special Elite","Bangers","Prata","Russo One","Handlee","Hind Guntur","Sanchez","Gudea","Hind Vadodara","Josefin Slab","Montserrat Alternates","Ruda","Neucha","Lalezar","Chivo","Yantramanav","Ultra","Arapey","Viga","Amaranth","Playfair Display SC","Philosopher","Pontano Sans","Yrsa","Sawarabi Mincho","Cabin Condensed","Tangerine","Monoton","Saira Extra Condensed","Marck Script","Paytone One","Architects Daughter","Sunflower","Varela","Armata","Parisienne","Baloo","Unica One","Gochi Hand","PT Mono","Yellowtail","Spectral","Alice","Khand","Hammersmith One","Schoolbell","Sigmar One","Taviraj","Archivo","Enriqueta","Saira","Gentium Basic","Signika Negative","Audiowide","Karma","M PLUS Rounded 1c","Actor","Scada","Yeseva One","Adamina","Gentium Book Basic","El Messiri","Pragati Narrow","Julius Sans One","Press Start 2P","Asap Condensed","Pridi","Sorts Mill Goudy","Allura","Staatliches","Glegoo","Merienda","Fugaz One","Kreon","Playball","Sintony","Ubuntu Mono","Cantata One","Cousine","Oleo Script","Rasa","Lusitana","Fauna One","Palanquin","Damion","Sarala","Nothing You Could Do","Mitr","Antic Slab","Covered By Your Grace","Carter One","Nanum Pen Script","Boogaloo","PT Serif Caption","Jura","Unna","Cormorant","Abhaya Libre","Alegreya Sans SC","Allerta","Mr Dafoe","Arbutus Slab","Antic","Marcellus","Rambla","Electrolize","Sarabun","Nanum Gothic Coding","Rubik Mono One","Marmelad","Alex Brush","Tenor Sans","Saira Semi Condensed","Rancho","Khula","Noto Serif SC","Bevan","Forum","Pinyon Script","Spinnaker","Chewy","Alef","Saira Condensed","Bowlby One SC","Share Tech Mono","Lustria","Sawarabi Gothic","Basic","Reenie Beanie","Coda","Leckerli One","Marvel","Italianno","Squada One","Caveat Brush","Fredericka the Great","Michroma","Reem Kufi","Average","Molengo","Niconne","Lilita One","Chakra Petch","Aclonica","Nobile","Magra","Fira Mono","Lateef","Black Ops One"],t}();e.GoogleWebfonts_200x20=n}.apply(e,[n,e]))||(t.exports=r)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(23)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){var e=t.call(this)||this;return e.addClass("list-header"),e}return s(e,t),e.prototype.setText=function(t){return this.root.textContent=String(t||""),this},e}(n.NodeAbstract);e.ListHeader=r}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(0),n(5)],void 0===(o=function(t,e,n,r){Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.getFontsList=function(){return n.Deferred((function(t){r.API.get("ui/google/webfonts").then((function(e){t.resolve(e)})).fail((function(e){t.reject(e)}))}))},t.createFontLink=function(t){if(void 0!==this.loadedFontStyles[t])return this.loadedFontStyles[t];var e=document.createElement("link");return e.setAttribute("rel","stylesheet"),e.setAttribute("href","//fonts.googleapis.com/css?family="+encodeURIComponent(t)),this.loadedFontStyles[t]=e,e},t.getLoadedFontsList=function(){var t=[];for(var e in this.loadedFonts)this.loadedFonts.hasOwnProperty(e)&&t.push(e);return t},t.loadFont=function(t,e){return t&&"string"==typeof t?this.isSystemFont(t)?t:(e=void 0!==e&&e,this.loadedFonts[t]?(!1===e&&(this.loadedFonts[t].tempLoaded=!1),t):(this.loadedFonts[t]={tempLoaded:e,family:t,linkDOMNode:this.createFontLink(t)},document.getElementsByTagName("head")[0].appendChild(this.loadedFonts[t].linkDOMNode),t)):t},t.unloadTempLoadedFonts=function(){var t=document.getElementsByTagName("head")[0];for(var e in this.loadedFonts)this.loadedFonts.hasOwnProperty(e)&&this.loadedFonts.propertyIsEnumerable(e)&&this.loadedFonts[e].tempLoaded&&(this.loadedFonts[e].linkDOMNode.parentNode&&t.removeChild(this.loadedFonts[e].linkDOMNode),delete this.loadedFonts[e])},t.getSystemFonts=function(){return["Arial","Arial Black","Bookman","Comic Sans","Courier","Courier New","Garmond","Georgia","Helvetica","Impact","Palatino","Times","Times New Roman","Trebuchet","Verdana","Roboto"]},t.isSystemFont=function(t){return!(!t||"string"!=typeof t)&&["arial","arial black","bookman","comic sans","courier","courier new","garmond","georgia","helvetica","impact","palatino","times","times new roman","trebuchet","verdana","roboto"].indexOf(t.toLowerCase())>-1},t.unloadTempLoadedFontsList=function(t){for(var e=0,n=t.length;e<n;e++)this.loadedFonts[t[e]]&&this.loadedFonts[t[e]].tempLoaded&&(this.loadedFonts[t[e]].linkDOMNode.parentNode&&this.loadedFonts[t[e]].linkDOMNode.parentNode.removeChild(this.loadedFonts[t[e]].linkDOMNode),delete this.loadedFonts[t[e]])},t.loadedFonts={},t.loadedFontStyles={},t}();e.FontsManager=o}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(23)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){var e=t.call(this)||this;return e.setClass("ui ui-ribbon-vertical-separator"),e}return s(e,t),e}(n.NodeAbstract);e.VerticalSeparator=r}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r;void 0===(r=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){this.nodeType=Node.TEXT_NODE,this.parentNode=null};e.VirtualNode=n}.apply(e,[n,e]))||(t.exports=r)},,function(t,e,n){"use strict";var r;void 0===(r=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.isEqual=function(t,e,n){var r=t.compute(n),o=e.compute(n),i=Array.isArray(r),s=Array.isArray(o),a=!0;switch("string"==typeof r&&(r=r.toLowerCase()),"string"==typeof o&&(o=o.toLowerCase()),!0){case r instanceof Date&&o instanceof Date:a=r.getTime()===o.getTime();break;case i&&s:if(r.length!==o.length)a=!1;else for(var u=0,l=r.length;u<l;u++)if(-1===o.indexOf(r[u])){a=!1;break}break;case!i&&s:a=o.indexOf(r)>-1;break;case i&&!s:a=r.indexOf(o)>-1;break;default:a=r==o}return a},t.isEqualComputedAWithExpressionB=function(t,e,n){var r=t,o=e.compute(n),i=Array.isArray(r),s=Array.isArray(o),a=!0;switch("string"==typeof r&&(r=r.toLowerCase()),"string"==typeof o&&(o=o.toLowerCase()),!0){case r instanceof Date&&o instanceof Date:a=r.getTime()===o.getTime();break;case i&&s:if(r.length!==o.length)a=!1;else for(var u=0,l=r.length;u<l;u++)if(-1===o.indexOf(r[u])){a=!1;break}break;case!i&&s:a=o.indexOf(r)>-1;break;case i&&!s:a=r.indexOf(o)>-1;break;default:a=r==o}return a},t.isDifferent=function(t,e,n){var r=t.compute(n),o=e.compute(n),i=Array.isArray(r),s=Array.isArray(o),a=!0;switch("string"==typeof r&&(r=r.toLowerCase()),"string"==typeof o&&(o=o.toLowerCase()),!0){case r instanceof Date&&o instanceof Date:a=r.getTime()!==o.getTime();break;case i&&s:if(r.length!==o.length)a=!1;else for(var u=0,l=r.length;u<l;u++)if(-1===o.indexOf(r[u])){a=!1;break}break;case!i&&s:a=o.indexOf(r)>-1;break;case i&&!s:a=r.indexOf(o)>-1;break;default:a=r==o}return!a},t}();e.FormulaUtils=n}.apply(e,[n,e]))||(t.exports=r)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(37),n(74)],void 0===(o=function(t,e,n,r){Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e,r,o){var i=t.call(this,e)||this;return i.type=n.EInvoiceItemType.PRODUCT,i.productField=r,i.choice=o,i}return s(e,t),e.prototype.isRemovable=function(){return!0},e.prototype.getChoice=function(){return this.choice},e.prototype.serialize=function(){var t=this.productField.getValue(this.choice);return{type:this.getItemType(),name:this.productField.getProductName()+(null===this.choice?"":" ("+this.choice+")"),choice:this.getChoice(),valueFormula:String(this.productField.getUnitTypeValue()),valueType:n.EInvoiceItemValueType.FIXED,quantityFormula:t?String(t):null}},e.prototype.getComputedUnitPrice=function(){return this.productField.getUnitTypeValue()},e.prototype.getQuantityFormula=function(){return String(this.productField.getValue())},e.prototype.setQuantityFormula=function(t){return this},e.prototype.getComputedQuantity=function(){return this.productField.getValue(this.choice)},e.prototype.setComputedQuantity=function(t){return this},e.prototype.incrementSubtotal=function(t){var e=t,n=Math.max(this.productField.getValue(this.choice),0),r=this.productField.getUnitTypeValue();return 0===r&&0!==n?null:e+=n*r},e.prototype.setComputedValue=function(t){return this},e.prototype.getComputedValue=function(){return Math.max(0,this.productField.getUnitTypeValue())},e.prototype.getItemName=function(){return this.productField.getProductName()},e.prototype.getValueType=function(){return n.EInvoiceItemValueType.FIXED},e.prototype.getProductControlId=function(){return this.productField.getId()},e.prototype.getProductPictureURL=function(){return this.productField.getProperty("product.picture")||null},e.prototype.getProductUnitType=function(){return this.productField.getProperty("product.unitName")||null},e}(r.InvoiceRow);e.InvoiceRowDynamicProduct=o}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(74),n(37)],void 0===(o=function(t,e,n,r){Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e,n){var o=t.call(this,e)||this;return o.type=r.EInvoiceItemType.PRODUCT,o.vdProduct=n,o}return s(e,t),e.prototype.isRemovable=function(){return!0},e.prototype.serialize=function(){var t=this.vdProduct.getValue();return{type:this.getItemType(),name:this.vdProduct.getName(),choice:this.vdProduct.getChoice(),valueFormula:String(this.vdProduct.getPricePerUnit()),valueType:r.EInvoiceItemValueType.FIXED,quantityFormula:t?String(t):null}},e.prototype.getComputedUnitPrice=function(){return this.vdProduct.getPricePerUnit()},e.prototype.getQuantityFormula=function(){return String(this.vdProduct.getQuantity())},e.prototype.setQuantityFormula=function(t){return this},e.prototype.getComputedQuantity=function(){return this.vdProduct.getQuantity()},e.prototype.setComputedQuantity=function(t){return this},e.prototype.incrementSubtotal=function(t){var e=t;return e+=this.vdProduct.getValue()},e.prototype.setComputedValue=function(t){return this},e.prototype.getComputedValue=function(){return Math.max(0,this.vdProduct.getPricePerUnit())},e.prototype.getItemName=function(){return this.vdProduct.getName()},e.prototype.getValueType=function(){return r.EInvoiceItemValueType.FIXED},e.prototype.getProductControlId=function(){return this.vdProduct.getId()},e.prototype.getInvoice=function(){return this.invoice},e.prototype.onRemovedFromInvoice=function(){this.vdProduct.setInvoiceRow(null)},e.prototype.getVDProduct=function(){return this.vdProduct},e.prototype.getProductPictureURL=function(){return this.vdProduct.getPictureURL()},e}(n.InvoiceRow);e.InvoiceRowDynamicJVMProduct=o}.apply(e,r))||(t.exports=o)},,function(t,e,n){"use strict";(function(t){var r=n(237),o=n(238),i=n(190);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return p(this,t)}return l(this,t,e,n)}function l(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=d(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|f(e,n),o=(t=a(t,r)).write(e,n);o!==r&&(t=t.slice(0,o));return t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|h(e.length);return 0===(t=a(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?a(t,0):d(t,e);if("Buffer"===e.type&&i(e.data))return d(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function p(t,e){if(c(e),t=a(t,e<0?0:0|h(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function d(t,e){var n=e.length<0?0:0|h(e.length);t=a(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function h(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function f(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(t).length;default:if(r)return U(t).length;e=(""+e).toLowerCase(),r=!0}}function g(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return D(this,e,n);case"utf8":case"utf-8":return w(this,e,n);case"ascii":return _(this,e,n);case"latin1":case"binary":return N(this,e,n);case"base64":return S(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:v(t,e,n,r,o);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):v(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function v(t,e,n,r,o){var i,s=1,a=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,n/=2}function l(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(o){var c=-1;for(i=n;i<a;i++)if(l(t,i)===l(e,-1===c?0:i-c)){if(-1===c&&(c=i),i-c+1===u)return c*s}else-1!==c&&(i-=i-c),c=-1}else for(n+u>a&&(n=a-u),i=n;i>=0;i--){for(var p=!0,d=0;d<u;d++)if(l(t,i+d)!==l(e,d)){p=!1;break}if(p)return i}return-1}function b(t,e,n,r){n=Number(n)||0;var o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function C(t,e,n,r){return H(U(e,t.length-n),t,n,r)}function E(t,e,n,r){return H(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function A(t,e,n,r){return E(t,e,n,r)}function I(t,e,n,r){return H(G(e),t,n,r)}function T(t,e,n,r){return H(function(t,e){for(var n,r,o,i=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(e,t.length-n),t,n,r)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function w(t,e,n){n=Math.min(t.length,n);for(var r=[],o=e;o<n;){var i,s,a,u,l=t[o],c=null,p=l>239?4:l>223?3:l>191?2:1;if(o+p<=n)switch(p){case 1:l<128&&(c=l);break;case 2:128==(192&(i=t[o+1]))&&(u=(31&l)<<6|63&i)>127&&(c=u);break;case 3:i=t[o+1],s=t[o+2],128==(192&i)&&128==(192&s)&&(u=(15&l)<<12|(63&i)<<6|63&s)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:i=t[o+1],s=t[o+2],a=t[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&(u=(15&l)<<18|(63&i)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(c=u)}null===c?(c=65533,p=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),o+=p}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return l(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return c(e),e<=0?a(t,e):void 0!==n?"string"==typeof r?a(t,e).fill(n,r):a(t,e).fill(n):a(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return p(null,t)},u.allocUnsafeSlow=function(t){return p(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var s=t[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,o),o+=s.length}return r},u.byteLength=f,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?w(this,0,t):g.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,o){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(this===t)return 0;for(var i=(o>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(i,s),l=this.slice(r,o),c=t.slice(e,n),p=0;p<a;++p)if(l[p]!==c[p]){i=l[p],s=c[p];break}return i<s?-1:s<i?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return C(this,t,e,n);case"ascii":return E(this,t,e,n);case"latin1":case"binary":return A(this,t,e,n);case"base64":return I(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function _(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function N(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function D(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=e;i<n;++i)o+=V(t[i]);return o}function O(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function P(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function x(t,e,n,r,o,i){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function M(t,e,n,r){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-n,2);o<i;++o)t[n+o]=(e&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function R(t,e,n,r){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-n,4);o<i;++o)t[n+o]=e>>>8*(r?o:3-o)&255}function L(t,e,n,r,o,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(t,e,n,r,i){return i||L(t,0,n,4),o.write(t,e,n,r,23,4),n+4}function k(t,e,n,r,i){return i||L(t,0,n,8),o.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var o=e-t;n=new u(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=this[t+--e],o=1;e>0&&(o*=256);)r+=this[t+--e]*o;return r},u.prototype.readUInt8=function(t,e){return e||P(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||P(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||P(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=e,o=1,i=this[t+--r];r>0&&(o*=256);)i+=this[t+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*e)),i},u.prototype.readInt8=function(t,e){return e||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||P(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||P(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||P(t,4,this.length),o.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||P(t,4,this.length),o.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||P(t,8,this.length),o.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||P(t,8,this.length),o.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||x(this,t,e,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||x(this,t,e,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):R(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);x(this,t,e,n,o-1,-o)}var i=0,s=1,a=0;for(this[e]=255&t;++i<n&&(s*=256);)t<0&&0===a&&0!==this[e+i-1]&&(a=1),this[e+i]=(t/s>>0)-a&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);x(this,t,e,n,o-1,-o)}var i=n-1,s=1,a=0;for(this[e+i]=255&t;--i>=0&&(s*=256);)t<0&&0===a&&0!==this[e+i+1]&&(a=1),this[e+i]=(t/s>>0)-a&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):M(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):M(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):R(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return F(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return F(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return k(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return k(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var o,i=r-n;if(this===t&&n<e&&e<r)for(o=i-1;o>=0;--o)t[o+e]=this[o+n];else if(i<1e3||!u.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+i),e);return i},u.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(i=e;i<n;++i)this[i]=t;else{var s=u.isBuffer(t)?t:U(new u(t,r).toString()),a=s.length;for(i=0;i<n-e;++i)this[i+e]=s[i%a]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function V(t){return t<16?"0"+t.toString(16):t.toString(16)}function U(t,e){var n;e=e||1/0;for(var r=t.length,o=null,i=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function G(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(B,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function H(t,e,n,r){for(var o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}}).call(this,n(92))},,,,function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(9),n(4),n(241),n(6),n(1),n(75),n(10),n(13),n(161)],void 0===(o=function(t,e,n,r,o,i,a,u,l,c,p){var d,h;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.ADDRESS_LINE_1=0]="ADDRESS_LINE_1",t[t.ADDRESS_LINE_2=1]="ADDRESS_LINE_2",t[t.CITY=2]="CITY",t[t.COUNTRY=3]="COUNTRY",t[t.REGION=4]="REGION",t[t.ZIP_CODE=5]="ZIP_CODE"}(d||(d={})),function(t){t.UNIVERSAL="universal",t.UNITED_STATES="us",t.CANADA="ca",t.AUSTRALIA="au",t.UNITED_KINGDOM="uk"}(h=e.EAddressStyle||(e.EAddressStyle={}));var f,g=function(){function t(){}return t.MSG_PLACEHOLDER_ADDRESS_LINE_1="Address line 1",t.MSG_PLACEHOLDER_ADDRESS_LINE_2="Address line 2",t.MSG_PLACEHOLDER_CITY="City",t.MSG_PLACEHOLDER_COUNTRY="Country",t.MSG_PLACEHOLDER_REGION="Region",t.MSG_PLACEHOLDER_ZIP_CODE="Postal / Zip Code",t.CONTEXT="address-field",t.COUNTRY_CONTEXT="country-name",t}(),m=function(t){function e(n,r,i){var s=t.call(this,n,r||e.getDefaultProperties(n),i)||this;return s.lastCountryChanged=null,s.addClass("address"),n.isEditMode()&&(s.toolbar=new o.AddressToolbar(s)),s.onFieldsVisibilityChanged(),n.isEditMode()||(s.initCountryDropdown(),s.initAutoComplete()),s}return s(e,t),e.realDOMNode=function(t){return t instanceof y?t.getRoot():t},e.prototype.getFieldsLayout=function(){var t=[],r=this.properties.address.showStreetAddress1,o=this.properties.address.showStreetAddress2,i=this.properties.address.showCity,s=this.properties.address.showRegion,a=this.properties.address.showZipCode,u=this.properties.address.showCountry,l=String(~~i)+String(~~s)+String(~~a)+String(~~u),c=0;switch(r&&(t.push({row:c,span:n.InputSpan.FULL,domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_ADDRESS_LINE_1)}),c++),o&&(t.push({row:c,span:n.InputSpan.FULL,domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_ADDRESS_LINE_2)}),c++),l){case"0001":t.push({domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_COUNTRY),span:n.InputSpan.FULL,row:c}),c++;break;case"0010":t.push({domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_ZIP_CODE),span:n.InputSpan.FULL,row:c}),c++;break;case"0100":t.push({domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_REGION),span:n.InputSpan.FULL,row:c}),c++;break;case"1000":t.push({domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_CITY),span:n.InputSpan.FULL,row:c}),c++;break;case"0011":t.push({domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_ZIP_CODE),span:n.InputSpan.HALF,row:c}),t.push({domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_COUNTRY),span:n.InputSpan.REMAINING,row:c}),c++;break;case"0111":t.push({domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_REGION),span:n.InputSpan.THIRD,row:c}),t.push({domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_ZIP_CODE),span:n.InputSpan.THIRD,row:c}),t.push({domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_COUNTRY),span:n.InputSpan.REMAINING,row:c}),c++;break;case"1111":t.push({domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_CITY),span:n.InputSpan.HALF,row:c}),t.push({domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_REGION),span:n.InputSpan.REMAINING,row:c}),c++,t.push({domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_ZIP_CODE),span:n.InputSpan.HALF,row:c}),t.push({domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_COUNTRY),span:n.InputSpan.REMAINING,row:c}),c++;break;case"0101":t.push({domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_REGION),span:n.InputSpan.HALF,row:c}),t.push({domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_COUNTRY),span:n.InputSpan.REMAINING,row:c}),c++;break;case"0110":t.push({domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_REGION),span:n.InputSpan.REMAINING,row:c}),t.push({domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_ZIP_CODE),span:n.InputSpan.HALF,row:c}),c++;break;case"1001":t.push({domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_CITY),span:n.InputSpan.HALF,row:c}),t.push({domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_COUNTRY),span:n.InputSpan.REMAINING,row:c}),c++;break;case"1010":t.push({domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_CITY),span:n.InputSpan.REMAINING,row:c}),t.push({domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_ZIP_CODE),span:n.InputSpan.HALF,row:c}),c++;break;case"1011":t.push({domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_CITY),span:n.InputSpan.THIRD,row:c}),t.push({domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_ZIP_CODE),span:n.InputSpan.THIRD,row:c}),t.push({domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_COUNTRY),span:n.InputSpan.REMAINING,row:c}),c++;break;case"1100":t.push({domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_CITY),span:n.InputSpan.REMAINING,row:c}),t.push({domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_REGION),span:n.InputSpan.HALF,row:c}),c++;break;case"1101":t.push({domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_CITY),span:n.InputSpan.THIRD,row:c}),t.push({domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_REGION),span:n.InputSpan.THIRD,row:c}),t.push({domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_COUNTRY),span:n.InputSpan.REMAINING,row:c}),c++;break;case"1110":t.push({domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_CITY),span:n.InputSpan.REMAINING,row:c}),t.push({domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_REGION),span:n.InputSpan.THIRD,row:c}),t.push({domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_ZIP_CODE),span:n.InputSpan.THIRD,row:c}),c++}return this.toolbar&&t.push({domNode:this.toolbar.getRoot(),span:n.InputSpan.REMAINING,row:c}),t},e.prototype.getNodeName=function(){return"Address"},e.prototype.getTypeId=function(){return r.NodeTypes.ADDRESS},e.prototype.getValue=function(){var t=[];return this.streetAddress1&&t.push("<"+e.NODE_NAME_ADDRESS_LINE_1+' value="'+i.Strings.toHTML(this.streetAddress1.value)+'"/>'),this.streetAddress2&&t.push("<"+e.NODE_NAME_ADDRESS_LINE_2+' value="'+i.Strings.toHTML(this.streetAddress2.value)+'"/>'),this.city&&t.push("<"+e.NODE_NAME_CITY+' value="'+i.Strings.toHTML(this.city.value)+'"/>'),this.region&&t.push("<"+e.NODE_NAME_REGION+' value="'+i.Strings.toHTML(this.region.value)+'"/>'),this.zipCode&&t.push("<"+e.NODE_NAME_ZIP_CODE+' value="'+i.Strings.toHTML(this.zipCode.value)+'"/>'),this.country&&t.push("<"+e.NODE_NAME_COUNTRY+' value="'+i.Strings.toHTML(this.country.value)+'"/>'),"<address>"+t.join("")+"</address>"},e.prototype.hasLabel=function(){return!0},e.prototype.hasValue=function(){return!0},e.prototype.setValue=function(t){var n=this,r=String(t||"");if(this.streetAddress1&&(this.streetAddress1.value=""),this.streetAddress2&&(this.streetAddress2.value=""),this.city&&(this.city.value=""),this.region&&(this.region.value=""),this.zipCode&&(this.zipCode.value=""),this.country&&(this.country.value=""),"<address>"===r.substr(0,9)&&"</address>"===r.substr(-10))r.substr(9,r.length-19).replace(e.REPLACER_REGEXP,(function(t){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];switch(r[0]){case e.NODE_NAME_ADDRESS_LINE_1:n.setAddressLine1(r[1]);break;case e.NODE_NAME_ADDRESS_LINE_2:n.setAddressLine2(r[1]);break;case e.NODE_NAME_CITY:n.setCity(r[1]);break;case e.NODE_NAME_REGION:n.setRegion(r[1]),setTimeout((function(){n.setRegion(r[1])}),0);break;case e.NODE_NAME_ZIP_CODE:n.setZipCode(r[1]);break;case e.NODE_NAME_COUNTRY:n.setCountry(r[1]),n.onCountryChanged();break;default:throw new Error("Invalid node name: "+JSON.stringify(r[0]))}return""}));else if(t)throw new Error("Invalid address value "+JSON.stringify(t));return this},e.getDefaultProperties=function(e){var n=a.I18n.translateApplicationText("Address","control-defaults");return t.addInputProperties.call(this,t.addLabelProperties.call(this,t.addSizeProperties.call(this,{name:"Q",visibility:"",formula:"",validation:{required:!1,customErrorMessage:"",format:"address"},address:{addressStyle:h.UNIVERSAL,showStreetAddress1:!0,showStreetAddress2:!0,showCity:!0,showRegion:!0,showZipCode:!0,showCountry:!0,availableCountries:null,defaultCountry:null,address1Placeholder:a.I18n.translateApplicationText(g.MSG_PLACEHOLDER_ADDRESS_LINE_1,"control-defaults.address"),address2Placeholder:a.I18n.translateApplicationText(g.MSG_PLACEHOLDER_ADDRESS_LINE_2,"control-defaults.address"),cityPlaceholder:a.I18n.translateApplicationText(g.MSG_PLACEHOLDER_CITY,"control-defaults.address"),countryPlaceholder:a.I18n.translateApplicationText(g.MSG_PLACEHOLDER_COUNTRY,"control-defaults.address"),regionPlaceholder:a.I18n.translateApplicationText(g.MSG_PLACEHOLDER_REGION,"control-defaults.address"),zipCodePlaceholder:a.I18n.translateApplicationText(g.MSG_PLACEHOLDER_ZIP_CODE,"control-defaults.address"),autoComplete:!1}}),n,e),e)},e.prototype.getTranslations=function(){var t=[];if(this.properties.label.text&&t.push({original:this.properties.label.text}),this.properties.address.showStreetAddress1&&this.properties.address.address1Placeholder&&t.push({original:this.properties.address.address1Placeholder||g.MSG_PLACEHOLDER_ADDRESS_LINE_1,context:g.CONTEXT}),this.properties.address.showStreetAddress2&&this.properties.address.address2Placeholder&&t.push({original:this.properties.address.address2Placeholder||g.MSG_PLACEHOLDER_ADDRESS_LINE_2,context:g.CONTEXT}),this.properties.address.showCity&&this.properties.address.cityPlaceholder&&t.push({original:this.properties.address.cityPlaceholder||g.MSG_PLACEHOLDER_CITY,context:g.CONTEXT}),this.properties.address.showCountry&&this.properties.address.countryPlaceholder&&t.push({original:this.properties.address.countryPlaceholder||g.MSG_PLACEHOLDER_COUNTRY,context:g.CONTEXT}),this.properties.address.showRegion&&this.properties.address.regionPlaceholder&&t.push({original:this.properties.address.regionPlaceholder||g.MSG_PLACEHOLDER_REGION,context:g.CONTEXT}),this.properties.address.showZipCode&&this.properties.address.zipCodePlaceholder&&t.push({original:this.properties.address.zipCodePlaceholder||g.MSG_PLACEHOLDER_ZIP_CODE,context:g.CONTEXT}),this.hasProperty("validation.customErrorMessage")){var e=this.getProperty("validation.customErrorMessage");e&&t.push({original:e,context:"form-fields-errors"})}return t},e.prototype.onFieldsVisibilityChanged=function(t){void 0===t&&(t=!1),this.properties.address.showStreetAddress1?this.streetAddress1=this.streetAddress1||this.createAddressPartComponent(d.ADDRESS_LINE_1):this.streetAddress1=void 0,this.properties.address.showStreetAddress2?this.streetAddress2=this.streetAddress2||this.createAddressPartComponent(d.ADDRESS_LINE_2):this.streetAddress2=void 0,this.properties.address.showCity?this.city=this.city||this.createAddressPartComponent(d.CITY):this.city=void 0,this.properties.address.showRegion?this.region=this.region||this.createAddressPartComponent(d.REGION):this.region=void 0,this.properties.address.showZipCode?this.zipCode=this.zipCode||this.createAddressPartComponent(d.ZIP_CODE):this.zipCode=void 0,this.properties.address.showCountry?this.country=this.country||this.createAddressPartComponent(d.COUNTRY):this.country=void 0,this.toolbar&&this.toolbar.update(),t&&this.render()},e.prototype.createAddressPartComponent=function(t){var r,o=this,i=!1,s=t!==d.COUNTRY?(i=!0,this.document.isEditMode()||!this.document.isEditMode()&&t!==d.REGION?document.createElement("input"):new y(f.INPUT)):this.document.isEditMode()?(i=!0,document.createElement("input")):new y(f.DROPDOWN);switch(i&&s.setAttribute("type","text"),t){case d.ADDRESS_LINE_1:r="address1Placeholder",s.placeholder=a.I18n.translateViewFormText(this.properties.address[r]||g.MSG_PLACEHOLDER_ADDRESS_LINE_1,g.CONTEXT),this.invalidateShadowDOMNodeWrapper(e.NODE_NAME_ADDRESS_LINE_1);break;case d.ADDRESS_LINE_2:r="address2Placeholder",s.placeholder=a.I18n.translateViewFormText(this.properties.address[r]||g.MSG_PLACEHOLDER_ADDRESS_LINE_2,g.CONTEXT),this.invalidateShadowDOMNodeWrapper(e.NODE_NAME_ADDRESS_LINE_2);break;case d.CITY:r="cityPlaceholder",s.placeholder=a.I18n.translateViewFormText(this.properties.address[r]||g.MSG_PLACEHOLDER_CITY,g.CONTEXT),this.invalidateShadowDOMNodeWrapper(e.NODE_NAME_CITY);break;case d.REGION:r="regionPlaceholder",s.placeholder=a.I18n.translateViewFormText(this.properties.address[r]||g.MSG_PLACEHOLDER_REGION,g.CONTEXT),this.invalidateShadowDOMNodeWrapper(e.NODE_NAME_REGION);break;case d.ZIP_CODE:r="zipCodePlaceholder",s.placeholder=a.I18n.translateViewFormText(this.properties.address[r]||g.MSG_PLACEHOLDER_ZIP_CODE,g.CONTEXT),this.invalidateShadowDOMNodeWrapper(e.NODE_NAME_ZIP_CODE);break;case d.COUNTRY:r="countryPlaceholder",this.document.isEditMode()&&(s.placeholder=a.I18n.translateViewFormText(this.properties.address[r]||g.MSG_PLACEHOLDER_COUNTRY,g.CONTEXT)),this.invalidateShadowDOMNodeWrapper(e.NODE_NAME_COUNTRY)}if(this.document.isEditMode()&&(s.value=this.properties.address[r],s.oninput=function(){o.setProperty("address."+r,s.value,o),s.placeholder=s.value},s.onfocus=function(){setTimeout((function(){o.getDocument().getSelection().getItem()!==o&&o.getDocument().getSelection().set(o,n.SelectionInputContext.INPUT,e.realDOMNode(s))}),0)}),!this.document.isEditMode())return s;var u=document.createElement("div");if(u.className="input",u.appendChild(e.realDOMNode(s)),-1===[d.ADDRESS_LINE_1,d.ADDRESS_LINE_2].indexOf(t)){var l=document.createElement("div");l.className="trash",l.innerHTML='<span class="vfb vfb-close"></span>',l.title=a.I18n.translateApplicationText("Remove subfield","control-defaults.address"),u.appendChild(l),l.onclick=function(){switch(t){case d.ADDRESS_LINE_1:o.setProperty("address.showStreetAddress1",!1,o);break;case d.ADDRESS_LINE_2:o.setProperty("address.showStreetAddress2",!1,o);break;case d.CITY:o.setProperty("address.showCity",!1,o);break;case d.REGION:o.setProperty("address.showRegion",!1,o);break;case d.ZIP_CODE:o.setProperty("address.showZipCode",!1,o);break;case d.COUNTRY:o.setProperty("address.showCountry",!1,o)}o.onFieldsVisibilityChanged(!0)}}return u},e.prototype.getMinFieldsRegionWidthForMobileModeForcedRendering=function(){return 10},e.prototype.getRenderedCSS=function(){var t=l.cast(this.properties.label.color),e=l.cast(this.properties.label.font.family),n=l.cast(this.properties.label.font.size),r=l.cast(this.properties.label.font.bold)?"bold":"normal",o=l.cast(this.properties.label.font.italic)?"italic":"normal",i=l.cast(this.properties.label.font.underline)?"underline":"none",s=l.cast(this.properties.label.font.align),a=l.cast(this.properties.input.color),u=l.cast(this.properties.input.backgroundColor),c=l.cast(this.properties.input.borderColor),p=l.cast(this.properties.input.borderWidth),d=l.cast(this.properties.input.borderRadius),h=l.cast(this.properties.input.borderStyle),f=l.cast(this.properties.input.font.family),g=l.cast(this.properties.input.font.size),m=l.cast(this.properties.input.font.bold)?"bold":"normal",y=l.cast(this.properties.input.font.italic)?"italic":"normal",v=l.cast(this.properties.input.font.underline)?"underline":"none",b=l.cast(this.properties.input.font.align),C=this.document.getProperty("theme.selection.borderColor");return"\n            > label,\n            .shadow-wrapper > label {\n                color: "+t+";\n                font-size: "+n+'px;\n                font-family: "'+e+'";\n                font-weight: '+r+";\n                font-style: "+o+";\n                text-decoration: "+i+";\n                text-align: "+s+";\n            }\n            input[type=text],\n            select {\n                color: "+a+";\n                background-color: "+u+";\n                border: "+p+" "+h+" "+c+";\n                border-radius: "+d+";\n                font-weight: "+m+";\n                font-style: "+y+";\n                text-decoration: "+v+";\n                text-align: "+b+";\n                font-size: "+g+'px;\n                font-family: "'+f+'";\n                \n                &:hover,\n                &:focus {\n                    border-color: '+C+";\n                    \n                    + .expander {\n                        border-color: "+C+";\n                    }\n                }\n                \n                &:focus {\n                    background-color: "+this.document.getProperty("theme.selection.backgroundColor")+";\n                }\n            }\n            \n            .wrapper .expander {\n                color: "+a+";\n                border-width: "+p+" "+p+" "+p+" 0;\n                border-style: "+h+";\n                border-radius: 0 "+d+" "+d+" 0;\n                border-color: "+c+";\n            }\n        "},e.prototype.setAddressLine1=function(t){this.streetAddress1&&(this.streetAddress1.value=i.Strings.fromHTML(String(t||"")))},e.prototype.setAddressLine2=function(t){this.streetAddress2&&(this.streetAddress2.value=i.Strings.fromHTML(String(t||"")))},e.prototype.setCity=function(t){this.city&&(this.city.value=i.Strings.fromHTML(String(t||"")))},e.prototype.setRegion=function(t){this.region&&(this.region.value=i.Strings.fromHTML(String(t||"")))},e.prototype.setZipCode=function(t){this.zipCode&&(this.zipCode.value=i.Strings.fromHTML(String(t||"")))},e.prototype.setCountry=function(t){this.country&&(this.country.value=i.Strings.fromHTML(String(t||"")))},e.prototype.setCountryByCode=function(t){if(this.country){for(var e=0,n=this.country.options.length;e<n;e++)if(this.country.options[e].getAttribute("data-country-code")===t)return this.country.selectedIndex=e,!0;return!1}return!0},e.prototype.listenToUserInput=function(t){var e=this;if(t&&(this.pointerToSubmissionModel=t),null===t&&this.pointerToSubmissionModel&&(t=this.pointerToSubmissionModel),t){if(this.streetAddress1&&(this.streetAddress1.oninput=function(){t.updateValue(e)}),this.streetAddress2&&(this.streetAddress2.oninput=function(){t.updateValue(e)}),this.city&&(this.city.oninput=function(){t.updateValue(e)}),this.region){var n="select"===this.region.nodeName.toLowerCase()?"onchange":"oninput";this.region[n]=function(){t.updateValue(e)}}if(this.zipCode&&(this.zipCode.oninput=function(){t.updateValue(e)}),this.country){n="select"===this.country.nodeName.toLowerCase()?"onchange":"oninput";this.country[n]=function(){t.updateValue(e)}}}else console.log("Address.listenToUserInput: No SubmissionModel provided")},e.prototype.enumerateSubFields=function(){if(this.getProperty("name")){var t=[];return t.push(e.SUBFIELD_LINE_1),t.push(e.SUBFIELD_LINE_2),t.push(e.SUBFIELD_CITY),t.push(e.SUBFIELD_REGION),t.push(e.SUBFIELD_ZIP_CODE),t.push(e.SUBFIELD_COUNTRY),t}return null},e.prototype.getAllowedValidators=function(){return["address"]},e.prototype.getSubFieldValue=function(t){if(!t)return null;switch(t){case e.SUBFIELD_LINE_1:return this.streetAddress1.value;case e.SUBFIELD_LINE_2:return this.streetAddress2.value;case e.SUBFIELD_CITY:return this.city?this.city.value:null;case e.SUBFIELD_REGION:return this.region?this.region.value:null;case e.SUBFIELD_ZIP_CODE:return this.zipCode?this.zipCode.value:null;case e.SUBFIELD_COUNTRY:return this.country?this.country.value:null}},e.prototype.initCountryDropdown=function(){var t=this,e=!!this.getProperty("address.showRegion"),n=!!this.getProperty("address.showCountry"),r=this.getProperty("address.addressStyle");if(n){switch(r){case h.AUSTRALIA:this.initCountryDropdownForAustralia();break;case h.CANADA:this.initCountryDropdownForCanada();break;case h.UNITED_KINGDOM:this.initCountryDropdownForUnitedKingdom();break;case h.UNITED_STATES:this.initCountryDropdownForUnitedStates();break;case h.UNIVERSAL:default:this.initCountryDropdownForUniversalAddress()}this.country.addEventListener("change",(function(){t.onCountryChanged()}),!0),e&&setTimeout((function(){t.onCountryChanged()}),0)}},e.prototype.initCountryDropdownForUnitedStates=function(){var t=document.createElement("option");t.text=a.I18n.translateViewFormText("United States",g.COUNTRY_CONTEXT),t.value="US",t.setAttribute("data-country-code","US"),this.country.add(t)},e.prototype.initCountryDropdownForUnitedKingdom=function(){var t=document.createElement("option");t.text=a.I18n.translateViewFormText("United Kingdom",g.COUNTRY_CONTEXT),t.value="GB",t.setAttribute("data-country-code","GB"),this.country.add(t)},e.prototype.initCountryDropdownForAustralia=function(){var t=document.createElement("option");t.text=a.I18n.translateViewFormText("Australia",g.COUNTRY_CONTEXT),t.value="AU",t.setAttribute("data-country-code","AU"),this.country.add(t)},e.prototype.initCountryDropdownForCanada=function(){var t=document.createElement("option");t.text=a.I18n.translateViewFormText("Canada",g.COUNTRY_CONTEXT),t.value="CA",t.setAttribute("data-country-code","CA"),this.country.add(t)},e.prototype.initCountryDropdownForUniversalAddress=function(){var t=document.createElement("option");t.value="",t.text=a.I18n.translateViewFormText(this.getProperty("address.countryPlaceholder")||"Country",g.CONTEXT),t.disabled=!0,this.country.add(t);var e=String(this.getProperty("address.allowedCountries")||""),n=e?e.split(" "):null,r=this.getProperty("address.defaultCountry")||null,o=r;r||(p=u.Geolocation.getConnectionDetails())&&(r=p.country.toUpperCase());for(var i=!1,s=0,l=u.Geolocation.getCountriesList(),c=l.length;s<c;s++)n&&-1===n.indexOf(l[s].code)||((t=document.createElement("option")).value=l[s].name,t.text=a.I18n.translateViewFormText(l[s].name,g.COUNTRY_CONTEXT),t.setAttribute("data-country-code",l[s].code),l[s].code===r&&(t.defaultSelected=!0,i=!0),this.country.add(t));if(!i&&o){var p;(p=u.Geolocation.getConnectionDetails())&&(r=p.country.toUpperCase());for(s=0,c=this.country.options.length;s<c;s++)if(this.country.options[s].value&&this.country.options[s].getAttribute("data-country-code")===r){this.country.options[s].defaultSelected=!0,this.country.selectedIndex=s;break}}},e.prototype.onCountryChanged=function(){if(this.getProperty("address.showRegion")){var t=-1===this.country.selectedIndex?"":this.country.options[this.country.selectedIndex].getAttribute("data-country-code");switch(t){case"CA":case"GB":case"US":case"AU":break;default:t=""}if(t!==this.lastCountryChanged){switch(this.lastCountryChanged=t,this.lastCountryChanged){case"CA":this.region=this.createRegionDropdownFromStringsList(e.STATES_OF_CANADA);break;case"GB":this.region=this.createRegionDropdownFromStringsList(e.STATES_OF_UNITED_KINGDOM);break;case"US":this.region=this.createRegionDropdownFromStringsList(e.STATES_OF_UNITED_STATES);break;case"AU":this.region=this.createRegionDropdownFromStringsList(e.STATES_OF_AUSTRALIA);break;default:this.region=this.createAddressPartComponent(d.REGION)}this.invalidateShadowDOMNodeWrapper(e.NODE_NAME_REGION),this.listenToUserInput(null),this.render()}}},e.prototype.createRegionDropdownFromStringsList=function(t){var e=new y(f.DROPDOWN),n=document.createElement("option");n.value="",n.text=a.I18n.translateViewFormText(this.getProperty("address.regionPlaceholder")||g.MSG_PLACEHOLDER_REGION,g.CONTEXT),n.disabled=!0,e.add(n);for(var r=0,o=t.length;r<o;r++)(n=document.createElement("option")).value=n.text=t[r],e.add(n);return e.selectedIndex=0,e},e.prototype.performTranslation=function(){if(this.labelDOMNode){var t=a.I18n.translateViewFormText(this.getProperty("label.text"),this.getLabelI18nContext());if(this.labelDOMNode.textContent=t,this.shadowDOMNodeWrappers)for(var e in this.shadowDOMNodeWrappers)this.shadowDOMNodeWrappers.hasOwnProperty(e)&&(this.shadowDOMNodeWrappers[e].firstChild.textContent=t)}var n;(this.streetAddress1&&(this.streetAddress1.placeholder=a.I18n.translateViewFormText(this.properties.address.address1Placeholder,g.CONTEXT)),this.streetAddress2&&(this.streetAddress2.placeholder=a.I18n.translateViewFormText(this.properties.address.address2Placeholder,g.CONTEXT)),this.city&&(this.city.placeholder=a.I18n.translateViewFormText(this.properties.address.cityPlaceholder,g.CONTEXT)),this.zipCode&&(this.zipCode.placeholder=a.I18n.translateViewFormText(this.properties.address.zipCodePlaceholder,g.CONTEXT)),this.region)&&("input"===this.region.nodeName.toLowerCase()?this.region.placeholder=a.I18n.translateViewFormText(this.properties.address.regionPlaceholder,g.CONTEXT):(n=this.region.options[0]).value||(n.text=a.I18n.translateViewFormText(this.properties.address.regionPlaceholder,g.CONTEXT)));this.country&&("select"===this.country.nodeName.toLowerCase()&&((n=this.country.options[0]).value||(n.text=a.I18n.translateViewFormText(this.properties.address.countryPlaceholder,g.CONTEXT))))},e.prototype.supportsLabelInsideRendering=function(){return!0},e.prototype.render=function(){var e;l.cast(this.properties.label.align)===n.LabelAlignment.INSIDE&&(e=n.LabelAlignment.INSIDE),e===this.lastRenderedLabelAlignment&&void 0===e||(this.lastRenderedLabelAlignment=e,this.onLabelAlignmentChangedSwitchToShadowLabels(void 0!==this.lastRenderedLabelAlignment)),t.prototype.render.call(this)},e.prototype.onLabelAlignmentChangedSwitchToShadowLabels=function(t){t?(this.shadowDOMNodeWrappers=this.shadowDOMNodeWrappers||{},this.streetAddress1&&!this.shadowDOMNodeWrappers[e.NODE_NAME_ADDRESS_LINE_1]&&(this.shadowDOMNodeWrappers[e.NODE_NAME_ADDRESS_LINE_1]=this.createShadowDOMNodeWrapper(this.streetAddress1)),this.streetAddress2&&!this.shadowDOMNodeWrappers[e.NODE_NAME_ADDRESS_LINE_2]&&(this.shadowDOMNodeWrappers[e.NODE_NAME_ADDRESS_LINE_2]=this.createShadowDOMNodeWrapper(this.streetAddress2)),this.city&&!this.shadowDOMNodeWrappers[e.NODE_NAME_CITY]&&(this.shadowDOMNodeWrappers[e.NODE_NAME_CITY]=this.createShadowDOMNodeWrapper(this.city)),this.zipCode&&!this.shadowDOMNodeWrappers[e.NODE_NAME_ZIP_CODE]&&(this.shadowDOMNodeWrappers[e.NODE_NAME_ZIP_CODE]=this.createShadowDOMNodeWrapper(this.zipCode)),this.country&&!this.shadowDOMNodeWrappers[e.NODE_NAME_COUNTRY]&&(this.shadowDOMNodeWrappers[e.NODE_NAME_COUNTRY]=this.createShadowDOMNodeWrapper(this.country)),this.region&&!this.shadowDOMNodeWrappers[e.NODE_NAME_REGION]&&(this.shadowDOMNodeWrappers[e.NODE_NAME_REGION]=this.createShadowDOMNodeWrapper(this.region))):this.shadowDOMNodeWrappers=void 0},e.prototype.createShadowDOMNodeWrapper=function(t){var n=document.createElement("div"),r=document.createElement("label");return this.document.isEditMode()&&r.setAttribute("contenteditable","true"),r.textContent=this.getProperty("label.text")||"",n.appendChild(r),n.appendChild(e.realDOMNode(t)),n.className="shadow-wrapper input",n},e.prototype.invalidateShadowDOMNodeWrapper=function(t){this.shadowDOMNodeWrappers&&this.shadowDOMNodeWrappers[t]&&delete this.shadowDOMNodeWrappers[t]},e.prototype.getShadowDOMNodeWrapperOrInputItself=function(t){switch(t){case e.NODE_NAME_ADDRESS_LINE_1:return this.shadowDOMNodeWrappers&&this.shadowDOMNodeWrappers[e.NODE_NAME_ADDRESS_LINE_1]||this.streetAddress1;case e.NODE_NAME_ADDRESS_LINE_2:return this.shadowDOMNodeWrappers&&this.shadowDOMNodeWrappers[e.NODE_NAME_ADDRESS_LINE_2]||this.streetAddress2;case e.NODE_NAME_CITY:return this.shadowDOMNodeWrappers&&this.shadowDOMNodeWrappers[e.NODE_NAME_CITY]||this.city;case e.NODE_NAME_ZIP_CODE:return this.shadowDOMNodeWrappers&&this.shadowDOMNodeWrappers[e.NODE_NAME_ZIP_CODE]||this.zipCode;case e.NODE_NAME_REGION:return this.shadowDOMNodeWrappers&&this.shadowDOMNodeWrappers[e.NODE_NAME_REGION]||e.realDOMNode(this.region);case e.NODE_NAME_COUNTRY:return this.shadowDOMNodeWrappers&&this.shadowDOMNodeWrappers[e.NODE_NAME_COUNTRY]||e.realDOMNode(this.country);default:return null}},e.prototype.getTextAssociatedWithLabel=function(t){return this.getProperty("label.text")},e.prototype.setLabelTextWhichIsComingFromTheUser=function(e,n){if(t.prototype.setLabelTextWhichIsComingFromTheUser.call(this,e,n),this.shadowDOMNodeWrappers)for(var r in this.shadowDOMNodeWrappers)if(this.shadowDOMNodeWrappers.hasOwnProperty(r)){var o=this.shadowDOMNodeWrappers[r].firstChild;o.textContent!==e&&(o.textContent=e)}return this},e.prototype.getFieldContexts=function(){var e=t.prototype.getFieldContexts.call(this);if(this.shadowDOMNodeWrappers)for(var r in this.shadowDOMNodeWrappers)this.shadowDOMNodeWrappers.hasOwnProperty(r)&&e.push({node:this.shadowDOMNodeWrappers[r].firstChild,context:n.SelectionInputContext.LABEL});return e},e.prototype.onFilledStateChanged=function(t){var n=this,r=!1;"string"==typeof t&&"<address>"===t.substr(0,9)&&"</address>"===t.substr(-10)&&t.substr(9,t.length-19).replace(e.REPLACER_REGEXP,(function(t){for(var o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];switch(o[0]){case e.NODE_NAME_ADDRESS_LINE_1:r=r||!!n.streetAddress1&&""!==o[1];break;case e.NODE_NAME_ADDRESS_LINE_2:r=r||!!n.streetAddress2&&""!==o[1];break;case e.NODE_NAME_CITY:r=r||!!n.city&&""!==o[1];break;case e.NODE_NAME_REGION:break;case e.NODE_NAME_ZIP_CODE:r=r||!!n.zipCode&&""!==o[1];break;case e.NODE_NAME_COUNTRY:}return""})),this.setFilledState(r)},e.prototype.embedInPDFPage=function(t){var n=this;t.writeHTMLElement(this.labelDOMNode);[this.streetAddress1,this.streetAddress2,this.city,this.region,this.zipCode,this.country].filter((function(t){return!!t})).forEach((function(r){var o=e.realDOMNode(r),i=function(t){switch(t){case n.streetAddress1:return e.SUBFIELD_LINE_1;case n.streetAddress2:return e.SUBFIELD_LINE_2;case n.city:return e.SUBFIELD_CITY;case n.region:return e.SUBFIELD_REGION;case n.zipCode:return e.SUBFIELD_ZIP_CODE;case n.country:return e.SUBFIELD_COUNTRY;default:return"unknown"}}(r),s=r.options&&r.options[0]&&r.options[0].text||r.placeholder||r.value||o.value||"";if(r.options&&r.options.length&&i!==e.SUBFIELD_REGION){var a=t.getDocument().create(c.PDFNodeEntityType.INPUT_DROPDOWN);t.initializeFieldDimensions(o,a),a.setBackgroundColor(l.cast(n.properties.input.backgroundColor)).setTextColor(l.cast(n.properties.input.color)).setBorderWidth(parseInt(l.cast(n.properties.input.borderWidth)||"1")).setBorderColor(l.cast(n.properties.input.borderColor)).setFontFamily(l.cast(n.properties.input.font.family)).setName(n.getProperty("name")+"."+i).setFontSize(l.cast(n.properties.input.font.size)).setRequired(n.isRequired()).setRepeatedIndex(n.getRepeatedIndex());for(var u=0,p=r.options.length;u<p;u++)0!==u||r.options[u].value||a.setFirstChoiceIsEmpty(!0),a.addOption(r.options[u].text);t.appendChild(a)}else{var d=t.getDocument().create(c.PDFNodeEntityType.INPUT_TEXT);t.initializeFieldDimensions(o,d),d.setBackgroundColor(l.cast(n.properties.input.backgroundColor)).setTextColor(l.cast(n.properties.input.color)).setBorderWidth(parseInt(l.cast(n.properties.input.borderWidth)||"1")).setBorderColor(l.cast(n.properties.input.borderColor)).setValue(s).setFontFamily(l.cast(n.properties.input.font.family)).setMultiLine(!1).setName(n.getProperty("name")+"."+i).setFontSize(l.cast(n.properties.input.font.size)).setRequired(n.isRequired()).setRepeatedIndex(n.getRepeatedIndex()),t.appendChild(d)}}))},e.prototype.initAutoComplete=function(){var t=this;if(!0===this.getProperty("address.autoComplete")&&p.GoogleMapsSDK.isCustomAPIKey()){var e=this.streetAddress1;p.GoogleMapsSDK.getAPI().then((function(n){var r={fields:["address_components"],types:["address"]},o=t.getProperty("address.allowedCountries");o&&(r.componentRestrictions={country:o.toLowerCase().split(" ")});var i=new n.places.Autocomplete(e,r);i.addListener("place_changed",(function(){for(var e=[],n="",r="",o="",s="",a=0,u=i.getPlace().address_components;a<u.length;a++){var l=u[a];switch(l.types[0]){case"street_number":e.push(l.long_name);break;case"route":e.push(l.short_name);break;case"postal_code":n=""+l.long_name+n;break;case"postal_code_suffix":n=n+"-"+l.long_name;break;case"locality":s=l.long_name;break;case"administrative_area_level_1":o=l.long_name;break;case"administrative_area_level_2":s=s||l.long_name;break;case"country":r=l.short_name}}t.setCountryByCode(r)&&(t.onCountryChanged(),t.streetAddress1&&(t.streetAddress1.value=e.reverse().join(", ")),t.streetAddress2&&(t.streetAddress2.value=""),t.city&&(t.city.value=s),t.region&&(t.region.value=o),t.zipCode&&(t.zipCode.value=n),t.pointerToSubmissionModel&&t.pointerToSubmissionModel.updateValue(t),t.streetAddress2.focus())}))}))}},e.SUBFIELD_LINE_1="Line 1",e.SUBFIELD_LINE_2="Line 2",e.SUBFIELD_CITY="City",e.SUBFIELD_REGION="Region",e.SUBFIELD_ZIP_CODE="Zip Code",e.SUBFIELD_COUNTRY="Country",e.NODE_NAME_ADDRESS_LINE_1="address_line_1",e.NODE_NAME_ADDRESS_LINE_2="address_line2",e.NODE_NAME_CITY="city",e.NODE_NAME_REGION="region",e.NODE_NAME_ZIP_CODE="zipcode",e.NODE_NAME_COUNTRY="country",e.STATES_OF_UNITED_STATES="Alabama|Alaska|American Samoa|Arizona|Arkansas|California|Colorado|Connecticut|Delaware|District Of Columbia|Federated States Of Micronesia|Florida|Georgia|Guam|Hawaii|Idaho|Illinois|Indiana|Iowa|Kansas|Kentucky|Louisiana|Maine|Marshall Islands|Maryland|Massachusetts|Michigan|Minnesota|Mississippi|Missouri|Montana|Nebraska|Nevada|New Hampshire|New Jersey|New Mexico|New York|North Carolina|North Dakota|Northern Mariana Islands|Ohio|Oklahoma|Oregon|Palau|Pennsylvania|Puerto Rico|Rhode Island|South Carolina|South Dakota|Tennessee|Texas|Utah|Vermont|Virgin Islands|Virginia|Washington|West Virginia|Wisconsin|Wyoming".split("|"),e.STATES_OF_CANADA="Alberta|British Columbia|Manitoba|New Brunswick|Newfoundland and Labrador|Nova Scotia|Northwest Territories|Nunavut|Ontario|Prince Edward Island|QuÃ©bec|Saskatchewan|Yukon".split("|"),e.STATES_OF_AUSTRALIA="New South Wales|Victoria|Queensland|Tasmania|South Australia|Western Australia|Northern Territory|Australian Capital Territory".split("|"),e.STATES_OF_UNITED_KINGDOM="England|Wales|Scotland|Northern Ireland".split("|"),e.REPLACER_REGEXP=new RegExp("("+e.NODE_NAME_ADDRESS_LINE_1+"|"+e.NODE_NAME_ADDRESS_LINE_2+"|"+e.NODE_NAME_CITY+"|"+e.NODE_NAME_REGION+"|"+e.NODE_NAME_ZIP_CODE+"|"+e.NODE_NAME_COUNTRY+') value="([^"]+)"\\/>',"g"),e}(n.Input);e.Address=m,function(t){t[t.INPUT=0]="INPUT",t[t.DROPDOWN=1]="DROPDOWN"}(f||(f={}));var y=function(){function t(t){switch(this.inputType=t,this.root=document.createElement("div"),this.root.className="wrapper",this.inputType){case f.DROPDOWN:this.input=document.createElement("select"),this.root.appendChild(this.input);var e=document.createElement("div");e.className="expander",e.innerHTML='<span class="vfb vfb-caret-down"></span>',this.root.appendChild(e);break;case f.INPUT:default:this.input=document.createElement("input"),this.root.appendChild(this.input)}}return t.prototype.getRoot=function(){return this.root},Object.defineProperty(t.prototype,"onchange",{get:function(){return this.input.onchange},set:function(t){this.input.onchange=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"oninput",{get:function(){return this.input.oninput},set:function(t){this.input.oninput=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onfocus",{get:function(){return this.input.onfocus},set:function(t){this.input.onfocus=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.input.value},set:function(t){this.input.value=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nodeName",{get:function(){return this.input.nodeName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"getNodeType",{get:function(){return this.input.nodeType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedIndex",{get:function(){return this.input.selectedIndex},set:function(t){this.input.selectedIndex=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.input.options},enumerable:!0,configurable:!0}),t.prototype.add=function(t){this.input.add(t)},t.prototype.remove=function(t){this.input.remove(t)},Object.defineProperty(t.prototype,"placeholder",{get:function(){return this.input.placeholder},set:function(t){this.input.placeholder=t},enumerable:!0,configurable:!0}),t.prototype.focus=function(){this.input.focus()},t.prototype.blur=function(){this.input.blur()},Object.defineProperty(t.prototype,"innerHTML",{get:function(){return this.input.innerHTML},set:function(t){this.input.innerHTML=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parentNode",{get:function(){return this.input.parentNode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readOnly",{get:function(){return this.input.readOnly},set:function(t){this.input.readOnly=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this.input.disabled},set:function(t){this.input.disabled=t},enumerable:!0,configurable:!0}),t.prototype.hasAttribute=function(t){return this.input.hasAttribute(t)},t.prototype.setAttribute=function(t,e){this.input.setAttribute(t,e)},t.prototype.addEventListener=function(t,e,n){this.input.addEventListener(t,e,n)},t.prototype.removeEventListener=function(t,e,n){this.input.removeEventListener(t,e,n)},t}()}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(0)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.getAPIKey=function(){var t;if(t=document.getElementById("google-maps-id")){var e=t.getAttribute("data-api-key")||"";if(e)return e}return this.API_KEY},t.isCustomAPIKey=function(){return this.getAPIKey()!==this.API_KEY},t.getAPI=function(){var t=this;return void 0!==this.promise||(this.promise=n.Deferred((function(e){window.GOOGLE_MAPS_API_LOADER=function(){delete window.GOOGLE_MAPS_API_LOADER;var t=0;!function n(){if(void 0!==window.google&&window.google&&window.google.maps)e.resolve(window.google.maps);else{if(t>100)return void e.reject(new Error("Tired of waiting for google maps api (100 retries reached)"));console.warn("Wait for GOOGLE MAPS api to become available..."),setTimeout(n,100),t++}}()};var n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("defer",""),n.setAttribute("async",""),n.setAttribute("src","//maps.googleapis.com/maps/api/js?key="+t.getAPIKey()+"&libraries=places&callback=GOOGLE_MAPS_API_LOADER"),n.onerror=function(){e.reject(new Error("Google Maps API could not be loaded"))},document.getElementsByTagName("head")[0].appendChild(n)})).promise()),this.promise},t.API_KEY="AIzaSyAxfdB2LzGU43S8iT9UFm5NC0Syufv7-6Y",t}();e.GoogleMapsSDK=r}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(0),n(31)],void 0===(o=function(t,e,n,r){Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.load=function(){return this.loader||(this.loader=n.Deferred((function(t){var e=window.define;window.define=function(){};var n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("src",r.CDN.getCDNUrl("/vendor/brainjs-2.0.0-beta.2/brain-browser.min.js")),n.onload=function(){var n=0;!function r(){window.brain?(window.define=e,t.resolve(window.brain)):++n<500?setTimeout((function(){r()}),20):(window.define=e,t.reject(new Error("Failed to load brainjs (timeout)")))}()},n.onerror=function(){window.define=e,t.reject(new Error("Failed to load brainjs"))},document.getElementsByTagName("head")[0].appendChild(n)})))},t}();e.BrainJsSDK=o}.apply(e,r))||(t.exports=o)},,function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(9),n(4),n(1),n(10),n(13),n(77)],void 0===(o=function(t,e,n,r,o,i,a,u){Object.defineProperty(e,"__esModule",{value:!0});var l=function(t){function e(n,r,o){var i=t.call(this,n,r||e.getDefaultProperties(n),o)||this;return i.addClass("textbox"),i.input=document.createElement("input"),i.input.type="text",i.onPlaceholderChanged(),n.isEditMode()&&i.installEditModeEvents(),i}return s(e,t),e.prototype.getFieldsLayout=function(){return[{domNode:this.input,row:0,span:n.InputSpan.FULL}]},e.prototype.getTypeId=function(){return r.NodeTypes.TEXT_BOX},e.prototype.hasLabel=function(){return!0},e.prototype.hasValue=function(){return!0},e.prototype.getValue=function(){return this.input.value},e.prototype.setValue=function(t){return this.input.value=0===t?"0":String(t||""),this},e.prototype.getNodeName=function(){return"Text"},e.getDefaultProperties=function(e){var n=o.I18n.translateApplicationText("Text","control-defaults"),r=t.addValidationProperties.call(this,t.addInputProperties.call(this,t.addLabelProperties.call(this,t.addSizeProperties.call(this,{name:"Q",visibility:"",formula:"",placeholder:o.I18n.translateApplicationText("Description","control-defaults.short-text")}),n,e),e));return r.validation.unique=!1,r},e.prototype.getTranslations=function(){var t=[];if(this.properties.placeholder&&t.push({original:this.properties.placeholder}),this.properties.label.text&&t.push({original:this.properties.label.text}),this.hasProperty("validation.customErrorMessage")){var e=this.getProperty("validation.customErrorMessage");e&&t.push({original:e,context:"form-fields-errors"})}return t},e.prototype.getRenderedCSS=function(){var t=i.cast(this.properties.label.color),e=i.cast(this.properties.label.font.family),n=i.cast(this.properties.label.font.size),r=i.cast(this.properties.label.font.bold)?"bold":"normal",o=i.cast(this.properties.label.font.italic)?"italic":"normal",s=i.cast(this.properties.label.font.underline)?"underline":"none",a=i.cast(this.properties.label.font.align),u=i.cast(this.properties.input.color),l=i.cast(this.properties.input.backgroundColor),c=i.cast(this.properties.input.borderColor),p=i.cast(this.properties.input.borderWidth),d=i.cast(this.properties.input.borderRadius),h=i.cast(this.properties.input.borderStyle),f=i.cast(this.properties.input.font.family),g=i.cast(this.properties.input.font.size);return"\n            > label {\n                color: "+t+";\n                font-size: "+n+'px;\n                font-family: "'+e+'";\n                font-weight: '+r+";\n                font-style: "+o+";\n                text-decoration: "+s+";\n                text-align: "+a+";\n            }\n            input[type=text] {\n                color: "+u+";\n                background-color: "+l+";\n                border: "+p+" "+h+" "+c+";\n                border-radius: "+d+";\n                font-weight: "+(i.cast(this.properties.input.font.bold)?"bold":"normal")+";\n                font-style: "+(i.cast(this.properties.input.font.italic)?"italic":"normal")+";\n                text-decoration: "+(i.cast(this.properties.input.font.underline)?"underline":"none")+";\n                text-align: "+i.cast(this.properties.input.font.align)+";\n                font-size: "+g+'px;\n                font-family: "'+f+'";\n                &:hover,\n                &:focus {\n                    border-color: '+this.document.getProperty("theme.selection.borderColor")+";\n                }\n                &:focus {\n                    background-color: "+this.document.getProperty("theme.selection.backgroundColor")+";\n                }\n            }\n        "},e.prototype.onPlaceholderChanged=function(){this.input.placeholder=this.getProperty("placeholder")||"",this.getDocument().isEditMode()&&this.input.placeholder!==this.input.value&&(this.input.value=this.input.placeholder)},e.prototype.installEditModeEvents=function(){var t=this;this.input.value=this.getProperty("placeholder")||"",this.input.oninput=function(){t.setProperty("placeholder",t.input.value,t),t.input.placeholder=t.input.value},this.input.onfocus=function(){setTimeout((function(){t.getDocument().getSelection().getItem()!==t&&t.getDocument().getSelection().set(t,n.SelectionInputContext.INPUT,t.input)}),0)}},e.prototype.listenToUserInput=function(t){var e=this;return this.input.oninput=function(){t.updateValue(e)},this},e.prototype.performTranslation=function(){this.labelDOMNode&&(this.labelDOMNode.textContent=o.I18n.translateViewFormText(this.getProperty("label.text"),this.getLabelI18nContext())),this.input&&(this.input.placeholder=o.I18n.translateViewFormText(this.getProperty("placeholder")))},e.prototype.setReadOnly=function(t){return this.input.readOnly=t,this},e.prototype.isReadOnly=function(){return this.input.readOnly},e.prototype.supportsLabelInsideRendering=function(){return!0},e.prototype.embedInPDFPage=function(t){t.writeHTMLElement(this.labelDOMNode);var e=t.getDocument().create(a.PDFNodeEntityType.INPUT_TEXT);t.initializeFieldDimensions(this.input,e),e.setBackgroundColor(i.cast(this.properties.input.backgroundColor)).setTextColor(i.cast(this.properties.input.color)).setBorderWidth(parseInt(i.cast(this.properties.input.borderWidth)||"1")).setBorderColor(i.cast(this.properties.input.borderColor)).setValue(this.getProperty("placeholder")).setFontFamily(i.cast(this.properties.input.font.family)).setMultiLine(!1).setName(this.getProperty("name")).setFontSize(i.cast(this.properties.input.font.size)).setRequired(this.isRequired()).setRepeatedIndex(this.getRepeatedIndex()),t.appendChild(e)},e.prototype.supportsDefaultValue=function(){return!0},e.prototype.getDefaultValueStrategy=function(){return new u.SingleLineTextInputDefaultValue},e}(n.Input);e.TextBox=l}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(3),n(21),n(29),n(6)],void 0===(o=function(t,e,n,r,o,i){var a;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.MMDDYYYY="date.mmddyyyy",t.DDMMYYYY="date.ddmmyyyy"}(a=e.DateInputFormat||(e.DateInputFormat={}));var u=function(t){function e(e){void 0===e&&(e=a.MMDDYYYY);var n=t.call(this)||this;return n.lastError=null,n.minDate=null,n.maxDate=null,n.root=document.createElement("div"),n.root.setAttribute("data-role","date-input"),n.focusedGroup=0,n.days=new p,n.months=new d,n.years=new h,n.input=document.createElement("input"),n.input.type="number",n.root.appendChild(n.input),n.separator1=document.createElement("div"),n.separator1.setAttribute("data-role","datetime-separator"),n.separator2=document.createElement("div"),n.separator2.setAttribute("data-role","datetime-separator"),n.separator1.textContent=n.separator2.textContent="/",n.clearButton=document.createElement("div"),n.clearButton.setAttribute("data-role","clear"),n.clearButton.innerHTML="<span class='vfb vfb-close'></span>",n.groupsOrder=[],n.setFormat(e),n.initEvents(),n}return s(e,t),e.prototype.setMinDate=function(t){return this.minDate=t||null,this},e.prototype.setMaxDate=function(t){return this.maxDate=t||null,this},e.prototype.getRoot=function(){return this.root},e.prototype.getInput=function(){return this.input},e.prototype.setFormat=function(t){switch(this.format=t,this.groupsOrder.splice(0,this.groupsOrder.length),t){case a.MMDDYYYY:this.root.appendChild(this.months.getRoot()),this.root.appendChild(this.separator1),this.root.appendChild(this.days.getRoot()),this.root.appendChild(this.separator2),this.root.appendChild(this.years.getRoot()),this.groupsOrder.push(this.months),this.groupsOrder.push(this.days),this.groupsOrder.push(this.years);break;case a.DDMMYYYY:default:this.root.appendChild(this.days.getRoot()),this.root.appendChild(this.separator1),this.root.appendChild(this.months.getRoot()),this.root.appendChild(this.separator2),this.root.appendChild(this.years.getRoot()),this.groupsOrder.push(this.days),this.groupsOrder.push(this.months),this.groupsOrder.push(this.years)}return this.root.appendChild(this.clearButton),this},e.prototype.initEvents=function(){var t=this;this.days.on("focus-next",(function(){t.focusNextGroup()})),this.months.on("focus-next",(function(){t.focusNextGroup()})),this.years.on("focus-next",(function(){t.focusNextGroup()})),this.input.onfocus=function(){t.focusedGroup=0,t.root.setAttribute("data-focused-group",String(t.focusedGroup))},this.input.onblur=function(){t.root.removeAttribute("data-focused-group")},this.input.onkeydown=function(e){var n=!1;switch(e.keyCode||e.charCode){case r.KeyboardDriver.LEFT:t.focusPreviousGroup(),n=!0;break;case r.KeyboardDriver.RIGHT:t.focusNextGroup(),n=!0;break;case r.KeyboardDriver.UP:t.decrementCurrentGroup(),n=!0;break;case r.KeyboardDriver.DOWN:t.incrementCurrentGroup(),n=!0;break;case r.KeyboardDriver.ENTER:case r.KeyboardDriver.SPACE:case r.KeyboardDriver.F4:t.trigger("picker"),n=!0;break;case r.KeyboardDriver.TAB:e.shiftKey?t.focusedGroup>0&&(t.focusPreviousGroup(),n=!0):t.focusedGroup<2&&(t.focusNextGroup(),n=!0);break;case r.KeyboardDriver.BACKSPACE:case r.KeyboardDriver.DEL:case r.KeyboardDriver.ESC:t.clearFocusedGroup(),n=!0;break;default:n=!1}n&&(e.preventDefault(),e.stopPropagation()),setTimeout((function(){t.input.value=""}),2)},this.input.oninput=function(){if(""!==t.input.value){var e=t.input.value;/^[0-9]$/.test(e)&&t.writeInFocusedGroup(parseInt(e)),t.input.value=""}},this.input.onmousedown=function(e){for(var n=[],r=0,o=t.groupsOrder.length;r<o;r++)n.push(t.groupsOrder[r].getRoot().getBoundingClientRect());var i=2,s=e.clientX;for(r=n.length-1;r>-1;r--)n[r].left+n[r].width>=s&&(i=r);setTimeout((function(){t.focusedGroup=i,t.root.setAttribute("data-focused-group",String(i))}),0)},this.clearButton.onclick=function(){t.clearValue()},this.on("input",(function(){var e=t.getValue();t.updateInputErrorState(e),t.updateInputFilledState()}))},e.prototype.focusNextGroup=function(){2!==this.focusedGroup&&(this.focusedGroup++,this.focusedGroup>2&&(this.focusedGroup=0),this.root.setAttribute("data-focused-group",String(this.focusedGroup)))},e.prototype.focusPreviousGroup=function(){0!==this.focusedGroup&&(this.focusedGroup--,this.focusedGroup<0&&(this.focusedGroup=2),this.root.setAttribute("data-focused-group",String(this.focusedGroup)))},e.prototype.clearFocusedGroup=function(){this.groupsOrder[this.focusedGroup].write(null),this.trigger("input")},e.prototype.writeInFocusedGroup=function(t){this.groupsOrder[this.focusedGroup].write(t),this.trigger("input")},e.prototype.decrementCurrentGroup=function(){this.groupsOrder[this.focusedGroup].decrement(),this.trigger("input")},e.prototype.incrementCurrentGroup=function(){this.groupsOrder[this.focusedGroup].increment(),this.trigger("input")},e.prototype.updateInputErrorState=function(t){null===t||this.lastError?(this.root.setAttribute("data-has-date-error",""),this.root.title=this.getLastError()):(this.root.removeAttribute("data-has-date-error"),this.root.title="")},e.prototype.updateInputFilledState=function(){this.days.getValue()||this.months.getValue()||this.years.getValue()?this.root.setAttribute("data-allow-clear",""):this.root.removeAttribute("data-allow-clear")},e.prototype.clearValue=function(){this.days.setValue(null),this.months.setValue(null),this.years.setValue(null),this.input.focus(),this.trigger("input")},e.prototype.getLastError=function(){return this.lastError},e.prototype.getValue=function(){this.lastError=null;var t=this.days.getValue(),n=this.months.getValue(),r=this.years.getValue();if(""===t&&""===n&&""===r)return"";if(""===t||""===n||""===r)return this.lastError="Date is incomplete",null;var s=parseInt(t),u=parseInt(n),l=parseInt(r);if(isNaN(s)||isNaN(u)||isNaN(l))return this.lastError="Date is malformed",null;if(o.DateUtils.isValidDate(s,u,l)){var c=void 0;if(null!==this.minDate&&!e.isDateGreaterOrEqualWith(s,u,l,this.minDate)){switch(this.format){case a.MMDDYYYY:c=i.Strings.strPad(String(this.minDate.month),2,"0",i.EStringPadType.PAD_LEFT)+"/"+i.Strings.strPad(String(this.minDate.day),2,"0",i.EStringPadType.PAD_LEFT)+"/"+i.Strings.strPad(String(this.minDate.year),2,"0",i.EStringPadType.PAD_LEFT);break;case a.DDMMYYYY:default:c=i.Strings.strPad(String(this.minDate.day),2,"0",i.EStringPadType.PAD_LEFT)+"/"+i.Strings.strPad(String(this.minDate.month),2,"0",i.EStringPadType.PAD_LEFT)+"/"+i.Strings.strPad(String(this.minDate.year),2,"0",i.EStringPadType.PAD_LEFT)}this.lastError="Date must be >= than <DATE>".replace(/<DATE>/gi,c)}if(!this.lastError&&null!==this.maxDate&&!e.isDateLowerOrEqualWith(s,u,l,this.maxDate)){switch(this.format){case a.MMDDYYYY:c=i.Strings.strPad(String(this.maxDate.month),2,"0",i.EStringPadType.PAD_LEFT)+"/"+i.Strings.strPad(String(this.maxDate.day),2,"0",i.EStringPadType.PAD_LEFT)+"/"+i.Strings.strPad(String(this.maxDate.year),2,"0",i.EStringPadType.PAD_LEFT);break;case a.DDMMYYYY:default:c=i.Strings.strPad(String(this.maxDate.day),2,"0",i.EStringPadType.PAD_LEFT)+"/"+i.Strings.strPad(String(this.maxDate.month),2,"0",i.EStringPadType.PAD_LEFT)+"/"+i.Strings.strPad(String(this.maxDate.year),2,"0",i.EStringPadType.PAD_LEFT)}this.lastError="Date must be <= than <DATE>".replace(/<DATE>/gi,c)}return[this.groupsOrder[0].getPaddedValue(),this.groupsOrder[1].getPaddedValue(),this.groupsOrder[2].getPaddedValue()].join("/")}return null},e.prototype.setValue=function(t,e,n){return this.days.setValue(t),this.months.setValue(e),this.years.setValue(n),this.updateInputFilledState(),this.updateInputErrorState(this.getValue()),this},e.prototype.getYear=function(){var t=this.years.getValue();return""===t?null:parseInt(t)},e.prototype.getMonth=function(){var t=this.months.getValue();return""===t?null:parseInt(t)},e.prototype.getDay=function(){var t=this.days.getValue();return""===t?null:parseInt(t)},e.prototype.focus=function(){this.input.focus()},e.prototype.getDayGroup=function(){return this.days},e.prototype.getMonthGroup=function(){return this.months},e.prototype.getYearGroup=function(){return this.years},e.isDateGreaterOrEqualWith=function(t,e,n,r){var o=new Date,i=new Date;return o.setMilliseconds(0),o.setSeconds(0),o.setMinutes(0),o.setHours(0),o.setDate(1),o.setMonth(e-1),o.setFullYear(n),o.setDate(t),i.setMilliseconds(0),i.setSeconds(0),i.setMinutes(0),i.setHours(0),i.setDate(1),i.setMonth(r.month-1),i.setFullYear(r.year),i.setDate(r.day),o.getTime()>=i.getTime()},e.isDateLowerOrEqualWith=function(t,e,n,r){var o=new Date,i=new Date;return o.setMilliseconds(0),o.setSeconds(59),o.setMinutes(59),o.setHours(23),o.setDate(1),o.setMonth(e-1),o.setFullYear(n),o.setDate(t),i.setMilliseconds(0),i.setSeconds(59),i.setMinutes(59),i.setHours(23),i.setDate(1),i.setMonth(r.month-1),i.setFullYear(r.year),i.setDate(r.day),o.getTime()<=i.getTime()},e}(n.EventEmitter);e.DateInput=u;var l=function(t){function e(e){var n=t.call(this)||this;return n.is12HoursFormat=e,n.lastError=null,n.minTime=null,n.maxTime=null,n.root=document.createElement("div"),n.root.setAttribute("data-role","date-input"),n.focusedGroup=0,n.input=document.createElement("input"),n.input.type="number",n.root.appendChild(n.input),n.clearButton=document.createElement("div"),n.clearButton.setAttribute("data-role","clear"),n.clearButton.innerHTML="<span class='vfb vfb-close'></span>",n.initTimeComponents(),n.initEvents(),n}return s(e,t),e.prototype.setTimeFormat=function(t){return t!==this.is12HoursFormat&&(this.is12HoursFormat=!!t,this.initTimeComponents()),this},e.prototype.initTimeComponents=function(){var t=this;this.hours&&this.root.removeChild(this.hours.getRoot()),this.minutes&&this.root.removeChild(this.minutes.getRoot()),this.ampm&&this.root.removeChild(this.ampm.getRoot()),this.separator1&&this.root.removeChild(this.separator1),this.separator2&&this.root.removeChild(this.separator2),this.is12HoursFormat?(this.input.type="text",this.hours=new g,this.minutes=new m,this.ampm=new y,this.groupsOrder=[this.hours,this.minutes,this.ampm],this.separator1=document.createElement("div"),this.separator1.setAttribute("data-role","datetime-separator"),this.separator1.textContent=":",this.separator2=document.createElement("div"),this.separator2.setAttribute("data-role","datetime-separator"),this.separator2.textContent=" ",this.root.appendChild(this.hours.getRoot()),this.root.appendChild(this.separator1),this.root.appendChild(this.minutes.getRoot()),this.root.appendChild(this.separator2),this.root.appendChild(this.ampm.getRoot()),this.root.appendChild(this.clearButton)):(this.input.type="number",this.hours=new f,this.minutes=new m,this.ampm=void 0,this.groupsOrder=[this.hours,this.minutes],this.separator1=document.createElement("div"),this.separator1.setAttribute("data-role","datetime-separator"),this.separator1.textContent=":",this.separator2=void 0,this.root.appendChild(this.hours.getRoot()),this.root.appendChild(this.separator1),this.root.appendChild(this.minutes.getRoot()),this.root.appendChild(this.clearButton)),this.hours.on("focus-next",(function(){t.focusNextGroup()})),this.minutes.on("focus-next",(function(){t.focusNextGroup()})),this.ampm&&(this.ampm.on("focus-next",(function(){t.focusNextGroup()})),this.hours.on("input",(function(){t.correctAMPMValueIfNeededWhenHoursAreSet()})),this.ampm.on("input",(function(){t.correctHoursValueIfNeededWhenAMPMIsSet()}))),this.focusedGroup=0},e.prototype.setMinTime=function(t){return this.minTime=t,this},e.prototype.setMaxTime=function(t){return this.maxTime=t,this},e.prototype.getRoot=function(){return this.root},e.prototype.initEvents=function(){var t=this;this.input.onfocus=function(){t.focusedGroup=0,t.root.setAttribute("data-focused-group",String(t.focusedGroup))},this.input.onblur=function(){t.root.removeAttribute("data-focused-group")},this.input.onkeydown=function(e){var n=!1;switch(e.keyCode||e.charCode){case r.KeyboardDriver.LEFT:t.focusPreviousGroup(),n=!0;break;case r.KeyboardDriver.RIGHT:t.focusNextGroup(),n=!0;break;case r.KeyboardDriver.UP:t.decrementCurrentGroup(),n=!0;break;case r.KeyboardDriver.DOWN:t.incrementCurrentGroup(),n=!0;break;case r.KeyboardDriver.ENTER:case r.KeyboardDriver.SPACE:case r.KeyboardDriver.F4:t.trigger("picker"),n=!0;break;case r.KeyboardDriver.TAB:e.shiftKey?t.focusedGroup>0&&(t.focusPreviousGroup(),n=!0):t.focusedGroup<1+~~t.is12HoursFormat&&(t.focusNextGroup(),n=!0);break;case r.KeyboardDriver.BACKSPACE:case r.KeyboardDriver.DEL:case r.KeyboardDriver.ESC:t.clearFocusedGroup(),n=!0;break;default:n=!1}n&&(e.preventDefault(),e.stopPropagation()),setTimeout((function(){t.input.value=""}),2)},this.input.oninput=function(){if(""!==t.input.value){var e=t.input.value;/^[0-9]$/.test(e)?t.writeInFocusedGroup(parseInt(e)):t.writeRandomCharacterInFocusedGroup(e),t.input.value=""}},this.input.onmousedown=function(e){for(var n=[],r=0,o=t.groupsOrder.length;r<o;r++)n.push(t.groupsOrder[r].getRoot().getBoundingClientRect());var i=1+(t.ampm?1:0),s=e.clientX;for(r=n.length-1;r>-1;r--)n[r].left+n[r].width>=s&&(i=r);setTimeout((function(){t.focusedGroup=i,t.root.setAttribute("data-focused-group",String(i))}),0)},this.clearButton.onclick=function(){t.clearValue()},this.on("input",(function(){var e=t.getValue();t.updateInputErrorState(e),t.updateInputFilledState()}))},e.prototype.focusNextGroup=function(){var t=this.groupsOrder.length-1;this.focusedGroup!==t&&(this.focusedGroup++,this.focusedGroup>t&&(this.focusedGroup=0),this.root.setAttribute("data-focused-group",String(this.focusedGroup)))},e.prototype.focusPreviousGroup=function(){0!==this.focusedGroup&&(this.focusedGroup--,this.focusedGroup<0&&(this.focusedGroup=this.groupsOrder.length-1),this.root.setAttribute("data-focused-group",String(this.focusedGroup)))},e.prototype.clearFocusedGroup=function(){this.groupsOrder[this.focusedGroup].write(null),this.trigger("input")},e.prototype.writeInFocusedGroup=function(t){this.groupsOrder[this.focusedGroup].write(t),this.trigger("input")},e.prototype.decrementCurrentGroup=function(){this.groupsOrder[this.focusedGroup].decrement(),this.trigger("input")},e.prototype.incrementCurrentGroup=function(){this.groupsOrder[this.focusedGroup].increment(),this.trigger("input")},e.prototype.updateInputErrorState=function(t){null===t||this.lastError?(this.root.setAttribute("data-has-date-error",""),this.root.title=this.lastError):(this.root.removeAttribute("data-has-date-error"),this.root.title="")},e.prototype.updateInputFilledState=function(){this.hours.getValue()||this.minutes.getValue()||this.ampm&&this.ampm.getValue()?this.root.setAttribute("data-allow-clear",""):this.root.removeAttribute("data-allow-clear")},e.prototype.clearValue=function(t){void 0===t&&(t=!0),this.hours.setValue(null),this.minutes.setValue(null),this.ampm&&this.ampm.setValue(null),t?(this.input.focus(),this.trigger("input")):(this.updateInputFilledState(),this.updateInputErrorState(this.getValue()))},e.prototype.getValue=function(){return this.is12HoursFormat?this.getValueInShortFormat():this.getValueInLongFormat()},e.prototype.getValueInLongFormat=function(){this.lastError=null;var t=this.hours.getValue(),n=this.minutes.getValue();if(""===t&&""===n)return"";if(""===t||""===n)return this.lastError="Incomplete time",null;var r=parseInt(t),o=parseInt(n);if(isNaN(r)||isNaN(o))return this.lastError="Malformed time",null;if(r>=0&&r<24&&o>=0&&o<60){if(null!==this.minTime&&null!==this.maxTime&&e.timeConstraintToInt(this.minTime)>e.timeConstraintToInt(this.maxTime)){if(!(e.isTimeGreaterOrEqualThan(r,o,this.minTime)&&e.isTimeLowerOrEqualThan(r,o,{hour:23,minute:59})||e.isTimeGreaterOrEqualThan(r,o,{hour:0,minute:0})&&e.isTimeLowerOrEqualThan(r,o,this.maxTime))){var s=i.Strings.strPad(String(this.minTime.hour),2,"0",i.EStringPadType.PAD_LEFT)+":"+i.Strings.strPad(String(this.minTime.minute),2,"0",i.EStringPadType.PAD_LEFT),a=i.Strings.strPad(String(this.maxTime.hour),2,"0",i.EStringPadType.PAD_LEFT)+":"+i.Strings.strPad(String(this.maxTime.minute),2,"0",i.EStringPadType.PAD_LEFT);this.lastError="Time must be in interval <TIME1> - <TIME2>".replace(/<TIME1>/gi,s).replace(/<TIME2>/gi,a)}}else{if(null!==this.minTime&&!e.isTimeGreaterOrEqualThan(r,o,this.minTime)){var u=i.Strings.strPad(String(this.minTime.hour),2,"0",i.EStringPadType.PAD_LEFT)+":"+i.Strings.strPad(String(this.minTime.minute),2,"0",i.EStringPadType.PAD_LEFT);this.lastError="Time must be >= than <time>".replace(/<time>/gi,u)}if(null===this.lastError&&null!==this.maxTime&&!e.isTimeLowerOrEqualThan(r,o,this.maxTime)){var l=i.Strings.strPad(String(this.maxTime.hour),2,"0",i.EStringPadType.PAD_LEFT)+":"+i.Strings.strPad(String(this.maxTime.minute),2,"0",i.EStringPadType.PAD_LEFT);this.lastError="Time must be <= than <time>".replace(/<time>/gi,l)}}return[this.groupsOrder[0].getPaddedValue(),this.groupsOrder[1].getPaddedValue()].join(":")}return null},e.prototype.getValueInShortFormat=function(){this.lastError=null;var t=this.hours.getValue(),n=this.minutes.getValue(),r=this.ampm.getValue();if(""===t&&""===n&&""===r)return"";if(""===t||""===n||""===r)return this.lastError="Incomplete time",null;var o=parseInt(t),s=parseInt(n),a=parseInt(r);if(isNaN(o)||isNaN(s)||isNaN(a))return this.lastError="Malformed time",null;if((o>=0&&0===a&&o<12||o>0&&1===a&&o<13)&&s>=0&&s<60){if(null!==this.minTime&&null!==this.maxTime&&e.timeConstraintToInt(this.minTime)>e.timeConstraintToInt(this.maxTime)){if(!(e.isTimeGreaterOrEqualThanAMPM(o,s,a,this.minTime)&&e.isTimeLowerOrEqualThanAMPM(o,s,a,{hour:23,minute:59})||e.isTimeGreaterOrEqualThanAMPM(o,s,a,{hour:0,minute:0})&&e.isTimeLowerOrEqualThanAMPM(o,s,a,this.maxTime))){var u=e.formatTimeConstraintToAMPMString(this.minTime),l=e.formatTimeConstraintToAMPMString(this.maxTime);this.lastError="Time must be in interval <TIME1> - <TIME2>".replace(/<TIME1>/gi,u).replace(/<TIME2>/gi,l)}}else{if(null!==this.minTime&&!e.isTimeGreaterOrEqualThanAMPM(o,s,a,this.minTime)){var c=e.formatTimeConstraintToAMPMString(this.minTime);this.lastError="Time must be >= than <time>".replace(/<time>/gi,c)}if(null===this.lastError&&null!==this.maxTime&&!e.isTimeLowerOrEqualThanAMPM(o,s,a,this.maxTime)){var p=e.formatTimeConstraintToAMPMString(this.maxTime);this.lastError="Time must be <= than <time>".replace(/<time>/gi,p)}}return i.Strings.strPad(String(o+(12===o&&a?0:o<12&&a?12:0)),2,"0",i.EStringPadType.PAD_LEFT)+":"+this.groupsOrder[1].getPaddedValue()}return null},e.timeConstraintToInt=function(t){return 60*t.hour+t.minute},e.prototype.setValue=function(t,e){if(this.is12HoursFormat){var n=12===t?t:t>12?t-12:t,r=t>=12?1:0;this.hours.setValue(n),this.minutes.setValue(e),this.ampm.setValue(r)}else this.hours.setValue(t),this.minutes.setValue(e);return this.updateInputFilledState(),this.updateInputErrorState(this.getValue()),this},e.prototype.getHours=function(){var t=this.hours.getValue();if(""===t)return null;if(this.is12HoursFormat){var e=parseInt(t);if(12!==e)e+=~~this.ampm.getValue()?12:0;return e}return parseInt(t)},e.prototype.getMinutes=function(){var t=this.minutes.getValue();return""===t?null:parseInt(t)},e.prototype.focus=function(){this.input.focus()},e.prototype.getHoursGroup=function(){return this.hours},e.prototype.getMinutesGroup=function(){return this.minutes},e.prototype.getAMPMGroup=function(){return this.ampm||null},e.prototype.getInput=function(){return this.input},e.prototype.writeRandomCharacterInFocusedGroup=function(t){var e=this.groupsOrder[this.focusedGroup];e===this.ampm&&this.is12HoursFormat&&["a","p"].indexOf(String(t).toLowerCase())>-1&&(e.write(t),this.trigger("input"))},e.prototype.correctAMPMValueIfNeededWhenHoursAreSet=function(){var t=this.hours.getValue();null!==t&&t.length&&("0"===t||"00"===t?this.ampm.setValue(0):"12"===t&&this.ampm.setValue(1))},e.prototype.correctHoursValueIfNeededWhenAMPMIsSet=function(){var t=this.hours.getValue(),e=this.ampm.getValue();null!==e&&null!==t&&e.length&&t.length&&("0"===e&&"12"===t?this.hours.setValue(0):"1"!==e||"0"!==t&&"00"!==t||this.hours.setValue(12))},e.formatTimeConstraintToAMPMString=function(t){var e=12===t.hour?12:t.hour>12?t.hour-12:t.hour,n=t.hour>11?"PM":"AM";return String(e)+":"+i.Strings.strPad(String(t.minute),2,"0",i.EStringPadType.PAD_LEFT)+" "+n},e.isTimeGreaterOrEqualThan=function(t,e,n){return 60*t+e>=60*n.hour+n.minute},e.isTimeLowerOrEqualThan=function(t,e,n){return 60*t+e<=60*n.hour+n.minute},e.isTimeGreaterOrEqualThanAMPM=function(t,e,n,r){var o=12===t&&1===n?t:n?t+12:t;return this.isTimeGreaterOrEqualThan(o,e,r)},e.isTimeLowerOrEqualThanAMPM=function(t,e,n,r){var o=12===t&&1===n?t:n?t+12:t;return this.isTimeLowerOrEqualThan(o,e,r)},e}(n.EventEmitter);e.TimeInput=l;var c=function(t){function e(e,n,r){var o=t.call(this)||this;return o.minValue=e,o.maxValue=n,o.placeholder=r,o.root=document.createElement("div"),o.root.setAttribute("data-role","datetime-group"),o.stringValue="",o.render(),o}return s(e,t),e.prototype.setPlaceholder=function(t){return this.placeholder=t,this.render(),this},e.prototype.getRoot=function(){return this.root},e.prototype.render=function(){""===this.stringValue?this.root.textContent=this.placeholder:this.root.textContent=i.Strings.strPad(this.stringValue,String(this.maxValue).length,"0",i.EStringPadType.PAD_LEFT)},e.prototype.write=function(t){null===t?(this.stringValue="",this.trigger("input")):this.wouldValueExceedBoundariesIfAnyDigitWouldBeAdded()?(this.stringValue=String(t),this.trigger("input")):(this.stringValue=this.stringValue.concat(String(t)),~~this.stringValue>this.maxValue&&(this.stringValue=String(t)),this.stringValue.length>String(this.maxValue).length&&(this.stringValue=this.stringValue.substr(1)),this.wouldValueExceedBoundariesIfAnyDigitWouldBeAdded()?(this.stringValue=i.Strings.strPad(this.stringValue,String(this.maxValue).length,"0",i.EStringPadType.PAD_LEFT),this.trigger("input"),this.trigger("focus-next")):this.trigger("input")),this.render()},e.prototype.wouldValueExceedBoundariesIfAnyDigitWouldBeAdded=function(){return""!==this.stringValue&&parseInt(this.stringValue.concat("0"))>this.maxValue},e.prototype.decrement=function(){""===this.stringValue?this.stringValue=String(this.maxValue):(this.stringValue=String(parseInt(this.stringValue)-1),parseInt(this.stringValue)<this.minValue&&(this.stringValue=String(this.maxValue))),this.render()},e.prototype.increment=function(){""===this.stringValue?this.stringValue=String(this.minValue):(this.stringValue=String(parseInt(this.stringValue)+1),parseInt(this.stringValue)>this.maxValue&&(this.stringValue=String(this.minValue))),this.render()},e.prototype.getValue=function(){return this.stringValue},e.prototype.setValue=function(t){this.stringValue=null===t?"":String(t),this.render()},e.prototype.getPaddedValue=function(){return i.Strings.strPad(this.stringValue,String(this.maxValue).length,"0",i.EStringPadType.PAD_LEFT)},e}(n.EventEmitter),p=function(t){function e(){return t.call(this,1,31,"DD")||this}return s(e,t),e.prototype.setValue=function(e){t.prototype.setValue.call(this,e||null)},e}(c),d=function(t){function e(){return t.call(this,1,12,"MM")||this}return s(e,t),e.prototype.setValue=function(e){t.prototype.setValue.call(this,e||null)},e}(c),h=function(t){function e(){return t.call(this,1,9999,"YYYY")||this}return s(e,t),e.prototype.setValue=function(e){t.prototype.setValue.call(this,e||null)},e}(c),f=function(t){function e(){return t.call(this,0,23,"HH")||this}return s(e,t),e}(c),g=function(t){function e(){return t.call(this,0,12,"HH")||this}return s(e,t),e}(c),m=function(t){function e(){return t.call(this,0,59,"MM")||this}return s(e,t),e}(c),y=function(t){function e(){return t.call(this,0,1,"  ")||this}return s(e,t),e.prototype.render=function(){""===this.stringValue?this.root.innerHTML='<div class="ampm-placeholder"><span>AM</span><span>PM</span></div>':this.root.textContent=0==~~this.stringValue?"AM":"PM"},e.prototype.write=function(t){null===t?(this.stringValue="",this.trigger("input")):(this.stringValue=["1","p"].indexOf(String(t).toLowerCase())>-1?"1":"0",this.trigger("input"),this.trigger("focus-next")),this.render()},e.prototype.decrement=function(){""===this.stringValue?this.stringValue="0":this.stringValue=String(1-~~!!~~this.stringValue),this.render()},e.prototype.increment=function(){this.decrement()},e}(c)}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(0),n(9),n(4),n(126),n(249),n(253),n(1),n(110),n(7),n(10),n(13),n(128),n(101)],void 0===(o=function(t,e,n,r,o,i,a,u,l,c,p,d,h,f,g){Object.defineProperty(e,"__esModule",{value:!0});var m=function(t){function e(n,r,o){var i=t.call(this,n,r||e.getDefaultProperties(n),o)||this;return i.inputs=[],i.addClass("radio"),i.onChoicesChanged(!1),i.root.tabIndex=0,i}return s(e,t),e.prototype.getFieldsLayout=function(){var t=[],e=this.getLayoutType();if(e===c.CheckboxLayout.NONE){for(var n=this.inputs.length,o=0,i=n;o<i;o++)t.push({row:o,span:r.InputSpan.FULL,domNode:this.inputs[o].getRoot()});this.other&&(t.push({row:n,span:r.InputSpan.FULL,domNode:this.other.getRoot()}),n++),this.addOtherInput&&t.push({row:n,span:r.InputSpan.FULL,domNode:this.addOtherInput.getRoot()})}else{var s=void 0,a=void 0;switch(e){case c.CheckboxLayout.TWO_COLUMNS:s=2,a=r.InputSpan.HALF;break;case c.CheckboxLayout.THREE_COLUMNS:a=r.InputSpan.THIRD,s=3;break;case c.CheckboxLayout.FOUR_COLUMNS:a=r.InputSpan.QUARTER,s=4}var u=0,l=this.inputs,p=0;for(o=0,i=l.length;o<i;o++)t.push({row:p,span:u===s-1?r.InputSpan.REMAINING:a,domNode:l[o].getRoot()}),++u===s&&(u=0,p++);0!==u&&p++,this.other&&(t.push({row:p,span:r.InputSpan.FULL,domNode:this.other.getRoot()}),p++),this.addOtherInput&&t.push({row:p,span:r.InputSpan.FULL,domNode:this.addOtherInput.getRoot()})}return t},e.prototype.getLayoutType=function(){switch(this.hasProperty("layout.type")?this.getProperty("layout.type"):c.CheckboxLayout.NONE){case c.CheckboxLayout.TWO_COLUMNS:case c.CheckboxLayout.TWO_ROWS:return c.CheckboxLayout.TWO_COLUMNS;case c.CheckboxLayout.THREE_COLUMNS:case c.CheckboxLayout.THREE_ROWS:return c.CheckboxLayout.THREE_COLUMNS;case c.CheckboxLayout.FOUR_COLUMNS:case c.CheckboxLayout.FOUR_ROWS:return c.CheckboxLayout.FOUR_COLUMNS;default:return c.CheckboxLayout.NONE}},e.prototype.getNodeName=function(){return"Question"},e.prototype.getTypeId=function(){return o.NodeTypes.RADIO},e.prototype.getValue=function(){for(var t=0,e=this.inputs.length;t<e;t++){var n=this.inputs[t].getValue();if(this.inputs[t].isChecked()&&n)return n}if(this.other){n=this.other.getValue();if(this.other.isChecked()&&n)return n}return null},e.prototype.hasLabel=function(){return!0},e.prototype.hasValue=function(){return!0},e.prototype.setValue=function(t){if("string"==typeof t){for(var e=!1,n=0,r=this.inputs.length;n<r;n++)this.inputs[n].getValue()===t?(e=!0,this.inputs[n].setChecked(!0)):this.inputs[n].setChecked(!1);this.other&&(!e&&t?this.other.setChecked(!0).setValue(t):this.other.setValue("").setChecked(!1))}else{for(n=0,r=this.inputs.length;n<r;n++)this.inputs[n].setChecked(!1);this.other&&this.other.setValue("").setChecked(!1)}return this},e.getDefaultProperties=function(t){var e=l.I18n.translateApplicationText("Question","control-defaults");return this.addLabelProperties(this.addInputProperties(this.addSizeProperties({name:"Q",visibility:"",formula:"",choices:{text:l.I18n.translateApplicationText("Choice 1\nChoice 2\nChoice 3","control-defaults"),allowOther:!1},layout:{type:c.CheckboxLayout.NONE},validation:{required:!1,customErrorMessage:""}}),t),e,t)},e.prototype.getTranslations=function(){var t=[];this.properties.label.text&&t.push({original:this.properties.label.text});for(var e=this.getTextChoices(),n=e.length,r=0;r<n;r++)t.push({original:e[r]});if(this.properties.choices.allowOther&&t.push({original:l.I18n.translateApplicationText("Other:","control-defaults.choice")}),this.hasProperty("validation.customErrorMessage")){var o=this.getProperty("validation.customErrorMessage");o&&t.push({original:o,context:"form-fields-errors"})}return t},e.prototype.getTextChoices=function(){return void 0!==this.cachedGetTextChoicesResult?this.cachedGetTextChoicesResult:String(this.properties.choices.text||"").split(/(\r\n|\r|\n)/).map((function(t){return t.trim()})).filter((function(t){return""!==t}))},e.prototype.onChoicesChanged=function(t){void 0===t&&(t=!0);for(var e,n=this.getTextChoices(),r=n.length;(e=this.inputs.length)!==r;)e>r?this.inputs.pop():this.inputs.push(new i.RadioInput(this,this.document.isEditMode()));for(var o=0;o<r;o++)this.inputs[o].setChecked(!1).setIndex(o).setValue(n[o]).setDisabled(this.document.isEditMode()).setRemovable(this.document.isEditMode()).setDragable(this.document.isEditMode());this.properties.choices.allowOther?this.other=this.other||new u.RadioOtherInput(this,this.document.isEditMode()).setRemovable(this.document.isEditMode()):this.other&&(this.other=void 0),this.document.isEditMode()&&(this.addOtherInput=this.addOtherInput||new a.AddOtherOptionRadioInput(this),this.addOtherInput.update()),t&&this.render()},e.prototype.getTextAssociatedWithLabel=function(t){if(t===this.labelDOMNode)return this.getProperty("label.text");for(var e=0,n=this.inputs.length;e<n;e++)if(this.inputs[e].getLabelDOMNode()===t)return this.inputs[e].getValue();return""},e.prototype.setLabelTextWhichIsComingFromTheUser=function(e,n){if(n===this.labelDOMNode)return t.prototype.setLabelTextWhichIsComingFromTheUser.call(this,e,n);for(var r=this.getTextChoices(),o=0,i=this.inputs.length;o<i;o++)if(this.inputs[o].getLabelDOMNode()===n){var s=f.RulesTextNormalizer.normalizeText(String(e||"").trim().replace(/[\r\n]+/g," "));return r[o]=s,this.inputs[o].setValue(s,!1),this.setProperty("choices.text",r.join("\n"),this),this}return this},e.prototype.getRenderedCSS=function(){var t=d.cast(this.properties.label.color),e=d.cast(this.properties.label.font.family),n=d.cast(this.properties.label.font.size),r=d.cast(this.properties.label.font.bold)?"bold":"normal",o=d.cast(this.properties.label.font.italic)?"italic":"normal",i=d.cast(this.properties.label.font.underline)?"underline":"none",s=d.cast(this.properties.label.font.align),a=d.cast(this.properties.input.color),u=d.cast(this.properties.input.backgroundColor),l=d.cast(this.properties.input.borderColor),c=d.cast(this.properties.input.borderWidth),p=d.cast(this.properties.input.borderRadius),h=d.cast(this.properties.input.borderStyle),f=d.cast(this.properties.input.font.family),g=d.cast(this.properties.input.font.size),m=d.cast(this.properties.input.font.bold)?"bold":"normal",y=d.cast(this.properties.input.font.italic)?"italic":"normal",v=d.cast(this.properties.input.font.underline)?"underline":"none",b=d.cast(this.properties.input.font.align),C=this.document.getProperty("theme.selection.borderColor");return"\n            > label {\n                color: "+t+";\n                font-size: "+n+'px;\n                font-family: "'+e+'";\n                font-weight: '+r+";\n                font-style: "+o+";\n                text-decoration: "+i+";\n                text-align: "+s+";\n            }\n\n            .input label {\n                font-weight: "+m+";\n                font-style: "+y+";\n                text-decoration: "+v+";\n                text-align: "+b+";\n                font-size: "+g+'px;\n                font-family: "'+f+'";\n                color: '+a+";\n            }\n            \n            .input {\n                .decorator {\n                    color: "+a+";\n                }\n                 &:hover {\n                    .decorator {\n                        color: "+C+";\n                    }\n                }\n                input[type=text] {\n                    color: "+a+";\n                    background-color: "+u+";\n                    border: "+c+" "+h+" "+l+";\n                    border-radius: "+p+";\n                    font-weight: "+m+";\n                    font-style: "+y+";\n                    text-decoration: "+v+";\n                    text-align: "+b+";\n                    font-size: "+g+'px;\n                    font-family: "'+f+'";\n                    \n                    &:hover,\n                    &:focus {\n                        border-color: '+C+";\n                    }\n                    \n                    &:focus {\n                        background-color: "+this.document.getProperty("theme.selection.backgroundColor")+";\n                    }\n                }\n            }\n        "},e.prototype.appendOption=function(){var t=this.getTextChoices();t.push(l.I18n.translateApplicationText("Choice %1","control-defaults.choice",0,t.length+1)),this.setProperty("choices.text",t.join("\n")),this.onChoicesChanged(!0)},e.prototype.appendOtherOption=function(){this.setProperty("choices.allowOther",!0),this.onChoicesChanged(!0)},e.prototype.removeOption=function(t){if(t===this.other)this.setProperty("choices.allowOther",!1);else{var e=this.getTextChoices(),n=t.getIndex();e.splice(n,1),this.setProperty("choices.text",e.join("\n"),this)}this.onChoicesChanged(!0)},e.prototype.getChoiceInputs=function(){return this.inputs.slice(0)},e.prototype.moveChoiceBefore=function(t,e,n){var r;if(t!==e){for(var o=[],i=0,s=this.inputs.length;i<s;i++)this.inputs[i]===t||(this.inputs[i]===e?n?(o.push(e),o.push(t)):(o.push(t),o.push(e)):o.push(this.inputs[i]));(r=this.inputs).splice.apply(r,[0,this.inputs.length].concat(o));var a=[];for(i=0,s=this.inputs.length;i<s;i++)a.push(this.inputs[i].getValue());this.setProperty("choices.text",a.join("\n"),this),this.render()}},e.prototype.listenToUserInput=function(t){for(var e=this,r=0,o=this.inputs.length;r<o;r++)this.inputs[r].getInput().onclick=function(){t.updateValue(e)};this.other&&(this.other.getInput().onclick=function(){t.updateValue(e)},n(this.other.getOtherInput).on("input",(function(){t.updateValue(e)})))},e.prototype.enumerateSubFields=function(){for(var t=[],e=0,n=this.inputs.length;e<n;e++)t.push(this.inputs[e].getValue());return this.other&&t.push("$other"),t},e.prototype.getSubFieldValue=function(t){if(t){if("$other"===t)return this.other?!!this.other.isChecked()&&this.other.getValue():void 0;for(var e=0,n=this.inputs.length;e<n;e++)if(this.inputs[e].getValue()===t)return this.inputs[e].isChecked();return!1}return this.getValue()},e.prototype.performTranslation=function(){this.labelDOMNode&&(this.labelDOMNode.textContent=l.I18n.translateViewFormText(this.getProperty("label.text"),this.getLabelI18nContext()));for(var t=0,e=this.inputs.length;t<e;t++)this.inputs[t].getLabelDOMNode().textContent=l.I18n.translateViewFormText(this.inputs[t].getValue());this.other&&(this.other.getLabelDOMNode().textContent=l.I18n.translateViewFormText(l.I18n.translateApplicationText("Other:","control-defaults.other")))},e.prototype.randomizeChoices=function(){return this.cachedGetTextChoicesResult=p.Helpers.arrayShuffle(p.Helpers.arrayShuffle(this.getTextChoices())),this.onChoicesChanged(!0),this},e.prototype.supportsLabelInsideRendering=function(){return!1},e.prototype.embedInPDFPage=function(t){t.writeHTMLElement(this.labelDOMNode);var e=t.getDocument().create(h.PDFNodeEntityType.INPUT_RADIO);e.setName(this.getProperty("name")).setFontFamily(d.cast(this.properties.input.font.family)).setFontSize(d.cast(this.properties.input.font.size)).setRequired(this.isRequired()).setRepeatedIndex(this.getRepeatedIndex()).setDefaultUncheckedValue(null);for(var n=0,r=this.getChoiceInputs(),o=r.length;n<o;n++){var i=~~(a=r[n].getInput().nextSibling.getBoundingClientRect()).top-t.getDimensions().top,s=~~a.left-t.getDimensions().left;t.writeHTMLElement(r[n].getLabelDOMNode()),e.addOption(r[n].getValue(),{left:s,top:i},r[n].isOther())}if(this.other){var a,u=t.getDocument().create(h.PDFNodeEntityType.INPUT_TEXT),l=d.cast(this.properties.input.backgroundColor),c=d.cast(this.properties.input.borderColor),p=parseInt(d.cast(this.properties.input.borderWidth))||1;i=~~(a=this.other.getInput().nextSibling.getBoundingClientRect()).top-t.getDimensions().top,s=~~a.left-t.getDimensions().left;e.addOption("$other",{left:s,top:i},!0),t.initializeFieldDimensions(this.other.getOtherInput(),u),u.setName(this.getProperty("name")+"_$other_$text").setRepeatedIndex(this.getRepeatedIndex()).setBorderColor(c).setBorderWidth(p).setBackgroundColor(l),t.appendChild(u),t.writeHTMLElement(this.other.getLabelDOMNode())}t.appendChild(e)},e.prototype.checkIfFieldHasInvalidSubfieldNames=function(){for(var t=(this.getProperty("choices.text")||"").split("\n"),e=0,n=t.length;e<n;e++)if(/[.\[\]`"}{]/.test(t[e]))return!0;return!1},e.prototype.supportsDefaultValue=function(){return!0},e.prototype.getDefaultValueStrategy=function(){var t=new g.SingleSelectionInputDefaultValue;return this.getTextChoices().forEach((function(e){t.addChoice(e,e)})),t},e}(r.Input);e.Radio=m}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(23)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){var e=t.call(this)||this;return e.addClass("ui switch"),e.value=!1,e.root.onclick=function(){e.value=!e.value,e.trigger("click"),e.render()},e.render(),e}return s(e,t),e.prototype.render=function(){this[this.value?"addClass":"removeClass"]("checked")},e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t){this.value=!!t,this.render()},e}(n.NodeAbstract);e.CheckboxSwitch=r}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(9),n(4),n(169),n(146),n(1),n(6),n(10)],void 0===(o=function(t,e,n,r,o,i,a,u,l){Object.defineProperty(e,"__esModule",{value:!0});var c=function(t){function e(n,r,i){var s=t.call(this,n,r||e.getDefaultProperties(n),i)||this;return s.addClass("rich-text"),s.renderer=new o.RichTextComponent(s),s.document.isEditMode()&&s.initEditModeEvents(),s.onMarkupChanged(),s}return s(e,t),e.prototype.getFieldsLayout=function(){return[{span:n.InputSpan.FULL,domNode:this.renderer.getRoot(),row:0}]},e.prototype.getNodeName=function(){return"Rich Text"},e.prototype.getTypeId=function(){return r.NodeTypes.RICH_TEXT},e.prototype.getValue=function(){},e.prototype.hasLabel=function(){return!1},e.prototype.hasValue=function(){return!1},e.prototype.setValue=function(t){return this},e.prototype.onMarkupChanged=function(){this.renderer.setValue(a.I18n.translateViewFormText(String(this.properties.markup||""),"html"))},e.getDefaultProperties=function(e){return t.addSizeProperties.call(this,{name:"Q",markup:"<h1>"+u.Strings.toHTML(a.I18n.translateApplicationText("Text","control-defaults.rich-text"))+"</h1>",visibility:"",label:{color:e.getThemeValues().getProperty("label.color").inherit(),font:{family:e.getThemeValues().getProperty("label.font.family").inherit(),size:e.getThemeValues().getProperty("label.font.size").inherit()}}})},e.prototype.getTranslations=function(){return[{original:this.properties.markup,context:"html"}]},e.prototype.onSelect=function(){t.prototype.onSelect.call(this),this.renderer.setEditMode(!0)},e.prototype.onDeselect=function(){t.prototype.onDeselect.call(this),this.renderer.setEditMode(!1)},e.prototype.initEditModeEvents=function(){var t=this;this.renderer.on("change",(function(){t.setProperty("markup",t.renderer.getValue(),t),t.document.getTheme().markAsModified()}))},e.prototype.hasProperty=function(e){switch(e){case"input.font.bold":case"input.font.italic":case"input.font.underline":case"input.font.align":case"input.font.size":case"input.font.family":case"input.color":case"input.blockType":return!0;default:return t.prototype.hasProperty.call(this,e)}},e.prototype.setProperty=function(e,n,r){switch(e){case"input.font.bold":case"input.font.italic":case"input.font.underline":case"input.font.align":case"input.color":case"input.font.size":case"input.blockType":case"input.font.family":this.renderer.setProperty(e,n);break;default:t.prototype.setProperty.call(this,e,n,r)}return this},e.prototype.getProperty=function(e){switch(e){case"input.font.bold":case"input.font.italic":case"input.font.underline":case"input.font.align":case"input.color":case"input.font.size":case"input.font.family":case"input.blockType":return this.renderer.getProperty(e);default:return t.prototype.getProperty.call(this,e)}},e.prototype.getDocumentFonts=function(){var t={};return this.properties.markup.replace(/ style="([\s\S]+?; )?font-family: (&quot;[\s\S]+?&quot;|[\S]+?);/g,(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[2].replace(/^&quot;|&quot;$/g,"").replace(/;$/g,"");return t[r]=!0,""})),Object.keys(t).filter((function(t){return"Roboto"!==t&&i.GoogleWebfonts_200x20.FONTS.indexOf(t)>-1}))},e.prototype.getRenderedCSS=function(){for(var t=this.getDocumentFonts(),e=[".html { color: "+l.cast(this.properties.label.color)+"; font-family: "+l.cast(this.properties.label.font.family)+"; font-size: "+l.cast(this.properties.label.font.size)+"px }"],n=0,r=t.length;n<r;n++)e.push(".ql-font-"+n+' { font-family: "'+t[n]+'" }');return e.join("\n")},e.prototype.performTranslation=function(){this.renderer.setValue(a.I18n.translateViewFormText(this.getProperty("markup"),"html"))},e.prototype.supportsLabelInsideRendering=function(){return!1},e.prototype.embedInPDFPage=function(t){t.writeHTMLElement(this.renderer.getRoot())},e}(n.Input);e.RichText=c}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(0),n(257),n(12),n(3),n(9),n(7),n(258)],void 0===(o=function(t,e,n,r,o,i,a,u,l){Object.defineProperty(e,"__esModule",{value:!0});var c=function(t){function e(e){var n=t.call(this)||this;return n.defaultEditorState={"input.font.bold":!1,"input.font.italic":!1,"input.font.underline":!1,"input.font.align":a.TextAlign.LEFT,"input.font.family":"Roboto","input.font.size":16,"input.color":"#000000","input.blockType":"p"},n.closeToolbarOnBlur=!1,n.input=e,n.value="",n.root=document.createElement("div"),n.root.className="input",n.setEditMode(!1),n.editorState=u.Helpers.clone(n.defaultEditorState),n.onChanged=o.Debouncer.create((function(){n.onChangedSync()}),50),n}return s(e,t),e.prototype.getRoot=function(){return this.root},e.prototype.setCloseToolbarOnBlur=function(t){return this.closeToolbarOnBlur=t,this},e.prototype.setValue=function(t){this.value=t,this.editMode?this.quillEditor.innerHTML=t:this.html.innerHTML=t},e.prototype.getValue=function(){return this.value},e.prototype.setEditMode=function(t){var o=this;return t===this.editMode||(this.editMode=t,t?(this.html&&(this.html.parentNode&&this.html.parentNode.removeChild(this.html),this.html=void 0),this.quillEditor=document.createElement("div"),this.quillEditor.className="html editor",this.quillEditor.id=this.input.getId()+"_editor",this.quillEditor.innerHTML=this.value,this.root.appendChild(this.quillEditor),r.QuillSDK.load().then((function(t){e.initializeQuillEditorOnce(t),o.editor=new t("#"+o.quillEditor.id,{modules:{toolbar:!1},placeholder:"Write your text here",theme:!1}),o.toolbar=new l.RichTextToolbar(o).setCloseOnBlur(o.closeToolbarOnBlur),o.toolbar.on("blur",(function(){if(o.closeToolbarOnBlur&&o.toolbar&&!o.toolbar.isCloseOnBlurPrevented()){var t=document.activeElement;t&&n.contains(o.toolbar.getRoot(),t)||o.toolbar.close()}})),o.initQuillEditor(t)})).fail((function(){o.setEditMode(!1)}))):(this.quillEditor&&(this.quillEditor.parentNode&&this.quillEditor.parentNode.removeChild(this.quillEditor),this.quillEditor=void 0),this.editor&&(this.editor=void 0),this.toolbar&&(this.toolbar.close(),this.toolbar=void 0),this.html=document.createElement("div"),this.html.className="html",this.html.innerHTML=this.value,this.root.appendChild(this.html))),this},e.initializeQuillEditorOnce=function(t){if(!this.RTC_INITIALIZED){this.RTC_INITIALIZED=!0;var e=t.import("attributors/style/background"),n=t.import("attributors/style/color"),r=t.import("attributors/style/size"),o=t.import("attributors/style/font");o.whitelist=null,r.whitelist=null,t.register(e,!0),t.register(n,!0),t.register(r,!0),t.register(o,!0);var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.create=function(e){var n=t.create.call(this,e);return n.setAttribute("style","height:0px; margin-top:10px; margin-bottom:10px; color: currentColor; border-style: solid;"),n},e}(t.import("blots/block/embed"));i.blotName="hr",i.className="my-hr",i.tagName="hr",t.register({"formats/hr":i})}},e.prototype.initQuillEditor=function(t){var e=this;this.editor.on("text-change",(function(t,n,r){"api"!=r&&"user"!=r||(e.onChanged(),e.toolbar&&e.toolbar.hide());var o=e.editor.getFormat();e.updateEditorState(o)})),this.editor.on("selection-change",(function(t,r,o){if(null===t&&e.closeToolbarOnBlur&&e.toolbar&&!e.toolbar.isCloseOnBlurPrevented()){var i=document.activeElement;i&&n.contains(e.toolbar.getRoot(),i)||e.toolbar.close()}else{var s=t?e.editor.getFormat(t):{};e.toolbar&&(e.toolbar.updateState(null),t&&e.toolbar.updatePosition()),e.updateEditorState(s)}})),this.closeToolbarOnBlur?this.toolbar&&this.toolbar.close():this.editor.focus()},e.prototype.onChangedSync=function(){this.editor&&(this.value=String(this.editor.root.innerHTML||""),this.trigger("change"))},e.prototype.updateEditorState=function(t){var e=this,n=u.Helpers.clone(this.defaultEditorState);if(t.font&&(n["input.font.family"]=t.font),t.bold&&(n["input.font.bold"]=!0),t.italic&&(n["input.font.italic"]=!0),t.underline&&(n["input.font.underline"]=!0),t.align&&(n["input.font.align"]="center"===t.align?a.TextAlign.CENTER:"right"===t.align?a.TextAlign.RIGHT:"justify"===t.align?a.TextAlign.JUSTIFY:a.TextAlign.LEFT),t.header?n["input.blockType"]="h"+t.header:t["code-block"]?n["input.blockType"]="pre":t.list&&("ordered"===t.list?n["input.blockType"]="ol":"bullet"===t.list&&(n["input.blockType"]="ul")),t.size){var r=parseInt(t.size);r>=12&&r<=72&&(n["input.font.size"]=r)}t.color&&(n["input.color"]=t.color);var o=!1;for(var i in n)n.hasOwnProperty(i)&&n[i]!==this.editorState[i]&&(o=!0,function(t,n,r){setTimeout((function(){e.input.trigger("property.changed",e.input,t,r,n),e.input.getDocument().trigger("property.changed",e.input,t,r,n)}),0)}(i,this.editorState[i],n[i]),this.editorState[i]=n[i]);o&&this.toolbar&&this.toolbar.updateState(this.editorState)},e.prototype.getProperty=function(t){return void 0===this.editorState[t]?null:this.editorState[t]},e.prototype.setProperty=function(t,e){if(this.editor)switch(t){case"input.font.bold":this.editor.format("bold",e,"user");break;case"input.font.italic":this.editor.format("italic",e,"user");break;case"input.font.underline":this.editor.format("underline",e,"user");break;case"input.blockType":switch(this.editor.format("size",!1,"user"),this.editor.format("indent",!1,"user"),e){case"h1":this.editor.format("header",1,"user");break;case"h2":this.editor.format("header",2,"user");break;case"h3":this.editor.format("header",3,"user");break;case"h4":this.editor.format("header",4,"user");break;case"h5":this.editor.format("header",5,"user");break;case"h6":this.editor.format("header",6,"user");break;case"pre":this.editor.format("code-block",!0,"user");break;case"ol":this.editor.format("list","ordered","user");break;case"ul":this.editor.format("list","bullet","user");break;default:case"p":this.editor.format("header",!1,"user"),this.editor.format("code-block",!1,"user"),this.editor.format("list",!1,"user")}break;case"input.font.align":switch(e){case a.TextAlign.LEFT:this.editor.format("align",!1,"user");break;case a.TextAlign.RIGHT:this.editor.format("align","right","user");break;case a.TextAlign.CENTER:this.editor.format("align","center","user");break;case a.TextAlign.JUSTIFY:this.editor.format("align","justify","user")}break;case"input.font.family":this.editor.format("font",e,"user");break;case"input.font.size":this.editor.format("size",e+"px","user");break;case"input.color":this.editor.format("color",e,"user")}},e.prototype.getEditor=function(){return this.editor},e.prototype.getField=function(){return this.input},e.RTC_INITIALIZED=!1,e}(i.EventEmitter);e.RichTextComponent=c}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(0),n(31)],void 0===(o=function(t,e,n,r){Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.load=function(){return this.promise||(this.promise=n.Deferred((function(t){var e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.href=r.CDN.getCDNUrl("/vendor/css-sprite-flags/assets/32x32/sprite-flags-32x32.css"),e.onload=function(){t.resolve()},e.onerror=function(){t.reject(new Error("Failed to load Country Code flags css"))},document.getElementsByTagName("head")[0].appendChild(e)}))),this.promise},t}();e.CountryCodeFlags=o}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(9),n(15),n(4),n(1),n(10),n(13),n(269)],void 0===(o=function(t,e,n,r,o,i,a,u,l){Object.defineProperty(e,"__esModule",{value:!0});var c=function(t){function e(n,r,o){var i=t.call(this,n,r||e.getDefaultProperties(n),o)||this;return i.addClass("textarea"),i.input=document.createElement("textarea"),i.input.setAttribute("spellcheck","false"),i.onPlaceholderChanged(),n.isEditMode()?i.installEditModeEvents():i.installViewFormModeEvents(),i}return s(e,t),e.prototype.getFieldsLayout=function(){return[{domNode:this.input,row:0,span:n.InputSpan.FULL}]},e.prototype.getTypeId=function(){return o.NodeTypes.TEXT_AREA},e.prototype.hasLabel=function(){return!0},e.prototype.hasValue=function(){return!0},e.prototype.getValue=function(){return this.input.value},e.prototype.setValue=function(t){return this.input.value=0===t?"0":String(t||""),this.updateHeight(),this},e.prototype.getNodeName=function(){return"Long Text"},e.getDefaultProperties=function(e){var n=i.I18n.translateApplicationText("Long Text","control-defaults"),r=t.addValidationProperties.call(this,t.addInputProperties.call(this,t.addLabelProperties.call(this,t.addSizeProperties.call(this,{name:"Q",visibility:"",formula:"",placeholder:i.I18n.translateApplicationText("Description","control-defaults.long-text")}),n,e),e));return delete r.validation.format,r.validation.unique=!1,r},e.prototype.getTranslations=function(){var t=[];if(this.properties.placeholder&&t.push({original:this.properties.placeholder}),this.properties.label.text&&t.push({original:this.properties.label.text}),this.hasProperty("validation.customErrorMessage")){var e=this.getProperty("validation.customErrorMessage");e&&t.push({original:e,context:"form-fields-errors"})}return t},e.prototype.getRenderedCSS=function(){var t=a.cast(this.properties.label.color),e=a.cast(this.properties.label.font.family),n=a.cast(this.properties.label.font.size),r=a.cast(this.properties.label.font.bold)?"bold":"normal",o=a.cast(this.properties.label.font.italic)?"italic":"normal",i=a.cast(this.properties.label.font.underline)?"underline":"none",s=a.cast(this.properties.label.font.align),u=a.cast(this.properties.input.color),l=a.cast(this.properties.input.backgroundColor),c=a.cast(this.properties.input.borderColor),p=a.cast(this.properties.input.borderWidth),d=a.cast(this.properties.input.borderRadius),h=a.cast(this.properties.input.borderStyle),f=a.cast(this.properties.input.font.family),g=a.cast(this.properties.input.font.size);return"\n            > label {\n                color: "+t+";\n                font-size: "+n+'px;\n                font-family: "'+e+'";\n                font-weight: '+r+";\n                font-style: "+o+";\n                text-decoration: "+i+";\n                text-align: "+s+";\n            }\n            \n            textarea {\n                color: "+u+";\n                background-color: "+l+";\n                border: "+p+" "+h+" "+c+";\n                border-radius: "+d+";\n                font-weight: "+(a.cast(this.properties.input.font.bold)?"bold":"normal")+";\n                font-style: "+(a.cast(this.properties.input.font.italic)?"italic":"normal")+";\n                text-decoration: "+(a.cast(this.properties.input.font.underline)?"underline":"none")+";\n                text-align: "+a.cast(this.properties.input.font.align)+";\n                font-size: "+g+'px;\n                font-family: "'+f+'";\n                &:hover,\n                &:focus {\n                    border-color: '+this.document.getProperty("theme.selection.borderColor")+";\n                }\n                &:focus {\n                    background-color: "+this.document.getProperty("theme.selection.backgroundColor")+";\n                }\n            }\n        "},e.prototype.onPlaceholderChanged=function(){this.input.placeholder=this.getProperty("placeholder")||"",this.getDocument().isEditMode()&&this.input.placeholder!==this.input.value&&(this.input.value=this.input.placeholder)},e.prototype.installEditModeEvents=function(){var t=this;this.input.value=this.getProperty("placeholder")||"",this.input.oninput=function(){t.setProperty("placeholder",t.input.value,t),t.input.placeholder=t.input.value},this.input.onfocus=function(){setTimeout((function(){t.getDocument().getSelection().getItem()!==t&&t.getDocument().getSelection().set(t,n.SelectionInputContext.INPUT,t.input)}),0)}},e.prototype.listenToUserInput=function(t){var e=this;return this.input.oninput=function(){e.updateHeight(),t.updateValue(e)},this},e.prototype.performTranslation=function(){this.labelDOMNode&&(this.labelDOMNode.textContent=i.I18n.translateViewFormText(this.getProperty("label.text"),this.getLabelI18nContext())),this.input&&(this.input.placeholder=i.I18n.translateViewFormText(this.getProperty("placeholder")))},e.changeOverflow=function(t,e){var n=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=n,e.style.overflowY=t},e.prototype.updateHeight=function(){if(0!==this.input.scrollHeight){this.input.style.height="",e.changeOverflow("scroll",this.input);var t=Math.min(this.input.scrollHeight+2*~~this.properties.input.borderWidth+16,640);this.input.style.height=t+"px",t<640&&e.changeOverflow("hidden",this.input)}},e.prototype.supportsLabelInsideRendering=function(){return!0},e.prototype.embedInPDFPage=function(t){t.writeHTMLElement(this.labelDOMNode);var e=t.getDocument().create(u.PDFNodeEntityType.INPUT_TEXT);t.initializeFieldDimensions(this.input,e),e.setBackgroundColor(a.cast(this.properties.input.backgroundColor)).setTextColor(a.cast(this.properties.input.color)).setBorderWidth(parseInt(a.cast(this.properties.input.borderWidth)||"1")).setBorderColor(a.cast(this.properties.input.borderColor)).setValue(this.getProperty("placeholder")).setFontFamily(a.cast(this.properties.input.font.family)).setMultiLine(!0).setName(this.getProperty("name")).setFontSize(a.cast(this.properties.input.font.size)).setRequired(this.isRequired()).setRepeatedIndex(this.getRepeatedIndex()),t.appendChild(e)},e.prototype.supportsDefaultValue=function(){return!0},e.prototype.getDefaultValueStrategy=function(){return new l.MultipleLineTextInputDefaultValue},e.prototype.installViewFormModeEvents=function(){var t=this;this.document.on(r.Document.EVENT_ACTIVE_PAGE_CHANGED,(function(e){e===t.getPage()&&t.updateHeight()}))},e}(n.Input);e.TextArea=c}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(0),n(9),n(4),n(15),n(135),n(12),n(1),n(54),n(10),n(13),n(279),n(280)],void 0===(o=function(t,e,n,r,o,i,a,u,l,c,p,d,h,f){Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.WEAK="",t.MEDIUM="medium",t.HIGH="high"}(e.SignatureComplexity||(e.SignatureComplexity={}));var g=function(){function t(){}return t.MSG_TOOLTIP_CLEAR="Clear signature",t}(),m=function(t){function e(n,r,o){var i=t.call(this,n,r||e.getDefaultProperties(n),o)||this;return i.value={objectType:"Signature",data:[]},i.paintStartX=0,i.paintStartY=0,i.lineColor="blue",i.lineWidth=2,i.isSigning=!1,i.readOnly=!1,i.addClass("signature"),i.signatureAndClearButtonWrapper=document.createElement("div"),i.signatureAndClearButtonWrapper.className="input",i.canvas=document.createElement("canvas"),i.getRoot().tabIndex=0,i.clearSignatureButton=document.createElement("div"),i.clearSignatureButton.className="clear",i.clearSignatureButton.innerHTML='<span class="vfb vfb-close"></span>',i.signatureImageLoader=new f.SignatureImageLoader(i.canvas),i.signatureAndClearButtonWrapper.appendChild(i.canvas),i.signatureAndClearButtonWrapper.appendChild(i.clearSignatureButton),i.signatureAndClearButtonWrapper.appendChild(i.signatureImageLoader.getRoot()),i.document.isEditMode()||(i.onTooltipTextChanged(),i.signingOperationInProgressDebouncer=u.Debouncer.create((function(){i.setSigning(!1)}),e.IDLE_PERIOD_OF_A_SIGNING_OPERATION),i.lineWidth=i.getProperty("signature.penWidth"),i.lineColor=i.getProperty("signature.penColor"),i.initViewModeEvents()),i}return s(e,t),e.prototype.onTooltipTextChanged=function(){this.clearSignatureButton.title=l.I18n.translateViewFormText(g.MSG_TOOLTIP_CLEAR,g.CONTEXT)},e.getDefaultProperties=function(e){var n=l.I18n.translateApplicationText("Signature","control-defaults"),r=t.addLabelProperties.call(this,t.addInputProperties.call(this,t.addSizeProperties.call(this,{name:"Q",visibility:"",signature:{penColor:new p.ThemePropertyValue("#1E7DFF"),penWidth:new p.ThemePropertyValue(2)},validation:{required:!1,signatureComplexity:"",customErrorMessage:""}}),e),n,e);return delete r.input.font,delete r.input.color,r},e.prototype.performTranslation=function(){this.labelDOMNode&&(this.labelDOMNode.textContent=l.I18n.translateViewFormText(this.getProperty("label.text"),this.getLabelI18nContext()))},e.prototype.getTranslations=function(){var t=[];if(this.properties.label.text&&t.push({original:this.properties.label.text}),this.hasProperty("validation.customErrorMessage")){var e=this.getProperty("validation.customErrorMessage");e&&t.push({original:e,context:"form-fields-errors"})}return t},e.prototype.getFieldsLayout=function(){return[{row:0,span:r.InputSpan.FULL,domNode:this.signatureAndClearButtonWrapper}]},e.prototype.getNodeName=function(){return"Signature"},e.prototype.getTypeId=function(){return o.NodeTypes.SIGNATURE},e.prototype.getValue=function(){return'<signature value="'+JSON.stringify(a.SignatureUtils.shiftSignatureToTopLeftCoordinates(this.value,0,0).data)+'" />'},e.prototype.clear=function(){this.value.objectType="Signature",this.value.data.splice(0,this.value.data.length)},e.prototype.hasLabel=function(){return!0},e.prototype.hasValue=function(){return!0},e.prototype.setValue=function(t){this.clear();for(var e=a.SignatureUtils.shiftSignatureToTopLeftCoordinates(a.SignatureUtils.parseSignatureValue(t),10,10),n=0,r=e.data.length;n<r;n++)this.value.data.push(e.data[n]);return this.paint(),this},e.prototype.listenToUserInput=function(t){var e=this;return this.on("input",(function(){t.updateValue(e)})),this},e.prototype.paint=function(){a.SignatureUtils.paintSignature(this.value,this.canvas,this.paintStartX,this.paintStartY,this.lineWidth,this.lineColor)},e.prototype.setSigning=function(t){return t&&this.signingOperationInProgressDebouncer(),t!==this.isSigning&&(this.isSigning=t,this.isSigning?this.onSigningBegin():this.onSigningEnded()),this},e.prototype.initViewModeEvents=function(){var t=this,e=!1,r=function(n){if((n=c.HIDManager.normalizeJQueryEvent(n))&&c.HIDManager.getButtonType(n)===c.EMouseManagerButtonType.LEFT){try{t.getRoot().focus()}catch(n){}t.readOnly||(t.setSigning(!0),e=!0,t.value.data.push([a.SignatureDrawCommand.PEN_DOWN,Math.round(n.offsetX),Math.round(n.offsetY)]))}},o=function(n){e=!1,t.readOnly||(t.value.data.push([a.SignatureDrawCommand.PEN_UP]),t.trigger("input"))},s=function(n){(n=c.HIDManager.normalizeJQueryEvent(n))&&(n.preventDefault(),n.stopPropagation(),t.readOnly||(e&&c.HIDManager.getButtonType(n)===c.EMouseManagerButtonType.LEFT?(t.value.data.push([a.SignatureDrawCommand.LINE_TO,Math.round(n.offsetX),Math.round(n.offsetY)]),t.paint(),t.setSigning(!0)):e&&(t.value.data.push([a.SignatureDrawCommand.PEN_UP]),t.setSigning(!0),e=!1)))};n(this.canvas).on(c.HIDManager.mousedown(),r).on(c.HIDManager.mousemove(),s).on(c.HIDManager.mousedown(),r),c.HIDManager.getEmitter().on(c.HIDManager.EVENT_HID_DEVICE_CHANGED,(function(i,a){e=!1,n(t.canvas).off(a.mousedown(),r).off(a.mousemove(),s).off(a.mouseup(),o).on(i.mousedown(),r).on(i.mousemove(),s).on(i.mouseup(),o)})),n(window).on("resize",(function(){t.paint()})),n(this.getRoot()).on("blur",(function(){t.readOnly||t.isSigning&&(e=!1,t.setSigning(!1))})),n(this.clearSignatureButton).on("click",(function(){t.readOnly||(e=!1,t.setSigning(!1),t.clear(),t.paint(),t.trigger("input"))})),this.signatureImageLoader.enable().on(f.SignatureImageLoader.EVENT_SIGN,(function(n){e=!1,t.setSigning(!1),t.clear(),t.paint(),t.setValue(n),t.trigger("input")})),this.document.on(i.Document.EVENT_ACTIVE_PAGE_CHANGED,(function(e){e===t.getPage()&&t.paint()}))},e.prototype.onSigningBegin=function(){this.readOnly||(this.clear(),this.paint(),this.trigger("input"))},e.prototype.onSigningEnded=function(){if(!this.readOnly){var t=a.SignatureUtils.shiftSignatureToTopLeftCoordinates(this.value,10,10);this.clear();for(var e=0,n=t.data.length;e<n;e++)this.value.data.push(t.data[e]);this.paint(),this.trigger("input")}},e.prototype.isReadOnly=function(){return this.readOnly},e.prototype.setReadOnly=function(t){return this.readOnly=t,this},e.prototype.getRenderedCSS=function(){var t=p.cast(this.properties.label.color),e=p.cast(this.properties.label.font.family),n=p.cast(this.properties.label.font.size),r=p.cast(this.properties.label.font.bold)?"bold":"normal",o=p.cast(this.properties.label.font.italic)?"italic":"normal",i=p.cast(this.properties.label.font.underline)?"underline":"none",s=p.cast(this.properties.label.font.align),a=p.cast(this.properties.input.backgroundColor),u=p.cast(this.properties.input.borderColor),l=p.cast(this.properties.input.borderWidth),c=p.cast(this.properties.input.borderRadius);return"\n            > label {\n                color: "+t+";\n                font-size: "+n+'px;\n                font-family: "'+e+'";\n                font-weight: '+r+";\n                font-style: "+o+";\n                text-decoration: "+i+";\n                text-align: "+s+";\n            }\n\n            canvas {\n                background-color: "+a+";\n                border: "+l+" "+p.cast(this.properties.input.borderStyle)+" "+u+";\n                border-radius: "+c+";\n            }\n            \n            &:hover canvas,\n            &:focus canvas {\n                border-color: "+this.document.getProperty("theme.selection.borderColor")+";\n            }\n            &:focus canvas {\n                background-color: "+this.document.getProperty("theme.selection.backgroundColor")+";\n            }\n        "},e.prototype.supportsLabelInsideRendering=function(){return!0},e.prototype.onFilledStateChanged=function(t){this.setFilledState(!!this.value&&!!this.value.data&&!!this.value.data.length)},e.prototype.embedInPDFPage=function(t){t.writeHTMLElement(this.labelDOMNode);var e=t.getDocument().create(d.PDFNodeEntityType.INPUT_SIGNATURE);t.initializeFieldDimensions(this.canvas,e);var n=e.getDimensions();n.width+=16,n.height+=16,n.top-=8,n.left-=8,e.setDimensions(n),e.setBorderColor(p.cast(this.properties.input.borderColor)).setBorderWidth(parseInt(p.cast(this.properties.input.borderWidth))||0).setBackgroundColor(p.cast(this.properties.input.backgroundColor)).setRequired(this.isRequired()).setRepeatedIndex(this.getRepeatedIndex()),t.appendChild(e)},e.prototype.supportsDefaultValue=function(){return!0},e.prototype.getDefaultValueStrategy=function(){return new h.SignatureInputDefaultValue},e.IDLE_PERIOD_OF_A_SIGNING_OPERATION=2e3,e}(r.Input);e.Signature=m}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(103)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.getPaymentGatewayIconByPaymentProcessorTypeId=function(t){switch(t){case n.EPaymentProcessorTypes.PAYPAL:return"vfb vfb-pg-paypal";case n.EPaymentProcessorTypes.STRIPE_CHECKOUT:return"vfb vfb-stripe-logo";case n.EPaymentProcessorTypes.SQUARE:return"vfb vfb-square-logo";case n.EPaymentProcessorTypes.BRAINTREE:return"vfb vfb-braintree-logo";case n.EPaymentProcessorTypes.PAYPAL_CHECKOUT:return"vfb vfb-pg-paypal";case n.EPaymentProcessorTypes.CASH_ON_DELIVERY:return"vfb vfb-money";case n.EPaymentProcessorTypes.EU_PLATESC:return"vfb vfb-euplatesc-logo";case n.EPaymentProcessorTypes.BITPAY:return"vfb vfb-bitpay";default:return"vfb vfb-help"}},t}();e.PaymentGatewaysIcons=r}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r;void 0===(r=function(t,e){var n;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.text="text",t.value="value",t.readOnly="readOnly",t.disabled="disabled",t.selectedIndex="selectedIndex",t.checked="checked",t.width="width",t.height="height",t.style="style",t.className="className",t.type="type",t.nodeName="nodeName"}(n=e.VDNodeWhitelistedProperty||(e.VDNodeWhitelistedProperty={}));var r=function(){function t(t){this.virtualDOM=t}return t.prototype.wrapEvent=function(t){return{srcElement:this.wrapNode(t.srcElement),target:this.wrapNode(t.target),code:t.code,keyCode:t.keyCode,charCode:t.charCode,which:t.which,preventDefault:function(){t.preventDefault()},stopPropagation:function(){t.stopPropagation()}}},t.prototype.wrapNode=function(t){var e,r=this;if(!t)return null;switch(t.nodeType){case Node.ELEMENT_NODE:(e={NODE_TYPE:Node.ELEMENT_NODE,nodeName:t.nodeName,hasChildNodes:function(){return t.hasChildNodes()}}).get=function(e){return void 0===n[e]?void 0:t[e]},e.set=function(e,r){void 0!==n[e]&&e in t&&(t[e]=r)},e.getElementById=function(e){return e?r.wrapNode(t.querySelector("#"+e)):null},e.querySelector=function(e){return e?r.wrapNode(t.querySelector(e)):null},e.querySelectorAll=function(e){for(var n=[],o=t.querySelectorAll(e),i=0,s=o.length;i<s;i++){var a=r.wrapNode(o[i]);null!==a&&n.push(a)}return n},e.getAttribute=function(e){return t.getAttribute(e)},e.setAttribute=function(e,n){t.setAttribute(e)},e.removeAttribute=function(e){t.removeAttribute(e)},e.matches=function(e){return(t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector)(e)},e.addEventListener=function(n,o){var i;n&&"string"==typeof n&&o&&"function"==typeof o&&(t.eventListeners=t.eventListeners||{},t.eventListeners[n]=t.eventListeners[n]||[],function(t){i=function(n){o.call(e,t.wrapEvent(n))}}(r),t.eventListeners[n].push({wrappedListener:i,originalCallback:o}),t.addEventListener(n,i,!1))},e.removeEventListener=function(e,n){if(e&&"string"==typeof e&&n&&"function"==typeof n&&t.eventListeners&&t.eventListeners[e]&&Array.isArray(t.eventListeners[e]))for(var r=0,o=t.eventListeners[e].length;r<o;r++)if(t.eventListeners[e][r]&&t.eventListeners[e][r].originalCallback===n)return t.removeEventListener(e,t.eventListeners[e][r].wrappedListener,!1),void t.eventListeners[e].splice(r,1)},Object.defineProperty(e,"firstChild",{get:function(){return r.wrapNode(t.firstChild)},configurable:!1,enumerable:!1}),Object.defineProperty(e,"lastChild",{get:function(){return r.wrapNode(t.lastChild)},configurable:!1,enumerable:!1}),Object.defineProperty(e,"style",{get:function(){return t.style},set:function(e){t.style=e},configurable:!1,enumerable:!0}),Object.defineProperty(e,"className",{get:function(){return t.className},set:function(e){t.className=e},configurable:!1,enumerable:!0}),Object.defineProperty(e,"innerHTML",{get:function(){return t.innerHTML},set:function(e){r.virtualDOM.setHTML(t,e)},configurable:!1,enumerable:!0});break;case Node.COMMENT_NODE:e={NODE_TYPE:Node.COMMENT_NODE,hasChildNodes:function(){return t.hasChildNodes()}};break;case Node.TEXT_NODE:e={NODE_TYPE:Node.TEXT_NODE,hasChildNodes:function(){return t.hasChildNodes()}}}return e&&(e.remove=function(){t!==r.virtualDOM.document&&t.parentNode&&t.parentNode.removeChild(t)},Object.defineProperty(e,"parentNode",{get:function(){return t===r.virtualDOM.document?null:r.wrapNode(t.parentNode)},configurable:!1,enumerable:!0}),Object.defineProperty(e,"previousSibling",{get:function(){return t!==r.virtualDOM.document?r.wrapNode(t.previousSibling):null},configurable:!1,enumerable:!1}),Object.defineProperty(e,"nextSibling",{get:function(){return t!==r.virtualDOM.document?r.wrapNode(t.nextSibling):null},configurable:!1,enumerable:!1}),Object.defineProperty(e,"textContent",{get:function(){return t.textContent},set:function(e){t.textContent=e},configurable:!1,enumerable:!1})),e||null},t.prototype.getSDK=function(){var t=this.wrapNode(this.virtualDOM.document);try{Object.seal(t)}catch(t){}return t},t}();e.VDDocument=r}.apply(e,[n,e]))||(t.exports=r)},function(t,e,n){"use strict";var r,o;r=[n,e,n(7)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.getDefaultSettings=function(){return void 0===this.defaultSettings&&(this.defaultSettings=this.loadSettings()),n.Helpers.clone(this.defaultSettings)},t.loadSettings=function(){var t={recaptchaEnabled:!0};try{var e=document.querySelector('script[type="application/json"]#default-document-settings');e&&(t=JSON.parse(e.textContent))}catch(t){console.warn("[DEF] Failed to load Default Document Settings: "+t)}return t},t}();e.DefaultDocumentSettings=r}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(105),n(177),n(68)],void 0===(o=function(t,e,n,r,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.functions={},this.identifiers={},this.helpSystem={},this.privateIdentifiers={}}return t.prototype.registerPrivateIdentifier=function(t,e){if("string"!=typeof t||""===t)throw new Error("Invalid identifier name: string expected!");return this.privateIdentifiers[t]=e,this},t.prototype.getPrivateIdentifierValue=function(t,e){return void 0===this.privateIdentifiers[t]?void 0===e?null:e:this.privateIdentifiers[t]},t.prototype.getFunction=function(t){var e=String(t||"");return void 0===this.functions[e]?null:{func:this.functions[e].callback,passExpressions:this.functions[e].passExpressions}},t.prototype.getIdentifierValue=function(t){var e,r=n.IdentifierExpression.TARGET_FIELD,o=r?r.getRepeatedIndex():null;if(void 0!==this.identifiers[t]){for(var i=0,s=this.identifiers[t].length;i<s;i++)if(void 0!==this.identifiers[t][i].get){var a=this.identifiers[t][i].getRepeatedIndex?this.identifiers[t][i].getRepeatedIndex():null;if(a===o)return this.identifiers[t][i].get();null===a&&(e=this.identifiers[t][i].get())}return e}},t.prototype.getFunctionArguments=function(t){return void 0!==this.functions[t]?this.functions[t].argsList:null},t.prototype.getFunctionNumberOfArguments=function(t){return void 0!==this.functions[t]?this.functions[t].numArgs:null},t.prototype.withFunction=function(t,e,n,r,o,i){return void 0===i&&(i=!1),this.functions[t]={callback:e,description:n,passExpressions:i,argsList:r,numArgs:o},this},t.prototype.withIdentifier=function(t,e,n,r,o,i,s,a){return(this.identifiers[t]=this.identifiers[t]||[]).push({get:e,set:n,hasValue:r,getSubfields:i,isMainField:o,getIcon:s,getRepeatedIndex:a}),this},t.prototype.clearIdentifiers=function(){return this.identifiers={},this},t.prototype.clearFunctions=function(){return this.functions={},this},t.prototype.enumerateFunctions=function(){var t=[];for(var e in this.functions)this.functions.hasOwnProperty(e)&&t.push(e);return t},t.prototype.functionExists=function(t){return!!this.functions[t||""]},t.prototype.identifierExists=function(t){return void 0!==this.identifiers[t||""]},t.prototype.getFunctionDescription=function(t){var e=String(t||"");return void 0===this.functions[e]?null:this.functions[e].description.replace(/(^|\n)([ \t]+)/g,"\n").trim()},t.prototype.getHelp=function(t){return void 0!==this.helpSystem[t]?this.helpSystem[t].replace(/(^|\n)([ \t]+)/g,"\n").trim():this.functionExists(t)?this.getFunctionDescription(t):null},t.prototype.withHelpTherms=function(t,e){return this.helpSystem[t]=e,this},t.prototype.withSubmissionModel=function(t){return this.submissionModel=t,this},t.prototype.unregisterNode=function(t){if(!t.hasProperty("name"))return this;var e=t.getProperty("name");if(e){if(void 0===this.identifiers[e])return this;for(var n=0,r=this.identifiers[e].length;n<r;n++)if(this.identifiers[e][n].get&&this.identifiers[e][n].get()===t){this.identifiers[e].splice(n,1);break}return this}},t.prototype.registerNode=function(t){var e=this;if(!t.hasProperty("name"))return this;var n=t.getProperty("name");if(n){var o=t.hasValue(),i=t.enumerateSubFields(),s=null,a=t.getIcon();if(this.withIdentifier(n,(function(){return t}),(function(t){}),(function(){return o}),(function(){return!0}),(function(){return s}),(function(){return a}),(function(){return t.getRepeatedIndex()})),i){s=[];for(var u=function(o,u){var l,c;l=i[o],c=new r.SubFieldNode(t,l),e.withIdentifier(n+"."+i[o],(function(){return c}),(function(t){}),(function(){return c.hasValue()}),(function(){return!1}),(function(){return null}),(function(){return a}),(function(){return t.getRepeatedIndex()})),s.push(c)},l=0,c=i.length;l<c;l++)u(l)}return this}},t.prototype.enumerateIdentifiersWhichHaveVisibilityState=function(){var t=[],e=[];for(var n in this.identifiers)if(this.identifiers.hasOwnProperty(n)&&this.identifiers.propertyIsEnumerable(n))for(var r=0,o=this.identifiers[n].length;r<o;r++)this.identifiers[n][r].isMainField&&this.identifiers[n][r].isMainField()&&-1===e.indexOf(n)&&(t.push({name:n,icon:this.identifiers[n][r].getIcon()}),e.push(n));return t},t.prototype.eval=function(t){return o.ScriptingEngine.compile(t).getExpression().compute(this)},t}();e.ScriptingEnvironment=i}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r;void 0===(r=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.node=t,this.subFieldName=e}return t.prototype.getValue=function(){return this.node.getSubFieldValue(this.subFieldName)},t.prototype.getTypeId=function(){return this.node.getTypeId()},t.prototype.hasValue=function(){return this.node.hasValue()},t.prototype.enumerateSubFields=function(){return null},t.prototype.getId=function(){return this.node.getId()},t.prototype.getProperty=function(t){return"name"===t?this.node.getProperty("name")+"."+this.subFieldName:void 0},t}();e.SubFieldNode=n}.apply(e,[n,e]))||(t.exports=r)},,function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(39),n(113),n(32)],void 0===(o=function(t,e,n,r,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e){var n=t.call(this)||this;return n.selected=!1,n.icon="",n.setClass("ui ui-ribbon-tab"),n.ribbon=e,n}return s(e,t),e.prototype.setCaption=function(t){return this.caption=t||null,this.render(),this},e.prototype.setIcon=function(t){return this.icon=t,this.render(),this},e.prototype.render=function(){for(;this.root.firstChild;)this.root.removeChild(this.root.firstChild);if(this.icon){var t=document.createElement("span");t.className="vfb vfb-"+this.icon,this.root.appendChild(t)}this.caption&&this.root.appendChild(document.createTextNode(this.caption))},e.prototype.isSelected=function(){return this.selected},e.prototype.setSelected=function(t){return this.selected=t,this.selected?this.addClass("selected"):this.removeClass("selected"),this},e.prototype.getRibbon=function(){return this.ribbon},e}(r.Clickable);e.RibbonTab=i;var a=function(t){function e(){var e=t.call(this)||this;return e.tab=new i(e),e.setClass("ui ui-ribbon-container"),e}return s(e,t),e.prototype.getTab=function(){return this.tab},e.prototype.setCaption=function(t){return this.tab.setCaption(t),this},e.prototype.setId=function(t){return this.tab.setId(t),this},e.prototype.getId=function(){return this.tab.getId()},e.prototype.isSelected=function(){return this.tab.isSelected()},e.prototype.setSelected=function(t){return this.tab.setSelected(t),this},e.prototype.setTooltip=function(t){return this.tab.setTooltip(t),this},e.prototype.resize=function(t){for(var e,n=0,r=[],i=this.children.filter((function(t){return t instanceof o.RibbonGroup||t instanceof o.RibbonGroupProxy})).sort((function(t,e){return t.getCollapsePriority()-e.getCollapsePriority()})),s=0,a=i.length;s<a;s++)null!==(e=i[s].getMinWidth())&&(n+=e,r.push(i[s]));for(s=0,a=r.length;s<a;s++)r[s].setExpanded(!0);if(!(n<=t)){var u,l,c=r.length;do{u=0,l=!1;for(s=(a=c)-1;s>-1;s--)if(r[s].isExpanded()){r[s].setExpanded(!1),l=!0;break}for(s=0;s<c;s++)u+=r[s].getActualWidth()}while(u>t&&l)}},e}(n.ContainerAbstract);e.Ribbon=a}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(33),n(146),n(213),n(147),n(148),n(1)],void 0===(o=function(t,e,n,r,o,i,a,u){Object.defineProperty(e,"__esModule",{value:!0});var l=function(t){function e(){var e=t.call(this)||this;return e.addClass("font-family"),e.list.setHeight(510),e.list.setWidth(264),e.list.addClass("ui-font-family"),e}return s(e,t),e.prototype.onBeforeOpen=function(){var t=a.FontsManager.getLoadedFontsList();if(-1===t.indexOf("Roboto")&&t.push("Roboto"),t.length){this.list.append((new i.ListHeader).setText(u.I18n.translateApplicationText("Fonts currently used","ui.font-family")));for(var e=0,n=t.length;e<n;e++)this.list.append(new o.FontListItem(r.GoogleWebfonts_200x20.FONTS.indexOf(t[e])).setValue(t[e]))}this.list.append((new i.ListHeader).setText(u.I18n.translateApplicationText("Google Fonts (by popularity)","ui.font-family")));for(e=0,n=r.GoogleWebfonts_200x20.FONTS.length;e<n;e++)this.list.append(new o.FontListItem(e).setValue(r.GoogleWebfonts_200x20.FONTS[e]))},e.prototype.onClosed=function(){this.list.clear()},e.prototype.renderValue=function(e){t.prototype.renderValue.call(this,e)},e}(n.Dropdown);e.FontFamily=l}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(0),n(39),n(40),n(51)],void 0===(o=function(t,e,n,r,o,i){Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(){var e=t.call(this)||this;e.selectedItem=null,e.width=null,e.height=null,e.setClass("ui ui-list"),e.root.tabIndex=0;return e.root.addEventListener("focus",(function(){e.trigger("focus")}),!1),e.root.addEventListener("blur",(function(){setTimeout((function(){n.contains(e.root,document.activeElement)||e.trigger("blur")}),20)}),!1),function(t){n(t.root).on("change",(function(e,n){void 0!==n&&t.trigger("change")})),n(t.root).on("click",".ui.list-item",(function(e){var r=t.getChildByRoot(this);if(r){var o=e.target||e.srcElement,i=n(o).is("input[type=text], .validator.pattern, .validator.pattern *");i&&n(this).find("input[type=text]").focus(),t.onBeforeSelectItem?t.onBeforeSelectItem().then((function(){t.setSelectedIndex(t.children.indexOf(r)),i||t.trigger("change")})):(t.setSelectedIndex(t.children.indexOf(r)),i||t.trigger("change"))}}))}(e),e}return s(e,t),e.prototype.setOnBeforeSelectItem=function(t){return this.onBeforeSelectItem=t||null,this},e.prototype.focus=function(){this.root.focus()},e.prototype.getSelectedIndex=function(){return this.children.indexOf(this.selectedItem)},e.prototype.setSelectedIndex=function(t){if(this.selectedItem&&this.selectedItem.setSelected(!1),this.selectedItem=this.children[t]||null,this.selectedItem){this.selectedItem.setSelected(!0);var e=(this.selectedItem.getId()||"").replace(/^cmd_/g,"");"home"!==e&&i.UsersAnalytics.event("backstage_render_section",{section:e,method:"click"})}return this},e.prototype.getWidth=function(){return this.width},e.prototype.setWidth=function(t){return this.width=t,null!==this.width?this.root.style.width=this.width+"px":this.root.style.width="",this},e.prototype.getHeight=function(){return this.height},e.prototype.setHeight=function(t){return this.height=t,null!==this.height?this.root.style.height=this.height+"px":this.root.style.height="",this},e.prototype.clear=function(){for(;this.root.firstChild;)this.root.removeChild(this.root.firstChild);this.children.splice(0,this.children.length)},e.prototype.getValue=function(){return this.selectedItem&&this.selectedItem instanceof o.ValueListItem?this.selectedItem.getValue():void 0},e.prototype.setValue=function(t){for(var e=0,n=this.children.length;e<n;e++)if(this.children[e]instanceof o.ValueListItem&&this.children[e].valueEquals(t))return this.setSelectedIndex(e),this;return this.setSelectedIndex(-1),this},e.prototype.getSelectedItem=function(){return this.selectedItem||null},e}(r.ContainerAbstract);e.List=a}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(33),n(52)],void 0===(o=function(t,e,n,r){Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){var e=t.call(this)||this;return e.addClass("font-size"),e.list.setHeight(310),e}return s(e,t),e.prototype.onBeforeOpen=function(){for(var t=["12","14","16","18","20","22","24","26","28","36","48","72"],e=0,n=t.length;e<n;e++)this.list.append((new r.TextListItem).setValue(t[e]).setText(t[e]))},e.prototype.onClosed=function(){this.list.clear()},e.prototype.renderValue=function(e){t.prototype.renderValue.call(this,e)},e}(n.Dropdown);e.FontSize=o}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(23)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){var e=t.call(this)||this;return e.setClass("separator"),e}return s(e,t),e}(n.NodeAbstract);e.Separator=r}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(39)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){var e=t.call(this)||this;return e.addClass("ui ui-ribbon-checkbox-button"),e}return s(e,t),e.prototype.addButton=function(t){return this.append(t),this},e}(n.ContainerAbstract);e.CheckboxButton=r}.apply(e,r))||(t.exports=o)},,,,function(t,e,n){"use strict";var r,o;r=[n,e,n(12),n(5)],void 0===(o=function(t,e,n,r){Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.init=function(){var t=this;this.initialized=!0,this.flushData=n.Debouncer.create((function(){r.API.post("tracker",{events:JSON.stringify(t.events)},r.APIAuthenticationStrategy.OPTIONAL_AUTHENTICATION).then((function(){t.events.splice(0,t.events.length)})).fail((function(){console.warn("[TRACKER] Failed to report events")}))}),5e3)},t.trackEvent=function(t,e){this.initialized||this.init(),this.events.push({event:t,date:(new Date).toString(),tags:e}),this.events.length>10&&this.events.splice(0,1),this.flushData()},t.events=[],t.initialized=!1,t}();e.PlatformTracker=o}.apply(e,r))||(t.exports=o)},,function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},,,function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(9),n(4),n(242),n(6),n(1),n(10),n(13)],void 0===(o=function(t,e,n,r,o,i,a,u,l){Object.defineProperty(e,"__esModule",{value:!0});var c,p=function(){function t(){}return t.CONTEXT="name-field",t.MSG_PLACEHOLDER_FIRST_NAME="First",t.MSG_PLACEHOLDER_LAST_NAME="Last",t.MSG_PLACEHOLDER_MIDDLE_NAME="Middle",t.MSG_PLACEHOLDER_INITIALS="Initials",t.MSG_PLACEHOLDER_TITLE="Title",t}();!function(t){t[t.TITLE=0]="TITLE",t[t.FIRST_NAME=1]="FIRST_NAME",t[t.INITIALS=2]="INITIALS",t[t.MIDDLE_NAME=3]="MIDDLE_NAME",t[t.LAST_NAME=4]="LAST_NAME"}(c||(c={}));var d=function(t){function e(n,r,i){var s=t.call(this,n,r||e.getDefaultProperties(n),i)||this;return s.addClass("name"),n.isEditMode()&&(s.toolbar=new o.NameToolbar(s)),s.onFieldsVisibilityChanged(),s}return s(e,t),e.prototype.onFieldsVisibilityChanged=function(t){void 0===t&&(t=!1),this.properties.nameField.showTitle?this.title=this.title||this.createNamePartComponent(c.TITLE):this.title=void 0,this.properties.nameField.showFirstName?this.firstName=this.firstName||this.createNamePartComponent(c.FIRST_NAME):this.firstName=void 0,this.properties.nameField.showInitials?this.initials=this.initials||this.createNamePartComponent(c.INITIALS):this.initials=void 0,this.properties.nameField.showMiddleName?this.middleName=this.middleName||this.createNamePartComponent(c.MIDDLE_NAME):this.middleName=void 0,this.properties.nameField.showLastName?this.lastName=this.lastName||this.createNamePartComponent(c.LAST_NAME):this.lastName=void 0,this.toolbar&&this.toolbar.update(),t&&this.render()},e.prototype.getFieldsLayout=function(){var t=[],r=String(~~!!this.title)+String(~~!!this.initials)+String(~~!!this.middleName);switch(r){case"000":t=[{domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_FIRST_NAME),span:n.InputSpan.HALF,row:0},{domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_LAST_NAME),span:n.InputSpan.REMAINING,row:0}];break;case"001":t=[{domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_FIRST_NAME),span:n.InputSpan.THIRD,row:0},{domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_MIDDLE_NAME),span:n.InputSpan.THIRD,row:0},{domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_LAST_NAME),span:n.InputSpan.REMAINING,row:0}];break;case"010":t=[{domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_FIRST_NAME),span:n.InputSpan.THIRD,row:0},{domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_INITIALS),span:n.InputSpan.QUARTER,row:0},{domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_LAST_NAME),span:n.InputSpan.REMAINING,row:0}];break;case"011":t=[{domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_FIRST_NAME),span:n.InputSpan.QUARTER,row:0},{domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_INITIALS),span:n.InputSpan.QUARTER,row:0},{domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_MIDDLE_NAME),span:n.InputSpan.QUARTER,row:0},{domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_LAST_NAME),span:n.InputSpan.REMAINING,row:0}];break;case"100":t=[{domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_TITLE),span:n.InputSpan.QUARTER,row:0},{domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_FIRST_NAME),span:n.InputSpan.THIRD,row:0},{domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_LAST_NAME),span:n.InputSpan.REMAINING,row:0}];break;case"101":t=[{domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_TITLE),span:n.InputSpan.QUARTER,row:0},{domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_FIRST_NAME),span:n.InputSpan.QUARTER,row:0},{domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_MIDDLE_NAME),span:n.InputSpan.QUARTER,row:0},{domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_LAST_NAME),span:n.InputSpan.REMAINING,row:0}];break;case"110":t=[{domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_TITLE),span:n.InputSpan.TWO_UNITS,row:0},{domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_FIRST_NAME),span:n.InputSpan.REMAINING,row:0},{domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_INITIALS),span:n.InputSpan.TWO_UNITS,row:0},{domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_LAST_NAME),span:n.InputSpan.REMAINING,row:0}];break;case"111":t=[{domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_TITLE),span:n.InputSpan.QUARTER,row:0},{domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_FIRST_NAME),span:n.InputSpan.REMAINING,row:0},{domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_INITIALS),span:n.InputSpan.QUARTER,row:0},{domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_MIDDLE_NAME),span:n.InputSpan.HALF,row:1},{domNode:this.getShadowDOMNodeWrapperOrInputItself(e.NODE_NAME_LAST_NAME),span:n.InputSpan.REMAINING,row:1}]}return this.toolbar&&t.push({row:"111"===r?2:1,domNode:this.toolbar.getRoot(),span:n.InputSpan.FULL}),t},e.prototype.getNodeName=function(){return"Name"},e.prototype.getTypeId=function(){return r.NodeTypes.NAME},e.prototype.getValue=function(){var t=[];return this.title&&t.push("<"+e.NODE_NAME_TITLE+' value="'+i.Strings.toHTML(this.title.value)+'"/>'),this.firstName&&t.push("<"+e.NODE_NAME_FIRST_NAME+' value="'+i.Strings.toHTML(this.firstName.value)+'"/>'),this.initials&&t.push("<"+e.NODE_NAME_INITIALS+' value="'+i.Strings.toHTML(this.initials.value)+'"/>'),this.middleName&&t.push("<"+e.NODE_NAME_MIDDLE_NAME+' value="'+i.Strings.toHTML(this.middleName.value)+'"/>'),this.lastName&&t.push("<"+e.NODE_NAME_LAST_NAME+' value="'+i.Strings.toHTML(this.lastName.value)+'"/>'),"<name>"+t.join("")+"</name>"},e.prototype.hasLabel=function(){return!0},e.prototype.hasValue=function(){return!0},e.prototype.setValue=function(t){var n=this,r=String(t||"");return this.firstName&&(this.firstName.value=""),this.lastName&&(this.lastName.value=""),this.middleName&&(this.middleName.value=""),this.initials&&(this.initials.value=""),this.title&&(this.title.value=""),"<name>"===r.substr(0,6)&&"</name>"===r.substr(-7)&&r.substr(6,r.length-13).replace(e.REPLACER_REGEXP,(function(t){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];switch(r[0]){case e.NODE_NAME_FIRST_NAME:n.setFirstName(r[1]);break;case e.NODE_NAME_LAST_NAME:n.setLastName(r[1]);break;case e.NODE_NAME_INITIALS:n.setInitials(r[1]);break;case e.NODE_NAME_TITLE:n.setTitle(r[1]);break;case e.NODE_NAME_MIDDLE_NAME:n.setMiddleName(r[1]);break;default:throw new Error("Invalid node name: "+JSON.stringify(r[0]))}return""})),this},e.getDefaultProperties=function(e){var n=a.I18n.translateApplicationText("Name","control-defaults");return t.addInputProperties.call(this,t.addLabelProperties.call(this,t.addSizeProperties.call(this,{name:"Q",visibility:"",formula:"",validation:{required:!1,customErrorMessage:"",format:"name"},nameField:{showTitle:!1,showFirstName:!0,showInitials:!1,showMiddleName:!1,showLastName:!0,placeholderFirstName:a.I18n.translateApplicationText(p.MSG_PLACEHOLDER_FIRST_NAME,"control-defaults.name"),placeholderLastName:a.I18n.translateApplicationText(p.MSG_PLACEHOLDER_LAST_NAME,"control-defaults.name"),placeholderMiddleName:a.I18n.translateApplicationText(p.MSG_PLACEHOLDER_MIDDLE_NAME,"control-defaults.name"),placeholderInitials:a.I18n.translateApplicationText(p.MSG_PLACEHOLDER_INITIALS,"control-defaults.name"),placeholderTitle:a.I18n.translateApplicationText(p.MSG_PLACEHOLDER_TITLE,"control-defaults.name")}}),n,e),e)},e.prototype.getTranslations=function(){var t=[];if(this.properties.label.text&&t.push({original:this.properties.label.text}),this.properties.nameField.showTitle&&this.properties.nameField.placeholderTitle&&t.push({original:this.properties.nameField.placeholderTitle,context:p.CONTEXT}),this.properties.nameField.showFirstName&&this.properties.nameField.placeholderFirstName&&t.push({original:this.properties.nameField.placeholderFirstName,context:p.CONTEXT}),this.properties.nameField.showInitials&&this.properties.nameField.placeholderInitials&&t.push({original:this.properties.nameField.placeholderInitials,context:p.CONTEXT}),this.properties.nameField.showMiddleName&&this.properties.nameField.placeholderMiddleName&&t.push({original:this.properties.nameField.placeholderMiddleName,context:p.CONTEXT}),this.properties.nameField.showLastName&&this.properties.nameField.placeholderLastName&&t.push({original:this.properties.nameField.placeholderLastName,context:p.CONTEXT}),this.hasProperty("validation.customErrorMessage")){var e=this.getProperty("validation.customErrorMessage");e&&t.push({original:e,context:"form-fields-errors"})}return t},e.prototype.createNamePartComponent=function(t){var e,r=this,o=document.createElement("input");switch(o.type="text",t){case c.TITLE:e="placeholderTitle";break;case c.FIRST_NAME:e="placeholderFirstName";break;case c.INITIALS:e="placeholderInitials";break;case c.MIDDLE_NAME:e="placeholderMiddleName";break;case c.LAST_NAME:e="placeholderLastName";break;default:return null}if(o.placeholder=this.properties.nameField[e],this.document.isEditMode()&&(o.value=this.properties.nameField[e],o.oninput=function(){r.setProperty("nameField."+e,o.value,r),o.placeholder=o.value},o.onfocus=function(){setTimeout((function(){r.getDocument().getSelection().getItem()!==r&&r.getDocument().getSelection().set(r,n.SelectionInputContext.INPUT,o)}),0)}),!this.document.isEditMode())return o;var i=document.createElement("div");if(i.className="input",i.appendChild(o),-1===[c.FIRST_NAME,c.LAST_NAME].indexOf(t)){var s=document.createElement("div");s.className="trash",s.innerHTML='<span class="vfb vfb-close"></span>',s.title=a.I18n.translateApplicationText("Remove subfield","control-defaults.name"),i.appendChild(s),s.onclick=function(){switch(t){case c.TITLE:r.setProperty("nameField.showTitle",!1,r);break;case c.FIRST_NAME:r.setProperty("nameField.showFirstName",!1,r);break;case c.INITIALS:r.setProperty("nameField.showInitials",!1,r);break;case c.MIDDLE_NAME:r.setProperty("nameField.showMiddleName",!1,r);break;case c.LAST_NAME:r.setProperty("nameField.showLastName",!1,r)}r.onFieldsVisibilityChanged(!0)}}return i},e.prototype.getMinFieldsRegionWidthForMobileModeForcedRendering=function(){return 10},e.prototype.getRenderedCSS=function(){var t=u.cast(this.properties.label.color),e=u.cast(this.properties.label.font.family),n=u.cast(this.properties.label.font.size),r=u.cast(this.properties.label.font.bold)?"bold":"normal",o=u.cast(this.properties.label.font.italic)?"italic":"normal",i=u.cast(this.properties.label.font.underline)?"underline":"none",s=u.cast(this.properties.label.font.align),a=u.cast(this.properties.input.color),l=u.cast(this.properties.input.backgroundColor),c=u.cast(this.properties.input.borderColor),p=u.cast(this.properties.input.borderWidth),d=u.cast(this.properties.input.borderRadius),h=u.cast(this.properties.input.borderStyle),f=u.cast(this.properties.input.font.family),g=u.cast(this.properties.input.font.size);return"\n            > label,\n            .shadow-wrapper > label {\n                color: "+t+";\n                font-size: "+n+'px;\n                font-family: "'+e+'";\n                font-weight: '+r+";\n                font-style: "+o+";\n                text-decoration: "+i+";\n                text-align: "+s+";\n            }\n            input[type=text] {\n                color: "+a+";\n                background-color: "+l+";\n                border: "+p+" "+h+" "+c+";\n                border-radius: "+d+";\n                font-weight: "+(u.cast(this.properties.input.font.bold)?"bold":"normal")+";\n                font-style: "+(u.cast(this.properties.input.font.italic)?"italic":"normal")+";\n                text-decoration: "+(u.cast(this.properties.input.font.underline)?"underline":"none")+";\n                text-align: "+u.cast(this.properties.input.font.align)+";\n                font-size: "+g+'px;\n                font-family: "'+f+'";\n\n                &:hover,\n                &:focus {\n                    border-color: '+this.document.getProperty("theme.selection.borderColor")+";\n                }\n                \n                &:focus {\n                    background-color: "+this.document.getProperty("theme.selection.backgroundColor")+";\n                }\n            }\n        "},e.prototype.setFirstName=function(t){this.firstName&&(this.firstName.value=i.Strings.fromHTML(String(t||"")))},e.prototype.setLastName=function(t){this.lastName&&(this.lastName.value=i.Strings.fromHTML(String(t||"")))},e.prototype.setInitials=function(t){this.initials&&(this.initials.value=i.Strings.fromHTML(String(t||"")))},e.prototype.setTitle=function(t){this.title&&(this.title.value=i.Strings.fromHTML(String(t||"")))},e.prototype.setMiddleName=function(t){this.middleName&&(this.middleName.value=i.Strings.fromHTML(String(t||"")))},e.prototype.listenToUserInput=function(t){var e=this;this.firstName&&(this.firstName.oninput=function(){t.updateValue(e)}),this.lastName&&(this.lastName.oninput=function(){t.updateValue(e)}),this.middleName&&(this.middleName.oninput=function(){t.updateValue(e)}),this.initials&&(this.initials.oninput=function(){t.updateValue(e)}),this.title&&(this.title.oninput=function(){t.updateValue(e)})},e.prototype.enumerateSubFields=function(){if(this.getProperty("name")){var t=this.getProperty("nameField.showTitle"),n=this.getProperty("nameField.showFirstName"),r=this.getProperty("nameField.showInitials"),o=this.getProperty("nameField.showMiddleName"),i=this.getProperty("nameField.showLastName"),s=[];return t&&s.push(e.SUBFIELD_TITLE),n&&s.push(e.SUBFIELD_FIRST_NAME),r&&s.push(e.SUBFIELD_INITIALS),o&&s.push(e.SUBFIELD_MIDDLE_NAME),i&&s.push(e.SUBFIELD_LAST_NAME),s}return[]},e.prototype.getAllowedValidators=function(){return["name"]},e.prototype.getSubFieldValue=function(t){switch(t){case e.SUBFIELD_FIRST_NAME:return this.firstName.value;case e.SUBFIELD_LAST_NAME:return this.lastName.value;case e.SUBFIELD_MIDDLE_NAME:return this.middleName?this.middleName.value:null;case e.SUBFIELD_INITIALS:return this.initials?this.initials.value:null;case e.SUBFIELD_TITLE:return this.title?this.title.value:null;default:return null}},e.prototype.performTranslation=function(){if(this.labelDOMNode){var t=a.I18n.translateViewFormText(this.getProperty("label.text"),this.getLabelI18nContext());if(this.labelDOMNode.textContent=t,this.shadowDOMNodeWrappers)for(var e in this.shadowDOMNodeWrappers)this.shadowDOMNodeWrappers.hasOwnProperty(e)&&(this.shadowDOMNodeWrappers[e].firstChild.textContent=t)}this.firstName&&(this.firstName.placeholder=a.I18n.translateViewFormText(this.properties.nameField.placeholderFirstName,p.CONTEXT)),this.lastName&&(this.lastName.placeholder=a.I18n.translateViewFormText(this.properties.nameField.placeholderLastName,p.CONTEXT)),this.middleName&&(this.middleName.placeholder=a.I18n.translateViewFormText(this.properties.nameField.placeholderMiddleName,p.CONTEXT)),this.initials&&(this.initials.placeholder=a.I18n.translateViewFormText(this.properties.nameField.placeholderInitials,p.CONTEXT)),this.title&&(this.title.placeholder=a.I18n.translateViewFormText(this.properties.nameField.placeholderTitle,p.CONTEXT))},e.prototype.supportsLabelInsideRendering=function(){return!0},e.prototype.render=function(){var e;u.cast(this.properties.label.align)===n.LabelAlignment.INSIDE&&(e=n.LabelAlignment.INSIDE),e===this.lastRenderedLabelAlignment&&void 0===e||(this.lastRenderedLabelAlignment=e,this.onLabelAlignmentChangedSwitchToShadowLabels(void 0!==this.lastRenderedLabelAlignment)),t.prototype.render.call(this)},e.prototype.onLabelAlignmentChangedSwitchToShadowLabels=function(t){t?(this.shadowDOMNodeWrappers=this.shadowDOMNodeWrappers||{},this.firstName&&!this.shadowDOMNodeWrappers[e.NODE_NAME_FIRST_NAME]&&(this.shadowDOMNodeWrappers[e.NODE_NAME_FIRST_NAME]=this.createShadowDOMNodeWrapper(this.firstName)),this.lastName&&!this.shadowDOMNodeWrappers[e.NODE_NAME_LAST_NAME]&&(this.shadowDOMNodeWrappers[e.NODE_NAME_LAST_NAME]=this.createShadowDOMNodeWrapper(this.lastName)),this.title&&!this.shadowDOMNodeWrappers[e.NODE_NAME_TITLE]&&(this.shadowDOMNodeWrappers[e.NODE_NAME_TITLE]=this.createShadowDOMNodeWrapper(this.title)),this.initials&&!this.shadowDOMNodeWrappers[e.NODE_NAME_INITIALS]&&(this.shadowDOMNodeWrappers[e.NODE_NAME_INITIALS]=this.createShadowDOMNodeWrapper(this.initials)),this.middleName&&!this.shadowDOMNodeWrappers[e.NODE_NAME_MIDDLE_NAME]&&(this.shadowDOMNodeWrappers[e.NODE_NAME_MIDDLE_NAME]=this.createShadowDOMNodeWrapper(this.middleName))):this.shadowDOMNodeWrappers=void 0},e.prototype.createShadowDOMNodeWrapper=function(t){var e=document.createElement("div"),n=document.createElement("label");return this.document.isEditMode()&&n.setAttribute("contenteditable","true"),n.textContent=this.getProperty("label.text")||"",e.appendChild(n),e.appendChild(t),e.className="shadow-wrapper input",e},e.prototype.getShadowDOMNodeWrapperOrInputItself=function(t){switch(t){case e.NODE_NAME_MIDDLE_NAME:return this.shadowDOMNodeWrappers&&this.shadowDOMNodeWrappers[e.NODE_NAME_MIDDLE_NAME]||this.middleName;case e.NODE_NAME_FIRST_NAME:return this.shadowDOMNodeWrappers&&this.shadowDOMNodeWrappers[e.NODE_NAME_FIRST_NAME]||this.firstName;case e.NODE_NAME_LAST_NAME:return this.shadowDOMNodeWrappers&&this.shadowDOMNodeWrappers[e.NODE_NAME_LAST_NAME]||this.lastName;case e.NODE_NAME_INITIALS:return this.shadowDOMNodeWrappers&&this.shadowDOMNodeWrappers[e.NODE_NAME_INITIALS]||this.initials;case e.NODE_NAME_TITLE:return this.shadowDOMNodeWrappers&&this.shadowDOMNodeWrappers[e.NODE_NAME_TITLE]||this.title;default:return null}},e.prototype.getTextAssociatedWithLabel=function(t){return this.getProperty("label.text")},e.prototype.setLabelTextWhichIsComingFromTheUser=function(e,n){if(t.prototype.setLabelTextWhichIsComingFromTheUser.call(this,e,n),this.shadowDOMNodeWrappers)for(var r in this.shadowDOMNodeWrappers)if(this.shadowDOMNodeWrappers.hasOwnProperty(r)){var o=this.shadowDOMNodeWrappers[r].firstChild;o.textContent!==e&&(o.textContent=e)}return this},e.prototype.getFieldContexts=function(){var e=t.prototype.getFieldContexts.call(this);if(this.shadowDOMNodeWrappers)for(var r in this.shadowDOMNodeWrappers)this.shadowDOMNodeWrappers.hasOwnProperty(r)&&e.push({node:this.shadowDOMNodeWrappers[r].firstChild,context:n.SelectionInputContext.LABEL});return e},e.prototype.onFilledStateChanged=function(t){var n=this,r=!1;"string"==typeof t&&"<name>"===t.substr(0,6)&&"</name>"===t.substr(-7)&&t.substr(6,t.length-13).replace(e.REPLACER_REGEXP,(function(t){for(var o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];switch(o[0]){case e.NODE_NAME_FIRST_NAME:r=r||!!n.firstName&&""!==o[1];break;case e.NODE_NAME_LAST_NAME:r=r||!!n.lastName&&""!==o[1];break;case e.NODE_NAME_INITIALS:r=r||!!n.initials&&""!==o[1];break;case e.NODE_NAME_TITLE:r=r||!!n.title&&""!==o[1];break;case e.NODE_NAME_MIDDLE_NAME:r=r||!!n.middleName&&""!==o[1]}return""})),this.setFilledState(r)},e.prototype.embedInPDFPage=function(t){var n=this;t.writeHTMLElement(this.labelDOMNode);[this.firstName,this.lastName,this.middleName,this.initials,this.title].filter((function(t){return!!t})).forEach((function(r){var o=t.getDocument().create(l.PDFNodeEntityType.INPUT_TEXT);t.initializeFieldDimensions(r,o),o.setBackgroundColor(u.cast(n.properties.input.backgroundColor)).setTextColor(u.cast(n.properties.input.color)).setBorderWidth(parseInt(u.cast(n.properties.input.borderWidth)||"1")).setBorderColor(u.cast(n.properties.input.borderColor)).setValue(r.placeholder).setFontFamily(u.cast(n.properties.input.font.family)).setMultiLine(!1).setName(n.getProperty("name")+"."+function(t){switch(t){case n.firstName:return e.SUBFIELD_FIRST_NAME;case n.lastName:return e.SUBFIELD_LAST_NAME;case n.middleName:return e.SUBFIELD_MIDDLE_NAME;case n.initials:return e.SUBFIELD_INITIALS;case n.title:return e.SUBFIELD_TITLE;default:return"unknown"}}(r)).setFontSize(u.cast(n.properties.input.font.size)).setRequired(n.isRequired()).setRepeatedIndex(n.getRepeatedIndex()),t.appendChild(o)}))},e.SUBFIELD_TITLE="Title",e.SUBFIELD_FIRST_NAME="First",e.SUBFIELD_INITIALS="Initials",e.SUBFIELD_MIDDLE_NAME="Middle",e.SUBFIELD_LAST_NAME="Last",e.NODE_NAME_TITLE="title",e.NODE_NAME_INITIALS="initials",e.NODE_NAME_FIRST_NAME="first",e.NODE_NAME_MIDDLE_NAME="middle",e.NODE_NAME_LAST_NAME="last",e.REPLACER_REGEXP=new RegExp("("+e.NODE_NAME_FIRST_NAME+"|"+e.NODE_NAME_LAST_NAME+"|"+e.NODE_NAME_TITLE+"|"+e.NODE_NAME_INITIALS+"|"+e.NODE_NAME_MIDDLE_NAME+') value="([^"]+)"\\/>',"g"),e}(n.Input);e.Name=d}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(0),n(31)],void 0===(o=function(t,e,n,r){Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.load=function(){return this.loader||(this.loader=n.Deferred((function(t){var e=window.define;window.define=function(){};var n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("src",r.CDN.getCDNUrl("/vendor/pdf-lib/pdf-lib.min.js")),n.onload=function(){var n=0;!function r(){window.PDFLib?(window.define=e,t.resolve(window.PDFLib)):++n<500?setTimeout((function(){r()}),20):(window.define=e,t.reject(new Error("Failed to load pdf-lib (timeout)")))}()},n.onerror=function(){window.define=e,t.reject(new Error("Failed to load pdf-lib"))},document.getElementsByTagName("head")[0].appendChild(n)})))},t}();e.PDFLibSDK=o}.apply(e,r))||(t.exports=o)},,function(t,e,n){"use strict";var r,o;r=[n,e,n(0),n(7),n(8)],void 0===(o=function(t,e,n,r,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.id=0,this.words=Object.create(null),this.minWordLength=2,this.maxWordLength=20}return t.getSupportedLanguages=function(){return["arabic","brazilian","croatian","english","german","hungarian","japanese","lithuanian","polish","slovak","turkish","armenian","bulgarian","czech","finnish","greek","indonesian","korean","marathi","portuguese","spanish","ukrainian","basque","catalan","danish","french","hebrew","irish","kurdish","norwegian","romanian","swedish","urdu","bengali","chinese","dutch","galician","hindi","italian","latvian","persian","russian","thai"].sort()},t.prototype.tokenize=function(t){var e=this;return r.Helpers.arrayUnique(String(t||"").normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().split(/[ \t\r\n,.<>/?;:'"\[{}\]\\|`~@#$%^!&*()_+=-]/).filter((function(t){return t.length>=e.minWordLength&&t.length<=e.maxWordLength})))},t.prototype.setMinWordLength=function(t){return this.minWordLength=t,this},t.prototype.setMaxWordLength=function(t){return this.maxWordLength=t,this},t.prototype.stem=function(t){var e=this;return this.tokenize(t).forEach((function(t){void 0===e.words[t]&&(e.words[t]=++e.id)})),this},t.prototype.toNeuralNetworkInput=function(t){for(var e=this,n=[0],r=1;r<=this.id;r++)n[r]=0;return this.tokenize(t).forEach((function(t){void 0===e.words[t]?n[0]=1:n[e.words[t]]=1})),n},t.prototype.toJSON=function(){return{id:this.id,words:this.words,minWordLength:this.minWordLength,maxWordLength:this.maxWordLength}},t.prototype.fromJSON=function(t){return this.id=t.id,this.words=t.words,this.minWordLength=t.minWordLength,this.maxWordLength=t.maxWordLength,this},t.getStopWordsFromStringBuffer=function(e){var n=(new t).setMinWordLength(1).setMaxWordLength(20);return n.stem(e),Object.keys(n.toJSON().words)},t.getStopWordsForLanguage=function(t){var e=this;return n.Deferred((function(n){t?o.NetworkCache.get("/static/stopwords/"+t+".txt").then((function(t){n.resolve(e.getStopWordsFromStringBuffer(t))})).fail((function(){n.resolve([])})):n.resolve([])}))},t}();e.Stemmer=i}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(0),n(2),n(11),n(8),n(7),n(14),n(3),n(17),n(12),n(18),n(1),n(62),n(5)],void 0===(o=function(t,e,n,r,o,i,a,u,l,c,p,d,h,f,g){var m;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.APPROVED="approved",t.CANCELED="canceled"}(m||(m={}));var y=function(){function t(){}return t.load=function(){return n.Deferred((function(t){t.resolve(new C)}))},t}();e.CashOnDeliverySDK=y;var v=function(){function t(){}return t.FIELD_CUSTOMER_FIRST_NAME="Customer First Name",t.FIELD_CUSTOMER_LAST_NAME="Customer Last Name",t.FIELD_CUSTOMER_PHONE="Customer Phone Number",t.FIELD_CUSTOMER_EMAIL="Customer Email Address",t.FIELD_ADDRESS_LINE_1="Address Line 1",t.FIELD_ADDRESS_LINE_2="Address Line 2",t.FIELD_ADDRESS_CITY="Address City",t.FIELD_ADDRESS_STATE="Address State",t.FIELD_ADDRESS_COUNTRY="Address Country",t.FIELD_ADDRESS_ZIP_CODE="Address ZipCode",t.FIELD_ORDER_COMMENT="Order Comment",t.VALUE_OF_HIDDEN_FIELD=":hidden",t}(),b=function(){function t(){}return t.CONTEXT_PLACEHOLDER="cash-on-delivery-dialog-hint",t.CONTEXT_BUTTON="cash-on-delivery-dialog-button",t.CONTEXT_LABEL="cash-on-delivery-dialog-label",t.CONTEXT_ERROR="cash-on-delivery-dialog-error",t.MSG_DIALOG_TITLE="Confirm your order",t.MSG_PLACEHOLDER_FIRST_NAME="example: John",t.MSG_PLACEHOLDER_LAST_NAME="example: Doe",t.MSG_PLACEHOLDER_EMAIL="example: john.doe@example.com",t.MSG_PLACEHOLDER_PHONE="example: +01-123-456-789",t.MSG_PLACEHOLDER_ADDRESS_LINE_1="str. ..., no. ..., ap. ...",t.MSG_PLACEHOLDER_ADDRESS_LINE_2="int. ..., building. ...., etc.",t.MSG_PLACEHOLDER_CITY="Your city",t.MSG_PLACEHOLDER_STATE="State, County, Sector, etc.",t.MSG_PLACEHOLDER_ZIP_CODE="Your Zip Code",t.MSG_PLACEHOLDER_COUNTRY="Select",t.MSG_PLACEHOLDER_COMMENT="example: I am at location between 2PM - 3PM",t.MSG_BUTTON_PLACE_ORDER="Place order",t.MSG_BUTTON_CANCEL_ORDER="Cancel order",t.MSG_LABEL_ORDER_DETAILS="Order Details",t.MSG_LABEL_TOTAL="Total:",t.MSG_LABEL_CUSTOMER_DETAILS="Customer Details",t.MSG_LABEL_FIRST_NAME="First name",t.MSG_LABEL_LAST_NAME="Last name",t.MSG_LABEL_EMAIL="Email",t.MSG_LABEL_PHONE="Phone",t.MSG_LABEL_ADDRESS_DETAILS="Address Details",t.MSG_LABEL_ADDRESS_LINE_1="Address line 1",t.MSG_LABEL_ADDRESS_LINE_2="Address line 2",t.MSG_LABEL_CITY="City",t.MSG_LABEL_ZIP_CODE="Zip code",t.MSG_LABEL_STATE="State",t.MSG_LABEL_COUNTRY="Country",t.MSG_LABEL_SAVE_INFORMATION="Save information on my computer, so that I can reuse it next time I place a new order",t.MSG_ERR_REQUIRED_FIELD="Required field",t.MSG_ERR_NOT_A_NAME="Not a name",t.MSG_ERR_NOT_AN_EMAIL="Not an email",t.MSG_ERR_NOT_A_PHONE_NUMBER="Not a phone number",t.MSG_ERR_NUMBER_EXPECTED="Number expected",t}();e.CashOnDeliveryTextResources=b;var C=function(){function t(){var t=this;this.savedPayOnDeliverySettings={},this.allowAutoSave=!0,this.savePayOnDeliverySettingsDebouncer=p.Debouncer.create((function(){t.savePayOnDeliverySettingsInSyncMode()}),1e3)}return t.prototype.getCartAmount=function(){return Number(this.fields.cart_amount)},t.prototype.getCartCurrency=function(){return String(this.fields.cart_currency)},t.prototype.getFormId=function(){return String(this.fields.form_id)},t.prototype.getPaymentId=function(){return Number(this.fields.payment_id)},t.prototype.getSettings=function(){var t={customer:{firstName:null,lastName:null,email:null,phone:null},address:{line1:null,line2:null,city:null,country:null,state:null,zipCode:null},order:{comment:null}};try{var e=JSON.parse(this.fields.settings);if(e&&e instanceof Object)for(var n in e)if(e.hasOwnProperty(n)&&e.propertyIsEnumerable(n))switch(n){case v.FIELD_CUSTOMER_FIRST_NAME:t.customer.firstName=e[n];break;case v.FIELD_CUSTOMER_LAST_NAME:t.customer.lastName=e[n];break;case v.FIELD_CUSTOMER_EMAIL:t.customer.email=e[n];break;case v.FIELD_CUSTOMER_PHONE:t.customer.phone=e[n];break;case v.FIELD_ADDRESS_LINE_1:t.address.line1=e[n];break;case v.FIELD_ADDRESS_LINE_2:t.address.line2=e[n];break;case v.FIELD_ADDRESS_CITY:t.address.city=e[n];break;case v.FIELD_ADDRESS_STATE:t.address.state=e[n];break;case v.FIELD_ADDRESS_ZIP_CODE:t.address.zipCode=e[n];break;case v.FIELD_ADDRESS_COUNTRY:t.address.country=e[n];break;case v.FIELD_ORDER_COMMENT:t.order.comment=e[n]}}catch(t){console.warn("Failed to parse PayOnDelivery settings! Returning defaults!"),console.error(t)}return t},t.prototype.updatePayOnDeliveryUserOptions=function(t){this.allowAutoSave&&(this.savedPayOnDeliverySettings[t.getName()]=t.getValue(),this.savePayOnDeliverySettingsDebouncer())},t.prototype.setAutoSavePayOnDeliveryFields=function(t){return this.allowAutoSave=t,this.allowAutoSave||d.PersistentStorage.removeItem("cash_on_delivery_settings"),this},t.prototype.getLoadedPayOnDeliverySettingsFromUserStorage=function(){try{var t=d.PersistentStorage.getItem("cash_on_delivery_settings")||"{}";return JSON.parse(t)||{}}catch(t){return{}}},t.prototype.savePayOnDeliverySettingsInSyncMode=function(){try{var t=d.PersistentStorage.getItem("cash_on_delivery_settings")||"{}",e=JSON.parse(t)||{};for(var n in this.savedPayOnDeliverySettings)this.savedPayOnDeliverySettings.hasOwnProperty(n)&&this.savedPayOnDeliverySettings.propertyIsEnumerable(n)&&(e[n]=this.savedPayOnDeliverySettings[n]);d.PersistentStorage.setItem("cash_on_delivery_settings",JSON.stringify(e),d.DataPersistenceType.NON_CRITICAL)}catch(t){}for(var n in this.savedPayOnDeliverySettings)this.savedPayOnDeliverySettings.hasOwnProperty(n)&&this.savedPayOnDeliverySettings.propertyIsEnumerable(n)&&delete this.savedPayOnDeliverySettings[n]},t.prototype.run=function(e){var s=this;return n.Deferred((function(a){s.dialog?a.reject(new Error("Cash on Delivery Application already started")):(s.dialog=new r.Dialog({closable:!1,title:h.I18n.translateViewFormText(b.MSG_DIALOG_TITLE,b.CONTEXT_PLACEHOLDER),width:"500px",height:"700px",modal:!0,movable:!0,style:r.DialogStyle.FLAT_COLOR}).center(),s.dialog.getBody().setAttribute("data-dialog-role","cash-on-delivery"),s.loader=new o.Loader(s.dialog.getBody()),s.loader.addLoadRequest(),i.NetworkCache.get("/static/templates/ui-v2/view-form-dialogs/cash-on-delivery-dialog.html").then((function(o){s.loader.removeLoadRequest();var i=s.createTemplateModel();i.amount=f.NumberUtils.formatFloat(s.getCartAmount(),2),i.currency=s.getCartCurrency();var l=t.createInputFields(s.getSettings()),p=s.getLoadedPayOnDeliverySettingsFromUserStorage();s.dialog.getBody().innerHTML=u.Handlebars.to_html(o,i),n(s.dialog.getBody()).find("[data-i18n-const]").each((function(){var t=this.getAttribute("data-i18n-const");this.textContent=h.I18n.translateViewFormText(b[t],b.CONTEXT_LABEL)}));for(var d=0,y=l.flattenedNames.length;d<y;d++){var v=c.UniqueId.next(),C=t.getFieldByName(l,l.flattenedNames[d]);s.dialog.getBody().querySelector('[data-field="'+l.flattenedNames[d]+'"] > [data-role=placeholder]').appendChild(C.setId(v).getInput());var E=C.getInput().parentNode.parentNode.querySelector("label"),A=C.getInput().parentNode.parentNode.querySelector("[data-role=error]");E.setAttribute("for",v),function(t,e){t.on("change",(function(){var n=t.getError();e.textContent="",n?(e.appendChild(document.createElement("span")).className="vfb vfb-error2",e.appendChild(document.createTextNode(" "+n))):s.updatePayOnDeliveryUserOptions(t)}))}(C,A),t.loadInitialFieldValue(e,s.getSettings(),C,p)}var I=s.dialog.getBody().querySelector("[data-role=auto-save] input");I.checked=s.allowAutoSave,I.onclick=function(){if(s.setAutoSavePayOnDeliveryFields(I.checked),s.allowAutoSave)for(var e=0,n=l.flattenedNames.length;e<n;e++){var r=t.getFieldByName(l,l.flattenedNames[e]);null===r.getError()&&s.updatePayOnDeliveryUserOptions(r)}},s.dialog.tabTrap("input, textarea, select, button");var T=function(e){return s.loader.reattachToElement(s.dialog.getBody()).addLoadRequest(),n.Deferred((function(n){for(var r={},o=0,i=l.flattenedNames.length;o<i;o++){(a=t.getFieldByName(l,l.flattenedNames[o])).trigger("change")}for(o=0,i=l.flattenedNames.length;o<i;o++){var a;if(null!==(a=t.getFieldByName(l,l.flattenedNames[o])).getError()&&e===m.APPROVED){n.reject(new Error("HIDDEN"));try{a.getInput().scrollIntoView({behavior:"smooth"})}catch(t){a.getInput().focus()}return a.trigger("change"),void s.loader.removeLoadRequest()}r[a.getName()]=a.getValue()}r.status=e,g.API.put("payments/charge/"+s.getFormId()+"/"+s.getPaymentId(),{payment:JSON.stringify(r)}).then((function(t){t?n.resolve(t):n.reject(new Error("Unexpected server response: "+JSON.stringify(t)))})).fail((function(t){n.reject(t)})).always((function(){s.loader.removeLoadRequest()}))}))},S=function(){T(m.APPROVED).then((function(t){s.dialog.close(),s.onCloseCallback(),a.resolve(t)})).fail((function(t){"Error: HIDDEN"!==String(t)&&(console.error("Failed to confirm order: ",t),r.Dialog.alert("An error occurred while Confirming your order. Please retry. If the problem persists, contact support","Failed to Confirm order"))}))};s.dialog.setButtons([{classNames:"btn btn-primary",callback:function(){S()},caption:h.I18n.translateViewFormText(b.MSG_BUTTON_PLACE_ORDER,b.CONTEXT_BUTTON)},{classNames:"btn btn-danger",callback:function(){T(m.CANCELED).then((function(t){s.dialog.close(),s.onCloseCallback(),a.resolve(t)})).fail((function(t){"Error: HIDDEN"!==String(t)&&(console.error("Failed to cancel order: ",t),r.Dialog.alert("An error occurred while Cancelling your order. Please retry. If the problem persists, contact support","Failed to cancel order"))}))},caption:h.I18n.translateViewFormText(b.MSG_BUTTON_CANCEL_ORDER,b.CONTEXT_BUTTON)}]),s.areAllFieldsHidden()&&S()})).fail((function(t){s.loader.removeLoadRequest(),r.Dialog.alert("There was an error while downloading from server the resources of the Order Form dialog. Please retry. If the problem persists, contact support","Cannot open order form"),s.dialog.close(),s.onCloseCallback(),a.reject(new Error("Fetch error '/static/templates/ui/cash-on-delivery-dialog.html': "+String(t)))})))}))},t.prototype.areAllFieldsHidden=function(){var t=a.Helpers.clone(this.getSettings());for(var e in t)if(t.hasOwnProperty(e)&&t.propertyIsEnumerable(e))for(var n in t[e])if(t[e].hasOwnProperty(n)&&t[e].propertyIsEnumerable(n)&&t[e][n]!==v.VALUE_OF_HIDDEN_FIELD)return!1;return!0},t.prototype.createTemplateModel=function(){var t=a.Helpers.clone(this.getSettings());for(var e in t)if(t.hasOwnProperty(e)&&t.propertyIsEnumerable(e)){var n=!1;for(var r in t[e])t[e].hasOwnProperty(r)&&t[e].propertyIsEnumerable(r)&&(t[e][r]!==v.VALUE_OF_HIDDEN_FIELD?(n=!0,t[e][r]=!0):t[e][r]=!1);t[e].visibility=n}return t},t.prototype.setOnCloseCallback=function(t){return this.onCloseCallback=t||function(){},this},t.prototype.setFields=function(t){return this.fields=t,this},t.createInputFields=function(t){var e={address:{},customer:{},order:{},flattenedNames:[]};return t.customer.firstName!==v.VALUE_OF_HIDDEN_FIELD&&(e.customer.firstName=new A(v.FIELD_CUSTOMER_FIRST_NAME).setRequired(!0).setPlaceholder(h.I18n.translateViewFormText(b.MSG_PLACEHOLDER_FIRST_NAME,b.CONTEXT_PLACEHOLDER)),e.flattenedNames.push("customer.firstName")),t.customer.lastName!==v.VALUE_OF_HIDDEN_FIELD&&(e.customer.lastName=new A(v.FIELD_CUSTOMER_LAST_NAME).setRequired(!0).setPlaceholder(h.I18n.translateViewFormText(b.MSG_PLACEHOLDER_LAST_NAME,b.CONTEXT_PLACEHOLDER)),e.flattenedNames.push("customer.lastName")),t.customer.email!==v.VALUE_OF_HIDDEN_FIELD&&(e.customer.email=new I(v.FIELD_CUSTOMER_EMAIL).setRequired(!0).setPlaceholder(h.I18n.translateViewFormText(b.MSG_PLACEHOLDER_EMAIL,b.CONTEXT_PLACEHOLDER)),e.flattenedNames.push("customer.email")),t.customer.phone!==v.VALUE_OF_HIDDEN_FIELD&&(e.customer.phone=new T(v.FIELD_CUSTOMER_PHONE).setRequired(!0).setPlaceholder(h.I18n.translateViewFormText(b.MSG_PLACEHOLDER_PHONE,b.CONTEXT_PLACEHOLDER)),e.flattenedNames.push("customer.phone")),t.address.line1!==v.VALUE_OF_HIDDEN_FIELD&&(e.address.line1=new S(v.FIELD_ADDRESS_LINE_1).setRequired(!0).setPlaceholder(h.I18n.translateViewFormText(b.MSG_PLACEHOLDER_ADDRESS_LINE_1,b.CONTEXT_PLACEHOLDER)),e.flattenedNames.push("address.line1")),t.address.line2!==v.VALUE_OF_HIDDEN_FIELD&&(e.address.line2=new S(v.FIELD_ADDRESS_LINE_2).setRequired(!1).setPlaceholder(h.I18n.translateViewFormText(b.MSG_PLACEHOLDER_ADDRESS_LINE_2,b.CONTEXT_PLACEHOLDER)),e.flattenedNames.push("address.line2")),t.address.city!==v.VALUE_OF_HIDDEN_FIELD&&(e.address.city=new A(v.FIELD_ADDRESS_CITY).setRequired(!0).setPlaceholder(h.I18n.translateViewFormText(b.MSG_PLACEHOLDER_CITY,b.CONTEXT_PLACEHOLDER)),e.flattenedNames.push("address.city")),t.address.state!==v.VALUE_OF_HIDDEN_FIELD&&(e.address.state=new A(v.FIELD_ADDRESS_STATE).setRequired(!0).setPlaceholder(h.I18n.translateViewFormText(b.MSG_PLACEHOLDER_STATE,b.CONTEXT_PLACEHOLDER)),e.flattenedNames.push("address.state")),t.address.country!==v.VALUE_OF_HIDDEN_FIELD&&(e.address.country=new N(v.FIELD_ADDRESS_COUNTRY).setRequired(!0),e.flattenedNames.push("address.country")),t.address.zipCode!==v.VALUE_OF_HIDDEN_FIELD&&(e.address.zipCode=new _(v.FIELD_ADDRESS_ZIP_CODE).setRequired(!0).setPlaceholder(h.I18n.translateViewFormText(b.MSG_PLACEHOLDER_ZIP_CODE,b.CONTEXT_PLACEHOLDER)),e.flattenedNames.push("address.zipCode")),t.order.comment!==v.VALUE_OF_HIDDEN_FIELD&&(e.order.comment=new w(v.FIELD_ORDER_COMMENT).setRequired(!1).setPlaceholder(h.I18n.translateViewFormText(b.MSG_PLACEHOLDER_COMMENT,b.CONTEXT_PLACEHOLDER)),e.flattenedNames.push("order.comment")),e},t.getFieldByName=function(t,e){var n=e.split(".");return t[n[0]][n[1]]},t.loadInitialFieldValue=function(t,e,n,r){var o;switch(n.getName()){case v.FIELD_CUSTOMER_FIRST_NAME:o=e.customer.firstName;break;case v.FIELD_CUSTOMER_LAST_NAME:o=e.customer.lastName;break;case v.FIELD_CUSTOMER_EMAIL:o=e.customer.email;break;case v.FIELD_CUSTOMER_PHONE:o=e.customer.phone;break;case v.FIELD_ADDRESS_LINE_1:o=e.address.line1;break;case v.FIELD_ADDRESS_LINE_2:o=e.address.line2;break;case v.FIELD_ADDRESS_CITY:o=e.address.city;break;case v.FIELD_ADDRESS_ZIP_CODE:o=e.address.zipCode;break;case v.FIELD_ADDRESS_COUNTRY:o=e.address.country;break;case v.FIELD_ADDRESS_STATE:o=e.address.state;break;case v.FIELD_ORDER_COMMENT:o=e.order.comment;break;default:o=v.VALUE_OF_HIDDEN_FIELD}if(null!==o&&o!==v.VALUE_OF_HIDDEN_FIELD){var i=(o||"").split("."),s=i[0],a=i[1],u=t.getControlIdByControlName(s),l="";u&&(l=t.getValue(u,a)),l&&n.setValue(String(l)),!n.getValue()&&void 0!==r[n.getName()]&&r[n.getName()]&&n.setValue(r[n.getName()])}else null===o&&void 0!==r[n.getName()]&&r[n.getName()]&&n.setValue(r[n.getName()])},t}();e.CashOnDeliveryFormApplication=C;var E=function(t){function e(e){var n=t.call(this)||this;return n.required=!0,n.name=e,n}return s(e,t),e.prototype.getInput=function(){return this.input},e.prototype.getName=function(){return this.name},e.prototype.isRequired=function(){return this.required},e.prototype.setRequired=function(t){return this.required=t,this},e.prototype.getValue=function(){return null===this.getError()?this.input.value:null},e.prototype.setValue=function(t){return this.input.value=String(t),this.trigger("change"),this},e.prototype.setId=function(t){return this.input.id=t,this},e}(l.EventEmitter),A=function(t){function e(e){var n=t.call(this,e)||this;return n.input=document.createElement("input"),n.input.type="text",n.input.onblur=function(){n.trigger("change")},n}return s(e,t),e.prototype.setPlaceholder=function(t){return t?this.input.setAttribute("placeholder",t):this.input.removeAttribute("placeholder"),this},e.prototype.getError=function(){var t=this.input.value.replace(/^[\s]+|[\s]+$/g,"");if(!t)return this.isRequired()?h.I18n.translateViewFormText(b.MSG_ERR_REQUIRED_FIELD,b.CONTEXT_ERROR):null;for(var n=0,r=t.length;n<r;n++)if(!e.ALPHABET_LETTERS.test(t.charAt(n))&&-1===e.OTHER_NAME_CHARACTERS.indexOf(t.charAt(n)))return h.I18n.translateViewFormText(b.MSG_ERR_NOT_A_NAME,b.CONTEXT_ERROR);return null},e.ALPHABET_LETTERS=/[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7B9\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/i,e.OTHER_NAME_CHARACTERS="'-. ",e}(E),I=function(t){function e(e){var n=t.call(this,e)||this;return n.input=document.createElement("input"),n.input.type="text",n.input.onblur=function(){n.trigger("change")},n}return s(e,t),e.prototype.setPlaceholder=function(t){return t?this.input.setAttribute("placeholder",t):this.input.removeAttribute("placeholder"),this},e.prototype.getError=function(){return this.input.value.replace(/^[\s]+|[\s]+$/g,"")?e.EMAIL_REGEX.test(this.input.value)?null:h.I18n.translateViewFormText(b.MSG_ERR_NOT_AN_EMAIL,b.CONTEXT_ERROR):this.isRequired()?h.I18n.translateViewFormText(b.MSG_ERR_REQUIRED_FIELD,b.CONTEXT_ERROR):null},e.EMAIL_REGEX=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,e}(E),T=function(t){function e(e){var n=t.call(this,e)||this;return n.input=document.createElement("input"),n.input.type="text",n.input.onblur=function(){n.trigger("change")},n}return s(e,t),e.prototype.setPlaceholder=function(t){return t?this.input.setAttribute("placeholder",t):this.input.removeAttribute("placeholder"),this},e.prototype.getError=function(){if(!this.input.value.replace(/^[\s]+|[\s]+$/g,""))return this.isRequired()?h.I18n.translateViewFormText(b.MSG_ERR_REQUIRED_FIELD,b.CONTEXT_ERROR):null;if(!e.PHONE_REGEX.test(this.input.value))return h.I18n.translateViewFormText(b.MSG_ERR_NOT_A_PHONE_NUMBER,b.CONTEXT_ERROR);var t=this.input.value.replace(/[^\d]+/g,"");return t.length<8||t.length>15?h.I18n.translateViewFormText(b.MSG_ERR_NOT_A_PHONE_NUMBER,b.CONTEXT_ERROR):null},e.PHONE_REGEX=/^(\+[\d]{1,3}|\([\d]{1,3}\))?[\d \-.]+$/,e}(E),S=function(t){function e(e){var n=t.call(this,e)||this;return n.input=document.createElement("input"),n.input.type="text",n.input.onblur=function(){n.trigger("change")},n}return s(e,t),e.prototype.setPlaceholder=function(t){return t?this.input.setAttribute("placeholder",t):this.input.removeAttribute("placeholder"),this},e.prototype.getError=function(){return!this.input.value.replace(/^[\s]+|[\s]+$/g,"")&&this.isRequired()?h.I18n.translateViewFormText(b.MSG_ERR_REQUIRED_FIELD,b.CONTEXT_ERROR):null},e}(E),w=function(t){function e(e){var n=t.call(this,e)||this;return n.input=document.createElement("textarea"),n.input.onblur=function(){n.trigger("change")},n}return s(e,t),e.prototype.setPlaceholder=function(t){return t?this.input.setAttribute("placeholder",t):this.input.removeAttribute("placeholder"),this},e.prototype.getError=function(){return!this.input.value.replace(/^[\s]+|[\s]+$/g,"")&&this.isRequired()?h.I18n.translateViewFormText(b.MSG_ERR_REQUIRED_FIELD,b.CONTEXT_ERROR):null},e}(E),_=function(t){function e(e){var n=t.call(this,e)||this;return n.input=document.createElement("input"),n.input.type="text",n.input.onblur=function(){n.trigger("change")},n}return s(e,t),e.prototype.setPlaceholder=function(t){return t?this.input.setAttribute("placeholder",t):this.input.removeAttribute("placeholder"),this},e.prototype.getError=function(){var t=this.input.value.replace(/^[\s]+|[\s]+$/g,"");return t?!/^[0-9]+$/.test(t)||/^[0]+$/.test(t)?h.I18n.translateViewFormText(b.MSG_ERR_NUMBER_EXPECTED,b.CONTEXT_ERROR):null:this.isRequired()?h.I18n.translateViewFormText(b.MSG_ERR_REQUIRED_FIELD,b.CONTEXT_ERROR):null},e}(E),N=function(t){function e(e){var n=t.call(this,e)||this;return n.input=document.createElement("select"),n.input.onchange=function(){n.trigger("change")},n.initCountries(),n}return s(e,t),e.prototype.setPlaceholder=function(t){return this},e.prototype.initCountries=function(){var t=e.COUNTRIES_LIST.split("|"),n=document.createElement("option");n.text=h.I18n.translateViewFormText(b.MSG_PLACEHOLDER_COUNTRY,b.CONTEXT_PLACEHOLDER),n.value="",this.input.add(n);for(var r=0,o=t.length;r<o;r++)(n=document.createElement("option")).text=n.value=t[r],this.input.add(n)},e.prototype.getError=function(){return this.isRequired()&&!this.input.value?h.I18n.translateViewFormText(b.MSG_ERR_REQUIRED_FIELD,b.CONTEXT_ERROR):null},e.COUNTRIES_LIST="Afghanistan|Ãland Islands|Albania|Algeria|American Samoa|Andorra|Angola|Anguilla|Antarctica|Antigua and Barbuda|Argentina|Armenia|Aruba|Australia|Austria|Azerbaijan|Bahamas|Bahrain|Bangladesh|Barbados|Belarus|Belgium|Belize|Benin|Bermuda|Bhutan|Bolivia|Bosnia and Herzegovina|Botswana|Bouvet Island|Brazil|British Indian Ocean Territory|Brunei Darussalam|Bulgaria|Burkina Faso|Burundi|Cambodia|Cameroon|Canada|Cape Verde|Cayman Islands|Central African Republic|Chad|Chile|China|Christmas Island|Cocos (Keeling) Islands|Colombia|Comoros|Congo|Congo, The Democratic Republic of the|Cook Islands|Costa Rica|Cote D'Ivoire|Croatia|Cuba|Cyprus|Czech Republic|Denmark|Djibouti|Dominica|Dominican Republic|Ecuador|Egypt|El Salvador|Equatorial Guinea|Eritrea|Estonia|Ethiopia|Falkland Islands(Malvinas)|Faroe Islands|Fiji|Finland|France|French Guiana|French Polynesia|French Southern Territories|Gabon|Gambia|Georgia|Germany|Ghana|Gibraltar|Greece|Greenland|Grenada|Guadeloupe|Guam|Guatemala|Guernsey|Guinea|Guinea - Bissau|Guyana|Haiti|Heard Island and Mcdonald Islands|Holy See(Vatican City State)|Honduras|Hong Kong|Hungary|Iceland|India|Indonesia|Iran, Islamic Republic Of|Iraq|Ireland|Isle of Man|Israel|Italy|Jamaica|Japan|Jersey|Jordan|Kazakhstan|Kenya|Kiribati|Korea, Democratic People's Republic of|Korea, Republic of|Kuwait|Kyrgyzstan|Lao People'S Democratic Republic|Latvia|Lebanon|Lesotho|Liberia|Libyan Arab Jamahiriya|Liechtenstein|Lithuania|Luxembourg|Macao|Macedonia, The Former Yugoslav Republic of|Madagascar|Malawi|Malaysia|Maldives|Mali|Malta|Marshall Islands|Martinique|Mauritania|Mauritius|Mayotte|Mexico|Micronesia, Federated States of|Moldova, Republic of|Monaco|Mongolia|Montserrat|Morocco|Mozambique|Myanmar|Namibia|Nauru|Nepal|Netherlands|Netherlands Antilles|New Caledonia|New Zealand|Nicaragua|Niger|Nigeria|Niue|Norfolk Island|Northern Mariana Islands|Norway|Oman|Pakistan|Palau|Palestinian Territory, Occupied|Panama|Papua New Guinea|Paraguay|Peru|Philippines|Pitcairn|Poland|Portugal|Puerto Rico|Qatar|Reunion|Romania|Russian Federation|RWANDA|Saint Helena|Saint Kitts and Nevis|Saint Lucia|Saint Pierre and Miquelon|Saint Vincent and the Grenadines|Samoa|San Marino|Sao Tome and Principe|Saudi Arabia|Senegal|Serbia and Montenegro|Seychelles|Sierra Leone|Singapore|Slovakia|Slovenia|Solomon Islands|Somalia|South Africa|South Georgia and the South Sandwich Islands|Spain|Sri Lanka|Sudan|Suriname|Svalbard and Jan Mayen|Swaziland|Sweden|Switzerland|Syrian Arab Republic|Taiwan, Province of China|Tajikistan|Tanzania, United Republic of|Thailand|Timor - Leste|Togo|Tokelau|Tonga|Trinidad and Tobago|Tunisia|Turkey|Turkmenistan|Turks and Caicos Islands|Tuvalu|Uganda|Ukraine|United Arab Emirates|United Kingdom|United States|United States Minor Outlying Islands|Uruguay|Uzbekistan|Vanuatu|Venezuela|Viet Nam|Virgin Islands, British|Virgin Islands, U. S.|Wallis and Futuna|Western Sahara|Yemen|Zambia|Zimbabwe",e}(E)}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(57),n(9),n(4),n(43),n(2),n(86),n(1),n(10),n(13),n(290),n(26)],void 0===(o=function(t,e,n,r,o,i,a,u,l,c,p,d,h){var f;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.FOLLOW_URL=0]="FOLLOW_URL",t[t.OPEN_POPUP=1]="OPEN_POPUP"}(f=e.TermsOfServiceLinkAction||(e.TermsOfServiceLinkAction={}));var g=function(t){function e(n,r,o){var i=t.call(this,n,r||e.getDefaultProperties(n),o)||this;return i.selected=!1,i.addClass("tos"),i.dragIndicator=h.DOM.document.createElement("div"),i.dragIndicator.className="drag-svg",i.input=document.createElement("input"),i.input.type="checkbox",i}return s(e,t),e.getDefaultProperties=function(e){var n=t.addLabelProperties.call(this,t.addSizeProperties.call(this,{name:"Q",visibility:"",termsOfService:{linkMethod:f.FOLLOW_URL,linkUrl:"",linkText:"",linkClickTarget:""},validation:{required:!0,customErrorMessage:""}}),l.I18n.translateApplicationText("I agree to _Terms of Service_","control-defaults.tos"),e);return delete n.label.width,delete n.label.align,n},e.prototype.getTranslations=function(){var t=[];if(this.properties.label.text&&t.push({original:this.properties.label.text}),this.hasProperty("validation.customErrorMessage")){var e=this.getProperty("validation.customErrorMessage");e&&t.push({original:e,context:"form-fields-errors"})}return t},e.prototype.getTypeId=function(){return o.NodeTypes.TERMS_OF_SERVICE},e.prototype.hasLabel=function(){return!0},e.prototype.getValue=function(){return this.input.checked},e.prototype.setValue=function(t){return this.input.checked=!!t,this},e.prototype.hasValue=function(){return!0},e.prototype.getFieldsLayout=function(){return[]},e.prototype.getNodeName=function(){return"Terms of service"},e.prototype.listenToUserInput=function(t){var e=this;this.input.onclick=function(){t.updateValue(e)}},e.prototype.render=function(){for(;this.root.firstChild;)this.root.removeChild(this.root.firstChild);if(this.root.appendChild(this.dragIndicator),this.resizers&&(this.resizers.north&&this.root.appendChild(this.resizers.north),this.resizers.south&&this.root.appendChild(this.resizers.south),this.resizers.east&&this.root.appendChild(this.resizers.east),this.resizers.west&&this.root.appendChild(this.resizers.west)),this.labelDOMNode)for(;this.labelDOMNode.firstChild;)this.labelDOMNode.removeChild(this.labelDOMNode.firstChild);else this.labelDOMNode=document.createElement("label"),this.labelDOMNode.tabIndex=0,this.root.appendChild(this.labelDOMNode);if(this.labelDOMNode.parentNode!==this.root&&this.root.appendChild(this.labelDOMNode),this.setupLabel(!1),this.error){var t=document.createElement("div");t.textContent=l.I18n.translateViewFormText.apply(l.I18n,[this.error.message,"form-fields-errors",0].concat(this.error.args||[])),t.className="error",this.root.appendChild(t)}this.setupTosLink()},e.prototype.setupLabel=function(t){var e,n,r=l.I18n.translateViewFormText(this.properties.label.text+""),o=0;if(this.labelDOMNode.appendChild(this.input),this.labelDOMNode.appendChild(document.createElement("span")).className="decorator",t)this.labelDOMNode.appendChild(document.createTextNode(r));else for(;r;)switch(!0){case 0===o&&!!(e=/^_([\s\S]+?)_/.exec(r)):r=r.substr(e[0].length),(n=document.createElement("a")).textContent=e[1],n.setAttribute("data-link-index",String(o)),this.document.isEditMode()||(n.href="javascript:"),this.labelDOMNode.appendChild(n),o++;break;case!!(e=/^[^_]+/.exec(r)):r=r.substr(e[0].length),this.labelDOMNode.appendChild(document.createTextNode(e[0]));break;default:var i=r.substr(0,1);""!==i&&(r=r.substr(1),this.labelDOMNode.appendChild(document.createTextNode(i)))}},e.prototype.onSelect=function(){if(!this.selected){for(this.selected=!0,t.prototype.onSelect.call(this);this.labelDOMNode.firstChild;)this.labelDOMNode.removeChild(this.labelDOMNode.firstChild);this.setupLabel(!0),this.labelDOMNode.hasAttribute("contentEditable")&&this.labelDOMNode.focus()}},e.prototype.onDeselect=function(){if(this.selected){for(this.selected=!1,t.prototype.onDeselect.call(this);this.labelDOMNode.firstChild;)this.labelDOMNode.removeChild(this.labelDOMNode.firstChild);this.setupLabel(!1)}},e.prototype.setLabelDOMNodeText=function(e,n){if(e!==this.labelDOMNode)return t.prototype.setLabelDOMNodeText.call(this,e,n);for(;e.firstChild;)e.removeChild(e.firstChild);this.setupLabel(this.selected)},e.prototype.getRenderedCSS=function(){var t=c.cast(this.properties.label.color),e=c.cast(this.properties.label.font.family);return"\n            > label {\n                color: "+t+";\n                font-size: "+c.cast(this.properties.label.font.size)+'px;\n                font-family: "'+e+'";\n                font-weight: '+(c.cast(this.properties.label.font.bold)?"bold":"normal")+";\n                font-style: "+(c.cast(this.properties.label.font.italic)?"italic":"normal")+";\n                text-decoration: "+(c.cast(this.properties.label.font.underline)?"underline":"none")+";\n                text-align: "+c.cast(this.properties.label.font.align)+";\n                \n                &:hover .decorator,\n                &:focus .decorator {\n                     color: "+this.document.getProperty("theme.selection.borderColor")+";\n                }\n            }\n        "},e.prototype.setupTosLink=function(){var t=this;if(!this.document.isEditMode()){var e=this.labelDOMNode.querySelector("a"),n=this.getProperty("termsOfService.linkUrl"),r=this.getProperty("termsOfService.linkClickTarget"),o=this.getProperty("termsOfService.linkMethod"),s=this.getProperty("termsOfService.linkText");if(e)switch(o){case f.FOLLOW_URL:i.DataFormat.isURL(n)&&(e.setAttribute("href",n),["_blank","_parent"].indexOf(r)>-1&&e.setAttribute("target",r));break;case f.OPEN_POPUP:s&&(e.onclick=function(){t.showPopup(s,e.textContent)})}}},e.prototype.showPopup=function(t,e){var r=new a.Dialog({width:"500px",height:"500px",title:e||"",movable:!0,closable:!0,style:a.DialogStyle.FLAT_COLOR,buttons:[{caption:l.I18n.translateApplicationText("Ok","ui.dialog"),callback:function(){r.close()}}]}).center();r.getRoot().setAttribute("id","tos-editor"),r.getBody().innerHTML=u.HTMLSanitizer.sanitize(n.markdown.toHTML(t))},e.prototype.performTranslation=function(){if(this.labelDOMNode){for(;this.labelDOMNode.firstChild;)this.labelDOMNode.removeChild(this.labelDOMNode.firstChild);this.setupLabel(!1)}},e.prototype.supportsLabelInsideRendering=function(){return!1},e.prototype.embedInPDFPage=function(t){t.writeHTMLElement(this.labelDOMNode);var e=t.getDocument().create(p.PDFNodeEntityType.INPUT_CHECKBOX).setName(this.getProperty("name")).setRequired(this.isRequired()).setRepeatedIndex(this.getRepeatedIndex()).setBooleanValue(!0),n=this.input.nextSibling.getBoundingClientRect(),r=~~n.top-t.getDimensions().top,o=~~n.left-t.getDimensions().left;e.addOption("Yes",{top:r,left:o},!1),t.appendChild(e)},e.prototype.supportsDefaultValue=function(){return!0},e.prototype.getDefaultValueStrategy=function(){return new d.BooleanInputDefaultValue},e}(r.Input);e.TermsOfService=g}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(0),n(9),n(20),n(16),n(4),n(10)],void 0===(o=function(t,e,n,r,o,i,a,u){Object.defineProperty(e,"__esModule",{value:!0});var l=function(t){function e(n,r,o){var i=t.call(this,n,r||e.getDefaultProperties(n),o)||this;return i.addClass("social-media"),i.embed=document.createElement("div"),i.embed.className="input embed",i.collection=new c,i.onSocialMediaNetworksChanged(),i.initializeViewFormEvents(),i}return s(e,t),e.getDefaultProperties=function(t){return this.addSizeProperties({name:"Q",visibility:"",socialMedia:{networks:'[{"typeId":1},{"typeId":2},{"typeId":3}]',picture:""},input:{color:t.getThemeValues().getProperty("input.color").inherit(),font:{size:new u.ThemePropertyValue(24),align:t.getThemeValues().getProperty("input.font.align").inherit()}}})},e.prototype.getFieldsLayout=function(){return[{domNode:this.embed,row:0,span:r.InputSpan.FULL}]},e.prototype.getTypeId=function(){return a.NodeTypes.SOCIAL_MEDIA},e.prototype.hasLabel=function(){return!1},e.prototype.hasValue=function(){return!1},e.prototype.getNodeName=function(){return"Social Media"},e.prototype.getValue=function(){return null},e.prototype.setValue=function(t){return this},e.prototype.initializeViewFormEvents=function(){var t=this;this.document.isEditMode()||function(e){n(t.embed).on("click",".social-network[data-network-id]",(function(){var t=~~this.getAttribute("data-network-id"),n=e.collection.getNetworkByTypeId(t);n&&n.share()}))}(this)},e.prototype.onSocialMediaNetworksChanged=function(){for(this.collection.loadFrom(this.getProperty("socialMedia.networks"));this.embed.firstChild;)this.embed.removeChild(this.embed.firstChild);for(var t=this.collection.getNetworks(),e=0,n=t.length;e<n;e++)this.embed.appendChild(t[e].createDOMNode())},e.prototype.getRenderedCSS=function(){var t=u.cast(this.properties.input.color),e=u.cast(this.properties.input.font.size);return"\n            .embed {\n                color: "+t+";\n                text-align: "+u.cast(this.properties.input.font.align)+";\n                font-size: "+e+"px;\n            }\n            .social-network:hover {\n                color: "+this.document.getProperty("theme.selection.borderColor")+";\n            }\n        "},e.prototype.supportsLabelInsideRendering=function(){return!1},e}(r.Input);e.SocialMedia=l;var c=function(){function t(){this.networks=[]}return t.prototype.loadFrom=function(t){try{this.networks.splice(0,this.networks.length);var e=JSON.parse(t);if(!Array.isArray(e))throw new Error("Bad config");for(var n=0,r=e.length;n<r;n++)this.networks.push(p.createFromConfig(e[n],this))}catch(t){console.error("Failed to init social networks collection!"),console.error(t)}return this},t.prototype.save=function(){for(var t=[],e=0,n=this.networks.length;e<n;e++)t.push(this.networks[e].toObject());return JSON.stringify(t)},t.prototype.getNetworks=function(){return this.networks},t.prototype.getNetworkByTypeId=function(t){for(var e=0,n=this.networks.length;e<n;e++)if(this.networks[e].getTypeId()===t)return this.networks[e];return null},t.prototype.add=function(t){if(null!==this.getNetworkByTypeId(t.getTypeId()))throw new Error("Cannot add network "+t.getName()+": Already added");return this.networks.push(t),this},t}();e.SocialNetworksCollection=c;var p=function(){function t(t,e){this.config=t||this.getDefaultConfiguration(),this.collection=e}return t.prototype.getConfig=function(){return this.config||null},t.prototype.toObject=function(){var t={};if(t.typeId=this.getTypeId(),this.config)for(var e in this.config)this.config.hasOwnProperty(e)&&(t[e]=void 0===t[e]?this.config[e]:t[e]);return t},t.prototype.createDOMNode=function(){var t=document.createElement("div");t.className="social-network",t.setAttribute("data-network-id",String(this.getTypeId()));var e=document.createElement("span");return e.setAttribute("data-role","sm-icon"),e.className="vfb vfb-"+this.getIcon(),t.appendChild(e),t.title="Share on "+this.getName(),t},t.prototype.getProperty=function(t){if(this.config&&void 0!==this.config[t])return this.config[t];throw new Error('Property "'+t+'" does not exist in social media network '+this.getName())},t.prototype.setProperty=function(t,e){if(!this.config||void 0===this.config[t])throw new Error('Property "'+t+'" does not exist in social media network '+this.getName());if(void 0===e)throw new Error("Undefined values are illegal values in configuration of a social media network");return this.config[t]=e,this},t.prototype.getShareUrl=function(){var t=i.URLParser.parseURL(location.href);return t.search=t.search||{},t.search.click_from=this.getName().toLowerCase().replace(/[^a-z0-9]+/g,""),i.URLParser.createURL(t)},t.createFromConfig=function(e,n){if(!(e instanceof Object))throw new Error("Object expected!");if(void 0===e.typeId)throw new Error("Property 'typeId' is expected!");var r={},o=!1;for(var i in e)"typeId"!==i&&e.hasOwnProperty(i)&&(r[i]=e[i],o=!0);switch(o||(r=null),e.typeId){case t.SOCIAL_NETWORK_FACEBOOK:return new d(r,n);case t.SOCIAL_NETWORK_TWITTER:return new h(r,n);case t.SOCIAL_NETWORK_LINKEDIN:return new f(r,n);case t.SOCIAL_NETWORK_PINTEREST:return new g(r,n);case t.SOCIAL_NETWORK_EMAIL:return new m(r,n);default:throw new Error("Unknown social network plugin type "+JSON.stringify(e.typeId))}},t.enumerateAllNetworks=function(){return[t.SOCIAL_NETWORK_FACEBOOK,t.SOCIAL_NETWORK_TWITTER,t.SOCIAL_NETWORK_PINTEREST,t.SOCIAL_NETWORK_LINKEDIN,t.SOCIAL_NETWORK_EMAIL]},t.SOCIAL_NETWORK_FACEBOOK=1,t.SOCIAL_NETWORK_TWITTER=2,t.SOCIAL_NETWORK_LINKEDIN=3,t.SOCIAL_NETWORK_PINTEREST=4,t.SOCIAL_NETWORK_EMAIL=5,t}();e.SocialNetwork=p;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.getDefaultConfiguration=function(){return{postTitle:"",postDescription:"",customLink:""}},e.prototype.getTypeId=function(){return p.SOCIAL_NETWORK_FACEBOOK},e.prototype.getName=function(){return"Facebook"},e.prototype.getIcon=function(){return"sm-facebook"},e.prototype.share=function(){o.BrowserUtils.openTabOrPopup("https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(this.getShareUrl()),"_blank")},e}(p),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.getDefaultConfiguration=function(){return{tweetTitle:"",tweetDescription:"",tweetCard:"",tweetSite:"",tweetCreator:""}},e.prototype.getTypeId=function(){return p.SOCIAL_NETWORK_TWITTER},e.prototype.getName=function(){return"Twitter"},e.prototype.getIcon=function(){return"sm-twitter"},e.prototype.share=function(){o.BrowserUtils.openTabOrPopup("https://twitter.com/intent/tweet/?url="+encodeURIComponent(this.getShareUrl()),"_blank")},e}(p),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.getDefaultConfiguration=function(){return null},e.prototype.getTypeId=function(){return p.SOCIAL_NETWORK_LINKEDIN},e.prototype.getName=function(){return"LinkedIn"},e.prototype.getIcon=function(){return"sm-linkedin"},e.prototype.share=function(){o.BrowserUtils.openTabOrPopup("https://www.linkedin.com/shareArticle?url="+encodeURIComponent(this.getShareUrl()),"_blank")},e}(p),g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.getDefaultConfiguration=function(){return null},e.prototype.getTypeId=function(){return p.SOCIAL_NETWORK_PINTEREST},e.prototype.getName=function(){return"Pinterest"},e.prototype.getIcon=function(){return"sm-pinterest"},e.prototype.share=function(){o.BrowserUtils.openTabOrPopup("https://pinterest.com/pin/create/button/?url="+encodeURIComponent(this.getShareUrl()),"_blank")},e}(p),m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.getDefaultConfiguration=function(){return{emailTitle:"",emailText:"<LINK>"}},e.prototype.getIcon=function(){return"email"},e.prototype.getName=function(){return"Email"},e.prototype.getTypeId=function(){return p.SOCIAL_NETWORK_EMAIL},e.prototype.share=function(){var t=this.getProperty("emailTitle")||"Check this out!",e=this.getProperty("emailText")||this.getShareUrl();e=e.replace(/<link>/gi,this.getShareUrl());var n="mailto:?subject="+encodeURIComponent(t)+"&body="+encodeURIComponent(e);o.BrowserUtils.openTabOrPopup(n,"_self")},e}(p)}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(0),n(9),n(4),n(62),n(291),n(2),n(8),n(14),n(11),n(169),n(153),n(1),n(10),n(31),n(26)],void 0===(o=function(t,e,n,r,o,i,a,u,l,c,p,d,h,f,g,m,y){var v;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.PICTURE_LEFT_DESCRIPTION_RIGHT="pic-left-desc-right",t.PICTURE_TOP_DESCRIPTION_BOTTOM="pic-top-desc-bottom",t.PICTURE_RIGHT_DESCRIPTION_LEFT="pic-right-desc-left"}(v=e.ProductLayoutType||(e.ProductLayoutType={}));var b=function(){function t(){}return t.PRODUCT_DEFAULT_ADD_TO_CART_BUTTON_TEXT="Buy",t.PRODUCT_DEFAULT_NAME="Product",t}(),C=function(t){function e(n,r,o){var i=t.call(this,n,r||e.getDefaultProperties(n),o)||this;return i.choices=[],i.productValuesAddedInShoppingCart=[],i.root.tabIndex=0,i.addClass("product"),i.dragIndicator=y.DOM.document.createElement("div"),i.dragIndicator.className="drag-svg",i.embedDOMNode=document.createElement("div"),i.embedDOMNode.className="embed f",i.pictureDOMNode=document.createElement("img"),i.pictureDOMNode.className="picture",i.renderer=new d.RichTextComponent(i).setCloseToolbarOnBlur(!0),i.renderer.getRoot().classList.add("description"),i.priceAndAddToCartDOMNode=document.createElement("div"),i.priceAndAddToCartDOMNode.className="toolbar",i.productUnitDOMNodeWrapper=document.createElement("div"),i.productUnitDOMNodeWrapper.className="input label-editable",i.productPriceDOMNode=document.createElement("div"),i.productPriceDOMNode.className="price",i.productUnitDOMNode=document.createElement("label"),i.productUnitDOMNode.className="unit",i.productUnitDOMNodeWrapper.appendChild(document.createTextNode("/")),i.productUnitDOMNodeWrapper.appendChild(i.productUnitDOMNode),i.addToCartButton=document.createElement("button"),i.addToCartButton.setAttribute("type","button"),i.addToCartButton.className="add-to-cart input label-editable",i.addToCartButtonLabel=document.createElement("label"),i.addToCartButton.appendChild(i.addToCartButtonLabel),i.priceAndAddToCartDOMNode.appendChild(i.productPriceDOMNode),i.priceAndAddToCartDOMNode.appendChild(i.productUnitDOMNodeWrapper),i.priceAndAddToCartDOMNode.appendChild(i.addToCartButton),i.labelDOMNode=document.createElement("label"),i.labelDOMNode.className="title",n.isEditMode()&&(i.choicesDOMNodePlaceholder=document.createElement("div"),i.choicesDOMNodePlaceholder.className="choices"),i.wrapperForDescriptionAndTitle=document.createElement("div"),i.wrapperForDescriptionAndTitle.className="wrapper",i.wrapperForDescriptionAndTitle.appendChild(i.labelDOMNode),i.wrapperForDescriptionAndTitle.appendChild(i.renderer.getRoot()),i.choicesDOMNodePlaceholder&&i.wrapperForDescriptionAndTitle.appendChild(i.choicesDOMNodePlaceholder),i.wrapperForDescriptionAndTitle.appendChild(i.priceAndAddToCartDOMNode),i.root.appendChild(i.dragIndicator),i.root.appendChild(i.embedDOMNode),i.onProductPictureChanged(),i.onLabelTextChanged(),i.onProductDescriptionChanged(),i.onProductUnitNameChanged(),i.onProductPriceChanged(),i.onAddToCartButtonTextChanged(),i.onChoicesChanged(),n.isEditMode()?i.initEditModeEvents():i.initViewFormEvents(),i}return s(e,t),e.prototype.onAddToCartButtonTextChanged=function(){this.addToCartButtonLabel.textContent=String(this.properties.product.addToCartButtonText||"Buy")},e.prototype.onProductDescriptionChanged=function(){this.renderer.setValue(this.properties.product.description)},e.prototype.onProductPriceChanged=function(){var t=this;setTimeout((function(){var e=i.NumberUtils.formatFloat(Number(t.getProperty("product.unitPrice")||0)||0,2),n=t.document.getInvoice().getCurrency();t.productPriceDOMNode.innerHTML=i.NumberUtils.priceToHTML(e+" "+n)}),0)},e.prototype.onProductUnitNameChanged=function(){this.productUnitDOMNode.textContent=String(this.properties.product.unitName||"piece")},e.prototype.onProductPictureChanged=function(){var t;(t=this.properties.product.picture)?this.pictureDOMNode.setAttribute("src",m.CDN.getCDNUrl(t)):this.pictureDOMNode.removeAttribute("src")},e.getDefaultProperties=function(e){var n=f.I18n.translateApplicationText("Product","control-defaults");return t.addSizeProperties.call(this,{name:"Q",visibility:"",label:{text:n,color:e.getThemeValues().getProperty("label.color").inherit(),font:{family:e.getThemeValues().getProperty("label.font.family").inherit(),size:e.getThemeValues().getProperty("label.font.size").inherit(),align:e.getThemeValues().getProperty("label.font.align").inherit(),bold:e.getThemeValues().getProperty("label.font.bold").inherit(),italic:e.getThemeValues().getProperty("label.font.italic").inherit(),underline:e.getThemeValues().getProperty("label.font.underline").inherit()}},input:{color:e.getThemeValues().getProperty("input.color").inherit(),backgroundColor:e.getThemeValues().getProperty("input.backgroundColor").inherit(),borderColor:e.getThemeValues().getProperty("input.borderColor").inherit(),borderRadius:e.getThemeValues().getProperty("input.borderRadius").inherit(),borderStyle:e.getThemeValues().getProperty("input.borderStyle").inherit(),borderWidth:e.getThemeValues().getProperty("input.borderWidth").inherit(),buttonColor:e.getThemeValues().getProperty("buttons.standard.color").inherit(),buttonBackgroundColor:e.getThemeValues().getProperty("buttons.standard.backgroundColor").inherit(),font:{family:e.getThemeValues().getProperty("input.font.family").inherit(),size:e.getThemeValues().getProperty("input.font.family").inherit(),bold:e.getThemeValues().getProperty("input.font.bold").inherit(),italic:e.getThemeValues().getProperty("input.font.italic").inherit(),underline:e.getThemeValues().getProperty("input.font.underline").inherit()}},product:{description:f.I18n.translateApplicationText("<p>Here goes the <strong>description</strong> of your product</p>","control-defaults.product"),choices:"",picture:"/img/sample-product-1.png",unitPrice:.99,unitName:f.I18n.translateApplicationText("piece","control-defaults.product"),layoutType:v.PICTURE_LEFT_DESCRIPTION_RIGHT,addToCartButtonText:f.I18n.translateApplicationText("Buy","control-defaults.product")},validation:{required:!1,minValue:"",maxValue:"",customErrorMessage:""}})},e.prototype.getTranslations=function(){var t=[],e=this.getProperty("label.text")||b.PRODUCT_DEFAULT_NAME,n=this.getProperty("product.choices"),r=this.getProperty("product.description"),o=this.getProperty("product.unitName"),i=this.getProperty("product.addToCartButtonText")||b.PRODUCT_DEFAULT_ADD_TO_CART_BUTTON_TEXT;if(e&&t.push({original:e,context:"shop-product-title"}),n)for(var s=n.split(/[\r\n]+/),a=0,u=s.length;a<u;a++)s[a]&&t.push({original:s[a],context:"shop-product-choice"});if(r&&t.push({original:r,context:"html"}),o&&t.push({original:o,context:"shop-product-unit-name"}),i&&t.push({original:i,context:"shop-product-cart-button"}),this.hasProperty("validation.customErrorMessage")){var l=this.getProperty("validation.customErrorMessage");l&&t.push({original:l,context:"form-fields-errors"})}return t},e.prototype.getTextAssociatedWithLabel=function(t){switch(t){case this.labelDOMNode:return this.getProperty("label.text");case this.addToCartButtonLabel:return this.getProperty("product.addToCartButtonText");case this.productUnitDOMNode:return this.getProperty("product.unitName");default:for(var e=0,n=this.choices.length;e<n;e++)if(this.choices[e].getLabelDOMNode()===t)return this.choices[e].getText();return""}},e.prototype.setLabelTextWhichIsComingFromTheUser=function(t,e){var n=String(t||"").trim().replace(/[\r\n]+/g," ");switch(e){case this.labelDOMNode:this.setProperty("label.text",n,this);break;case this.addToCartButtonLabel:this.setProperty("product.addToCartButtonText",n,this);break;case this.productUnitDOMNode:this.setProperty("product.unitName",n,this);break;default:for(var r=0,o=this.choices.length;r<o;r++)if(this.choices[r].getLabelDOMNode()===e){var i=this.getTextChoices();return i[r]=n,this.choices[r].setText(n,!1),this.setProperty("product.choices",i.join("\n"),this),this}}return this},e.prototype.getFieldsLayout=function(){return[{domNode:this.embedDOMNode,span:r.InputSpan.FULL,row:0}]},e.prototype.getTypeId=function(){return o.NodeTypes.PRODUCT},e.prototype.hasLabel=function(){return!0},e.prototype.getNodeName=function(){return"Product"},e.prototype.hasValue=function(){return!0},e.prototype.render=function(){for(;this.embedDOMNode.firstChild;)this.embedDOMNode.removeChild(this.embedDOMNode.firstChild);var t=this.properties.product.layoutType;switch(this.root.setAttribute("data-layout",t),t){case v.PICTURE_RIGHT_DESCRIPTION_LEFT:this.embedDOMNode.appendChild(this.wrapperForDescriptionAndTitle),this.embedDOMNode.appendChild(this.pictureDOMNode);break;case v.PICTURE_TOP_DESCRIPTION_BOTTOM:this.embedDOMNode.appendChild(this.pictureDOMNode),this.embedDOMNode.appendChild(this.wrapperForDescriptionAndTitle);break;case v.PICTURE_LEFT_DESCRIPTION_RIGHT:default:this.embedDOMNode.appendChild(this.pictureDOMNode),this.embedDOMNode.appendChild(this.wrapperForDescriptionAndTitle)}if(this.resizers&&(this.resizers.north&&this.root.appendChild(this.resizers.north),this.resizers.south&&this.root.appendChild(this.resizers.south),this.resizers.east&&this.root.appendChild(this.resizers.east),this.resizers.west&&this.root.appendChild(this.resizers.west)),this.error){var e=document.createElement("div");e.textContent=f.I18n.translateViewFormText.apply(f.I18n,[this.error.message,"form-fields-errors",0].concat(this.error.args||[])),e.className="error",this.root.appendChild(e)}},e.prototype.getRenderedCSS=function(){var t=g.cast(this.properties.label.color),e=g.cast(this.properties.label.font.family),n=g.cast(this.properties.label.font.size),r=g.cast(this.properties.label.font.bold)?"bold":"normal",o=g.cast(this.properties.label.font.italic)?"italic":"normal",i=g.cast(this.properties.label.font.underline)?"underline":"none",s=g.cast(this.properties.input.color),a=g.cast(this.properties.input.backgroundColor),u=g.cast(this.properties.input.borderColor),l=g.cast(this.properties.input.borderWidth),c=g.cast(this.properties.input.borderRadius),p=g.cast(this.properties.input.borderStyle),d=g.cast(this.properties.input.font.family),h=g.cast(this.properties.input.font.size),f=g.cast(this.properties.input.font.bold)?"bold":"normal",m=g.cast(this.properties.input.font.italic)?"italic":"normal",y=g.cast(this.properties.input.font.underline)?"underline":"none",v=g.cast(this.properties.input.buttonColor),b=g.cast(this.properties.input.buttonBackgroundColor),C=this.document.getProperty("theme.buttons.standard.borderRadius"),E=this.document.getProperty("theme.selection.borderColor");this.document.getProperty("theme.selection.backgroundColor");return"\n            \n            .embed {\n                background-color: "+a+";\n                border: "+l+" "+p+" "+u+";\n                border-radius: "+c+";\n                \n                &:hover {\n                    border-color: "+E+";\n                    background-color: "+a+";\n                }\n            }\n            \n            label.title {\n                color: "+t+";\n                font-size: "+n+'px;\n                font-family: "'+e+'";\n                font-weight: '+r+";\n                font-style: "+o+";\n                text-decoration: "+i+";\n            }\n            \n            .description {\n                color: "+s+";\n                font-weight: "+f+";\n                font-style: "+m+";\n                text-decoration: "+y+";\n                font-size: "+h+'px;\n                font-family: "'+d+'";\n            }\n            \n            .toolbar {\n                color: '+s+";\n            }\n\n            .add-to-cart {\n                color: "+v+";\n                background-color: "+b+";\n                border-radius: "+C+";\n                font-size: "+h+'px;\n                font-family: "'+d+'";\n            }\n            \n            .add-to-cart:hover,\n            .add-to-cart:focus {\n                background-color: lighten('+b+", 10%);\n            }\n        "},e.prototype.getTextChoices=function(){return String(this.properties.product.choices||"").split(/(\r\n|\r|\n)/).map((function(t){return t.trim()})).filter((function(t){return""!==t}))},e.prototype.onChoicesChanged=function(){var t=this;if(this.document.isEditMode()){for(this.choices.splice(0,this.choices.length);this.choicesDOMNodePlaceholder.firstChild;)this.choicesDOMNodePlaceholder.removeChild(this.choicesDOMNodePlaceholder.firstChild);for(var e=this.getTextChoices(),n=0,r=e.length;n<r;n++){var o=new a.ProductChoice(this).setText(e[n]).setIndex(n);this.choicesDOMNodePlaceholder.appendChild(o.getRoot()),this.choices.push(o)}var i=document.createElement("div");i.className="input choice";var s=document.createElement("a");s.href="javascript:",s.textContent=f.I18n.translateApplicationText("Add option","control-defaults.product"),i.appendChild(s),s.onclick=function(){t.addNewChoice()},this.choicesDOMNodePlaceholder.appendChild(i)}},e.prototype.addNewChoice=function(){var t=this.getTextChoices();t.push(f.I18n.translateApplicationText("Option %1","control-defaults.product",0,[t.length+1])),this.setProperty("product.choices",t.join("\n")),this.onChoicesChanged()},e.prototype.removeChoice=function(t){var e=this.getTextChoices(),n=t.getIndex();void 0!==e[n]&&(e.splice(n,1),this.setProperty("product.choices",e.join("\n")),this.onChoicesChanged())},e.prototype.getFieldContexts=function(){for(var t=[{node:this.addToCartButton,context:r.SelectionInputContext.INPUT},{node:this.productUnitDOMNodeWrapper,context:r.SelectionInputContext.INPUT}],e=0,n=this.choices.length;e<n;e++)t.push({node:this.choices[e].getRoot(),context:r.SelectionInputContext.INPUT});return t},e.prototype.initViewFormEvents=function(){var t=this;this.document.isEditMode()||(this.addToCartButton.onclick=function(){t.openViewProductDialog()})},e.prototype.openViewProductDialog=function(){var t=this,r=new u.Dialog({title:"",width:"400px",movable:!0,style:u.DialogStyle.FLAT_COLOR,closable:!0}).center(),o=new p.Loader(r.getBody()).addLoadRequest();r.getRoot().setAttribute("id","product-dialog"),l.NetworkCache.get("/static/templates/ui-v2/ui-controls/product-add-to-cart-dialog.html").then((function(s){o.removeLoadRequest();var a=i.NumberUtils.formatFloat(Number(t.getProperty("product.unitPrice")||0)||0,2),u=t.document.getInvoice().getCurrency();r.getBody().innerHTML=c.Handlebars.to_html(s,{name:f.I18n.translateViewFormText(t.getProperty("label.text"),"shop-product-title"),description:f.I18n.translateViewFormText(t.getProperty("product.description"),"html"),picture:t.getProperty("product.picture"),choices:t.getTextChoices().map((function(t){return{value:t,label:f.I18n.translateViewFormText(t,"shop-product-choice")}})),priceAsHTML:i.NumberUtils.priceToHTML(a+" "+u),buttonLabel:f.I18n.translateViewFormText(t.getProperty("product.addToCartButtonText"),"shop-product-cart-button"),buttonBackgroundColor:t.getProperty("input.buttonBackgroundColor"),buttonTextColor:t.getProperty("input.buttonColor")}),n(r.getBody()).find(".choice").first().each((function(){n(this).find("input").get(0).checked=!0}));var l=r.getBody().querySelector(".quantity input[type=text]"),p=r.getBody().querySelector(".quantity .button.decrement"),d=r.getBody().querySelector(".quantity .button.increment"),h=r.getBody().querySelector("button.add-to-cart-button"),g=function(){var n=function(){for(var t=null,e=0,n=r.getBody().querySelectorAll("input[type=radio][name=product-choice]"),o=n.length;e<o;e++)if(n[e].checked){t=n[e].value;break}return t}();t.incrementProductQuantity(e.parseProductQuantityValue(l.value),n),l.value="",t.updateCart(),r.close()},m=function(t){var e=parseFloat(l.value);!isNaN(e)&&isFinite(e)||(e=0),(e+=t)<1&&(e=1),l.value=String(e)};p.onclick=function(){m(-1)},d.onclick=function(){m(1)},l.onblur=function(){m(0)},h.onclick=function(){g()}})).fail((function(t){o.removeLoadRequest(),r.close()}))},e.prototype.hasProperty=function(e){switch(e){case"input.font.bold":case"input.font.italic":case"input.font.underline":case"input.font.align":case"input.font.size":case"input.font.family":case"input.color":case"input.blockType":return!0;default:return t.prototype.hasProperty.call(this,e)}},e.prototype.setProperty=function(e,n,r){switch(e){case"input.font.bold":case"input.font.italic":case"input.font.underline":case"input.font.align":case"input.color":case"input.font.size":case"input.blockType":case"input.font.family":this.renderer.setProperty(e,n);break;default:t.prototype.setProperty.call(this,e,n,r)}return this},e.prototype.getProperty=function(e){switch(e){case"input.font.bold":case"input.font.italic":case"input.font.underline":case"input.font.align":case"input.color":case"input.font.size":case"input.font.family":case"input.blockType":return this.renderer.getProperty(e);default:return t.prototype.getProperty.call(this,e)}},e.prototype.initEditModeEvents=function(){var t=this;this.renderer.on("change",(function(){t.setProperty("product.description",t.renderer.getValue(),t),t.document.getTheme().markAsModified()}))},e.prototype.onSelect=function(){t.prototype.onSelect.call(this),this.renderer.setEditMode(!0)},e.prototype.onDeselect=function(){t.prototype.onDeselect.call(this),this.renderer.setEditMode(!1)},e.prototype.listenToUserInput=function(t){var e=this;this.submissionModelReferenceSetByListenToUserInput=t,this.on("addtocart",(function(){t.updateValue(e)}))},e.prototype.getValue=function(t){if(void 0!==t)for(var n=0,r=this.productValuesAddedInShoppingCart.length;n<r;n++)if(this.productValuesAddedInShoppingCart[n].choice===t)return this.productValuesAddedInShoppingCart[n].value;var o=[];for(n=0,r=this.productValuesAddedInShoppingCart.length;n<r;n++){var i=e.parseProductQuantityValue(this.productValuesAddedInShoppingCart[n].value);i>0&&o.push(String(i)+(this.productValuesAddedInShoppingCart[n].choice?" x "+this.productValuesAddedInShoppingCart[n].choice:""))}var s=o.join("; ");return isNaN(s)?s:Number(s)},e.prototype.setValue=function(t){if(this.clearCart(),null!==t&&t){if("number"==typeof t||"string"==typeof t&&!isNaN(t)){var n=e.parseProductQuantityValue(t);n>0&&this.productValuesAddedInShoppingCart.push({choice:null,value:n,productRow:null})}else{if("string"!=typeof t)throw new Error("Invalid value!");for(var r=t.split(";"),o=0,i=r.length;o<i;o++)if(r[o]=r[o].replace(/(^[\s]+|[\s]+$)/g,""),r[o]){var s=/^([\d]+(\.[\d]+)?)( x ([\s\S]+))?$/.exec(r[o]);if(!s)throw new Error("Invalid product value: "+r[o]);var a=void 0,u=void 0;s[4]?(a=s[4],u=s[1]):(a=null,u=s[1]);var l=e.parseProductQuantityValue(u);l>0&&this.productValuesAddedInShoppingCart.push({value:l,choice:a,productRow:null})}}return this.updateCart(),this}this.updateCart()},e.parseProductQuantityValue=function(t){var e=isNaN(Number(t))?0:Number(t);return e<0&&(e=0),e},e.prototype.clearCart=function(){for(var t=0,e=this.productValuesAddedInShoppingCart.length;t<e;t++)this.productValuesAddedInShoppingCart[t].productRow&&this.document.getInvoice().removeRow(this.productValuesAddedInShoppingCart[t].productRow);this.productValuesAddedInShoppingCart.splice(0,this.productValuesAddedInShoppingCart.length)},e.prototype.updateCart=function(){for(var t=this.document.getInvoice(),e=0,n=this.productValuesAddedInShoppingCart.length;e<n;e++)null===this.productValuesAddedInShoppingCart[e].productRow&&(this.productValuesAddedInShoppingCart[e].productRow=new h.InvoiceRowDynamicProduct(t,this,this.productValuesAddedInShoppingCart[e].choice),t.addRow(this.productValuesAddedInShoppingCart[e].productRow));this.trigger("addtocart"),t.compute()},e.prototype.getProductName=function(){return this.properties.label.text},e.prototype.getUnitTypeValue=function(){return Math.max(0,Number(this.getProperty("product.unitPrice"))||0)},e.prototype.removeFromShoppingCart=function(t){this.document.getInvoice().removeProductRowByProductIdAndChoice(this.getId(),t);for(var e=0,n=this.productValuesAddedInShoppingCart.length;e<n;e++)if(this.productValuesAddedInShoppingCart[e].choice===t){this.productValuesAddedInShoppingCart.splice(e,1);break}this.submissionModelReferenceSetByListenToUserInput&&this.submissionModelReferenceSetByListenToUserInput.updateValue(this),this.document.getInvoice().compute(),this.trigger("removefromcart")},e.prototype.incrementProductQuantity=function(t,e){if(t){for(var n=0,r=this.productValuesAddedInShoppingCart.length;n<r;n++)if(this.productValuesAddedInShoppingCart[n].choice===e)return void(this.productValuesAddedInShoppingCart[n].value+=t);this.productValuesAddedInShoppingCart.push({value:t,choice:e,productRow:null})}},e.prototype.performTranslation=function(){this.labelDOMNode&&(this.labelDOMNode.textContent=f.I18n.translateViewFormText(this.getProperty("label.text"),this.getLabelI18nContext())),this.renderer.setValue(f.I18n.translateViewFormText(this.getProperty("product.description"),"html")),this.productUnitDOMNode.textContent=f.I18n.translateViewFormText(this.getProperty("product.unitName"),"shop-product-unit-name"),this.addToCartButtonLabel.textContent=f.I18n.translateViewFormText(this.getProperty("product.addToCartButtonText"),"shop-product-cart-button")},e.prototype.getLabelI18nContext=function(){return"shop-product-title"},e.prototype.supportsLabelInsideRendering=function(){return!1},e}(r.Input);e.Product=C}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(9),n(4),n(1),n(303),n(2),n(137),n(10)],void 0===(o=function(t,e,n,r,o,i,a,u,l){var c,p;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.ENVIRONMENT="environment",t.USER="user"}(c=e.ECameraFacingMode||(e.ECameraFacingMode={})),function(t){t.LOW="low",t.MEDIUM="medium",t.HIGH="high",t.HD="hd"}(p=e.ECameraResolution||(e.ECameraResolution={}));var d=function(t){function e(n,r,o){var i=t.call(this,n,r||e.getDefaultProperties(n),o)||this;return i.value="",i.addClass("camera"),i.cameraInputWrapperDOMNode=document.createElement("div"),i.cameraInputWrapperDOMNode.className="wrapper",i.inputForPlaceholderPurposesOnly=document.createElement("input"),i.inputForPlaceholderPurposesOnly.type="text",i.cameraInputWrapperDOMNode.appendChild(i.inputForPlaceholderPurposesOnly),i.clearDOMNode=document.createElement("div"),i.clearDOMNode.className="clear",i.clearDOMNode.innerHTML='<span class="vfb vfb-close"></span>',i.cameraInputWrapperDOMNode.appendChild(i.clearDOMNode),i.expanderDOMNode=document.createElement("div"),i.expanderDOMNode.className="expander",i.expanderDOMNode.innerHTML='<span class="vfb vfb-photo-camera"></span>',i.cameraInputWrapperDOMNode.appendChild(i.expanderDOMNode),i.photoValuePlaceholderDOMNode=document.createElement("a"),i.photoValuePlaceholderDOMNode.target="_blank",i.photoValuePlaceholderDOMNode.className="photo",i.onPlaceholderChanged(),n.isEditMode()?i.installEditModeEvents():(i.inputForPlaceholderPurposesOnly.readOnly=!0,i.expanderDOMNode.onclick=function(){i.takePhoto()},i.clearDOMNode.onclick=function(){i.value="",i.setDisplayValue(i.value),i.trigger(e.EVENT_USER_INPUT)}),i}return s(e,t),e.prototype.getFieldsLayout=function(){return[{domNode:this.cameraInputWrapperDOMNode,span:n.InputSpan.FULL,row:0}]},e.getDefaultProperties=function(e){var n=o.I18n.translateApplicationText("Camera","control-defaults");return t.addLabelProperties.call(this,t.addInputProperties.call(this,t.addSizeProperties.call(this,{name:"Q",visibility:"",placeholder:o.I18n.translateApplicationText("Take photo","control-defaults.camera"),cameraSettings:{facingMode:c.USER,resolution:p.MEDIUM},validation:{required:!1,customErrorMessage:""}}),e),n,e)},e.prototype.getTypeId=function(){return r.NodeTypes.CAMERA},e.prototype.hasLabel=function(){return!0},e.prototype.hasValue=function(){return!0},e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t){return this.value=String(t||""),this.setDisplayValue(this.value),this},e.prototype.getNodeName=function(){return"Camera"},e.prototype.installEditModeEvents=function(){var t=this;this.inputForPlaceholderPurposesOnly.value=this.getProperty("placeholder")||"",this.inputForPlaceholderPurposesOnly.oninput=function(){t.setProperty("placeholder",t.inputForPlaceholderPurposesOnly.value,t),t.inputForPlaceholderPurposesOnly.placeholder=t.inputForPlaceholderPurposesOnly.value},this.inputForPlaceholderPurposesOnly.onfocus=function(){setTimeout((function(){t.getDocument().getSelection().getItem()!==t&&t.getDocument().getSelection().set(t,n.SelectionInputContext.INPUT,t.inputForPlaceholderPurposesOnly)}),0)}},e.prototype.onPlaceholderChanged=function(){this.inputForPlaceholderPurposesOnly.placeholder=this.getProperty("placeholder")||"",this.getDocument().isEditMode()&&this.inputForPlaceholderPurposesOnly.placeholder!==this.inputForPlaceholderPurposesOnly.value&&(this.inputForPlaceholderPurposesOnly.value=this.inputForPlaceholderPurposesOnly.placeholder)},e.prototype.getRenderedCSS=function(){var t=l.cast(this.properties.label.color),e=l.cast(this.properties.label.font.family),n=l.cast(this.properties.label.font.size),r=l.cast(this.properties.label.font.bold)?"bold":"normal",o=l.cast(this.properties.label.font.italic)?"italic":"normal",i=l.cast(this.properties.label.font.underline)?"underline":"none",s=l.cast(this.properties.label.font.align),a=l.cast(this.properties.input.color),u=l.cast(this.properties.input.backgroundColor),c=l.cast(this.properties.input.borderColor),p=l.cast(this.properties.input.borderWidth),d=l.cast(this.properties.input.borderRadius),h=l.cast(this.properties.input.borderStyle),f=l.cast(this.properties.input.font.family),g=l.cast(this.properties.input.font.size);return"\n            > label {\n                color: "+t+";\n                font-size: "+n+'px;\n                font-family: "'+e+'";\n                font-weight: '+r+";\n                font-style: "+o+";\n                text-decoration: "+i+";\n                text-align: "+s+";\n            }\n\n            & {\n                color: "+a+";\n            }\n\n            input[type=text] {\n                background-color: "+u+";\n                border: "+p+" "+h+" "+c+";\n                border-radius: "+d+";\n                font-weight: "+(l.cast(this.properties.input.font.bold)?"bold":"normal")+";\n                font-style: "+(l.cast(this.properties.input.font.italic)?"italic":"normal")+";\n                text-decoration: "+(l.cast(this.properties.input.font.underline)?"underline":"none")+";\n                text-align: "+l.cast(this.properties.input.font.align)+";\n                font-size: "+g+'px;\n                font-family: "'+f+'";\n                &:hover,\n                &:focus {\n                    border-color: '+this.document.getProperty("theme.selection.borderColor")+";\n                }\n                &:focus {\n                    background-color: "+this.document.getProperty("theme.selection.backgroundColor")+";\n                }\n            }\n        "},e.prototype.getTranslations=function(){var t=[];if(this.properties.placeholder&&t.push({original:this.properties.placeholder}),this.properties.label.text&&t.push({original:this.properties.label.text}),this.hasProperty("validation.customErrorMessage")){var e=this.getProperty("validation.customErrorMessage");e&&t.push({original:e,context:"form-fields-errors"})}return t},e.prototype.performTranslation=function(){this.labelDOMNode&&(this.labelDOMNode.textContent=o.I18n.translateViewFormText(this.getProperty("label.text"),this.getLabelI18nContext())),this.inputForPlaceholderPurposesOnly&&(this.inputForPlaceholderPurposesOnly.placeholder=o.I18n.translateViewFormText(this.getProperty("placeholder")))},e.prototype.takePhoto=function(){var t=this;new i.CameraPhotoShooter(this.getMediaStreamConstraints(),this).getPhoto().then((function(n){null!==n&&(t.value=n,t.setDisplayValue(t.value),t.trigger(e.EVENT_USER_INPUT))})).fail((function(t){a.Dialog.alert("An error occurred while taking photo. Please retry. If the problem persists, contact support","Failed to take photo"),console.error(t)}))},e.prototype.getMediaStreamConstraints=function(){var t={audio:!1,video:!0};if(this.hasProperty("cameraSettings.resolution")){var e=this.convertCameraResolutionToPixels(this.getProperty("cameraSettings.resolution"));t.video={width:{ideal:e},height:{ideal:e}}}if(this.hasProperty("cameraSettings.facingMode")){var n=this.getProperty("cameraSettings.facingMode");!0===t.video?t.video={facingMode:n}:t.video&&(t.video.facingMode=n)}return t},e.prototype.convertCameraResolutionToPixels=function(t){switch(t){case p.LOW:return 640;case p.HIGH:return 1280;case p.HD:return 2048;case p.MEDIUM:default:return 1024}},e.prototype.isOfflineSubmissionFileURL=function(t){return/^https:\/\/offline\.abcsubmit\.com\/blob\/[a-z0-9_]+\//.test(t)},e.prototype.setDisplayValue=function(t){console.log("set display value: "+JSON.stringify(t)),t?(this.cameraInputWrapperDOMNode.classList.add("filled"),this.inputForPlaceholderPurposesOnly.value=" ",this.cameraInputWrapperDOMNode.appendChild(this.photoValuePlaceholderDOMNode),this.displayUploadedPhoto()):(this.cameraInputWrapperDOMNode.classList.remove("filled"),this.inputForPlaceholderPurposesOnly.value="",this.photoValuePlaceholderDOMNode.parentNode&&this.photoValuePlaceholderDOMNode.parentNode.removeChild(this.photoValuePlaceholderDOMNode))},e.prototype.listenToUserInput=function(t){var n=this;this.on(e.EVENT_USER_INPUT,(function(){t.updateValue(n)}))},e.prototype.displayUploadedPhoto=function(){var t=this,n=document.createElement("img");if(n.onload=function(){for(n.width<=n.height?(t.photoValuePlaceholderDOMNode.style.width="90px",t.photoValuePlaceholderDOMNode.style.height=""):(t.photoValuePlaceholderDOMNode.style.height="90px",t.photoValuePlaceholderDOMNode.style.width="");t.photoValuePlaceholderDOMNode.firstChild;)t.photoValuePlaceholderDOMNode.removeChild(t.photoValuePlaceholderDOMNode.firstChild);t.photoValuePlaceholderDOMNode.appendChild(n),t.photoValuePlaceholderDOMNode.href=n.src},this.isOfflineSubmissionFileURL(this.value)){var r=/^https:\/\/offline\.abcsubmit\.com\/blob\/([a-z0-9_]+)\//.exec(this.value)[1];u.OfflineSubmissionManager.getIndexedDBObjectStore().then((function(t){t.getBlob(r).then((function(t){n.src=t.createObjectURL(1e3)})).fail((function(t){n.src=e.CAMERA_ERROR_IMAGE}))})).fail((function(t){n.src=e.CAMERA_ERROR_IMAGE}))}else n.src=this.value},e.prototype.supportsLabelInsideRendering=function(){return!0},e.EVENT_USER_INPUT="input",e.CAMERA_ERROR_IMAGE="data:image/gif;base64,R0lGODlhqgCqAKUrABcXFyQkJO0NDe0ODuwPD+0PD+0QEO0REe0SEu0UFO0VFe0ZGe0aGu0cHO4cHOwdHewdHu4eHu4fH+4gIO4hIewiIu4jJO4kJO8oKOwuLuwuL+w5Oes/P+s/QOtOTutRUupiYupiY+tiZOpkZOl2dul5eep5euiMjeiOjumOkOajo////////////////////////////////////////////////////////////////////////////////////yH5BAEKAD8ALAAAAACqAKoAQAb+wJ9wSCwaj8ikcslsOp/QqFQoqFqvWMFpyu16v+AwNUsmi8/otBr6KLuvzbd8Tq/X1/ijfc/v+/9WeUiAhGaCeYWJgT+KjWWHeB6Od4xzeJOYWJBMdGNym0OEU1kDA5agnm+pbpCZi1x2raediKd6f1K0l7O2arpPgEtYpaZwu5+VyLXKXa7Gy6rJ0bKxYImgtL+oztwC0KzS4Khx3IPBX9m94+uj507p3fHy89fh9Pf4+Zrs/P3kfv4CCmy358DAgwg5VYHyKKHDh6IeShwYcaJFfu5W6Yt38Z+iEh1D8dm0kVlIIyW92TMkJqPISRbhTTuWssoABRQwTEBQ7Nn+OpniDsGEtQcbL5O+dLkEpi3pmwEaWTp9o4LJhorCrhDbtwZoQ5pBo2BdKTWNVyulCkAVSgkdJmrRmrIt6hYXXHBy2dXsY/bozJNzARJFlhcwqApLbxHey7hxIcOQ39mNTDnM48qYvSA1V+VD5s/W1IEerZgv6dNFQiRGTRqQCNawydLZwnTYgAK41TbqyaeAAQUMJlhowCBB5dWyHQuOrLw5V8jOo6uEnKEec9Ng92ZGXDNqYw+ZN3pv7hG7mhH3xvtsiYuew7NZBEkv+9Nv2G/Wi6hwM+DAAgcJFHDfXQ0VNhVyCtFFkn1fyfdWM9UEhpdofXFEkBwVSFgghWf+tPXScrVt1qEcaxlYl4gfmpeVVvSNuBiKocFYxFhHlDCMbwK+cuCGMmpmImcqpjggey/+VWGPSUjyB0jJXQEAfob8eKKRFz4IZXxNLkQglbk0smCRQ65hgoJTkqlhlBw62N50MzqjZlxpQoLCfGH6CGaDAqUnJB3cEQknknnSCGSQYjHYYmxdghjihIAiWt5Ikt15qKN2KoqSoXRm2l2WmnY6jxC8PUXMqGmV4umpkFIaEoKqGlYFd2a2ShkErMq6qoe2ggbCpOZokCulvP5K2RsQCAsarsYCRmiyEwnKrEO0/sHBs7daSi1Ek13bbK3a9gOIr91im+2KpAgQak3+tx2grgHFXGctEahKmVBi8cbaESAkqFdvnRLtq4+7/roHnZUXLRuTIgAju2NJmF3VmL74ZJYCYxD/i9mm0n3GMKcphZdPxZsWymUa++kpD3og8+pldm5yioaN2XbTL6bPuZgpQrSci2VXngYq6c48O4bAyFtiKW+Z+hSggAQXRDB0sCwbHeeR45KLFgIIsEt00H9uTXWqidp75T5Hx0hIhoMpHPU+Otc89ruLeu0no3Kb7UiljeLNY916Eyxy3mnTza/dgoPNUNlVklHi1EiXBQjaf/OdeBYFVPwmldy2yXjfw1i+ttvwVm314BD+DPrcZUCehLOl2RTq24sgfrj+HBs0gR63N+qm49doAj675BxDjQWOvMGupexxQ32p6ELcjpbyge9NOhcl+55yFigsb32kXU8/RQDI7xmhy8arFD73wGsPqdqo955+5N6vXs7l0pdbNNClD0W/+6QIeD/0o7vM/qS2PfgVMHT5KZ/n/keGERDOYLwj4Pvyx77fGU6B5NsG3ALYB/AMkGybSwOsUIXB8zVOU1wrHADLp5yFSTB+H8yYzVSIP4rIQ3MbTN4L8fSeuylBgNHjHw9D4rAy1I6CYkNf/VaYq8ypb4k1DFfwoshBEB5QVk4knwltxToc0vB0UkQgBD0XsL0U8WFTLKMa4bPGNq7PjXC0SxxM5/hGOtoRGbojEY5y4xsDGAA3d+xZGMfRxUHqhXmGxAgiE1kfP4CAkQLpACCmBcmA+GEABKikz+iwFk3a8IqedCGbQpmQ6qyHlJQJAgA7",e}(n.Input);e.Camera=d}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(9),n(15),n(4),n(140),n(6),n(3),n(18),n(30),n(7),n(10)],void 0===(o=function(t,e,n,r,o,i,u,l,c,p,d,h){var f;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.HOUR="h",t.MINUTE="m",t.SECOND="s"}(f=e.EQuizTimePart||(e.EQuizTimePart={}));var g=function(t){function e(n,r,o){var i=t.call(this,n,r||e.getDefaultProperties(n),o)||this;return i.quizValue={Passed:null,Score:null,MaxPoints:null,Duration:null},i.renderer=document.createElement("div"),i.renderer.className="input",i.renderer.tabIndex=0,i.root.appendChild(i.renderer),i.addClass("quiz"),i.updateTimer(),i}return a(e,t),e.prototype.getFieldsLayout=function(){return[{domNode:this.renderer,row:0,span:n.InputSpan.FULL}]},e.prototype.getTypeId=function(){return o.NodeTypes.QUIZ},e.prototype.hasLabel=function(){return!1},e.prototype.hasValue=function(){return!0},e.prototype.getValue=function(){return JSON.stringify(this.quizValue)},e.prototype.setValue=function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){return this.quizValue={Duration:null,MaxPoints:null,Score:null,Passed:null},this}return this.validateQuizValue(t)?(this.quizValue=t,null!==this.quizValue.Passed&&this.updateTimer(this.getQuizDurationInSeconds()-this.quizValue.Duration)):this.quizValue={Duration:null,MaxPoints:null,Score:null,Passed:null},this},e.prototype.getNodeName=function(){return"Quiz"},e.getDefaultProperties=function(t){return this.addInputProperties(this.addSizeProperties({name:"Q",visibility:"",quiz:{completionTimeValue:45,completionTimeUnit:f.MINUTE,validAnswers:"{}",submitOnTimeExpired:!0,randomizeQuestions:!0,allowPartialResults:!1,minimumPointsToPass:0}}),t)},e.prototype.getTranslations=function(){return[]},e.prototype.getRenderedCSS=function(){var t=h.cast(this.properties.input.color),e=h.cast(this.properties.input.backgroundColor),n=h.cast(this.properties.input.borderColor),r=h.cast(this.properties.input.borderWidth),o=h.cast(this.properties.input.borderRadius),i=h.cast(this.properties.input.borderStyle),s=h.cast(this.properties.input.font.family),a=h.cast(this.properties.input.font.size);return"\n            .input {\n                color: "+t+";\n                background-color: "+e+";\n                border: "+r+" "+i+" "+n+";\n                border-radius: "+o+";\n                font-weight: "+(h.cast(this.properties.input.font.bold)?"bold":"normal")+";\n                font-style: "+(h.cast(this.properties.input.font.italic)?"italic":"normal")+";\n                text-decoration: "+(h.cast(this.properties.input.font.underline)?"underline":"none")+";\n                text-align: "+h.cast(this.properties.input.font.align)+";\n                font-size: "+a+'px;\n                font-family: "'+s+'";\n                \n                &:hover,\n                &:focus {\n                    border-color: '+this.document.getProperty("theme.selection.borderColor")+";\n                }\n                &:focus {\n                    background-color: "+this.document.getProperty("theme.selection.backgroundColor")+";\n                }\n            }\n        "},e.prototype.listenToUserInput=function(t){var e=this;return this.on("change",(function(){t.updateValue(e)})),this.submissionModel=t,this.submissionModel.on(i.SubmissionModel.EVENT_CHANGE,(function(){e.score.compute(e.submissionModel.getFormData(),e.getProperty("quiz.allowPartialResults"))})),this},e.prototype.performTranslation=function(){},e.prototype.getQuizDurationInSeconds=function(){var t=this.getProperty("quiz.completionTimeValue"),e=0;switch(this.getProperty("quiz.completionTimeUnit")){case f.SECOND:e=t;break;case f.MINUTE:e=60*t;break;case f.HOUR:e=3600*t}return Math.max(~~e,0)},e.formatQuizRemainingTime=function(t){var e=~~(t/3600),n=~~((t-=3600*e)/60),r=t-60*n,o="";return e>0&&(o=o.concat(u.Strings.strPad(String(e),2,"0",u.EStringPadType.PAD_LEFT)+":")),o=(o=o.concat(u.Strings.strPad(String(n),2,"0",u.EStringPadType.PAD_LEFT)+":")).concat(u.Strings.strPad(String(r),2,"0",u.EStringPadType.PAD_LEFT))},e.prototype.updateTimer=function(t){var n;if(void 0===t&&(t=null),null===t){var r=this.getQuizDurationInSeconds();n=this.document.isEditMode()?r:this.timer?r-this.timer.getValue():r}else n=t;n<0&&(n=0),this.renderer.textContent=e.formatQuizRemainingTime(n)},e.prototype.initializeInViewFormMode=function(){var t=this;this.document.isEditMode()||(this.timer=new C(this,1e3*this.getQuizDurationInSeconds()),this.score=new m(this.document,JSON.parse(this.getProperty("quiz.validAnswers"))),this.timer.load(),this.timer.on("tick",(function(){t.updateTimer()})),this.timer.on("expired",(function(){t.onTimerExpired()})),this.score.on("compute",(function(){if(!t.timer.isExpired()){var e=d.Helpers.clone(t.quizValue);e.Score=t.score.getComputedResult();var n=~~(t.getProperty("quiz.minimumPointsToPass")||0);e.Passed=0===n||n<=t.quizValue.Score,e.MaxPoints=t.quizValue.MaxPoints||t.score.getComputedMaxScore(),e.Duration=t.timer.getValue(),d.Helpers.areTheSame(e,t.quizValue,["Duration"])||(t.setValue(e),t.trigger("change"))}})),this.timer.start(),!0===this.getProperty("quiz.randomizeQuestions")&&this.score.randomizeQuizQuestions())},e.prototype.onTimerExpired=function(){var t=this;this.timer.stop(),this.getProperty("quiz.submitOnTimeExpired")&&setTimeout((function(){t.document.trigger(r.Document.EVENT_SUBMIT)}),1e3)},e.prototype.validateQuizValue=function(t){return t&&"object"===(void 0===t?"undefined":s(t))&&void 0!==t.Passed&&void 0!==t.Score&&void 0!==t.Duration&&void 0!==t.MaxPoints&&(null===t.Passed&&null===t.Score&&null===t.Duration&&null===t.MaxPoints||null!==t.Passed&&null!==t.Score&&null!==t.Duration&&null!==t.MaxPoints)},e.prototype.enumerateSubFields=function(){return["Passed","Score","Duration","MaxPoints"]},e.prototype.getSubFieldValue=function(t){switch(t){case"Passed":case"Score":case"Duration":case"MaxPoints":return this.quizValue[t];default:return null}},e.prototype.forgetTimer=function(){this.timer&&this.timer.forget(),this.score&&this.score.off("compute")},e.prototype.supportsLabelInsideRendering=function(){return!1},e}(n.Input);e.Quiz=g;var m=function(t){function e(e,n){var r=t.call(this)||this;for(var i in r.answers=[],r.computedResult=0,n)if(n.hasOwnProperty(i)&&n.propertyIsEnumerable(i)){var s=e.getElementById(i);s&&(s.getTypeId()===o.NodeTypes.CHECKBOX?r.answers.push(new b(s,n[i])):r.answers.push(new v(s,n[i])))}return r}return a(e,t),e.prototype.getComputedScore=function(t,e){for(var n=0,r=0,o=this.answers.length;r<o;r++)n+=this.answers[r].getComputedScore(t,e);return n},e.prototype.getComputedMaxScore=function(){for(var t=0,e=0,n=this.answers.length;e<n;e++)t+=this.answers[e].getComputedMaxScore();return t},e.prototype.toObject=function(){for(var t=[],e=0,n=this.answers.length;e<n;e++)t.push(this.answers[e].toObject());return t},e.prototype.setQuizQuestionValuePoints=function(t,n,r){r=Math.max(r,0);for(var o=0,i=this.answers.length;o<i;o++)if(this.answers[o].getId()===t){this.answers[o].setChoiceValue(n,r);break}this.trigger(e.EVENT_MAX_SCORE_UPDATED)},e.prototype.toQuizValidAnswers=function(){for(var t={},e=0,n=this.answers.length;e<n;e++)t[this.answers[e].getId()]=this.answers[e].getChoices();return t},e.prototype.compute=function(t,e){this.computedResult=this.getComputedScore(t,e),this.trigger("compute")},e.prototype.getComputedResult=function(){return Math.max(this.computedResult||0,0)},e.prototype.randomizeQuizQuestions=function(){for(var t=0,e=this.answers.length;t<e;t++)this.answers[t].getComputedMaxScore()>0&&this.answers[t].getInput().randomizeChoices()},e.EVENT_MAX_SCORE_UPDATED="updated-max-score",e}(l.EventEmitter);e.QuizScoreCollection=m;var y=function(){function t(t,e){this.input=t,this.choices=e}return t.prototype.getChoices=function(){return this.choices},t.prototype.toObject=function(){var t={label:this.input.getProperty("label.text"),id:this.input.getId(),choices:[]};for(var e in this.choices)this.choices.hasOwnProperty(e)&&t.choices.push({name:e,points:this.choices[e]});return t},t.prototype.getId=function(){return this.input.getId()},t.prototype.setChoiceValue=function(t,e){return void 0!==this.choices[t]&&(this.choices[t]=e),this},t.prototype.getInput=function(){return this.input},t}(),v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.getComputedScore=function(t,e){var n=this.input.getProperty("name");if(n&&void 0!==t[n])for(var r in this.choices)if(r===t[n])return this.choices[r];return 0},e.prototype.isMultiple=function(){return!1},e.prototype.toObject=function(){var e=t.prototype.toObject.call(this);return e.type="single",e},e.prototype.getComputedMaxScore=function(){var t=0;for(var e in this.choices)this.choices[e]>0&&(t=Math.max(this.choices[e],t));return t},e}(y),b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cachedNumberOfNonZeroResults=null,e}return a(e,t),e.prototype.getNumberOfNonZeroResults=function(){if(null!==this.cachedNumberOfNonZeroResults)return this.cachedNumberOfNonZeroResults;var t=0;for(var e in this.choices)this.choices[e]>0&&t++;return this.cachedNumberOfNonZeroResults=t},e.prototype.getComputedScore=function(t,e){var n=this.input.getProperty("name");if(n&&t[n]&&Array.isArray(t[n])){for(var r=t[n],o=0,i=0,s=r.length;i<s;i++){var a=r[i];if(!(void 0!==this.choices[a]&&this.choices[a]>0))return 0;o+=this.choices[a]}return e||this.getNumberOfNonZeroResults()===t[n].length?o:0}return 0},e.prototype.isMultiple=function(){return!0},e.prototype.toObject=function(){var e=t.prototype.toObject.call(this);return e.type="multiple",e},e.prototype.getComputedMaxScore=function(){var t=0;for(var e in this.choices)this.choices[e]>0&&(t+=this.choices[e]);return t},e}(y),C=function(t){function e(e,n){var r=t.call(this)||this;return r.quizKey=e.getId()+"__"+e.getDocument().getId(),r.maxTimeInMilliseconds=n,r.startedAt=+new Date,r.wasExpired=!1,r.thread=new p.Thread((function(){r.tick()}),1e3),r.thread.stop(),r}return a(e,t),e.prototype.load=function(){try{var t=JSON.parse(c.PersistentStorage.getItem("quizes"))||{};if(t[this.quizKey]){var e=t[this.quizKey];if("number"!=typeof e.startedAt)throw new Error("invalid quiz timer data");this.startedAt=e.startedAt}}catch(t){this.startedAt=+new Date}this.wasExpired=!1},e.prototype.save=function(){var t;try{t=JSON.parse(c.PersistentStorage.getItem("quizes"))||{}}catch(e){t={}}t[this.quizKey]={startedAt:this.startedAt},c.PersistentStorage.setItem("quizes",JSON.stringify(t),c.DataPersistenceType.CRITICAL)},e.prototype.isExpired=function(){return+new Date-this.startedAt>=this.maxTimeInMilliseconds},e.prototype.tick=function(){this.save(),this.trigger("tick"),!this.wasExpired&&this.isExpired()&&(this.wasExpired=!0,this.trigger("expired"))},e.prototype.getValue=function(){var t=+new Date-this.startedAt;return Math.max(0,Math.round(t/1e3))},e.prototype.start=function(){this.thread.start()},e.prototype.stop=function(){this.thread.stop()},e.prototype.forget=function(){var t;try{delete(t=JSON.parse(c.PersistentStorage.getItem("quizes"))||{})[this.quizKey],c.PersistentStorage.setItem("quizes",JSON.stringify(t),c.DataPersistenceType.CRITICAL)}catch(t){}this.stop()},e}(l.EventEmitter);e.QuizTimer=C}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(56),n(4),n(13)],void 0===(o=function(t,e,n,r,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(n,r,o){var i=t.call(this,n,r||e.getDefaultProperties(n),o)||this;return i.addClass("repeatable-container"),i.removeGroupButton=document.createElement("button"),i.removeGroupButton.innerHTML='<span class="vfb vfb-close"></span>',i.removeGroupButton.type="button",i.removeGroupButton.setAttribute("data-w","1"),i.root.appendChild(i.removeGroupButton),i.removeGroupButton.onclick=function(){i.requestDeleteFromParent()},i}return s(e,t),e.prototype.getTypeId=function(){return r.NodeTypes.REPEATABLE_CONTAINER},e.prototype.getNodeName=function(){return"Repeatable Container"},e.getDefaultProperties=function(e){return t.addSizeProperties.call(this,{})},e.isFieldCompatibleWithRepeatableContainer=function(t){return[r.NodeTypes.TEXT_BOX,r.NodeTypes.TEXT_AREA,r.NodeTypes.RADIO,r.NodeTypes.CHECKBOX,r.NodeTypes.DROP_DOWN,r.NodeTypes.DATE,r.NodeTypes.TIME,r.NodeTypes.RICH_TEXT,r.NodeTypes.NAME,r.NodeTypes.SIGNATURE,r.NodeTypes.ADDRESS,r.NodeTypes.EMAIL,r.NodeTypes.PHONE,r.NodeTypes.LINK,r.NodeTypes.FILE,r.NodeTypes.PICTURE,r.NodeTypes.CAMERA,r.NodeTypes.SURVEY,r.NodeTypes.NET_PROMOTER_SCORE,r.NodeTypes.RATING,r.NodeTypes.TERMS_OF_SERVICE,r.NodeTypes.BIG_DATA_DROPDOWN].indexOf(t)>-1},e.prototype.makeChildrenFitContent=function(t){for(var e=this.getChildren(),n=0,o=e.length;n<o;n++)e[n].getTypeId()===r.NodeTypes.ROW&&e[n].makeChildrenFitContent(t-1)},e.prototype.requestDeleteFromParent=function(){this.getParent().removeGroup(this)},e.prototype.getWidthForChild=function(){return this.getProperty("size.width")-1},e.prototype.onSizeChanged=function(){var e=this;t.prototype.onSizeChanged.call(this);var n=this.getProperty("size.width");setTimeout((function(){for(var t=0,o=e.getChildren(),i=o.length;t<i;t++)o[t].getTypeId()===r.NodeTypes.REPEATABLE_CONTAINER&&(o[t].setProperty("size.width",n-1),o[t].onSizeChanged(),o[t].makeChildrenFitContent(n-1))}),0)},e.prototype.supportsLabelInsideRendering=function(){return!1},e.prototype.embedInPDFPage=function(t){var e=t.getDocument().create(o.PDFNodeEntityType.RECTANGLE);t.initializeFieldDimensions(this.root,e);var n=this.getParent().getProperty("input.borderColor"),r=parseInt(this.getParent().getProperty("input.borderWidth"))||1;e.setBorderColor(n).setBorderWidth(r),t.appendChild(e)},e}(n.Container);e.RepeatableContainer=i}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(10),n(9),n(3),n(12),n(15),n(7),n(2),n(1),n(122),n(188)],void 0===(o=function(t,e,n,r,o,i,u,l,c,p,d,h){Object.defineProperty(e,"__esModule",{value:!0});var f=function(t){function e(o){var s=t.call(this)||this;return s.document=o,s.propertyCache={},s.onChange=i.Debouncer.create((function(){s.trigger(e.EVENT_CHANGE)}),1),s.onThemeApplied=i.Debouncer.create((function(){s.onThemeAppliedSync()}),10),s.properties={input:{backgroundColor:new n.ThemePropertyValue("#ffffff",null,s),borderColor:new n.ThemePropertyValue("#afafaf",null,s),borderRadius:new n.ThemePropertyValue("3px",null,s),borderStyle:new n.ThemePropertyValue("solid",null,s),borderWidth:new n.ThemePropertyValue("1px",null,s),color:new n.ThemePropertyValue("#4c4c4c",null,s),font:{align:new n.ThemePropertyValue(r.TextAlign.LEFT,null,s),bold:new n.ThemePropertyValue(!1,null,s),family:new n.ThemePropertyValue("Roboto",null,s),italic:new n.ThemePropertyValue(!1,null,s),size:new n.ThemePropertyValue(16,null,s),underline:new n.ThemePropertyValue(!1,null,s)}},label:{color:new n.ThemePropertyValue("#4c4c4c",null,s),align:new n.ThemePropertyValue(r.LabelAlignment.TOP,null,s),width:new n.ThemePropertyValue(3,null,s),font:{align:new n.ThemePropertyValue(r.TextAlign.LEFT,null,s),bold:new n.ThemePropertyValue(!1,null,s),family:new n.ThemePropertyValue("Roboto",null,s),italic:new n.ThemePropertyValue(!1,null,s),size:new n.ThemePropertyValue(16,null,s),underline:new n.ThemePropertyValue(!1,null,s)}},form:{backgroundImage:new n.ThemePropertyValue("",null,s),backgroundSize:new n.ThemePropertyValue("",null,s),backgroundPosition:new n.ThemePropertyValue("center top",null,s),backgroundRepeat:new n.ThemePropertyValue("no-repeat",null,s),backgroundColor:new n.ThemePropertyValue("",null,s),backgroundScroll:new n.ThemePropertyValue("scroll",null,s)},page:{spaceBefore:new n.ThemePropertyValue(20),borderWidth:new n.ThemePropertyValue(1),paddingLeft:new n.ThemePropertyValue(40),paddingTop:new n.ThemePropertyValue(40),paddingRight:new n.ThemePropertyValue(40),paddingBottom:new n.ThemePropertyValue(40),backgroundColor:new n.ThemePropertyValue("#ffffff",null,s),borderColor:new n.ThemePropertyValue("#c6c6c6",null,s),borderRadius:new n.ThemePropertyValue("0px",null,s)},buttons:{standard:{color:new n.ThemePropertyValue("#ffffff",null,s),backgroundColor:new n.ThemePropertyValue("#3a3a3a",null,s),borderColor:new n.ThemePropertyValue("#3a3a3a",null,s),borderRadius:new n.ThemePropertyValue("3px",null,s),borderStyle:new n.ThemePropertyValue("solid",null,s),borderWidth:new n.ThemePropertyValue("1px",null,s),font:{align:new n.ThemePropertyValue(r.TextAlign.CENTER,null,s),bold:new n.ThemePropertyValue(!1,null,s),italic:new n.ThemePropertyValue(!1,null,s),underline:new n.ThemePropertyValue(!1,null,s),size:new n.ThemePropertyValue(16,null,s),family:new n.ThemePropertyValue("Roboto",null,s)}},previous:{backgroundColor:new n.ThemePropertyValue("#ffffff",null,s),borderColor:new n.ThemePropertyValue("#000000",null,s),borderRadius:new n.ThemePropertyValue("3px",null,s),borderStyle:new n.ThemePropertyValue("solid",null,s),borderWidth:new n.ThemePropertyValue("1px",null,s),color:new n.ThemePropertyValue("#3a3a3a",null,s),font:{bold:new n.ThemePropertyValue(!1,null,s),italic:new n.ThemePropertyValue(!1,null,s),underline:new n.ThemePropertyValue(!1,null,s),size:new n.ThemePropertyValue(16,null,s),family:new n.ThemePropertyValue("Roboto",null,s)}},next:{backgroundColor:new n.ThemePropertyValue("#ffffff",null,s),borderColor:new n.ThemePropertyValue("#000000",null,s),borderRadius:new n.ThemePropertyValue("3px",null,s),borderStyle:new n.ThemePropertyValue("solid",null,s),borderWidth:new n.ThemePropertyValue("1px",null,s),color:new n.ThemePropertyValue("#3a3a3a",null,s),font:{bold:new n.ThemePropertyValue(!1,null,s),italic:new n.ThemePropertyValue(!1,null,s),underline:new n.ThemePropertyValue(!1,null,s),size:new n.ThemePropertyValue(16,null,s),family:new n.ThemePropertyValue("Roboto",null,s)}},reset:{backgroundColor:new n.ThemePropertyValue("#ffffff",null,s),borderColor:new n.ThemePropertyValue("#000000",null,s),borderRadius:new n.ThemePropertyValue("3px",null,s),borderStyle:new n.ThemePropertyValue("solid",null,s),borderWidth:new n.ThemePropertyValue("1px",null,s),color:new n.ThemePropertyValue("#3a3a3a",null,s),font:{bold:new n.ThemePropertyValue(!1,null,s),italic:new n.ThemePropertyValue(!1,null,s),underline:new n.ThemePropertyValue(!1,null,s),size:new n.ThemePropertyValue(16,null,s),family:new n.ThemePropertyValue("Roboto",null,s)}},save:{backgroundColor:new n.ThemePropertyValue("#ffffff",null,s),borderColor:new n.ThemePropertyValue("#000000",null,s),borderRadius:new n.ThemePropertyValue("3px",null,s),borderStyle:new n.ThemePropertyValue("solid",null,s),borderWidth:new n.ThemePropertyValue("1px",null,s),color:new n.ThemePropertyValue("#3a3a3a",null,s),font:{bold:new n.ThemePropertyValue(!1,null,s),italic:new n.ThemePropertyValue(!1,null,s),underline:new n.ThemePropertyValue(!1,null,s),size:new n.ThemePropertyValue(16,null,s),family:new n.ThemePropertyValue("Roboto",null,s)}},submit:{backgroundColor:new n.ThemePropertyValue("#3a3a3a",null,s),borderColor:new n.ThemePropertyValue("#000000",null,s),borderRadius:new n.ThemePropertyValue("3px",null,s),borderStyle:new n.ThemePropertyValue("solid",null,s),borderWidth:new n.ThemePropertyValue("1px",null,s),color:new n.ThemePropertyValue("#ffffff",null,s),font:{bold:new n.ThemePropertyValue(!1,null,s),italic:new n.ThemePropertyValue(!1,null,s),underline:new n.ThemePropertyValue(!1,null,s),size:new n.ThemePropertyValue(16,null,s),family:new n.ThemePropertyValue("Roboto",null,s)}},print:{backgroundColor:new n.ThemePropertyValue("#ffffff",null,s),borderColor:new n.ThemePropertyValue("#000000",null,s),borderRadius:new n.ThemePropertyValue("3px",null,s),borderStyle:new n.ThemePropertyValue("solid",null,s),borderWidth:new n.ThemePropertyValue("1px",null,s),color:new n.ThemePropertyValue("#3a3a3a",null,s),font:{bold:new n.ThemePropertyValue(!1,null,s),italic:new n.ThemePropertyValue(!1,null,s),underline:new n.ThemePropertyValue(!1,null,s),size:new n.ThemePropertyValue(16,null,s),family:new n.ThemePropertyValue("Roboto",null,s)}}},error:{color:new n.ThemePropertyValue("#e00000",null,s),backgroundColor:new n.ThemePropertyValue("#ff000000",null,s)},selection:{backgroundColor:new n.ThemePropertyValue("rgba(0,153,204,0.1)",null,s),borderColor:new n.ThemePropertyValue("#0099cc",null,s)},customCSS:new n.ThemePropertyValue("",null,s)},s}return a(e,t),e.prototype.load=function(t){!function t(e,r){if("object"===(void 0===e?"undefined":s(e))&&"object"===(void 0===r?"undefined":s(r)))for(var o in e)if(r.hasOwnProperty(o)&&e.hasOwnProperty(o))switch(!0){case r[o]instanceof n.ThemePropertyValue:r[o].setValue(e[o]instanceof n.ThemePropertyValue?e[o].getValue():e[o]);break;case"object"===s(e[o])&&"object"===s(r[o]):t(e[o],r[o])}}(t,this.properties)},e.prototype.getAllProperties=function(){return this.properties},e.prototype.getProperty=function(t){if(void 0!==this.propertyCache[t])return this.propertyCache[t];for(var e=t.split("."),r=this.properties,o=e.length;o>0;)r=r[e.shift()],o--;return void 0!==r?(r instanceof n.ThemePropertyValue&&(this.propertyCache[t]=r),r):null},e.prototype.setProperty=function(t,e){var n=this.getProperty(t);return null!==n&&n.setValue(e),this},e.prototype.serialize=function(){var t={};return function t(e,r){for(var o in e)if(e.hasOwnProperty(o))switch(!0){case e[o]instanceof n.ThemePropertyValue:r[o]=e[o].getValue();break;case"object"===s(e[o]):r[o]={},t(e[o],r[o]);break;default:r[o]=e[o]}}(this.properties,t),t},e.prototype.onThemeAppliedSync=function(){console.time("theme_applied");var t=this.document.getRoot().offsetWidth;this.document.getGrid().render(t),this.document.flatten().forEach((function(t){t.hasProperty("label.align")&&t.render()})),this.document.trigger(u.Document.EVENT_THEME_APPLIED),this.document.getTheme().markAsModified(),console.timeEnd("theme_applied")},e.prototype.previewThemeStart=function(t){void 0===this.themeBackup&&(this.themeBackup=l.Helpers.clone(this.serialize())),this.load(t.getData()),this.onThemeApplied()},e.prototype.previewThemeEnd=function(t){void 0!==this.themeBackup&&(this.load(this.themeBackup),this.themeBackup=void 0,this.onThemeApplied())},e.prototype.applyTheme=function(t){var e=this;setTimeout((function(){e.previewThemeStart(t)}),1),h.PlatformTracker.trackEvent("editor_event",{event_type:"apply_theme",theme_id:String(t.getId())}),c.Dialog.confirm(p.I18n.translateApplicationText("Confirm theme apply","editor"),p.I18n.translateApplicationText('Do you wish to apply the latest version of theme "%1" on current form?',"editor",0,t.getName())).then((function(){e.load(t.getData()),void 0!==e.themeBackup&&(e.themeBackup=void 0),e.onThemeApplied();var n=0;e.document.flatten().forEach((function(t){t.hasOwnThemeProperties()&&(n++,console.log(t))})),n>0?c.Dialog.confirm(p.I18n.translateApplicationText("Reset settings for all fields?","editor"),p.I18n.translateApplicationText("There are %1 form fields with customized visual settings which are overriding current applied theme visual settings.\n\nDo you wish to also reset to current theme settings those %1 form fields?","editor",0,n)).then((function(){e.document.clearFormatting(!0)})).always((function(){e.document.trigger(u.Document.EVENT_REQUEST_SAVE)})):(e.document.trigger(u.Document.EVENT_REQUEST_SAVE),d.NotificationsManager.createNotification(d.NotificationType.INFO).setTitle(p.I18n.translateApplicationText("Theme applied","editor")).setText(p.I18n.translateApplicationText('Theme "%1" applied successfully',"editor",0,t.getName())).setAutoCloseTimeoutInSeconds(5).show())})).fail((function(){e.previewThemeEnd(t)}))},e.EVENT_CHANGE="change",e}(o.EventEmitter);e.DefaultTheme=f}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(0),n(34),n(13),n(320),n(321),n(322),n(194),n(323),n(324),n(35),n(325),n(326),n(327),n(328),n(329),n(16),n(330),n(5),n(331),n(332)],void 0===(o=function(t,e,n,r,o,i,a,u,l,c,p,d,h,f,g,m,y,v,b,C,E,A){Object.defineProperty(e,"__esModule",{value:!0});var I=function(t){function e(){var e=t.call(this,null)||this;return e.fonts={},e.resources={},e.buttons=[],e.document=e,e}return s(e,t),e.prototype.initProperties=function(){this.properties={fonts:[],title:"",formId:""}},e.prototype.setRGBCallback=function(t){return this.rgbCallback=t,this},e.prototype.registerFontFamily=function(t){return t&&!this.fonts[t]&&(this.fonts[t]="",this.properties.fonts=Object.keys(this.fonts)),this},e.prototype.getTitle=function(){return this.properties.title},e.prototype.setTitle=function(t){return this.properties.title=t||"",this},e.prototype.getFormId=function(){return this.properties.formId},e.prototype.setFormId=function(t){return this.properties.formId=t||"",this},e.prototype.create=function(t){switch(t){case o.PDFNodeEntityType.PAGE:return new i.PDFPage(this);case o.PDFNodeEntityType.TEXT:return new a.PDFText(this);case o.PDFNodeEntityType.INPUT_TEXT:return new u.PDFInputText(this);case o.PDFNodeEntityType.INPUT_RADIO:return new h.PDFInputRadio(this);case o.PDFNodeEntityType.INPUT_CHECKBOX:return new f.PDFInputCheckbox(this);case o.PDFNodeEntityType.INPUT_DROPDOWN:return new g.PDFInputDropdown(this);case o.PDFNodeEntityType.INPUT_UNKNOWN:return new m.PDFInputUnknown(this);case o.PDFNodeEntityType.IMAGE:return new y.PDFImage(this);case o.PDFNodeEntityType.BUTTON:return new b.PDFButton(this);case o.PDFNodeEntityType.INPUT_SIGNATURE:return new E.PDFInputSignature(this);case o.PDFNodeEntityType.RECTANGLE:return new A.PDFRectangle(this);default:throw new Error("Invalid node type: "+JSON.stringify(t))}},e.prototype.getPages=function(){return this.children.filter((function(t){return t.getType()===o.PDFNodeEntityType.PAGE}))},e.prototype.getType=function(){return o.PDFNodeEntityType.DOCUMENT},e.prototype.getPDFLib=function(){return this.PdfLib},e.prototype.build=function(){var t=this;return n.Deferred((function(e){n.when(l.PDFLibSDK.load().fail((function(){console.error("Failed to load PDFLib")}))).then((function(n){console.log("creating PDF document ..."),t.PdfLib=n,t.setRGBCallback(n.rgb),n.PDFDocument.create().then((function(n){console.log("pdf document created..."),c.FontKitSDK.load().then((function(r){n.registerFontkit(r),console.log("pdf document registered fontkit..."),t.loadResources(n).then((function(r){console.log("fonts embedded...");var o=n.getForm(),i=t.getPages(),s=i.length-1;i.forEach((function(e,i){var a=n.addPage([e.getWidth(),e.getHeight()]);console.log("added page #"+(i+1)),(e.getChildren()||[]).forEach((function(t){t.render(a,o,r,e)})),i===s&&t.embedFieldWithDefaultPlaceholdersAndReturnIt(e).render(a,o,r,e)})),t.embedJavascript(n),o.updateFieldAppearances(r.getFontByName("Roboto")),n.save().then((function(t){d.FileUtils.download(new Blob([t]),"form.pdf"),e.resolve()})).catch((function(t){e.reject(t)}))})).fail((function(t){console.error("Failed to register fonts"),e.reject(t)}))})).fail((function(t){console.error("Failed to load FontKit"),e.reject(t)}))})).catch((function(t){e.reject(t)}))})).fail((function(t){e.reject(t)}))}))},e.prototype.loadResources=function(t){var e=this;return n.Deferred((function(n){var r=Object.keys(e.fonts),i=Object.keys(e.resources),s=new p.PDFResourcesCollection;-1===r.indexOf("Roboto")&&r.push("Roboto");var a=[];r.forEach((function(t){a.push({name:t,type:o.PDFResourceType.FONT})})),i.forEach((function(t){a.push({name:t,type:o.PDFResourceType.RESOURCE,extension:e.resources[t]})}));!function r(){var i=a.shift();void 0!==i?(console.log("loading "+(i.type===o.PDFResourceType.FONT?"font":"resource")+" "+i.name),i.type===o.PDFResourceType.FONT&&fetch("/api/v1/ui/fonts/"+encodeURIComponent(i.name)).then((function(e){e.arrayBuffer().then((function(e){t.embedFont(e).then((function(t){console.log("registered font: "+i.name),s.registerFont(i.name,t),setTimeout((function(){r()}),10)})).catch((function(t){console.log("failed registering font: "+i.name),console.error(t),setTimeout((function(){r()}),10)}))})).catch((function(t){console.log("failed get font bytes: "+i.name),console.error(t),setTimeout((function(){r()}),10)}))})).catch((function(t){console.log("failed downloading font: "+i.name),console.error(t),setTimeout((function(){r()}),10)})),i.type===o.PDFResourceType.RESOURCE&&fetch(i.name).then((function(n){n.arrayBuffer().then((function(n){e.embedResource(t,n,i.extension).then((function(t){console.log("embedded resource: "+i.name),s.registerResource(i.name,t),setTimeout((function(){r()}),10)})).catch((function(t){console.log("failed to embed resource: "+i.name),console.error(t),setTimeout((function(){r()}),10)}))})).catch((function(t){console.log("failed getting resource bytes: "+i.name),console.error(t),setTimeout((function(){r()}),10)}))})).catch((function(t){console.log("failed downloading resource: "+i.name),console.error(t),setTimeout((function(){r()}),10)}))):n.resolve(s)}()}))},e.prototype.rgb=function(t){return this.rgbCallback?this.rgbCallback(t[0]/255,t[1]/255,t[2]/255):null},e.prototype.registerResource=function(t){if(t&&void 0===this.resources[t]){var e=v.URLParser.parseURL(t),n=void 0;e.pathname&&(n=/\.(png|jpg)$/i.exec(e.pathname))&&(this.resources[t]=n[1].toLowerCase())}return this},e.prototype.embedResource=function(t,e,n){switch(n){case"png":return t.embedPng(e);case"jpg":return t.embedJpg(e);default:return window.Promise.reject(new Error("Invalid resource extension"))}},e.prototype.registerButton=function(t){return this.buttons.push(t),this},e.prototype.embedJavascript=function(t){var e=this,n=[];this.flatten().filter((function(t){return t.isInput()})).forEach((function(t){n=n.concat(t.enumerateNames())}));var r=[],i="new Array("+n.map((function(t){return JSON.stringify(t)}))+")";this.flatten().filter((function(t){return t.getType()===o.PDFNodeEntityType.BUTTON})).forEach((function(t){var n=t.enumerateNames()[0],s=t.getButtonType(),a=v.URLParser.parseURL(C.API.getRootAddress()),u=a.protocol+"//"+a.hostname+a.port+(a.pathname+"/forms/"+e.getFormId()+"/pdf-submit");switch(s){case o.PDFButtonType.SUBMIT:r.push("\n                                this\n                                    .getField("+JSON.stringify(n)+')\n                                    .setAction(\n                                        "MouseUp", \n                                        \'this.submitForm({ cURL: "'+u+'", aFields: '+i+', cSubmitAs: "XML" });\'\n                                    );\n                            ');break;case o.PDFButtonType.RESET:r.push("\n                                this\n                                    .getField("+JSON.stringify(n)+')\n                                    .setAction(\n                                        "MouseUp",\n                                        \'this.resetFields('+i+");'\n                                    );\n                            ")}})),t.addJavaScript("main",r.join("\n"))},e.prototype.embedFieldWithDefaultPlaceholdersAndReturnIt=function(t){var e=this.create(o.PDFNodeEntityType.INPUT_TEXT),n={},r=[],i={},s={};return this.flatten().filter((function(t){return t.isInput()})).forEach((function(t){t.writePlaceholders(n),t.getType()===o.PDFNodeEntityType.INPUT_CHECKBOX&&(r.push(t.getName()),t.isBooleanValue()&&(i[t.getName()]=!1)),t.getType()===o.PDFNodeEntityType.INPUT_RADIO&&(i[t.getName()]=t.getDefaultUncheckedValue(),null!==t.getGroupByName()&&(s[t.getGroupByName()]=!0))})),r.length&&(n.__CHECKBOXES__=r),Object.keys(i).length&&(n.__RADIOS__=i),Object.keys(s).length&&(n.__GROUPS__=Object.keys(s)),e.setDimensions({width:1,height:1,left:10,top:10}).setName("__PLACEHOLDERS__").setValue(btoa(unescape(encodeURIComponent(JSON.stringify(n))))).setReadOnly(!0).setBorderWidth(0).setTextColor("#ffffff").setBackgroundColor("#ffffff").setBorderColor("#ffffff"),t.appendChild(e),e},e.prototype.serialize=function(){var e=t.prototype.serialize.call(this);return e.fonts=this.fonts,e.resources=this.resources,e},e.prototype.unserialize=function(e){var n=this;return t.prototype.unserialize.call(this,e),this.fonts=e.fonts,this.resources=e.resources,this.buttons.splice(0,this.buttons.length),this.flatten().forEach((function(t){t.getType()===o.PDFNodeEntityType.BUTTON&&n.buttons.push(t)})),this},e}(r.PDFNode);e.PDFDocument=I}.apply(e,r))||(t.exports=o)},,function(t,e,n){"use strict";var r,o;r=[n,e,n(176),n(105),n(152),n(29),n(6),n(177),n(9),n(335),n(138),n(208)],void 0===(o=function(t,e,n,r,o,i,s,a,u,l,c,p){Object.defineProperty(e,"__esModule",{value:!0});var d=function(){function t(){}return t.addFunctionsToEnvironment=function(e,n){return e.withFunction("SHOPPING_CART_PRODUCT_ROWS",(function(){return e.getPrivateIdentifierValue("$_SHOPPING_CART_PRODUCT_ROWS",0)}),"\n                # SHOPPING_CART_PRODUCT_ROWS (function)\n                \n                ## SHOPPING_CART_PRODUCT_ROWS()\n                \n                This function does not support arguments. It returns the number of rows of type product added in your shopping cart.\n                \n                ",[],[0]).withFunction("SHOPPING_CART_PRODUCT_QUANTITIES",(function(){return e.getPrivateIdentifierValue("$_SHOPPING_CART_PRODUCT_QUANTITIES",0)}),"\n                # SHOPPING_CART_PRODUCT_QUANTITIES (function)\n                \n                ## SHOPPING_CART_PRODUCT_QUANTITIES()\n                \n                This function does not support arguments. It returns the sum of quantities of all products added in your shopping cart.\n                \n                ",[],[0]).withFunction("SHOPPING_CART_PRODUCTS_TOTAL",(function(){return e.getPrivateIdentifierValue("$_SHOPPING_CART_PRODUCTS_TOTAL",0)}),"\n                # SHOPPING_CART_PRODUCTS_TOTAL (function)\n                \n                ## SHOPPING_CART_PRODUCTS_TOTAL()\n                \n                This function returns the sum of the values (money) of the products added in shopping cart, before applying any discount or tax. \n                \n                ",[],[0]).withFunction("IS_NULL",(function(t){return null===t}),"\n                \n                # IS_NULL (function)\n                \n                ## IS_NULL (argument)\n                \n                IF the argument value is evaluated to a pure **null** value, this function will return **true**.\n                Otherwise it will return **false**.\n                \n                ",["argument"],[1]).withFunction("IS_EMPTY",(function(t){return!(null!==t&&!1!==t&&""!==t&&0!==t&&!isNaN(t)&&void 0!==t)||t&&(Array.isArray(t)&&0===t.length||t instanceof Object&&0===Object.keys(t).length)}),"\n                \n                # IS_EMPTY (function)\n                \n                ## IS_EMPTY (argument)\n                \n                IF the argument of the function IS:\n                \n                * empty string\n                * null\n                * false\n                * 0\n                * NaN (undocumented)\n                * empty array (undocumented)\n                * object with no keys (undocumented)\n                * undefined (undocumented)\n                \n                Then the result of this function is **true**\n                \n                Otherwise the result of this function is **false**\n                \n                ",["argument"],[1]).withFunction("STRING",(function(t,e){var n="";if("string"!=typeof t)switch(!0){case null===t:case void 0===t:return"";case t instanceof Date:switch(e=(e||i.DateUtils.YYYYMMDD).toLowerCase()){case i.DateUtils.YYYYMMDD:return s.Strings.strPad(String(t.getFullYear()),4,"0")+"/"+s.Strings.strPad(String(t.getMonth()+1),2,"0")+"/"+s.Strings.strPad(String(t.getDate()),2,"0");case i.DateUtils.DDMMYYYY:return s.Strings.strPad(String(t.getDate()),2,"0")+"/"+s.Strings.strPad(String(t.getMonth()+1),2,"0")+"/"+s.Strings.strPad(String(t.getFullYear()),4,"0");case i.DateUtils.MMDDYYYY:return s.Strings.strPad(String(t.getMonth()+1),2,"0")+"/"+s.Strings.strPad(String(t.getDate()),2,"0")+"/"+s.Strings.strPad(String(t.getFullYear()),4,"0");default:throw new Error("Invalid date conversion format: "+JSON.stringify(e))}case"number"==typeof t:if(void 0===e)return String(t||0);var r=~~e;return Number(t||0).toFixed(r);case!1===t:return"0";case!0===t:return"1";default:return String(t)}else n=t;return n}),'\n                # STRING (function)\n                \n                ## STRING( valueToBeConvertedToString [, conversionOptions] )\n                \n                Cast the `valueToBeConvertedToString` as a string\n                \n                ### Optional conversion options argument\n                \n                Depending on the data type of the argument `valueToBeConvertedToString`, the\n                conversion options can receive these values:\n                \n                **When**:\n                \n                * valueToBeConvertedToString **IS** of data type **DATE**:\n                \n                The conversionOptions argument represents the date format. Accepted date formats are:\n                \n                - "mmddyyyy"\n                - "ddmmyyyy"\n                - "yyyymmdd"\n                \n                * valueToBeConvertedToString **IS** of data type **NUMBER**:\n                \n                The conversionOptions argument represents the decimals representations of the valueToBeConvertedAsString\n                \n                For example, if you want to convert a 5-decimals (or no decimals) number to a two decimals number,\n                use the value 2:\n                \n                **Example**\n                \n                STRING( 2.123123123, 2 ) -> "2.12"\n                \n                STRING( 2, 2 )           -> "2.00" \n                \n                ',["argument"],[1]).withFunction("LOWERCASE",(function(t){return 0===t?"0":String(t||"").toLowerCase()}),"\n                # LOWERCASE (function)\n                \n                ## LOWERCASE (singleArgument)\n                \n                Cast the 'singleArgument' to string, and converts all it's alphabet letters to lower case\n                \n                ",["argument"],[1]).withFunction("UPPERCASE",(function(t){return 0===t?"0":String(t||"").toUpperCase()}),"\n                # UPPERCASE (function)\n                \n                ## UPPERCASE (singleArgument)\n                \n                Cast the 'singleArgument' to string, and converts all it's alphabet letters to UPPER case\n                \n                ",["argument"],[1]).withFunction("BOOL",(function t(e){if("string"==typeof e)switch(e.toLowerCase()){case"n":case"no":case"0":case"false":return!1;default:return!!e}else switch(!0){case null===e:break;case Array.isArray(e)&&0===e.length:return 0!==e.length&&(1!==e.length||t(e[0]));case e instanceof Object:return 0!==Object.keys(e).length;default:return!!e}}),'\n                # BOOL (function)\n                \n                ## BOOL (singleArgument)\n                \n                Cast the `singleArgument` to a boolean value\n                \n                Values such as "n", "N", "no", "No", "NO", "nO", "0" are also casted to false\n                \n                ## See also\n         \n                [Functions List](#functions-list)\n                    \n                ',["argument"],[1]).withFunction("CONCAT",(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0,o=t.length;r<o;r++)n=n.concat(String(t[r]||""));return n}),"\n                # CONCAT (function)\n                \n                # CONCAT (arg0 ...[, argx] )\n                \n                Concatenates multiple values as strings, and returns their concatenation\n                result\n                \n                ## See also\n         \n                [Functions List](#functions-list)\n                    \n                ",["argument1","argument2","...","argumentn"],[2]).withFunction("VALUE",(function(t){var e;if(n)return(e=t instanceof u.Input||t instanceof a.SubFieldNode?t.getId():n.getControlIdByControlName(t,r.FunctionCallExpression.TARGET_FIELD?r.FunctionCallExpression.TARGET_FIELD.getRepeatedIndex():void 0))?t instanceof a.SubFieldNode?t.getValue():n.getValue(e):void 0}),"\n                # VALUE( function )\n                \n                ## VALUE (controlNameIdentifier)\n                \n                Returns the value of a control\n                \n                ## See also\n             \n                [Functions List](#functions-list)\n                ",["field"],[1]).withFunction("VISIBLE",(function(t){return t instanceof u.Input&&t.isVisible()}),"\n                # VISIBLE( control ) \n                \n                Returns whether a control is visible or not\n                \n                ## See also\n             \n                [Functions List](#functions-list)\n                ",["field"],[1]).withFunction("PRINT",(function(t){return console.log(t),t}),"\n            # PRINT (function)\n            \n            Prints the argument in console, and returns it. Useful for debugging.\n            ",["argument"],[1]).withFunction("INT",(function(t){return"number"==typeof t?parseInt(String(t||"")||"0")||0:"boolean"==typeof t?~~t:parseInt(String(Number(t)))}),'\n                # INT (function)\n            \n                ## INT ( expression )\n                \n                converts a expression to a integer value\n                \n                ### Example\n                \n                INT ("2.3") = 2\n                INT (2) = 2\n                INT( "" ) = 0\n\n                ## See also\n             \n                [Functions List](#functions-list)\n                ',["argument"],[1]).withFunction("FLOAT",(function(t){return"number"!=typeof t?"boolean"==typeof t?~~t:parseFloat(String(t||"")||"0")||0:t||0}),"\n                # FLOAT( FLOAT )\n                    \n                Returns the float number represented in value argument\n                    \n                ## See also\n             \n                [Functions List](#functions-list)\n                ",["argument"],[1]).withFunction("PERCENT",(function(t,e){void 0===e&&(e=100),isNaN(e)&&(e=0),isFinite(e)||(e=0),isNaN(t)&&(t=0),isFinite(t)||(t=0);var n=t/(e/100);return isNaN(n)&&(n=0),isFinite(n)||(n=0),n}),"\n                \n                # PERCENT ( x: number, total: number ): float\n                \n                Returns the percent % of x compared to total\n                \n                ## See also\n             \n                [Functions List](#functions-list)\n\n                ",["fraction","whole"],[2]).withFunction("FORMAT_NUMBER",(function(t,e,n){void 0===e&&(e=2),void 0===n&&(n=!1),!isNaN(t)&&isFinite(t)||(t=0),!isNaN(e)&&isFinite(e)||(e=2),e||(e=0),e<0&&(e=0);var r=(Number(t)||0).toFixed(e);return n&&(r=r.replace(/\.([^0]+)?([0]+)$/g,".$1")),r.replace(/\.$/g,"")}),"\n                # FORMAT_NUMBER( number: number [, decimals: int = 2 [, removeLeadingZeroDecimals: bool = false ] ] )\n                \n                Adds decimals to a number\n                \n                ## See also\n             \n                [Functions List](#functions-list)\n\n                ",["number","decimals","?remove_leading_zero_decimals"],[2,3]).withFunction("DATE",(function(e,n){return t.castValueToDate(e,n)}),'\n                    # DATE(function)\n                    \n                    ## DATE( dateToBeParsed, dateFormat = "YYYYMMDD" )\n                    \n                    Parses a date or a relative date represented by a string, into a Javascript Date object\n                    \n                    Date separators can be the following characters:\n                        * "/"\n                        * "-"\n                        * Absent\n                        \n                    IF a date does not contains date separators, date string length must be 8 digit characters (if any\n                       separator is encountered, a NULL date value will be returned)\n                    \n                    IF a date contains date separator characters (/ or -), date parts padding is optional\n                    \n                    ### Example of relative dates:\n                    \n                    DATE("now")          -> Current date (with timestamp encapsulated)\n                    DATE("today")        -> Current date (with 00:00:00 set to h,m,s)\n                    DATE("-2yyyy")       -> Current date minus two years\n                    DATE("+2yyyy")       -> Current date after two years\n                    DATE("-2mm")         -> Current date minus two months\n                    DATE("+2mm")         -> Current date after two months\n                    DATE("-2dd")         -> Current date minus two days\n                    DATE("+2dd")         -> Current date after two days\n                    DATE("-2h")          -> Current date and time minus two hours\n                    DATE("+2h")          -> Current date and time after two hours\n                    DATE("-2m")          -> Current date and time minus two minutes\n                    DATE("+2m")          -> Current date and time after two minutes\n                    DATE("-2s")          -> Current date and time minus two seconds\n                    DATE("+2s")          -> Current date and time after two seconds\n                    DATE("yesterday")    -> Yesterday date\n                    DATE("tomorrow")     -> Tomorrow\'s date\n                    DATE("-2h3yyyy2s")   -> Current date minus two hours, three years and two seconds\n                    \n                    ### Example of fixed dates:\n                    \n                    DATE("1982/09/26")          -> Date(year = 1982, month = 8 (in javascript), day = 26, h = 0, m = 0, s = 0 )\n                    \n                    ## Date converted values regarding the math "+" operator\n                    \n                    DATE + NUMBER = Date after the number of days represented by the number value (if number is\n                    negative, then the date is in the past)\n\n                    NUMBER + DATE = Date after the number of days represented by the number value (if number is\n                    negative, then the date is in the past)\n                    \n                    DATE - NUMBER = Date before the number of days represented by the number value (if number is\n                    negative, then the date is in the future)   \n\n                    NUMBER - DATE = Will return NULL \n                    \n                    ## See Also\n                    \n                    [Date (data type)](#date)\n                    \n                ',["argument","?format"],[1,2]).withFunction("DATE_PART",(function(e,n,r){void 0===r&&(r="YYYYMMDD");var o=t.castValueToDate(e,r);if(!o||!n)return 0;switch(n.toLowerCase()){case"year":return o.getFullYear();case"month":return o.getMonth()+1;case"day":return o.getDate();default:return 0}}),'\n                    # DATE_PART(function)\n                    \n                    ## DATE_PART( dateToBeParsed, datePart: "YEAR"|"MONTH"|"DAY", dateFormat: string = "YYYYMMDD" )\n                    \n                    The DATE_PART function returns the component of the date representing by the datePart argument\n                    \n                    Returns 0 on failure\n                    \n                ',["date","part","?format"],[2,3]).withFunction("IF",(function(t,e,n){return t?e:n}),"\n                # IF (function)\n                \n                ## IF( condition, thenExpression, elseExpression )\n                \n                evaluates condition, and returns value based on a decision\n                \n                ### Example\n                \n                IF( true, 23, 45 ) -> 23\n                \n                ## See also\n             \n                [Functions List](#functions-list)\n                \n                ",["condition","then_expression","else_expression"],[3]).withFunction("SWITCH",(function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{for(var i=n.length%2==0?null:n[n.length-1],s=e.compute(t),a=n.length-~~(n.length%2),u=0,l=a;u<l;u+=2)if(o.FormulaUtils.isEqualComputedAWithExpressionB(s,n[u],t))return n[u+1].compute(t);return i?i.compute(t):null}catch(t){return console.error("Failed to evaluate SWITCH statement!"),console.error(t),null}}),'\n                 # SWITCH (function)\n                 \n                 ## SWITCH ( condition, ...[ caseExpr, thenResult, ] [ elseExpr ] )\n                 \n                 The "Switch" or "Case" statement implementation (as function)\n                 \n                 ### Example\n                 \n                 `SWITCH ( \n                    VALUE(A),\n                    \n                    "Foo", 3,\n                    "Bar", 4\n                    \n                    2\n                 )`\n                 \n                ## See also\n             \n                [Functions List](#functions-list)\n\n                 ',["condition","case1expr","then1expr","case2expr","then2expr","...","elseexpr"],[3,-1],!0).withFunction("AGGREGATE",(function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=0;try{var s=e.compute(t),a=n.length-~~(n.length%2),u=n.length%2==0?null:n[n.length-1],l=null===u?0:u.compute(t)||0;if(a>0||null!==u){var c=!0;if(Array.isArray(s))for(var p=0,d=s.length;p<d;p++){for(var h=0,f=a;h<f;h+=2)if(c=!0,o.FormulaUtils.isEqualComputedAWithExpressionB(s[p],n[h],t)){c=!1,i+=Number(n[h+1].compute(t))||0;break}!c&&u&&(i+=l)}else{for(h=0,f=a;h<f;h+=2)o.FormulaUtils.isEqualComputedAWithExpressionB(s,n[h],t)&&(c=!1,i+=Number(n[h+1].compute(t))||0);!c&&u&&(i+=l)}}}catch(t){return console.error("Failed to evaluate AGGREGATE statement!"),console.error(t),null}return i}),"\n                 # AGGREGATE (function)\n                 \n                 ## AGGREGATE ( condition, ...[ caseExpr, thenResult, ] [ elseExpr ] )\n                 \n                 If condition has multiple values (checkbox value for example), the aggregate function acts \n                 as the SUM( OF_EACH( SWITCH( condition, ...[ caseExpr, thenResult, ] [elseExpr ] ) ) )\n                 \n                 Otherwise, it acts as a SWITCH function.\n\n                ## See also\n                \n                [Functions List](#functions-list)\n\n                ",["condition","case1expr","then1expr","case2expr","then2expr","...","elseexpr"],[3,-1],!0).withFunction("FILE_PASSWORD",(function(t){var e=c.RegisteredUploadFiles.getFileByValue(t);return e&&e.getFilePassword()||""}),"# FILE_PASSWORD (function)\n                    \n                    ## FILE_PASSWORD( file )\n                    \n                    This function returns the password of a file",["file_upload_control_identifier"],[1]).withFunction("EXTRACT_SUBSTRING",(function(t,e){var n=String(e||"");if(!n)return"";var r=String(t||""),o=r.indexOf(n);return o>-1?r.substr(o+n.length):""}),'# EXTRACT_SUBSTRING (function)\n                    \n                    ## EXTRACT_SUBSTRING\n                    \n                    This function returns a substring from a string which occurs after a specified character\n                    \n                    EXTRACT_SUBSTRING("foo@gmail.com", "@") returns "gmail.com"\n                    \n                    ',["string","character"],[2]).withFunction("BUSINESS_DAYS",(function(e,n,r,o){var i,s;if(void 0===r&&(r="MMDDYYYY"),void 0===o&&(o=null),i=e?e instanceof Date?e:"string"==typeof e?t.castValueToDate(e,r):null:null,s=n?n instanceof Date?n:"string"==typeof n?t.castValueToDate(n,r):null:null,null===i||null===s)return 0;for(var a=0;t.compareDates(i,s)>=0;)a+=l.WorldwideHolidaysOfCountries.is_business_day(i,o),i.setDate(i.getDate()+1);return a}),'\n                # BUSINESS_DAYS (function)\n                \n                ## BUSINESS_DAYS ( dateStart, dateEnd, dateFormat: string = "YYYYMMDD", holidaysCountryCode: string = null ): integer\n                \n                Computes the number of business days between two dates\n                \n                ## See also\n                \n                [Functions List](#functions-list)\n                \n                ',["dateStart","dateEnd","?dateFormat","?holidaysCountryCode"],[2,4],!1).withFunction("NEURAL_NET_COMPUTE",(function(t,e){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];var i=null;if(e)try{i=n.getDocumentNodeById(n.getControlIdByControlName(e))}catch(t){}return p.NeuralNetworkRuntime.compute.apply(p.NeuralNetworkRuntime,[t,i].concat(r))}),"\n                # NEURAL_NET_COMPUTE (function)\n                \n                ## NEURAL_NET_COMPUTE( neuralNetworkId, targetFieldName, ...inputArguments ): string|float\n                \n                Sends input arguments to neural network with id neuralNetworkId, and returns\n                computed result as string or float (percentage)\n                \n                ## See also\n                \n                [Functions List](#functions-list)\n                \n                ",["neuralNetworkId","targetFieldName","arg1","?arg2","?arg3","?arg4","?arg5","?arg6","?arg7","?arg8","?arg9","?arg10"],[3,11],!1)},t.castValueToDate=function(t,e){if(t&&t instanceof Date)return t;if(null===t)return null;if("string"==typeof t){var n=new Date;switch(n.setMilliseconds(0),t=t.toLowerCase()){case"now":return n;case"today":return n.setHours(0),n.setMinutes(0),n.setSeconds(0),n;case"yesterday":return n.setDate(n.getDate()-1),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n;case"tomorrow":return n.setDate(n.getDate()+1),n.setHours(0),n.setMinutes(0),n.setSeconds(0),n;default:var r=[];if(r=/^([-+])?(([\d]+(yyyy|mm|dd|h|m|s))+)$/i.exec(t)){for(var o="-"===r[1],s=r[2],a=0,u=0,l=0,c=0,p=0,d=0;s;){if(!(r=/^([\d]+)(yyyy|mm|dd|h|m|s)([\d]|$)/.exec(s)))throw new Error("Failed to parse relative date intervals: "+JSON.stringify(s));switch(r[2]){case"yyyy":l=~~r[1];break;case"mm":u=~~r[1];break;case"dd":a=~~r[1];break;case"h":c=~~r[1];break;case"m":p=~~r[1];break;case"s":d=~~r[1];break;default:throw new Error("Unexpected date unit "+JSON.stringify(r[2]))}s=s.substr(r[1].concat(r[2]).length)}return 0!=l&&n.setDate(n.getFullYear()+(o?-1:1)*l),0!=u&&n.setDate(n.getMonth()+(o?-1:1)*u),0!=a&&n.setDate(n.getDate()+(o?-1:1)*a),0!=c&&n.setHours(n.getHours()+(o?-1:1)*c),0!=p&&n.setMinutes(n.getMinutes()+(o?-1:1)*p),0!=d&&n.setSeconds(n.getSeconds()+(o?-1:1)*d),n}var h=void 0,f=void 0,g=void 0,m=void 0;switch(e=String(e||i.DateUtils.YYYYMMDD).toLowerCase()){case i.DateUtils.DDMMYYYY:h=8===t.length?/^([\d]{2})([\d]{2})([\d]{4})$/:/^([\d]{2})[- \/]([\d]{2})[- \/]([\d]{4})$/,f=1,g=2,m=3;break;case i.DateUtils.MMDDYYYY:h=8===t.length?/^([\d]{2})([\d]{2})([\d]{4})$/:/^([\d]{2})[- \/]([\d]{2})[- \/]([\d]{4})$/,g=1,f=2,m=3;break;case i.DateUtils.YYYYMMDD:h=8===t.length?/^([\d]{4})([\d]{2})([\d]{2})$/:/^([\d]{4})[- \/]([\d]{2})[- \/]([\d]{2})$/,m=1,g=2,f=3;break;default:throw new Error("Unknown date format. Use: 'ddmmyyyy', 'yyyymmdd', 'mmddyyyy'")}var y=h.exec(t);if(!y)return null;var v=~~y[m],b=~~y[g],C=~~y[f];return C<1||C>31||b<1||b>12?null:(n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0),n.setFullYear(v),n.setMonth(b-1),n.setDate(C),n)}}return null},t.createEnvironment=function(t){var e=new n.ScriptingEnvironment;return this.addFunctionsToEnvironment(this.provideGeneralHelp(e),t)},t.provideGeneralHelp=function(t){return t.withHelpTherms("true","\n                    # (true) Constant, Boolean value\n                    \n                    In computer science, the Boolean data type is a data type that has one of two possible \n                    values, intended to represent the two truth values of logic and Boolean algebra.\n                ").withHelpTherms("false","\n                    # (false) Constant, Boolean value\n                    \n                    In computer science, the Boolean data type is a data type that has one of two possible \n                    values, intended to represent the two truth values of logic and Boolean algebra.\n                ").withHelpTherms("number","\n                    # (number) Constant\n                    \n                    A number is a mathematical object used to count, measure and also label. The original examples \n                    are the natural numbers 1, 2, 3, 4 and so forth. A notational symbol that represents a number is \n                    called a numeral.                \n\n                    ## Number types\n\n                    **INT**: Examples: 2, -1, 3213, -23\n                    \n                    **FLOAT**: Examples: 2.123, 22.78, .87\n                    \n                    **NUMBER**: Number is a super-type, containing both values from INT and FLOAT\n                    ").withHelpTherms("date",'\n                    # (date) Constant\n                    \n                    In computer programming, a date is a textual representation of a day in a calendar.\n                    \n                    These strings are dates:\n                    \n                    * "1982/09/27" - Day = 27, Month = 9 (September), Year = 1982\n                    * "2018/07/15" - Day = 15, Month = 7 (July), Year = 2018\n                    \n                    The native date format that the expression engine is able to recognize, is:\n                    \n                    * "YYYYMMDD"\n                    * "YYYY/MM/DD"\n                    * "YYYY-MM/DD"\n                    \n                    Other date values can be casted as the Date data type by using the **DATE** function\n                    \n                    ## See also\n                 \n                    * [String](#string)\n                    * [DATE (function)](#DATE)\n                    \n                ').withHelpTherms("string",'\n                    # (string) Constant\n                    \n                    In computer programming, a string is traditionally a sequence of characters.  \n                    A string is generally considered a data type and is often implemented as an array data structure of \n                    bytes (or words) that stores a sequence of elements, typically characters                \n\n                    ## String examples\n\n                    * "Marry"\n                    * \'Janice\'\n                    * "Jill\\nisComing to town"\n                    \n                    ## Escape characters\n                    \n                    Strings are enclosed by the " and \' characters. All Javascript character escaping is supported inside\n                    a formula.\n                    \n                    ## See also:\n                    \n                    * [DATE (constant)](#date) - A string representing a date is parsed as a date\n\n                    ').withHelpTherms("null",'\n                    # (null) Constant\n                    \n                    **null** is a super data type used in formulas, which indicates that a value is either not initialized,\n                    either that is missing.                 \n                    \n                    The **null** constant can be interpreted as "not applicable", or "not available".\n                    \n                    For example, a variable that don\'t exist will contain the **null** value, but a variable that exists\n                    and is empty will contain a empty string value ("") if is of type string, and a *0* value if is empty.\n                    \n                    ').withHelpTherms("operator-help",'# Operators\n                \n                    Supported operators are of three types: "Math", "Unary", and "Logical" \n                \n                    ## Math operators (returning math or mixed values)\n                    \n                    * **+** Add\n                    * **-** Substract\n                    * ***** Multiply\n                    * **/** Divide\n                    * **%** Modulo\n                    \n                    ## Unary operators (returning boolean or math values)\n                    \n                    * **-** Minus\n                    * **+** Plus\n                    * **!** Not\n                    \n                    ## Logical operators (returning boolean values)\n                    \n                    * **==** Equals\n                    * **!=** Different then\n                    * **<** Less then\n                    * **<=** Less or equal with\n                    * **>** Greater then\n                    * **>=** Greater or equal with\n                    * **&&** And\n                    * **||** Or\n                    * **~=** Ends with\n                    * **=~** Starts with\n                    * **~** Contains\n                    \n                    ## See also\n                 \n                    [Functions List](#functions-list)\n                ').withHelpTherms("parenthesis-help",'\n                \n                    # Parenthesis\n                    \n                    In order to change the priority of the operations inside a formula, you can use the "(" and ")"\n                    parenthesis.\n                \n                ').withHelpTherms("identifier-help",'\n                    # Identifiers\n                    \n                    An identifier is a name that identifies (that is, labels the identity of) a unique object where the \n                    "object" may be a form control. A synonym to the word identifier would be "variable".\n                    \n                    When the document is seen in view-form mode, an environment is created containing all the \n                    "identifiers" inside the form (all the form controls will propagate their names as an identifier \n                    inside that environment).\n                    \n                    Each time you are modifying or setting the "name" property of a control inside the edit form mode, \n                    a identifier (or variable) with that name is declared .\n                    \n                    Accessing a undefined identifier, will result in a *null* value, so that each formula accessing\n                    a undefined identifier will evaluate that value as a **null** (not applicable) value.\n                ').withHelpTherms("functions-list","# Functions List\n                    \n                    Below you can find all the functions supported by our scripting engine:\n                    \n                    \n                "+function(t){var e=[];t.sort((function(t,e){var n=String(t||"").toLowerCase(),r=String(e||"").toLowerCase();return n===r?0:n<r?-1:1}));for(var n=0,r=t.length;n<r;n++)e.push("* ["+t[n]+"](#"+t[n]+")");return e.join("\n")}(["AGGREGATE","BOOL","CONCAT","DATE","FLOAT","INT","IF","IS_NULL","IS_EMPTY","STRING","SWITCH","VALUE","VISIBLE"])).withHelpTherms("help","\n                \n                    # Formula HELP\n                    \n                    **TIP**: Click on a token on the above generated formula, in order to see inline help\n                    \n                    ---\n                    \n                    #### Constants\n                    * **Boolean** [true](#true) and [false](#false)\n                    * [**String**](#string)\n                    * [**Number**](#number)\n                    * [**Date**](#date)\n                    * [**Null**](#null)\n                    \n                    #### [**Identifiers**](#identifier-help)\n                    \n                    #### [**Operators**](#operator-help)\n                    \n                    * [**Parenthesis**](#parenthesis-help)\n                    \n                    #### [**Functions**](#functions-list)\n                \n                ")},t.compareDates=function(t,e){var n=t.getDate()+31*t.getMonth()+372*t.getFullYear();return e.getDate()+31*e.getMonth()+372*e.getFullYear()-n},t}();e.ScriptingEnvironmentUserFunctions=d}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r=[n,e,n(0),n(123),n(6),n(162),n(100),n(4)],void 0===(o=function(t,e,n,r,o,s,a,u){Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(){}return t.load=function(){var t=this;return n.Deferred((function(e){var r=[];n('script[type="text/neural-network-json-base64"]').each((function(){try{r.push(JSON.parse(o.Strings.base64ToUTF8(this.textContent)))}catch(t){console.warn("Failed to load neural network from DOM!")}})),r.length?s.BrainJsSDK.load().then((function(){n.when.apply(n,r.map((function(e){return a.NeuralNetworkManager.factory(e).fail((function(t){console.error(t),console.warn("Failed to instantiate neural network #"+e.id+" ("+JSON.stringify(e.name)+")")})).then((function(e){t.neuralNetworks[e.model.id]=e}))}))).always((function(){e.resolve()}))})).fail((function(t){console.error(t),console.warn("neural_net_runtime.load: Abort loading networks, because brain.js sdk was not loaded"),e.resolve()})):e.resolve()}))},t.compute=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var i,s=this.neuralNetworks[t]||null;if(null===s)return console.warn("neural_net_runtime.compute: net #"+JSON.stringify(t)+" not found"),"";switch(s.model.type){case r.NeuralNetworkType.RECURRENT_LSTM:i=this.computeLSTM.apply(this,[s].concat(n));break;case r.NeuralNetworkType.NEURAL_NETWORK:i=this.computeNeural.apply(this,[s].concat(n));break;default:return console.warn("neural_net_runtime.compute: net #"+JSON.stringify(t)+" is of unknown type "+JSON.stringify(s.model.type)),""}return e&&(i=this.adjustResultBasedOnInputHint(e,i)),i},t.computeNeural=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0];switch(!0){case void 0===r:case null===r:return"";case"number"==typeof r:r=String(r);break;case"string"==typeof r:break;case"boolean"==typeof r:r=r?"1":"0";break;default:return console.warn("neural_net_runtime.compute.neural: argument type is not accepted: "+JSON.stringify(void 0===r?"undefined":i(r))),""}if(""===o.Strings.trim(r))return"";var s=t.net.run(t.net.stemmer.toNeuralNetworkInput(r));return s?this.extractBestResult(s):""},t.extractBestResult=function(t){var e="",n=0;return Object.keys(t).forEach((function(r){t[r]>n&&(e=r,n=t[r])})),console.log("neural_net_runtime.neural.compute::confidence",n),e},t.computeLSTM=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0];switch(!0){case void 0===r:case null===r:return"";case"number"==typeof r:r=String(r);break;case"string"==typeof r:break;case"boolean"==typeof r:r=r?"1":"0";break;default:return console.warn("neural_net_runtime.compute.lstm: argument type is not accepted: "+JSON.stringify(void 0===r?"undefined":i(r))),""}return t.net.run(r)},t.adjustResultBasedOnInputHint=function(t,e){var n=this.getInputHints(t);if(null===n)return e;for(var r=e.toLowerCase(),o=0,i=n.length;o<i;o++){var s=n[o].length;if(0!==s&&r.substr(-s)===n[o].toLowerCase())return n[o]}return""},t.getInputHints=function(t){if(!t)return null;var e=t.getId();if(!e)return null;if(void 0!==this.hints[e])return this.hints[e];switch(this.hints[e]=null,t.getTypeId()){case u.NodeTypes.RADIO:case u.NodeTypes.DROP_DOWN:case u.NodeTypes.BIG_DATA_DROPDOWN:this.hints[e]=t.getTextChoices()}return this.hints[e]},t.neuralNetworks={},t.hints={},t}();e.NeuralNetworkRuntime=l}.apply(e,r))||(t.exports=o)},,,,function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(23)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){var e=t.call(this)||this;return e.selected=!1,e.setClass("ui list-item"),e}return s(e,t),e.prototype.isSelected=function(){return this.selected},e.prototype.setSelected=function(t){return t!==this.selected&&(this.selected=!!t,this.selected?this.addClass("selected"):this.removeClass("selected")),this},e}(n.NodeAbstract);e.ListItem=r}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(40)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){var n=t.call(this)||this;return n.fontId=e,n.root.appendChild(document.createElement("div")).className="gwf gwf-id-"+e,n}return s(e,t),e.prototype.setValue=function(e){return this.root.title=e||"",t.prototype.setValue.call(this,e)},e}(n.ValueListItem);e.FontListItem=r}.apply(e,r))||(t.exports=o)},,function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(33)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){var e=t.call(this)||this;return e.addClass("icon-dropdown"),e.iconDOMNode=document.createElement("div"),e.iconDOMNode.className="icon",e.root.appendChild(e.iconDOMNode),e}return s(e,t),e.prototype.setIcon=function(t){for(;this.iconDOMNode.firstChild;)this.iconDOMNode.removeChild(this.iconDOMNode.firstChild);return t&&(this.iconDOMNode.appendChild(document.createElement("span")).className="vfb vfb-"+t),this},e}(n.Dropdown);e.IconDropdown=r}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(40)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){var n=t.call(this)||this;return n.addClass("color"),n.setValue(e),n.root.style.backgroundColor=e,n}return s(e,t),e}(n.ValueListItem);e.ColorListItem=r}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(150),n(218)],void 0===(o=function(t,e,n,r){Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.prototype.createTextNode=function(t){var e=new n.VirtualNode;return e.textContent=t,e},t.prototype.createElement=function(t){var e=new r.VirtualElement;return e.nodeName=String(t||"").toLowerCase(),e},t}();e.VirtualDocument=o}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(150),n(219)],void 0===(o=function(t,e,n,r){Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){var e=t.call(this)||this;return e.nodeName="",e.id=null,e.classList=new r.VirtualElementClassList,e.attributes={},e.style={},e.nodeType=Node.ELEMENT_NODE,e}return s(e,t),Object.defineProperty(e.prototype,"innerHTML",{get:function(){return""},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this.classList.className},set:function(t){this.classList.className=t},enumerable:!0,configurable:!0}),e.prototype.appendChild=function(t){return t instanceof Node||(t.parentNode=this),t},e.prototype.removeChild=function(t){return t},Object.defineProperty(e.prototype,"firstChild",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.insertBefore=function(t,e){return t},e.prototype.querySelector=function(t){return null},e.prototype.querySelectorAll=function(t){return[]},e.prototype.hasAttribute=function(t){return void 0!==this.attributes[t]},e.prototype.getAttribute=function(t){return void 0===this.attributes[t]?null:this.attributes[t]},e.prototype.setAttribute=function(t,e){return t&&(this.attributes[t]=String(e||"")||null),this},e.prototype.removeAttribute=function(t){return delete this.attributes[t],this},e.prototype.addEventListener=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.removeEventListener=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.getBoundingClientRect=function(){return{top:0,left:0,right:0,bottom:0,width:640,height:480}},e.prototype.scrollIntoView=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},Object.defineProperty(e.prototype,"value",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedIndex",{get:function(){return 0},enumerable:!0,configurable:!0}),e.prototype.add=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.focus=function(){},e}(n.VirtualNode);e.VirtualElement=o}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r;void 0===(r=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.classes={}}return t.prototype.has=function(t){return void 0!==this.classes[t]},t.prototype.add=function(t){return t&&(this.classes[t]=!0),this},t.prototype.remove=function(t){return delete this.classes[t],this},t.prototype.reset=function(){return this.classes={},this},Object.defineProperty(t.prototype,"className",{get:function(){return Object.keys(this.classes).join(" ")},set:function(t){var e=this;this.reset(),String(t||"").split(" ").forEach((function(t){""!==t&&e.add(t)}))},enumerable:!0,configurable:!0}),t}();e.VirtualElementClassList=n}.apply(e,[n,e]))||(t.exports=r)},,,,,,function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(require){var o=function(t,e,n,r){for(n=n||{},r=t.length;r--;n[t[r]]=e);return n},$V0=[1,5],$V1=[1,4],$V2=[1,3],$V3=[1,6],$V4=[1,7],$V5=[1,8],$V6=[1,9],$V7=[1,10],$V8=[1,12],$V9=[1,13],$Va=[1,14],$Vb=[1,16],$Vc=[1,17],$Vd=[1,18],$Ve=[1,19],$Vf=[1,20],$Vg=[1,21],$Vh=[1,22],$Vi=[1,23],$Vj=[1,24],$Vk=[1,25],$Vl=[1,26],$Vm=[1,27],$Vn=[1,28],$Vo=[1,29],$Vp=[1,30],$Vq=[1,31],$Vr=[5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,30,34],$Vs=[5,6,7,10,11,12,13,14,15,16,17,18,20,21,30,34],$Vt=[5,6,7,8,9,10,11,12,13,14,15,16,17,18,20,21,30,34],$Vu=[5,10,11,12,13,14,20,21,30,34],$Vv=[5,10,11,12,13,14,15,16,17,18,20,21,30,34],$Vw=[30,34],parser={trace:function(){},yy:{},symbols_:{error:2,expressions:3,e:4,EOF:5,"+":6,"-":7,"*":8,"/":9,"==":10,"!=":11,"~=":12,"=~":13,"~":14,"<=":15,"<":16,">=":17,">":18,"%":19,"&&":20,"||":21,"!":22,NUMBER:23,BOOLEAN:24,DATE:25,STRING:26,NULL:27,FunctionCall:28,"(":29,")":30,SUBFIELD_IDENTIFIER:31,IDENTIFIER:32,ArgumentsList:33,",":34,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",6:"+",7:"-",8:"*",9:"/",10:"==",11:"!=",12:"~=",13:"=~",14:"~",15:"<=",16:"<",17:">=",18:">",19:"%",20:"&&",21:"||",22:"!",23:"NUMBER",24:"BOOLEAN",25:"DATE",26:"STRING",27:"NULL",29:"(",30:")",31:"SUBFIELD_IDENTIFIER",32:"IDENTIFIER",34:","},productions_:[0,[3,2],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,2],[4,2],[4,2],[4,1],[4,1],[4,1],[4,1],[4,1],[4,1],[4,3],[4,1],[4,1],[28,3],[28,4],[33,3],[33,1]],performAction:function anonymous(yytext,yyleng,yylineno,yy,yystate,$$,_$){var $0=$$.length-1;switch(yystate){case 1:return $$[$0-1];case 2:this.$={type:"expression",expressionType:"math",operator:"add",a:$$[$0-2],b:$$[$0]};break;case 3:this.$={type:"expression",expressionType:"math",operator:"sub",a:$$[$0-2],b:$$[$0]};break;case 4:this.$={type:"expression",expressionType:"math",operator:"mul",a:$$[$0-2],b:$$[$0]};break;case 5:this.$={type:"expression",expressionType:"math",operator:"div",a:$$[$0-2],b:$$[$0]};break;case 6:this.$={type:"expression",expressionType:"boolean",operator:"eq",a:$$[$0-2],b:$$[$0]};break;case 7:this.$={type:"expression",expressionType:"boolean",operator:"neq",a:$$[$0-2],b:$$[$0]};break;case 8:this.$={type:"expression",expressionType:"boolean",operator:"ewith",a:$$[$0-2],b:$$[$0]};break;case 9:this.$={type:"expression",expressionType:"boolean",operator:"swith",a:$$[$0-2],b:$$[$0]};break;case 10:this.$={type:"expression",expressionType:"boolean",operator:"contains",a:$$[$0-2],b:$$[$0]};break;case 11:this.$={type:"expression",expressionType:"boolean",operator:"lte",a:$$[$0-2],b:$$[$0]};break;case 12:this.$={type:"expression",expressionType:"boolean",operator:"lt",a:$$[$0-2],b:$$[$0]};break;case 13:this.$={type:"expression",expressionType:"boolean",operator:"gte",a:$$[$0-2],b:$$[$0]};break;case 14:this.$={type:"expression",expressionType:"boolean",operator:"gt",a:$$[$0-2],b:$$[$0]};break;case 15:this.$={type:"expression",expressionType:"math",operator:"mod",a:$$[$0-2],b:$$[$0]};break;case 16:this.$={type:"expression",expressionType:"boolean",operator:"and",a:$$[$0-2],b:$$[$0]};break;case 17:this.$={type:"expression",expressionType:"boolean",operator:"or",a:$$[$0-2],b:$$[$0]};break;case 18:this.$={type:"expression",expressionType:"unary",operator:"not",a:$$[$0]};break;case 19:this.$={type:"expression",expressionType:"unary",operator:"uminus",a:$$[$0]};break;case 20:this.$={type:"expression",expressionType:"unary",operator:"uplus",a:$$[$0]};break;case 21:this.$={type:"expression",expressionType:"constant",constantType:"number",value:Number(yytext)};break;case 22:this.$={type:"expression",expressionType:"constant",constantType:"boolean",value:"true"===yytext};break;case 23:this.$={type:"expression",expressionType:"constant",constantType:"date",value:Helper.parseDate(eval($$[$0]))};break;case 24:this.$={type:"expression",expressionType:"constant",constantType:"string",value:eval($$[$0])};break;case 25:this.$={type:"expression",expressionType:"constant",constantType:"null",value:null};break;case 26:this.$=$$[$0];break;case 27:this.$={type:"expression",expressionType:"group",value:$$[$0-1]};break;case 28:this.$={type:"expression",expressionType:"identifier",name:Helper.getUnquotedSubfieldIdentifierName($$[$0])};break;case 29:this.$={type:"expression",expressionType:"identifier",name:Helper.getUnquotedIdentifierName($$[$0])};break;case 30:this.$={type:"expression",expressionType:"call",function_name:Helper.getUnquotedIdentifierName($$[$0-2]),arguments:[]};break;case 31:this.$={type:"expression",expressionType:"call",function_name:Helper.getUnquotedIdentifierName($$[$0-3]),arguments:$$[$0-1]};break;case 32:this.$=$$[$0-2].concat($$[$0]);break;case 33:this.$=[$$[$0]]}},table:[{3:1,4:2,6:$V0,7:$V1,22:$V2,23:$V3,24:$V4,25:$V5,26:$V6,27:$V7,28:11,29:$V8,31:$V9,32:$Va},{1:[3]},{5:[1,15],6:$Vb,7:$Vc,8:$Vd,9:$Ve,10:$Vf,11:$Vg,12:$Vh,13:$Vi,14:$Vj,15:$Vk,16:$Vl,17:$Vm,18:$Vn,19:$Vo,20:$Vp,21:$Vq},{4:32,6:$V0,7:$V1,22:$V2,23:$V3,24:$V4,25:$V5,26:$V6,27:$V7,28:11,29:$V8,31:$V9,32:$Va},{4:33,6:$V0,7:$V1,22:$V2,23:$V3,24:$V4,25:$V5,26:$V6,27:$V7,28:11,29:$V8,31:$V9,32:$Va},{4:34,6:$V0,7:$V1,22:$V2,23:$V3,24:$V4,25:$V5,26:$V6,27:$V7,28:11,29:$V8,31:$V9,32:$Va},o($Vr,[2,21]),o($Vr,[2,22]),o($Vr,[2,23]),o($Vr,[2,24]),o($Vr,[2,25]),o($Vr,[2,26]),{4:35,6:$V0,7:$V1,22:$V2,23:$V3,24:$V4,25:$V5,26:$V6,27:$V7,28:11,29:$V8,31:$V9,32:$Va},o($Vr,[2,28]),o($Vr,[2,29],{29:[1,36]}),{1:[2,1]},{4:37,6:$V0,7:$V1,22:$V2,23:$V3,24:$V4,25:$V5,26:$V6,27:$V7,28:11,29:$V8,31:$V9,32:$Va},{4:38,6:$V0,7:$V1,22:$V2,23:$V3,24:$V4,25:$V5,26:$V6,27:$V7,28:11,29:$V8,31:$V9,32:$Va},{4:39,6:$V0,7:$V1,22:$V2,23:$V3,24:$V4,25:$V5,26:$V6,27:$V7,28:11,29:$V8,31:$V9,32:$Va},{4:40,6:$V0,7:$V1,22:$V2,23:$V3,24:$V4,25:$V5,26:$V6,27:$V7,28:11,29:$V8,31:$V9,32:$Va},{4:41,6:$V0,7:$V1,22:$V2,23:$V3,24:$V4,25:$V5,26:$V6,27:$V7,28:11,29:$V8,31:$V9,32:$Va},{4:42,6:$V0,7:$V1,22:$V2,23:$V3,24:$V4,25:$V5,26:$V6,27:$V7,28:11,29:$V8,31:$V9,32:$Va},{4:43,6:$V0,7:$V1,22:$V2,23:$V3,24:$V4,25:$V5,26:$V6,27:$V7,28:11,29:$V8,31:$V9,32:$Va},{4:44,6:$V0,7:$V1,22:$V2,23:$V3,24:$V4,25:$V5,26:$V6,27:$V7,28:11,29:$V8,31:$V9,32:$Va},{4:45,6:$V0,7:$V1,22:$V2,23:$V3,24:$V4,25:$V5,26:$V6,27:$V7,28:11,29:$V8,31:$V9,32:$Va},{4:46,6:$V0,7:$V1,22:$V2,23:$V3,24:$V4,25:$V5,26:$V6,27:$V7,28:11,29:$V8,31:$V9,32:$Va},{4:47,6:$V0,7:$V1,22:$V2,23:$V3,24:$V4,25:$V5,26:$V6,27:$V7,28:11,29:$V8,31:$V9,32:$Va},{4:48,6:$V0,7:$V1,22:$V2,23:$V3,24:$V4,25:$V5,26:$V6,27:$V7,28:11,29:$V8,31:$V9,32:$Va},{4:49,6:$V0,7:$V1,22:$V2,23:$V3,24:$V4,25:$V5,26:$V6,27:$V7,28:11,29:$V8,31:$V9,32:$Va},{4:50,6:$V0,7:$V1,22:$V2,23:$V3,24:$V4,25:$V5,26:$V6,27:$V7,28:11,29:$V8,31:$V9,32:$Va},{4:51,6:$V0,7:$V1,22:$V2,23:$V3,24:$V4,25:$V5,26:$V6,27:$V7,28:11,29:$V8,31:$V9,32:$Va},{4:52,6:$V0,7:$V1,22:$V2,23:$V3,24:$V4,25:$V5,26:$V6,27:$V7,28:11,29:$V8,31:$V9,32:$Va},o($Vr,[2,18]),o($Vr,[2,19]),o($Vr,[2,20]),{6:$Vb,7:$Vc,8:$Vd,9:$Ve,10:$Vf,11:$Vg,12:$Vh,13:$Vi,14:$Vj,15:$Vk,16:$Vl,17:$Vm,18:$Vn,19:$Vo,20:$Vp,21:$Vq,30:[1,53]},{4:56,6:$V0,7:$V1,22:$V2,23:$V3,24:$V4,25:$V5,26:$V6,27:$V7,28:11,29:$V8,30:[1,54],31:$V9,32:$Va,33:55},o($Vs,[2,2],{8:$Vd,9:$Ve,19:$Vo}),o($Vs,[2,3],{8:$Vd,9:$Ve,19:$Vo}),o($Vt,[2,4],{19:$Vo}),o($Vt,[2,5],{19:$Vo}),o($Vu,[2,6],{6:$Vb,7:$Vc,8:$Vd,9:$Ve,15:$Vk,16:$Vl,17:$Vm,18:$Vn,19:$Vo}),o($Vu,[2,7],{6:$Vb,7:$Vc,8:$Vd,9:$Ve,15:$Vk,16:$Vl,17:$Vm,18:$Vn,19:$Vo}),o($Vu,[2,8],{6:$Vb,7:$Vc,8:$Vd,9:$Ve,15:$Vk,16:$Vl,17:$Vm,18:$Vn,19:$Vo}),o($Vu,[2,9],{6:$Vb,7:$Vc,8:$Vd,9:$Ve,15:$Vk,16:$Vl,17:$Vm,18:$Vn,19:$Vo}),o($Vu,[2,10],{6:$Vb,7:$Vc,8:$Vd,9:$Ve,15:$Vk,16:$Vl,17:$Vm,18:$Vn,19:$Vo}),o($Vv,[2,11],{6:$Vb,7:$Vc,8:$Vd,9:$Ve,19:$Vo}),o($Vv,[2,12],{6:$Vb,7:$Vc,8:$Vd,9:$Ve,19:$Vo}),o($Vv,[2,13],{6:$Vb,7:$Vc,8:$Vd,9:$Ve,19:$Vo}),o($Vv,[2,14],{6:$Vb,7:$Vc,8:$Vd,9:$Ve,19:$Vo}),o($Vr,[2,15]),o([5,20,21,30,34],[2,16],{6:$Vb,7:$Vc,8:$Vd,9:$Ve,10:$Vf,11:$Vg,12:$Vh,13:$Vi,14:$Vj,15:$Vk,16:$Vl,17:$Vm,18:$Vn,19:$Vo}),o([5,21,30,34],[2,17],{6:$Vb,7:$Vc,8:$Vd,9:$Ve,10:$Vf,11:$Vg,12:$Vh,13:$Vi,14:$Vj,15:$Vk,16:$Vl,17:$Vm,18:$Vn,19:$Vo,20:$Vp}),o($Vr,[2,27]),o($Vr,[2,30]),{30:[1,57],34:[1,58]},o($Vw,[2,33],{6:$Vb,7:$Vc,8:$Vd,9:$Ve,10:$Vf,11:$Vg,12:$Vh,13:$Vi,14:$Vj,15:$Vk,16:$Vl,17:$Vm,18:$Vn,19:$Vo,20:$Vp,21:$Vq}),o($Vr,[2,31]),{4:59,6:$V0,7:$V1,22:$V2,23:$V3,24:$V4,25:$V5,26:$V6,27:$V7,28:11,29:$V8,31:$V9,32:$Va},o($Vw,[2,32],{6:$Vb,7:$Vc,8:$Vd,9:$Ve,10:$Vf,11:$Vg,12:$Vh,13:$Vi,14:$Vj,15:$Vk,16:$Vl,17:$Vm,18:$Vn,19:$Vo,20:$Vp,21:$Vq})],defaultActions:{15:[2,1]},parseError:function(t,e){if(!e.recoverable){var n=new Error(t);throw n.hash=e,n}this.trace(t)},parse:function(t){var e=this,n=[0],r=[null],o=[],i=this.table,s="",a=0,u=0,l=0,c=2,p=1,d=o.slice.call(arguments,1),h=Object.create(this.lexer),f={yy:{}};for(var g in this.yy)Object.prototype.hasOwnProperty.call(this.yy,g)&&(f.yy[g]=this.yy[g]);h.setInput(t,f.yy),f.yy.lexer=h,f.yy.parser=this,void 0===h.yylloc&&(h.yylloc={});var m=h.yylloc;o.push(m);var y=h.options&&h.options.ranges;"function"==typeof f.yy.parseError?this.parseError=f.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var v,b,C,E,A,I,T,S,w,_=function(){var t;return"number"!=typeof(t=h.lex()||p)&&(t=e.symbols_[t]||t),t},N={};;){if(C=n[n.length-1],this.defaultActions[C]?E=this.defaultActions[C]:(null==v&&(v=_()),E=i[C]&&i[C][v]),void 0===E||!E.length||!E[0]){var D="";for(I in w=[],i[C])this.terminals_[I]&&I>c&&w.push("'"+this.terminals_[I]+"'");D=h.showPosition?"Parse error on line "+(a+1)+":\n"+h.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[v]||v)+"'":"Parse error on line "+(a+1)+": Unexpected "+(v==p?"end of input":"'"+(this.terminals_[v]||v)+"'"),this.parseError(D,{text:h.match,token:this.terminals_[v]||v,line:h.yylineno,loc:m,expected:w})}if(E[0]instanceof Array&&E.length>1)throw new Error("Parse Error: multiple actions possible at state: "+C+", token: "+v);switch(E[0]){case 1:n.push(v),r.push(h.yytext),o.push(h.yylloc),n.push(E[1]),v=null,b?(v=b,b=null):(u=h.yyleng,s=h.yytext,a=h.yylineno,m=h.yylloc,l>0&&l--);break;case 2:if(T=this.productions_[E[1]][1],N.$=r[r.length-T],N._$={first_line:o[o.length-(T||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(T||1)].first_column,last_column:o[o.length-1].last_column},y&&(N._$.range=[o[o.length-(T||1)].range[0],o[o.length-1].range[1]]),void 0!==(A=this.performAction.apply(N,[s,u,a,f.yy,E[1],r,o].concat(d))))return A;T&&(n=n.slice(0,-1*T*2),r=r.slice(0,-1*T),o=o.slice(0,-1*T)),n.push(this.productions_[E[1]][0]),r.push(N.$),o.push(N._$),S=i[n[n.length-2]][n[n.length-1]],n.push(S);break;case 3:return!0}}return!0}},Helper={getUnquotedSubfieldIdentifierName:function(t){return t?"`"===t.charAt(0)&&"`"===t.charAt(t.length-1)?t.substr(1,t.length-2).split("`.`").join("."):"{"===t.charAt(0)&&"}"===t.charAt(t.length-1)?t.substr(1,t.length-2):t:""},getUnquotedIdentifierName:function(t){return t?"`"===t.charAt(0)&&"`"===t.charAt(t.length-1)||"{"===t.charAt(0)&&"}"===t.charAt(t.length-1)?t.substr(1,t.length-2):t:""},parseDate:function(t){var e,n,r,o,i=new Date;if(1,2,3,!(o=(8===t.length?/^([\d]{4})([\d]{2})([\d]{2})$/:/^([\d]{4})[- \/]([\d]{2})[- \/]([\d]{2})$/).exec(t)))throw new Error("Failed to parse date!");return e=~~o[1],n=~~o[2],r=~~o[3],i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),i.setFullYear(e),i.setMonth(n-1),i.setDate(r),i}},lexer={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var o=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[o[0],o[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,r,o;if(this.options.backtrack_lexer&&(o={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(o.yylloc.range=this.yylloc.range.slice(0))),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var i in o)this[i]=o[i];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),i=0;i<o.length;i++)if((n=this._input.match(this.rules[o[i]]))&&(!e||n[0].length>e[0].length)){if(e=n,r=i,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,o[i])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,o[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return(t=this.conditionStack.length-1-Math.abs(t||0))>=0?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,n,r){switch(n){case 0:break;case 1:case 2:return 23;case 3:case 4:return 24;case 5:case 6:return 25;case 7:case 8:return 26;case 9:return 27;case 10:case 11:return 31;case 12:case 13:case 14:case 15:return 32;case 16:return 8;case 17:return 9;case 18:return 7;case 19:return 6;case 20:return 29;case 21:return 30;case 22:return 19;case 23:return 6;case 24:return 7;case 25:return 15;case 26:return 16;case 27:return 17;case 28:return 18;case 29:return 10;case 30:return 11;case 31:return 22;case 32:return 12;case 33:return 13;case 34:return 14;case 35:return 20;case 36:return 21;case 37:return 22;case 38:return 34;case 39:return 5;case 40:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:[0-9]+(\.[0-9]+)?\b)/,/^(?:\.[0-9]+\b)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:"([\d]{4}[\/-][\d]{2}[\/-][\d]{2})")/,/^(?:'([\d]{4}[\/-][\d]{2}[\/-][\d]{2})')/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:null\b)/,/^(?:[\p{L}_\$][\p{L}0-9_]*\.[\p{L}_\$âããâ¤×³â][\p{L}0-9_âããâ¤×³â]*)/,/^(?:`[^`.]{1,}`\.`[^`.]{1,}`)/,/^(?:[\p{L}_\$][\p{L}0-9_âããâ¤×³â]*)/,/^(?:`[^`.]{1,}`)/,/^(?:\{[\p{L}_\$][\p{L}\$0-9_âããâ¤×³â]*\})/,/^(?:\{[\p{L}_\$][\p{L}0-9_ ]*(\.[\p{L}_\$][\p{L}0-9_ \$âããâ¤×³â]*)?\})/,/^(?:\*)/,/^(?:\/)/,/^(?:-)/,/^(?:\+)/,/^(?:\()/,/^(?:\))/,/^(?:%)/,/^(?:\+)/,/^(?:-)/,/^(?:<=)/,/^(?:<)/,/^(?:>=)/,/^(?:>)/,/^(?:==)/,/^(?:!=)/,/^(?:!)/,/^(?:~=)/,/^(?:=~)/,/^(?:~)/,/^(?:&&)/,/^(?:\|\|)/,/^(?:!)/,/^(?:,)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40],inclusive:!0}}};return parser.lexer=lexer,parser}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(t,e,n){"use strict";var r;void 0===(r=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.supportsNativeUnicodeRegex=function(){if(null===this.nativeUnicodeSupport)try{var t=new RegExp("^\\p{L}$","u");this.nativeUnicodeSupport="/^\\p{L}$/u"===t.toString()}catch(t){this.nativeUnicodeSupport=!1}return this.nativeUnicodeSupport},t.upgradeRegex=function(t){if(!t)return t;var e=t.source;if(-1===e.indexOf("\\p{L}"))return t;var n=[t.global?"g":"",t.ignoreCase?"i":"",t.multiline?"m":""].join("");return this.supportsNativeUnicodeRegex()?new RegExp(e,n+"u"):new RegExp(e.replace(/\[([^\]]+)?\\p\{L\}([^\]]+)?\]/g,"[$1"+this.unicodePunctuation+"$2]").replace(/\\p\{L\}/g,"["+this.unicodePunctuation+"]"),n)},t.nativeUnicodeSupport=null,t.unicodePunctuation="A-Za-z\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B4\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0AF9\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58-\\u0C5A\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D5F-\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F5\\u13F8-\\u13FD\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16F1-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2183\\u2184\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005\\u3006\\u3031-\\u3035\\u303B\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FD5\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6E5\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA7AD\\uA7B0-\\uA7B7\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA8FD\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB65\\uAB70-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC",t}();e.RegexUtils=n}.apply(e,[n,e]))||(t.exports=r)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(37),n(74)],void 0===(o=function(t,e,n,r){Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e){var r=t.call(this,e)||this;return r.type=n.EInvoiceItemType.PRODUCT,r}return s(e,t),e.prototype.getQuantityFormula=function(){return this.quantityFormula},e.prototype.getComputedUnitPrice=function(){return this.getComputedValue()},e.prototype.setQuantityFormula=function(t){return this.quantityFormula=t,this},e.prototype.getComputedQuantity=function(){return this.computedQuantity},e.prototype.setComputedQuantity=function(t){var e=Number(t)||0;return e!==this.computedQuantity&&(this.computedQuantity=e,this.invoice.trigger("compute")),this},e.prototype.incrementSubtotal=function(t){var e=t;return e+=Math.max(this.computedQuantity,0)*this.computedValue},e}(r.InvoiceRow);e.InvoiceRowStaticProduct=o}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(37),n(74)],void 0===(o=function(t,e,n,r){Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e){var n=t.call(this,e)||this;return console.error(new Error("InvoiceRowDynamicShopProduct: Shop field not implemented!")),n}return s(e,t),e.prototype.isRemovable=function(){return!0},e.prototype.getChoice=function(){return this.choice},e.prototype.serialize=function(){var t=this.productField.getOrderedQuantity(this.choice);return{type:this.getItemType(),name:this.getItemName()+(null===this.choice?"":" ("+this.choice+")"),choice:this.choice,valueFormula:String(this.productField.getUnitPrice()),valueType:n.EInvoiceItemValueType.FIXED,quantityFormula:t?String(t):null}},e.prototype.getQuantityFormula=function(){return String(this.productField.getOrderedQuantity(this.choice))},e.prototype.setQuantityFormula=function(t){return this},e.prototype.getComputedQuantity=function(){return this.productField.getOrderedQuantity(this.choice)},e.prototype.setComputedQuantity=function(t){return this},e.prototype.incrementSubtotal=function(t){var e=t;return e+=Math.max(this.productField.getOrderedQuantity(this.choice),0)*this.productField.getUnitPrice()},e.prototype.setComputedValue=function(t){return this},e.prototype.getComputedValue=function(){return Math.max(0,this.productField.getUnitPrice())},e.prototype.getComputedUnitPrice=function(){return this.productField.getUnitPrice()},e.prototype.getItemName=function(){return this.productField.getName()+" (#"+String(this.productField.getId())+")"},e.prototype.getValueType=function(){return n.EInvoiceItemValueType.FIXED},e.prototype.getProductControlId=function(){return this.productField.getShop().getId()},e.prototype.getShopItemId=function(){return this.productField.getId()},e.prototype.getProductPictureUrl=function(){return this.productField.getPictureURL()},e.prototype.getProductUnitType=function(){return this.productField.getUnitType()},e}(r.InvoiceRow);e.InvoiceRowDynamicShopProduct=o}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(37),n(74)],void 0===(o=function(t,e,n,r){Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e){var n=t.call(this,e)||this;return console.error(new Error("InvoiceRowDynamicCalendarEvent: Calendar field not implemented!")),n}return s(e,t),e.prototype.isRemovable=function(){return!0},e.prototype.serialize=function(){var t=this.calendarField.getValueOfCalendarEvent(this.calendarEvent);return{type:this.getItemType(),name:this.calendarField.getFormattedCalendarEventName(this.calendarEvent),choice:this.getChoice(),valueFormula:String(this.calendarField.getUnitTypeValue()),valueType:n.EInvoiceItemValueType.FIXED,quantityFormula:t?String(t):null}},e.prototype.getComputedUnitPrice=function(){return this.calendarField.getUnitTypeValue()},e.prototype.getQuantityFormula=function(){return String(this.calendarField.getValue())},e.prototype.setQuantityFormula=function(t){return this},e.prototype.getComputedQuantity=function(){return this.calendarField.getValueOfCalendarEvent(this.calendarEvent)},e.prototype.setComputedQuantity=function(t){return this},e.prototype.incrementSubtotal=function(t){var e=t;return e+=Math.max(this.calendarField.getValueOfCalendarEvent(this.calendarEvent),0)*this.calendarField.getUnitTypeValue()},e.prototype.setComputedValue=function(t){return this},e.prototype.getComputedValue=function(){return Math.max(0,this.calendarField.getUnitTypeValue())},e.prototype.getItemName=function(){return this.calendarField.getFormattedCalendarEventName(this.calendarEvent)},e.prototype.getValueType=function(){return n.EInvoiceItemValueType.FIXED},e.prototype.getProductControlId=function(){return this.calendarField.getId()},e.prototype.getProductPictureURL=function(){return"/img/shopping-cart-calendar-product.png"},e.prototype.getProductUnitType=function(){return"hour"},e.prototype.getShopItemId=function(){return String(this.calendarEvent.internalId)},e}(r.InvoiceRow);e.InvoiceRowDynamicCalendarEvent=o}.apply(e,r))||(t.exports=o)},,,,,,,,function(t,e,n){"use strict";e.byteLength=function(t){var e=l(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=l(t),s=r[0],a=r[1],u=new i(function(t,e,n){return 3*(e+n)/4-n}(0,s,a)),c=0,p=a>0?s-4:s;for(n=0;n<p;n+=4)e=o[t.charCodeAt(n)]<<18|o[t.charCodeAt(n+1)]<<12|o[t.charCodeAt(n+2)]<<6|o[t.charCodeAt(n+3)],u[c++]=e>>16&255,u[c++]=e>>8&255,u[c++]=255&e;2===a&&(e=o[t.charCodeAt(n)]<<2|o[t.charCodeAt(n+1)]>>4,u[c++]=255&e);1===a&&(e=o[t.charCodeAt(n)]<<10|o[t.charCodeAt(n+1)]<<4|o[t.charCodeAt(n+2)]>>2,u[c++]=e>>8&255,u[c++]=255&e);return u},e.fromByteArray=function(t){for(var e,n=t.length,o=n%3,i=[],s=0,a=n-o;s<a;s+=16383)i.push(c(t,s,s+16383>a?a:s+16383));1===o?(e=t[n-1],i.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],i.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return i.join("")};for(var r=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)r[a]=s[a],o[s.charCodeAt(a)]=a;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,n){for(var o,i,s=[],a=e;a<n;a+=3)o=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(r[(i=o)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return s.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,o){var i,s,a=8*o-r-1,u=(1<<a)-1,l=u>>1,c=-7,p=n?o-1:0,d=n?-1:1,h=t[e+p];for(p+=d,i=h&(1<<-c)-1,h>>=-c,c+=a;c>0;i=256*i+t[e+p],p+=d,c-=8);for(s=i&(1<<-c)-1,i>>=-c,c+=r;c>0;s=256*s+t[e+p],p+=d,c-=8);if(0===i)i=1-l;else{if(i===u)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,r),i-=l}return(h?-1:1)*s*Math.pow(2,i-r)},e.write=function(t,e,n,r,o,i){var s,a,u,l=8*i-o-1,c=(1<<l)-1,p=c>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,f=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+p>=1?d/u:d*Math.pow(2,1-p))*u>=2&&(s++,u/=2),s+p>=c?(a=0,s=c):s+p>=1?(a=(e*u-1)*Math.pow(2,o),s+=p):(a=e*Math.pow(2,p-1)*Math.pow(2,o),s=0));o>=8;t[n+h]=255&a,h+=f,a/=256,o-=8);for(s=s<<o|a,l+=o;l>0;t[n+h]=255&s,h+=f,s/=256,l-=8);t[n+h-f]|=128*g}},,,function(t,e,n){"use strict";var r,o;r=[n,e,n(1)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.address=t,this.root=document.createElement("div"),this.root.className="input toolbar"}return t.prototype.getRoot=function(){return this.root},t.prototype.update=function(){for(var t=this,e=this.address.getProperty("address.showStreetAddress1"),r=this.address.getProperty("address.showStreetAddress2"),o=this.address.getProperty("address.showCity"),i=this.address.getProperty("address.showRegion"),s=this.address.getProperty("address.showZipCode"),a=this.address.getProperty("address.showCountry");this.root.firstChild;)this.root.removeChild(this.root.firstChild);if(!(e&&r&&o&&i&&s&&a)){var u,l=[];e||((u=document.createElement("a")).onclick=function(){t.address.setProperty("address.showStreetAddress1",!0),t.address.onFieldsVisibilityChanged(!0)},u.href="javascript:",u.textContent="Address line 1",l.push(u)),r||((u=document.createElement("a")).onclick=function(){t.address.setProperty("address.showStreetAddress2",!0),t.address.onFieldsVisibilityChanged(!0)},u.href="javascript:",u.textContent="Address line 2",l.push(u)),o||((u=document.createElement("a")).onclick=function(){t.address.setProperty("address.showCity",!0),t.address.onFieldsVisibilityChanged(!0)},u.href="javascript:",u.textContent=n.I18n.translateApplicationText("City","control-defaults.address"),l.push(u)),i||((u=document.createElement("a")).onclick=function(){t.address.setProperty("address.showRegion",!0),t.address.onFieldsVisibilityChanged(!0)},u.href="javascript:",u.textContent=n.I18n.translateApplicationText("Region","control-defaults.address"),l.push(u)),s||((u=document.createElement("a")).onclick=function(){t.address.setProperty("address.showZipCode",!0),t.address.onFieldsVisibilityChanged(!0)},u.href="javascript:",u.textContent=n.I18n.translateApplicationText("Zip code","control-defaults.address"),l.push(u)),a||((u=document.createElement("a")).onclick=function(){t.address.setProperty("address.showCountry",!0),t.address.onFieldsVisibilityChanged(!0)},u.href="javascript:",u.textContent=n.I18n.translateApplicationText("Country","control-defaults.address"),l.push(u)),this.root.appendChild(document.createTextNode(n.I18n.translateApplicationText("Add:","control-defaults.address")+" "));for(var c=0,p=l.length;c<p;c++)this.root.appendChild(l[c]),c<p-1&&this.root.appendChild(document.createTextNode(c===p-2?" "+n.I18n.translateApplicationText("or","control-defaults.address")+" ":", "))}},t}();e.AddressToolbar=r}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(1)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.name=t,this.root=document.createElement("div"),this.root.className="input toolbar"}return t.prototype.getRoot=function(){return this.root},t.prototype.update=function(){for(var t=this,e=this.name.getProperty("nameField.showInitials"),r=this.name.getProperty("nameField.showFirstName"),o=this.name.getProperty("nameField.showMiddleName"),i=this.name.getProperty("nameField.showLastName"),s=this.name.getProperty("nameField.showTitle");this.root.firstChild;)this.root.removeChild(this.root.firstChild);if(!(e&&r&&i&&o&&s)){var a,u=[];s||((a=document.createElement("a")).onclick=function(){t.name.setProperty("nameField.showTitle",!0),t.name.onFieldsVisibilityChanged(!0)},a.href="javascript:",a.textContent=n.I18n.translateApplicationText("Title","control-defaults.name"),u.push(a)),r||((a=document.createElement("a")).onclick=function(){t.name.setProperty("nameField.showFirstName",!0),t.name.onFieldsVisibilityChanged(!0)},a.href="javascript:",a.textContent=n.I18n.translateApplicationText("First name","control-defaults.name"),u.push(a)),e||((a=document.createElement("a")).onclick=function(){t.name.setProperty("nameField.showInitials",!0),t.name.onFieldsVisibilityChanged(!0)},a.href="javascript:",a.textContent=n.I18n.translateApplicationText("Initials","control-defaults.name"),u.push(a)),o||((a=document.createElement("a")).onclick=function(){t.name.setProperty("nameField.showMiddleName",!0),t.name.onFieldsVisibilityChanged(!0)},a.href="javascript:",a.textContent=n.I18n.translateApplicationText("Middle name","control-defaults.name"),u.push(a)),i||((a=document.createElement("a")).onclick=function(){t.name.setProperty("nameField.showLastName",!0),t.name.onFieldsVisibilityChanged(!0)},a.href="javascript:",a.textContent=n.I18n.translateApplicationText("Last name","control-defaults.name"),u.push(a)),this.root.appendChild(document.createTextNode(n.I18n.translateApplicationText("Add:","control-defaults.name")+" "));for(var l=0,c=u.length;l<c;l++)this.root.appendChild(u[l]),l<c-1&&this.root.appendChild(document.createTextNode(l===c-2?" "+n.I18n.translateApplicationText("or","control-defaults.name")+" ":", "))}},t}();e.NameToolbar=r}.apply(e,r))||(t.exports=o)},,function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(56),n(4)],void 0===(o=function(t,e,n,r){Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e){var n=t.call(this,e,void 0,void 0)||this;return n.addClass("row"),n}return s(e,t),e.prototype.getTypeId=function(){return r.NodeTypes.ROW},e.prototype.getNodeName=function(){return"Row"},e.prototype.performTranslation=function(){},e.prototype.hasOwnThemeProperties=function(){return!1},e.prototype.supportsLabelInsideRendering=function(){return!1},e}(n.Container);e.Row=o}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(56),n(4),n(9)],void 0===(o=function(t,e,n,r,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(n,r,o){var i=t.call(this,n,r||e.getDefaultProperties(n),o)||this;return i.addClass("row-container"),i}return s(e,t),e.prototype.getTypeId=function(){return r.NodeTypes.ROW_CONTAINER},e.prototype.getNodeName=function(){return"Container"},e.getDefaultProperties=function(e){return t.addSizeProperties.call(this,{})},e.prototype.makeChildrenFitContent=function(t){for(var e=this.getChildren(),n=0,o=e.length;n<o;n++)e[n].getTypeId()===r.NodeTypes.ROW&&e[n].makeChildrenFitContent(t)},e.prototype.getResizeCapabilities=function(){return o.InputResizeCapabilities.HORIZONTAL},e.prototype.supportsLabelInsideRendering=function(){return!1},e}(n.Container);e.RowContainer=i}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(9),n(4)],void 0===(o=function(t,e,n,r){Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(n,r,o){var i=t.call(this,n,r||e.getDefaultProperties(n),o)||this;return i.addClass("spacer"),i}return s(e,t),e.prototype.getFieldsLayout=function(){return null},e.prototype.getNodeName=function(){return"Spacer"},e.prototype.getTypeId=function(){return r.NodeTypes.SPACER},e.prototype.getValue=function(){},e.prototype.setValue=function(t){return this},e.prototype.hasLabel=function(){return!1},e.prototype.hasValue=function(){return!1},e.getDefaultProperties=function(t){return{size:{width:0}}},e.prototype.getMinWidth=function(){return 0},e.prototype.getResizeCapabilities=function(){return n.InputResizeCapabilities.NONE},e.prototype.isSelectable=function(){return!1},e.prototype.performTranslation=function(){},e.prototype.supportsLabelInsideRendering=function(){return!1},e}(n.Input);e.Spacer=o}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(9),n(248),n(165),n(4),n(85),n(29),n(6),n(1),n(120),n(49),n(10),n(13),n(77)],void 0===(o=function(t,e,n,r,o,i,a,u,l,c,p,d,h,f,g){Object.defineProperty(e,"__esModule",{value:!0});var m=function(t){function e(n,i,s){var u=t.call(this,n,i||e.getDefaultProperties(n),s)||this;return u.addClass("date"),u.dateAndPickerWrapper=document.createElement("div"),u.input=new o.DateInput,u.input.getDayGroup().setPlaceholder(u.getProperty("labelDD")||"DD"),u.input.getMonthGroup().setPlaceholder(u.getProperty("labelMM")||"MM"),u.input.getYearGroup().setPlaceholder(u.getProperty("labelYYYY")||"YYYY"),u.datePicker=new r.NativeDatePicker(u.input.getInput()),u.dateAndPickerWrapper.appendChild(u.input.getRoot()),u.dateAndPickerWrapper.appendChild(u.datePicker.getRoot()),u.dateAndPickerWrapper.className="field",u.onValidationFormatChanged(),u.onDateConstraintsChanged(),u.datePicker.on("change",(function(t,e,n){u.onDatePickerChanged(t,e,n)})),u.input.on("picker",(function(){u.datePicker.trigger("open")})),u.datePicker.on("close",(function(t){t!==a.PickerCloseEffect.CANCEL&&u.input.focus()})),!n.isEditMode()&&null===d.EditSubmissionManager.getSubmissionId()&&u.properties.defaultValue&&u.setValue(u.properties.defaultValue),u}return s(e,t),e.prototype.getFieldsLayout=function(){return[{domNode:this.dateAndPickerWrapper,span:n.InputSpan.FULL,row:0}]},e.prototype.getNodeName=function(){return"Date"},e.prototype.getTypeId=function(){return i.NodeTypes.DATE},e.prototype.getValue=function(){return this.input.getValue()||""},e.prototype.setValue=function(t){var n;if(t instanceof window.Date)this.input.setValue(t.getDate(),t.getMonth()+1,t.getFullYear()),null!==this.input.getValue()&&this.datePicker.trigger("set-date",this.input.getYear(),this.input.getMonth(),this.input.getDay());else if(t&&"string"==typeof t){n=/^([\d]{2})\/([\d]{2})\/([\d]{4})$/.exec(t);var r=this.getProperty("validation.format");switch(!0){case!!n&&"date.ddmmyyyy"===r:this.input.setValue(parseInt(n[1]),parseInt(n[2]),parseInt(n[3]));break;case!!n&&"date.mmddyyyy"===r:this.input.setValue(parseInt(n[2]),parseInt(n[1]),parseInt(n[3]));break;default:var o=e.parseDateConstraint(t,!0);o?this.input.setValue(o.day,o.month,o.year):this.input.setValue(null,null,null)}null!==this.input.getValue()&&this.datePicker.trigger("set-date",this.input.getYear(),this.input.getMonth(),this.input.getDay())}else this.input.setValue(null,null,null);return this},e.prototype.hasLabel=function(){return!0},e.prototype.hasValue=function(){return!0},e.getDefaultProperties=function(e){var n=c.I18n.translateApplicationText("Date","control-defaults");return t.addLabelProperties.call(this,t.addSizeProperties.call(this,{name:"Q",visibility:"",formula:"",defaultValue:"",labelDD:c.I18n.translateApplicationText("DD","system.date-format.DD"),labelMM:c.I18n.translateApplicationText("MM","system.date-format.MM"),labelYYYY:c.I18n.translateApplicationText("YYYY","system.date-format.YYYY"),validation:{format:c.I18n.translateApplicationText("date.mmddyyyy","system.date-format"),required:!1,customErrorMessage:"",minValue:"",maxValue:"",unique:!1},input:{color:e.getThemeValues().getProperty("input.color").inherit(),backgroundColor:e.getThemeValues().getProperty("input.backgroundColor").inherit(),borderColor:e.getThemeValues().getProperty("input.borderColor").inherit(),borderRadius:e.getThemeValues().getProperty("input.borderRadius").inherit(),borderStyle:e.getThemeValues().getProperty("input.borderStyle").inherit(),borderWidth:e.getThemeValues().getProperty("input.borderWidth").inherit(),font:{family:e.getThemeValues().getProperty("input.font.family").inherit(),size:e.getThemeValues().getProperty("input.font.size").inherit()}}}),n,e)},e.prototype.getTranslations=function(){var t=[];this.properties.label.text&&t.push({original:this.properties.label.text}),t.push({original:this.getProperty("labelMM")||c.I18n.translateApplicationText("MM","system.date-format.MM"),context:"date-control"}),t.push({original:this.getProperty("labelDD")||c.I18n.translateApplicationText("DD","system.date-format.DD"),context:"date-control"}),t.push({original:this.getProperty("labelYYYY")||c.I18n.translateApplicationText("YYYY","system.date-format.YYYY"),context:"date-control"});for(var e=0,n=p.DatePicker.FULL_MONTH_NAMES.length;e<n;e++)t.push({original:p.DatePicker.FULL_MONTH_NAMES[e],context:"date-picker"});for(e=0,n=p.DatePicker.SHORT_MONTH_NAMES.length;e<n;e++)t.push({original:p.DatePicker.SHORT_MONTH_NAMES[e],context:"date-picker"});for(e=0,n=p.DatePicker.WEEK_DAY_SHORT_NAMES.length;e<n;e++)t.push({original:p.DatePicker.WEEK_DAY_SHORT_NAMES[e],context:"date-picker"});if(this.hasProperty("validation.customErrorMessage")){var r=this.getProperty("validation.customErrorMessage");r&&t.push({original:r,context:"form-fields-errors"})}return t},e.prototype.onDatePickerChanged=function(t,e,n){var r=String(t||"0000"),o=String(e<10?"0"+e:e),i=String(n<10?"0"+n:n);this.input.setValue(parseInt(i),parseInt(o),parseInt(r)),this.input.trigger("input"),this.datePicker.isNative()||this.input.focus()},e.prototype.onValidationFormatChanged=function(){var t=this.getProperty("validation.format");switch(this.getRoot().setAttribute("data-validation-format",String(t||"")),t){case"date.ddmmyyyy":this.input.setFormat(o.DateInputFormat.DDMMYYYY);break;case"date.mmddyyyy":default:this.input.setFormat(o.DateInputFormat.MMDDYYYY)}},e.prototype.onDateConstraintsChanged=function(){var t,n,r=this.getProperty("validation.minValue"),o=this.getProperty("validation.maxValue");t=e.parseDateConstraint(r,!0),n=e.parseDateConstraint(o,!1),this.input.setMinDate(t).setMaxDate(n),this.datePicker.setMinDate(t).setMaxDate(n)},e.parseDateConstraint=function(t,e){if(!t)return null;if(!(t=l.Strings.trim(t).toLowerCase()))return null;var n,r=u.DateUtils.now();switch(t){case"today":case"now":return{day:r.getDate(),month:r.getMonth()+1,year:r.getFullYear()};case"tomorrow":return r.setDate(r.getDate()+1),{day:r.getDate(),month:r.getMonth()+1,year:r.getFullYear()};case"overmorrow":return r.setDate(r.getDate()+2),{day:r.getDate(),month:r.getMonth()+1,year:r.getFullYear()};case"yesterday":return r.setDate(r.getDate()-1),{day:r.getDate(),month:r.getMonth()+1,year:r.getFullYear()};default:switch(!0){case!!(n=/^([\d]{2})\/([\d]{2})\/([\d]{4})$/.exec(t)):var o=parseInt(n[1]),i=parseInt(n[2]),s=parseInt(n[3]);return u.DateUtils.isValidDate(o,i,s)?{day:o,month:i,year:s}:null;case!!(n=/^current (day|week|month|year)$/i.exec(t)):switch(n[1]){case"day":return{day:r.getDate(),month:r.getMonth()+1,year:r.getFullYear()};case"month":return e||(r.setDate(1),r.setMonth(r.getMonth()+1),r.setDate(r.getDate()-1)),{day:1,month:r.getMonth()+1,year:r.getFullYear()};case"year":return e?{day:1,month:1,year:r.getFullYear()}:{day:31,month:12,year:r.getFullYear()};case"week":if(e){for(;1!==r.getDay();)r.setDate(r.getDate()-1);return{day:r.getDate(),month:r.getMonth()+1,year:r.getFullYear()}}for(;0!==r.getDay();)r.setDate(r.getDate()+1);return{day:r.getDate(),month:r.getMonth()+1,year:r.getFullYear()}}break;case!!(n=/^([-+]( )?)?([\d]+([dwmy])([\s]+)?)+$/i.exec(t)):var a="+";for((n=/^[-|+]/.exec(t))&&(a=n[0],t=t.substr(1));n=/([ ]+)?([\d]+)([ ]+)?([dwmy])([ ]+)?/i.exec(t);){var c=parseInt(n[2]),p=n[4].toLowerCase();if(c)switch(p){case"d":"+"===a?r.setDate(r.getDate()+c):r.setDate(r.getDate()-c);break;case"w":"+"===a?r.setDate(r.getDate()+7*c):r.setDate(r.getDate()-7*c);break;case"m":"+"===a?r.setMonth(r.getMonth()+c):r.setMonth(r.getMonth()-c);break;case"y":"+"===a?r.setFullYear(r.getFullYear()+c):r.setFullYear(r.getFullYear()-c)}t=t.substr(n[0].length)}return{day:r.getDate(),month:r.getMonth()+1,year:r.getFullYear()};default:return null}}return null},e.prototype.getRenderedCSS=function(){var t=h.cast(this.properties.label.color),e=h.cast(this.properties.label.font.family),n=h.cast(this.properties.label.font.size),r=h.cast(this.properties.label.font.bold)?"bold":"normal",o=h.cast(this.properties.label.font.italic)?"italic":"normal",i=h.cast(this.properties.label.font.underline)?"underline":"none",s=h.cast(this.properties.label.font.align),a=h.cast(this.properties.input.color),u=h.cast(this.properties.input.backgroundColor),l=h.cast(this.properties.input.borderColor),c=h.cast(this.properties.input.borderWidth),p=2*(parseInt(c)||0),d=h.cast(this.properties.input.borderRadius),f=h.cast(this.properties.input.borderStyle),g=h.cast(this.properties.input.font.family),m=h.cast(this.properties.input.font.size),y=this.document.getProperty("theme.selection.borderColor"),v=this.document.getProperty("theme.selection.backgroundColor");return"\n            > label {\n                color: "+t+";\n                font-size: "+n+'px;\n                font-family: "'+e+'";\n                font-weight: '+r+";\n                font-style: "+o+";\n                text-decoration: "+i+";\n                text-align: "+s+";\n            }\n            \n            .field {\n                color: "+a+";\n                background-color: "+u+";\n                border: "+c+" "+f+" "+l+";\n                border-radius: "+d+";\n                &:hover {\n                    border-color: "+y+";\n                }\n                &:focus {\n                    border-color: "+y+";\n                    background-color: "+v+";                    \n                }\n                &:focus-within {\n                    border-color: "+y+";\n                    background-color: "+v+";                    \n                }\n                [data-role=clear] {\n                    bottom: "+p+"px;\n                }\n            }\n\n            .field [data-role=date-input],\n            .field [data-role=time-input] {\n                font-size: "+m+'px;\n                font-family: "'+g+'";\n            }\n            \n        '},e.prototype.listenToUserInput=function(t){var e=this;this.input.on("input",(function(){t.updateValue(e),null!==e.input.getValue()&&e.datePicker.trigger("set-date",e.input.getYear(),e.input.getMonth(),e.input.getDay())}))},e.prototype.getAllowedValidators=function(){return["date.ddmmyyyy","date.mmddyyyy"]},e.prototype.performTranslation=function(){this.labelDOMNode&&(this.labelDOMNode.textContent=c.I18n.translateViewFormText(this.getProperty("label.text"),this.getLabelI18nContext())),this.input.getDayGroup().setPlaceholder(c.I18n.translateViewFormText(this.getProperty("labelDD"),"date-control")),this.input.getMonthGroup().setPlaceholder(c.I18n.translateViewFormText(this.getProperty("labelMM"),"date-control")),this.input.getYearGroup().setPlaceholder(c.I18n.translateViewFormText(this.getProperty("labelYYYY"),"date-control"))},e.prototype.supportsLabelInsideRendering=function(){return!0},e.prototype.embedInPDFPage=function(t){t.writeHTMLElement(this.labelDOMNode);var e=t.getDocument().create(f.PDFNodeEntityType.INPUT_TEXT);t.initializeFieldDimensions(this.dateAndPickerWrapper,e),e.setBackgroundColor(h.cast(this.properties.input.backgroundColor)).setTextColor(h.cast(this.properties.input.color)).setBorderWidth(parseInt(h.cast(this.properties.input.borderWidth)||"1")).setBorderColor(h.cast(this.properties.input.borderColor)).setValue(this.input.getRoot().textContent).setFontFamily(h.cast(this.properties.input.font.family)).setMultiLine(!1).setName(this.getProperty("name")).setFontSize(h.cast(this.properties.input.font.size)).setRequired(this.isRequired()).setRepeatedIndex(this.getRepeatedIndex()),t.appendChild(e)},e.prototype.supportsDefaultValue=function(){return!0},e.prototype.getDefaultValueStrategy=function(){return new g.SingleLineTextInputDefaultValue},e}(n.Input);e.Date=m}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(3),n(120),n(85),n(41)],void 0===(o=function(t,e,n,r,o,i){Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(n){var s=t.call(this)||this;return s.initialDate="",s.anchorElement=n||null,s.rootNode=document.createElement("div"),s.rootNode.setAttribute("data-role","date-picker"),s.rootNode.innerHTML='<span class="vfb vfb-calendar"></span>',e.isSupported()?(s.dateInputNode=document.createElement("input"),s.dateInputNode.setAttribute("type","date"),s.rootNode.appendChild(s.dateInputNode),s.dateInputNode.onchange=function(){var t=String(s.dateInputNode.value||"");s.dateInputNode.value=s.initialDate;var e=/^([\d]{4})-([\d]{2})-([\d]{2})$/.exec(t);e?s.trigger("change",~~e[1],~~e[2],~~e[3]):s.trigger("change",0,0,0)},s.on("set-date",(function(t,e,n){var r,o,i,a=~~n,u=~~e,l=~~t;0===a||0===u||0===l?(r="00",o="00",i="0000"):(r=a<10?"0"+a:String(a),o=u<10?"0"+u:String(u),i=l<10?"000"+l:l<100?"00"+l:l<1e3?"0"+l:String(l)),s.initialDate=i+"-"+o+"-"+r,s.dateInputNode&&(s.dateInputNode.value=s.initialDate,s.initialDate=s.dateInputNode.value)}))):(s.softwareDatePicker=(new r.DatePicker).setInput(n||s.rootNode).setModal(!0),s.softwareDatePicker.on("input",(function(t,e,n){s.softwareDatePicker.hide(o.PickerCloseEffect.SET_VALUE),s.trigger("change",n,e,t)})),s.softwareDatePicker.on("close",(function(t){s.trigger("close",t)})),s.rootNode.onclick=function(){s.softwareDatePicker.show()},s.on("open",(function(){s.softwareDatePicker.show()})),s.on("set-date",(function(t,e,n){s.softwareDatePicker.setDate(null===n?null:parseInt(n),null===e?null:parseInt(e),null===t?null:parseInt(t))}))),""===i.Browser.meetsRequirements("* * mobile * *")&&s.rootNode.setAttribute("data-size","stretch-input"),s}return s(e,t),e.prototype.setMinDate=function(t){return this.softwareDatePicker?this.softwareDatePicker.setMinDate(t):this.dateInputNode&&(t?this.dateInputNode.setAttribute("min",e.dateConstraintToString(t)):this.dateInputNode.removeAttribute("min")),this},e.prototype.setMaxDate=function(t){return this.softwareDatePicker?this.softwareDatePicker.setMaxDate(t):this.dateInputNode&&(t?this.dateInputNode.setAttribute("max",e.dateConstraintToString(t)):this.dateInputNode.removeAttribute("max")),this},e.dateConstraintToString=function(t){var e,n,r,o=~~t.day,i=~~t.month,s=~~t.year;return 0===o||0===i||0===s?(e="00",n="00",r="0000"):(e=o<10?"0"+o:String(o),n=i<10?"0"+i:String(i),r=s<10?"000"+s:s<100?"00"+s:s<1e3?"0"+s:String(s)),r+"-"+n+"-"+e},e.prototype.getRoot=function(){return this.rootNode},e.isSupported=function(){return void 0===this.supported&&(this.supported=this.performDateInputDetection()),this.supported},e.performDateInputDetection=function(){var t=document.createElement("input");t.setAttribute("type","date");t.setAttribute("value","not-a-date");var e="not-a-date"!==t.value;return e&&""===i.Browser.meetsRequirements("* * desktop * *")&&(e=!1),e},e.prototype.isNative=function(){return!!this.dateInputNode},e}(n.EventEmitter);e.NativeDatePicker=a}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(0),n(126),n(1),n(109)],void 0===(o=function(t,e,n,r,o,i){Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var r=t.call(this,e,!0)||this;return n(r.root).addClass("add-other").removeClass("label-editable"),r.update(),r}return s(e,t),e.prototype.update=function(){var t,e,n=this,r=this.radio.getProperty("choices.allowOther");for((t=document.createElement("a")).href="javascript:",t.textContent=o.I18n.translateApplicationText("Add choice","control-defaults.choice"),t.onclick=function(){n.radio.appendOption()};this.label.firstChild;)this.label.removeChild(this.label.firstChild);r?this.label.appendChild(t):((e=document.createElement("a")).href="javascript:",e.textContent=o.I18n.translateApplicationText("Add other","control-defaults.choice"),e.onclick=function(){n.radio.appendOtherOption()},this.label.appendChild(t),this.label.appendChild(document.createTextNode(" "+o.I18n.translateApplicationText("or","control-defaults.choice")+" ")),this.label.appendChild(e));var s=document.createElement("a");s.href="javascript:",s.innerHTML="<span class='vfb vfb-open'></span>",s.title=o.I18n.translateApplicationText("Import","control-defaults.choice"),s.onclick=function(){i.EditorCommonDatasetsManager.importChoices(n.radio)},s.style.cssFloat="right",s.style.textDecoration="none",this.label.appendChild(s)},e.prototype.setRemovable=function(t){return this},e.prototype.setDragable=function(t){return this},e}(r.RadioInput);e.AddOtherOptionRadioInput=a}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(127),n(0),n(1),n(26)],void 0===(o=function(t,e,n,r,o,i){Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e,n){var s=t.call(this,e,n)||this;return s.textInput=i.DOM.document.createElement("input"),s.textInput.setAttribute("type","text"),s.input.id=e.getId()+"_other",s.root.appendChild(s.textInput),s.label.textContent=o.I18n.translateViewFormText(o.I18n.translateApplicationText("Other:","control-defaults.choice")),s.label.htmlFor=s.input.id,r(s.root).addClass("other").removeClass("label-editable"),n||(r(s.input).on("click",(function(){s.textInput.focus()})),s.textInput.oninput=function(){(!s.textInput.value||s.isChecked())&&(s.textInput.value||!s.isChecked())||r(s.getInput()).click()}),s}return s(e,t),e.prototype.getValue=function(){return this.textInput.value},e.prototype.setValue=function(t){return this.textInput.value=String(t||""),this},e.prototype.isOther=function(){return!0},e.prototype.getOtherInput=function(){return this.textInput},e}(n.CheckBoxInput);e.CheckBoxOtherInput=a}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(127),n(0),n(1),n(109),n(26)],void 0===(o=function(t,e,n,r,o,i,a){Object.defineProperty(e,"__esModule",{value:!0});var u=function(t){function e(e){var n=t.call(this,e,!0)||this;return r(n.root).addClass("add-other").removeClass("label-editable"),n.update(),n}return s(e,t),e.prototype.update=function(){var t,e,n=this,r=this.checkBox.getProperty("choices.allowOther");for((t=a.DOM.document.createElement("a")).href="javascript:",t.textContent=o.I18n.translateApplicationText("Add choice","control-defaults.choice"),t.onclick=function(){n.checkBox.appendOption()};this.label.firstChild;)this.label.removeChild(this.label.firstChild);r?this.label.appendChild(t):((e=a.DOM.document.createElement("a")).href="javascript:",e.textContent=o.I18n.translateApplicationText("Add other","control-defaults.choice"),e.onclick=function(){n.checkBox.appendOtherOption()},this.label.appendChild(t),this.label.appendChild(document.createTextNode(" "+o.I18n.translateApplicationText("or","control-defaults.choice")+" ")),this.label.appendChild(e));var s=a.DOM.document.createElement("a");s.href="javascript:",s.innerHTML="<span class='vfb vfb-open'></span>",s.title=o.I18n.translateApplicationText("Import","control-defaults.choice"),s.onclick=function(){i.EditorCommonDatasetsManager.importChoices(n.checkBox)},s.style.cssFloat="right",s.style.textDecoration="none",this.label.appendChild(s)},e.prototype.setRemovable=function(t){return this},e.prototype.setDragable=function(t){return this},e}(n.CheckBoxInput);e.AddOtherOptionCheckBoxInput=u}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(70)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.choices={},e}return s(e,t),e.prototype.getValueType=function(){return n.EInputDefaultValue.MULTIPLE_SELECTION},e.prototype.getValue=function(){var t=this,e=[];return Array.isArray(this.value)&&this.value.forEach((function(n){void 0!==t.choices[n]&&e.push(t.choices[n])})),e.length?e:void 0},e.prototype.explainValue=function(){var t=this,e=[];return Array.isArray(this.value)&&this.value.forEach((function(n){void 0!==t.choices[n]&&e.push(n)})),e.length?e.join(", "):void 0},e.prototype.addChoice=function(t,e){return this.choices[t]=e,this},e.prototype.getChoices=function(){return Object.keys(this.choices)},e.prototype.getChoiceValues=function(){var t=this;return Object.keys(this.choices).map((function(e){return t.choices[e]}))},e}(n.InputDefaultValue);e.MultipleSelectionInputDefaultValue=r}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(126),n(0),n(1)],void 0===(o=function(t,e,n,r,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.textInput=document.createElement("input"),i.textInput.setAttribute("type","text"),i.input.id=e.getId()+"_other",i.root.appendChild(i.textInput),i.label.textContent=o.I18n.translateViewFormText(o.I18n.translateApplicationText("Other:","control-defaults.choice")),i.label.htmlFor=i.input.id,r(i.root).addClass("other").removeClass("label-editable"),n||(r(i.input).on("click",(function(){i.textInput.focus()})),i.textInput.oninput=function(){(!i.textInput.value||i.isChecked())&&(i.textInput.value||!i.isChecked())||r(i.getInput()).click()}),i}return s(e,t),e.prototype.getValue=function(){return this.textInput.value},e.prototype.setValue=function(t){return this.textInput.value=String(t||""),this},e.prototype.isOther=function(){return!0},e.prototype.getOtherInput=function(){return this.textInput},e}(n.RadioInput);e.RadioOtherInput=i}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(9),n(4),n(255),n(256),n(1),n(7),n(10),n(13),n(128),n(101)],void 0===(o=function(t,e,n,r,o,i,a,u,l,c,p,d){Object.defineProperty(e,"__esModule",{value:!0});var h=function(t){function e(n,r,o){var i=t.call(this,n,r||e.getDefaultProperties(n),o)||this;return i.selected=!1,i.inputs=[],i.addClass("dropdown"),i.inputWrapper=document.createElement("div"),i.inputWrapper.className="input",i.dropdown=document.createElement("select"),i.inputWrapper.appendChild(i.dropdown),i.normalizedExpander=document.createElement("div"),i.normalizedExpander.className="expander",i.inputWrapper.appendChild(i.normalizedExpander),i.normalizedExpander.innerHTML='<span class="vfb vfb-caret-down"></span>',i.initializeEditModeEvents(),i.onChoicesChanged(),i.setFilledState(!!i.dropdown.value),i}return s(e,t),e.prototype.getFieldsLayout=function(){for(var t=1,e=[{domNode:this.inputWrapper,span:n.InputSpan.FULL,row:0}],r=0,o=this.inputs.length;r<o;r++)e.push({domNode:this.inputs[r].getRoot(),row:t,span:n.InputSpan.FULL}),t++;return this.commandsBar&&e.push({domNode:this.commandsBar.getRoot(),row:t,span:n.InputSpan.FULL}),e},e.prototype.getNodeName=function(){return"Dropdown"},e.prototype.getTypeId=function(){return r.NodeTypes.DROP_DOWN},e.prototype.getValue=function(){return this.dropdown.value},e.prototype.hasLabel=function(){return!0},e.prototype.hasValue=function(){return!0},e.prototype.setValue=function(t){return this.dropdown.value=0===t?"0":String(t||""),this},e.getDefaultProperties=function(t){var e=a.I18n.translateApplicationText("Choice","control-defaults");return this.addInputProperties(this.addLabelProperties(this.addSizeProperties({name:"Q",visibility:"",formula:"",validation:{required:!1,customErrorMessage:"",unique:!1},choices:{text:a.I18n.translateApplicationText("Choice 1\nChoice 2\nChoice 3","control-defaults"),firstChoiceIsPlaceholder:!1}}),e,t),t)},e.prototype.getTranslations=function(){var t=[];this.properties.label.text&&t.push({original:this.properties.label.text});for(var e=this.getTextChoices(),n=e.length,r=0;r<n;r++)t.push({original:e[r]});if(this.hasProperty("validation.customErrorMessage")){var o=this.getProperty("validation.customErrorMessage");o&&t.push({original:o,context:"form-fields-errors"})}return t},e.prototype.getTextChoices=function(){return void 0!==this.cachedGetTextChoicesResult?this.cachedGetTextChoicesResult:String(this.properties.choices.text||"").split(/(\r\n|\r|\n)/).map((function(t){return t.trim()})).filter((function(t){return""!==t}))},e.prototype.onChoicesChanged=function(){for(var t,e=this.getTextChoices(),n=this.properties.choices.firstChoiceIsPlaceholder;this.dropdown.options.length;)this.dropdown.remove(0);for(var r=0,o=e.length;r<o;r++)(t=document.createElement("option")).text=e[r],t.value=0===r&&n?"":e[r],this.dropdown.add(t)},e.prototype.getRenderedCSS=function(){var t=l.cast(this.properties.label.color),e=l.cast(this.properties.label.font.family),n=l.cast(this.properties.label.font.size),r=l.cast(this.properties.label.font.bold)?"bold":"normal",o=l.cast(this.properties.label.font.italic)?"italic":"normal",i=l.cast(this.properties.label.font.underline)?"underline":"none",s=l.cast(this.properties.label.font.align),a=l.cast(this.properties.input.color),u=l.cast(this.properties.input.backgroundColor),c=l.cast(this.properties.input.borderColor),p=l.cast(this.properties.input.borderWidth),d=l.cast(this.properties.input.borderRadius),h=l.cast(this.properties.input.borderStyle),f=l.cast(this.properties.input.font.family),g=l.cast(this.properties.input.font.size),m=l.cast(this.properties.input.font.bold)?"bold":"normal",y=l.cast(this.properties.input.font.italic)?"italic":"normal",v=l.cast(this.properties.input.font.underline)?"underline":"none",b=l.cast(this.properties.input.font.align),C=this.document.getProperty("theme.selection.borderColor");return"\n            > label {\n                color: "+t+";\n                font-size: "+n+'px;\n                font-family: "'+e+'";\n                font-weight: '+r+";\n                font-style: "+o+";\n                text-decoration: "+i+";\n                text-align: "+s+";\n            }\n\n            .input select {\n                color: "+a+";\n                background-color: "+u+";\n                border: "+p+" "+h+" "+c+";\n                border-radius: "+d+";\n                font-weight: "+m+";\n                font-style: "+y+";\n                text-decoration: "+v+";\n                text-align: "+b+";\n                font-size: "+g+'px;\n                font-family: "'+f+'";\n                &:hover,\n                &:focus {\n                    border-color: '+C+";\n                    & + .expander {\n                        border-color: "+C+";\n                    }\n                }\n                &:focus {\n                    background-color: "+this.document.getProperty("theme.selection.backgroundColor")+";\n                }\n            }\n            \n            .input .expander {\n                color: "+a+";\n                background-color: "+u+";\n                border-width: "+p+" "+p+" "+p+" 0;\n                border-style: "+h+";\n                border-radius: 0 "+d+" "+d+" 0;\n                border-color: "+c+";\n            }\n        "},e.prototype.onSelect=function(){if(!this.selected){this.selected=!0,t.prototype.onSelect.call(this);for(var e=this.getTextChoices(),n=0,r=e.length;n<r;n++)this.inputs.push(new o.DropdownInput(this).setIndex(n).setValue(e[n]).setDragable(this.document.isEditMode()).setRemovable(this.document.isEditMode()));this.commandsBar=new i.DropdownCommandsBar(this),this.render()}},e.prototype.onDeselect=function(){this.selected&&(this.selected=!1,t.prototype.onDeselect.call(this),this.inputs.splice(0,this.inputs.length),this.commandsBar=void 0,this.render())},e.prototype.getTextAssociatedWithLabel=function(t){if(t===this.labelDOMNode)return this.getProperty("label.text");for(var e=0,n=this.inputs.length;e<n;e++)if(this.inputs[e].getLabelDOMNode()===t)return this.inputs[e].getValue();return""},e.prototype.setLabelTextWhichIsComingFromTheUser=function(e,n){if(n===this.labelDOMNode)return t.prototype.setLabelTextWhichIsComingFromTheUser.call(this,e,n);for(var r=this.getTextChoices(),o=0,i=this.inputs.length;o<i;o++)if(this.inputs[o].getLabelDOMNode()===n){var s=p.RulesTextNormalizer.normalizeText(String(e||"").trim().replace(/[\r\n]+/g," "));return r[o]=s,this.inputs[o].setValue(s,!1),this.setProperty("choices.text",r.join("\n"),this),this.onChoicesChanged(),this}return this},e.prototype.removeOption=function(t){var e=this.getTextChoices(),n=this.inputs.indexOf(t);e.splice(n,1),this.inputs.splice(n,1),this.reindexChoices(),this.setProperty("choices.text",e.join("\n"),this),this.onChoicesChanged(),this.render()},e.prototype.reindexChoices=function(){for(var t=0,e=this.inputs.length;t<e;t++)this.inputs[t].setIndex(t)},e.prototype.appendOption=function(){var t=this.getTextChoices(),e=a.I18n.translateApplicationText("Choice %1","control-defaults.choice",0,t.length+1),n=new o.DropdownInput(this).setIndex(t.length).setRemovable(this.document.isEditMode()).setDragable(this.document.isEditMode()).setValue(e);t.push(e),this.inputs.push(n),this.setProperty("choices.text",t.join("\n")),this.onChoicesChanged(),this.render()},e.prototype.getChoiceInputs=function(){return this.inputs.slice(0)},e.prototype.moveChoiceBefore=function(t,e,n){var r;if(t!==e){for(var o=[],i=0,s=this.inputs.length;i<s;i++)this.inputs[i]===t||(this.inputs[i]===e?n?(o.push(e),o.push(t)):(o.push(t),o.push(e)):o.push(this.inputs[i]));(r=this.inputs).splice.apply(r,[0,this.inputs.length].concat(o));var a=[];for(i=0,s=this.inputs.length;i<s;i++)a.push(this.inputs[i].getValue());this.setProperty("choices.text",a.join("\n"),this),this.onChoicesChanged(),this.reindexChoices(),this.render()}},e.prototype.listenToUserInput=function(t){var e=this;this.dropdown.onchange=function(){t.updateValue(e)}},e.prototype.enumerateSubFields=function(){return this.getTextChoices()},e.prototype.getSubFieldValue=function(t){return this.dropdown.options[this.dropdown.selectedIndex].text===t},e.prototype.performTranslation=function(){this.labelDOMNode&&(this.labelDOMNode.textContent=a.I18n.translateViewFormText(this.getProperty("label.text"),this.getLabelI18nContext()));for(var t=0,e=this.getTextChoices(),n=e.length;t<n;t++)this.dropdown.options[t].textContent=a.I18n.translateViewFormText(e[t])},e.prototype.randomizeChoices=function(){if(this.cachedGetTextChoicesResult=this.getTextChoices(),this.cachedGetTextChoicesResult.length>1){if(this.getProperty("choices.firstChoiceIsPlaceholder")){var t=this.cachedGetTextChoicesResult[0],e=this.cachedGetTextChoicesResult.slice(1);this.cachedGetTextChoicesResult=[t].concat(u.Helpers.arrayShuffle(u.Helpers.arrayShuffle(e)))}else this.cachedGetTextChoicesResult=u.Helpers.arrayShuffle(u.Helpers.arrayShuffle(this.cachedGetTextChoicesResult));this.onChoicesChanged()}return this},e.prototype.initializeEditModeEvents=function(){var t=this;this.document.isEditMode()&&this.dropdown.addEventListener("mousedown",(function(e){e.preventDefault(),setTimeout((function(){t.dropdown.focus()}),10)}),!0)},e.prototype.supportsLabelInsideRendering=function(){return!0},e.prototype.embedInPDFPage=function(t){t.writeHTMLElement(this.labelDOMNode);var e=t.getDocument().create(c.PDFNodeEntityType.INPUT_DROPDOWN);t.initializeFieldDimensions(this.dropdown,e),e.setBackgroundColor(l.cast(this.properties.input.backgroundColor)).setTextColor(l.cast(this.properties.input.color)).setBorderWidth(parseInt(l.cast(this.properties.input.borderWidth)||"1")).setBorderColor(l.cast(this.properties.input.borderColor)).setFontFamily(l.cast(this.properties.input.font.family)).setName(this.getProperty("name")).setFontSize(l.cast(this.properties.input.font.size)).setRequired(this.isRequired()).setRepeatedIndex(this.getRepeatedIndex());for(var n=0,r=this.dropdown.options.length;n<r;n++)e.addOption(this.dropdown.options[n].text);this.getProperty("choices.firstChoiceIsPlaceholder")&&e.setFirstChoiceIsEmpty(!0),t.appendChild(e)},e.prototype.checkIfFieldHasInvalidSubfieldNames=function(){for(var t=(this.getProperty("choices.text")||"").split("\n"),e=0,n=t.length;e<n;e++)if(/[.\[\]`"}{]/.test(t[e]))return!0;return!1},e.prototype.supportsDefaultValue=function(){return!0},e.prototype.getDefaultValueStrategy=function(){var t=new d.SingleSelectionInputDefaultValue,e=this.getProperty("choices.firstChoiceIsPlaceholder");return this.getTextChoices().forEach((function(n,r){t.addChoice(n,0===r&&e?"":n)})),t},e}(n.Input);e.Dropdown=h}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(0),n(167),n(1)],void 0===(o=function(t,e,n,r,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.dropdown=t,this.root=document.createElement("div"),this.root.className="input label-editable",this.indexDOMNode=document.createElement("span"),this.indexDOMNode.className="index",this.root.appendChild(this.indexDOMNode),this.labelDOMNode=document.createElement("label"),this.root.appendChild(this.labelDOMNode)}return t.prototype.getRoot=function(){return this.root},t.prototype.setValue=function(t,e){return void 0===e&&(e=!0),this.value=String(t||""),e&&(this.labelDOMNode.textContent=this.value),this},t.prototype.getValue=function(){return this.value},t.prototype.setIndex=function(t){var e=this;return this.index=t,this.indexDOMNode.textContent=String(this.index+1)+". ",0===t?(this.switchLabel=this.switchLabel||document.createElement("label"),this.switchLabel.className="empty",this.switch||(this.switch=(new r.CheckboxSwitch).setId(this.dropdown.getId()+"_empty"),this.switch.on("click",(function(){e.dropdown.setProperty("choices.firstChoiceIsPlaceholder",e.switch.getValue())}))),this.switch.setValue(!!this.dropdown.getProperty("choices.firstChoiceIsPlaceholder")),this.switchLabel.textContent="",this.switchLabel.appendChild(this.switch.getRoot()),this.switchLabel.appendChild(document.createTextNode(o.I18n.translateApplicationText("Empty","control-defaults.choice"))),this.switchLabel.htmlFor=this.dropdown.getId()+"_empty",this.switchLabel.title=o.I18n.translateApplicationText("First choice has no value","control-defaults.choice"),n(this.root).addClass("has-empty"),this.root.appendChild(this.switchLabel)):(this.switchLabel&&(this.switchLabel.parentNode&&this.switchLabel.parentNode.removeChild(this.switchLabel),this.switchLabel.textContent="",this.switchLabel=void 0),this.switch&&(this.switch=void 0),n(this.root).removeClass("has-empty")),this},t.prototype.getIndex=function(){return this.index},t.prototype.getLabelDOMNode=function(){return this.labelDOMNode},t.prototype.setRemovable=function(t){var e=this;return t===!!this.trashButton||(t?(this.trashButton=document.createElement("div"),this.trashButton.className="trash",this.trashButton.innerHTML='<span class="vfb vfb-close"></span>',this.trashButton.title=o.I18n.translateApplicationText("Remove","control-defaults.choice"),this.root.appendChild(this.trashButton),n(this.root).addClass("has-trash"),this.trashButton.onclick=function(){e.dropdown.removeOption(e)}):this.trashButton&&(this.root.removeChild(this.trashButton),this.trashButton=void 0,n(this.root).removeClass("has-trash"))),this},t.prototype.setDragable=function(t){return t===!!this.dragHandle||(t?(this.dragHandle=document.createElement("div"),this.dragHandle.className="drag-handle",this.root.appendChild(this.dragHandle)):this.dragHandle&&(this.root.removeChild(this.dragHandle),this.dragHandle=void 0)),this},t}();e.DropdownInput=i}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(1),n(109)],void 0===(o=function(t,e,n,r){Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){this.dropdown=t,this.root=document.createElement("div"),this.root.className="input commands-bar",this.update()}return t.prototype.getRoot=function(){return this.root},t.prototype.update=function(){for(var t=this;this.root.firstChild;)this.root.removeChild(this.root.firstChild);var e=document.createElement("a");e.href="javascript:",e.textContent=n.I18n.translateApplicationText("Add choice","control-defaults.choice"),e.onclick=function(){t.dropdown.appendOption()},this.root.appendChild(e);var o=document.createElement("a");o.href="javascript:",o.innerHTML="<span class='vfb vfb-open'></span>",o.title=n.I18n.translateApplicationText("Import","control-defaults.choice"),o.onclick=function(){r.EditorCommonDatasetsManager.importChoices(t.dropdown)},o.style.cssFloat="right",o.style.textDecoration="none",o.style.marginRight="14px",this.root.appendChild(o)},t}();e.DropdownCommandsBar=o}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(0),n(31)],void 0===(o=function(t,e,n,r){Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.load=function(){return this.loader||(this.loader=n.Deferred((function(t){var e=window.define;window.define=function(){};var n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("src","/vendor/quill-1.3.7/quill.min.js");var o=function(t){var e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.href=r.CDN.getCDNUrl(t),document.getElementsByTagName("head")[0].appendChild(e)};n.onload=function(){var n=0;!function r(){window.Quill?(window.define=e,t.resolve(window.Quill)):++n<500?setTimeout((function(){r()}),20):(window.define=e,t.reject(new Error("Failed to load quill (timeout)")))}()},n.onerror=function(){window.define=e,t.reject(new Error("Failed to load quill 1.3.7"))},o("/vendor/quill-1.3.7/quill.snow.css"),o("/vendor/quill-1.3.7/quill.bubble.css"),document.getElementsByTagName("head")[0].appendChild(n)})))},t}();e.QuillSDK=o}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(0),n(2),n(12),n(24),n(180),n(182),n(184),n(67),n(38),n(89),n(259),n(149),n(260),n(1)],void 0===(o=function(t,e,n,r,o,i,a,u,l,c,p,d,h,f,g,m){Object.defineProperty(e,"__esModule",{value:!0});var y=function(t){function e(s){var y=t.call(this,{width:"300px",height:"66px",top:"0",left:"0",focusOnOpen:!1,modal:!1,movable:!0,style:r.DialogStyle.FLAT_COLOR})||this;return y.toolbarHeight=66,y.hidePrevented=!1,y.closeOnBlur=!1,y.preventCloseOnBlur=!1,y.component=s,y.getTitlebar().style.display="none",y.getBody().style.height="100%",n(y.getRoot()).addClass("rtt-dialog"),y.updatePosDebouncer=o.Debouncer.create((function(){y.updatePositionInSyncMode()}),200),y.execHidePrevented=o.Debouncer.create((function(){y.hidePrevented=!1}),10),y.getBody().style.padding="2px",y.getBody().appendChild(new i.Layout(i.Layout.DIRECTION_HORIZONTAL).append(y.dropdownBlockType=(new h.HTMLBlockTypeDropdown).setTooltip(m.I18n.translateApplicationText("Block type","control-defaults.rich-text")).setId(e.PROPERTY_BLOCK_TYPE).setValue("p")).append(y.dropdownFontFamily=(new a.FontFamily).setTooltip(m.I18n.translateApplicationText("Font","control-defaults.rich-text")).setId(e.PROPERTY_FONT_FAMILY).setValue("Roboto")).append(y.dropdownFontSize=(new u.FontSize).setTooltip(m.I18n.translateApplicationText("Font Size","control-defaults.rich-text")).setId(e.PROPERTY_FONT_SIZE).setValue("16")).append(new f.VerticalSeparator).append(y.buttonClearFormatting=(new p.Button).setSize(p.Button.SIZE_TINNY).setIcon("clear-formatting").setId(e.CLEAR_FORMATTING).setTooltip(m.I18n.translateApplicationText("Clear formatting","control-defaults.rich-text"))).getRoot()),y.getBody().appendChild(new i.Layout(i.LayoutDirection.HORIZONTAL).append((new l.CheckboxButton).addButton(y.buttonFontBold=(new c.TwoStateButton).setSize(p.Button.SIZE_TINNY).setIcon("bold").setTooltip(m.I18n.translateApplicationText("Bold text","control-defaults.rich-text")).addClass("Zoom").setId(e.PROPERTY_FONT_STYLE_BOLD)).addButton(y.buttonFontItalic=(new c.TwoStateButton).setSize(p.Button.SIZE_TINNY).setIcon("italic").setTooltip(m.I18n.translateApplicationText("Italic text","control-defaults.rich-text")).addClass("Zoom").setId(e.PROPERTY_FONT_STYLE_ITALIC)).addButton(y.buttonFontUnderline=(new c.TwoStateButton).setSize(p.Button.SIZE_TINNY).setIcon("underline").setTooltip(m.I18n.translateApplicationText("Underline text","control-defaults.rich-text")).addClass("Zoom").setId(e.PROPERTY_FONT_STYLE_UNDERLINE))).append(new f.VerticalSeparator).append(y.dropdownFontColor=(new d.ColorPicker).setIcon("text-color").setTooltip(m.I18n.translateApplicationText("Text color","control-defaults.rich-text")).setId(e.PROPERTY_COLOR).setValue("#000000")).append(new f.VerticalSeparator).append(y.buttonBulletsList=(new c.TwoStateButton).setSize(p.Button.SIZE_TINNY).setIcon("radio-alt").setTooltip(m.I18n.translateApplicationText("Bullets List","control-defaults.rich-text")).setId(e.FORMAT_NUMBERED_LIST).setValue(!1)).append(y.buttonOrderedList=(new c.TwoStateButton).setSize(p.Button.SIZE_TINNY).setIcon("checkbox-alt").setTooltip(m.I18n.translateApplicationText("Numbered list","control-defaults.rich-text")).setId(e.FORMAT_BULLETS_LIST).setValue(!1)).append(new f.VerticalSeparator).append(y.buttonIndentIncrease=(new p.Button).setIcon("indent-increase").setSize(p.Button.SIZE_TINNY).setTooltip(m.I18n.translateApplicationText("Increase indent","control-defaults.rich-text")).setId(e.INDENT_INCREASE)).append(y.buttonIndentDecrease=(new p.Button).setIcon("indent-decrease").setSize(p.Button.SIZE_TINNY).setTooltip(m.I18n.translateApplicationText("Decrease indent","control-defaults.rich-text")).setId(e.INDENT_DECREASE)).append(new f.VerticalSeparator).append(y.buttonInsertHorizontalLine=(new p.Button).setSize(p.Button.SIZE_TINNY).setIcon("minus").setTooltip(m.I18n.translateApplicationText("Insert Horizontal line","control-defaults.rich-text")).setId(e.INSERT_HORIZONTAL_LINE)).append(y.buttonInsertLink=(new p.Button).setSize(p.Button.SIZE_TINNY).setIcon("new-tab").setTooltip(m.I18n.translateApplicationText("Insert / Edit Link","control-defaults.rich-text")).setId(e.INSERT_LINK)).getRoot()),y.buttonFontBold.on("click",(function(){y.hidePrevented=!0,y.component.getField().setProperty("input.font.bold",y.buttonFontBold.getValue(),y.component.getField())})),y.buttonFontItalic.on("click",(function(){y.hidePrevented=!0,y.component.getField().setProperty("input.font.italic",y.buttonFontItalic.getValue(),y.component.getField())})),y.buttonFontUnderline.on("click",(function(){y.hidePrevented=!0,y.component.getField().setProperty("input.font.underline",y.buttonFontUnderline.getValue(),y.component.getField())})),y.dropdownFontColor.on("change",(function(){y.hidePrevented=!0,y.component.getField().setProperty("input.color",y.dropdownFontColor.getValue(),y.component.getField())})),y.dropdownFontSize.on("change",(function(){y.hidePrevented=!0,y.component.getField().setProperty("input.font.size",y.dropdownFontSize.getValue(),y.component.getField())})),y.dropdownFontFamily.on("change",(function(){y.hidePrevented=!0,y.component.getField().setProperty("input.font.family",y.dropdownFontFamily.getValue(),y.component.getField())})),y.dropdownBlockType.on("change",(function(){y.hidePrevented=!0,y.component.getField().setProperty("input.blockType",y.dropdownBlockType.getValue(),y.component.getField())})),y.buttonClearFormatting.on("click",(function(){var t=y.component.getEditor().getSelection(!1);t&&t.length&&(y.hidePrevented=!0,y.component.getEditor().removeFormat(t.index,t.length,"user"))})),y.buttonOrderedList.on("click",(function(){y.hidePrevented=!0,y.component.getField().setProperty("input.blockType",y.buttonOrderedList.getValue()?"ol":"p",y.component.getField())})),y.buttonBulletsList.on("click",(function(){y.hidePrevented=!0,y.component.getField().setProperty("input.blockType",y.buttonBulletsList.getValue()?"ul":"p",y.component.getField())})),y.buttonInsertHorizontalLine.on("click",(function(){var t=y.component.getEditor().getSelection();t&&y.component.getEditor().insertEmbed(t.index,"hr","null")})),y.buttonIndentIncrease.on("click",(function(){y.hidePrevented=!0;var t=y.component.getEditor().getFormat();t.indent?t.indent<=8&&y.component.getEditor().format("indent",t.indent+1,"user"):y.component.getEditor().format("indent",1,"user")})),y.buttonIndentDecrease.on("click",(function(){y.hidePrevented=!0;var t=y.component.getEditor().getFormat();t.indent&&(t.indent<=1?y.component.getEditor().format("indent",!1,"user"):y.component.getEditor().format("indent",t.indent-1,"user"))})),y.buttonInsertLink.on("click",(function(){y.preventCloseOnBlur=!0,y.insertLinkToolbar=new g.InsertLinkToolbar(y).setCloseOnBlur(y.closeOnBlur),y.hide(),setTimeout((function(){y.preventCloseOnBlur=!1}),50)})),y}return s(e,t),e.prototype.isCloseOnBlurPrevented=function(){return this.preventCloseOnBlur},e.prototype.setCloseOnBlur=function(t){return this.closeOnBlur=t,this},e.prototype.show=function(){this.hidePrevented=!1,this.insertLinkToolbar&&(this.insertLinkToolbar.close(),this.insertLinkToolbar=void 0),t.prototype.show.call(this)},e.prototype.hide=function(){this.hidePrevented?this.execHidePrevented():t.prototype.hide.call(this)},e.prototype.updatePosition=function(){this.hide(),this.updatePosDebouncer()},e.prototype.updatePositionInSyncMode=function(){var t=this.component.getEditor();if(t){var e=this.component.getRoot().getBoundingClientRect(),n=t.getSelection(!1);if(n){this.show();var r=t.getBounds(n.index);this.getRoot().style.top=e.top+r.top-20-this.toolbarHeight+"px",this.getRoot().style.left=e.left+r.left+"px"}else this.hide()}else this.hide()},e.prototype.updateState=function(t){var e=this.component.getEditor().getSelection();e&&0!==e.length?(this.buttonFontBold.setDisabled(!1),this.buttonFontItalic.setDisabled(!1),this.buttonFontUnderline.setDisabled(!1),this.dropdownFontColor.setDisabled(!1),this.dropdownFontFamily.setDisabled(!1),this.dropdownFontSize.setDisabled(!1),this.buttonInsertLink.setDisabled(!1)):(this.buttonFontBold.setDisabled(!0),this.buttonFontItalic.setDisabled(!0),this.buttonFontUnderline.setDisabled(!0),this.dropdownFontColor.setDisabled(!0),this.dropdownFontFamily.setDisabled(!0),this.dropdownFontSize.setDisabled(!0),this.buttonInsertLink.setDisabled(!0)),t&&(this.buttonFontBold.setValue(t["input.font.bold"]),this.buttonFontItalic.setValue(t["input.font.italic"]),this.buttonFontUnderline.setValue(t["input.font.underline"]),this.dropdownFontColor.setValue(t["input.color"]),this.dropdownFontFamily.setValue(t["input.font.family"]),this.dropdownFontSize.setValue(t["input.font.size"]),this.dropdownBlockType.setValue(t["input.blockType"]),this.buttonBulletsList.setValue("ul"===t["input.blockType"]),this.buttonOrderedList.setValue("ol"===t["input.blockType"]))},e.prototype.close=function(){this.insertLinkToolbar&&(this.insertLinkToolbar.close(),this.insertLinkToolbar=void 0),t.prototype.close.call(this)},e.prototype.getComponent=function(){return this.component},e.PROPERTY_FONT_FAMILY="rtt-font-family",e.PROPERTY_FONT_SIZE="rtt-font-size",e.PROPERTY_FONT_STYLE_BOLD="rtt-font-bold",e.PROPERTY_FONT_STYLE_ITALIC="rtt-font-italic",e.PROPERTY_FONT_STYLE_UNDERLINE="rtt-font-underline",e.PROPERTY_COLOR="rtt-text-color",e.PROPERTY_BLOCK_TYPE="rtt-block-type",e.CLEAR_FORMATTING="rtt-clear-formatting",e.FORMAT_NUMBERED_LIST="rtt-numbered-list",e.FORMAT_BULLETS_LIST="rtt-bullets-list",e.INSERT_HORIZONTAL_LINE="rtt-insert-hr",e.INDENT_INCREASE="rtt-indent-increase",e.INDENT_DECREASE="rtt-indent-decrease",e.INSERT_LINK="rtt-insert-link",e}(r.Dialog);e.RichTextToolbar=y}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(33),n(52)],void 0===(o=function(t,e,n,r){Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){var e=t.call(this)||this;return e.addClass("html-block-type"),e.list.setHeight(185).setWidth(150),e}return s(e,t),e.prototype.onBeforeOpen=function(){for(var t=0,n=e.BLOCK_TYPES.length;t<n;t++)e.BLOCK_TYPES[t].show&&this.list.append((new r.TextListItem).setValue(e.BLOCK_TYPES[t].node).setText(e.BLOCK_TYPES[t].name))},e.prototype.onClosed=function(){this.list.clear()},e.prototype.renderValue=function(t){var n=null;if(t)for(var r=0,o=e.BLOCK_TYPES.length;r<o;r++)if(e.BLOCK_TYPES[r].node===t){n=e.BLOCK_TYPES[r].name;break}this.valueRenderer.textContent=String(n||"")},e.BLOCK_TYPES=[{node:"p",name:"Normal",show:!0},{node:"h1",name:"Heading 1",show:!0},{node:"h2",name:"Heading 2",show:!0},{node:"h3",name:"Heading 3",show:!0},{node:"pre",name:"Code Block",show:!0},{node:"h4",name:"Heading 4",show:!1},{node:"h5",name:"Heading 5",show:!1},{node:"h6",name:"Heading 6",show:!1},{node:"ol",name:"List (Numbered)",show:!0},{node:"ul",name:"List (Bullets)",show:!0}],e}(n.Dropdown);e.HTMLBlockTypeDropdown=o}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(2),n(0),n(24),n(59),n(38),n(1)],void 0===(o=function(t,e,n,r,o,i,a,u){Object.defineProperty(e,"__esModule",{value:!0});var l=function(t){function e(e){var s=t.call(this,{width:"300px",height:"46px",top:e.getRoot().style.top,left:e.getRoot().style.left,focusOnOpen:!1,modal:!1,movable:!0,style:n.DialogStyle.FLAT_COLOR})||this;s.closeOnBlur=!1,s.getTitlebar().style.display="none",s.getBody().style.height="100%",r(s.getRoot()).addClass("rtt-dialog"),s.richTextToolbar=e,s.getBody().appendChild(new o.Layout(o.LayoutDirection.HORIZONTAL).append(s.textFieldLink=(new i.TextField).setLabel(u.I18n.translateApplicationText("Link","control-defaults.rich-text")).setWidth("200px").setLabelWidth("25px").setTooltip(u.I18n.translateApplicationText("Link address","control-defaults.rich-text")).setPlaceholder(u.I18n.translateApplicationText("https://www.google.com","control-defaults.rich-text"))).append(s.buttonApplyLink=(new a.Button).setSize(a.Button.SIZE_TINNY).setIcon("check").setTooltip(u.I18n.translateApplicationText("Apply link","control-defaults.rich-text"))).append(s.buttonRemoveLink=(new a.Button).setSize(a.Button.SIZE_TINNY).setIcon("delete").setTooltip(u.I18n.translateApplicationText("Remove link","control-defaults.rich-text"))).getRoot());var l=e.getComponent().getEditor(),c=l.getFormat();return s.textFieldLink.setValue(c.link||""),s.buttonApplyLink.on("click",(function(){s.textFieldLink.getValue()&&(l.format("link",s.textFieldLink.getValue(),"user"),s.close(),s.richTextToolbar.show())})),s.buttonRemoveLink.on("click",(function(){l.format("link",!1,"user"),s.close(),s.richTextToolbar.show()})),s.textFieldLink.focus(),r(s.getRoot()).on("focusout",(function(){s.closeOnBlur&&setTimeout((function(){var t=document.activeElement;t&&r.contains(s.getRoot(),t)||s.richTextToolbar.trigger("blur")}),10)})),s}return s(e,t),e.prototype.setCloseOnBlur=function(t){return this.closeOnBlur=t,this},e}(n.Dialog);e.InsertLinkToolbar=l}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(9),n(4),n(262),n(263),n(1),n(21),n(75),n(10),n(13),n(77)],void 0===(o=function(t,e,n,r,o,i,a,u,l,c,p,d){Object.defineProperty(e,"__esModule",{value:!0});var h=function(t){function e(n,r,s){var a=t.call(this,n,r||e.getDefaultProperties(n),s)||this;return a.addClass("phone"),a.isEnteredValue=!1,a.iLibPhoneNumber=null,a.inputWrapper=document.createElement("div"),a.inputWrapper.className="input",a.input=document.createElement("input"),a.input.setAttribute("type","text"),a.input.setAttribute("autocomplete","off"),a.inputWrapper.appendChild(a.input),a.libPhoneNumberSDK=i.LibPhoneNumber.getSDK(),a.dropdown=new o.LibPhoneNumberDropdown(a.libPhoneNumberSDK),a.inputWrapper.appendChild(a.dropdown.getRoot()),a.errorStatus=document.createElement("div"),a.errorStatus.setAttribute("data-role","error-status"),a.errorStatus.innerHTML="",a.inputWrapper.appendChild(a.errorStatus),a.libPhoneNumberSDK.then((function(t){a.iLibPhoneNumber=t,a.onSDKLoaded()})),n.isEditMode()?a.installEditModeEvents():a.initFormViewEvents(),a}return s(e,t),e.getDefaultProperties=function(e){var n=a.I18n.translateApplicationText("Phone","control-defaults");return t.addInputProperties.call(this,t.addLabelProperties.call(this,t.addSizeProperties.call(this,{name:"Q",placeholder:"",visibility:"",formula:"",validation:{required:!1,format:"phone.libphonenumber",customErrorMessage:"",unique:!1},phone:{defaultCountry:""}}),n,e),e)},e.prototype.getTranslations=function(){var t=[];if(this.properties.placeholder&&t.push({original:this.properties.placeholder}),this.properties.label.text&&t.push({original:this.properties.label.text}),this.hasProperty("validation.customErrorMessage")){var e=this.getProperty("validation.customErrorMessage");e&&t.push({original:e,context:"form-fields-errors"})}return t},e.prototype.getFieldsLayout=function(){return[{row:0,span:n.InputSpan.FULL,domNode:this.inputWrapper}]},e.prototype.getNodeName=function(){return"Phone"},e.prototype.getTypeId=function(){return r.NodeTypes.PHONE},e.prototype.getValue=function(){if(this.input.value)try{if(!this.iLibPhoneNumber)return this.input.value;var t=this.iLibPhoneNumber.parsePhoneNumber(this.input.value,this.dropdown.getValue()||void 0);if(t.isPossible()&&t.isValid())return t.formatInternational(this.dropdown.getValue()||void 0)}catch(t){}return this.input.value},e.prototype.hasLabel=function(){return!0},e.prototype.hasValue=function(){return!0},e.prototype.setValue=function(t){if(t){if(!this.iLibPhoneNumber)return this.input.value=String(t||""),this;try{var e=this.iLibPhoneNumber.parsePhoneNumber(t);return this.dropdown.setValue("001"===e.country?null:e.country),this.input.value=this.dropdown.getValue()?e.formatNational(this.dropdown.getValue()):e.formatInternational(),this}catch(t){}}return this.input.value="",this.dropdown.setValue(this.getProperty("phone.defaultCountry")||l.Geolocation.getConnectionDetails().country),this.onPlaceholderTextChanged(),this},e.prototype.onSDKLoaded=function(){this.onPlaceholderTextChanged(),!this.document.isEditMode()&&this.input.value&&this.onUserTypedCharacters()},e.prototype.onPlaceholderTextChanged=function(){var t=a.I18n.translateViewFormText(String(this.getProperty("placeholder")||""))||"";if(t)this.input.placeholder=t;else if(this.iLibPhoneNumber)try{var e=this.dropdown.getValue();if(!e)throw new Error("?");var n=this.iLibPhoneNumber.getExampleNumber(e);if(!n)throw new Error("?");this.input.placeholder=n.formatNational(e),this.input.setAttribute("data-sample",this.input.placeholder)}catch(t){this.input.placeholder=""}else this.input.placeholder=""},e.prototype.onDefaultCountryChanged=function(){this.input.value="",this.dropdown.setValue(this.getProperty("phone.defaultCountry")||l.Geolocation.getConnectionDetails().country),this.dropdown.trigger("change"),this.document.isEditMode()||this.trigger("input")},e.prototype.initFormViewEvents=function(){var t=this;this.input.addEventListener("input",(function(){t.isEnteredValue=!0,t.onUserTypedCharacters()}),!0),this.input.addEventListener("blur",(function(){t.onUserDefocusedInput()}),!0),this.dropdown.on("click",(function(){t.dropdown.isOpened()||t.dropdown.open(t.getRoot().getBoundingClientRect())})),this.dropdown.on("change",(function(){t.onPlaceholderTextChanged(),t.onUserTypedCharacters(),t.trigger("input")})),this.dropdown.on("closed",(function(){t.input.focus()})),this.input.addEventListener("keydown",(function(e){(e.keyCode||e.charCode)===u.KeyboardDriver.F4&&(t.dropdown.isOpened()||t.dropdown.open(t.getRoot().getBoundingClientRect()))}),!0),this.getProperty("phone.defaultCountry")&&this.onDefaultCountryChanged()},e.prototype.onUserTypedCharacters=function(){if(this.iLibPhoneNumber)if(this.input.value)try{var t=this.dropdown.getValue(),e=this.iLibPhoneNumber.parsePhoneNumber(this.input.value,t||void 0);if((e.country||"").toUpperCase()!==String(t||"").toUpperCase()&&(this.dropdown.setValue(e.country),this.onPlaceholderTextChanged()),!e.isValid())throw new Error("NOT_VALID");if(!e.isPossible())throw new Error("NOT_POSSIBLE");this.dropdown.getValue()?this.input.value=e.formatNational(e.country):this.input.value=e.formatInternational(void 0),this.onErrorStateChanged(null),this.errorStatus.innerHTML="<span class='vfb vfb-check'></span>",this.trigger("input")}catch(t){this.onErrorStateChanged(t),this.errorStatus.innerHTML='<span class="vfb vfb-error2"></span>'}else this.onErrorStateChanged(null),this.errorStatus.innerHTML=""},e.prototype.onErrorStateChanged=function(t){if(null===t)this.getRoot().removeAttribute("data-error-state"),this.errorStatus.title="";else{this.getRoot().setAttribute("data-error-state","1");var e=String(t||"").replace(/[^:]+: /g,"").split(" ")[0];this.errorStatus.title=e||"Error"}},e.prototype.onUserDefocusedInput=function(){if(this.isEnteredValue&&this.iLibPhoneNumber)if(this.isEnteredValue=!1,this.input.value){var t=this.input.value,e=this.dropdown.getValue();try{var n=this.iLibPhoneNumber.parsePhoneNumber(t,e||void 0),r=void 0;(r="001"!==n.country?n.formatNational(e||void 0):n.formatInternational())!==t&&(this.input.value=r,this.trigger("input"))}catch(t){this.onErrorStateChanged(t),this.errorStatus.innerHTML='<span class="vfb vfb-error2"></span>'}}else this.onErrorStateChanged(null),this.errorStatus.innerHTML=""},e.prototype.getMinWidth=function(){return 6},e.prototype.getRenderedCSS=function(){var t=c.cast(this.properties.label.color),e=c.cast(this.properties.label.font.family),n=c.cast(this.properties.label.font.size),r=c.cast(this.properties.label.font.bold)?"bold":"normal",o=c.cast(this.properties.label.font.italic)?"italic":"normal",i=c.cast(this.properties.label.font.underline)?"underline":"none",s=c.cast(this.properties.label.font.align),a=c.cast(this.properties.input.color),u=c.cast(this.properties.input.backgroundColor),l=c.cast(this.properties.input.borderColor),p=c.cast(this.properties.input.borderWidth),d=c.cast(this.properties.input.borderRadius),h=c.cast(this.properties.input.borderStyle),f=c.cast(this.properties.input.font.family),g=c.cast(this.properties.input.font.size),m=c.cast(this.properties.input.font.bold)?"bold":"normal",y=c.cast(this.properties.input.font.italic)?"italic":"normal",v=c.cast(this.properties.input.font.underline)?"underline":"none",b=c.cast(this.properties.input.font.align),C=this.document.getProperty("theme.selection.borderColor"),E=this.document.getProperty("theme.selection.backgroundColor");return"\n            > label {\n                color: "+t+";\n                font-size: "+n+'px;\n                font-family: "'+e+'";\n                font-weight: '+r+";\n                font-style: "+o+";\n                text-decoration: "+i+";\n                text-align: "+s+";\n            }\n            input[type=text] {\n                color: "+a+";\n                background-color: "+u+";\n                border: "+p+" "+h+" "+l+";\n                border-radius: "+d+";\n                font-weight: "+m+";\n                font-style: "+y+";\n                text-decoration: "+v+";\n                text-align: "+b+";\n                font-size: "+g+'px;\n                font-family: "'+f+'";\n                &:hover,\n                &:focus {\n                    border-color: '+C+";\n                }\n                &:focus {\n                    background-color: "+E+";\n                }\n            }\n\n            .input {\n                &:hover input[type=text] {\n                    border-color: "+C+";\n                }\n                &:focus-within input[type=text] {\n                    background-color: "+E+";\n                }\n\n            }\n            \n            [data-role=expander] .vfb {\n                color: "+a+";\n            }\n        "},e.prototype.onPlaceholderChanged=function(){this.input.placeholder=a.I18n.translateViewFormText(this.getProperty("placeholder")||""),this.getDocument().isEditMode()&&(""!==this.input.placeholder?this.input.placeholder!==this.input.value&&(this.input.value=this.input.placeholder):(this.input.value="",this.onPlaceholderTextChanged()))},e.prototype.installEditModeEvents=function(){var t=this;this.input.value=this.getProperty("placeholder")||"",this.input.oninput=function(){t.setProperty("placeholder",t.input.value,t),""===t.input.value?t.onPlaceholderTextChanged():t.input.placeholder=t.input.value},this.input.onfocus=function(){setTimeout((function(){t.getDocument().getSelection().getItem()!==t&&t.getDocument().getSelection().set(t,n.SelectionInputContext.INPUT,t.input)}),0)}},e.prototype.listenToUserInput=function(t){var e=this;this.input.oninput=function(){t.updateValue(e)},this.on("input",(function(){t.updateValue(e)}))},e.prototype.getAllowedValidators=function(){return["phone.libphonenumber"]},e.prototype.performTranslation=function(){this.labelDOMNode&&(this.labelDOMNode.textContent=a.I18n.translateViewFormText(this.getProperty("label.text"),this.getLabelI18nContext())),(this.getProperty("placeholder")||"")&&this.input&&(this.input.placeholder=a.I18n.translateViewFormText(this.getProperty("placeholder")))},e.prototype.supportsLabelInsideRendering=function(){return!0},e.prototype.embedInPDFPage=function(t){t.writeHTMLElement(this.labelDOMNode);var e=t.getDocument().create(p.PDFNodeEntityType.INPUT_TEXT);t.initializeFieldDimensions(this.input,e),e.setBackgroundColor(c.cast(this.properties.input.backgroundColor)).setTextColor(c.cast(this.properties.input.color)).setBorderWidth(parseInt(c.cast(this.properties.input.borderWidth)||"1")).setBorderColor(c.cast(this.properties.input.borderColor)).setValue(this.input.placeholder).setFontFamily(c.cast(this.properties.input.font.family)).setMultiLine(!1).setName(this.getProperty("name")).setFontSize(c.cast(this.properties.input.font.size)).setRequired(this.isRequired()).setRepeatedIndex(this.getRepeatedIndex()),t.appendChild(e)},e.prototype.supportsDefaultValue=function(){return!0},e.prototype.getDefaultValueStrategy=function(){return new d.SingleLineTextInputDefaultValue},e}(n.Input);e.Phone=h}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(0),n(75),n(3),n(12),n(21)],void 0===(o=function(t,e,n,r,o,i,a){Object.defineProperty(e,"__esModule",{value:!0});var u=function(t){function e(e){var o=t.call(this)||this;return o.iLibPhoneNumber=null,o.momentumSearch="",o.root=document.createElement("div"),o.root.setAttribute("data-role","lipbhonenumber-dropdown"),o.root.tabIndex=0,o.spanFlag=document.createElement("span"),o.spanFlag.setAttribute("data-role","country-flag"),o.root.appendChild(o.spanFlag),o.expander=document.createElement("div"),o.expander.setAttribute("data-role","expander"),o.expander.innerHTML='<span class="vfb vfb-caret-down"></span>',o.root.appendChild(o.expander),o.setValue(r.Geolocation.getConnectionDetails().country),o.windowScrollCallback=function(){o.close(),n(window).off("scroll",o.windowScrollCallback)},e.then((function(t){o.iLibPhoneNumber=t,o.onSdkLoaded()})),o.root.onclick=function(){o.trigger("click")},o.momentumSearchReset=i.Debouncer.create((function(){o.momentumSearch=""}),1500),o}return s(e,t),e.prototype.getRoot=function(){return this.root},e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t){return"001"===t&&(t=null),this.value=String(t||"").toUpperCase()||null,this.updateFlag(),this},e.prototype.onSdkLoaded=function(){this.updateFlag()},e.prototype.updateFlag=function(){if(null===this.value)this.spanFlag.className="flag flag-32 flag-unknown",this.root.title="";else{this.spanFlag.className="flag flag-32 flag-"+this.value.toLowerCase();var t=r.Geolocation.getCountryNameByCode(this.value);if(this.iLibPhoneNumber)try{var e=this.iLibPhoneNumber.getCountryCallingCode(this.value.toUpperCase());if(!e)throw new Error("?");this.root.title=t+" (+"+e+")"}catch(e){this.root.title=t}else this.root.title=t}},e.prototype.open=function(t){var e=this;if(!this.overlay&&this.iLibPhoneNumber){t=t||this.root.getBoundingClientRect();var r=Math.max(document.documentElement.clientHeight,window.innerHeight||0);this.overlay=document.createElement("div"),this.overlay.tabIndex=0,this.overlay.setAttribute("data-role","libphonenumber-overlay"),this.overlay.style.left=Math.round(t.left)+"px",t.top+t.height+200>r?this.overlay.style.top=Math.round(t.top-155)+"px":this.overlay.style.top=Math.round(t.top+t.height-20)+"px",this.overlay.style.width=Math.round(t.width)+"px",document.body.appendChild(this.overlay),this.overlay.onblur=function(){e.close()},n(window).on("scroll",this.windowScrollCallback),setTimeout((function(){e.overlay.focus(),e.appendCountryCodesToOverlay()}),10),function(t){n(e.overlay).on("mousedown","> [data-role=option]",(function(){t.selectCountry(this)})),n(e.overlay).on("mouseup","> [data-role=option]",(function(){t.selectCountry(this),t.setValue(this.getAttribute("data-value")),t.close(),t.trigger("change"),t.trigger("closed")})),n(e.overlay).on("keydown",(function(e){var r;switch(e.keyCode||e.charCode){case a.KeyboardDriver.ESC:t.close(),t.trigger("closed");break;case a.KeyboardDriver.ENTER:(r=n(t.overlay).find("[data-role=option].selected").get(0)||null)&&(t.setValue(r.getAttribute("data-value")),t.close(),t.trigger("change"),t.trigger("closed")),e.preventDefault(),e.stopPropagation();break;case a.KeyboardDriver.HOME:t.selectCountry(t.overlay.firstChild),e.preventDefault(),e.stopPropagation();break;case a.KeyboardDriver.END:t.selectCountry(t.overlay.lastChild),e.preventDefault(),e.stopPropagation();break;case a.KeyboardDriver.UP:null===(r=n(t.overlay).find("[data-role=option].selected").get(0)||null)?t.selectCountry(t.overlay.lastChild):t.selectCountry(r.previousSibling||t.overlay.lastChild),e.preventDefault(),e.stopPropagation();break;case a.KeyboardDriver.DOWN:null===(r=n(t.overlay).find("[data-role=option].selected").get(0)||null)?t.selectCountry(t.overlay.firstChild):t.selectCountry(r.nextSibling||t.overlay.firstChild),e.preventDefault(),e.stopPropagation();break;case a.KeyboardDriver.A:r=n(t.overlay).find("[data-role=option].selected").get(0)||null,t.selectOptionByMomentumSearch("a",r);break;case a.KeyboardDriver.B:r=n(t.overlay).find("[data-role=option].selected").get(0)||null,t.selectOptionByMomentumSearch("b",r);break;case a.KeyboardDriver.C:r=n(t.overlay).find("[data-role=option].selected").get(0)||null,t.selectOptionByMomentumSearch("c",r);break;case a.KeyboardDriver.D:r=n(t.overlay).find("[data-role=option].selected").get(0)||null,t.selectOptionByMomentumSearch("d",r);break;case a.KeyboardDriver.E:r=n(t.overlay).find("[data-role=option].selected").get(0)||null,t.selectOptionByMomentumSearch("e",r);break;case a.KeyboardDriver.F:r=n(t.overlay).find("[data-role=option].selected").get(0)||null,t.selectOptionByMomentumSearch("f",r);break;case a.KeyboardDriver.G:r=n(t.overlay).find("[data-role=option].selected").get(0)||null,t.selectOptionByMomentumSearch("g",r);break;case a.KeyboardDriver.H:r=n(t.overlay).find("[data-role=option].selected").get(0)||null,t.selectOptionByMomentumSearch("h",r);break;case a.KeyboardDriver.I:r=n(t.overlay).find("[data-role=option].selected").get(0)||null,t.selectOptionByMomentumSearch("i",r);break;case a.KeyboardDriver.J:r=n(t.overlay).find("[data-role=option].selected").get(0)||null,t.selectOptionByMomentumSearch("j",r);break;case a.KeyboardDriver.K:r=n(t.overlay).find("[data-role=option].selected").get(0)||null,t.selectOptionByMomentumSearch("k",r);break;case a.KeyboardDriver.L:r=n(t.overlay).find("[data-role=option].selected").get(0)||null,t.selectOptionByMomentumSearch("l",r);break;case a.KeyboardDriver.M:r=n(t.overlay).find("[data-role=option].selected").get(0)||null,t.selectOptionByMomentumSearch("m",r);break;case a.KeyboardDriver.N:r=n(t.overlay).find("[data-role=option].selected").get(0)||null,t.selectOptionByMomentumSearch("n",r);break;case a.KeyboardDriver.O:r=n(t.overlay).find("[data-role=option].selected").get(0)||null,t.selectOptionByMomentumSearch("o",r);break;case a.KeyboardDriver.P:r=n(t.overlay).find("[data-role=option].selected").get(0)||null,t.selectOptionByMomentumSearch("p",r);break;case a.KeyboardDriver.Q:r=n(t.overlay).find("[data-role=option].selected").get(0)||null,t.selectOptionByMomentumSearch("q",r);break;case a.KeyboardDriver.R:r=n(t.overlay).find("[data-role=option].selected").get(0)||null,t.selectOptionByMomentumSearch("r",r);break;case a.KeyboardDriver.S:r=n(t.overlay).find("[data-role=option].selected").get(0)||null,t.selectOptionByMomentumSearch("s",r);break;case a.KeyboardDriver.T:r=n(t.overlay).find("[data-role=option].selected").get(0)||null,t.selectOptionByMomentumSearch("t",r);break;case a.KeyboardDriver.U:r=n(t.overlay).find("[data-role=option].selected").get(0)||null,t.selectOptionByMomentumSearch("u",r);break;case a.KeyboardDriver.V:r=n(t.overlay).find("[data-role=option].selected").get(0)||null,t.selectOptionByMomentumSearch("v",r);break;case a.KeyboardDriver.W:r=n(t.overlay).find("[data-role=option].selected").get(0)||null,t.selectOptionByMomentumSearch("w",r);break;case a.KeyboardDriver.X:r=n(t.overlay).find("[data-role=option].selected").get(0)||null,t.selectOptionByMomentumSearch("x",r);break;case a.KeyboardDriver.Y:r=n(t.overlay).find("[data-role=option].selected").get(0)||null,t.selectOptionByMomentumSearch("y",r);break;case a.KeyboardDriver.Z:r=n(t.overlay).find("[data-role=option].selected").get(0)||null,t.selectOptionByMomentumSearch("z",r)}}))}(this)}},e.prototype.close=function(){if(this.overlay&&this.overlay.parentNode)try{this.overlay.parentNode.removeChild(this.overlay)}catch(t){}this.overlay=void 0,n(window).off("scroll",this.windowScrollCallback),this.trigger("close")},e.prototype.isOpened=function(){return!!this.overlay},e.prototype.appendCountryCodesToOverlay=function(){for(var t=r.Geolocation.getCountriesList(),e=null,n=0,o=t.length;n<o;n++)if(this.iLibPhoneNumber.isSupportedCountry(t[n].code)){var i=document.createElement("div");i.setAttribute("data-role","option"),i.setAttribute("data-value",t[n].code);var s=document.createElement("span");s.setAttribute("data-role","flag"),s.className="flag flag-32 flag-"+t[n].code.toLowerCase(),i.appendChild(s);var a=document.createElement("span");a.setAttribute("data-role","country"),a.textContent=t[n].name,i.appendChild(a);var u=document.createElement("span");u.setAttribute("data-role","prefix");try{u.textContent="+"+this.iLibPhoneNumber.getCountryCallingCode(t[n].code)}catch(t){}i.appendChild(u),this.overlay.appendChild(i),t[n].code===this.value&&(e=i)}e&&this.selectCountry(e)},e.prototype.selectCountry=function(t){n(t).addClass("selected").siblings(".selected").removeClass("selected");var e=t.offsetTop,r=e+t.offsetHeight,o=this.overlay.scrollTop,i=o+this.overlay.offsetHeight;e<o?this.overlay.scrollTop=e-10:r>i&&(this.overlay.scrollTop=e-160)},e.prototype.selectOptionByMomentumSearch=function(t,e){this.momentumSearch=this.momentumSearch.concat(t),this.momentumSearchReset();var r=this.momentumSearch,o=!1;!function(t){n(e).siblings().each((function(){o||this.textContent.toLowerCase().substr(0,r.length)===r&&(o=!0,t.selectCountry(this))}))}(this)},e}(o.EventEmitter);e.LibPhoneNumberDropdown=u}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(0),n(31),n(170)],void 0===(o=function(t,e,n,r,o){Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.NATIONAL="NATIONAL",t.INTERNATIONAL="INTERNATIONAL",t.E164="E.164",t.RFC3966="RFC3966"}(e.PhoneNumberFormat||(e.PhoneNumberFormat={})),function(t){t.MOBILE="MOBILE",t.FIXED_LINE="FIXED_LINE",t.FIXED_LINE_OR_MOBILE="FIXED_LINE_OR_MOBILE",t.PREMIUM_RATE="PREMIUM_RATE",t.TOLL_FREE="TOLL_FREE",t.SHARED_COST="SHARED_COST",t.VOIP="VOIP",t.PERSONAL_NUMBER="PERSONAL_NUMBER",t.PAGER="PAGER",t.UAN="UAN",t.VOICEMAIL="VOICEMAIL"}(e.PhoneNumberType||(e.PhoneNumberType={}));var i=function(){function t(t){this.sdk=t}return t.prototype.AsYouType=function(t){return new this.sdk.AsYouType(t)},t.prototype.parsePhoneNumber=function(t,e){return this.sdk.parsePhoneNumber(t,e)},t.prototype.getExampleNumber=function(e){return this.sdk.getExampleNumber(e,t.EXAMPLE_NUMBERS)},t.prototype.isSupportedCountry=function(t){return this.sdk.isSupportedCountry(t)},t.prototype.getCountryCallingCode=function(t){return this.sdk.getCountryCallingCode(t)},t.prototype.getExtPrefix=function(t){return this.sdk.getExtPrefix(t)},t.prototype.parseIncompletePhoneNumber=function(t){return this.sdk.parseIncompletePhoneNumber(t)},t.prototype.formatIncompletePhoneNumber=function(t,e){return this.sdk.formatIncompletePhoneNumber(t,e)},t.EXAMPLE_NUMBERS={AC:"40123",AD:"312345",AE:"501234567",AF:"701234567",AG:"2684641234",AI:"2642351234",AL:"662123456",AM:"77123456",AO:"923123456",AR:"91123456789",AS:"6847331234",AT:"664123456",AU:"412345678",AW:"5601234",AX:"412345678",AZ:"401234567",BA:"61123456",BB:"2462501234",BD:"1812345678",BE:"470123456",BF:"70123456",BG:"48123456",BH:"36001234",BI:"79561234",BJ:"90011234",BL:"690001234",BM:"4413701234",BN:"7123456",BO:"71234567",BQ:"3181234",BR:"11961234567",BS:"2423591234",BT:"17123456",BW:"71123456",BY:"294911911",BZ:"6221234",CA:"5062345678",CC:"412345678",CD:"991234567",CF:"70012345",CG:"061234567",CH:"781234567",CI:"01234567",CK:"71234",CL:"221234567",CM:"671234567",CN:"13123456789",CO:"3211234567",CR:"83123456",CU:"51234567",CV:"9911234",CW:"95181234",CX:"412345678",CY:"96123456",CZ:"601123456",DE:"15123456789",DJ:"77831001",DK:"32123456",DM:"7672251234",DO:"8092345678",DZ:"551234567",EC:"991234567",EE:"51234567",EG:"1001234567",EH:"650123456",ER:"7123456",ES:"612345678",ET:"911234567",FI:"412345678",FJ:"7012345",FK:"51234",FM:"3501234",FO:"211234",FR:"612345678",GA:"06031234",GB:"7400123456",GD:"4734031234",GE:"555123456",GF:"694201234",GG:"7781123456",GH:"231234567",GI:"57123456",GL:"221234",GM:"3012345",GN:"601123456",GP:"690001234",GQ:"222123456",GR:"6912345678",GT:"51234567",GU:"6713001234",GW:"955012345",GY:"6091234",HK:"51234567",HN:"91234567",HR:"921234567",HT:"34101234",HU:"201234567",ID:"812345678",IE:"850123456",IL:"502345678",IM:"7924123456",IN:"8123456789",IO:"3801234",IQ:"7912345678",IR:"9123456789",IS:"6111234",IT:"3123456789",JE:"7797712345",JM:"8762101234",JO:"790123456",JP:"9012345678",KE:"712123456",KG:"700123456",KH:"91234567",KI:"72001234",KM:"3212345",KN:"8697652917",KP:"1921234567",KR:"1000000000",KW:"50012345",KY:"3453231234",KZ:"7710009998",LA:"2023123456",LB:"71123456",LC:"7582845678",LI:"660234567",LK:"712345678",LR:"770123456",LS:"50123456",LT:"61234567",LU:"628123456",LV:"21234567",LY:"912345678",MA:"650123456",MC:"612345678",MD:"62112345",ME:"67622901",MF:"690001234",MG:"321234567",MH:"2351234",MK:"72345678",ML:"65012345",MM:"92123456",MN:"88123456",MO:"66123456",MP:"6702345678",MQ:"696201234",MR:"22123456",MS:"6644923456",MT:"96961234",MU:"52512345",MV:"7712345",MW:"991234567",MX:"12221234567",MY:"123456789",MZ:"821234567",NA:"811234567",NC:"751234",NE:"93123456",NF:"381234",NG:"8021234567",NI:"81234567",NL:"612345678",NO:"40612345",NP:"9841234567",NR:"5551234",NU:"8884012",NZ:"211234567",OM:"92123456",PA:"61234567",PE:"912345678",PF:"87123456",PG:"70123456",PH:"9051234567",PK:"3012345678",PL:"512345678",PM:"551234",PR:"7872345678",PS:"599123456",PT:"912345678",PW:"6201234",PY:"961456789",QA:"33123456",RE:"692123456",RO:"712034567",RS:"601234567",RU:"9123456789",RW:"720123456",SA:"512345678",SB:"7421234",SC:"2510123",SD:"911231234",SE:"701234567",SG:"81234567",SH:"51234",SI:"31234567",SJ:"41234567",SK:"912123456",SL:"25123456",SM:"66661212",SN:"701234567",SO:"71123456",SR:"7412345",SS:"977123456",ST:"9812345",SV:"70123456",SX:"7215205678",SY:"944567890",SZ:"76123456",TA:"8999",TC:"6492311234",TD:"63012345",TG:"90112345",TH:"812345678",TJ:"917123456",TK:"7290",TL:"77212345",TM:"66123456",TN:"20123456",TO:"7715123",TR:"5012345678",TT:"8682911234",TV:"901234",TW:"912345678",TZ:"621234567",UA:"501234567",UG:"712345678",US:"2015550123",UY:"94231234",UZ:"912345678",VA:"3123456789",VC:"7844301234",VE:"4121234567",VG:"2843001234",VI:"3406421234",VN:"912345678",VU:"5912345",WF:"501234",WS:"7212345",XK:"43201234",YE:"712345678",YT:"639012345",ZA:"711234567",ZM:"955123456",ZW:"712345678"},t}();e.ILibPhoneNumber=i;var s=function(){function t(){}return t.getSDK=function(){var t=this;return this.loader||(this.loader=n.Deferred((function(e){var n=document.createElement("script");n.type="text/javascript",n.src=r.CDN.getCDNUrl("/vendor/libphonenumber-current/libphonenumber-max.js");var o=window.define;window.define=function(){},n.onload=function(){!function n(){if(window.libphonenumber)return window.define=o,void t.loadCountryCodesCSSFlags(e.resolve(new i(window.libphonenumber)));setTimeout((function(){n()}),20)}(),setTimeout((function(){window.define=o,e.reject(new Error("Timeout loading libphonenumber"))}),1e3)},n.onerror=function(){window.define=o,e.reject(new Error("Failed to load LibPhoneNumber SDK"))},document.getElementsByTagName("head")[0].appendChild(n)})))},t.loadCountryCodesCSSFlags=function(t){return o.CountryCodeFlags.load(),t},t}();e.LibPhoneNumber=s}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(9),n(4),n(15),n(265),n(1),n(10)],void 0===(o=function(t,e,n,r,o,i,a,u){Object.defineProperty(e,"__esModule",{value:!0});var l=function(t){function e(n,r,o){var i=t.call(this,n,r||e.getDefaultProperties(n),o)||this;return i.addClass("button"),i.button=document.createElement("button"),i.button.className="input label-editable",i.button.type="button",i.iconDOMNode=document.createElement("span"),i.captionDOMNode=document.createElement("label"),i.captionDOMNode.className="caption",i.button.appendChild(i.iconDOMNode),i.button.appendChild(i.captionDOMNode),i.onButtonCaptionChanged(),i.onButtonActionChanged(),n.isEditMode()||(i.button.onclick=function(){i.onClick()}),i}return s(e,t),e.getDefaultProperties=function(e){var n=t.addInputProperties.call(this,t.addSizeProperties.call(this,{name:"Q",caption:a.I18n.translateApplicationText("Submit","control-defaults.button"),action:i.EFormCommand.SUBMIT,icon:"",visibility:"",formula:"",link:"",target:"",pageTarget:""}),e);return n.input.font.align=e.getThemeValues().getProperty("buttons.standard.font.align").inherit(),n.input.font.family=e.getThemeValues().getProperty("buttons.standard.font.family").inherit(),n.input.font.size=e.getThemeValues().getProperty("buttons.standard.font.size").inherit(),n.input.font.bold=e.getThemeValues().getProperty("buttons.standard.font.bold").inherit(),n.input.font.italic=e.getThemeValues().getProperty("buttons.standard.font.italic").inherit(),n.input.font.underline=e.getThemeValues().getProperty("buttons.standard.font.underline").inherit(),n.input.backgroundColor=e.getThemeValues().getProperty("buttons.standard.backgroundColor").inherit(),n.input.color=e.getThemeValues().getProperty("buttons.standard.color").inherit(),n.input.borderRadius=e.getThemeValues().getProperty("buttons.standard.borderRadius").inherit(),n.input.borderColor=e.getThemeValues().getProperty("buttons.standard.borderColor").inherit(),n.input.borderWidth=e.getThemeValues().getProperty("buttons.standard.borderWidth").inherit(),n.input.borderStyle=e.getThemeValues().getProperty("buttons.standard.borderStyle").inherit(),n},e.prototype.getTranslations=function(){var t=[];return this.properties.caption&&t.push({original:this.properties.caption}),t},e.prototype.onButtonCaptionChanged=function(){this.properties.icon?this.iconDOMNode.className="icon fa fa-"+this.properties.icon:this.iconDOMNode.className="",this.captionDOMNode.textContent=String(this.properties.caption||" ")},e.prototype.onButtonActionChanged=function(){this.button.setAttribute("data-button-role",String(this.properties.action||""))},e.prototype.getFieldsLayout=function(){return[{domNode:this.button,span:n.InputSpan.FULL,row:0}]},e.prototype.getNodeName=function(){return"Button"},e.prototype.getTypeId=function(){return r.NodeTypes.BUTTON},e.prototype.getValue=function(){},e.prototype.hasLabel=function(){return!1},e.prototype.hasValue=function(){return!1},e.prototype.setValue=function(t){return this},e.prototype.getRenderedCSS=function(){var t=u.cast(this.properties.input.color),e=u.cast(this.properties.input.backgroundColor),n=u.cast(this.properties.input.borderColor),r=u.cast(this.properties.input.borderWidth),o=u.cast(this.properties.input.borderRadius),i=u.cast(this.properties.input.borderStyle),s=u.cast(this.properties.input.font.family),a=u.cast(this.properties.input.font.size);return"\n            button {\n                color: "+t+";\n                background-color: "+e+";\n                border: "+r+" "+i+" "+n+";\n                border-radius: "+o+";\n                font-weight: "+(u.cast(this.properties.input.font.bold)?"bold":"normal")+";\n                font-style: "+(u.cast(this.properties.input.font.italic)?"italic":"normal")+";\n                text-decoration: "+(u.cast(this.properties.input.font.underline)?"underline":"none")+";\n                text-align: "+u.cast(this.properties.input.font.align)+";\n                font-size: "+a+'px;\n                font-family: "'+s+'";\n            }\n            \n            button:hover,\n            button:focus {\n                background-color: lighten('+e+", 10%);\n            }\n            \n            button:active {\n                background-color: darken("+e+", 10%);\n            }\n        "},e.prototype.setLabelTextWhichIsComingFromTheUser=function(t,e){var n=String(t||"").replace(/[\r\n]+/g,"");return this.setProperty("caption",n),this.captionDOMNode.textContent=n,this},e.prototype.getTextAssociatedWithLabel=function(t){return String(this.properties.caption||"")},e.prototype.onClick=function(){switch(this.properties.action){case i.EFormCommand.FOLLOW_LINK:this.document.trigger(o.Document.EVENT_FOLLOW_LINK,this.properties.link,this.properties.target);break;case i.EFormCommand.SUBMIT:this.document.trigger(o.Document.EVENT_SUBMIT);break;case i.EFormCommand.NEXT_PAGE:this.document.trigger(o.Document.EVENT_NEXT_PAGE);break;case i.EFormCommand.PREVIOUS_PAGE:this.document.trigger(o.Document.EVENT_PREVIOUS_PAGE);break;case i.EFormCommand.PRINT:this.document.trigger(o.Document.EVENT_PRINT);break;case i.EFormCommand.RESET:this.document.trigger(o.Document.EVENT_RESET);break;case i.EFormCommand.SAVE_FOR_LATER:this.document.trigger(o.Document.EVENT_SAVE);break;case i.EFormCommand.SHOW_PAGE:this.document.trigger(o.Document.EVENT_SHOW_PAGE_BY_ID,this.hasProperty("pageTarget")?this.getProperty("pageTarget"):"")}},e.prototype.performTranslation=function(){this.captionDOMNode.textContent=a.I18n.translateViewFormText(this.properties.caption||"")},e.prototype.supportsLabelInsideRendering=function(){return!1},e}(n.Input);e.Button=l}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r;void 0===(r=function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.NEXT_PAGE="next",t.PREVIOUS_PAGE="prev",t.PRINT="print",t.RESET="reset",t.SUBMIT="submit",t.FOLLOW_LINK="link",t.SHOW_PAGE="show-page",t.SAVE_FOR_LATER="save-for-later"}(e.EFormCommand||(e.EFormCommand={}))}.apply(e,[n,e]))||(t.exports=r)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(9),n(4),n(15),n(1),n(13),n(6),n(26)],void 0===(o=function(t,e,n,r,o,i,a,u,l){var c;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.PREVIOUS=0]="PREVIOUS",t[t.NEXT=1]="NEXT",t[t.RESET=2]="RESET",t[t.SAVE=3]="SAVE",t[t.SUBMIT=4]="SUBMIT",t[t.PRINT=5]="PRINT"}(c||(c={}));var p=function(t){function e(n,r,o){var i=t.call(this,n,r||e.getDefaultProperties(n),o)||this;return i.addClass("auto-button"),n.isEditMode()&&i.installEditModeEvents(),i}return s(e,t),e.getDefaultProperties=function(e){return t.addSizeProperties.call(this,{hasPrevious:!1,hasNext:!1,hasReset:!1,hasSave:!1,hasSubmit:!1,hasPrint:!1,previousCaption:"Previous",nextCaption:"Next",resetCaption:"Reset",saveCaption:"Save",submitCaption:"Submit",printCaption:"Print"})},e.prototype.getFieldsLayout=function(){var t=[];return this.buttonPreviousPage&&t.push({row:0,span:n.InputSpan.REMAINING,domNode:this.buttonPreviousPage}),this.buttonNextPage&&t.push({row:0,span:n.InputSpan.REMAINING,domNode:this.buttonNextPage}),this.buttonReset&&t.push({row:0,span:n.InputSpan.REMAINING,domNode:this.buttonReset}),this.buttonSave&&t.push({row:0,span:n.InputSpan.REMAINING,domNode:this.buttonSave}),this.buttonPrint&&t.push({row:0,span:n.InputSpan.REMAINING,domNode:this.buttonPrint}),this.buttonSubmit&&t.push({row:0,span:n.InputSpan.REMAINING,domNode:this.buttonSubmit}),t},e.prototype.getNodeName=function(){return"Form Buttons"},e.prototype.getTypeId=function(){return r.NodeTypes.AUTO_BUTTONS},e.prototype.getValue=function(){},e.prototype.hasLabel=function(){return!1},e.prototype.hasValue=function(){return!1},e.prototype.setValue=function(t){return this},e.prototype.updateButtons=function(t){var e=this;void 0===t&&(t=!0);var n=[];if(this.getProperty("hasReset")){var r=this.getProperty("resetCaption");this.buttonReset?this.buttonResetLabel.textContent!==r&&(this.buttonResetLabel.textContent=r):(this.buttonReset=l.DOM.document.createElement("button"),this.buttonReset.className="input label-editable reset",this.buttonReset.type="button",this.buttonResetLabel=l.DOM.document.createElement("label"),this.buttonReset.appendChild(this.buttonResetLabel),this.buttonResetLabel.textContent=i.I18n.translateViewFormText(r,"form-button"),this.appendTrashButton(this.buttonReset,(function(){e.document.setProperty("autoButtons.showReset",!1,e.document),e.document.updateAutoButtons()})),this.document.isEditMode()||(this.buttonReset.onclick=function(){e.document.trigger(o.Document.EVENT_RESET)})),n.push(this.buttonReset)}else this.buttonReset&&(this.root.removeChild(this.buttonReset),this.buttonReset=void 0,this.buttonResetLabel=void 0);if(this.getProperty("hasPrint")){var s=this.getProperty("printCaption");this.buttonPrint?this.buttonPrintLabel.textContent!==s&&(this.buttonPrintLabel.textContent=s):(this.buttonPrint=l.DOM.document.createElement("button"),this.buttonPrint.className="input label-editable print",this.buttonPrint.type="button",this.buttonPrintLabel=l.DOM.document.createElement("label"),this.buttonPrint.appendChild(this.buttonPrintLabel),this.buttonPrintLabel.textContent=i.I18n.translateViewFormText(s,"form-button"),this.appendTrashButton(this.buttonPrint,(function(){e.document.setProperty("autoButtons.showPrint",!1,e.document),e.document.updateAutoButtons()})),this.document.isEditMode()||(this.buttonPrint.onclick=function(){e.document.trigger(o.Document.EVENT_PRINT)})),n.push(this.buttonPrint)}else this.buttonPrint&&(this.root.removeChild(this.buttonPrint),this.buttonPrint=void 0);if(this.getProperty("hasSave")){var a=this.getProperty("saveCaption");this.buttonSave?this.buttonSaveLabel.textContent!==a&&(this.buttonSaveLabel.textContent=a):(this.buttonSave=l.DOM.document.createElement("button"),this.buttonSave.className="input label-editable save",this.buttonSave.type="button",this.buttonSaveLabel=l.DOM.document.createElement("label"),this.buttonSave.appendChild(this.buttonSaveLabel),this.buttonSaveLabel.textContent=i.I18n.translateViewFormText(a,"form-button"),this.appendTrashButton(this.buttonSave,(function(){e.document.setProperty("autoButtons.showSave",!1,e.document),e.document.updateAutoButtons()})),this.document.isEditMode()||(this.buttonSave.onclick=function(){e.document.trigger(o.Document.EVENT_SAVE)})),n.push(this.buttonSave)}else this.buttonSave&&(this.root.removeChild(this.buttonSave),this.buttonSave=void 0,this.buttonSaveLabel=void 0);if(this.getProperty("hasPrevious")){var u=this.getProperty("previousCaption");this.buttonPreviousPage?this.buttonPreviousPageLabel.textContent!==u&&(this.buttonPreviousPageLabel.textContent=u):(this.buttonPreviousPage=l.DOM.document.createElement("button"),this.buttonPreviousPage.className="input label-editable previous",this.buttonPreviousPage.type="button",this.buttonPreviousPageLabel=document.createElement("label"),this.buttonPreviousPage.appendChild(this.buttonPreviousPageLabel),this.buttonPreviousPageLabel.textContent=i.I18n.translateViewFormText(u,"form-button"),this.document.isEditMode()||(this.buttonPreviousPage.onclick=function(){e.document.trigger(o.Document.EVENT_PREVIOUS_PAGE)})),n.push(this.buttonPreviousPage)}else this.buttonPreviousPage&&(this.root.removeChild(this.buttonPreviousPage),this.buttonPreviousPage=void 0,this.buttonPreviousPageLabel=void 0);if(this.getProperty("hasNext")){var c=this.getProperty("nextCaption");this.buttonNextPage?this.buttonNextPageLabel.textContent!==c&&(this.buttonNextPageLabel.textContent=c):(this.buttonNextPage=l.DOM.document.createElement("button"),this.buttonNextPage.className="input label-editable next",this.buttonNextPage.type="button",this.buttonNextPageLabel=l.DOM.document.createElement("label"),this.buttonNextPage.appendChild(this.buttonNextPageLabel),this.buttonNextPageLabel.textContent=i.I18n.translateViewFormText(c,"form-button"),this.document.isEditMode()||(this.buttonNextPage.onclick=function(){e.document.trigger(o.Document.EVENT_NEXT_PAGE)})),n.push(this.buttonNextPage)}else this.buttonNextPage&&(this.root.removeChild(this.buttonNextPage),this.buttonNextPage=void 0,this.buttonNextPageLabel=void 0);if(this.getProperty("hasSubmit")){var p=this.getProperty("submitCaption");this.buttonSubmit?this.buttonSubmitLabel.textContent!==p&&(this.buttonSubmitLabel.textContent=p):(this.buttonSubmit=l.DOM.document.createElement("button"),this.buttonSubmit.className="input label-editable submit",this.buttonSubmit.type="button",this.buttonSubmitLabel=l.DOM.document.createElement("label"),this.buttonSubmit.appendChild(this.buttonSubmitLabel),this.buttonSubmitLabel.textContent=i.I18n.translateViewFormText(p,"form-button"),this.document.isEditMode()||(this.buttonSubmit.onclick=function(){e.document.trigger(o.Document.EVENT_SUBMIT)})),n.push(this.buttonSubmit)}else this.buttonSubmit&&(this.root.removeChild(this.buttonSubmit),this.buttonSubmit=void 0);if(t){this.configureDOMNode&&this.root.removeChild(this.configureDOMNode);for(var d=0,h=n.length;d<h;d++)this.root.appendChild(n[d]);this.configureDOMNode&&(this.root.appendChild(this.configureDOMNode),this.updateToolbar())}},e.prototype.getResizeCapabilities=function(){return n.InputResizeCapabilities.NONE},e.prototype.isDeletable=function(){return!1},e.prototype.setLastPage=function(t){return this.lastPage=t,this},e.prototype.setFirstPage=function(t){return this.firstPage=t,this},e.prototype.setEnabled=function(t){return this.enabled=t,this},e.prototype.onSelect=function(){t.prototype.onSelect.call(this),this.configureDOMNode=l.DOM.document.createElement("div"),this.configureDOMNode.className="toolbar",this.updateToolbar(),this.root.appendChild(this.configureDOMNode),this.document.getProperty("autoButtons.enabled")||(this.document.setProperty("autoButtons.enabled",!0,this.document),this.document.updateAutoButtons())},e.prototype.onDeselect=function(){t.prototype.onDeselect.call(this),this.root.removeChild(this.configureDOMNode),this.configureDOMNode=void 0},e.prototype.updateToolbar=function(){for(var t=this;this.configureDOMNode.firstChild;)this.configureDOMNode.removeChild(this.configureDOMNode.firstChild);if(this.enabled){var e=[];if(!this.document.getProperty("autoButtons.showSave")){var n=l.DOM.document.createElement("a");n.textContent=i.I18n.translateApplicationText("Save","control-defaults.form"),n.href="javascript:",n.onclick=function(){t.document.setProperty("autoButtons.showSave",!0,t.document),t.document.updateAutoButtons()},e.push(n)}if(!this.document.getProperty("autoButtons.showReset")){var r=l.DOM.document.createElement("a");r.textContent=i.I18n.translateApplicationText("Reset","control-defaults.form"),r.href="javascript:",r.onclick=function(){t.document.setProperty("autoButtons.showReset",!0,t.document),t.document.updateAutoButtons()},e.push(r)}if(!this.document.getProperty("autoButtons.showPrint")){var o=l.DOM.document.createElement("a");o.textContent=i.I18n.translateApplicationText("Print","control-defaults.form"),o.href="javascript:",o.onclick=function(){t.document.setProperty("autoButtons.showPrint",!0,t.document),t.document.updateAutoButtons()},e.push(o)}var s=l.DOM.document.createElement("a");s.textContent=i.I18n.translateApplicationText("Hide page buttons","control-defaults.auto-button"),s.href="javascript:;",s.onclick=function(){t.document.getSelection().set(null,null,null),t.document.setProperty("autoButtons.enabled",!1,t.document),t.document.updateAutoButtons()},e.push(s),e.length>1&&this.configureDOMNode.appendChild(l.DOM.document.createTextNode(i.I18n.translateApplicationText("Add","control-defaults.auto-button")+" "));for(var a=0,u=e.length;a<u;a++)a>0&&(a===u-1?this.configureDOMNode.appendChild(l.DOM.document.createTextNode(" "+i.I18n.translateApplicationText("or","control-defaults.auto-button")+" ")):this.configureDOMNode.appendChild(l.DOM.document.createTextNode(", "))),this.configureDOMNode.appendChild(e[a])}else;},e.prototype.isDragable=function(){return!1},e.prototype.appendTrashButton=function(t,e){if(this.document.isEditMode()){var n=l.DOM.document.createElement("div");n.className="trash",n.title="Remove button",n.innerHTML='<span class="vfb vfb-close"></span>',t.appendChild(n),t.classList.add("has-trash"),n.onclick=e}},e.prototype.render=function(){},e.prototype.setLabelTextWhichIsComingFromTheUser=function(t,e){var n,r=String(t||"").replace(/[\r\n]+/g,"");switch(e){case this.buttonPreviousPageLabel:n="previousCaption";break;case this.buttonNextPageLabel:n="nextCaption";break;case this.buttonResetLabel:n="resetCaption";break;case this.buttonPrintLabel:n="printCaption";break;case this.buttonSubmitLabel:n="submitCaption";break;case this.buttonSaveLabel:n="saveCaption";break;default:return this}return this.document.setProperty("autoButtons."+n,r,this.document),this.document.updateAutoButtons(!1),this},e.prototype.getTextAssociatedWithLabel=function(t){switch(t){case this.buttonPreviousPageLabel:return String(this.properties.previousCaption||"");case this.buttonNextPageLabel:return String(this.properties.nextCaption||"");case this.buttonResetLabel:return String(this.properties.resetCaption||"");case this.buttonPrintLabel:return String(this.properties.printCaption||"");case this.buttonSubmitLabel:return String(this.properties.submitCaption||"");case this.buttonSaveLabel:return String(this.properties.saveCaption||"");default:return this.getTextAssociatedWithLabel(t)}},e.prototype.onSelectSubfield=function(n){switch(t.prototype.onSelectSubfield.call(this,n),n){case null:case void 0:e.SELECTED_BUTTON=null;break;case this.buttonPreviousPage:e.SELECTED_BUTTON=c.PREVIOUS;break;case this.buttonNextPage:e.SELECTED_BUTTON=c.NEXT;break;case this.buttonReset:e.SELECTED_BUTTON=c.RESET;break;case this.buttonSave:e.SELECTED_BUTTON=c.SAVE;break;case this.buttonPrint:e.SELECTED_BUTTON=c.PRINT;break;case this.buttonSubmit:e.SELECTED_BUTTON=c.SUBMIT;break;default:e.SELECTED_BUTTON=null}},e.prototype.hasProperty=function(n){return"input.font.align"===n||(/^input\.(backgroundColor|borderColor|borderRadius|borderStyle|borderWidth|color|font\.(bold|italic|underline|size|family))$/.test(n)?null!==e.SELECTED_BUTTON:t.prototype.hasProperty.call(this,n))},e.prototype.getProperty=function(n){var r;switch(n){case"input.font.align":return this.document.getProperty("autoButtons.align");case"input.backgroundColor":r="backgroundColor";break;case"input.borderColor":r="borderColor";break;case"input.borderRadius":r="borderRadius";break;case"input.borderStyle":r="borderStyle";break;case"input.borderWidth":r="borderWidth";break;case"input.color":r="color";break;case"input.font.bold":r="font.bold";break;case"input.font.italic":r="font.italic";break;case"input.font.underline":r="font.underline";break;case"input.font.size":r="font.size";break;case"input.font.family":r="font.family";break;default:return t.prototype.getProperty.call(this,n)}switch(e.SELECTED_BUTTON){case c.PREVIOUS:return this.document.getProperty("theme.buttons.previous."+r);case c.NEXT:return this.document.getProperty("theme.buttons.next."+r);case c.RESET:return this.document.getProperty("theme.buttons.reset."+r);case c.SAVE:return this.document.getProperty("theme.buttons.save."+r);case c.PRINT:return this.document.getProperty("theme.buttons.print."+r);case c.SUBMIT:return this.document.getProperty("theme.buttons.submit."+r);default:return null}},e.prototype.setProperty=function(n,r,o){if("input.font.align"!==n){var i=void 0;switch(n){case"input.backgroundColor":i="backgroundColor";break;case"input.borderColor":i="borderColor";break;case"input.borderRadius":i="borderRadius";break;case"input.borderStyle":i="borderStyle";break;case"input.borderWidth":i="borderWidth";break;case"input.color":i="color";break;case"input.font.bold":i="font.bold";break;case"input.font.italic":i="font.italic";break;case"input.font.underline":i="font.underline";break;case"input.font.size":i="font.size";break;case"input.font.family":i="font.family";break;default:return t.prototype.setProperty.call(this,n,r,o)}switch(e.SELECTED_BUTTON){case c.PREVIOUS:this.document.setProperty("theme.buttons.previous."+i,r,this.document);break;case c.NEXT:this.document.setProperty("theme.buttons.next."+i,r,this.document);break;case c.RESET:this.document.setProperty("theme.buttons.reset."+i,r,this.document);break;case c.SAVE:this.document.setProperty("theme.buttons.save."+i,r,this.document);break;case c.PRINT:this.document.setProperty("theme.buttons.print."+i,r,this.document);break;case c.SUBMIT:this.document.setProperty("theme.buttons.submit."+i,r,this.document);break;default:return this}}else this.document.setProperty("autoButtons.align",r,this.document);return this.trigger("property.changed",this,n,r,!r,o),this.document.trigger("property.changed",this,n,r,!r,o),this.document.getTheme().markAsModified(),this},e.prototype.getRenderedCSS=function(){var t,e,r=["previous","next","reset","save","print","submit"];switch(this.document.getProperty("autoButtons.align")){case n.TextAlign.RIGHT:e="right";break;case n.TextAlign.CENTER:e="center";break;case n.TextAlign.JUSTIFY:e="justify";break;case n.TextAlign.LEFT:default:e="left"}t=" text-align: "+e+";";for(var o=0,s=r.length;o<s;o++){var a=this.document.getProperty("theme.buttons."+r[o]+".backgroundColor"),u=this.document.getProperty("theme.buttons."+r[o]+".borderStyle"),l=this.document.getProperty("theme.buttons."+r[o]+".borderWidth")||"0px",c=this.document.getProperty("theme.buttons."+r[o]+".borderColor"),p=this.document.getProperty("theme.buttons."+r[o]+".borderRadius"),d=this.document.getProperty("theme.buttons."+r[o]+".color"),h=this.document.getProperty("theme.buttons."+r[o]+".font.bold")?"bold":"normal",f=this.document.getProperty("theme.buttons."+r[o]+".font.underline")?"underline":"none",g=this.document.getProperty("theme.buttons."+r[o]+".font.italic")?"italic":"initial",m=this.document.getProperty("theme.buttons."+r[o]+".font.size"),y=this.document.getProperty("theme.buttons."+r[o]+".font.family");t=t.concat(" button."+r[o]+" {\n                        color: "+d+";\n                        background-color: "+a+";\n                        border-style: "+u+";\n                        border-width: "+l+";\n                        border-color: "+c+";\n                        border-radius: "+p+";\n                        font-weight: "+h+";\n                        font-style: "+g+";\n                        text-decoration: "+f+';\n                        font-family: "'+y+'";\n                        font-size: '+m+"px;\n                }\n                button."+r[o]+":hover,\n                button."+r[o]+":focus,\n                button."+r[o]+":active {\n                    background-color: lighten("+a+", 10%);\n                }\n            \n                button."+r[o]+":active {\n                    background-color: darken("+a+", 10%);\n                }\n                ")}if(this.getDocument().isEditMode()){var v=JSON.stringify(i.I18n.translateApplicationText("Show page buttons","control-defaults.form"));t=t.concat("&:empty:before {\n                content: "+v+"; \n            }")}return t},e.prototype.installEditModeEvents=function(){this.root.onclick=function(){}},e.prototype.isClonable=function(){return!1},e.prototype.performTranslation=function(){this.buttonPreviousPageLabel&&(this.buttonPreviousPageLabel.textContent=i.I18n.translateViewFormText(this.getProperty("previousCaption"),"form-button")),this.buttonNextPageLabel&&(this.buttonNextPageLabel.textContent=i.I18n.translateViewFormText(this.getProperty("nextCaption"),"form-button")),this.buttonResetLabel&&(this.buttonResetLabel.textContent=i.I18n.translateViewFormText(this.getProperty("resetCaption"),"form-button")),this.buttonPrintLabel&&(this.buttonPrintLabel.textContent=i.I18n.translateViewFormText(this.getProperty("printCaption"),"form-button")),this.buttonSubmitLabel&&(this.buttonSubmitLabel.textContent=i.I18n.translateViewFormText(this.getProperty("submitCaption"),"form-button")),this.buttonSaveLabel&&(this.buttonSaveLabel.textContent=i.I18n.translateViewFormText(this.getProperty("saveCaption"),"form-button"))},e.prototype.supportsLabelInsideRendering=function(){return!1},e.prototype.embedInPDFPage=function(t){var e=this;[this.buttonSubmit].filter((function(t){return!!t})).forEach((function(n){var r=t.getDocument().create(a.PDFNodeEntityType.BUTTON),o=function(t){switch(t){case e.buttonReset:return"reset";case e.buttonSubmit:default:return"submit"}}(n);t.initializeFieldDimensions(n,r);var s=e.document.getProperty("theme.buttons."+o+".backgroundColor"),l=e.document.getProperty("theme.buttons."+o+".borderWidth")||"0px",c=e.document.getProperty("theme.buttons."+o+".borderColor"),p=e.document.getProperty("theme.buttons."+o+".color"),d=e.document.getProperty("theme.buttons."+o+".font.size"),h=e.document.getProperty("theme.buttons."+o+".font.family");r.setText(function(t){switch(t){case e.buttonReset:return u.Strings.trim(i.I18n.translateViewFormText(e.getProperty("resetCaption"),"form-button"));case e.buttonSubmit:default:return u.Strings.trim(i.I18n.translateViewFormText(e.getProperty("submitCaption"),"form-button"))}}(n)).setFontFamily(h).setFontSize(parseInt(d)||16).setTextColor(p).setBorderColor(c).setBorderWidth(l).setBackgroundColor(s).setButtonType(function(t){switch(t){case e.buttonReset:return a.PDFButtonType.RESET;case e.buttonSubmit:default:return a.PDFButtonType.SUBMIT}}(n)),t.writeButton(r)}))},e.SELECTED_BUTTON=null,e}(n.Input);e.AutoButtons=p}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r;void 0===(r=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.rootNode=document.createElement("div"),this.rootNode.setAttribute("data-role","progress-bar"),this.progress=document.createElement("div"),this.progress.setAttribute("data-role","progress"),this.rootNode.appendChild(this.progress),this.setValue(0)}return t.prototype.getRoot=function(){return this.rootNode},t.prototype.setValue=function(t){(t=~~t)<0&&(t=0),t>100&&(t=100),t!==this.value&&(this.value=t,this.progress.style.width=this.value+"%")},t.prototype.getValue=function(){return this.value},t}();e.ProgressBar=n}.apply(e,[n,e]))||(t.exports=r)},function(t,e,n){"use strict";var r,o;r=[n,e,n(167),n(1)],void 0===(o=function(t,e,n,r){Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){this.upload=t,this.root=document.createElement("div"),this.root.className="input commands-bar",this.update()}return t.prototype.getRoot=function(){return this.root},t.prototype.update=function(){var t=this,e=new n.CheckboxSwitch;e.setValue(this.upload.isMultiple()),this.root.appendChild(e.getRoot()),e.on("click",(function(){t.upload.setProperty("multiple",e.getValue(),t.upload),t.upload.onMultipleSettingChanged(),t.upload.render()})),this.root.appendChild(document.createTextNode(r.I18n.translateApplicationText("Allow multiple files","control-defaults.file")))},t}();e.FileUploadCommandsBar=o}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(70),n(6)],void 0===(o=function(t,e,n,r){Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.getValueType=function(){return n.EInputDefaultValue.MULTI_LINE_TEXT},e.prototype.getValue=function(){if("string"==typeof this.value&&""!==r.Strings.trim(this.value))return this.value},e.prototype.explainValue=function(){return this.getValue()||void 0},e}(n.InputDefaultValue);e.MultipleLineTextInputDefaultValue=o}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(9),n(15),n(4),n(271),n(1),n(10),n(13),n(31)],void 0===(o=function(t,e,n,r,o,i,a,u,l,c){Object.defineProperty(e,"__esModule",{value:!0});var p=function(t){function e(n,r,o){var s=t.call(this,n,r||e.getDefaultProperties(n),o)||this;if(s.addClass("picture"),s.emptyStateDOMNode=document.createElement("div"),s.emptyStateDOMNode.className="empty",s.img=document.createElement("img"),s.imageAndEmptyStatePlaceholder=document.createElement("div"),s.imageAndEmptyStatePlaceholder.className="input",s.imageAndEmptyStatePlaceholder.appendChild(s.img),s.imageAndEmptyStatePlaceholder.appendChild(s.emptyStateDOMNode),s.img.onerror=function(){s.onImageLoadError()},s.img.onload=function(){s.onImageLoadSuccess()},n.isEditMode())s.toolbar=new i.PictureToolbar(s);else{var a=s.getProperty("href");a&&(s.clickLink=document.createElement("a"),s.clickLink.className="click-link",s.imageAndEmptyStatePlaceholder.appendChild(s.clickLink),s.clickLink.setAttribute("href",a),s.clickLink.setAttribute("target",s.getProperty("target")||"_self"))}return s.onAlternateTextChanged(),s.onSourceChanged(),s}return s(e,t),e.prototype.onAlternateTextChanged=function(){var t=this.getProperty("alternateText");t?this.img.setAttribute("alt",t):this.img.removeAttribute("alt")},e.prototype.onSourceChanged=function(){var t=this.getProperty("source");t?this.img.setAttribute("src",c.CDN.getCDNUrl(t)):this.img.removeAttribute("src"),this.toolbar&&this.toolbar.update()},e.getDefaultProperties=function(t){return this.addSizeProperties({name:"Q",source:"",alternateText:"",visibility:"",href:"",target:"_self",input:{backgroundColor:new u.ThemePropertyValue("transparent"),borderColor:new u.ThemePropertyValue("transparent"),borderRadius:t.getThemeValues().getProperty("input.borderRadius").inherit(),borderStyle:t.getThemeValues().getProperty("input.borderStyle").inherit(),borderWidth:t.getThemeValues().getProperty("input.borderWidth").inherit()}})},e.prototype.clearFormatting=function(e){return void 0===e&&(e=!0),this.setProperty("input.borderColor","transparent"),this.setProperty("input.backgroundColor","transparent"),t.prototype.clearFormatting.call(this,e)},e.prototype.getTranslations=function(){var t=[];return this.properties.alternateText&&t.push({original:this.properties.alternateText}),t},e.prototype.getTypeId=function(){return o.NodeTypes.PICTURE},e.prototype.getValue=function(){return null},e.prototype.setValue=function(t){return this},e.prototype.hasLabel=function(){return!1},e.prototype.hasValue=function(){return!1},e.prototype.getNodeName=function(){return"Picture"},e.prototype.getFieldsLayout=function(){var t=[{row:0,domNode:this.imageAndEmptyStatePlaceholder,span:n.InputSpan.FULL}];return this.toolbar&&t.push({row:1,domNode:this.toolbar.getRoot(),span:n.InputSpan.FULL}),t},e.prototype.browseForSource=function(){this.document.isEditMode()&&this.document.trigger(r.Document.EVENT_EDITOR_REQUEST_IMAGE_SOURCE,this)},e.prototype.onImageLoadError=function(){this.img.classList.remove("loaded"),this.img.classList.add("error")},e.prototype.onImageLoadSuccess=function(){this.img.classList.remove("error"),this.img.classList.add("loaded")},e.prototype.getRenderedCSS=function(){var t=u.cast(this.properties.input.backgroundColor),e=u.cast(this.properties.input.borderColor),n=u.cast(this.properties.input.borderWidth),r=u.cast(this.properties.input.borderRadius);return"\n            img,\n            .empty {\n                background-color: "+t+";\n                border: "+n+" "+u.cast(this.properties.input.borderStyle)+" "+e+";\n                border-radius: "+r+';\n            }\n            \n            img:not([src]) + .empty:after {\n                content: "'+a.I18n.translateApplicationText("No picture selected","control-defaults.picture")+'" !important;\n            }\n        '},e.prototype.performTranslation=function(){this.img&&this.img.setAttribute("alt",a.I18n.translateViewFormText(this.properties.alternateText||""))},e.prototype.supportsLabelInsideRendering=function(){return!1},e.prototype.embedInPDFPage=function(e){if(this.img.classList.contains("loaded")){var n=e.getDocument().create(l.PDFNodeEntityType.IMAGE);e.initializeFieldDimensions(this.img,n),n.setSrc(this.img.src),e.writeImage(n)}else t.prototype.embedInPDFPage.call(this,e)},e}(n.Input);e.Picture=p}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(1)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.picture=t,this.root=document.createElement("div"),this.root.className="input toolbar"}return t.prototype.getRoot=function(){return this.root},t.prototype.update=function(){for(var t,e=this,r=this.picture.getProperty("source");this.root.firstChild;)this.root.removeChild(this.root.firstChild);(t=document.createElement("a")).setAttribute("href","javascript:"),t.textContent=r?n.I18n.translateApplicationText("Select picture","control-defaults.picture"):n.I18n.translateApplicationText("Upload a picture","control-defaults.picture"),t.onclick=function(){console.log("browse for source"),e.picture.browseForSource()},this.root.appendChild(t)},t}();e.PictureToolbar=r}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(9),n(4),n(43),n(1),n(10),n(13),n(77)],void 0===(o=function(t,e,n,r,o,i,a,u,l){Object.defineProperty(e,"__esModule",{value:!0});var c=function(t){function e(n,r,o){var i=t.call(this,n,r||e.getDefaultProperties(n),o)||this;return i.addClass("textbox"),i.input=document.createElement("input"),i.input.type="text",i.onPlaceholderChanged(),n.isEditMode()?i.installEditModeEvents():i.installViewerModeEvents(),i}return s(e,t),e.prototype.getFieldsLayout=function(){return[{domNode:this.input,row:0,span:n.InputSpan.FULL}]},e.prototype.getTypeId=function(){return this.overrideTypeId?this.overrideTypeId:r.NodeTypes.EMAIL},e.prototype.setTypeId=function(t){switch(t){case r.NodeTypes.LINK:this.overrideTypeId=t,this.setProperty("validation.format","url",this);break;case r.NodeTypes.EMAIL:case void 0:this.overrideTypeId=t,this.setProperty("validation.format","email",this);break;default:throw new Error("invalid override type id")}return this},e.prototype.hasLabel=function(){return!0},e.prototype.hasValue=function(){return!0},e.prototype.getValue=function(){return this.input.value},e.prototype.setValue=function(t){return this.input.value=0===t?"0":String(t||""),this},e.prototype.getNodeName=function(){return"Email"},e.getDefaultProperties=function(e){var n=i.I18n.translateApplicationText("Email","control-defaults");return t.addInputProperties.call(this,t.addLabelProperties.call(this,t.addSizeProperties.call(this,{name:"Q",visibility:"",formula:"",placeholder:i.I18n.translateApplicationText("person@example.com","system.default-email-address"),validation:{required:!1,format:"email",customErrorMessage:"",unique:!1}}),n,e),e)},e.prototype.getTranslations=function(){var t=[];if(this.properties.placeholder&&t.push({original:this.properties.placeholder}),this.properties.label.text&&t.push({original:this.properties.label.text}),this.hasProperty("validation.customErrorMessage")){var e=this.getProperty("validation.customErrorMessage");e&&t.push({original:e,context:"form-fields-errors"})}return t},e.prototype.getRenderedCSS=function(){var t=a.cast(this.properties.label.color),e=a.cast(this.properties.label.font.family),n=a.cast(this.properties.label.font.size),r=a.cast(this.properties.label.font.bold)?"bold":"normal",o=a.cast(this.properties.label.font.italic)?"italic":"normal",i=a.cast(this.properties.label.font.underline)?"underline":"none",s=a.cast(this.properties.label.font.align),u=a.cast(this.properties.input.color),l=a.cast(this.properties.input.backgroundColor),c=a.cast(this.properties.input.borderColor),p=a.cast(this.properties.input.borderWidth),d=a.cast(this.properties.input.borderRadius),h=a.cast(this.properties.input.borderStyle),f=a.cast(this.properties.input.font.family),g=a.cast(this.properties.input.font.size);return"\n            > label {\n                color: "+t+";\n                font-size: "+n+'px;\n                font-family: "'+e+'";\n                font-weight: '+r+";\n                font-style: "+o+";\n                text-decoration: "+i+";\n                text-align: "+s+";\n            }\n            input[type=text] {\n                color: "+u+";\n                background-color: "+l+";\n                border: "+p+" "+h+" "+c+";\n                border-radius: "+d+";\n                font-weight: "+(a.cast(this.properties.input.font.bold)?"bold":"normal")+";\n                font-style: "+(a.cast(this.properties.input.font.italic)?"italic":"normal")+";\n                text-decoration: "+(a.cast(this.properties.input.font.underline)?"underline":"none")+";\n                text-align: "+a.cast(this.properties.input.font.align)+";\n                font-size: "+g+'px;\n                font-family: "'+f+'";\n                &:hover,\n                &:focus {\n                    border-color: '+this.document.getProperty("theme.selection.borderColor")+";\n                }\n                &:focus {\n                    background-color: "+this.document.getProperty("theme.selection.backgroundColor")+";\n                }\n            }\n        "},e.prototype.onPlaceholderChanged=function(){this.input.placeholder=this.getProperty("placeholder")||"",this.getDocument().isEditMode()&&this.input.placeholder!==this.input.value&&(this.input.value=this.input.placeholder)},e.prototype.installEditModeEvents=function(){var t=this;this.input.value=this.getProperty("placeholder")||"",this.input.oninput=function(){t.setProperty("placeholder",t.input.value,t),t.input.placeholder=t.input.value},this.input.onfocus=function(){setTimeout((function(){t.getDocument().getSelection().getItem()!==t&&t.getDocument().getSelection().set(t,n.SelectionInputContext.INPUT,t.input)}),0)}},e.prototype.listenToUserInput=function(t){var e=this;return this.input.oninput=function(){t.updateValue(e)},this},e.prototype.getAllowedValidators=function(){return["email"]},e.prototype.installViewerModeEvents=function(){var t=this;this.input.onblur=function(){t.input.value&&!o.DataFormat.isEmail(t.input.value)?t.setError(t.getProperty("validation.customErrorMessage")||{message:'Value "%1" does not seem to be a valid email address',code:11,args:[t.input.value]}):t.setError(null)}},e.prototype.performTranslation=function(){this.labelDOMNode&&(this.labelDOMNode.textContent=i.I18n.translateViewFormText(this.getProperty("label.text"),this.getLabelI18nContext())),this.input&&(this.input.placeholder=i.I18n.translateViewFormText(this.getProperty("placeholder")))},e.prototype.supportsLabelInsideRendering=function(){return!0},e.prototype.embedInPDFPage=function(t){t.writeHTMLElement(this.labelDOMNode);var e=t.getDocument().create(u.PDFNodeEntityType.INPUT_TEXT);t.initializeFieldDimensions(this.input,e),e.setBackgroundColor(a.cast(this.properties.input.backgroundColor)).setTextColor(a.cast(this.properties.input.color)).setBorderWidth(parseInt(a.cast(this.properties.input.borderWidth)||"1")).setBorderColor(a.cast(this.properties.input.borderColor)).setValue(this.getProperty("placeholder")).setFontFamily(a.cast(this.properties.input.font.family)).setMultiLine(!1).setName(this.getProperty("name")).setFontSize(a.cast(this.properties.input.font.size)).setRequired(this.isRequired()).setRepeatedIndex(this.getRepeatedIndex()),t.appendChild(e)},e.prototype.supportsDefaultValue=function(){return!0},e.prototype.getDefaultValueStrategy=function(){return new l.SingleLineTextInputDefaultValue},e}(n.Input);e.Email=c}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(9),n(4),n(43),n(1),n(10),n(13),n(77)],void 0===(o=function(t,e,n,r,o,i,a,u,l){Object.defineProperty(e,"__esModule",{value:!0});var c=function(t){function e(n,r,o){var i=t.call(this,n,r||e.getDefaultProperties(n),o)||this;return i.addClass("textbox"),i.input=document.createElement("input"),i.input.type="text",i.onPlaceholderChanged(),n.isEditMode()?i.installEditModeEvents():i.installViewerModeEvents(),i}return s(e,t),e.prototype.getFieldsLayout=function(){return[{domNode:this.input,row:0,span:n.InputSpan.FULL}]},e.prototype.getTypeId=function(){return this.overrideTypeId?this.overrideTypeId:r.NodeTypes.LINK},e.prototype.setTypeId=function(t){switch(t){case r.NodeTypes.EMAIL:this.overrideTypeId=t,this.setProperty("validation.format","email",this);break;case r.NodeTypes.LINK:case void 0:this.overrideTypeId=t,this.setProperty("validation.format","url",this);break;default:throw new Error("invalid override type id")}return this},e.prototype.hasLabel=function(){return!0},e.prototype.hasValue=function(){return!0},e.prototype.getValue=function(){return this.input.value},e.prototype.setValue=function(t){return this.input.value=0===t?"0":String(t||""),this},e.prototype.getNodeName=function(){return"Website"},e.getDefaultProperties=function(e){var n=i.I18n.translateApplicationText("Website","control-defaults");return t.addInputProperties.call(this,t.addLabelProperties.call(this,t.addSizeProperties.call(this,{name:"Q",visibility:"",formula:"",placeholder:i.I18n.translateApplicationText("https://www.example.com/","system.default-url"),validation:{required:!1,format:"url",customErrorMessage:"",unique:!1}}),n,e),e)},e.prototype.getTranslations=function(){var t=[];if(this.properties.placeholder&&t.push({original:this.properties.placeholder}),this.properties.label.text&&t.push({original:this.properties.label.text}),this.hasProperty("validation.customErrorMessage")){var e=this.getProperty("validation.customErrorMessage");e&&t.push({original:e,context:"form-fields-errors"})}return t},e.prototype.getRenderedCSS=function(){var t=a.cast(this.properties.label.color),e=a.cast(this.properties.label.font.family),n=a.cast(this.properties.label.font.size),r=a.cast(this.properties.label.font.bold)?"bold":"normal",o=a.cast(this.properties.label.font.italic)?"italic":"normal",i=a.cast(this.properties.label.font.underline)?"underline":"none",s=a.cast(this.properties.label.font.align),u=a.cast(this.properties.input.color),l=a.cast(this.properties.input.backgroundColor),c=a.cast(this.properties.input.borderColor),p=a.cast(this.properties.input.borderWidth),d=a.cast(this.properties.input.borderRadius),h=a.cast(this.properties.input.borderStyle),f=a.cast(this.properties.input.font.family),g=a.cast(this.properties.input.font.size);return"\n            > label {\n                color: "+t+";\n                font-size: "+n+'px;\n                font-family: "'+e+'";\n                font-weight: '+r+";\n                font-style: "+o+";\n                text-decoration: "+i+";\n                text-align: "+s+";\n            }\n            input[type=text] {\n                color: "+u+";\n                background-color: "+l+";\n                border: "+p+" "+h+" "+c+";\n                border-radius: "+d+";\n                font-weight: "+(a.cast(this.properties.input.font.bold)?"bold":"normal")+";\n                font-style: "+(a.cast(this.properties.input.font.italic)?"italic":"normal")+";\n                text-decoration: "+(a.cast(this.properties.input.font.underline)?"underline":"none")+";\n                text-align: "+a.cast(this.properties.input.font.align)+";\n                font-size: "+g+'px;\n                font-family: "'+f+'";\n                &:hover,\n                &:focus {\n                    border-color: '+this.document.getProperty("theme.selection.borderColor")+";\n                }\n                &:focus {\n                    background-color: "+this.document.getProperty("theme.selection.backgroundColor")+";\n                }\n            }\n        "},e.prototype.onPlaceholderChanged=function(){this.input.placeholder=this.getProperty("placeholder")||"",this.getDocument().isEditMode()&&this.input.placeholder!==this.input.value&&(this.input.value=this.input.placeholder)},e.prototype.installEditModeEvents=function(){var t=this;this.input.value=this.getProperty("placeholder")||"",this.input.oninput=function(){t.setProperty("placeholder",t.input.value,t),t.input.placeholder=t.input.value},this.input.onfocus=function(){setTimeout((function(){t.getDocument().getSelection().getItem()!==t&&t.getDocument().getSelection().set(t,n.SelectionInputContext.INPUT,t.input)}),0)}},e.prototype.listenToUserInput=function(t){var e=this;return this.input.oninput=function(){t.updateValue(e)},this},e.prototype.getAllowedValidators=function(){return["url"]},e.prototype.installViewerModeEvents=function(){var t=this;this.input.onblur=function(){t.input.value&&!o.DataFormat.isURL(t.input.value)?t.setError(t.getProperty("validation.customErrorMessage")||"Please input a valid website address"):t.setError(null)}},e.prototype.performTranslation=function(){this.labelDOMNode&&(this.labelDOMNode.textContent=i.I18n.translateViewFormText(this.getProperty("label.text"),this.getLabelI18nContext())),this.input&&(this.input.placeholder=i.I18n.translateViewFormText(this.getProperty("placeholder")))},e.prototype.supportsLabelInsideRendering=function(){return!0},e.prototype.embedInPDFPage=function(t){t.writeHTMLElement(this.labelDOMNode);var e=t.getDocument().create(u.PDFNodeEntityType.INPUT_TEXT);t.initializeFieldDimensions(this.input,e),e.setBackgroundColor(a.cast(this.properties.input.backgroundColor)).setTextColor(a.cast(this.properties.input.color)).setBorderWidth(parseInt(a.cast(this.properties.input.borderWidth)||"1")).setBorderColor(a.cast(this.properties.input.borderColor)).setValue(this.getProperty("placeholder")).setFontFamily(a.cast(this.properties.input.font.family)).setMultiLine(!1).setName(this.getProperty("name")).setFontSize(a.cast(this.properties.input.font.size)).setRequired(this.isRequired()).setRepeatedIndex(this.getRepeatedIndex()),t.appendChild(e)},e.prototype.supportsDefaultValue=function(){return!0},e.prototype.getDefaultValueStrategy=function(){return new l.SingleLineTextInputDefaultValue},e}(n.Input);e.Link=c}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(9),n(275),n(165),n(6),n(85),n(4),n(1),n(10),n(13),n(77)],void 0===(o=function(t,e,n,r,o,i,a,u,l,c,p,d){Object.defineProperty(e,"__esModule",{value:!0});var h=function(t){function e(n,i,s){var u=t.call(this,n,i||e.getDefaultProperties(n),s)||this;return u.addClass("time"),u.input=new o.TimeInput(u.getProperty("validation.format")===e.TIME_FORMAT_12_HOURS),u.input.getHoursGroup().setPlaceholder(u.getProperty("labelHH")||"HH"),u.input.getMinutesGroup().setPlaceholder(u.getProperty("labelMM")||"MM"),u.timePicker=new r.NativeTimePicker(u.input.getInput()),u.dateAndPickerWrapper=document.createElement("div"),u.dateAndPickerWrapper.appendChild(u.input.getRoot()),u.dateAndPickerWrapper.appendChild(u.timePicker.getRoot()),u.dateAndPickerWrapper.className="field",u.onTimeConstraintsChanged(),u.timePicker.on("change",(function(t,e){u.onTimePickerChanged(t,e)})),u.input.on("picker",(function(){u.timePicker.trigger("open")})),u.timePicker.on("close",(function(t){t!==a.PickerCloseEffect.CANCEL&&u.input.focus()})),u.onTimeFormatChanged(),u}return s(e,t),e.getDefaultProperties=function(n){var r=l.I18n.translateApplicationText("Time","control-defaults");return t.addLabelProperties.call(this,t.addSizeProperties.call(this,{name:"Q",visibility:"",formula:"",labelHH:l.I18n.translateApplicationText("HH","system.date-format.hh"),labelMM:l.I18n.translateApplicationText("MM","system.date-format.mm"),validation:{format:e.TIME_FORMAT_12_HOURS,required:!1,customErrorMessage:"",minValue:"",maxValue:"",unique:!1},input:{color:n.getThemeValues().getProperty("input.color").inherit(),backgroundColor:n.getThemeValues().getProperty("input.backgroundColor").inherit(),borderColor:n.getThemeValues().getProperty("input.borderColor").inherit(),borderRadius:n.getThemeValues().getProperty("input.borderRadius").inherit(),borderStyle:n.getThemeValues().getProperty("input.borderStyle").inherit(),borderWidth:n.getThemeValues().getProperty("input.borderWidth").inherit(),font:{family:n.getThemeValues().getProperty("input.font.family").inherit(),size:n.getThemeValues().getProperty("input.font.size").inherit()}}}),r,n)},e.prototype.getTranslations=function(){var t=[];if(this.properties.label.text&&t.push({original:this.properties.label.text}),t.push({original:this.getProperty("labelHH")||"HH",context:"time-control"}),t.push({original:this.getProperty("labelMM")||"MM",context:"time-control"}),t.push({original:"SS",context:"time-control"}),this.hasProperty("validation.customErrorMessage")){var e=this.getProperty("validation.customErrorMessage");e&&t.push({original:e,context:"form-fields-errors"})}return t},e.prototype.onTimeConstraintsChanged=function(){var t,n,r=this.getProperty("validation.minValue"),o=this.getProperty("validation.maxValue");t=e.parseTimeConstraint(r),n=e.parseTimeConstraint(o),this.input.setMinTime(t).setMaxTime(n),this.timePicker.setMinTime(t).setMaxTime(n)},e.prototype.onTimePickerChanged=function(t,e){if(null===t||null===e)this.input.setValue(null,null);else{var n=String(t<10?"0"+t:t),r=String(e<10?"0"+e:e);this.input.setValue(parseInt(n),parseInt(r))}this.input.trigger("input")},e.parseTimeConstraint=function(t){if(!t)return null;if(!(t=i.Strings.trim(t).toLowerCase()))return null;var e,n,r,o=new Date;if(o.setMilliseconds(0),o.setSeconds(0),"now"===t)return{hour:o.getHours(),minute:o.getMinutes()};switch(!0){case!!(e=/^([+-])?(([ ]+)?([\d]+)([hm])([ ]+)?)+$/i.exec(t)):var s="+";for((e=/^[-|+]/.exec(t))&&(s=e[0],t=t.substr(1));e=/^([ ]+)?([\d]+)([hm])([ ]+)?/i.exec(t);){t=t.substr(e[0].length);var a=parseInt(e[2]),u=e[3].toLowerCase();if(a)switch(u){case"h":"-"===s?o.setHours(o.getHours()-a):o.setHours(o.getHours()+a);break;case"m":o.setMinutes(o.getMinutes()-a)}}return{hour:o.getHours(),minute:o.getMinutes()};case!!(e=/^([\d]{2}):([\d]{2})$/.exec(t)):return n=parseInt(e[1]),r=parseInt(e[2]),n>=0&&n<=23&&r>=0&&r<=59?{hour:parseInt(e[1]),minute:parseInt(e[2])}:null;case!!(e=/^([\d]{1,2})(:([\d]{2}))?(([ ]+)?(am|pm))?$/i.exec(t)):n=parseInt(e[1]),r=parseInt(e[3])||0;var l="am"===e[6].toLowerCase();return(n>=0&&l&&n<12||n>0&&!l&&n<13)&&r>=0&&r<=59?{hour:n+(12===n||l?0:12),minute:r}:null;default:return null}},e.prototype.getFieldsLayout=function(){return[{domNode:this.dateAndPickerWrapper,span:n.InputSpan.FULL,row:0}]},e.prototype.getNodeName=function(){return"Time"},e.prototype.getTypeId=function(){return u.NodeTypes.TIME},e.prototype.getValue=function(){return this.input.getValue()||""},e.prototype.hasLabel=function(){return!0},e.prototype.hasValue=function(){return!0},e.prototype.setValue=function(t){var n;return t&&"string"==typeof t&&(n=e.parseTimeConstraint(t))?(this.input.setValue(n.hour,n.minute),null!==this.input.getValue()&&this.timePicker.trigger("set-time",this.input.getHours(),this.input.getMinutes())):(this.input.setValue(null,null),t||this.input.clearValue(!1)),this},e.prototype.getAllowedValidators=function(){return[e.TIME_FORMAT_24_HOURS,e.TIME_FORMAT_12_HOURS]},e.prototype.listenToUserInput=function(t){var e=this;return this.input.on("input",(function(){t.updateValue(e),null!==e.input.getValue()&&e.timePicker.trigger("set-time",e.input.getHours(),e.input.getMinutes())})),this},e.prototype.getRenderedCSS=function(){var t=c.cast(this.properties.label.color),e=c.cast(this.properties.label.font.family),n=c.cast(this.properties.label.font.size),r=c.cast(this.properties.label.font.bold)?"bold":"normal",o=c.cast(this.properties.label.font.italic)?"italic":"normal",i=c.cast(this.properties.label.font.underline)?"underline":"none",s=c.cast(this.properties.label.font.align),a=c.cast(this.properties.input.color),u=c.cast(this.properties.input.backgroundColor),l=c.cast(this.properties.input.borderColor),p=c.cast(this.properties.input.borderWidth),d=2*(parseInt(p)||0),h=c.cast(this.properties.input.borderRadius),f=c.cast(this.properties.input.borderStyle),g=c.cast(this.properties.input.font.family),m=c.cast(this.properties.input.font.size),y=this.document.getProperty("theme.selection.borderColor"),v=this.document.getProperty("theme.selection.backgroundColor");return"\n            > label {\n                color: "+t+";\n                font-size: "+n+'px;\n                font-family: "'+e+'";\n                font-weight: '+r+";\n                font-style: "+o+";\n                text-decoration: "+i+";\n                text-align: "+s+";\n            }\n            \n            .field {\n                color: "+a+";\n                background-color: "+u+";\n                border: "+p+" "+f+" "+l+";\n                border-radius: "+h+";\n                &:hover {\n                    border-color: "+y+";\n                }\n                &:focus {\n                    border-color: "+y+";\n                    background-color: "+v+";                    \n                }\n                &:focus-within {\n                    border-color: "+y+";\n                    background-color: "+v+";                    \n                }\n                [data-role=clear] {\n                    bottom: "+d+"px;\n                }\n            }\n\n            .field [data-role=date-input],\n            .field [data-role=time-input] {\n                font-size: "+m+'px;\n                font-family: "'+g+'";\n            }\n            \n        '},e.prototype.performTranslation=function(){this.labelDOMNode&&(this.labelDOMNode.textContent=l.I18n.translateViewFormText(this.getProperty("label.text"),this.getLabelI18nContext())),this.input.getHoursGroup().setPlaceholder(l.I18n.translateViewFormText(this.getProperty("labelHH")||"HH","time-control")),this.input.getMinutesGroup().setPlaceholder(l.I18n.translateViewFormText(this.getProperty("labelMM")||"MM","time-control"))},e.prototype.onTimeFormatChanged=function(){switch(this.properties.validation.format){case e.TIME_FORMAT_12_HOURS:this.input.setTimeFormat(!0),this.timePicker.setTimeFormat(!0);break;case e.TIME_FORMAT_24_HOURS:default:this.input.setTimeFormat(!1),this.timePicker.setTimeFormat(!1)}},e.prototype.supportsLabelInsideRendering=function(){return!0},e.prototype.embedInPDFPage=function(t){t.writeHTMLElement(this.labelDOMNode);var e=t.getDocument().create(p.PDFNodeEntityType.INPUT_TEXT);t.initializeFieldDimensions(this.dateAndPickerWrapper,e),e.setBackgroundColor(c.cast(this.properties.input.backgroundColor)).setTextColor(c.cast(this.properties.input.color)).setBorderWidth(parseInt(c.cast(this.properties.input.borderWidth)||"1")).setBorderColor(c.cast(this.properties.input.borderColor)).setValue(this.input.getRoot().textContent.replace(/AMPM/g,"PM")).setFontFamily(c.cast(this.properties.input.font.family)).setMultiLine(!1).setName(this.getProperty("name")).setFontSize(c.cast(this.properties.input.font.size)).setRequired(this.isRequired()).setRepeatedIndex(this.getRepeatedIndex()),t.appendChild(e)},e.prototype.supportsDefaultValue=function(){return!0},e.prototype.getDefaultValueStrategy=function(){return new d.SingleLineTextInputDefaultValue},e.TIME_FORMAT_24_HOURS="time.hhmm",e.TIME_FORMAT_12_HOURS="time.hhmm_ampm",e}(n.Input);e.Time=h}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(3),n(276),n(41),n(6)],void 0===(o=function(t,e,n,r,o,i){Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(n){var i=t.call(this)||this;return i.initialTime="",i.minTime=null,i.maxTime=null,i.rootNode=document.createElement("div"),i.rootNode.setAttribute("data-role","time-picker"),i.rootNode.innerHTML='<span class="vfb vfb-time"></span>',e.isSupported()?(i.timeInputNode=document.createElement("input"),i.timeInputNode.setAttribute("type","time"),i.timeInputNode.setAttribute("hideseconds",""),i.timeInputNode.setAttribute("step","60"),i.rootNode.appendChild(i.timeInputNode),i.timeInputNode.onchange=function(){var t=String(i.timeInputNode.value||"");i.timeInputNode.value=i.initialTime;var e=/^([\d]{2}):([\d]{2})$/.exec(t);e?i.trigger("change",~~e[1],~~e[2]):i.trigger("change",null,null)},i.on("set-time",(function(t,e){var n,r,o=~~e,s=~~t;0===o&&0===s?(n="00",r="00"):(n=o<10?"0"+o:String(o),r=s<10?"0"+s:String(s)),i.initialTime=r+":"+n,i.timeInputNode&&(i.timeInputNode.value=null===t||null===e?"":i.initialTime,i.initialTime=i.timeInputNode.value||"00:00")}))):(i.anchorElement=n,i.softwareTimePicker=(new r.TimePicker).setInput(i.anchorElement||i.rootNode).setModal(!0),i.softwareTimePicker.on("input",(function(t,e){i.trigger("change",t,e)})),i.softwareTimePicker.on("close",(function(t){i.trigger("close",t)})),i.rootNode.onclick=function(){i.softwareTimePicker.show()},i.on("open",(function(){i.softwareTimePicker.show()})),i.on("set-time",(function(t,e){i.softwareTimePicker.setTime(null===t?null:parseInt(t),null===e?null:parseInt(e))}))),""===o.Browser.meetsRequirements("* * mobile * *")&&i.rootNode.setAttribute("data-size","stretch-input"),i}return s(e,t),e.prototype.setTimeFormat=function(t){return this.softwareTimePicker&&this.softwareTimePicker.setTimeFormat(t),this},e.prototype.getRoot=function(){return this.rootNode},e.prototype.setMinTime=function(t){var n=this;return this.minTime=t,this.softwareTimePicker?this.softwareTimePicker.setMinTime(t):this.timeInputNode&&(t?this.timeInputNode.setAttribute("min",e.timeConstraintToString(t)):this.timeInputNode.removeAttribute("min"),setTimeout((function(){n.fixCircularMinMaxValuesOnNativeTimePicker()}),1)),this},e.prototype.setMaxTime=function(t){var n=this;return this.maxTime=t,this.softwareTimePicker?this.softwareTimePicker.setMaxTime(t):this.timeInputNode&&(t?this.timeInputNode.setAttribute("max",e.timeConstraintToString(t)):this.timeInputNode.removeAttribute("max"),setTimeout((function(){n.fixCircularMinMaxValuesOnNativeTimePicker()}),1)),this},e.prototype.fixCircularMinMaxValuesOnNativeTimePicker=function(){if(this.minTime&&this.maxTime&&this.timeInputNode){var t=60*this.minTime.hour+this.minTime.minute;60*this.maxTime.hour+this.maxTime.minute<t&&(this.timeInputNode.removeAttribute("min"),this.timeInputNode.removeAttribute("max"))}},e.timeConstraintToString=function(t){return i.Strings.strPad(String(t.hour),2,"0",i.EStringPadType.PAD_LEFT)+":"+i.Strings.strPad(String(t.minute),2,"0",i.EStringPadType.PAD_LEFT)},e.isSupported=function(){return void 0===this.supported&&(this.supported=this.performTimeInputDetection()),this.supported},e.performTimeInputDetection=function(){var t=document.createElement("input");t.setAttribute("type","time");t.setAttribute("value","not-a-time");var e="not-a-time"!==t.value;return e&&""===o.Browser.meetsRequirements("* * desktop * *")&&(e=!1),e},e}(n.EventEmitter);e.NativeTimePicker=a}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(3),n(85),n(21),n(6)],void 0===(o=function(t,e,n,r,o,i){Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(){var e=t.call(this)||this;return e.isShortTime=!1,e.modal=!1,e.minTime=null,e.maxTime=null,e.initHoursAndMinutesToLocalTime(),e.timeConstraintCollection=new l,e.onWindowScroll=function(){e.root&&e.root.parentNode&&e.anchorToInput()},e}return s(e,t),e.prototype.setMinTime=function(t){return this.minTime=t,this.ensureTimeStaysInIntervalMinMaxTime(),this.timeConstraintCollection.setMinTime(t),this},e.prototype.setMaxTime=function(t){return this.maxTime=t,this.ensureTimeStaysInIntervalMinMaxTime(),this.timeConstraintCollection.setMaxTime(t),this},e.prototype.ensureTimeStaysInIntervalMinMaxTime=function(){(this.minTime||this.maxTime)&&(this.minTime&&this.maxTime&&e.timeConstraintToInt(this.minTime)>e.timeConstraintToInt(this.maxTime)?e.timeToInt(this.hours,this.minutes)>=e.timeConstraintToInt(this.minTime)||e.timeToInt(this.hours,this.minutes)<=e.timeConstraintToInt(this.maxTime)||(this.hours=this.minTime.hour,this.minutes=this.minTime.minute):(this.minTime&&e.timeToInt(this.hours,this.minutes)<e.timeConstraintToInt(this.minTime)&&(this.hours=this.minTime.hour,this.minutes=this.minTime.minute),this.maxTime&&e.timeToInt(this.hours,this.minutes)>e.timeConstraintToInt(this.maxTime)&&(this.hours=this.maxTime.hour,this.minutes=this.maxTime.minute)))},e.timeConstraintToInt=function(t){return this.timeToInt(t.hour,t.minute)},e.timeToInt=function(t,e){return 60*t+e},e.prototype.setInput=function(t){return this.input=t,this},e.prototype.show=function(){var t=this;this.root?this.anchorToInput():(this.modal&&(this.modalOverlay=document.createElement("div"),this.modalOverlay.setAttribute("data-role","date-picker-modal"),document.body.appendChild(this.modalOverlay),this.modalOverlay.onmousedown=function(){t.hide(r.PickerCloseEffect.CANCEL)}),this.root=document.createElement("div"),this.root.setAttribute("data-role","time-picker-overlay"),this.root.tabIndex=0,this.ensureTimeStaysInIntervalMinMaxTime(),this.hoursList=new u((function(){return t.timeConstraintCollection.generateValidHours()}),this.isShortTime).setStep(1).setValue(this.hours),this.minutesList=new u((function(){var e=t.hoursList.getValue();return t.timeConstraintCollection.generateValidMinutes(e)})).setStep(15).setValue(this.minutes),this.root.appendChild(this.hoursList.getRoot()),this.root.appendChild(this.minutesList.getRoot()),this.selectedTimeIndicatorDOMNode=document.createElement("div"),this.selectedTimeIndicatorDOMNode.setAttribute("data-role","selected-time"),this.root.appendChild(this.selectedTimeIndicatorDOMNode),document.body.appendChild(this.root),this.buttonSelectTime=document.createElement("button"),this.buttonSelectTime.setAttribute("data-role","select-time"),this.buttonSelectTime.innerHTML='<span class="vfb vfb-check"></span>',this.root.appendChild(this.buttonSelectTime),this.anchorToInput(),this.hoursList.updateValues(),this.minutesList.updateValues(),this.hoursList.getRoot().focus(),this.initDOMEvents())},e.prototype.hide=function(t){this.root&&(window.removeEventListener("orientationchange",this.onWindowScroll,!0),window.removeEventListener("resize",this.onWindowScroll,!0),window.removeEventListener("scroll",this.onWindowScroll,!0),this.modalOverlay&&(this.modalOverlay.parentNode&&this.modalOverlay.parentNode.removeChild(this.modalOverlay),this.modalOverlay=void 0),this.root.parentNode&&this.root.parentNode.removeChild(this.root),this.buttonSelectTime=void 0,this.hoursList.getRoot().parentNode&&this.hoursList.getRoot().parentNode.removeChild(this.hoursList.getRoot()),this.minutesList.getRoot().parentNode&&this.minutesList.getRoot().parentNode.removeChild(this.minutesList.getRoot()),this.hoursList=void 0,this.minutesList=void 0,this.root=void 0,void 0!==t&&this.trigger("close",t))},e.prototype.setModal=function(t){return this.modal=t,this},e.prototype.anchorToInput=function(){var t=this.input.getBoundingClientRect(),e=Math.max(document.documentElement.clientHeight,window.innerHeight||0),n=Math.max(document.documentElement.clientWidth,window.innerWidth||0),r=this.root.offsetHeight,o=this.root.offsetWidth,i=!1,s=0,a=0;if(t.top+t.height+r<=e)s=Math.round(t.top+t.height+1),a=Math.round(t.left);else if(t.top-r>=0)s=Math.round(t.top-r),a=Math.round(t.left);else{var u=Math.max(document.documentElement.clientWidth,window.innerWidth||0),l=this.root.offsetWidth;i=!0,s=Math.round(e/2-r/2),a=Math.round(u/2-l/2)}i||a+t.left+o>n-10&&(a=Math.round(t.left+t.width-o)),a<0&&(a=0),s<0&&(s=0),this.root.style.left=a+"px",this.root.style.top=s+"px"},e.prototype.initHoursAndMinutesToLocalTime=function(){var t=new Date;this.hours=t.getHours(),this.minutes=t.getMinutes()},e.prototype.initDOMEvents=function(){var t=this;this.root.onkeydown=function(e){var n=e.keyCode||e.charCode;t.dispatchKeyboardEvent(n,e)},this.buttonSelectTime.onclick=function(){t.onUserValueSelected(),t.hide(r.PickerCloseEffect.SET_VALUE)},this.hoursList.on("change",(function(){t.onUserValueSelected(),t.minutesList.updateValues()})),this.minutesList.on("change",(function(){t.onUserValueSelected()})),window.addEventListener("orientationchange",this.onWindowScroll,!0),window.addEventListener("resize",this.onWindowScroll,!0),window.addEventListener("scroll",this.onWindowScroll,!0)},e.prototype.dispatchKeyboardEvent=function(t,e){var n=!1;switch(t){case o.KeyboardDriver.TAB:if(e.ctrlKey||e.altKey||e.metaKey)return;var i=[this.hoursList.getDecrementButton(),this.hoursList.getRoot(),this.hoursList.getIncrementButton(),this.minutesList.getDecrementButton(),this.minutesList.getRoot(),this.minutesList.getIncrementButton(),this.buttonSelectTime],s=i.indexOf(document.activeElement);e.shiftKey?document.activeElement===this.root||-1===s?i[i.length-1].focus():(--s<0&&(s=i.length-1),i[s].focus()):document.activeElement===this.root||-1===s?i[0].focus():(++s>=i.length&&(s=0),i[s].focus()),n=!0;break;case o.KeyboardDriver.ESC:n=!0,this.hide(r.PickerCloseEffect.REFOCUS);break;case o.KeyboardDriver.DOWN:if(e.altKey||e.ctrlKey||e.metaKey)return;switch(n=!0,document.activeElement){case this.root:this.hoursList.getDecrementButton().focus();break;case this.hoursList.getRoot():this.hoursList.increment();break;case this.minutesList.getRoot():this.minutesList.increment(e.shiftKey?1:15);break;case this.hoursList.getDecrementButton():this.hoursList.getRoot().focus();break;case this.hoursList.getIncrementButton():case this.minutesList.getIncrementButton():this.buttonSelectTime.focus();break;case this.minutesList.getDecrementButton():this.minutesList.getRoot().focus();break;case this.buttonSelectTime:this.hoursList.getDecrementButton().focus()}break;case o.KeyboardDriver.UP:if(e.altKey||e.ctrlKey||e.metaKey)return;switch(n=!0,document.activeElement){case this.root:this.hoursList.getIncrementButton().focus();break;case this.hoursList.getRoot():this.hoursList.decrement();break;case this.minutesList.getRoot():this.minutesList.decrement(e.shiftKey?1:15);break;case this.hoursList.getDecrementButton():case this.minutesList.getDecrementButton():this.buttonSelectTime.focus();break;case this.hoursList.getIncrementButton():this.hoursList.getRoot().focus();break;case this.minutesList.getIncrementButton():this.minutesList.getRoot().focus();break;case this.buttonSelectTime:this.hoursList.getIncrementButton().focus()}break;case o.KeyboardDriver.RIGHT:case o.KeyboardDriver.LEFT:if(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey)return;switch(n=!0,document.activeElement){case this.root:this.hoursList.getDecrementButton().focus();break;case this.hoursList.getRoot():this.minutesList.getRoot().focus();break;case this.minutesList.getRoot():this.hoursList.getRoot().focus();break;case this.hoursList.getDecrementButton():this.minutesList.getDecrementButton().focus();break;case this.hoursList.getIncrementButton():this.minutesList.getIncrementButton().focus();break;case this.minutesList.getDecrementButton():this.hoursList.getDecrementButton().focus();break;case this.minutesList.getIncrementButton():this.hoursList.getIncrementButton().focus()}break;case o.KeyboardDriver.ENTER:this.onUserValueSelected(),n=!0,this.hide(r.PickerCloseEffect.SET_VALUE)}n&&(e.preventDefault(),e.stopPropagation())},e.prototype.onUserValueSelected=function(){this.hours=this.hoursList.getValue(),this.minutes=this.minutesList.getValue(),this.trigger("input",this.hours,this.minutes)},e.prototype.setTime=function(t,e){var n=!1;if((null===t||null===e||t<0||t>23||e<0||e>59)&&(n=!0),n){var r=new Date;this.hours=r.getHours(),this.minutes=r.getMinutes()}else this.hours=t,this.minutes=e;return this.ensureTimeStaysInIntervalMinMaxTime(),this},e.prototype.setTimeFormat=function(t){return this.isShortTime=t,this},e}(n.EventEmitter);e.TimePicker=a;var u=function(t){function e(e,n){void 0===n&&(n=!1);var r=t.call(this)||this;return r.formatHoursShort=n,r.getValues=e,r.values=[],r.root=document.createElement("div"),r.root.setAttribute("data-role","timepicker-infinite-list"),r.buttonDecrement=document.createElement("button"),r.buttonDecrement.innerHTML="<span class='vfb vfb-caret-up'></span>",r.buttonDecrement.setAttribute("data-role","decrement"),r.buttonIncrement=document.createElement("button"),r.buttonIncrement.innerHTML="<span class='vfb vfb-caret-down'></span>",r.buttonIncrement.setAttribute("data-role","increment"),r.valueBody=document.createElement("div"),r.valueBody.setAttribute("data-role","body"),r.root.appendChild(r.buttonDecrement),r.root.appendChild(r.valueBody),r.root.appendChild(r.buttonIncrement),r.root.tabIndex=0,r.initDOMEvents(),r.incrementSnapTo=1,r}return s(e,t),e.prototype.updateValues=function(){var t=this;this.values=this.getValues(),-1===this.values.indexOf(this.value)&&(this.value=this.values[0],setTimeout((function(){t.trigger("change")}),1)),this.setValue(this.getValue())},e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t){return this.value=t,this.render(),this},e.prototype.render=function(){for(;this.valueBody.firstChild;)this.valueBody.removeChild(this.valueBody.firstChild);if(this.values&&this.values.length){var t,e=this.values.indexOf(this.value),n=[this.value],r=[this.value],o=this.values.length;t=e;for(var s=0;s<2;s++)--t<0&&(t=o-1),-1===n.indexOf(this.values[t])&&(r.unshift(this.values[t]),n.push(this.values[t]));t=e;for(s=0;s<2;s++)++t>=o&&(t=0),-1===n.indexOf(this.values[t])&&(r.push(this.values[t]),n.push(this.values[t]));switch(r.indexOf(this.value)){case 0:r=[null,null].concat(r);break;case 1:r=[null].concat(r)}s=0;for(var a=r.length;s<a;s++){var u=document.createElement("div");u.setAttribute("data-role","value");var l=r[s];null!==l&&(this.formatHoursShort?u.textContent=12===l?"12 PM":String(l%12)+(l<12?" AM":" PM"):u.textContent=i.Strings.strPad(String(l),2,"0",i.EStringPadType.PAD_LEFT),u.setAttribute("data-value",String(l))),this.valueBody.appendChild(u)}}},e.prototype.getRoot=function(){return this.root},e.prototype.getIncrementButton=function(){return this.buttonIncrement},e.prototype.getDecrementButton=function(){return this.buttonDecrement},e.prototype.increment=function(t){if(void 0===t&&(t=1),this.values.length){var e=0;do{var n=this.values.indexOf(this.value);n<0&&(n=0),++n>=this.values.length&&(n=0),this.value=this.values[n],e++}while(this.value%t!=0&&e<=this.values.length);this.trigger("change"),this.render()}},e.prototype.decrement=function(t){if(void 0===t&&(t=1),this.values.length){var e=0;do{var n=this.values.indexOf(this.value);--n<0&&(n=this.values.length-1),this.value=this.values[n],e++}while(this.value%t!=0&&e<=this.values.length);this.trigger("change"),this.render()}},e.prototype.initDOMEvents=function(){var t=this;this.buttonDecrement.onclick=function(){t.decrement(t.incrementSnapTo)},this.buttonIncrement.onclick=function(){t.increment(t.incrementSnapTo)},this.valueBody.addEventListener("mousewheel",(function(e){e.deltaY<0?t.decrement(1):e.deltaY>0&&t.increment(1)}),!0),this.valueBody.addEventListener("click",(function(e){var n=e.srcElement||e.target;n&&n.hasAttribute&&"value"===n.getAttribute("data-role")&&n.hasAttribute("data-value")&&(t.setValue(parseInt(n.getAttribute("data-value"))),t.trigger("change"))}),!1)},e.prototype.setStep=function(t){return this.incrementSnapTo=t,this},e}(n.EventEmitter),l=function(){function t(){this.minTime=null,this.maxTime=null}return t.prototype.setMinTime=function(t){return this.minTime=t||null,this},t.prototype.setMaxTime=function(t){return this.maxTime=t||null,this},t.prototype.generateValidHours=function(){if(null===this.minTime&&null===this.maxTime)return[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23];var t=[];if(this.minTime&&this.maxTime&&a.timeConstraintToInt(this.minTime)>a.timeConstraintToInt(this.maxTime)){for(var e=this.minTime.hour;e<24;e++)t.push(e);for(e=0;e<=this.maxTime.hour;e++)t.push(e);return t}if(this.minTime&&this.maxTime)for(e=this.minTime.hour;e<=this.maxTime.hour;e++)t.push(e);else if(this.minTime&&!this.maxTime)for(e=this.minTime.hour;e<24;e++)t.push(e);else for(e=0;e<=this.maxTime.hour;e++)t.push(e);return t},t.prototype.generateValidMinutes=function(t){var e=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59];if(!this.minTime&&!this.maxTime)return e;var n=[];if(this.minTime&&this.maxTime&&a.timeConstraintToInt(this.minTime)>a.timeConstraintToInt(this.maxTime)){if(this.minTime.hour===this.maxTime.hour){for(var r=0;r<=this.minTime.minute;r++)n.push(r);for(r=this.maxTime.minute;r<60;r++)n.push(r);return n}if(t>=this.minTime.hour||t<=this.maxTime.hour){if(t===this.minTime.hour){for(r=this.minTime.minute;r<60;r++)n.push(r);return n}if(t===this.maxTime.hour){for(r=0;r<=this.maxTime.minute;r++)n.push(r);return n}return e}return[]}if(this.minTime&&this.maxTime){if(this.minTime.hour===this.maxTime.hour){for(r=this.minTime.minute;r<=this.maxTime.minute;r++)n.push(r);return n}if(t>=this.minTime.hour&&t<=this.maxTime.hour){if(t===this.minTime.hour){for(r=this.minTime.minute;r<60;r++)n.push(r);return n}if(t===this.maxTime.hour){for(r=0;r<=this.maxTime.minute;r++)n.push(r);return n}return e}return[]}if(this.minTime){if(t===this.minTime.hour){for(r=this.minTime.minute;r<60;r++)n.push(r);return n}return t>this.minTime.hour?e:[]}if(this.maxTime){if(t===this.maxTime.hour){for(r=0;r<=this.maxTime.minute;r++)n.push(r);return n}return t<this.maxTime.hour?e:[]}},t}()}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(9),n(15),n(4),n(278),n(16),n(1),n(10)],void 0===(o=function(t,e,n,r,o,i,a,u,l){Object.defineProperty(e,"__esModule",{value:!0});var c=function(t){function e(n,r,o){var s=t.call(this,n,r||e.getDefaultProperties(n),o)||this;return s.addClass("video"),s.emptyStateDOMNode=document.createElement("div"),s.emptyStateDOMNode.className="empty",s.iframeDOMNode=document.createElement("iframe"),s.imageAndEmptyStatePlaceholder=document.createElement("div"),s.imageAndEmptyStatePlaceholder.className="input",s.imageAndEmptyStatePlaceholder.appendChild(s.iframeDOMNode),s.imageAndEmptyStatePlaceholder.appendChild(s.emptyStateDOMNode),s.iframeDOMNode.onerror=function(){s.onVideoLoadError()},s.iframeDOMNode.onload=function(){s.onVideoLoadSuccess()},n.isEditMode()&&(s.toolbar=new i.VideoToolbar(s)),s.onSourceChanged(),s}return s(e,t),e.getDefaultProperties=function(t){return this.addSizeProperties({name:"Q",source:"",alternateText:"",visibility:"",video:{youTubeVideoURL:"",autoPlay:!1,loop:!1},input:{backgroundColor:new l.ThemePropertyValue("transparent"),borderColor:new l.ThemePropertyValue("transparent"),borderRadius:t.getThemeValues().getProperty("input.borderRadius").inherit(),borderStyle:t.getThemeValues().getProperty("input.borderStyle").inherit(),borderWidth:t.getThemeValues().getProperty("input.borderWidth").inherit()}})},e.prototype.clearFormatting=function(e){return void 0===e&&(e=!0),this.setProperty("input.borderColor","transparent"),this.setProperty("input.backgroundColor","transparent"),t.prototype.clearFormatting.call(this,e)},e.prototype.getTypeId=function(){return o.NodeTypes.VIDEO},e.prototype.hasLabel=function(){return!1},e.prototype.hasValue=function(){return!1},e.prototype.getValue=function(){return null},e.prototype.setValue=function(t){return this},e.prototype.getNodeName=function(){return"Video"},e.prototype.getFieldsLayout=function(){var t=[{row:0,domNode:this.imageAndEmptyStatePlaceholder,span:n.InputSpan.FULL}];return this.toolbar&&t.push({row:1,domNode:this.toolbar.getRoot(),span:n.InputSpan.FULL}),t},e.prototype.onSourceChanged=function(){var t=this.getProperty("video.youTubeVideoURL");if(!t)return this.iframeDOMNode.removeAttribute("src"),void this.iframeDOMNode.removeAttribute("allow");var e=a.YouTubeURLParser.getVideoIdFromUrl(t),n=["fullscreen"];if(!e)return this.iframeDOMNode.src="",void this.iframeDOMNode.removeAttribute("allow");var r=this.getProperty("video.loop"),o=this.getProperty("video.autoPlay"),i="//www.youtube.com/embed/"+e+"?modestbranding=1&";r&&!this.document.isEditMode()&&(i+="loop=1&"),o&&!this.document.isEditMode()&&(i+="autoplay=1&",n.push("autoplay")),this.iframeDOMNode.setAttribute("src",i.replace(/[&?]+$/g,"")),n.length?this.iframeDOMNode.setAttribute("allow",n.join("; ")):this.iframeDOMNode.removeAttribute("allow")},e.prototype.browseForSource=function(){this.document.trigger(r.Document.EVENT_EDITOR_REQUEST_VIDEO_SOURCE,this)},e.prototype.onVideoLoadError=function(){this.iframeDOMNode.classList.remove("loaded"),this.iframeDOMNode.classList.add("error")},e.prototype.onVideoLoadSuccess=function(){this.iframeDOMNode.classList.remove("error"),this.iframeDOMNode.classList.add("loaded")},e.prototype.getRenderedCSS=function(){var t=l.cast(this.properties.input.backgroundColor),e=l.cast(this.properties.input.borderColor),n=l.cast(this.properties.input.borderWidth),r=l.cast(this.properties.input.borderRadius);return"\n            iframe,\n            .empty {\n                background-color: "+t+";\n                border: "+n+" "+l.cast(this.properties.input.borderStyle)+" "+e+";\n                border-radius: "+r+';\n            }\n            \n            iframe:not([src]) + .empty:after {\n                content: "'+u.I18n.translateApplicationText("No video selected","control-defaults.video")+'" !important;\n            }\n        '},e.prototype.performTranslation=function(){},e.prototype.supportsLabelInsideRendering=function(){return!1},e}(n.Input);e.Video=c}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(1)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.video=t,this.root=document.createElement("div"),this.root.className="input toolbar",this.update()}return t.prototype.getRoot=function(){return this.root},t.prototype.update=function(){for(var t,e=this;this.root.firstChild;)this.root.removeChild(this.root.firstChild);(t=document.createElement("a")).setAttribute("href","javascript:"),t.textContent=n.I18n.translateApplicationText("Select video","control-defaults.video"),t.onclick=function(){e.video.browseForSource()},this.root.appendChild(t)},t}();e.VideoToolbar=r}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(70)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.explainValue=function(){return this.getValue()},e.prototype.getValue=function(){return"string"==typeof this.value&&""!==this.value?this.value:void 0},e.prototype.getValueType=function(){return n.EInputDefaultValue.SIGNATURE_VALUE},e}(n.InputDefaultValue);e.SignatureInputDefaultValue=r}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(3),n(2),n(135)],void 0===(o=function(t,e,n,r,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e){var n=t.call(this)||this;return n.enabled=!1,n.root=document.createElement("div"),n.root.className="loader",n.fileInput=document.createElement("input"),n.fileInput.type="file",n.root.appendChild(n.fileInput),n.root.appendChild(document.createElement("span")).className="vfb vfb-folder-open",n.canvas=e,n.fileInput.addEventListener("change",(function(){var t=n.fileInput.files[0];n.fileInput.value=null,t&&n.processFile(t)})),n}return s(e,t),e.prototype.getRoot=function(){return this.root},e.prototype.enable=function(){return this.enabled=!0,this.root.classList.add("enabled"),this},e.prototype.processFile=function(t){var n=this;/\.(jpg|png|gif)$/i.test(t.name)?0!==t.size?o.ImageMatrix.createFromFile(t).then((function(t){t=t.normalize(t.getColors()).crop().scaleToFit(n.canvas.offsetWidth-20,n.canvas.offsetHeight-20);var r=[[o.SignatureDrawCommand.BITMAP_START,t.stringify()]];n.trigger(e.EVENT_SIGN,'<signature value="'+JSON.stringify(r)+'" />')})).fail((function(t){console.error(t)})):r.Dialog.alert("File is empty","Error loading signature"):r.Dialog.alert("Please choose a JPG, PNG or GIF file","Error loading signature")},e.EVENT_SIGN="sign",e}(n.EventEmitter);e.SignatureImageLoader=i}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(0),n(9),n(12),n(4),n(161),n(282),n(1),n(10),n(2)],void 0===(o=function(t,e,n,r,o,i,a,u,l,c,p){Object.defineProperty(e,"__esModule",{value:!0});var d=function(t){function e(n,r,i){var s=t.call(this,n,r||e.getDefaultProperties(n),i)||this;return s.value={lat:0,lng:0,address:null},s.searchControl={controlUI:null,controlText:null,centerControlDiv:null,sdk:null},s.addClass("map"),s.embedNode=document.createElement("div"),s.embedNode.className="input map",setTimeout((function(){s.embedMap()}),1),s.onGeocodingRequiredDebouncer=o.Debouncer.create((function(){s.performGeocoding()}),500),s.document.isEditMode()&&(s.toolbar=new u.MapToolbar(s)),s}return s(e,t),e.prototype.embedMap=function(){var t=this;a.GoogleMapsSDK.getAPI().then((function(e){t.mapObject=new e.Map(t.embedNode,{center:{lat:-34.397,lng:150.644}}),t.geoCoder=new e.Geocoder,t.searchControl.sdk=e,t.onMapSettingsChanged()}))},e.getDefaultProperties=function(e){return t.addSizeProperties.call(this,{name:"Q",visibility:"",hasValue:!1,mapSettings:{zoomControl:!0,panControl:!1,rotateControl:!1,streetViewControl:!1,mapTypeControl:!1,fullScreenControl:!0,zoom:15,minZoom:1,maxZoom:15,interactive:!0,allowSearchAddress:!1,initialAddress:l.I18n.translateApplicationText("No.1, Broadway, Flushing, NY, USA","system.default-map-address")},input:{borderColor:new c.ThemePropertyValue("transparent"),borderRadius:e.getThemeValues().getProperty("input.borderRadius").inherit(),borderStyle:e.getThemeValues().getProperty("input.borderStyle").inherit(),borderWidth:e.getThemeValues().getProperty("input.borderWidth").inherit()}})},e.prototype.getFieldsLayout=function(){var t=[{domNode:this.embedNode,span:r.InputSpan.FULL,row:0}];return this.toolbar&&t.push({domNode:this.toolbar.getRoot(),span:r.InputSpan.FULL,row:1}),t},e.prototype.getNodeName=function(){return"Map"},e.prototype.getTypeId=function(){return i.NodeTypes.MAP},e.prototype.getValue=function(){return this.hasValue()?JSON.stringify(this.value):null},e.prototype.hasLabel=function(){return!1},e.prototype.hasValue=function(){return!!this.properties.hasValue},e.prototype.setValue=function(t){var e=this;if(this.hasValue()){if(this.value.address="unknown",this.value.lat=0,this.value.lng=0,"string"==typeof t)try{var n=JSON.parse(t);n&&"number"==typeof n.lat&&"number"==typeof n.lng&&(this.value.lat=n.lat,this.value.lng=n.lng,this.value.address=n.address||"unknown")}catch(t){}this.value.lat&&this.value.lng&&a.GoogleMapsSDK.getAPI().then((function(t){var n=new t.LatLng(e.value.lat,e.value.lng);e.markerObject&&(e.markerObject.setPosition(n),e.markerObject.setTitle(e.value.address)),e.mapObject&&e.mapObject.setCenter(n)}))}return this},e.prototype.onMapSettingsChanged=function(){var t=!!this.getProperty("mapSettings.interactive");this.mapObject.setOptions({zoomControl:!!this.getProperty("mapSettings.zoomControl"),panControl:!!this.getProperty("mapSettings.panControl"),rotateControl:!!this.getProperty("mapSettings.rotateControl"),zoom:~~this.getProperty("mapSettings.zoom"),minZoom:~~this.getProperty("mapSettings.minZoom"),maxZoom:~~this.getProperty("mapSettings.maxZoom"),streetViewControl:!!this.getProperty("mapSettings.streetViewControl"),mapTypeControl:!!this.getProperty("mapSettings.mapTypeControl"),fullscreenControl:!!this.getProperty("mapSettings.fullScreenControl"),gestureHandling:"auto",keyboardShortcuts:!1,scrollWheel:!0}),t?this.getRoot().setAttribute("data-interactive","yes"):this.getRoot().setAttribute("data-interactive","no"),this.initSearchControl(!!this.getProperty("mapSettings.allowSearchAddress")),this.onGeocodingRequiredDebouncer()},e.prototype.performGeocoding=function(){var t=this;a.GoogleMapsSDK.getAPI().then((function(e){var n=function(n,r){t.mapObject.setCenter(n),t.markerObject?(t.markerObject.setPosition(n),t.markerObject.setMap(t.mapObject)):(t.markerObject||(t.hasValue()?(t.markerObject=new e.Marker({map:t.mapObject,position:n,draggable:!0,title:r||"unknown"}),e.event.addListener(t.markerObject,"dragend",(function(e){t.value.lat=e.latLng.lat(),t.value.lng=e.latLng.lng(),t.mapObject.panTo(e.latLng),t.geoCoder.geocode({location:e.latLng},(function(e,n){"OK"===n&&e[0]?t.value.address=e[0].formatted_address||"unknown":t.value.address="unknown",t.markerObject.setTitle(t.value.address),t.onMapCursorDragged()}))}))):t.markerObject=t.markerObject||new e.Marker({map:t.mapObject,position:n})),t.mapObject.panTo(t.markerObject.getPosition()))},r=String(t.getProperty("mapSettings.initialAddress")||"").trim();if(t.hasValue()&&t.value.lat&&t.value.lng)n(new e.LatLng(t.value.lat,t.value.lng),t.value.address||r||"unknown"),t.mapObject.setZoom(t.getProperty("mapSettings.maxZoom"));else{if(!r)return;"geolocation"===r?t.getCurrentLocation(e).then((function(e){n({lat:e.lat,lng:e.lng},e.address),t.mapObject.setZoom(t.getProperty("mapSettings.maxZoom")),t.hasValue()&&(t.value.lat=e.lat,t.value.lng=e.lng,t.value.address=e.address,t.onMapCursorDragged())})).fail((function(){n({lat:0,lng:0},""),t.hasValue()&&(t.value.lat=0,t.value.lng=0,t.value.address="",t.onMapCursorDragged())})):t.geoCoder.geocode({address:r},(function(o,i){e.GeocoderStatus.OK===i?n(o[0].geometry.location,r):t.markerObject&&t.markerObject.setMap(null)}))}}))},e.prototype.getCurrentLocation=function(t){return n.Deferred((function(e){try{navigator.geolocation.getCurrentPosition((function(n){(new t.Geocoder).geocode({location:{lat:n.coords.latitude,lng:n.coords.longitude}}).then((function(t){t.results&&t.results[0].formatted_address?e.resolve({lat:n.coords.latitude,lng:n.coords.longitude,address:t.results[0].formatted_address}):e.resolve({lat:n.coords.latitude,lng:n.coords.longitude,address:""})})).catch((function(t){e.reject(t)}))}),(function(t){e.reject(t)}),{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})}catch(t){e.reject(t)}}))},e.prototype.getRenderedCSS=function(){var t=c.cast(this.properties.input.borderColor),e=c.cast(this.properties.input.borderWidth),n=c.cast(this.properties.input.borderRadius);return"\n            .input.map {\n                border: "+e+" "+c.cast(this.properties.input.borderStyle)+" "+t+";\n                border-radius: "+n+";\n                \n                &:focus,\n                &:hover {\n                    border-color: "+this.document.getProperty("theme.selection.borderColor")+";\n                }\n            }\n        "},e.prototype.performTranslation=function(){},e.prototype.onMapCursorDragged=function(){this.trigger("input")},e.prototype.listenToUserInput=function(t){var e=this;return this.hasValue()&&this.on("input",(function(){t.updateValue(e)})),this},e.prototype.enumerateSubFields=function(){return this.hasValue()?["lat","lng","address"]:null},e.prototype.getSubFieldValue=function(t){if(this.hasValue())switch(t){case"lat":return this.value.lat;case"lng":return this.value.lng;case"address":return this.value.address}return null},e.prototype.supportsLabelInsideRendering=function(){return!1},e.prototype.initSearchControl=function(t){var e=this;t?(this.searchControl.centerControlDiv||(this.searchControl.centerControlDiv=document.createElement("div"),this.mapObject.controls[this.searchControl.sdk.ControlPosition.TOP_CENTER].push(this.searchControl.centerControlDiv)),this.searchControl.controlUI||(this.searchControl.controlUI=document.createElement("div"),this.searchControl.controlUI.style.backgroundColor="#fff",this.searchControl.controlUI.style.border="2px solid #fff",this.searchControl.controlUI.style.borderRadius="3px",this.searchControl.controlUI.style.boxShadow="0 2px 6px rgba(0,0,0,.3)",this.searchControl.controlUI.style.cursor="pointer",this.searchControl.controlUI.style.marginTop="8px",this.searchControl.controlUI.style.marginBottom="22px",this.searchControl.controlUI.style.textAlign="center",this.searchControl.controlUI.title=l.I18n.translateApplicationText(l.I18n.translateViewFormText("Click to search an address","control-defaults.map"),"control-defaults.map"),this.searchControl.centerControlDiv.appendChild(this.searchControl.controlUI)),this.searchControl.controlUI.style.display="",this.searchControl.controlText||(this.searchControl.controlText=document.createElement("div"),this.searchControl.controlText.style.color="rgb(25,25,25)",this.searchControl.controlText.style.fontFamily="Roboto,Arial,sans-serif",this.searchControl.controlText.style.fontSize="16px",this.searchControl.controlText.style.lineHeight="38px",this.searchControl.controlText.style.paddingLeft="5px",this.searchControl.controlText.style.paddingRight="5px",this.searchControl.controlText.innerHTML=l.I18n.translateApplicationText(l.I18n.translateViewFormText("Search","control-defaults.map"),"control-defaults.map"),this.searchControl.controlUI.appendChild(this.searchControl.controlText)),this.searchControl.controlText.style.display="",this.searchControl.controlUI.addEventListener("click",(function(){e.searchForAnAddress()}))):(this.searchControl.controlUI&&(this.searchControl.controlUI.style.display="none"),this.searchControl.controlText&&(this.searchControl.controlText.style.display="none"))},e.prototype.searchForAnAddress=function(){var t,e=this;this.document.isEditMode()||(a.GoogleMapsSDK.isCustomAPIKey()?(this.hasValue()&&this.value.address&&(t=this.value.address),t=t||this.getProperty("mapSettings.initialAddress"),p.Dialog.prompt({defaultValue:"geolocation"===t?"":t,title:l.I18n.translateApplicationText("Input address","control-defaults.map"),height:"300px",width:"500px",icon:"map",question:l.I18n.translateApplicationText("Provide an address","control-defaults.map"),validator:function(t){if(!t||t.length<3)return l.I18n.translateApplicationText("Please provide an address longer than 3 characters","control-defaults.map")}}).then((function(t){e.focusAddress(t)}))):p.Dialog.alert("Form owner must set it's own Google Maps api key in order to use this feature","Error searching address"))},e.prototype.focusAddress=function(t){var e=this;this.geoCoder.geocode({address:t},(function(t,n){if(e.searchControl.sdk.GeocoderStatus.OK===n){t&&t[0]&&function(t,n){e.mapObject.setCenter(t),e.markerObject&&e.markerObject.setPosition(t),e.hasValue()&&(e.value.lat=t.lat,e.value.lng=t.lng,e.value.address=n,e.markerObject&&(e.markerObject.title=n),e.onMapCursorDragged()),e.mapObject.panTo(e.markerObject.getPosition())}(t[0].geometry.location,t[0].formatted_address)}else p.Dialog.alert(l.I18n.translateApplicationText("Address not found","control-defaults.map"))}))},e}(r.Input);e.Map=d}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(0),n(2),n(1),n(11),n(8),n(6)],void 0===(o=function(t,e,n,r,o,i,s,a){Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t){this.map=t,this.root=document.createElement("div"),this.root.className="input toolbar",this.update()}return t.prototype.update=function(){for(var t=this;this.root.firstChild;)this.root.removeChild(this.root.firstChild);var e=document.createElement("span");e.className="current-address";var n=this.map.getProperty("mapSettings.initialAddress");"geolocation"===n&&(n=o.I18n.translateApplicationText("Current address","control-defaults.map")),e.textContent=n+" - ",this.root.appendChild(e);var r=document.createElement("a");r.setAttribute("href","javascript:"),r.textContent=o.I18n.translateApplicationText("Input address","control-defaults.map"),this.root.appendChild(r),r.onclick=function(){t.getNewAddress(t.map.getProperty("mapSettings.initialAddress")).then((function(e){t.map.setProperty("mapSettings.initialAddress",e),t.map.onMapSettingsChanged(),t.update()}))}},t.prototype.getNewAddress=function(t){return n.Deferred((function(e){var u=function(){},l=new r.Dialog({title:o.I18n.translateApplicationText("Input address","control-defaults.map"),width:"500px",height:"300px",movable:!0,closable:!0,onClose:function(){e.reject(new Error("User canceled"))},buttons:[{caption:o.I18n.translateApplicationText("Ok","ui.dialog"),callback:function(){u()}},{caption:o.I18n.translateApplicationText("Cancel","ui.dialog"),callback:function(){l.close(),e.reject(new Error("User canceled"))}}],style:r.DialogStyle.FLAT_COLOR,id:"map-address-input"}).center(),c=new i.Loader(l.getBody()).addLoadRequest();s.NetworkCache.get("/static/templates/ui-v2/editor/dialogs/map-address-input.html").then((function(i){c.removeLoadRequest(),l.getBody().innerHTML=i,o.I18n.translateDOMNode(l.getBody()),n(l.getBody()).find("form").on("submit",(function(t){t.preventDefault(),t.stopPropagation()}));var s=l.getBody().querySelector("input[type=radio][name=mai-value][value=manual]"),p=l.getBody().querySelector("input[type=radio][name=mai-value][value=geolocation]"),d=l.getBody().querySelector("input[type=text][name=address]");u=function(){var t="";switch(!0){case p.checked:t="geolocation";break;case s.checked:default:t=a.Strings.trim(d.value)}""!==t?t.length<3?r.Dialog.alert(o.I18n.translateApplicationText("Address is too short. Please be more specific","control-defaults.map")).then((function(){s.checked=!0,d.focus()})):(l.close(),e.resolve(t)):r.Dialog.alert(o.I18n.translateApplicationText("Please fill an address","control-defaults.map")).then((function(){s.checked=!0,d.focus()}))},d.onfocus=function(){s.checked=!0},"geolocation"===t?(p.checked=!0,d.value=o.I18n.translateApplicationText("No.1, Broadway, Flushing, NY, USA","system.default-map-address")):(s.checked=!0,d.value=String(t||""))})).fail((function(t){c.removeLoadRequest(),l.close(),e.reject(t)}))}))},t.prototype.getRoot=function(){return this.root},t}();e.MapToolbar=u}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(0),n(9),n(12),n(4),n(37),n(1),n(31),n(62),n(6),n(197),n(10)],void 0===(o=function(t,e,n,r,o,i,a,u,l,c,p,d,h){Object.defineProperty(e,"__esModule",{value:!0});var f=function(){function t(){this.rows=[]}return t.prototype.getHeader=function(){return this.header},t.prototype.setHeader=function(t){return this.header=t,this},t.prototype.getRows=function(){return this.rows},t.prototype.addRow=function(t){return this.rows.push(t),this},t.prototype.insertInto=function(t){if(this.rows.length){var e=t.tBodies[0];this.header&&e.appendChild(this.header);for(var n=0,r=this.rows.length;n<r;n++)e.appendChild(this.rows[n])}},t}();e.ShoppingCartBatch=f;var g=function(){function t(){}return t.COLUMN_DESCRIPTION="Description",t.COLUMN_QUANTITY="Quantity",t.COLUMN_UNIT_PRICE="Unit Price",t.COLUMN_PRICE="Price",t.GROUP_PRODUCTS="Products",t.GROUP_SHIPPINGS="Shippings",t.GROUP_DISCOUNTS_AND_TAXES="Discounts and taxes",t.FOOTER_SUBTOTAL="Subtotal",t.FOOTER_TOTAL="Total",t.REMOVE_FROM_CART_BUTTON_TOOLTIP="Remove",t.EMPTY_STATE_TEXT="Shopping cart is empty",t}();e.ShoppingCartTextResources=g;var m=function(t){function e(n,r,i){var s=t.call(this,n,r||e.getDefaultProperties(n),i)||this;return s.updateNumber=0,s.root.tabIndex=0,s.addClass("shopping-cart"),s.shoppingCartRendererNode=document.createElement("div"),s.shoppingCartRendererNode.className="input embed",s.updateShoppingCartDebouncer=o.Debouncer.create((function(){s.updateShoppingCart()}),10),s.updateShoppingCartDebouncer(),setTimeout((function(){s.setupShoppingCartEvents()}),10),s}return s(e,t),e.prototype.updateShoppingCart=function(){this.document.getElementById(this.getId())?this.document.isEditMode()?this.updateShoppingCartInEditMode(this.document.getInvoice()):this.updateShoppingCartInViewMode(this.document.getInvoice()):this.document.getInvoice().off("change",this.updateShoppingCartDebouncer)},e.prototype.triggerEmptyState=function(){this.shoppingCartRendererNode.innerHTML='<div class="empty-state">'+p.Strings.toHTML(u.I18n.translateViewFormText(this.getProperty("placeholder")||u.I18n.translateApplicationText(g.EMPTY_STATE_TEXT,"control-defaults.shopping-cart"),"shopping-cart-empty-text"))+"</div>"},e.prototype.updateShoppingCartInViewMode=function(t){this.updateNumber++;var n=t.getStatistics();if(0!==n.shippings||0!==n.products||0!==n.discounts){var r=t.getComputedInvoice();if(r||null===r){if(!r)return void this.triggerEmptyState();if(0===r.items.length)return void this.triggerEmptyState()}if(null===t.getComputedInvoice()&&(t.compute(),this.triggerEmptyState()),t.getLastError())this.shoppingCartRendererNode.innerHTML="<span data-role='error'>Invoice computation encountered error</span>";else if(null!==(r=t.getComputedInvoice())){var o=document.createElement("table");o.setAttribute("cellpadding","0"),o.setAttribute("cellspacing","0"),o.setAttribute("width","100%"),o.createTHead().appendChild(e.createInvoiceHeaderRowDOMNode(this)),o.createTBody();var i,s=0;if(n.products){i=o.tBodies[0].appendChild(e.createInvoiceItemGroupRowDOMNode('<i class="vfb vfb-product"></i> '+p.Strings.toHTML(u.I18n.translateViewFormText(u.I18n.translateApplicationText(g.GROUP_PRODUCTS,"control-defaults.shopping-cart"),"shopping-cart-items-group")),this));for(var l=0,d=(r.items||[]).length;l<d;l++)r.items[l].type===a.EInvoiceItemType.PRODUCT&&(s=e.appendComputedInvoiceItemProductRow(r.items[l],o,s,t.getCurrency(),this))}var h=new f,m=new f;if(n.shippings){h.setHeader(e.createInvoiceItemGroupRowDOMNode('<i class="vfb vfb-shipping"></i> '+p.Strings.toHTML(u.I18n.translateViewFormText(u.I18n.translateApplicationText(g.GROUP_SHIPPINGS,"control-defaults.shopping-cart"),"shopping-cart-items-group")),this));for(l=0,d=(r.items||[]).length;l<d;l++)r.items[l].type===a.EInvoiceItemType.SHIPPING&&(s=e.appendComputedInvoiceItemShippingRow(r.items[l],h,s,t.getCurrency(),this));h.insertInto(o)}if(n.discounts){m.setHeader(e.createInvoiceItemGroupRowDOMNode('<i class="vfb vfb-discount"></i> '+p.Strings.toHTML(u.I18n.translateViewFormText(u.I18n.translateApplicationText(g.GROUP_DISCOUNTS_AND_TAXES,"control-defaults.shopping-cart"),"shopping-cart-items-group")),this));for(l=0,d=(r.items||[]).length;l<d;l++)r.items[l].type===a.EInvoiceItemType.DISCOUNT_OR_TAX&&(s=e.appendComputedInvoiceItemDiscountRow(r.items[l],m,s,t.getCurrency(),this));m.insertInto(o)}for(0===h.getRows().length&&0===m.getRows().length&&i&&i.parentNode.removeChild(i),o.createTFoot(),r.subtotal!=r.total&&o.tFoot.appendChild(e.createSubtotalRow(c.NumberUtils.castNumberAsCurrency(r.subtotal),t.getCurrency(),this)),o.tFoot.appendChild(e.createTotalRow(c.NumberUtils.castNumberAsCurrency(r.total),t.getCurrency(),this));this.shoppingCartRendererNode.firstChild;)this.shoppingCartRendererNode.removeChild(this.shoppingCartRendererNode.firstChild);this.shoppingCartRendererNode.appendChild(o)}else this.triggerEmptyState()}else this.triggerEmptyState()},e.prototype.updateShoppingCartInEditMode=function(t){this.shoppingCartRendererNode.innerHTML="",this.updateNumber++;var n=t.getStatistics();if(0!==n.shippings||0!==n.products||0!==n.discounts){var r=document.createElement("table");r.setAttribute("cellpadding","0"),r.setAttribute("width","100%"),r.createTHead().appendChild(e.createInvoiceHeaderRowDOMNode(this)),r.createTBody();var o=t.serialize(),i=0;if(n.products){r.tBodies[0].appendChild(e.createInvoiceItemGroupRowDOMNode('<i class="vfb vfb-product"></i> '+p.Strings.toHTML(u.I18n.translateApplicationText(g.GROUP_PRODUCTS,"control-defaults.shopping-cart")),this));for(var s=0,l=(o.rows||[]).length;s<l;s++)o.rows[s].type===a.EInvoiceItemType.PRODUCT&&(i=e.appendInvoiceItemProductRow(r,i,null,null,o.rows[s].name,o.rows[s].choice||null,"?",o.rows[s].valueFormula,o.rows[s].valueFormula,t.getCurrency(),null,null,this))}if(n.shippings){(c=new f).setHeader(e.createInvoiceItemGroupRowDOMNode('<i class="vfb vfb-shipping"></i> '+p.Strings.toHTML(u.I18n.translateApplicationText(g.GROUP_SHIPPINGS,"control-defaults.shopping-cart")),this));for(s=0,l=(o.rows||[]).length;s<l;s++)o.rows[s].type===a.EInvoiceItemType.SHIPPING&&(i=e.appendInvoiceItemShippingRow(c,i,o.rows[s].name,o.rows[s].valueFormula,t.getCurrency(),this));c.insertInto(r)}if(n.discounts){var c;(c=new f).setHeader(e.createInvoiceItemGroupRowDOMNode('<i class="vfb vfb-discount"></i> '+p.Strings.toHTML(u.I18n.translateApplicationText(g.GROUP_DISCOUNTS_AND_TAXES,"control-defaults.shopping-cart")),this));for(s=0,l=(o.rows||[]).length;s<l;s++)o.rows[s].type===a.EInvoiceItemType.DISCOUNT_OR_TAX&&(i=e.appendInvoiceItemDiscountRow(c,i,o.rows[s].name,o.rows[s].valueFormula,t.getCurrency(),this));c.insertInto(r)}r.createTFoot(),r.tFoot.appendChild(e.createSubtotalRow(null,t.getCurrency(),this)),r.tFoot.appendChild(e.createTotalRow(null,t.getCurrency(),this)),this.shoppingCartRendererNode.appendChild(r)}else this.triggerEmptyState()},e.prototype.setupShoppingCartEvents=function(){var t=this;if(!this.getDocument())throw new Error("Failed to setup shopping cart events: No document found!");var e=this.document.getInvoice();if(!e)throw new Error("Failed to setup shopping cart events: Document's application does not provide a Invoice!");e.on("change",this.updateShoppingCartDebouncer).on("compute",this.updateShoppingCartDebouncer),function(e){n(t.getRoot()).on("click","[data-role=remove-item][data-item-id]",(function(){var t=n(this).attr("data-item-id"),r=n(this).attr("data-shop-item-id");if(t){var o=e.document.getElementById(t);if(o&&o.getTypeId()===i.NodeTypes.PRODUCT){var s=JSON.parse(n(this).attr("data-choice"));o.removeFromShoppingCart(s)}if(o&&o.getTypeId()===i.NodeTypes.SHOP&&r&&console.log("TODO: ShoppingCart: Add logic to remove shop"),o&&o.getTypeId()===i.NodeTypes.CALENDAR&&parseInt(r)&&console.log("TODO: ShoppingCart: Add logic to remove calendar"),!o)try{s=JSON.parse(n(this).attr("data-choice"));e.document.getInvoice().removeProductRowByProductIdAndChoice(t,s),e.document.getInvoice().compute()}catch(t){console.error("Failed to remove product from invoice: ",t)}}}))}(this)},e.prototype.getTypeId=function(){return i.NodeTypes.SHOPPING_CART},e.prototype.getNodeName=function(){return"Shopping Cart"},e.prototype.hasValue=function(){return!0},e.prototype.listenToUserInput=function(t){var e=this;return t&&this.document.getInvoice().on("compute",(function(){t.updateValue(e)})),this},e.prototype.getValue=function(){var t=this.document.getInvoice().getComputedInvoice();return t&&t.items.length&&t.total>=0?JSON.stringify(t):null},e.prototype.setValue=function(t){return this},e.prototype.hasLabel=function(){return!0},e.prototype.getFieldsLayout=function(){return[{row:0,span:r.InputSpan.FULL,domNode:this.shoppingCartRendererNode}]},e.prototype.getRenderedCSS=function(){var t=h.cast(this.properties.label.color),e=h.cast(this.properties.label.font.family),n=h.cast(this.properties.label.font.size),r=h.cast(this.properties.label.font.bold)?"bold":"normal",o=h.cast(this.properties.label.font.italic)?"italic":"normal",i=h.cast(this.properties.label.font.underline)?"underline":"none",s=h.cast(this.properties.label.font.align),a=h.cast(this.properties.input.color),u=h.cast(this.properties.input.backgroundColor),l=h.cast(this.properties.input.borderColor),c=h.cast(this.properties.input.borderWidth),p=h.cast(this.properties.input.borderRadius),d=h.cast(this.properties.input.borderStyle),f=h.cast(this.properties.input.font.family);return"\n            > label {\n                color: "+t+";\n                font-size: "+n+'px;\n                font-family: "'+e+'";\n                font-weight: '+r+";\n                font-style: "+o+";\n                text-decoration: "+i+";\n                text-align: "+s+";\n            }\n            \n            .input.embed {\n                color: "+a+";\n                background-color: "+u+";\n                border: "+c+" "+d+" "+l+";\n                border-radius: "+p+";\n                font-size: "+h.cast(this.properties.input.font.size)+'px;\n                font-family: "'+f+'";\n            }\n        '},e.getDefaultProperties=function(e){var n=u.I18n.translateApplicationText("Shopping Cart","control-defaults");return t.addLabelProperties.call(this,t.addSizeProperties.call(this,{name:"Q",placeholder:u.I18n.translateApplicationText(g.EMPTY_STATE_TEXT,"control-defaults.shopping-cart"),visibility:"",shoppingCart:{showProductCounter:!0,showUnitPrice:!1,showUnitType:!1,showProductPicture:!1},validation:{required:!1,customErrorMessage:""},input:{color:e.getThemeValues().getProperty("input.color").inherit(),backgroundColor:e.getThemeValues().getProperty("input.backgroundColor").inherit(),borderColor:e.getThemeValues().getProperty("input.borderColor").inherit(),borderRadius:e.getThemeValues().getProperty("input.borderRadius").inherit(),borderStyle:e.getThemeValues().getProperty("input.borderStyle").inherit(),borderWidth:e.getThemeValues().getProperty("input.borderWidth").inherit(),font:{family:e.getThemeValues().getProperty("input.font.family").inherit(),size:e.getThemeValues().getProperty("input.font.size").inherit()}}}),n,e)},e.prototype.getTranslations=function(){var t=[];this.properties.label.text&&t.push({original:this.properties.label.text}),t.push({original:u.I18n.translateApplicationText(g.COLUMN_DESCRIPTION,"control-defaults.shopping-cart"),context:"shopping-cart-column"}),t.push({original:u.I18n.translateApplicationText(g.COLUMN_QUANTITY,"control-defaults.shopping-cart"),context:"shopping-cart-column"}),t.push({original:u.I18n.translateApplicationText(g.COLUMN_UNIT_PRICE,"control-defaults.shopping-cart"),context:"shopping-cart-column"}),t.push({original:u.I18n.translateApplicationText(g.COLUMN_PRICE,"control-defaults.shopping-cart"),context:"shopping-cart-column"}),t.push({original:u.I18n.translateApplicationText(g.GROUP_PRODUCTS,"control-defaults.shopping-cart"),context:"shopping-cart-items-group"}),t.push({original:u.I18n.translateApplicationText(g.GROUP_SHIPPINGS,"control-defaults.shopping-cart"),context:"shopping-cart-items-group"}),t.push({original:u.I18n.translateApplicationText(g.GROUP_DISCOUNTS_AND_TAXES,"control-defaults.shopping-cart"),context:"shopping-cart-items-group"}),t.push({original:u.I18n.translateApplicationText(g.FOOTER_SUBTOTAL,"control-defaults.shopping-cart"),context:"shopping-cart-footer"}),t.push({original:u.I18n.translateApplicationText(g.FOOTER_TOTAL,"control-defaults.shopping-cart"),context:"shopping-cart-footer"}),t.push({original:u.I18n.translateApplicationText(g.REMOVE_FROM_CART_BUTTON_TOOLTIP,"control-defaults.shopping-cart"),context:"shopping-cart-delete-button-tooltip"}),t.push({original:u.I18n.translateApplicationText(g.EMPTY_STATE_TEXT,"control-defaults.shopping-cart"),context:"shopping-cart-empty-text"});var e=this.document.getInvoice();if(e)for(var n=0,r=e.getRows(),o=r.length;n<o;n++)switch(r[n].getItemType()){case a.EInvoiceItemType.SHIPPING:t.push({original:r[n].getItemName(),context:"shopping-cart-row-type-shipping"});break;case a.EInvoiceItemType.DISCOUNT_OR_TAX:t.push({original:r[n].getItemName(),context:"shopping-cart-row-type-discount-or-tax"});break;case a.EInvoiceItemType.PRODUCT:null===r[n].getProductControlId()&&t.push({original:r[n].getItemName(),context:"shop-product-title"})}if(t.push({original:d.CashOnDeliveryTextResources.MSG_DIALOG_TITLE,context:d.CashOnDeliveryTextResources.CONTEXT_PLACEHOLDER}),t.push({original:d.CashOnDeliveryTextResources.MSG_PLACEHOLDER_FIRST_NAME,context:d.CashOnDeliveryTextResources.CONTEXT_PLACEHOLDER}),t.push({original:d.CashOnDeliveryTextResources.MSG_PLACEHOLDER_LAST_NAME,context:d.CashOnDeliveryTextResources.CONTEXT_PLACEHOLDER}),t.push({original:d.CashOnDeliveryTextResources.MSG_PLACEHOLDER_EMAIL,context:d.CashOnDeliveryTextResources.CONTEXT_PLACEHOLDER}),t.push({original:d.CashOnDeliveryTextResources.MSG_PLACEHOLDER_PHONE,context:d.CashOnDeliveryTextResources.CONTEXT_PLACEHOLDER}),t.push({original:d.CashOnDeliveryTextResources.MSG_PLACEHOLDER_ADDRESS_LINE_1,context:d.CashOnDeliveryTextResources.CONTEXT_PLACEHOLDER}),t.push({original:d.CashOnDeliveryTextResources.MSG_PLACEHOLDER_ADDRESS_LINE_2,context:d.CashOnDeliveryTextResources.CONTEXT_PLACEHOLDER}),t.push({original:d.CashOnDeliveryTextResources.MSG_PLACEHOLDER_CITY,context:d.CashOnDeliveryTextResources.CONTEXT_PLACEHOLDER}),t.push({original:d.CashOnDeliveryTextResources.MSG_PLACEHOLDER_STATE,context:d.CashOnDeliveryTextResources.CONTEXT_PLACEHOLDER}),t.push({original:d.CashOnDeliveryTextResources.MSG_PLACEHOLDER_COUNTRY,context:d.CashOnDeliveryTextResources.CONTEXT_PLACEHOLDER}),t.push({original:d.CashOnDeliveryTextResources.MSG_PLACEHOLDER_ZIP_CODE,context:d.CashOnDeliveryTextResources.CONTEXT_PLACEHOLDER}),t.push({original:d.CashOnDeliveryTextResources.MSG_PLACEHOLDER_COMMENT,context:d.CashOnDeliveryTextResources.CONTEXT_PLACEHOLDER}),t.push({original:d.CashOnDeliveryTextResources.MSG_BUTTON_PLACE_ORDER,context:d.CashOnDeliveryTextResources.CONTEXT_BUTTON}),t.push({original:d.CashOnDeliveryTextResources.MSG_BUTTON_CANCEL_ORDER,context:d.CashOnDeliveryTextResources.CONTEXT_BUTTON}),t.push({original:d.CashOnDeliveryTextResources.MSG_LABEL_ORDER_DETAILS,context:d.CashOnDeliveryTextResources.CONTEXT_LABEL}),t.push({original:d.CashOnDeliveryTextResources.MSG_LABEL_TOTAL,context:d.CashOnDeliveryTextResources.CONTEXT_LABEL}),t.push({original:d.CashOnDeliveryTextResources.MSG_LABEL_CUSTOMER_DETAILS,context:d.CashOnDeliveryTextResources.CONTEXT_LABEL}),t.push({original:d.CashOnDeliveryTextResources.MSG_LABEL_FIRST_NAME,context:d.CashOnDeliveryTextResources.CONTEXT_LABEL}),t.push({original:d.CashOnDeliveryTextResources.MSG_LABEL_LAST_NAME,context:d.CashOnDeliveryTextResources.CONTEXT_LABEL}),t.push({original:d.CashOnDeliveryTextResources.MSG_LABEL_EMAIL,context:d.CashOnDeliveryTextResources.CONTEXT_LABEL}),t.push({original:d.CashOnDeliveryTextResources.MSG_LABEL_PHONE,context:d.CashOnDeliveryTextResources.CONTEXT_LABEL}),t.push({original:d.CashOnDeliveryTextResources.MSG_LABEL_ADDRESS_DETAILS,context:d.CashOnDeliveryTextResources.CONTEXT_LABEL}),t.push({original:d.CashOnDeliveryTextResources.MSG_LABEL_ADDRESS_LINE_1,context:d.CashOnDeliveryTextResources.CONTEXT_LABEL}),t.push({original:d.CashOnDeliveryTextResources.MSG_LABEL_ADDRESS_LINE_2,context:d.CashOnDeliveryTextResources.CONTEXT_LABEL}),t.push({original:d.CashOnDeliveryTextResources.MSG_LABEL_CITY,context:d.CashOnDeliveryTextResources.CONTEXT_LABEL}),t.push({original:d.CashOnDeliveryTextResources.MSG_LABEL_ZIP_CODE,context:d.CashOnDeliveryTextResources.CONTEXT_LABEL}),t.push({original:d.CashOnDeliveryTextResources.MSG_LABEL_STATE,context:d.CashOnDeliveryTextResources.CONTEXT_LABEL}),t.push({original:d.CashOnDeliveryTextResources.MSG_LABEL_COUNTRY,context:d.CashOnDeliveryTextResources.CONTEXT_LABEL}),t.push({original:d.CashOnDeliveryTextResources.MSG_LABEL_SAVE_INFORMATION,context:d.CashOnDeliveryTextResources.CONTEXT_LABEL}),t.push({original:d.CashOnDeliveryTextResources.MSG_ERR_REQUIRED_FIELD,context:d.CashOnDeliveryTextResources.CONTEXT_ERROR}),t.push({original:d.CashOnDeliveryTextResources.MSG_ERR_NOT_A_NAME,context:d.CashOnDeliveryTextResources.CONTEXT_ERROR}),t.push({original:d.CashOnDeliveryTextResources.MSG_ERR_NOT_AN_EMAIL,context:d.CashOnDeliveryTextResources.CONTEXT_ERROR}),t.push({original:d.CashOnDeliveryTextResources.MSG_ERR_NOT_A_PHONE_NUMBER,context:d.CashOnDeliveryTextResources.CONTEXT_ERROR}),t.push({original:d.CashOnDeliveryTextResources.MSG_ERR_NUMBER_EXPECTED,context:d.CashOnDeliveryTextResources.CONTEXT_ERROR}),this.hasProperty("validation.customErrorMessage")){var i=this.getProperty("validation.customErrorMessage");i&&t.push({original:i,context:"form-fields-errors"})}return t},e.createInvoiceItemGroupRowDOMNode=function(t,e){var n=document.createElement("tr"),r=!!e.getProperty("shoppingCart.showProductCounter"),o=!!e.getProperty("shoppingCart.showProductPicture"),i=!!e.getProperty("shoppingCart.showUnitPrice");if(n.setAttribute("data-role","group"),r){var s=n.appendChild(document.createElement("td"));s.setAttribute("data-role","counter"),(u=n.appendChild(document.createElement("td"))).colSpan=3+~~o+~~i,u.innerHTML=t;var a=u.querySelector("i.vfb");a?s.appendChild(a):s.textContent=" "}else{var u;(u=n.appendChild(document.createElement("td"))).colSpan=4+~~o+~~i,u.innerHTML=t}return n},e.createSubtotalRow=function(t,e,n){var r=document.createElement("tr"),o=!!n.getProperty("shoppingCart.showProductCounter"),i=!!n.getProperty("shoppingCart.showProductPicture"),s=!!n.getProperty("shoppingCart.showUnitPrice");r.setAttribute("data-role","subtotal");var a=r.appendChild(document.createElement("td"));a.textContent=u.I18n.translateViewFormText(g.FOOTER_SUBTOTAL,"shopping-cart-footer"),a.colSpan=3+~~o+~~i+~~s;var l=r.appendChild(document.createElement("td"));return l.setAttribute("data-role","price"),l.innerHTML=null===t?c.NumberUtils.priceToHTML("? "+e):c.NumberUtils.priceToHTML(String(c.NumberUtils.formatFloat(t||0))+" "+e),r},e.createTotalRow=function(t,e,n){var r=document.createElement("tr"),o=!!n.getProperty("shoppingCart.showProductCounter"),i=!!n.getProperty("shoppingCart.showProductPicture"),s=!!n.getProperty("shoppingCart.showUnitPrice");r.setAttribute("data-role","total");var a=r.appendChild(document.createElement("td"));a.textContent=u.I18n.translateViewFormText(g.FOOTER_TOTAL,"shopping-cart-footer"),a.colSpan=3+~~o+~~i+~~s;var l=r.appendChild(document.createElement("td"));return l.setAttribute("data-role","price"),l.innerHTML=null===t?c.NumberUtils.priceToHTML("? "+e):c.NumberUtils.priceToHTML(String(c.NumberUtils.formatFloat(t||0))+" "+e),r},e.createInvoiceHeaderRowDOMNode=function(t){var e=document.createElement("tr"),n=!!t.getProperty("shoppingCart.showProductCounter"),r=!!t.getProperty("shoppingCart.showProductPicture"),o=!!t.getProperty("shoppingCart.showUnitPrice"),i=document.createElement("td");i.textContent=u.I18n.translateViewFormText(u.I18n.translateApplicationText(g.COLUMN_DESCRIPTION,"control-defaults.shopping-cart"),"shopping-cart-column"),i.setAttribute("data-role","name"),i.colSpan=1+~~n+~~r,e.appendChild(i);var s=document.createElement("td");s.textContent=" ",s.setAttribute("data-role","tools"),e.appendChild(s);var a=document.createElement("td");if(a.textContent=u.I18n.translateViewFormText(u.I18n.translateApplicationText(g.COLUMN_QUANTITY,"control-defaults.shopping-cart"),"shopping-cart-column"),a.setAttribute("data-role","quantity"),e.appendChild(a),o){var l=document.createElement("td");l.setAttribute("data-role","unit-price"),l.textContent=u.I18n.translateViewFormText(u.I18n.translateApplicationText(g.COLUMN_UNIT_PRICE,"control-defaults.shopping-cart"),"shopping-cart-column"),e.appendChild(l)}var c=document.createElement("td");return c.setAttribute("data-role","price"),c.textContent=u.I18n.translateViewFormText(u.I18n.translateApplicationText(g.COLUMN_PRICE,"control-defaults.shopping-cart"),"shopping-cart-column"),e.appendChild(c),e},e.appendInvoiceItemDiscountRow=function(t,e,n,r,o,i){e++;var s=document.createElement("tr"),a=o||"?",u=!!i.getProperty("shoppingCart.showProductCounter"),l=!!i.getProperty("shoppingCart.showProductPicture"),p=!!i.getProperty("shoppingCart.showUnitPrice");if(s.setAttribute("data-row-type","tax"),u){var d=document.createElement("td");d.setAttribute("data-role","counter"),s.appendChild(d).textContent=String(e)+"."}if(l){var h=document.createElement("td");h.setAttribute("data-role","picture"),h.textContent=" ",s.appendChild(h)}var f=s.appendChild(document.createElement("td"));f.textContent=String(n)||"Tax / Discount costs ID "+String(e),f.colSpan=3+~~p;var g=document.createElement("td");return g.setAttribute("data-role","price"),g.innerHTML="string"==typeof r?c.NumberUtils.priceToHTML("? "+a):c.NumberUtils.priceToHTML((String(c.NumberUtils.formatFloat(r||0))||"0")+" "+a),s.appendChild(g),t.addRow(s),e},e.appendInvoiceItemShippingRow=function(t,e,n,r,o,i){e++;var s=document.createElement("tr"),a=o||"?",u=!!i.getProperty("shoppingCart.showProductCounter"),l=!!i.getProperty("shoppingCart.showProductPicture"),p=!!i.getProperty("shoppingCart.showUnitPrice");if(s.setAttribute("data-row-type","shipping"),u){var d=document.createElement("td");d.setAttribute("data-role","counter"),d.textContent=String(e)+".",s.appendChild(d)}if(l){var h=document.createElement("td");h.setAttribute("data-role","picture"),h.textContent=" ",s.appendChild(h)}var f=s.appendChild(document.createElement("td"));f.textContent=String(n)||"Shipping costs ID "+String(e),f.colSpan=3+~~p;var g=document.createElement("td");return g.setAttribute("data-role","price"),g.innerHTML="string"==typeof r?c.NumberUtils.priceToHTML("? "+a):c.NumberUtils.priceToHTML((String(c.NumberUtils.formatFloat(r||0))||"0")+" "+a),s.appendChild(g),t.addRow(s),e},e.appendInvoiceItemProductRow=function(t,e,n,r,o,i,s,a,p,d,h,f,m){var y="";i&&o.substr(-(i.length+3))===" ("+i+")"&&(y=u.I18n.translateViewFormText(o.substr(0,o.length-i.length-3),"shop-product-title")+" ("+u.I18n.translateViewFormText(i,"shop-product-choice")+")"),e++;var v=document.createElement("tr"),b=d||"?",C=!!m.getProperty("shoppingCart.showProductCounter"),E=!!m.getProperty("shoppingCart.showProductPicture"),A=!!m.getProperty("shoppingCart.showUnitPrice"),I=!!m.getProperty("shoppingCart.showUnitType");if(v.setAttribute("data-row-type","product"),C){var T=document.createElement("td");T.setAttribute("data-role","counter"),T.setAttribute("valign","middle"),T.textContent=String(e)+".",v.appendChild(T)}if(E){var S=document.createElement("td");S.setAttribute("data-role","picture"),S.setAttribute("valign","middle");var w=document.createElement("img");n?w.src=l.CDN.getCDNUrl(n):(w.src=l.CDN.getCDNUrl("/img/product-thumbnail-in-shop-sample.png"),w.title="No photo available",w.style.opacity=".1"),S.appendChild(w),v.appendChild(S)}var _=document.createElement("td");_.setAttribute("data-role","name"),_.setAttribute("valign","middle"),_.textContent=String(y||o)||"Product #"+String(e),v.appendChild(_);var N=document.createElement("td");if(N.setAttribute("data-role","tools"),N.setAttribute("valign","middle"),h){var D=document.createElement("button");D.type="button",D.title=u.I18n.translateViewFormText(u.I18n.translateApplicationText(g.REMOVE_FROM_CART_BUTTON_TOOLTIP,"control-defaults.shopping-cart"),"shopping-cart-delete-button-tooltip"),D.setAttribute("data-role","remove-item"),D.innerHTML='<span data-role="icon" class="vfb vfb-delete"></span>',D.setAttribute("data-item-id",h),D.setAttribute("data-choice",JSON.stringify(i||null)),f&&D.setAttribute("data-shop-item-id",f),N.appendChild(D)}v.appendChild(N);var O=document.createElement("td");if(O.setAttribute("data-role","quantity"),O.setAttribute("valign","middle"),I&&O.appendChild(document.createTextNode(String(r||u.I18n.translateApplicationText("piece","control-defaults.product"))+" x ")),O.appendChild(document.createTextNode("string"==typeof s?s.substr(0,10)+(s.length>10?"...":""):String(c.NumberUtils.formatFloat(s||0))||"0")),v.appendChild(O),A){var P=document.createElement("td");P.setAttribute("data-role","unit-price"),P.setAttribute("valign","middle"),P.innerHTML="number"==typeof a?c.NumberUtils.priceToHTML((String(c.NumberUtils.formatFloat(p||0))||"0")+" "+b):c.NumberUtils.priceToHTML("? "+b),v.appendChild(P)}var x=document.createElement("td");return x.setAttribute("data-role","price"),x.setAttribute("valign","middle"),x.innerHTML="string"==typeof a?c.NumberUtils.priceToHTML("? "+b):c.NumberUtils.priceToHTML((String(c.NumberUtils.formatFloat(a||0))||"0")+" "+b),v.appendChild(x),t.tBodies[0].appendChild(v),e},e.appendComputedInvoiceItemDiscountRow=function(t,n,r,o,i){return e.appendInvoiceItemDiscountRow(n,r,u.I18n.translateViewFormText(t.name,"shopping-cart-row-type-discount-or-tax"),t.value,o,i)},e.appendComputedInvoiceItemShippingRow=function(t,n,r,o,i){return e.appendInvoiceItemShippingRow(n,r,u.I18n.translateViewFormText(t.name,"shopping-cart-row-type-shipping"),t.value,o,i)},e.appendComputedInvoiceItemProductRow=function(t,n,r,o,i){return e.appendInvoiceItemProductRow(n,r,i.getDocument().getInvoice().getProductPictureUrl(t),u.I18n.translateViewFormText(i.getDocument().getInvoice().getProductUnitType(t)||u.I18n.translateApplicationText("piece","control-defaults.product"),"shop-product-unit-name"),u.I18n.translateViewFormText(t.name,"shop-product-title"),t.choice,t.quantity,t.value,t.unitPrice,o,t.productId,t.shopItemId,i)},e.prototype.performTranslation=function(){this.labelDOMNode&&(this.labelDOMNode.textContent=u.I18n.translateViewFormText(this.getProperty("label.text"),this.getLabelI18nContext())),this.updateShoppingCart()},e.prototype.supportsLabelInsideRendering=function(){return!0},e}(r.Input);e.ShoppingCart=m}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(9),n(4),n(12),n(15),n(5),n(173),n(0),n(1),n(6),n(10)],void 0===(o=function(t,e,n,r,o,i,a,u,l,c,p,d){Object.defineProperty(e,"__esModule",{value:!0});var h=function(t){function e(n,r,i){var s=t.call(this,n,r||e.getDefaultProperties(n),i)||this;return s.activePaymentGateways=[],s.root.tabIndex=0,s.addClass("payment-processor"+(n.isEditMode()?" edit-mode":"")),s.renderRootDOMNode=document.createElement("div"),s.renderRootDOMNode.className="input embed",s.updatePaymentProcessorsDebouncer=o.Debouncer.create((function(){s.onActivePaymentProcessorsChanged()}),0),s.updatePaymentProcessorsDebouncer(),s.initListeners(),s}return s(e,t),e.getDefaultProperties=function(t){return this.addLabelProperties(this.addSizeProperties({name:"Q",visibility:"",emptyStatePlaceholder:c.I18n.translateApplicationText("Enable at least one payment processor","control-defaults.payment-processor"),input:{color:t.getThemeValues().getProperty("input.color").inherit(),backgroundColor:t.getThemeValues().getProperty("input.backgroundColor").inherit(),borderColor:t.getThemeValues().getProperty("input.borderColor").inherit(),borderRadius:t.getThemeValues().getProperty("input.borderRadius").inherit(),borderStyle:t.getThemeValues().getProperty("input.borderStyle").inherit(),borderWidth:t.getThemeValues().getProperty("input.borderWidth").inherit(),font:{family:t.getThemeValues().getProperty("input.font.family").inherit(),size:t.getThemeValues().getProperty("input.font.size").inherit()}}}),c.I18n.translateApplicationText("Choose payment method","control-defaults.payment-processor"),t)},e.prototype.getTranslations=function(){var t=[];return this.properties.label.text&&t.push({original:this.properties.label.text}),t.push({original:this.getProperty("emptyStatePlaceholder")}),t},e.prototype.getFieldsLayout=function(){return[{domNode:this.renderRootDOMNode,span:n.InputSpan.FULL,row:0}]},e.prototype.getTypeId=function(){return r.NodeTypes.PAYMENT_PROCESSOR},e.prototype.getNodeName=function(){return"Payment Processor"},e.prototype.hasLabel=function(){return!0},e.prototype.onActivePaymentProcessorsChanged=function(){var t=this;this.renderRootDOMNode.innerHTML="<div class=\"gateway\"><span class='icon vfb vfb-refresh rotating'></span></div>",a.API.get("payments/"+this.document.getId()+"/active-gateways").then((function(e){t.activePaymentGateways=e})).fail((function(e){t.activePaymentGateways=null})).always((function(){t.updatePaymentGatewaysInUI()}))},e.prototype.updatePaymentGatewaysInUI=function(){for(;this.renderRootDOMNode.firstChild;)this.renderRootDOMNode.removeChild(this.renderRootDOMNode.firstChild);if(null===this.activePaymentGateways);else if(this.activePaymentGateways.length)for(var t=0,e=this.activePaymentGateways.length;t<e;t++)this.renderRootDOMNode.appendChild(new f(this.activePaymentGateways[t],this).getRoot());else this.renderRootDOMNode.innerHTML="<div class=\"gateway none\" title='No payment gateways available'><span class='icon vfb vfb-error2'></span> "+p.Strings.toHTML(c.I18n.translateViewFormText(this.getProperty("emptyStatePlaceholder")))+"</div>"},e.prototype.initListeners=function(){var t=this;this.document.isEditMode()?this.document.on(i.Document.EVENT_PAYMENT_SETTINGS_CHANGED,(function(){t.onActivePaymentProcessorsChanged()})):function(t){l(t.getRoot()).on("click",".gateway[data-type-id]",(function(e){var n=~~this.getAttribute("data-type-id");n&&t.document.setDefaultPaymentGatewayTypeId(n)})),t.document.on(i.Document.EVENT_DEFAULT_PAYMENT_GATEWAY_CHANGED,(function(e){l(t.getRoot()).find(".gateway[data-type-id]").each((function(){~~(~~this.getAttribute("data-type-id")===e)?this.classList.add("selected"):this.classList.remove("selected")}))}))}(this)},e.prototype.getValue=function(){return null},e.prototype.hasValue=function(){return!1},e.prototype.setValue=function(t){return this},e.prototype.getRenderedCSS=function(){var t=d.cast(this.properties.label.color),e=d.cast(this.properties.label.font.family),n=d.cast(this.properties.label.font.size),r=d.cast(this.properties.label.font.bold)?"bold":"normal",o=d.cast(this.properties.label.font.italic)?"italic":"normal",i=d.cast(this.properties.label.font.underline)?"underline":"none",s=d.cast(this.properties.label.font.align),a=d.cast(this.properties.input.color),u=d.cast(this.properties.input.backgroundColor),l=d.cast(this.properties.input.borderColor),c=d.cast(this.properties.input.borderWidth),p=d.cast(this.properties.input.borderRadius),h=d.cast(this.properties.input.borderStyle),f=d.cast(this.properties.input.font.family);return"\n            > label {\n                color: "+t+";\n                font-size: "+n+'px;\n                font-family: "'+e+'";\n                font-weight: '+r+";\n                font-style: "+o+";\n                text-decoration: "+i+";\n                text-align: "+s+";\n            }\n            \n            .input.embed {\n                color: "+a+";\n                font-size: "+d.cast(this.properties.input.font.size)+'px;\n                font-family: "'+f+'";\n            }\n\n            .gateway {\n                border: '+c+" "+h+" transparent;\n                border-radius: "+p+";\n\n                &:hover {\n                    border-color: "+this.document.getProperty("theme.selection.borderColor")+" !important;\n                    background-color: "+this.document.getProperty("theme.selection.backgroundColor")+" !important;\n                }\n            }\n\n            &.edit-mode .gateway:first-child,\n            .gateway.selected {\n                border: "+c+" "+h+" "+l+";\n                background-color: "+u+";\n                font-weight: bold;\n                \n            }\n        "},e.prototype.performTranslation=function(){this.labelDOMNode&&(this.labelDOMNode.textContent=c.I18n.translateViewFormText(this.getProperty("label.text"),this.getLabelI18nContext())),null!==this.activePaymentGateways&&this.updatePaymentGatewaysInUI()},e.prototype.supportsLabelInsideRendering=function(){return!0},e}(n.Input);e.PaymentProcessor=h;var f=function(){function t(t,e){this.settings=t,this.paymentProcessorControl=e,this.root=document.createElement("div"),this.root.className="gateway",this.root.innerHTML='<span class="icon '+u.PaymentGatewaysIcons.getPaymentGatewayIconByPaymentProcessorTypeId(t.typeId)+'"></span>',this.root.setAttribute("data-type-id",String(t.typeId)),this.root.title="Pay with "+this.settings.name,this.root.tabIndex=0;var n=document.createElement("span");n.textContent=t.name,n.setAttribute("data-role","payment-gateway-name"),this.getRoot().appendChild(n),t.default?this.root.classList.add("selected"):this.root.classList.remove("selected")}return t.prototype.getRoot=function(){return this.root},t}()}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(0),n(9),n(4),n(1),n(10),n(13),n(101)],void 0===(o=function(t,e,n,r,o,i,a,u,l){Object.defineProperty(e,"__esModule",{value:!0});var c=function(t){function e(n,r,o){var i=t.call(this,n,r||e.getDefaultProperties(n),o)||this;return i.value=0,i.addClass("rating"),i.embedDOMNode=document.createElement("div"),i.embedDOMNode.className="input embed",i.embedDOMNode.tabIndex=0,i.onValueChanged(),i}return s(e,t),e.getDefaultProperties=function(t){var e=i.I18n.translateApplicationText("Rating","control-defaults");return this.addLabelProperties(this.addSizeProperties({name:"Q",visibility:"",formula:"",validation:{required:!1,customErrorMessage:""},input:{color:t.getThemeValues().getProperty("input.color").inherit(),backgroundColor:new a.ThemePropertyValue("transparent"),borderColor:new a.ThemePropertyValue("transparent"),borderRadius:t.getThemeValues().getProperty("input.borderRadius").inherit(),borderStyle:t.getThemeValues().getProperty("input.borderStyle").inherit(),borderWidth:t.getThemeValues().getProperty("input.borderWidth").inherit(),font:{align:t.getThemeValues().getProperty("input.font.align").inherit()}}}),e,t)},e.prototype.getTranslations=function(){var t=[];if(this.properties.label.text&&t.push({original:this.properties.label.text}),this.hasProperty("validation.customErrorMessage")){var e=this.getProperty("validation.customErrorMessage");e&&t.push({original:e,context:"form-fields-errors"})}return t},e.prototype.getFieldsLayout=function(){return[{row:0,span:r.InputSpan.FULL,domNode:this.embedDOMNode}]},e.prototype.getNodeName=function(){return"Rating"},e.prototype.getTypeId=function(){return o.NodeTypes.RATING},e.prototype.hasLabel=function(){return!0},e.prototype.hasValue=function(){return!0},e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t){return(t=~~t)<0&&(t=0),t>5&&(t=5),t!==this.value&&(this.value=t,this.onValueChanged()),this},e.prototype.listenToUserInput=function(t){!function(e){n(e.embedDOMNode).on("click",".star",(function(){e.setValue(~~this.getAttribute("data-value")),t.updateValue(e)}))}(this)},e.prototype.onValueChanged=function(t){for(;this.embedDOMNode.firstChild;)this.embedDOMNode.removeChild(this.embedDOMNode.firstChild);t=void 0===t?this.value:t;for(var e=1;e<=5;e++){var n=document.createElement("span");n.className="star vfb vfb-"+(e<=t?"rating":"star-empty"),n.setAttribute("data-value",String(e)),this.embedDOMNode.appendChild(n)}},e.prototype.getRenderedCSS=function(){var t=a.cast(this.properties.label.color),e=a.cast(this.properties.label.font.family),n=a.cast(this.properties.label.font.size),r=a.cast(this.properties.label.font.bold)?"bold":"normal",o=a.cast(this.properties.label.font.italic)?"italic":"normal",i=a.cast(this.properties.label.font.underline)?"underline":"none",s=a.cast(this.properties.label.font.align),u=a.cast(this.properties.input.color),l=a.cast(this.properties.input.backgroundColor),c=a.cast(this.properties.input.borderColor),p=a.cast(this.properties.input.borderWidth),d=a.cast(this.properties.input.borderRadius);return"\n            > label {\n                color: "+t+";\n                font-size: "+n+'px;\n                font-family: "'+e+'";\n                font-weight: '+r+";\n                font-style: "+o+";\n                text-decoration: "+i+";\n                text-align: "+s+";\n            }\n            \n            .input.embed {\n                color: "+u+";\n                background-color: "+l+";\n                border: "+p+" "+a.cast(this.properties.input.borderStyle)+" "+c+";\n                border-radius: "+d+";\n                text-align: "+a.cast(this.properties.input.font.align)+";\n                \n                &:hover,\n                &:focus {\n                    color: "+this.document.getProperty("theme.selection.borderColor")+";\n                }\n            }\n        "},e.prototype.performTranslation=function(){this.labelDOMNode&&(this.labelDOMNode.textContent=i.I18n.translateViewFormText(this.getProperty("label.text"),this.getLabelI18nContext()))},e.prototype.supportsLabelInsideRendering=function(){return!1},e.prototype.embedInPDFPage=function(t){var e=this;t.writeHTMLElement(this.labelDOMNode);var n=t.getDocument().create(u.PDFNodeEntityType.INPUT_RADIO).setName(this.getProperty("name")).setRequired(this.isRequired()).setRepeatedIndex(this.getRepeatedIndex()).setDefaultUncheckedValue(0).setRadioInputSize(18);Array.prototype.slice.call(this.embedDOMNode.querySelectorAll("span"),0).forEach((function(r,o){var i=r.getBoundingClientRect(),s=~~i.top-t.getDimensions().top,l=~~i.left-t.getDimensions().left;n.addOption(String(o+1),{left:l,top:s},!1);var c=t.getDocument().create(u.PDFNodeEntityType.TEXT).setPoint({top:s+20,left:l+6}).setBold(!1).setItalic(!1).setUnderline(!1).setText(String(o+1)).setFontFamily(a.cast(e.properties.label.font.family)).setFontSize(10).setColor(a.cast(e.properties.label.color));t.write(c)})),t.appendChild(n)},e.prototype.supportsDefaultValue=function(){return!0},e.prototype.getDefaultValueStrategy=function(){for(var t=new l.SingleSelectionInputDefaultValue,e=1;e<=5;e++)t.addChoice(String(e),e);return t},e}(r.Input);e.Rating=c}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(9),n(4),n(287),n(288),n(289),n(1),n(10),n(13)],void 0===(o=function(t,e,n,r,o,i,a,u,l,c){Object.defineProperty(e,"__esModule",{value:!0});var p=function(t){function e(n,r,o){var s=t.call(this,n,r||e.getDefaultProperties(n),o)||this;return s.questions=[],s.addClass("survey"),s.renderDOMNode=document.createElement("div"),s.renderDOMNode.className="embed",s.root.tabIndex=0,n.isEditMode()&&(s.toolbar=new i.SurveyToolbar(s)),s.onChoicesChanged(),s}return s(e,t),e.prototype.getFieldsLayout=function(){var t=[{domNode:this.renderDOMNode,span:n.InputSpan.FULL,row:0}];return this.toolbar&&t.push({domNode:this.toolbar.getRoot(),span:n.InputSpan.FULL,row:1}),t},e.getDefaultProperties=function(e){var n=t.addInputProperties.call(this,t.addLabelProperties.call(this,t.addSizeProperties.call(this,{name:"Q",visibility:"",choices:{text:u.I18n.translateApplicationText("How much do you like our product?\nHow likely you are going to use our product again?\nWhat can you say about our product design?","control-defaults.survey"),scale:u.I18n.translateApplicationText("Very dissatisfied\nDissatisfied\nOk\nSatisfied\nVery satisfied","control-defaults.survey")},surveySettings:{showScale:!0},validation:{required:!1,customErrorMessage:""}}),u.I18n.translateApplicationText("Please fill in this survey","control-defaults.survey"),e),e);return n.input.backgroundColor="transparent",n.input.borderColor="transparent",n},e.prototype.getTranslations=function(){var t=[];this.properties.label.text&&t.push({original:this.properties.label.text});for(var e=this.getChoices(),n=0,r=e.length;n<r;n++)t.push({original:e[n],context:"survey-scale"});var o=this.getLabels();for(n=0,r=o.length;n<r;n++)t.push({original:o[n]});if(this.hasProperty("validation.customErrorMessage")){var i=this.getProperty("validation.customErrorMessage");i&&t.push({original:i,context:"form-fields-errors"})}return t},e.prototype.getTypeId=function(){return r.NodeTypes.SURVEY},e.prototype.hasLabel=function(){return!0},e.prototype.hasValue=function(){return!0},e.prototype.getNodeName=function(){return"Survey"},e.prototype.getValue=function(){for(var t=[],e=0,n=this.questions.length;e<n;e++)t.push(this.questions[e].getValue());return t},e.prototype.setValue=function(t){if(Array.isArray(t))for(var e=0,n=this.questions.length;e<n;e++)this.questions[e].setValue(void 0===t[e]?null:~~t[e]||null);else for(e=0,n=this.questions.length;e<n;e++)this.questions[e].setValue(null);return this},e.prototype.getChoices=function(){return(this.properties.choices.scale||"").split(/(\r\n|\r|\n)/).map((function(t){return t.trim()})).filter((function(t){return""!==t}))},e.prototype.getLabels=function(){return(this.properties.choices.text||"").split(/(\r\n|\r|\n)/).map((function(t){return t.trim()})).filter((function(t){return""!==t}))},e.prototype.enumerateSubFields=function(){return this.getLabels()},e.prototype.onChoicesChanged=function(){this.questions.splice(0,this.questions.length);for(var t=this.getChoices(),e=this.getProperty("surveySettings.showScale"),n=this.getLabels(),r=0,i=n.length;r<i;r++)this.questions.push(new o.SurveyQuestion(this).setIndex(r).setLabel(n[r]).setChoices(t).setInlineChoices(e));var s=document.createElement("table");s.className="s"+t.length,e?this.root.classList.add("inline"):this.root.classList.remove("inline"),e?this.header=void 0:(s.createTHead(),this.header=new a.SurveyHeader(this).setChoices(t),this.header.appendHeaderRow(s,this.document.isEditMode())),s.createTBody();for(r=0,i=this.questions.length;r<i;r++)this.questions[r].appendLabelRow(s,this.document.isEditMode()),this.questions[r].appendInputsRow(s,this.document.isEditMode());for(this.root.setAttribute("data-num-questions",String(this.questions.length));this.renderDOMNode.firstChild;)this.renderDOMNode.removeChild(this.renderDOMNode.firstChild);this.renderDOMNode.appendChild(s)},e.prototype.listenToUserInput=function(t){var e=this;this.on("input",(function(){t.updateValue(e)}))},e.prototype.getRenderedCSS=function(){var t=l.cast(this.properties.label.color),e=l.cast(this.properties.label.font.family),n=l.cast(this.properties.label.font.size),r=l.cast(this.properties.label.font.bold)?"bold":"normal",o=l.cast(this.properties.label.font.italic)?"italic":"normal",i=l.cast(this.properties.label.font.underline)?"underline":"none",s=l.cast(this.properties.label.font.align),a=l.cast(this.properties.input.color),u=l.cast(this.properties.input.backgroundColor),c=l.cast(this.properties.input.borderColor),p=l.cast(this.properties.input.borderWidth),d=l.cast(this.properties.input.borderRadius),h=l.cast(this.properties.input.borderStyle),f=l.cast(this.properties.input.font.family),g=l.cast(this.properties.input.font.size);return"\n            > label {\n                color: "+t+";\n                font-size: "+n+'px;\n                font-family: "'+e+'";\n                font-weight: '+r+";\n                font-style: "+o+";\n                text-decoration: "+i+";\n                text-align: "+s+";\n            }\n            \n            tr.l label {\n                color: "+t+";\n                font-size: "+n+'px;\n                font-family: "'+e+'";\n                font-weight: '+r+";\n                font-style: "+o+";\n                text-decoration: "+i+";\n            }\n            \n            td.q {\n                color: "+a+";\n                font-weight: "+(l.cast(this.properties.input.font.bold)?"bold":"normal")+";\n                font-style: "+(l.cast(this.properties.input.font.italic)?"italic":"normal")+";\n                text-decoration: "+(l.cast(this.properties.input.font.underline)?"underline":"none")+";\n                text-align: "+l.cast(this.properties.input.font.align)+";\n                font-size: "+g+'px;\n                font-family: "'+f+'";\n                \n                &:hover {\n                    .i > span {\n                        color: '+this.document.getProperty("theme.selection.borderColor")+";\n                    }\n                }\n            }\n            \n            .embed {\n                background-color: "+u+";\n                border: "+p+" "+h+" "+c+";\n                border-radius: "+d+";\n            }\n            \n        "},e.prototype.addQuestion=function(){if(this.document.isEditMode()){var t,e=this.getLabels(),n=e.length;do{t=!0,n++;for(var r=0,o=e.length;r<o;r++)if(e[r]===u.I18n.translateApplicationText("Question %1","control-defaults.survey",0,n)){t=!1;break}}while(!t);var i=u.I18n.translateApplicationText("Question %1","control-defaults.survey",0,n);e.push(i),this.setProperty("choices.text",e.join("\n"),this),this.onChoicesChanged()}},e.prototype.addChoice=function(){if(this.document.isEditMode()){var t,e=this.getChoices(),n=e.length;do{t=!0,n++;for(var r=0,o=e.length;r<o;r++)if(e[r]===u.I18n.translateApplicationText("Choice %1","control-defaults.survey",0,n)){t=!1;break}}while(!t);var i=u.I18n.translateApplicationText("Choice %1","control-defaults.survey",0,n);e.push(i),this.setProperty("choices.scale",e.join("\n"),this),this.onChoicesChanged()}},e.prototype.removeQuestion=function(t){var e=this.getLabels();e.splice(t.getIndex(),1),this.setProperty("choices.text",e.join("\n"),this),this.onChoicesChanged()},e.prototype.removeChoiceAtIndex=function(t){var e=this.getChoices();e[t]&&(e.splice(t,1),this.setProperty("choices.scale",e.join("\n"),this),this.onChoicesChanged())},e.prototype.getTextAssociatedWithLabel=function(t){if(t===this.labelDOMNode)return this.getProperty("label.text");var e;if(this.header&&null!==(e=this.header.getLabelOfTypeChoiceIndex(t)))return this.getChoices()[e];for(var n=0,r=this.questions.length;n<r;n++){if(this.questions[n].getLabelDOMNode()===t)return this.getLabels()[n];if(null!==(e=this.questions[n].getLabelOfTypeChoiceIndex(t)))return this.getChoices()[e]}return""},e.prototype.setLabelTextWhichIsComingFromTheUser=function(e,n){if(n===this.labelDOMNode)return t.prototype.setLabelTextWhichIsComingFromTheUser.call(this,e,n);var r,o=this.getLabels(),i=this.getChoices();if(this.header&&null!==(r=this.header.getLabelOfTypeChoiceIndex(n))){var s=String(e||"").trim().replace(/[\r\n]+/g," ");return this.header.updateChoiceTextAtIndex(r,e),this.questions.forEach((function(t){t.updateChoiceTextAtIndex(r,e)})),i[r]=s,this.setProperty("choices.scale",i.join("\n"),this),this}for(var a=0,u=this.questions.length;a<u;a++){if(this.questions[a].getLabelDOMNode()===n){s=String(e||"").trim().replace(/[\r\n]+/g," ");this.questions[a].setLabel(s,!1),o[a]=s,this.setProperty("choices.text",o.join("\n"),this);break}if(null!==(r=this.questions[a].getLabelOfTypeChoiceIndex(n))){s=String(e||"").trim().replace(/[\r\n]+/g," ");this.questions.forEach((function(t){t.updateChoiceTextAtIndex(r,e)})),this.header&&this.header.updateChoiceTextAtIndex(r,e),i[r]=s,this.setProperty("choices.scale",i.join("\n"),this);break}}return this},e.prototype.getFieldContexts=function(){for(var t=[],e=this.renderDOMNode.querySelectorAll(".input.label-editable label"),r=e.length,o=0;o<r;o++){var i=e[o].parentNode.classList.contains("q");t.push({node:i?e[o].parentNode:e[o],context:i?n.SelectionInputContext.INPUT:n.SelectionInputContext.LABEL})}return t},e.prototype.performTranslation=function(){this.labelDOMNode&&(this.labelDOMNode.textContent=u.I18n.translateViewFormText(this.getProperty("label.text"),this.getLabelI18nContext()));var t=this.getChoices().map((function(t){return u.I18n.translateViewFormText(t,"survey-scale")})),e=this.getLabels().map((function(t){return u.I18n.translateViewFormText(t)}));if(this.getProperty("surveySettings.showScale"))for(o=0,i=this.questions.length;o<i;o++){this.questions[o].getLabelDOMNode().textContent=e[o];for(var n=0,r=t.length;n<r;n++)this.questions[o].updateChoiceTextAtIndex(n,t[n])}else{for(var o=0,i=this.questions.length;o<i;o++)this.questions[o].getLabelDOMNode().textContent=e[o];if(this.header)for(var o=0,i=t.length;o<i;o++)this.header.updateChoiceTextAtIndex(o,t[o])}},e.prototype.supportsLabelInsideRendering=function(){return!1},e.prototype.embedInPDFPage=function(t){t.writeHTMLElement(this.labelDOMNode),this.header&&this.header.getLastRenderedChoiceLabels().forEach((function(e){e&&e.parentNode&&e.textContent&&t.writeHTMLElement(e)}));for(var e=function(e,r){t.writeHTMLElement(n.questions[e].getLabelDOMNode()),n.questions[e].getLastRenderedChoiceLabels().forEach((function(e){e&&e.parentNode&&e.textContent&&t.writeHTMLElement(e)}));var o=t.getDocument().create(c.PDFNodeEntityType.INPUT_RADIO).setName(n.getProperty("name")+"."+String(e)).setDefaultUncheckedValue(-999).setRadioInputSize(18).setRepeatedIndex(n.getRepeatedIndex()).setRequired(n.isRequired()).setGroupByName(n.getProperty("name"));n.questions[e].getInputs().forEach((function(e,n){var r=e.nextSibling.getBoundingClientRect(),i=~~r.top-t.getDimensions().top,s=~~r.left-t.getDimensions().left;o.addOption(String(n+1),{left:s+4,top:i+4},!1)})),t.appendChild(o)},n=this,r=0,o=this.questions.length;r<o;r++)e(r)},e.prototype.getSubFieldValue=function(t){if(t){for(var e=0,n=this.getLabels(),r=n.length;e<r;e++)if(t===n[e]){var o=this.questions[e].getValue();return null!==o?this.getChoices()[o-1]:o}return null}return this.getValue()},e}(n.Input);e.Survey=p}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(1)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(e){this.value=null,this.inputs=[],this.lastRenderedChoiceLabels=[],this.inlineChoices=!1,this.survey=e,t.QUESTION_UID++,this.labelDOMNode=document.createElement("label"),this.questionId="survey_"+t.QUESTION_UID}return t.prototype.getLabelDOMNode=function(){return this.labelDOMNode},t.prototype.setIndex=function(t){return this.index=t,this},t.prototype.setLabel=function(t,e){return void 0===e&&(e=!0),this.label=t,e&&(this.labelDOMNode.textContent=String(t||"")),this},t.prototype.setChoices=function(t){return this.choices=t,this.maintainInputsList(),this},t.prototype.maintainInputsList=function(){var t=this.inputs.length,e=this.choices.length;if(t<e)for(var n=function(t){var e=document.createElement("input");e.type="radio",e.name=r.questionId,e.value=String(t+1),function(t,n){e.onclick=function(){n.setValue(t),n.survey.trigger("input")}}(t+1,r),r.inputs.push(e)},r=this,o=t;o<e;o++)n(o);else t>e&&this.inputs.splice(t,e-t)},t.prototype.setValue=function(t){if(null!==t&&((t=~~t)<1&&(t=1),t>this.inputs.length&&(t=this.inputs.length)),this.value=t,null===t)for(var e=0,n=this.inputs.length;e<n;e++)this.inputs[e].checked=!1;else this.inputs[t-1].checked=!0;return this},t.prototype.getValue=function(){return this.value},t.prototype.getQuestionId=function(){return this.questionId},t.prototype.appendLabelRow=function(t,e){var r=this,o=document.createElement("tr");o.className="l";var i=document.createElement("td");if(i.className="input label-editable",i.appendChild(this.labelDOMNode),o.appendChild(i),i.colSpan=this.inputs.length,e){var s=document.createElement("div");s.title=n.I18n.translateApplicationText("Remove Question","control-defaults.survey"),s.innerHTML="<span class='vfb vfb-close'></span>",s.className="trash",s.onclick=function(){r.survey.removeQuestion(r)},i.appendChild(s)}t.tBodies[0].appendChild(o)},t.prototype.appendInputsRow=function(t,e){var r,o,i,s=this,a=document.createElement("tr");this.lastRenderedChoiceLabels=[];for(var u=0,l=this.inputs.length;u<l;u++)r=document.createElement("td"),(i=document.createElement(e?"div":"label")).className="i",this.inputs[u].id=this.questionId+"-"+this.index+"-"+u,this.inlineChoices&&((o=document.createElement("label")).htmlFor=this.inputs[u].id,o.textContent=this.choices[u],this.lastRenderedChoiceLabels.push(o)),i.appendChild(this.inputs[u]),i.appendChild(document.createElement("span")),r.appendChild(i),this.inlineChoices&&r.appendChild(o),r.className="q input label-editable",this.inlineChoices&&e&&function(t){var e=document.createElement("div");e.title=n.I18n.translateApplicationText("Remove Choice","control-defaults.survey"),e.innerHTML="<span class='vfb vfb-close'></span>",e.className="trash",e.onclick=function(){s.survey.removeChoiceAtIndex(t)},r.appendChild(e)}(u),a.appendChild(r);t.tBodies[0].appendChild(a)},t.prototype.getIndex=function(){return this.index},t.prototype.getLastRenderedChoiceLabels=function(){return(this.lastRenderedChoiceLabels||[]).slice(0)},t.prototype.getLabelOfTypeChoiceIndex=function(t){var e=this.lastRenderedChoiceLabels.indexOf(t);return e<0?null:e},t.prototype.updateChoiceTextAtIndex=function(t,e){this.choices[t]=e,this.lastRenderedChoiceLabels[t]&&this.lastRenderedChoiceLabels[t].textContent!==e&&(this.lastRenderedChoiceLabels[t].textContent=e)},t.prototype.setInlineChoices=function(t){return this.inlineChoices=t,this},t.prototype.getInputs=function(){return(this.inputs||[]).slice(0)},t.QUESTION_UID=0,t}();e.SurveyQuestion=r}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(1)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.survey=t,this.root=document.createElement("div"),this.root.className="input toolbar",this.update()}return t.prototype.update=function(){for(var t=this;this.root.firstChild;)this.root.removeChild(this.root.firstChild);var e=document.createElement("a");e.href="javascript:",e.textContent=n.I18n.translateApplicationText("Add question","control-defaults.survey"),e.onclick=function(){t.survey.addQuestion()},this.root.appendChild(e),this.root.appendChild(document.createTextNode(" "+n.I18n.translateApplicationText("or","control-defaults.survey")+" "));var r=document.createElement("a");r.href="javascript:",r.textContent=n.I18n.translateApplicationText("Add choice","control-defaults.survey"),r.onclick=function(){t.survey.addChoice()},this.root.appendChild(r)},t.prototype.getRoot=function(){return this.root},t}();e.SurveyToolbar=r}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(1)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.choices=[],this.lastRenderedChoiceLabels=[],this.survey=t}return t.prototype.setChoices=function(t){return this.choices=t,this},t.prototype.getLastRenderedChoiceLabels=function(){return(this.lastRenderedChoiceLabels||[]).slice(0)},t.prototype.appendHeaderRow=function(t,e){var r,o,i=this,s=document.createElement("tr");this.lastRenderedChoiceLabels=[];for(var a=0,u=this.choices.length;a<u;a++)r=document.createElement("td"),(o=document.createElement("label")).textContent=this.choices[a],this.lastRenderedChoiceLabels.push(o),r.className="q input label-editable",e&&function(t){var e=document.createElement("div");e.title=n.I18n.translateApplicationText("Remove Choice","control-defaults.survey"),e.innerHTML="<span class='vfb vfb-close'></span>",e.className="trash",e.onclick=function(){i.survey.removeChoiceAtIndex(t)},r.appendChild(e)}(a),r.appendChild(o),s.appendChild(r);t.tHead.appendChild(s)},t.prototype.getLabelOfTypeChoiceIndex=function(t){var e=this.lastRenderedChoiceLabels.indexOf(t);return e<0?null:e},t.prototype.updateChoiceTextAtIndex=function(t,e){this.choices[t]=e,this.lastRenderedChoiceLabels[t]&&this.lastRenderedChoiceLabels[t].textContent!==e&&(this.lastRenderedChoiceLabels[t].textContent=e)},t}();e.SurveyHeader=r}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(70),n(1)],void 0===(o=function(t,e,n,r){Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.getValueType=function(){return n.EInputDefaultValue.BOOLEAN_VALUE},e.prototype.getValue=function(){if(!0===this.value||!1===this.value)return this.value},e.prototype.explainValue=function(){var t=this.getValue();return void 0===t?void 0:!0===t?r.I18n.translateApplicationText("Yes","editor-rules"):r.I18n.translateApplicationText("No","editor-rules")},e}(n.InputDefaultValue);e.BooleanInputDefaultValue=o}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(1)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){var e=this;this.product=t,this.root=document.createElement("div"),this.root.className="input choice has-trash label-editable",this.labelDOMNode=document.createElement("label"),this.root.appendChild(this.labelDOMNode),this.trashButton=document.createElement("div"),this.trashButton.className="trash",this.trashButton.innerHTML='<span class="vfb vfb-close"></span>',this.trashButton.title=n.I18n.translateApplicationText("Remove","control-defaults.product"),this.trashButton.onclick=function(){e.product.removeChoice(e)},this.root.appendChild(this.trashButton)}return t.prototype.getLabelDOMNode=function(){return this.labelDOMNode},t.prototype.getIndex=function(){return this.index},t.prototype.setIndex=function(t){return this.index=t,this},t.prototype.getText=function(){return this.text},t.prototype.setText=function(t,e){return void 0===e&&(e=!0),this.text=t,e&&(this.labelDOMNode.textContent=String(this.text||"")),this},t.prototype.getRoot=function(){return this.root},t}();e.ProductChoice=r}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(0),n(9),n(4),n(15),n(87),n(12),n(302),n(1),n(6)],void 0===(o=function(t,e,n,r,o,i,a,u,l,c,p){Object.defineProperty(e,"__esModule",{value:!0});var d=function(t){function e(n,r,o){var i=t.call(this,n,r||e.getDefaultProperties(n),o)||this;return i.submissionModel=null,i.formCommands=null,i.addClass("code"),i.codeRenderer=document.createElement("div"),i.codeRenderer.className="input embed",i.getRoot().appendChild(i.codeRenderer),i.document.isEditMode()&&(i.toolbar=new l.CodeToolbar(i),i.boot(!0)),i}return s(e,t),e.getDefaultProperties=function(e){return t.addInputProperties.call(this,t.addSizeProperties.call(this,{name:"Q",visibility:"",code:'<link name="persons" rel="data-source" type="application/json" href="/examples/persons.json" />\n\n<h1>'+p.Strings.toHTML(c.I18n.translateApplicationText("AbcSubmit Code","control-defaults.code"))+'</h1>\n\n{{#each persons}}\n    <div data-role="person" data-person-id="{{id}}" onclick="alert( idPlusTwo( {{id}} ) )">\n        <span>{{name}}</span> ('+p.Strings.toHTML(c.I18n.translateApplicationText("age","control-defaults.code"))+": {{age}})\n    </div>\n{{#end}}\n\n<style>\n    div[data-role=person] {\n        display: block;\n        background-color: green;\n        padding: 5px;\n        cursor: pointer;\n    }\n    \n    div[data-role=person]:hover {\n        background-color: red;\n    }\n</style>\n\n<script>\n\nfunction idPlusTwo( id ) {\n    return id + 2;\n}\n\n<\/script>"}),e)},e.prototype.getFieldsLayout=function(){var t=[{row:0,span:r.InputSpan.FULL,domNode:this.codeRenderer}];return this.toolbar&&t.push({row:1,span:r.InputSpan.FULL,domNode:this.toolbar.getRoot()}),t},e.prototype.getNodeName=function(){return"Code"},e.prototype.getTypeId=function(){return o.NodeTypes.CODE},e.prototype.getValue=function(){return null},e.prototype.hasLabel=function(){return!1},e.prototype.hasValue=function(){return!1},e.prototype.setValue=function(t){return this},e.prototype.listenToRootNodeSubtreeModifications=function(){if(!this.document.isEditMode())try{var t=u.Debouncer.create((function(){console.log("[VIRTUAL_DOM] trigger page resize"),n(window).trigger("resize")}),300);new MutationObserver((function(){t()})).observe(this.codeRenderer,{attributes:!0,childList:!0,subtree:!0}),console.log("[VIRTUAL_DOM] hooked on subtree-modifications on rendering root node")}catch(t){}},e.prototype.onCodeChanged=function(){this.virtualDOM.write(String(this.getProperty("code")||""))},e.prototype.editCode=function(){this.document.isEditMode()&&this.document.trigger(i.Document.EVENT_EDITOR_CODE_SOURCE,this)},e.prototype.setSubmissionModel=function(t){return this.submissionModel=t,this},e.prototype.setFormCommands=function(t){return this.formCommands=t,this},e.prototype.boot=function(t){var e=this;this.virtualDOM=new a.VirtualDOM(this.codeRenderer,this,this.formCommands,this.submissionModel),this.virtualDOM.on(a.VirtualDOM.EVENT_LOAD,(function(){e.getRoot().setAttribute("data-rendering-phase","load")})),this.virtualDOM.on(a.VirtualDOM.EVENT_ERROR,(function(){e.getRoot().setAttribute("data-rendering-phase","error")})),this.virtualDOM.on(a.VirtualDOM.EVENT_RENDER,(function(){e.getRoot().setAttribute("data-rendering-phase","render")})),this.listenToRootNodeSubtreeModifications(),t?setTimeout((function(){e.onCodeChanged()}),10):this.onCodeChanged()},e.prototype.performTranslation=function(){},e.prototype.supportsLabelInsideRendering=function(){return!1},e}(r.Input);e.Code=d}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(294)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.create=function(t,e){return new n(t,e)},t}();e.JavascriptVM=r}.apply(e,r))||(t.exports=o)},function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,require,require,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f;f=function(){var define,module,exports;return function t(e,n,r){function o(s,a){if(!n[s]){if(!e[s]){if(!a&&"function"==typeof require&&require)return require(s,!0);if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[s]={exports:{}};e[s][0].call(l.exports,(function(t){return o(e[s][1][t]||t)}),l,l.exports,t,e,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,e,n){var r,o;r=this,o=function(t){var e,n,r,o,i,s,a,u,l,c,p,d,h,f,g,m,y,v,b;function C(t,e){if(!t)throw new Error("ASSERT: "+e)}function E(t){return t>=48&&t<=57}function A(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function I(t){return"01234567".indexOf(t)>=0}function T(t){return 32===t||9===t||11===t||12===t||160===t||t>=5760&&"áá ââââââââââââ¯âã\ufeff".indexOf(String.fromCharCode(t))>0}function S(t){return 10===t||13===t||8232===t||8233===t}function w(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||92===t||t>=128&&a.NonAsciiIdentifierStart.test(String.fromCharCode(t))}function _(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||92===t||t>=128&&a.NonAsciiIdentifierPart.test(String.fromCharCode(t))}function N(t){switch(t){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function D(t){return"eval"===t||"arguments"===t}function O(){var t,e,n;for(e=!1,n=!1;d<g;)if(t=c.charCodeAt(d),n)++d,S(t)&&(n=!1,13===t&&10===c.charCodeAt(d)&&++d,++h,f=d);else if(e)S(t)?(13===t&&10===c.charCodeAt(d+1)&&++d,++h,++d,f=d,d>=g&&z({},s.UnexpectedToken,"ILLEGAL")):(t=c.charCodeAt(d++),d>=g&&z({},s.UnexpectedToken,"ILLEGAL"),42===t&&47===(t=c.charCodeAt(d))&&(++d,e=!1));else if(47===t)if(47===(t=c.charCodeAt(d+1)))d+=2,n=!0;else{if(42!==t)break;e=!0,(d+=2)>=g&&z({},s.UnexpectedToken,"ILLEGAL")}else if(T(t))++d;else{if(!S(t))break;++d,13===t&&10===c.charCodeAt(d)&&++d,++h,f=d}}function P(t){var e,n,r,o=0;for(n="u"===t?4:2,e=0;e<n;++e){if(!(d<g&&A(c[d])))return"";r=c[d++],o=16*o+"0123456789abcdef".indexOf(r.toLowerCase())}return String.fromCharCode(o)}function x(){var t,e,n,r;for(e=0,"}"===(t=c[d])&&z({},s.UnexpectedToken,"ILLEGAL");d<g&&A(t=c[d++]);)e=16*e+"0123456789abcdef".indexOf(t.toLowerCase());return(e>1114111||"}"!==t)&&z({},s.UnexpectedToken,"ILLEGAL"),e<=65535?String.fromCharCode(e):(n=55296+(e-65536>>10),r=56320+(e-65536&1023),String.fromCharCode(n,r))}function M(){var t,e;for(t=c.charCodeAt(d++),e=String.fromCharCode(t),92===t&&(117!==c.charCodeAt(d)&&z({},s.UnexpectedToken,"ILLEGAL"),++d,(t=P("u"))&&"\\"!==t&&w(t.charCodeAt(0))||z({},s.UnexpectedToken,"ILLEGAL"),e=t);d<g&&_(t=c.charCodeAt(d));)++d,e+=String.fromCharCode(t),92===t&&(e=e.substr(0,e.length-1),117!==c.charCodeAt(d)&&z({},s.UnexpectedToken,"ILLEGAL"),++d,(t=P("u"))&&"\\"!==t&&_(t.charCodeAt(0))||z({},s.UnexpectedToken,"ILLEGAL"),e+=t);return e}function R(){var t,n;return t=d,{type:1===(n=92===c.charCodeAt(d)?M():function(){var t,e;for(t=d++;d<g;){if(92===(e=c.charCodeAt(d)))return d=t,M();if(!_(e))break;++d}return c.slice(t,d)}()).length?e.Identifier:function(t){if(p&&N(t))return!0;switch(t.length){case 2:return"if"===t||"in"===t||"do"===t;case 3:return"var"===t||"for"===t||"new"===t||"try"===t||"let"===t;case 4:return"this"===t||"else"===t||"case"===t||"void"===t||"with"===t||"enum"===t;case 5:return"while"===t||"break"===t||"catch"===t||"throw"===t||"const"===t||"yield"===t||"class"===t||"super"===t;case 6:return"return"===t||"typeof"===t||"delete"===t||"switch"===t||"export"===t||"import"===t;case 7:return"default"===t||"finally"===t||"extends"===t;case 8:return"function"===t||"continue"===t||"debugger"===t;case 10:return"instanceof"===t;default:return!1}}(n)?e.Keyword:"null"===n?e.NullLiteral:"true"===n||"false"===n?e.BooleanLiteral:e.Identifier,value:n,lineNumber:h,lineStart:f,range:[t,d]}}function L(){var t,n,r,o,i=d,a=c.charCodeAt(d),u=c[d];switch(a){case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++d,b.tokenize&&(40===a?b.openParenToken=b.tokens.length:123===a&&(b.openCurlyToken=b.tokens.length)),{type:e.Punctuator,value:String.fromCharCode(a),lineNumber:h,lineStart:f,range:[i,d]};default:if(61===(t=c.charCodeAt(d+1)))switch(a){case 37:case 38:case 42:case 43:case 45:case 47:case 60:case 62:case 94:case 124:return d+=2,{type:e.Punctuator,value:String.fromCharCode(a)+String.fromCharCode(t),lineNumber:h,lineStart:f,range:[i,d]};case 33:case 61:return d+=2,61===c.charCodeAt(d)&&++d,{type:e.Punctuator,value:c.slice(i,d),lineNumber:h,lineStart:f,range:[i,d]}}}return n=c[d+1],r=c[d+2],o=c[d+3],">"===u&&">"===n&&">"===r&&"="===o?{type:e.Punctuator,value:">>>=",lineNumber:h,lineStart:f,range:[i,d+=4]}:">"===u&&">"===n&&">"===r?{type:e.Punctuator,value:">>>",lineNumber:h,lineStart:f,range:[i,d+=3]}:"<"===u&&"<"===n&&"="===r?{type:e.Punctuator,value:"<<=",lineNumber:h,lineStart:f,range:[i,d+=3]}:">"===u&&">"===n&&"="===r?{type:e.Punctuator,value:">>=",lineNumber:h,lineStart:f,range:[i,d+=3]}:"."===u&&"."===n&&"."===r?{type:e.Punctuator,value:"...",lineNumber:h,lineStart:f,range:[i,d+=3]}:u===n&&"+-<>&|".indexOf(u)>=0?{type:e.Punctuator,value:u+n,lineNumber:h,lineStart:f,range:[i,d+=2]}:"="===u&&">"===n?{type:e.Punctuator,value:"=>",lineNumber:h,lineStart:f,range:[i,d+=2]}:"<>=!+-*%&|^/".indexOf(u)>=0||"."===u?(++d,{type:e.Punctuator,value:u,lineNumber:h,lineStart:f,range:[i,d]}):void z({},s.UnexpectedToken,"ILLEGAL")}function F(){var t,n,r;if(C(E((r=c[d]).charCodeAt(0))||"."===r,"Numeric literal must start with a decimal digit or a decimal point"),n=d,t="","."!==r){if(t=c[d++],r=c[d],"0"===t){if("x"===r||"X"===r)return++d,function(t){for(var n="";d<g&&A(c[d]);)n+=c[d++];return 0===n.length&&z({},s.UnexpectedToken,"ILLEGAL"),w(c.charCodeAt(d))&&z({},s.UnexpectedToken,"ILLEGAL"),{type:e.NumericLiteral,value:parseInt("0x"+n,16),lineNumber:h,lineStart:f,range:[t,d]}}(n);if("b"===r||"B"===r){for(++d,t="";d<g&&("0"===(r=c[d])||"1"===r);)t+=c[d++];return 0===t.length&&z({},s.UnexpectedToken,"ILLEGAL"),d<g&&(w(r=c.charCodeAt(d))||E(r))&&z({},s.UnexpectedToken,"ILLEGAL"),{type:e.NumericLiteral,value:parseInt(t,2),lineNumber:h,lineStart:f,range:[n,d]}}if("o"===r||"O"===r||I(r))return function(t,n){var r,o;for(I(t)?(o=!0,r="0"+c[d++]):(o=!1,++d,r="");d<g&&I(c[d]);)r+=c[d++];return o||0!==r.length||z({},s.UnexpectedToken,"ILLEGAL"),(w(c.charCodeAt(d))||E(c.charCodeAt(d)))&&z({},s.UnexpectedToken,"ILLEGAL"),{type:e.NumericLiteral,value:parseInt(r,8),octal:o,lineNumber:h,lineStart:f,range:[n,d]}}(r,n);r&&E(r.charCodeAt(0))&&z({},s.UnexpectedToken,"ILLEGAL")}for(;E(c.charCodeAt(d));)t+=c[d++];r=c[d]}if("."===r){for(t+=c[d++];E(c.charCodeAt(d));)t+=c[d++];r=c[d]}if("e"===r||"E"===r)if(t+=c[d++],"+"!==(r=c[d])&&"-"!==r||(t+=c[d++]),E(c.charCodeAt(d)))for(;E(c.charCodeAt(d));)t+=c[d++];else z({},s.UnexpectedToken,"ILLEGAL");return w(c.charCodeAt(d))&&z({},s.UnexpectedToken,"ILLEGAL"),{type:e.NumericLiteral,value:parseFloat(t),lineNumber:h,lineStart:f,range:[n,d]}}function k(){var t,n,r,o,i,a,u,l,p="";for(r=!1,o=!1,n=d,++d;d<g;){if("`"===(t=c[d++])){o=!0,r=!0;break}if("$"===t){if("{"===c[d]){++d,r=!0;break}p+=t}else if("\\"===t)if(S((t=c[d++]).charCodeAt(0)))++h,"\r"===t&&"\n"===c[d]&&++d;else switch(t){case"n":p+="\n";break;case"r":p+="\r";break;case"t":p+="\t";break;case"u":case"x":"{"===c[d]?(++d,p+=x()):(i=d,(a=P(t))?p+=a:(d=i,p+=t));break;case"b":p+="\b";break;case"f":p+="\f";break;case"v":p+="\v";break;default:I(t)?(0!==(u="01234567".indexOf(t))&&(l=!0),d<g&&I(c[d])&&(l=!0,u=8*u+"01234567".indexOf(c[d++]),"0123".indexOf(t)>=0&&d<g&&I(c[d])&&(u=8*u+"01234567".indexOf(c[d++]))),p+=String.fromCharCode(u)):p+=t}else S(t.charCodeAt(0))?(++h,"\r"===t&&"\n"===c[d]&&++d):p+=t}return r||z({},s.UnexpectedToken,"ILLEGAL"),{type:e.Template,value:{cooked:p,raw:c.slice(n+1,d-(o?1:2))},tail:o,octal:l,lineNumber:h,lineStart:f,range:[n,d]}}function B(){var t,n,r,o,i,a,u,l=!1,p=!1;for(y=null,O(),r=d,C("/"===(n=c[d]),"Regular expression literal must start with a slash"),t=c[d++];d<g;)if(t+=n=c[d++],l)"]"===n&&(l=!1);else if("\\"===n)S((n=c[d++]).charCodeAt(0))&&z({},s.UnterminatedRegExp),t+=n;else{if("/"===n){p=!0;break}"["===n?l=!0:S(n.charCodeAt(0))&&z({},s.UnterminatedRegExp)}for(p||z({},s.UnterminatedRegExp),o=t.substr(1,t.length-2),i="";d<g&&_((n=c[d]).charCodeAt(0));)if(++d,"\\"===n&&d<g)if("u"===(n=c[d]))if(u=++d,n=P("u"))for(i+=n,t+="\\u";u<d;++u)t+=c[u];else d=u,i+="u",t+="\\u";else t+="\\";else i+=n,t+=n;try{a=new RegExp(o,i)}catch(t){z({},s.InvalidRegExp)}return H(),b.tokenize?{type:e.RegularExpression,value:a,lineNumber:h,lineStart:f,range:[r,d]}:{literal:t,value:a,range:[r,d]}}function V(t){return t.type===e.Identifier||t.type===e.Keyword||t.type===e.BooleanLiteral||t.type===e.NullLiteral}function U(){var t;return O(),d>=g?{type:e.EOF,lineNumber:h,lineStart:f,range:[d,d]}:40===(t=c.charCodeAt(d))||41===t||58===t?L():39===t||34===t?function(){var t,n,r,o,i,a,u="",l=!1;for(C("'"===(t=c[d])||'"'===t,"String literal must starts with a quote"),n=d,++d;d<g;){if((r=c[d++])===t){t="";break}if("\\"===r)if((r=c[d++])&&S(r.charCodeAt(0)))++h,"\r"===r&&"\n"===c[d]&&++d;else switch(r){case"n":u+="\n";break;case"r":u+="\r";break;case"t":u+="\t";break;case"u":case"x":"{"===c[d]?(++d,u+=x()):(a=d,(i=P(r))?u+=i:(d=a,u+=r));break;case"b":u+="\b";break;case"f":u+="\f";break;case"v":u+="\v";break;default:I(r)?(0!==(o="01234567".indexOf(r))&&(l=!0),d<g&&I(c[d])&&(l=!0,o=8*o+"01234567".indexOf(c[d++]),"0123".indexOf(r)>=0&&d<g&&I(c[d])&&(o=8*o+"01234567".indexOf(c[d++]))),u+=String.fromCharCode(o)):u+=r}else{if(S(r.charCodeAt(0)))break;u+=r}}return""!==t&&z({},s.UnexpectedToken,"ILLEGAL"),{type:e.StringLiteral,value:u,octal:l,lineNumber:h,lineStart:f,range:[n,d]}}():96===t?k():w(t)?R():46===t?E(c.charCodeAt(d+1))?F():L():E(t)?F():b.tokenize&&47===t?function(){var t,e;if(!(t=b.tokens[b.tokens.length-1]))return B();if("Punctuator"===t.type){if(")"===t.value)return!(e=b.tokens[b.openParenToken-1])||"Keyword"!==e.type||"if"!==e.value&&"while"!==e.value&&"for"!==e.value&&"with"!==e.value?L():B();if("}"===t.value){if(b.tokens[b.openCurlyToken-3]&&"Keyword"===b.tokens[b.openCurlyToken-3].type){if(!(e=b.tokens[b.openCurlyToken-4]))return L()}else{if(!b.tokens[b.openCurlyToken-4]||"Keyword"!==b.tokens[b.openCurlyToken-4].type)return L();if(!(e=b.tokens[b.openCurlyToken-5]))return B()}return r.indexOf(e.value)>=0?L():B()}return B()}return"Keyword"===t.type?B():L()}():L()}function G(){var t;return d=(t=y).range[1],h=t.lineNumber,f=t.lineStart,y=U(),d=t.range[1],h=t.lineNumber,f=t.lineStart,t}function H(){var t,e,n;t=d,e=h,n=f,y=U(),d=t,h=e,f=n}function W(){var t,e,n,r,o;return t="function"==typeof b.advance?b.advance:U,e=d,n=h,r=f,null===y&&(y=t()),d=y.range[1],h=y.lineNumber,f=y.lineStart,o=t(),d=e,h=n,f=r,o}function j(){var t,e,n,r;return t=d,e=h,n=f,O(),r=h!==e,d=t,h=e,f=n,r}function z(t,e){var n,r=Array.prototype.slice.call(arguments,2),o=e.replace(/%(\d)/g,(function(t,e){return C(e<r.length,"Message reference must be in range"),r[e]}));throw"number"==typeof t.lineNumber?((n=new Error("Line "+t.lineNumber+": "+o)).index=t.range[0],n.lineNumber=t.lineNumber,n.column=t.range[0]-f+1):((n=new Error("Line "+h+": "+o)).index=d,n.lineNumber=h,n.column=d-f+1),n.description=o,n}function Y(){try{z.apply(null,arguments)}catch(t){if(!b.errors)throw t;b.errors.push(t)}}function K(t){if(t.type===e.EOF&&z(t,s.UnexpectedEOS),t.type===e.NumericLiteral&&z(t,s.UnexpectedNumber),t.type===e.StringLiteral&&z(t,s.UnexpectedString),t.type===e.Identifier&&z(t,s.UnexpectedIdentifier),t.type===e.Keyword){if(function(t){switch(t){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}(t.value))z(t,s.UnexpectedReserved);else if(p&&N(t.value))return void Y(t,s.StrictReservedWord);z(t,s.UnexpectedToken,t.value)}t.type===e.Template&&z(t,s.UnexpectedTemplate,t.value.raw),z(t,s.UnexpectedToken,t.value)}function X(t){var n=G();n.type===e.Punctuator&&n.value===t||K(n)}function $(t){var n=G();n.type===e.Keyword&&n.value===t||K(n)}function q(t){return y.type===e.Punctuator&&y.value===t}function Z(t){return y.type===e.Keyword&&y.value===t}function J(t){return y.type===e.Identifier&&y.value===t}function Q(){var t;59!==c.charCodeAt(d)?(t=h,O(),h===t&&(q(";")?G():y.type===e.EOF||q("}")||K(y))):G()}function tt(t){return t.type===o.Identifier||t.type===o.MemberExpression}function et(){var t,n=[],r=[],i=null,a=!0;for(X("[");!q("]");)"for"===y.value&&y.type===e.Keyword?(a||z({},s.ComprehensionError),Z("for"),(t=Gt({ignore_body:!0})).of=t.type===o.ForOfStatement,t.type=o.ComprehensionBlock,t.left.kind&&z({},s.ComprehensionError),r.push(t)):"if"===y.value&&y.type===e.Keyword?(a||z({},s.ComprehensionError),$("if"),X("("),i=Nt(),X(")")):","===y.value&&y.type===e.Punctuator?(a=!1,G(),n.push(null)):(t=dt(),n.push(t),t&&t.type===o.SpreadElement?q("]")||z({},s.ElementAfterSpreadElement):q("]")||Z("for")||Z("if")||(X(","),a=!1));return X("]"),i&&!r.length&&z({},s.ComprehensionRequiresBlock),r.length?(1!==n.length&&z({},s.ComprehensionError),{type:o.ComprehensionExpression,filter:i,blocks:r,body:n[0]}):m.createArrayExpression(n)}function nt(t){var e,n,r,i,a;return e=p,n=v.yieldAllowed,v.yieldAllowed=t.generator,r=t.params||[],i=t.defaults||[],a=zt(),t.name&&p&&D(r[0].name)&&Y(t.name,s.StrictParamName),v.yieldAllowed&&!v.yieldFound&&Y({},s.NoYieldInGenerator),p=e,v.yieldAllowed=n,m.createFunctionExpression(null,r,i,a,t.rest||null,t.generator,a.type!==o.BlockStatement)}function rt(t){var e,n,r;return e=p,p=!0,(n=$t()).stricted&&Y(n.stricted,n.message),r=nt({params:n.params,defaults:n.defaults,rest:n.rest,generator:t.generator}),p=e,r}function ot(){var t=G();return t.type===e.StringLiteral||t.type===e.NumericLiteral?(p&&t.octal&&Y(t,s.StrictOctalLiteral),m.createLiteral(t)):m.createIdentifier(t.value)}function it(){var t,n,r,o;return(t=y).type===e.Identifier?(r=ot(),"get"!==t.value||q(":")||q("(")?"set"!==t.value||q(":")||q("(")?q(":")?(G(),m.createProperty("init",r,_t(),!1,!1)):q("(")?m.createProperty("init",r,rt({generator:!1}),!0,!1):m.createProperty("init",r,r,!1,!0):(n=ot(),X("("),t=y,o=[Ot()],X(")"),m.createProperty("set",n,nt({params:o,generator:!1,name:t}),!1,!1)):(n=ot(),X("("),X(")"),m.createProperty("get",n,nt({generator:!1}),!1,!1))):t.type===e.EOF||t.type===e.Punctuator?(q("*")||K(t),G(),r=ot(),q("(")||K(G()),m.createProperty("init",r,rt({generator:!0}),!0,!1)):(n=ot(),q(":")?(G(),m.createProperty("init",n,_t(),!1,!1)):q("(")?m.createProperty("init",n,rt({generator:!1}),!0,!1):void K(G()))}function st(){var t,e,n,r,a=[],u={},l=String;for(X("{");!q("}");)e=(t=it()).key.type===o.Identifier?t.key.name:l(t.key.value),r="init"===t.kind?i.Data:"get"===t.kind?i.Get:i.Set,n="$"+e,Object.prototype.hasOwnProperty.call(u,n)?(u[n]===i.Data?p&&r===i.Data?Y({},s.StrictDuplicateProperty):r!==i.Data&&Y({},s.AccessorDataProperty):r===i.Data?Y({},s.AccessorDataProperty):u[n]&r&&Y({},s.AccessorGetSet),u[n]|=r):u[n]=r,a.push(t),q("}")||X(",");return X("}"),m.createObjectExpression(a)}function at(t){var e=function(t){var e,n;return y=null,O(),e=t.head?"`":"}",c[d]!==e&&z({},s.UnexpectedToken,"ILLEGAL"),n=k(),H(),n}(t);return p&&e.octal&&z(e,s.StrictOctalLiteral),m.createTemplateElement({raw:e.value.raw,cooked:e.value.cooked},e.tail)}function ut(){var t,e,n;for(e=[t=at({head:!0})],n=[];!t.tail;)n.push(Nt()),t=at({head:!1}),e.push(t);return m.createTemplateLiteral(e,n)}function lt(){var t;return X("("),++v.parenthesizedCount,v.allowArrowFunction=!v.allowArrowFunction,t=Nt(),v.allowArrowFunction=!1,t.type!==o.ArrowFunctionExpression&&X(")"),t}function ct(){var t,n;if(n=y,(t=y.type)===e.Identifier)return G(),m.createIdentifier(n.value);if(t===e.StringLiteral||t===e.NumericLiteral)return p&&y.octal&&Y(y,s.StrictOctalLiteral),m.createLiteral(G());if(t===e.Keyword){if(Z("this"))return G(),m.createThisExpression();if(Z("function"))return Zt();if(Z("class"))return ee();if(Z("super"))return G(),m.createIdentifier("super")}return t===e.BooleanLiteral?((n=G()).value="true"===n.value,m.createLiteral(n)):t===e.NullLiteral?((n=G()).value=null,m.createLiteral(n)):q("[")?et():q("{")?st():q("(")?lt():q("/")||q("/=")?m.createLiteral(B()):t===e.Template?ut():K(G())}function pt(){var t,e=[];if(X("("),!q(")"))for(;d<g&&(t=dt(),e.push(t),!q(")"));)t.type===o.SpreadElement&&z({},s.ElementAfterSpreadElement),X(",");return X(")"),e}function dt(){return q("...")?(G(),m.createSpreadElement(_t())):_t()}function ht(){var t=G();return V(t)||K(t),m.createIdentifier(t.value)}function ft(){return X("."),ht()}function gt(){var t;return X("["),t=Nt(),X("]"),t}function mt(){var t,e;return $("new"),t=vt(),e=q("(")?pt():[],m.createNewExpression(t,e)}function yt(){var t,n;for(t=Z("new")?mt():ct();q(".")||q("[")||q("(")||y.type===e.Template;)q("(")?(n=pt(),t=m.createCallExpression(t,n)):t=q("[")?m.createMemberExpression("[",t,gt()):q(".")?m.createMemberExpression(".",t,ft()):m.createTaggedTemplateExpression(t,ut());return t}function vt(){var t;for(t=Z("new")?mt():ct();q(".")||q("[")||y.type===e.Template;)t=q("[")?m.createMemberExpression("[",t,gt()):q(".")?m.createMemberExpression(".",t,ft()):m.createTaggedTemplateExpression(t,ut());return t}function bt(){var t=yt(),n=y;return y.type!==e.Punctuator||!q("++")&&!q("--")||j()||(p&&t.type===o.Identifier&&D(t.name)&&Y({},s.StrictLHSPostfix),tt(t)||z({},s.InvalidLHSInAssignment),n=G(),t=m.createPostfixExpression(n.value,t)),t}function Ct(){var t,n;return y.type!==e.Punctuator&&y.type!==e.Keyword?bt():q("++")||q("--")?(t=G(),n=Ct(),p&&n.type===o.Identifier&&D(n.name)&&Y({},s.StrictLHSPrefix),tt(n)||z({},s.InvalidLHSInAssignment),m.createUnaryExpression(t.value,n)):q("+")||q("-")||q("~")||q("!")?(t=G(),n=Ct(),m.createUnaryExpression(t.value,n)):Z("delete")||Z("void")||Z("typeof")?(t=G(),n=Ct(),n=m.createUnaryExpression(t.value,n),p&&"delete"===n.operator&&n.argument.type===o.Identifier&&Y({},s.StrictDelete),n):bt()}function Et(t,n){var r=0;if(t.type!==e.Punctuator&&t.type!==e.Keyword)return 0;switch(t.value){case"||":r=1;break;case"&&":r=2;break;case"|":r=3;break;case"^":r=4;break;case"&":r=5;break;case"==":case"!=":case"===":case"!==":r=6;break;case"<":case">":case"<=":case">=":case"instanceof":r=7;break;case"in":r=n?7:0;break;case"<<":case">>":case">>>":r=8;break;case"+":case"-":r=9;break;case"*":case"/":case"%":r=11}return r}function At(){var t,e,n,r,o,i,s,a,u;if(r=v.allowIn,v.allowIn=!0,t=Ct(),0===(n=Et(e=y,r)))return t;for(e.prec=n,G(),o=[t,e,Ct()];(n=Et(y,r))>0;){for(;o.length>2&&n<=o[o.length-2].prec;)i=o.pop(),s=o.pop().value,a=o.pop(),o.push(m.createBinaryExpression(s,a,i));(e=G()).prec=n,o.push(e),o.push(Ct())}for(v.allowIn=r,t=o[u=o.length-1];u>1;)t=m.createBinaryExpression(o[u-1].value,o[u-2],t),u-=2;return t}function It(){var t,e,n,r;return t=At(),q("?")&&(G(),e=v.allowIn,v.allowIn=!0,n=_t(),v.allowIn=e,X(":"),r=_t(),t=m.createConditionalExpression(t,n,r)),t}function Tt(t){var e,n,r,i;if(t.type===o.ObjectExpression)for(t.type=o.ObjectPattern,e=0,n=t.properties.length;e<n;e+=1)"init"!==(r=t.properties[e]).kind&&z({},s.InvalidLHSInAssignment),Tt(r.value);else if(t.type===o.ArrayExpression)for(t.type=o.ArrayPattern,e=0,n=t.elements.length;e<n;e+=1)(i=t.elements[e])&&Tt(i);else t.type===o.Identifier?D(t.name)&&z({},s.InvalidLHSInAssignment):t.type===o.SpreadElement?(Tt(t.argument),t.argument.type===o.ObjectPattern&&z({},s.ObjectPatternAsSpread)):t.type!==o.MemberExpression&&t.type!==o.CallExpression&&t.type!==o.NewExpression&&z({},s.InvalidLHSInAssignment)}function St(t,e){var n,r,i,a;if(e.type===o.ObjectExpression)for(e.type=o.ObjectPattern,n=0,r=e.properties.length;n<r;n+=1)"init"!==(i=e.properties[n]).kind&&z({},s.InvalidLHSInFormalsList),St(t,i.value);else if(e.type===o.ArrayExpression)for(e.type=o.ArrayPattern,n=0,r=e.elements.length;n<r;n+=1)(a=e.elements[n])&&St(t,a);else e.type===o.Identifier?Kt(t,e,e.name):e.type!==o.MemberExpression&&z({},s.InvalidLHSInFormalsList)}function wt(t){var e,n,r;return X("=>"),e=p,n=v.yieldAllowed,p=!0,v.yieldAllowed=!1,r=zt(),p=e,v.yieldAllowed=n,m.createArrowFunctionExpression(t.params,t.defaults,r,t.rest,r.type!==o.BlockStatement)}function _t(){var t,n,r,i,a;return Z("yield")?function(){var t,e,n;return $("yield"),v.yieldAllowed||Y({},s.IllegalYield),t=!1,q("*")&&(G(),t=!0),n=v.yieldAllowed,v.yieldAllowed=!1,e=_t(),v.yieldAllowed=n,v.yieldFound=!0,m.createYieldExpression(e,t)}():(i=v.parenthesizedCount,q("(")&&((n=W()).type===e.Punctuator&&")"===n.value||"..."===n.value)?(r=$t(),q("=>")||K(G()),wt(r)):(n=y,t=It(),!q("=>")||t.type!==o.Identifier||v.parenthesizedCount!==i&&v.parenthesizedCount!==i+1?(y.type!==e.Punctuator||"="!==(a=y.value)&&"*="!==a&&"/="!==a&&"%="!==a&&"+="!==a&&"-="!==a&&"<<="!==a&&">>="!==a&&">>>="!==a&&"&="!==a&&"^="!==a&&"|="!==a||(p&&t.type===o.Identifier&&D(t.name)&&Y(n,s.StrictLHSAssignment),!q("=")||t.type!==o.ObjectExpression&&t.type!==o.ArrayExpression?tt(t)||z({},s.InvalidLHSInAssignment):Tt(t),t=m.createAssignmentExpression(G().value,t,_t())),t):(D(t.name)&&z({},s.StrictParamName),wt({params:[t],defaults:[],rest:null}))))}function Nt(){var t,e,n,r,i,a;if(e=[t=_t()],q(",")){for(;d<g&&q(",");)if(G(),t=dt(),e.push(t),t.type===o.SpreadElement){i=!0,q(")")||z({},s.ElementAfterSpreadElement);break}n=m.createSequenceExpression(e)}if(v.allowArrowFunction&&q(")")&&"=>"===(a=W()).value){if(G(),v.allowArrowFunction=!1,r=function(t){var e,n,r,i,s,a,u,l;for(i=[],s=[],a=0,l=null,u={paramSet:{}},e=0,n=t.length;e<n;e+=1)if((r=t[e]).type===o.Identifier)i.push(r),s.push(null),Kt(u,r,r.name);else if(r.type===o.ObjectExpression||r.type===o.ArrayExpression)St(u,r),i.push(r),s.push(null);else if(r.type===o.SpreadElement)C(e===n-1,"It is guaranteed that SpreadElement is last element by parseExpression"),St(u,r.argument),l=r.argument;else{if(r.type!==o.AssignmentExpression)return null;i.push(r.left),s.push(r.right),++a}return u.firstRestricted&&z(u.firstRestricted,u.message),u.stricted&&Y(u.stricted,u.message),0===a&&(s=[]),{params:i,defaults:s,rest:l}}(t=e))return wt(r);K(a)}return i&&z({},s.IllegalSpread),n||t}function Dt(){var t;return X("{"),t=function(){for(var t,e=[];d<g&&!q("}")&&void 0!==(t=oe());)e.push(t);return e}(),X("}"),m.createBlockStatement(t)}function Ot(){var t=G();return t.type!==e.Identifier&&K(t),m.createIdentifier(t.value)}function Pt(t){var e,n=null;return q("{")?Tt(e=st()):q("[")?Tt(e=et()):(e=v.allowDefault&&Z("default")?ht():Ot(),p&&D(e.name)&&Y({},s.StrictVarName)),"const"===t?(q("=")||z({},s.NoUnintializedConst),X("="),n=_t()):q("=")&&(G(),n=_t()),m.createVariableDeclarator(e,n)}function xt(t){var e=[];do{if(e.push(Pt(t)),!q(","))break;G()}while(d<g);return e}function Mt(t){var e;return $(t),e=xt(t),Q(),m.createVariableDeclaration(e,t)}function Rt(){var t,n,r;switch(G(),j()&&z({},s.NewlineAfterModule),y.type){case e.StringLiteral:t=ct(),r=se(),n=null;break;case e.Identifier:t=Ot(),r=null,J("from")||K(G()),G(),(n=ct()).type!==o.Literal&&z({},s.InvalidModuleSpecifier)}return Q(),m.createModuleDeclaration(t,n,r)}function Lt(){return X("*"),m.createExportBatchSpecifier()}function Ft(){var t,e=null;return t=Ot(),J("as")&&(G(),e=ht()),m.createExportSpecifier(t,e)}function kt(){var t,n,r,i,a;if($("export"),Z("default")){if(G(),q("="))G(),r=_t();else if(y.type===e.Keyword)switch(y.value){case"let":case"const":case"var":case"class":r=oe();break;case"function":r=Zt();break;default:K(G())}else r=_t();return Q(),m.createExportDeclaration(!0,r,null,null)}if(y.type===e.Keyword){switch(y.value){case"let":case"const":case"var":case"class":case"function":return t=v.allowDefault,v.allowDefault=!0,n=m.createExportDeclaration(!1,oe(),null,null),v.allowDefault=t,n}K(G())}if(a=[],i=null,q("*"))a.push(Lt());else{X("{");do{a.push(Ft())}while(q(",")&&G());X("}")}return J("from")&&(G(),(i=ct()).type!==o.Literal&&z({},s.InvalidModuleSpecifier)),Q(),m.createExportDeclaration(!1,null,a,i)}function Bt(){var t,e,n;if($("import"),t=[],V(y))e="default",t.push(Vt()),J("from")||z({},s.NoFromAfterImport),G();else if(q("{")){e="named",G();do{t.push(Vt())}while(q(",")&&G());X("}"),J("from")||z({},s.NoFromAfterImport),G()}return(n=ct()).type!==o.Literal&&z({},s.InvalidModuleSpecifier),Q(),m.createImportDeclaration(t,e,n)}function Vt(){var t,e=null;return t=ht(),J("as")&&(G(),e=Ot()),m.createImportSpecifier(t,e)}function Ut(){var t=G(),e=xt();return m.createVariableDeclaration(e,t.value)}function Gt(t){var e,n,r,i,a,u,l,c,p;return e=n=r=null,$("for"),J("each")&&z({},s.EachNotAllowed),X("("),q(";")?G():(Z("var")||Z("let")||Z("const")?(v.allowIn=!1,e=Ut(),v.allowIn=!0,1===e.declarations.length&&(Z("in")||J("of"))&&("in"!==(l=y).value&&"var"===e.kind||!e.declarations[0].init)&&(G(),i=e,a=Nt(),e=null)):(v.allowIn=!1,e=Nt(),v.allowIn=!0,J("of")?(l=G(),i=e,a=Nt(),e=null):Z("in")&&(tt(p=e)||p.type===o.ObjectPattern||p.type===o.ArrayPattern||z({},s.InvalidLHSInForIn),l=G(),i=e,a=Nt(),e=null)),void 0===i&&X(";")),void 0===i&&(q(";")||(n=Nt()),X(";"),q(")")||(r=Nt())),X(")"),c=v.inIteration,v.inIteration=!0,void 0!==t&&t.ignore_body||(u=jt()),v.inIteration=c,void 0===i?m.createForStatement(e,n,r,u):"in"===l.value?m.createForInStatement(i,a,u):m.createForOfStatement(i,a,u)}function Ht(){var t,e,n=[];for(Z("default")?(G(),t=null):($("case"),t=Nt()),X(":");d<g&&!(q("}")||Z("default")||Z("case"))&&void 0!==(e=oe());)n.push(e);return m.createSwitchCase(t,n)}function Wt(){var t,e;return $("catch"),X("("),q(")")&&K(y),t=Nt(),p&&t.type===o.Identifier&&D(t.name)&&Y({},s.StrictCatchVariable),X(")"),e=Dt(),m.createCatchClause(t,e)}function jt(){var t,n,r,i,a,u,l,h,f,b,C,E=y.type;if(E===e.EOF&&K(y),E===e.Punctuator)switch(y.value){case";":return X(";"),m.createEmptyStatement();case"{":return Dt();case"(":return function(){var t=Nt();return Q(),m.createExpressionStatement(t)}()}if(E===e.Keyword)switch(y.value){case"break":return function(){var t,n=null;return $("break"),59===c.charCodeAt(d)?(G(),v.inIteration||v.inSwitch||z({},s.IllegalBreak),m.createBreakStatement(null)):j()?(v.inIteration||v.inSwitch||z({},s.IllegalBreak),m.createBreakStatement(null)):(y.type===e.Identifier&&(t="$"+(n=Ot()).name,Object.prototype.hasOwnProperty.call(v.labelSet,t)||z({},s.UnknownLabel,n.name)),Q(),null!==n||v.inIteration||v.inSwitch||z({},s.IllegalBreak),m.createBreakStatement(n))}();case"continue":return function(){var t,n=null;return $("continue"),59===c.charCodeAt(d)?(G(),v.inIteration||z({},s.IllegalContinue),m.createContinueStatement(null)):j()?(v.inIteration||z({},s.IllegalContinue),m.createContinueStatement(null)):(y.type===e.Identifier&&(t="$"+(n=Ot()).name,Object.prototype.hasOwnProperty.call(v.labelSet,t)||z({},s.UnknownLabel,n.name)),Q(),null!==n||v.inIteration||z({},s.IllegalContinue),m.createContinueStatement(n))}();case"debugger":return $("debugger"),Q(),m.createDebuggerStatement();case"do":return $("do"),C=v.inIteration,v.inIteration=!0,f=jt(),v.inIteration=C,$("while"),X("("),b=Nt(),X(")"),q(";")&&G(),m.createDoWhileStatement(f,b);case"for":return Gt();case"function":return qt();case"class":return ne();case"if":return function(){var t,e,n;return $("if"),X("("),t=Nt(),X(")"),e=jt(),Z("else")?(G(),n=jt()):n=null,m.createIfStatement(t,e,n)}();case"return":return h=null,$("return"),v.inFunctionBody||Y({},s.IllegalReturn),32===c.charCodeAt(d)&&w(c.charCodeAt(d+1))?(h=Nt(),Q(),m.createReturnStatement(h)):j()?m.createReturnStatement(null):(q(";")||q("}")||y.type===e.EOF||(h=Nt()),Q(),m.createReturnStatement(h));case"switch":return function(){var t,e,n,r,o;if($("switch"),X("("),t=Nt(),X(")"),X("{"),e=[],q("}"))return G(),m.createSwitchStatement(t,e);for(r=v.inSwitch,v.inSwitch=!0,o=!1;d<g&&!q("}");)null===(n=Ht()).test&&(o&&z({},s.MultipleDefaultsInSwitch),o=!0),e.push(n);return v.inSwitch=r,X("}"),m.createSwitchStatement(t,e)}();case"throw":return function(){var t;return $("throw"),j()&&z({},s.NewlineAfterThrow),t=Nt(),Q(),m.createThrowStatement(t)}();case"try":return u=[],l=null,$("try"),a=Dt(),Z("catch")&&u.push(Wt()),Z("finally")&&(G(),l=Dt()),0!==u.length||l||z({},s.NoCatchOrFinally),m.createTryStatement(a,[],u,l);case"var":return $("var"),i=xt(),Q(),m.createVariableDeclaration(i,"var");case"while":return function(){var t,e,n;return $("while"),X("("),t=Nt(),X(")"),n=v.inIteration,v.inIteration=!0,e=jt(),v.inIteration=n,m.createWhileStatement(t,e)}();case"with":return function(){var t,e;return p&&Y({},s.StrictModeWith),$("with"),X("("),t=Nt(),X(")"),e=jt(),m.createWithStatement(t,e)}()}return(t=Nt()).type===o.Identifier&&q(":")?(G(),r="$"+t.name,Object.prototype.hasOwnProperty.call(v.labelSet,r)&&z({},s.Redeclaration,"Label",t.name),v.labelSet[r]=!0,n=jt(),delete v.labelSet[r],m.createLabeledStatement(t,n)):(Q(),m.createExpressionStatement(t))}function zt(){return q("{")?Yt():_t()}function Yt(){var t,n,r,i,a,u,l,h,f=[];for(X("{");d<g&&y.type===e.StringLiteral&&(n=y,t=oe(),f.push(t),t.expression.type===o.Literal);)"use strict"===c.slice(n.range[0]+1,n.range[1]-1)?(p=!0,r&&Y(r,s.StrictOctalLiteral)):!r&&n.octal&&(r=n);for(i=v.labelSet,a=v.inIteration,u=v.inSwitch,l=v.inFunctionBody,h=v.parenthesizedCount,v.labelSet={},v.inIteration=!1,v.inSwitch=!1,v.inFunctionBody=!0,v.parenthesizedCount=0;d<g&&!q("}")&&void 0!==(t=oe());)f.push(t);return X("}"),v.labelSet=i,v.inIteration=a,v.inSwitch=u,v.inFunctionBody=l,v.parenthesizedCount=h,m.createBlockStatement(f)}function Kt(t,e,n){var r="$"+n;p?(D(n)&&(t.stricted=e,t.message=s.StrictParamName),Object.prototype.hasOwnProperty.call(t.paramSet,r)&&(t.stricted=e,t.message=s.StrictParamDupe)):t.firstRestricted||(D(n)?(t.firstRestricted=e,t.message=s.StrictParamName):N(n)?(t.firstRestricted=e,t.message=s.StrictReservedWord):Object.prototype.hasOwnProperty.call(t.paramSet,r)&&(t.firstRestricted=e,t.message=s.StrictParamDupe)),t.paramSet[r]=!0}function Xt(t){var e,n,r,o;return"..."===(e=y).value&&(e=G(),n=!0),q("[")?St(t,r=et()):q("{")?(n&&z({},s.ObjectPatternAsRestParameter),St(t,r=st())):(r=Ot(),Kt(t,e,e.value),q("=")&&(n&&Y(y,s.DefaultRestParameter),G(),o=_t(),++t.defaultCount)),n?(q(")")||z({},s.ParameterAfterRestParameter),t.rest=r,!1):(t.params.push(r),t.defaults.push(o),!q(")"))}function $t(t){var e;if(e={params:[],defaultCount:0,defaults:[],rest:null,firstRestricted:t},X("("),!q(")"))for(e.paramSet={};d<g&&Xt(e);)X(",");return X(")"),0===e.defaultCount&&(e.defaults=[]),e}function qt(){var t,e,n,r,o,i,a,u,l,c;return $("function"),l=!1,q("*")&&(G(),l=!0),n=y,t=v.allowDefault&&Z("default")?ht():Ot(),p?D(n.value)&&Y(n,s.StrictFunctionName):D(n.value)?(o=n,i=s.StrictFunctionName):N(n.value)&&(o=n,i=s.StrictReservedWord),o=(r=$t(o)).firstRestricted,r.message&&(i=r.message),a=p,u=v.yieldAllowed,v.yieldAllowed=l,c=!q("{"),e=zt(),p&&o&&z(o,i),p&&r.stricted&&Y(r.stricted,i),v.yieldAllowed&&!v.yieldFound&&Y({},s.NoYieldInGenerator),p=a,v.yieldAllowed=u,m.createFunctionDeclaration(t,r.params,r.defaults,e,r.rest,l,c)}function Zt(){var t,e,n,r,o,i,a,u,l,c=null;return $("function"),u=!1,q("*")&&(G(),u=!0),q("(")||(t=y,c=Ot(),p?D(t.value)&&Y(t,s.StrictFunctionName):D(t.value)?(e=t,n=s.StrictFunctionName):N(t.value)&&(e=t,n=s.StrictReservedWord)),e=(r=$t(e)).firstRestricted,r.message&&(n=r.message),i=p,a=v.yieldAllowed,v.yieldAllowed=u,l=!q("{"),o=zt(),p&&e&&z(e,n),p&&r.stricted&&Y(r.stricted,n),v.yieldAllowed&&!v.yieldFound&&Y({},s.NoYieldInGenerator),p=i,v.yieldAllowed=a,m.createFunctionExpression(c,r.params,r.defaults,o,r.rest,u,l)}function Jt(t){var e,n,r,o;return"static"===y.value?(o=l.static,G()):o=l.prototype,q("*")?(G(),m.createMethodDefinition(o,"",ot(),rt({generator:!0}))):(e=y,n=ot(),"get"!==e.value||q("(")?"set"!==e.value||q("(")?(t[o].hasOwnProperty(n.name)?z(n,s.IllegalDuplicateClassProperty):t[o][n.name]={},t[o][n.name].data=!0,m.createMethodDefinition(o,"",n,rt({generator:!1}))):(n=ot(),t[o].hasOwnProperty(n.name)?void 0===t[o][n.name].set&&void 0===t[o][n.name].data&&void 0!==t[o][n.name].get||z(n,s.IllegalDuplicateClassProperty):t[o][n.name]={},t[o][n.name].set=!0,X("("),e=y,r=[Ot()],X(")"),m.createMethodDefinition(o,"set",n,nt({params:r,generator:!1,name:e}))):(n=ot(),t[o].hasOwnProperty(n.name)?void 0===t[o][n.name].get&&void 0===t[o][n.name].data&&void 0!==t[o][n.name].set||z(n,s.IllegalDuplicateClassProperty):t[o][n.name]={},t[o][n.name].get=!0,X("("),X(")"),m.createMethodDefinition(o,"get",n,nt({generator:!1}))))}function Qt(t){if(!q(";"))return Jt(t);G()}function te(){var t,e=[],n={};for(n[l.static]={},n[l.prototype]={},X("{");d<g&&!q("}");)void 0!==(t=Qt(n))&&e.push(t);return X("}"),m.createClassBody(e)}function ee(){var t,e,n=null;return $("class"),Z("extends")||q("{")||(t=Ot()),Z("extends")&&($("extends"),e=v.yieldAllowed,v.yieldAllowed=!1,n=_t(),v.yieldAllowed=e),m.createClassExpression(t,n,te())}function ne(){var t,e,n=null;return $("class"),t=v.allowDefault&&Z("default")?ht():Ot(),Z("extends")&&($("extends"),e=v.yieldAllowed,v.yieldAllowed=!1,n=_t(),v.yieldAllowed=e),m.createClassDeclaration(t,n,te())}function re(){var t;return!!J("module")&&((t=W()).type===e.StringLiteral||t.type===e.Identifier)}function oe(){if(y.type===e.Keyword)switch(y.value){case"const":case"let":return Mt(y.value);case"function":return qt();case"export":return kt();case"import":return Bt();default:return jt()}if(re()&&z({},s.NestedModule),y.type!==e.EOF)return jt()}function ie(){if(y.type===e.Keyword)switch(y.value){case"export":return kt();case"import":return Bt()}return re()?Rt():oe()}function se(){var t;return X("{"),t=function(){for(var t,e=[];d<g&&!q("}")&&void 0!==(t=oe());)e.push(t);return e}(),X("}"),m.createBlockStatement(t)}function ae(){var t;return p=!1,H(),t=function(){for(var t,n,r,i=[];d<g&&(n=y).type===e.StringLiteral&&(t=ie(),i.push(t),t.expression.type===o.Literal);)"use strict"===c.slice(n.range[0]+1,n.range[1]-1)?(p=!0,r&&Y(r,s.StrictOctalLiteral)):!r&&n.octal&&(r=n);for(;d<g&&void 0!==(t=ie());)i.push(t);return i}(),m.createProgram(t)}function ue(t,e,n,r,o){C("number"==typeof n,"Comment must have valid position"),b.comments.length>0&&b.comments[b.comments.length-1].range[1]>n||b.comments.push({type:t,value:e,range:[n,r],loc:o})}function le(){var t,e,n,r,o,i;for(t="",o=!1,i=!1;d<g;)if(e=c[d],i)S((e=c[d++]).charCodeAt(0))?(n.end={line:h,column:d-f-1},i=!1,ue("Line",t,r,d-1,n),"\r"===e&&"\n"===c[d]&&++d,++h,f=d,t=""):d>=g?(i=!1,t+=e,n.end={line:h,column:g-f},ue("Line",t,r,g,n)):t+=e;else if(o)S(e.charCodeAt(0))?("\r"===e&&"\n"===c[d+1]?(++d,t+="\r\n"):t+=e,++h,++d,f=d,d>=g&&z({},s.UnexpectedToken,"ILLEGAL")):(e=c[d++],d>=g&&z({},s.UnexpectedToken,"ILLEGAL"),t+=e,"*"===e&&"/"===(e=c[d])&&(t=t.substr(0,t.length-1),o=!1,++d,n.end={line:h,column:d-f},ue("Block",t,r,d,n),t=""));else if("/"===e)if("/"===(e=c[d+1]))n={start:{line:h,column:d-f}},r=d,i=!0,(d+=2)>=g&&(n.end={line:h,column:d-f},i=!1,ue("Line",t,r,d,n));else{if("*"!==e)break;r=d,o=!0,n={start:{line:h,column:(d+=2)-f-2}},d>=g&&z({},s.UnexpectedToken,"ILLEGAL")}else if(T(e.charCodeAt(0)))++d;else{if(!S(e.charCodeAt(0)))break;++d,"\r"===e&&"\n"===c[d]&&++d,++h,f=d}}function ce(){var t,e,n,r=[];for(t=0;t<b.comments.length;++t)n={type:(e=b.comments[t]).type,value:e.value},b.range&&(n.range=e.range),b.loc&&(n.loc=e.loc),r.push(n);b.comments=r}function pe(){var t,r,o,i;return O(),t={start:{line:h,column:d-f}},r=b.advance(),t.end={line:h,column:d-f},r.type!==e.EOF&&(o=[r.range[0],r.range[1]],i=c.slice(r.range[0],r.range[1]),b.tokens.push({type:n[r.type],value:i,range:o,loc:t})),r}function de(){var t,e,n,r;return O(),t=d,e={start:{line:h,column:d-f}},n=b.scanRegExp(),e.end={line:h,column:d-f},b.tokenize||(b.tokens.length>0&&(r=b.tokens[b.tokens.length-1]).range[0]===t&&"Punctuator"===r.type&&("/"!==r.value&&"/="!==r.value||b.tokens.pop()),b.tokens.push({type:"RegularExpression",value:n.literal,range:[t,d],loc:e})),n}function he(){var t,e,n,r=[];for(t=0;t<b.tokens.length;++t)n={type:(e=b.tokens[t]).type,value:e.value},b.range&&(n.range=e.range),b.loc&&(n.loc=e.loc),r.push(n);b.tokens=r}function fe(){this.range=[d,d],this.loc={start:{line:h,column:d-f},end:{line:h,column:d-f}}}function ge(){return new fe}function me(){var t,e;return O(),t=ge(),X("("),++v.parenthesizedCount,v.allowArrowFunction=!v.allowArrowFunction,e=Nt(),v.allowArrowFunction=!1,"ArrowFunctionExpression"===e.type?(t.end(),t.apply(e)):(X(")"),t.end(),t.applyGroup(e)),e}function ye(){var t,n;for(O(),t=ge(),n=Z("new")?mt():ct();q(".")||q("[")||y.type===e.Template;)q("[")?(n=m.createMemberExpression("[",n,gt()),t.end(),t.apply(n)):q(".")?(n=m.createMemberExpression(".",n,ft()),t.end(),t.apply(n)):(n=m.createTaggedTemplateExpression(n,ut()),t.end(),t.apply(n));return n}function ve(){var t,n,r;for(O(),t=ge(),n=Z("new")?mt():ct();q(".")||q("[")||q("(")||y.type===e.Template;)q("(")?(r=pt(),n=m.createCallExpression(n,r),t.end(),t.apply(n)):q("[")?(n=m.createMemberExpression("[",n,gt()),t.end(),t.apply(n)):q(".")?(n=m.createMemberExpression(".",n,ft()),t.end(),t.apply(n)):(n=m.createTaggedTemplateExpression(n,ut()),t.end(),t.apply(n));return n}function be(){var t,e,n;b.comments&&(b.skipComment=O,O=le),(b.range||b.loc)&&(b.parseGroupExpression=lt,b.parseLeftHandSideExpression=vt,b.parseLeftHandSideExpressionAllowCall=yt,lt=me,vt=ye,yt=ve,e=b.range,n=b.loc,t=function(t){function r(t){return t.type===o.LogicalExpression||t.type===o.BinaryExpression}function i(t){var o,s;r(t.left)&&i(t.left),r(t.right)&&i(t.right),e&&(t.left.groupRange||t.right.groupRange?(o=t.left.groupRange?t.left.groupRange[0]:t.left.range[0],s=t.right.groupRange?t.right.groupRange[1]:t.right.range[1],t.range=[o,s]):void 0===t.range&&(o=t.left.range[0],s=t.right.range[1],t.range=[o,s])),n&&(t.left.groupLoc||t.right.groupLoc?(o=t.left.groupLoc?t.left.groupLoc.start:t.left.loc.start,s=t.right.groupLoc?t.right.groupLoc.end:t.right.loc.end,t.loc={start:o,end:s},t=m.postProcess(t)):void 0===t.loc&&(t.loc={start:t.left.loc.start,end:t.right.loc.end},t=m.postProcess(t)))}return function(){var o,s;return O(),o=ge(),s=t.apply(null,arguments),o.end(),e&&void 0===s.range&&o.apply(s),n&&void 0===s.loc&&o.apply(s),r(s)&&i(s),s}},b.parseAssignmentExpression=_t,b.parseBinaryExpression=At,b.parseBlock=Dt,b.parseFunctionSourceElements=Yt,b.parseCatchClause=Wt,b.parseComputedMember=gt,b.parseConditionalExpression=It,b.parseConstLetDeclaration=Mt,b.parseExportBatchSpecifier=Lt,b.parseExportDeclaration=kt,b.parseExportSpecifier=Ft,b.parseExpression=Nt,b.parseForVariableDeclaration=Ut,b.parseFunctionDeclaration=qt,b.parseFunctionExpression=Zt,b.parseParams=$t,b.parseImportDeclaration=Bt,b.parseImportSpecifier=Vt,b.parseModuleDeclaration=Rt,b.parseModuleBlock=se,b.parseNewExpression=mt,b.parseNonComputedProperty=ht,b.parseObjectProperty=it,b.parseObjectPropertyKey=ot,b.parsePostfixExpression=bt,b.parsePrimaryExpression=ct,b.parseProgram=ae,b.parsePropertyFunction=nt,b.parseSpreadOrAssignmentExpression=dt,b.parseTemplateElement=at,b.parseTemplateLiteral=ut,b.parseStatement=jt,b.parseSwitchCase=Ht,b.parseUnaryExpression=Ct,b.parseVariableDeclaration=Pt,b.parseVariableIdentifier=Ot,b.parseMethodDefinition=Jt,b.parseClassDeclaration=ne,b.parseClassExpression=ee,b.parseClassBody=te,_t=t(b.parseAssignmentExpression),At=t(b.parseBinaryExpression),Dt=t(b.parseBlock),Yt=t(b.parseFunctionSourceElements),Wt=t(b.parseCatchClause),gt=t(b.parseComputedMember),It=t(b.parseConditionalExpression),Mt=t(b.parseConstLetDeclaration),Lt=t(Lt),kt=t(kt),Ft=t(Ft),Nt=t(b.parseExpression),Ut=t(b.parseForVariableDeclaration),qt=t(b.parseFunctionDeclaration),Zt=t(b.parseFunctionExpression),$t=t(b.parseParams),Bt=t(b.parseImportDeclaration),Vt=t(b.parseImportSpecifier),Rt=t(b.parseModuleDeclaration),se=t(b.parseModuleBlock),vt=t(vt),mt=t(b.parseNewExpression),ht=t(b.parseNonComputedProperty),it=t(b.parseObjectProperty),ot=t(b.parseObjectPropertyKey),bt=t(b.parsePostfixExpression),ct=t(b.parsePrimaryExpression),ae=t(b.parseProgram),nt=t(b.parsePropertyFunction),at=t(b.parseTemplateElement),ut=t(b.parseTemplateLiteral),dt=t(b.parseSpreadOrAssignmentExpression),jt=t(b.parseStatement),Ht=t(b.parseSwitchCase),Ct=t(b.parseUnaryExpression),Pt=t(b.parseVariableDeclaration),Ot=t(b.parseVariableIdentifier),Jt=t(b.parseMethodDefinition),ne=t(b.parseClassDeclaration),ee=t(b.parseClassExpression),te=t(b.parseClassBody)),void 0!==b.tokens&&(b.advance=U,b.scanRegExp=B,U=pe,B=de)}function Ce(){"function"==typeof b.skipComment&&(O=b.skipComment),(b.range||b.loc)&&(_t=b.parseAssignmentExpression,At=b.parseBinaryExpression,Dt=b.parseBlock,Yt=b.parseFunctionSourceElements,Wt=b.parseCatchClause,gt=b.parseComputedMember,It=b.parseConditionalExpression,Mt=b.parseConstLetDeclaration,Lt=b.parseExportBatchSpecifier,kt=b.parseExportDeclaration,Ft=b.parseExportSpecifier,Nt=b.parseExpression,Ut=b.parseForVariableDeclaration,qt=b.parseFunctionDeclaration,Zt=b.parseFunctionExpression,Bt=b.parseImportDeclaration,Vt=b.parseImportSpecifier,lt=b.parseGroupExpression,vt=b.parseLeftHandSideExpression,yt=b.parseLeftHandSideExpressionAllowCall,Rt=b.parseModuleDeclaration,se=b.parseModuleBlock,mt=b.parseNewExpression,ht=b.parseNonComputedProperty,it=b.parseObjectProperty,ot=b.parseObjectPropertyKey,bt=b.parsePostfixExpression,ct=b.parsePrimaryExpression,ae=b.parseProgram,nt=b.parsePropertyFunction,at=b.parseTemplateElement,ut=b.parseTemplateLiteral,dt=b.parseSpreadOrAssignmentExpression,jt=b.parseStatement,Ht=b.parseSwitchCase,Ct=b.parseUnaryExpression,Pt=b.parseVariableDeclaration,Ot=b.parseVariableIdentifier,Jt=b.parseMethodDefinition,ne=b.parseClassDeclaration,ee=b.parseClassExpression,te=b.parseClassBody),"function"==typeof b.scanRegExp&&(U=b.advance,B=b.scanRegExp)}(n={})[(e={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9,Template:10}).BooleanLiteral]="Boolean",n[e.EOF]="<end>",n[e.Identifier]="Identifier",n[e.Keyword]="Keyword",n[e.NullLiteral]="Null",n[e.NumericLiteral]="Numeric",n[e.Punctuator]="Punctuator",n[e.StringLiteral]="String",n[e.RegularExpression]="RegularExpression",r=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],o={ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AssignmentExpression:"AssignmentExpression",BinaryExpression:"BinaryExpression",BlockStatement:"BlockStatement",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ClassHeritage:"ClassHeritage",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportDeclaration:"ExportDeclaration",ExportBatchSpecifier:"ExportBatchSpecifier",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",ForStatement:"ForStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportSpecifier:"ImportSpecifier",LabeledStatement:"LabeledStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MethodDefinition:"MethodDefinition",ModuleDeclaration:"ModuleDeclaration",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"},i={Data:1,Get:2,Set:4},l={static:"static",prototype:"prototype"},s={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInFormalsList:"Invalid left-hand side in formals list",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalDuplicateClassProperty:"Illegal duplicate property in class definition",IllegalReturn:"Illegal return statement",IllegalYield:"Illegal yield expression",IllegalSpread:"Illegal spread element",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",ParameterAfterRestParameter:"Rest parameter must be final parameter of an argument list",DefaultRestParameter:"Rest parameter can not have a default value",ElementAfterSpreadElement:"Spread must be the final element of an element list",ObjectPatternAsRestParameter:"Invalid rest parameter",ObjectPatternAsSpread:"Invalid spread argument",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",NewlineAfterModule:"Illegal newline after module",NoFromAfterImport:"Missing from after import",InvalidModuleSpecifier:"Invalid module specifier",NestedModule:"Module declaration can not be nested",NoYieldInGenerator:"Missing yield in generator",NoUnintializedConst:"Const must be initialized",ComprehensionRequiresBlock:"Comprehension must have at least one block",ComprehensionError:"Comprehension Error",EachNotAllowed:"Each is not supported"},a={NonAsciiIdentifierStart:new RegExp("[ÂªÂµÂºÃ-ÃÃ-Ã¶Ã¸-ËË-ËË -Ë¤Ë¬Ë®Í°-Í´Í¶Í·Íº-Í½ÎÎ-ÎÎÎ-Î¡Î£-ÏµÏ·-ÒÒ-Ô§Ô±-ÕÕÕ¡-Ö×-×ª×°-×²Ø -ÙÙ®Ù¯Ù±-ÛÛÛ¥Û¦Û®Û¯Ûº-Û¼Û¿ÜÜ-Ü¯Ý-Þ¥Þ±ß-ßªß´ßµßºà -à à à ¤à ¨à¡-à¡à¢ à¢¢-à¢¬à¤-à¤¹à¤½à¥à¥-à¥¡à¥±-à¥·à¥¹-à¥¿à¦-à¦à¦à¦à¦-à¦¨à¦ª-à¦°à¦²à¦¶-à¦¹à¦½à§à§à§à§-à§¡à§°à§±à¨-à¨à¨à¨à¨-à¨¨à¨ª-à¨°à¨²à¨³à¨µà¨¶à¨¸à¨¹à©-à©à©à©²-à©´àª-àªàª-àªàª-àª¨àªª-àª°àª²àª³àªµ-àª¹àª½à«à« à«¡à¬-à¬à¬à¬à¬-à¬¨à¬ª-à¬°à¬²à¬³à¬µ-à¬¹à¬½à­à­à­-à­¡à­±à®à®-à®à®-à®à®-à®à®à®à®à®à®à®£à®¤à®¨-à®ªà®®-à®¹à¯à°-à°à°-à°à°-à°¨à°ª-à°³à°µ-à°¹à°½à±à±à± à±¡à²-à²à²-à²à²-à²¨à²ª-à²³à²µ-à²¹à²½à³à³ à³¡à³±à³²à´-à´à´-à´à´-à´ºà´½àµàµ àµ¡àµº-àµ¿à¶-à¶à¶-à¶±à¶³-à¶»à¶½à·-à·à¸-à¸°à¸²à¸³à¹-à¹àºàºàºàºàºàºàºàº-àºàº-àºàº¡-àº£àº¥àº§àºªàº«àº­-àº°àº²àº³àº½à»-à»à»à»-à»à¼à½-à½à½-à½¬à¾-à¾á-áªá¿á-áá-áá¡á¥á¦á®-á°áµ-ááá -áááá-áºá¼-áá-áá-ááá-áá -áá-áá-á°á²-áµá¸-á¾áá-áá-áá-áá-áá-áá-áá -á´á-á¬á¯-á¿á-áá -áªá®-á°á-áá-áá -á±á-áá -á¬á®-á°á-á³ááá  -á¡·á¢-á¢¨á¢ªá¢°-á£µá¤-á¤á¥-á¥­á¥°-á¥´á¦-á¦«á§-á§á¨-á¨á¨ -á©áª§á¬-á¬³á­-á­á®-á® á®®á®¯á®º-á¯¥á°-á°£á±-á±á±-á±½á³©-á³¬á³®-á³±á³µá³¶á´-á¶¿á¸-á¼á¼-á¼á¼ -á½á½-á½á½-á½á½á½á½á½-á½½á¾-á¾´á¾¶-á¾¼á¾¾á¿-á¿á¿-á¿á¿-á¿á¿-á¿á¿ -á¿¬á¿²-á¿´á¿¶-á¿¼â±â¿â-ââââ-âââ-ââ¤â¦â¨âª-â­â¯-â¹â¼-â¿â-âââ -ââ°-â°®â°°-â±â± -â³¤â³«-â³®â³²â³³â´-â´¥â´§â´­â´°-âµ§âµ¯â¶-â¶â¶ -â¶¦â¶¨-â¶®â¶°-â¶¶â¶¸-â¶¾â·-â·â·-â·â·-â·â·-â·â¸¯ã-ãã¡-ã©ã±-ãµã¸-ã¼ã-ãã-ãã¡-ãºã¼-ã¿ã-ã­ã±-ãã -ãºã°-ã¿ã-ä¶µä¸-é¿ê-êê-ê½ê-êê-êêªê«ê-ê®ê¿-êê -ê¯ê-êê¢-êê-êê-êê -êªê¸-ê ê -ê ê -ê ê -ê ¢ê¡-ê¡³ê¢-ê¢³ê£²-ê£·ê£»ê¤-ê¤¥ê¤°-ê¥ê¥ -ê¥¼ê¦-ê¦²ê§ê¨-ê¨¨ê©-ê©ê©-ê©ê© -ê©¶ê©ºêª-êª¯êª±êªµêª¶êª¹-êª½ê«ê«ê«-ê«ê« -ê«ªê«²-ê«´ê¬-ê¬ê¬-ê¬ê¬-ê¬ê¬ -ê¬¦ê¬¨-ê¬®ê¯-ê¯¢ê°-í£í°-íí-í»ï¤-ï©­ï©°-ï«ï¬-ï¬ï¬-ï¬ï¬ï¬-ï¬¨ï¬ª-ï¬¶ï¬¸-ï¬¼ï¬¾ï­ï­ï­ï­ï­-ï®±ï¯-ï´½ïµ-ï¶ï¶-ï·ï·°-ï·»ï¹°-ï¹´ï¹¶-ï»¼ï¼¡-ï¼ºï½-ï½ï½¦-ï¾¾ï¿-ï¿ï¿-ï¿ï¿-ï¿ï¿-ï¿]"),NonAsciiIdentifierPart:new RegExp("[ÂªÂµÂºÃ-ÃÃ-Ã¶Ã¸-ËË-ËË -Ë¤Ë¬Ë®Ì-Í´Í¶Í·Íº-Í½ÎÎ-ÎÎÎ-Î¡Î£-ÏµÏ·-ÒÒ-ÒÒ-Ô§Ô±-ÕÕÕ¡-ÖÖ-Ö½Ö¿××××××-×ª×°-×²Ø-ØØ -Ù©Ù®-ÛÛ-ÛÛ-Û¨Ûª-Û¼Û¿Ü-ÝÝ-Þ±ß-ßµßºà -à ­à¡-à¡à¢ à¢¢-à¢¬à£¤-à£¾à¤-à¥£à¥¦-à¥¯à¥±-à¥·à¥¹-à¥¿à¦-à¦à¦-à¦à¦à¦à¦-à¦¨à¦ª-à¦°à¦²à¦¶-à¦¹à¦¼-à§à§à§à§-à§à§à§à§à§-à§£à§¦-à§±à¨-à¨à¨-à¨à¨à¨à¨-à¨¨à¨ª-à¨°à¨²à¨³à¨µà¨¶à¨¸à¨¹à¨¼à¨¾-à©à©à©à©-à©à©à©-à©à©à©¦-à©µàª-àªàª-àªàª-àªàª-àª¨àªª-àª°àª²àª³àªµ-àª¹àª¼-à«à«-à«à«-à«à«à« -à«£à«¦-à«¯à¬-à¬à¬-à¬à¬à¬à¬-à¬¨à¬ª-à¬°à¬²à¬³à¬µ-à¬¹à¬¼-à­à­à­à­-à­à­à­à­à­à­-à­£à­¦-à­¯à­±à®à®à®-à®à®-à®à®-à®à®à®à®à®à®à®£à®¤à®¨-à®ªà®®-à®¹à®¾-à¯à¯-à¯à¯-à¯à¯à¯à¯¦-à¯¯à°-à°à°-à°à°-à°à°-à°¨à°ª-à°³à°µ-à°¹à°½-à±à±-à±à±-à±à±à±à±à±à± -à±£à±¦-à±¯à²à²à²-à²à²-à²à²-à²¨à²ª-à²³à²µ-à²¹à²¼-à³à³-à³à³-à³à³à³à³à³ -à³£à³¦-à³¯à³±à³²à´à´à´-à´à´-à´à´-à´ºà´½-àµàµ-àµàµ-àµàµàµ -àµ£àµ¦-àµ¯àµº-àµ¿à¶à¶à¶-à¶à¶-à¶±à¶³-à¶»à¶½à·-à·à·à·-à·à·à·-à·à·²à·³à¸-à¸ºà¹-à¹à¹-à¹àºàºàºàºàºàºàºàº-àºàº-àºàº¡-àº£àº¥àº§àºªàº«àº­-àº¹àº»-àº½à»-à»à»à»-à»à»-à»à»-à»à¼à¼à¼à¼ -à¼©à¼µà¼·à¼¹à¼¾-à½à½-à½¬à½±-à¾à¾-à¾à¾-à¾¼à¿á-áá-áá -áááá-áºá¼-áá-áá-ááá-áá -áá-áá-á°á²-áµá¸-á¾áá-áá-áá-áá-áá-áá-áá-áá -á´á-á¬á¯-á¿á-áá -áªá®-á°á-áá-áá -á´á-áá -á¬á®-á°á²á³á-ááááá -á©á -á á -á á  -á¡·á¢-á¢ªá¢°-á£µá¤-á¤á¤ -á¤«á¤°-á¤»á¥-á¥­á¥°-á¥´á¦-á¦«á¦°-á§á§-á§á¨-á¨á¨ -á©á© -á©¼á©¿-áªáª-áªáª§á¬-á­á­-á­á­«-á­³á®-á¯³á°-á°·á±-á±á±-á±½á³-á³á³-á³¶á´-á·¦á·¼-á¼á¼-á¼á¼ -á½á½-á½á½-á½á½á½á½á½-á½½á¾-á¾´á¾¶-á¾¼á¾¾á¿-á¿á¿-á¿á¿-á¿á¿-á¿á¿ -á¿¬á¿²-á¿´á¿¶-á¿¼âââ¿âââ±â¿â-ââ-ââ¡â¥-â°âââ-âââ-ââ¤â¦â¨âª-â­â¯-â¹â¼-â¿â-âââ -ââ°-â°®â°°-â±â± -â³¤â³«-â³³â´-â´¥â´§â´­â´°-âµ§âµ¯âµ¿-â¶â¶ -â¶¦â¶¨-â¶®â¶°-â¶¶â¶¸-â¶¾â·-â·â·-â·â·-â·â·-â·â· -â·¿â¸¯ã-ãã¡-ã¯ã±-ãµã¸-ã¼ã-ãããã-ãã¡-ãºã¼-ã¿ã-ã­ã±-ãã -ãºã°-ã¿ã-ä¶µä¸-é¿ê-êê-ê½ê-êê-ê«ê-ê¯ê´-ê½ê¿-êê-ê±ê-êê¢-êê-êê-êê -êªê¸-ê §ê¡-ê¡³ê¢-ê£ê£-ê£ê£ -ê£·ê£»ê¤-ê¤­ê¤°-ê¥ê¥ -ê¥¼ê¦-ê§ê§-ê§ê¨-ê¨¶ê©-ê©ê©-ê©ê© -ê©¶ê©ºê©»êª-ê«ê«-ê«ê« -ê«¯ê«²-ê«¶ê¬-ê¬ê¬-ê¬ê¬-ê¬ê¬ -ê¬¦ê¬¨-ê¬®ê¯-ê¯ªê¯¬ê¯­ê¯°-ê¯¹ê°-í£í°-íí-í»ï¤-ï©­ï©°-ï«ï¬-ï¬ï¬-ï¬ï¬-ï¬¨ï¬ª-ï¬¶ï¬¸-ï¬¼ï¬¾ï­ï­ï­ï­ï­-ï®±ï¯-ï´½ïµ-ï¶ï¶-ï·ï·°-ï·»ï¸-ï¸ï¸ -ï¸¦ï¸³ï¸´ï¹-ï¹ï¹°-ï¹´ï¹¶-ï»¼ï¼-ï¼ï¼¡-ï¼ºï¼¿ï½-ï½ï½¦-ï¾¾ï¿-ï¿ï¿-ï¿ï¿-ï¿ï¿-ï¿]")},u={name:"SyntaxTree",postProcess:function(t){return t},createArrayExpression:function(t){return{type:o.ArrayExpression,elements:t}},createAssignmentExpression:function(t,e,n){return{type:o.AssignmentExpression,operator:t,left:e,right:n}},createBinaryExpression:function(t,e,n){return{type:"||"===t||"&&"===t?o.LogicalExpression:o.BinaryExpression,operator:t,left:e,right:n}},createBlockStatement:function(t){return{type:o.BlockStatement,body:t}},createBreakStatement:function(t){return{type:o.BreakStatement,label:t}},createCallExpression:function(t,e){return{type:o.CallExpression,callee:t,arguments:e}},createCatchClause:function(t,e){return{type:o.CatchClause,param:t,body:e}},createConditionalExpression:function(t,e,n){return{type:o.ConditionalExpression,test:t,consequent:e,alternate:n}},createContinueStatement:function(t){return{type:o.ContinueStatement,label:t}},createDebuggerStatement:function(){return{type:o.DebuggerStatement}},createDoWhileStatement:function(t,e){return{type:o.DoWhileStatement,body:t,test:e}},createEmptyStatement:function(){return{type:o.EmptyStatement}},createExpressionStatement:function(t){return{type:o.ExpressionStatement,expression:t}},createForStatement:function(t,e,n,r){return{type:o.ForStatement,init:t,test:e,update:n,body:r}},createForInStatement:function(t,e,n){return{type:o.ForInStatement,left:t,right:e,body:n,each:!1}},createForOfStatement:function(t,e,n){return{type:o.ForOfStatement,left:t,right:e,body:n}},createFunctionDeclaration:function(t,e,n,r,i,s,a){return{type:o.FunctionDeclaration,id:t,params:e,defaults:n,body:r,rest:i,generator:s,expression:a}},createFunctionExpression:function(t,e,n,r,i,s,a){return{type:o.FunctionExpression,id:t,params:e,defaults:n,body:r,rest:i,generator:s,expression:a}},createIdentifier:function(t){return{type:o.Identifier,name:t}},createIfStatement:function(t,e,n){return{type:o.IfStatement,test:t,consequent:e,alternate:n}},createLabeledStatement:function(t,e){return{type:o.LabeledStatement,label:t,body:e}},createLiteral:function(t){return{type:o.Literal,value:t.value,raw:c.slice(t.range[0],t.range[1])}},createMemberExpression:function(t,e,n){return{type:o.MemberExpression,computed:"["===t,object:e,property:n}},createNewExpression:function(t,e){return{type:o.NewExpression,callee:t,arguments:e}},createObjectExpression:function(t){return{type:o.ObjectExpression,properties:t}},createPostfixExpression:function(t,e){return{type:o.UpdateExpression,operator:t,argument:e,prefix:!1}},createProgram:function(t){return{type:o.Program,body:t}},createProperty:function(t,e,n,r,i){return{type:o.Property,key:e,value:n,kind:t,method:r,shorthand:i}},createReturnStatement:function(t){return{type:o.ReturnStatement,argument:t}},createSequenceExpression:function(t){return{type:o.SequenceExpression,expressions:t}},createSwitchCase:function(t,e){return{type:o.SwitchCase,test:t,consequent:e}},createSwitchStatement:function(t,e){return{type:o.SwitchStatement,discriminant:t,cases:e}},createThisExpression:function(){return{type:o.ThisExpression}},createThrowStatement:function(t){return{type:o.ThrowStatement,argument:t}},createTryStatement:function(t,e,n,r){return{type:o.TryStatement,block:t,guardedHandlers:e,handlers:n,finalizer:r}},createUnaryExpression:function(t,e){return"++"===t||"--"===t?{type:o.UpdateExpression,operator:t,argument:e,prefix:!0}:{type:o.UnaryExpression,operator:t,argument:e}},createVariableDeclaration:function(t,e){return{type:o.VariableDeclaration,declarations:t,kind:e}},createVariableDeclarator:function(t,e){return{type:o.VariableDeclarator,id:t,init:e}},createWhileStatement:function(t,e){return{type:o.WhileStatement,test:t,body:e}},createWithStatement:function(t,e){return{type:o.WithStatement,object:t,body:e}},createTemplateElement:function(t,e){return{type:o.TemplateElement,value:t,tail:e}},createTemplateLiteral:function(t,e){return{type:o.TemplateLiteral,quasis:t,expressions:e}},createSpreadElement:function(t){return{type:o.SpreadElement,argument:t}},createTaggedTemplateExpression:function(t,e){return{type:o.TaggedTemplateExpression,tag:t,quasi:e}},createArrowFunctionExpression:function(t,e,n,r,i){return{type:o.ArrowFunctionExpression,id:null,params:t,defaults:e,body:n,rest:r,generator:!1,expression:i}},createMethodDefinition:function(t,e,n,r){return{type:o.MethodDefinition,key:n,value:r,kind:e,static:t===l.static}},createClassBody:function(t){return{type:o.ClassBody,body:t}},createClassExpression:function(t,e,n){return{type:o.ClassExpression,id:t,superClass:e,body:n}},createClassDeclaration:function(t,e,n){return{type:o.ClassDeclaration,id:t,superClass:e,body:n}},createExportSpecifier:function(t,e){return{type:o.ExportSpecifier,id:t,name:e}},createExportBatchSpecifier:function(){return{type:o.ExportBatchSpecifier}},createExportDeclaration:function(t,e,n,r){return{type:o.ExportDeclaration,declaration:e,default:t,specifiers:n,source:r}},createImportSpecifier:function(t,e){return{type:o.ImportSpecifier,id:t,name:e}},createImportDeclaration:function(t,e,n){return{type:o.ImportDeclaration,specifiers:t,kind:e,source:n}},createYieldExpression:function(t,e){return{type:o.YieldExpression,argument:t,delegate:e}},createModuleDeclaration:function(t,e,n){return{type:o.ModuleDeclaration,id:t,source:e,body:n}}},fe.prototype={constructor:fe,end:function(){this.range[1]=d,this.loc.end.line=h,this.loc.end.column=d-f},applyGroup:function(t){b.range&&(t.groupRange=[this.range[0],this.range[1]]),b.loc&&(t.groupLoc={start:{line:this.loc.start.line,column:this.loc.start.column},end:{line:this.loc.end.line,column:this.loc.end.column}},t=m.postProcess(t))},apply:function(t){var e=void 0===t?"undefined":_typeof(t);C("object"===e,"Applying location marker to an unexpected node type: "+e),b.range&&(t.range=[this.range[0],this.range[1]]),b.loc&&(t.loc={start:{line:this.loc.start.line,column:this.loc.start.column},end:{line:this.loc.end.line,column:this.loc.end.column}},t=m.postProcess(t))}},t.version="1.1.0-dev-harmony",t.tokenize=function(t,n){var r;"string"==typeof t||t instanceof String||(t=String(t)),m=u,d=0,h=(c=t).length>0?1:0,f=0,g=c.length,y=null,v={allowDefault:!0,allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1},b={},(n=n||{}).tokens=!0,b.tokens=[],b.tokenize=!0,b.openParenToken=-1,b.openCurlyToken=-1,b.range="boolean"==typeof n.range&&n.range,b.loc="boolean"==typeof n.loc&&n.loc,"boolean"==typeof n.comment&&n.comment&&(b.comments=[]),"boolean"==typeof n.tolerant&&n.tolerant&&(b.errors=[]),g>0&&void 0===c[0]&&t instanceof String&&(c=t.valueOf()),be();try{if(H(),y.type===e.EOF)return b.tokens;for(G();y.type!==e.EOF;)try{G()}catch(t){if(b.errors){b.errors.push(t);break}throw t}he(),r=b.tokens,void 0!==b.comments&&(ce(),r.comments=b.comments),void 0!==b.errors&&(r.errors=b.errors)}catch(t){throw t}finally{Ce(),b={}}return r},t.parse=function(t,e){var n,r;r=String,"string"==typeof t||t instanceof String||(t=r(t)),m=u,d=0,h=(c=t).length>0?1:0,f=0,g=c.length,y=null,v={allowDefault:!1,allowIn:!0,labelSet:{},parenthesizedCount:0,inFunctionBody:!1,inIteration:!1,inSwitch:!1,yieldAllowed:!1,yieldFound:!1},b={},void 0!==e&&(b.range="boolean"==typeof e.range&&e.range,b.loc="boolean"==typeof e.loc&&e.loc,b.loc&&null!==e.source&&void 0!==e.source&&(m=function(t,e){var n,r={};for(n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);for(n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);return r}(m,{postProcess:function(t){return t.loc.source=r(e.source),t}})),"boolean"==typeof e.tokens&&e.tokens&&(b.tokens=[]),"boolean"==typeof e.comment&&e.comment&&(b.comments=[]),"boolean"==typeof e.tolerant&&e.tolerant&&(b.errors=[])),g>0&&void 0===c[0]&&t instanceof String&&(c=t.valueOf()),be();try{n=ae(),void 0!==b.comments&&(ce(),n.comments=b.comments),void 0!==b.tokens&&(he(),n.tokens=b.tokens),void 0!==b.errors&&(n.errors=b.errors),(b.range||b.loc)&&(n.body=function t(e){var n,r,o;for(r in n="[object Array]"===Object.prototype.toString.apply(e)?[]:{},e)e.hasOwnProperty(r)&&"groupRange"!==r&&"groupLoc"!==r&&(null===(o=e[r])||"object"!==(void 0===o?"undefined":_typeof(o))||o instanceof RegExp?n[r]=o:n[r]=t(o));return n}(n.body))}catch(t){throw t}finally{Ce(),b={}}return n},t.Syntax=function(){var t,e={};for(t in"function"==typeof Object.create&&(e=Object.create(null)),o)o.hasOwnProperty(t)&&(e[t]=o[t]);return"function"==typeof Object.freeze&&Object.freeze(e),e}()},"function"==typeof define&&define.amd?define(["exports"],o):o(void 0!==n?n:r.esprima={})},{}],2:[function(require,module,exports){(function(){var ConstantFolder,Visitor,hasProp,_ref,__hasProp={}.hasOwnProperty,__extends=function(t,e){for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Visitor=require("./visitor"),hasProp=require("../runtime/util").hasProp,ConstantFolder=function(_super){function ConstantFolder(){return _ref=ConstantFolder.__super__.constructor.apply(this,arguments)}return __extends(ConstantFolder,_super),ConstantFolder.prototype.UnaryExpression=function(node){var result;return node=ConstantFolder.__super__.UnaryExpression.call(this,node),"+"===node.operator?node.argument:"Literal"!==node.argument.type||node.argument.value instanceof RegExp?node:(result=!hasProp(node,"prefix")||node.prefix?eval(node.operator+"("+node.argument.raw+")"):eval("("+node.argument.raw+")"+node.operator),{type:"Literal",value:result,loc:node.loc})},ConstantFolder.prototype.BinaryExpression=function(node){var result;return node=ConstantFolder.__super__.BinaryExpression.call(this,node),"Literal"!==node.left.type||"Literal"!==node.right.type||node.right.value instanceof RegExp||node.left.value instanceof RegExp?node:(result=eval("("+node.left.raw+" "+node.operator+" "+node.right.raw+")"),{type:"Literal",value:result,loc:node.left.loc})},ConstantFolder}(Visitor),module.exports=ConstantFolder}).call(this)},{"../runtime/util":11,"./visitor":4}],3:[function(t,e,n){(function(){var t,n=[].slice;t=function(){function t(){var t;t=1<=arguments.length?n.call(arguments,0):[],this.visitors=t}return t.prototype.transform=function(t){var e,n,r;for(e=0,n=(r=this.visitors).length;e<n;e++)t=r[e].visit(t);return t},t}(),e.exports=t}).call(this)},{}],4:[function(t,e,n){(function(){var t;t=function(){function t(){}return t.prototype.visit=function(t){if(t instanceof Array)return this.visitArray(t);if(t&&t.type)return this[t.type](t);if(t)throw new Error("unexpected node");return null},t.prototype.visitArray=function(t){var e,n;for(e=0;e<t.length;)t[e]?(n=this.visit(t[e]))?t[e++]=n:t.splice(e,1):e++;return t},t.prototype.Program=function(t){return t.body=this.visit(t.body),t},t.prototype.EmptyStatement=function(t){return null},t.prototype.BlockStatement=function(t){return t.body=this.visit(t.body),t},t.prototype.ExpressionStatement=function(t){return t.expression=this.visit(t.expression),t},t.prototype.IfStatement=function(t){return t.test=this.visit(t.test),t.consequent=this.visit(t.consequent),t.alternate=this.visit(t.alternate),t},t.prototype.LabeledStatement=function(t){return t.label=this.visit(t.label),t.body=this.visit(t.body),t},t.prototype.BreakStatement=function(t){return t.label=this.visit(t.label),t},t.prototype.ContinueStatement=function(t){return t.label=this.visit(t.label),t},t.prototype.WithStatement=function(t){return t.object=this.visit(t.object),t.body=this.visit(t.body),t},t.prototype.SwitchStatement=function(t){return t.discriminant=this.visit(t.discriminant),t.cases=this.visit(t.cases),t},t.prototype.ReturnStatement=function(t){return t.argument=this.visit(t.argument),t},t.prototype.ThrowStatement=function(t){return t.argument=this.visit(t.argument),t},t.prototype.TryStatement=function(t){return t.block=this.visit(t.block),t.handlers=this.visit(t.handlers),t.guardedHandlers=this.visit(t.guardedHandlers),t.finalizer=this.visit(t.finalizer),t},t.prototype.WhileStatement=function(t){return t.test=this.visit(t.test),t.body=this.visit(t.body),t},t.prototype.DoWhileStatement=function(t){return t.body=this.visit(t.body),t.test=this.visit(t.test),t},t.prototype.ForStatement=function(t){return t.test=this.visit(t.test),t.body=this.visit(t.body),t.init=this.visit(t.init),t.update=this.visit(t.update),t},t.prototype.ForInStatement=function(t){return t.left=this.visit(t.left),t.right=this.visit(t.right),t.body=this.visit(t.body),t},t.prototype.ForOfStatement=function(t){return t.left=this.visit(t.left),t.right=this.visit(t.right),t.body=this.visit(t.body),t},t.prototype.LetStatement=function(t){return t.head=this.visit(t.head),t.body=this.visit(t.body),t},t.prototype.DebuggerStatement=function(t){return t},t.prototype.FunctionDeclaration=function(t){return t.id=this.visit(t.id),t.params=this.visit(t.params),t.defaults=this.visit(t.defaults),t.rest=this.visit(t.rest),t.body=this.visit(t.body),t},t.prototype.VariableDeclaration=function(t){return t.declarations=this.visit(t.declarations),t},t.prototype.VariableDeclarator=function(t){return t.id=this.visit(t.id),t.init=this.visit(t.init),t},t.prototype.ThisExpression=function(t){return t},t.prototype.ArrayExpression=function(t){return t.elements=this.visit(t.elements),t},t.prototype.ObjectExpression=function(t){var e,n,r,o;for(n=0,r=(o=t.properties).length;n<r;n++)(e=o[n]).value=this.visit(e.value),e.key=this.visit(e.key);return t},t.prototype.FunctionExpression=function(t){return t.id=this.visit(t.id),t.params=this.visit(t.params),t.defaults=this.visit(t.defaults),t.rest=this.visit(t.rest),t.body=this.visit(t.body),t},t.prototype.SequenceExpression=function(t){return t.expressions=this.visit(t.expressions),t},t.prototype.UnaryExpression=function(t){return t.argument=this.visit(t.argument),t},t.prototype.BinaryExpression=function(t){return t.left=this.visit(t.left),t.right=this.visit(t.right),t},t.prototype.AssignmentExpression=function(t){return t.right=this.visit(t.right),t.left=this.visit(t.left),t},t.prototype.UpdateExpression=function(t){return t.argument=this.visit(t.argument),t},t.prototype.LogicalExpression=function(t){return t.left=this.visit(t.left),t.right=this.visit(t.right),t},t.prototype.ConditionalExpression=function(t){return t.test=this.visit(t.test),t.consequent=this.visit(t.consequent),t.alternate=this.visit(t.alternate),t},t.prototype.NewExpression=function(t){return t.callee=this.visit(t.callee),t.arguments=this.visit(t.arguments),t},t.prototype.CallExpression=function(t){return t.arguments=this.visit(t.arguments),t.callee=this.visit(t.callee),t},t.prototype.MemberExpression=function(t){return t.object=this.visit(t.object),t.property=this.visit(t.property),t},t.prototype.ObjectPattern=function(t){var e,n,r,o;for(n=0,r=(o=t.properties).length;n<r;n++)(e=o[n]).value=this.visit(e.value),e.key=this.visit(e.key);return t},t.prototype.ArrayPattern=function(t){return t.elements=this.visit(t.elements),t},t.prototype.SwitchCase=function(t){return t.test=this.visit(t.test),t.consequent=this.visit(t.consequent),t},t.prototype.CatchClause=function(t){return t.param=this.visit(t.param),t.guard=this.visit(t.guard),t.body=this.visit(t.body),t},t.prototype.Identifier=function(t){return t},t.prototype.Literal=function(t){return t},t.prototype.YieldExpression=function(t){return t.argument=this.visit(t.argument),t},t.prototype.ComprehensionExpression=function(t){return t.body=this.visit(t.body),t.blocks=this.visit(t.blocks),t.filter=this.visit(t.filter),t},t.prototype.ComprehensionBlock=function(t){return t.left=this.visit(t.pattern),t.right=this.visit(t.right),t},t.prototype.ClassExpression=function(t){throw new Error("not implemented")},t.prototype.ClassBody=function(t){throw new Error("not implemented")},t.prototype.ClassDeclaration=function(t){throw new Error("not implemented")},t.prototype.ClassHeritage=function(t){throw new Error("not implemented")},t.prototype.ArrowFunctionExpression=function(t){return t.params=this.visit(t.params),t.defaults=this.visit(t.defaults),t.rest=this.visit(t.rest),t.body=this.visit(t.body),t},t.prototype.ExportBatchSpecifier=function(t){throw new Error("not implemented")},t.prototype.ExportSpecifier=function(t){throw new Error("not implemented")},t.prototype.ExportDeclaration=function(t){throw new Error("not implemented")},t.prototype.ImportSpecifier=function(t){throw new Error("not implemented")},t.prototype.ImportDeclaration=function(t){throw new Error("not implemented")},t.prototype.MethodDefinition=function(t){throw new Error("not implemented")},t.prototype.Property=function(t){throw new Error("not implemented")},t.prototype.ModuleDeclaration=function(t){throw new Error("not implemented")},t.prototype.SpreadElement=function(t){throw new Error("not implemented")},t.prototype.TemplateElement=function(t){throw new Error("not implemented")},t.prototype.TaggedTemplateExpression=function(t){throw new Error("not implemented")},t.prototype.TemplateLiteral=function(t){throw new Error("not implemented")},t}(),e.exports=t}).call(this)},{}],5:[function(t,e,n){(function(){e.exports=t("./vm")}).call(this)},{"./vm":13}],6:[function(t,e,n){(function(){var e,r,o,i={}.hasOwnProperty;o=t("./errors").VmError,r=function(t){function e(t,e){this.value=t,this.message=null!=e?e:"iterator has stopped"}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,t),e.display="StopIteration",e}(o),e=function(){function t(t){this.elements=t,this.index=0}return t.prototype.next=function(){if(this.index>=this.elements.length)throw new r;return this.elements[this.index++]},t}(),n.StopIteration=r,n.ArrayIterator=e}).call(this)},{"./errors":7}],7:[function(t,e,n){(function(){var e,r,o,i,s,a,u,l,c,p,d={}.hasOwnProperty,h=function(t,e){for(var n in e)d.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};c=t("./util").isArray,p=function(t,e){var n,r,o,i,s,a,u,l;for(null==e&&(e=""),e+="    ",a="",u=0,l=t.length;u<l;u++)o=t[u],c(o)?(a+="\n\n"+e+"Rethrown:",a+=p(o,e)):(i=o.line,n=o.column,s=o.at.name,r=o.at.filename,a+=s?"\n"+e+"at "+s+" ("+r+":"+i+":"+n+")":"\n"+e+"at "+r+":"+i+":"+n);return a},r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,t),e.display="EvalError",e}(e=function(){function t(t){this.message=t}return t.prototype.toString=function(){var t;return t=this.constructor.display+": "+this.message,this.trace&&(t+=p(this.trace)),t},t}()),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,t),e.display="RangeError",e}(e),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,t),e.display="ReferenceError",e}(e),s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,t),e.display="SyntaxError",e}(e),u=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,t),e.display="TypeError",e}(e),l=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,t),e.display="URIError",e}(e),a=function(t){function e(t){this.fiber=t,e.__super__.constructor.call(this,"Script timed out")}return h(e,t),e.display="TimeoutError",e}(e),n.VmError=e,n.VmEvalError=r,n.VmRangeError=o,n.VmReferenceError=i,n.VmSyntaxError=s,n.VmTypeError=u,n.VmURIError=l,n.VmTimeoutError=a}).call(this)},{"./util":11}],8:[function(t,e,n){(function(){var e,r,o,i,s,a,u,l,c={}.hasOwnProperty,p=function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};r=t("./builtin").ArrayIterator,l=t("./util").hasProp,i=function(t){function e(t,n,r,o){this.value=t,this.writable=null!=n&&n,e.__super__.constructor.call(this,r,o)}return p(e,t),e}(a=function(t,e){this.enumerable=null!=t&&t,this.configurable=null!=e&&e}),e=function(t){function e(t,n,r,o){this.get=t,this.set=n,e.__super__.constructor.call(this,r,o)}return p(e,t),e}(a),u=function(t){function e(t,n){e.__super__.constructor.call(this,t,n),this.leak={}}return p(e,t),e.prototype.hasOwnProperty=function(t){return l(this.properties,t)||l(this.leak,t)&&l(this.object,t)&&!l(this.exclude,t)},e.prototype.getOwnProperty=function(t){return l(this.properties,t)?this.properties[t]:l(this.leak,t)&&l(this.object,t)&&!l(this.exclude,t)?this.object[t]:void 0},e.prototype.isEnumerable=function(t){return!!e.__super__.isEnumerable.call(this,t)&&l(this.leak,t)},e}(o=function(t){function e(t,n){e.__super__.constructor.call(this,t,n),this.exclude={}}return p(e,t),e.prototype.hasOwnProperty=function(t){return l(this.properties,t)||l(this.object,t)&&!l(this.exclude,t)},e.prototype.getOwnProperty=function(t){return l(this.properties,t)?this.properties[t]:l(this.object,t)&&!l(this.exclude,t)?this.object[t]:void 0},e.prototype.setOwnProperty=function(t,e){return l(this.exclude,t)&&delete this.exclude[t],l(this.properties,t)||this.defineProperty(t,{value:e,writable:!0,enumerable:!0,configurable:!0}),this.properties[t].value=e},e.prototype.delOwnProperty=function(t){return l(this.properties,t)&&delete this.properties[t],this.exclude[t]=null},e.prototype.isEnumerable=function(t){return!!e.__super__.isEnumerable.call(this,t)&&!l(this.exclude,t)},e}(s=function(){function t(t,e){this.object=t,this.realm=e,this.proto=null,this.properties={},this.extensible=!0}return t.prototype.hasDefProperty=function(t){return l(this.properties,t)},t.prototype.hasOwnProperty=function(t){return this.hasDefProperty(t)||l(this.object,t)},t.prototype.getOwnProperty=function(t){return this.properties[t]||this.object[t]},t.prototype.setOwnProperty=function(t,e){return this.object[t]=e},t.prototype.delOwnProperty=function(t){return delete this.properties[t]&&delete this.object[t]},t.prototype.delDefProperty=function(t){return delete this.properties[t]},t.prototype.searchProperty=function(t){var e,n;for(e=this;e;){if(e.hasOwnProperty(t)){n=e.getOwnProperty(t);break}e=e.proto||this.realm.mdproto(e.object)}return n},t.prototype.has=function(t,e){var n;for(null==e&&(e=this.object),n=this;n;){if(n.hasOwnProperty(t))return!0;n=n.proto||this.realm.mdproto(n.object)}return!1},t.prototype.get=function(t,n){var r;return null==n&&(n=this.object),(r=this.searchProperty(t))instanceof e?r.get.call(n):r instanceof i?r.value:r},t.prototype.set=function(t,n,r){var o;return null==r&&(r=this.object),(o=this.getOwnProperty(t))instanceof e?!!o.set&&(o.set.call(r,n),!0):o instanceof i?!!o.writable&&(o.value=n,!0):!(void 0===o&&!this.extensible||(this.setOwnProperty(t,n),0))},t.prototype.del=function(t){var e;return!(!this.hasOwnProperty(t)||(e=this.getOwnProperty(t))instanceof a&&!e.configurable||(this.delOwnProperty(t),0))},t.prototype.defineProperty=function(t,n){var r;if(!this.extensible)return!1;if("value"in n||"writable"in n)r=new i(n.value,n.writable,n.enumerable,n.configurable);else{if("function"!=typeof n.get)return;r=new e(n.get,n.set,n.enumerable,n.writable)}return this.properties[t]=r,!0},t.prototype.instanceOf=function(t){var e,n;for(e=this;null!==e;){if(e.object===t.prototype)return!0;if(!(n=e.proto))return e.object instanceof t;e=n}return!1},t.prototype.isEnumerable=function(t){var e;return!((e=this.properties[t]||this.object[t])instanceof a)||e.enumerable},t.prototype.ownKeys=function(){var t,e,n,r;for(t in e=[],n=this.object)c.call(n,t)&&this.isEnumerable(t)&&e.push(t);for(t in r=this.properties)c.call(r,t)&&this.isEnumerable(t)&&e.push(t);return e},t.prototype.enumerateKeys=function(){var t,e;for(t=[],e=this;e;)t=t.concat(e.ownKeys()),e=e.proto||this.realm.mdproto(e.object);return new r(t)},t}())),n.ObjectMetadata=s,n.CowObjectMetadata=o,n.RestrictedObjectMetadata=u}).call(this)},{"./builtin":6,"./util":11}],9:[function(t,e,n){(function(){var n,r,o,i,s,a,u,l,c,p,d,h,f,g,m,y,v,b,C,E,A,I,T,S,w={}.hasOwnProperty;A=t("./errors"),l=A.VmError,c=A.VmEvalError,p=A.VmRangeError,d=A.VmReferenceError,h=A.VmSyntaxError,f=A.VmTypeError,g=A.VmURIError,I=t("./metadata"),o=I.ObjectMetadata,r=I.CowObjectMetadata,a=I.RestrictedObjectMetadata,T=t("./util"),y=T.defProp,b=T.isArray,C=T.prototypeOf,m=T.create,v=T.hasProp,s=t("./regexp_proxy"),S=t("./builtin"),n=S.ArrayIterator,u=S.StopIteration,E={__mdid__:null,__md__:null,__vmfunction__:null,__fiber__:null,__callname__:null,__construct__:null,__source__:null,__name__:null},i=function(){function t(t){var e,i,A,I,T,S,_,N,D,O=this;for(S in(I={undefined:void 0,Object:Object,Function:Function,Number:Number,Boolean:Boolean,String:String,Array:Array,Date:Date,RegExp:RegExp,Error:l,EvalError:c,RangeError:p,ReferenceError:d,SyntaxError:h,TypeError:f,URIError:g,StopIteration:u,Math:Math,JSON:JSON,parseInt:parseInt,parseFloat:parseFloat}).global=I,_={},e=0,T=function(t,e){var n,r,o;return r="object"===(o=void 0===t?"undefined":_typeof(t))||"function"===o,v(E,e)?!(!r||(v(t,"__mdid__")?n=_[t.__mdid__]:v(t,"__md__")&&(n=t.__md__),!n))&&n.hasDefProperty(e):(t.__mdid__,(n=_[t.__mdid__])&&n.object===t||!r?n.hasOwnProperty(e,t):v(t,"__md__")?t.__md__.hasOwnProperty(e):v(t,e))},A=function(t){var e;return v(t,"__mdid__")?e=_[t.__mdid__].proto:v(t,"__md__")&&(e=t.__md__.proto),e||C(t)},i=function(t,e,n){var r;("object"===(r=void 0===t?"undefined":_typeof(t))||"function"===r)&&(v(t,"__mdid__")?_[t.__mdid__].defineProperty(e,n):!v(E,e)&&v(n,"value")&&v(n,"writable")&&n.writable&&v(n,"enumerable")&&n.enumerable&&v(n,"configurable")&&n.configurable?t[e]=n.value:(v(t,"__md__")||y(t,"__md__",{value:new o(t,O),writable:!0}),t.__md__.defineProperty(e,n)))},(N=function(t,n){var i,s,u,l;if(v(t,"__mdid__")||y(t,"__mdid__",{value:e+1,writable:!0}),e=Math.max(t.__mdid__,e),!v(_,t.__mdid__)){if("boolean"===(s=void 0===n?"undefined":_typeof(n))&&s)return _[t.__mdid__]=new r(t,O);if("object"!==s)return _[t.__mdid__]=new o(t);if(_[t.__mdid__]=new a(t,O),b(n))for(u=0,l=n.length;u<l;u++)i=n[u],v(t,i)&&(_[t.__mdid__].leak[i]=null,N(t[i],!0));else for(i in n)w.call(n,i)&&v(t,i)&&(_[t.__mdid__].leak[i]=null,N(t[i],n[i]))}})(Object,{prototype:["constructor","toString"]}),N(Function,{prototype:["constructor","apply","call","toString"]}),N(Number,{isNaN:!0,isFinite:!0,prototype:["constructor","toExponential","toFixed","toLocaleString","toPrecision","toString","valueOf"]}),N(Boolean,{prototype:["constructor","toString","valueOf"]}),N(String,{fromCharCode:!0,prototype:["constructor","charAt","charCodeAt","concat","contains","indexOf","lastIndexOf","replace","search","slice","split","substr","substring","toLowerCase","toString","toUpperCase","valueOf"]}),N(Array,{isArray:!0,every:!0,prototype:["constructor","join","reverse","sort","push","pop","shift","unshift","splice","concat","slice","indexOf","lastIndexOf","forEach","map","reduce","reduceRight","filter","some","every"]}),N(Date,{now:!0,parse:!0,UTC:!0,prototype:["constructor","getDate","getDay","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","getTime","getTimezoneOffset","getUTCDate","getUTCDay","getUTCFullYear","getUTCHours","getUTCMilliseconds","getUTCMinutes","getUTCSeconds","setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setUTCDate","setUTCDay","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCSeconds","toDateString","toISOString","toJSON","toLocaleDateString","toLocaleString","toLocaleTimeString","toString","toTimeString","toUTCString","valueOf"]}),N(RegExp,{prototype:["constructor","exec","test","toString"]}),N(Math,["abs","acos","asin","atan","atan2","ceil","cos","exp","floor","imul","log","max","min","pow","random","round","sin","sqrt","tan"]),N(JSON,["parse","stringify"]),N(parseFloat,!0),N(parseInt,!0),N(n,["prototype"]),N(s,["prototype"]),_[Object.__mdid__].properties={create:m,getPrototypeOf:A,defineProperty:i},_[Object.prototype.__mdid__].properties={hasOwnProperty:function(t){return T(this,t)}},_[Function.prototype.__mdid__].properties={toString:function(){return this.__vmfunction__?this.__source__:this.toString()}},_[Array.prototype.__mdid__].properties={iterator:function(){return new n(this)}},_[String.prototype.__mdid__].properties={match:function(t){return t instanceof s?this.match(t.regexp):this.match(t)},replace:function(t){var e;return e=Array.prototype.slice.call(arguments),t instanceof s&&(e[0]=t.regexp),this.replace.apply(this,e)}},_[RegExp.prototype.__mdid__].properties={exec:function(t){var e;return this instanceof s?(this.regexp.lastIndex=this.lastIndex,e=this.regexp.exec(t),this.lastIndex=this.regexp.lastIndex,e):this.exec(t)},test:function(t){var e;return this instanceof s?(this.regexp.lastIndex=this.lastIndex,e=this.regexp.test(t),this.lastIndex=this.regexp.lastIndex,e):this.test(t)},toString:function(){return this instanceof s?this.regexp.toString():this.toString()}},this.mdproto=function(t){var e;if(e=C(t))return _[e.__mdid__]},this.has=function(t,e){var n,r,o;return null!=t&&(r="object"===(o=void 0===t?"undefined":_typeof(t))||"function"===o,v(E,e)?!!r&&(v(t,"__mdid__")?n=_[t.__mdid__]:v(t,"__md__")&&(n=t.__md__),n?n.hasDefProperty(e):this.has(C(t),e)):(t.__mdid__,(n=_[t.__mdid__])&&n.object===t||!r?n.has(e,t):v(t,"__md__")?t.__md__.has(e):!!v(t,e)||this.has(C(t),e)))},this.get=function(t,e){var n,r,o;if(null!=t)return r="object"===(o=void 0===t?"undefined":_typeof(t))||"function"===o,v(E,e)?r?(v(t,"__mdid__")?n=_[t.__mdid__]:v(t,"__md__")&&(n=t.__md__),n&&n.hasDefProperty(e)?n.get(e):this.get(C(t),e)):_[t.__mdid__].get(e):"string"===o&&"number"==typeof e||"length"===e?t[e]:(t.__mdid__,(n=_[t.__mdid__])&&n.object===t||!r?n.get(e,t):v(t,"__md__")?t.__md__.get(e):v(t,e)?t[e]:this.get(C(t),e))},this.set=function(t,e,n){var r,i,s;return i="object"===(s=void 0===t?"undefined":_typeof(t))||"function"===s,v(E,e)?(i&&(v(t,"__mdid__")?r=_[t.__mdid__]:(v(t,"__md__")||y(t,"__md__",{value:new o(t,this),writable:!0}),r=t.__md__),r.hasDefProperty(e)||r.defineProperty(e,{value:n,writable:!0,enumerable:!0,configurable:!0}),r.set(e,n)),n):(i&&(v(t,"__md__")?t.__md__.set(e,n):v(t,"__mdid__")?_[t.__mdid__].set(e,n):t[e]=n),n)},this.del=function(t,e){var n,r;if(n="object"===(r=void 0===t?"undefined":_typeof(t))||"function"===r,v(E,e)){if(n){if(v(t,"__mdid__"))return _[t.__mdid__].del(e);if(v(t,"__md__"))return t.__md__.delDefProperty(e)}return!0}return!n||("function"!==r||"prototype"!==e)&&(v(t,"__md__")?t.__md__.del(e):v(t,"__mdid__")?_[t.__mdid__].del(e):delete t[e])},this.instanceOf=function(t,e){var n;return null!=e&&("object"===(n=void 0===e?"undefined":_typeof(e))||"function"===n)&&(v(e,"__mdid__")?_[e.__mdid__].instanceOf(t):v(e,"__md__")?e.__md__.instanceOf(t):e instanceof t)},this.getNativeMetadata=function(t){return _[t.__mdid__]},this.enumerateKeys=function(t){var e,r;if("object"===(void 0===t?"undefined":_typeof(t))&&v(t,"__md__"))return t.__md__.enumerateKeys();for(e in r=[],t)"__mdid__"!==e&&r.push(e);return new n(r)},t)w.call(t,S)&&(D=t[S],I[S]=D);this.global=I,this.registerNative=N}return t.prototype.inv=function(t){return-t},t.prototype.lnot=function(t){return!t},t.prototype.not=function(t){return~t},t.prototype.inc=function(t){return t+1},t.prototype.dec=function(t){return t-1},t.prototype.add=function(t,e){return e+t},t.prototype.sub=function(t,e){return e-t},t.prototype.mul=function(t,e){return e*t},t.prototype.div=function(t,e){return e/t},t.prototype.mod=function(t,e){return e%t},t.prototype.shl=function(t,e){return e<<t},t.prototype.sar=function(t,e){return e>>t},t.prototype.shr=function(t,e){return e>>>t},t.prototype.or=function(t,e){return e|t},t.prototype.and=function(t,e){return e&t},t.prototype.xor=function(t,e){return e^t},t.prototype.ceq=function(t,e){return e==t},t.prototype.cneq=function(t,e){return e!=t},t.prototype.cid=function(t,e){return e===t},t.prototype.cnid=function(t,e){return e!==t},t.prototype.lt=function(t,e){return e<t},t.prototype.lte=function(t,e){return e<=t},t.prototype.gt=function(t,e){return e>t},t.prototype.gte=function(t,e){return e>=t},t}(),e.exports=i}).call(this)},{"./builtin":6,"./errors":7,"./metadata":8,"./regexp_proxy":10,"./util":11}],10:[function(t,e,n){(function(){var n,r,o;n=t("./metadata").CowObjectMetadata,o=t("./util").defProp,r=function(){function t(t,e){var r;this.regexp=t,this.lastIndex=0,(r=new n(this,e)).proto=e.getNativeMetadata(RegExp.prototype),r.defineProperty("global",{value:t.global}),r.defineProperty("ignoreCase",{value:t.ignoreCase}),r.defineProperty("multiline",{value:t.multiline}),r.defineProperty("source",{value:t.source}),o(this,"__md__",{value:r,writable:!0})}return t.__name__="RegExp",t}(),e.exports=r}).call(this)},{"./metadata":8,"./util":11}],11:[function(t,e,n){(function(){var t,e,r,o,i,s,a;s=function(t){return Object.prototype.toString.call(t)},i="function"!=typeof Object.getPrototypeOf?"object"===_typeof("".__proto__)?function(t){return t.__proto__}:function(t){return t.constructor.prototype}:Object.getPrototypeOf,"function"!=typeof Object.create?(a=function(){},t=function(t){if(1!==arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return a.prototype=t,new a}):t=Object.create,r=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o="function"!=typeof Array.isArray?function(t){return"[object Array]"===s(t)}:Array.isArray,e="function"==typeof Object.defineProperty?function(t,e,n){return Object.defineProperty(t,e,n)}:function(t,e,n){return t[e]=n.value},n.prototypeOf=i,n.create=t,n.hasProp=r,n.isArray=o,n.defProp=e}).call(this)},{}],12:[function(t,e,n){(function(){var n,r,o,i,s,a,u,l,c,p,d,h,f,g,m,y={}.hasOwnProperty,v=[].slice;g=t("esprima").parse,c=t("./script"),f=t("./opcodes"),p=t("../ast/visitor"),h=t("../runtime/util").hasProp,n=function(t){function e(t,e,n,r,o){this.filename=e,this.name=n,this.original=r,this.source=o,this.instructions=[],this.labels=[],this.scripts=[],this.tryStatements=[],this.withLevel=0,this.scopes=t||[],t&&(this.scriptScope=t[0]),this.localNames=[],this.varIndex=3,this.guards=[],this.currentLine=-1,this.currentColumn=-1,this.stringIds={},this.strings=[],this.regexpIds={},this.regexps=[],this.ignoreNotDefined=0}return function(t,e){for(var n in e)y.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,t),e.prototype.scope=function(t){var e,n,r,o,i,s;for(n=0,e=!1,o=0,i=(s=this.scopes).length;o<i;o++){if(r=s[o],h(r,t))return[n,r[t]];(e||r===this.scriptScope)&&(e=!0,n++)}return null},e.prototype.scopeGet=function(t){var e;return this.withLevel?(this.GETW(t,this.ignoreNotDefined),void(this.ignoreNotDefined=0)):(e=this.scope(t))?(this.ignoreNotDefined=0,void this.GETL.apply(this,e)):(this.GETG(t,this.ignoreNotDefined),void(this.ignoreNotDefined=0))},e.prototype.scopeSet=function(t){var e;return this.withLevel?this.SETW(t):(e=this.scope(t))?this.SETL.apply(this,e):this.SETG(t)},e.prototype.enterScope=function(){return this.scopes.length||this.ENTER_SCOPE(),this.scopes.unshift({})},e.prototype.exitScope=function(){if(this.scopes.shift(),!this.scopes.length)return this.EXIT_SCOPE()},e.prototype.addCleanupHook=function(t){var e,n,r,o,i,s,a,u,l;for(r=0,i=(a=this.labels).length;r<i;r++)(e=a[r]).name&&(e.cleanup||(e.cleanup=[]),e.cleanup.push(t));for(l=[],o=0,s=(u=this.tryStatements).length;o<s;o++)n=u[o],l.push(n.hooks.push(t));return l},e.prototype.declareVar=function(t,e){var n;if((n="const"===e||"var"===e?this.scriptScope:this.scopes[0])&&!n[t])return this.localNames[this.varIndex]=t,n[t]=this.varIndex++},e.prototype.declarePattern=function(t,e){var n,r,o,i,s,a,u,l,c,p,d,h;if("ArrayPattern"===(u=t.type)||"ArrayExpression"===u){for(d=[],o=0,s=(l=t.elements).length;o<s;o++)(n=l[o])?d.push(this.declarePattern(n,e)):d.push(void 0);return d}if("ObjectPattern"===(c=t.type)||"ObjectExpression"===c){for(h=[],i=0,a=(p=t.properties).length;i<a;i++)r=p[i],h.push(this.declarePattern(r.value,e));return h}if("Identifier"===t.type)return this.declareVar(t.name,e);throw new Error("assertion error")},e.prototype.newLabel=function(){return new s(this)},e.prototype.label=function(t){var e,n,r,o;if(!t)return this.labels[this.labels.length-1];for(n=0,r=(o=this.labels).length;n<r;n++)if((e=o[n]).name===t)return e;return null},e.prototype.pushLabel=function(t,e,n,r){return this.labels.push({name:t,stmt:e,brk:n,cont:r})},e.prototype.popLabel=function(){return this.labels.pop()},e.prototype.declareFunction=function(t,e,n){var s,c,p,d,f,g,m,y,v;for(this.declareVar(t),d=(g=this.scope(t))?new l(g):new u([t]),c=[new r([e,n]),d,new a],this.instructions=c.concat(this.instructions),f={},v=[],p=m=0,y=this.instructions.length;0<=y?m<y:m>y;p=0<=y?++m:--m)s=this.instructions[p],this.scopes.length&&s instanceof o&&s.args[0]===t&&(this.instructions[p]=new i(g)),s instanceof i&&0!==s.args[0]&&this.scopes[s.args[0]][t]===s.args[1]&&(this.instructions[p]=new i(g)),v.push(s.forEachLabel((function(t){return h(f,t.id)||(f[t.id]=null,null!=t.ip&&(t.ip+=3)),t})));return v},e.prototype.end=function(){var t,e,n,r,o,i,s,a,u,l,p,d,h,f,g,m,y,v,b;for(i=0,l=(g=this.instructions).length;i<l;i++)g[i].forEachLabel((function(t){if(null===t.ip)throw new Error("label has not been marked");return t.ip}));for(s=0,p=(m=this.guards).length;s<p;s++)(e=m[s]).start=e.start.ip,e.handler&&(e.handler=e.handler.ip),e.finalizer&&(e.finalizer=e.finalizer.ip),e.end=e.end.ip;for(t=o=2,a=0,d=(y=this.instructions).length;a<d;a++)t+=y[a].calculateFactor(),o=Math.max(t,o);for(r=0,u=0,h=(v=this.localNames).length;u<h;u++)v[u],r++;for(n=f=0,b=this.scripts.length;0<=b?f<b:f>b;n=0<=b?++f:--f)this.scripts[n]=this.scripts[n]();return new c(this.filename,this.name,this.instructions,this.scripts,this.localNames,r,this.guards,o,this.strings,this.regexps,this.source)},e.prototype.visit=function(t){var n,r,o,i;if(null!=t){if(t.loc)if(o=(i=t.loc.start).line,n=i.column,o!==this.currentLine){for(r=this.instructions.length-1;this.instructions[r]instanceof f.LINE||this.instructions[r]instanceof f.COLUMN;)this.instructions.pop(),r--;this.LINE(o),this.currentLine=o}else if(n!==this.currentColumn){for(r=this.instructions.length-1;this.instructions[r]instanceof f.COLUMN;)this.instructions.pop(),r--;this.COLUMN(n),this.currentColumn=n}return e.__super__.visit.call(this,t)}},e.prototype.BlockStatement=function(t){return this.enterScope(),t.blockInit&&t.blockInit(),this.visit(t.body),t.blockCleanup&&t.blockCleanup(),this.exitScope(),t},e.prototype.VmLoop=function(t,e,n,r,o){var i,s,a,u,l,c,p=this;return s=function(){if(e&&e(a),r?c.mark():u.mark(),n)return n(),p.JMPF(a)},i=function(){return r&&(u.mark(),r(a),p.POP(),p.JMP(c)),o&&(o(),p.JMPF(a)),p.JMP(u)},l=this.label(),c=this.newLabel(),u=this.newLabel(),a=this.newLabel(),(null!=l?l.stmt:void 0)===t&&(l.cont=u),this.pushLabel(null,t,a,u),"BlockStatement"===t.body.type?(t.body.blockInit=s,t.body.blockCleanup=i,this.visit(t.body)):(this.enterScope(),s(),this.visit(t.body),i(),this.exitScope()),a.mark(),this.popLabel(),t},e.prototype.VmIteratorLoop=function(t,e){var n,r,o,i,s,a=this;return s=function(e,n){if(!e||e.stmt!==t||n)return a.POP()},o=function(n){return"VariableDeclaration"===t.left.type&&a.visit(t.left),a.visit(t.right),e(),i(n),a.POP()},i=function(t){return a.DUP(),a.NEXT(t),a.visit(n())},n=function(){return{loc:t.left.loc,type:"AssignmentExpression",operator:"=",left:r}},this.addCleanupHook(s),"VariableDeclaration"===(r=t.left).type&&(r=t.left.declarations[0].id),this.VmLoop(t,o,null,i),this.POP(),t},e.prototype.WhileStatement=function(t){var e,n=this;return e=function(){return n.visit(t.test)},this.VmLoop(t,null,e),t},e.prototype.DoWhileStatement=function(t){var e,n=this;return e=function(){return n.visit(t.test)},this.VmLoop(t,null,null,null,e),t},e.prototype.ForStatement=function(t){var e,n,r,o=this;return n=function(){if(o.visit(t.init),"VariableDeclaration"!==t.init.type)return o.POP()},e=function(){return o.visit(t.test)},r=function(){return o.visit(t.update)},this.VmLoop(t,n,e,r),t},e.prototype.ForInStatement=function(t){var e,n=this;return e=function(){return n.ENUMERATE()},this.VmIteratorLoop(t,e),t},e.prototype.ForOfStatement=function(t){var e,n=this;return e=function(){return n.ITER()},this.VmIteratorLoop(t,e),t},e.prototype.ExpressionStatement=function(t){return e.__super__.ExpressionStatement.call(this,t),this.SREXP(),t},e.prototype.IfStatement=function(t){var e,n;return n=this.newLabel(),e=this.newLabel(),this.visit(t.test),this.JMPT(n),this.visit(t.alternate),this.JMP(e),n.mark(),this.visit(t.consequent),e.mark(),t},e.prototype.LabeledStatement=function(t){var e;return e=this.newLabel(),this.pushLabel(t.label.name,t.body,e),this.visit(t.body),e.mark(),this.popLabel(),t},e.prototype.BreakStatement=function(t){var e,n,r,o;if(t.label){if((e=this.label(t.label.name)).cleanup)for(n=0,r=(o=e.cleanup).length;n<r;n++)(0,o[n])(e,!0)}else e=this.label();return this.JMP(e.brk),t},e.prototype.ContinueStatement=function(t){var e,n,r,o;if(t.label){if((e=this.label(t.label.name)).cleanup)for(n=0,r=(o=e.cleanup).length;n<r;n++)(0,o[n])(e,!1)}else e=this.label();return this.JMP(e.cont),t},e.prototype.WithStatement=function(t){return this.visit(t.object),this.ENTER_WITH(),this.withLevel++,this.visit(t.body),this.withLevel--,this.EXIT_SCOPE(),t},e.prototype.SwitchStatement=function(t){var e,n,r,o,i,s,a,u=this;for(e=this.newLabel(),this.pushLabel(null,t,e),this.addCleanupHook((function(){return u.POP(),u.exitScope()})),this.enterScope(),this.visit(t.discriminant),r=this.newLabel(),i=0,s=(a=t.cases).length;i<s;i++)n=a[i],o=this.newLabel(),n.test&&(this.DUP(),this.visit(n.test),this.CID(),this.JMPF(o),this.JMP(r)),n.consequent.length&&(r.mark(),this.visit(n.consequent),r=this.newLabel(),this.JMP(r)),o.mark();return r.mark(),this.popLabel(),e.mark(),this.POP(),this.exitScope(),t},e.prototype.ReturnStatement=function(t){return t.argument?(this.visit(t.argument),this.RETV()):this.RET(),t},e.prototype.ThrowStatement=function(t){return e.__super__.ThrowStatement.call(this,t),this.THROW(),t},e.prototype.TryStatement=function(t){var e,n,r,o,i,s,a,u,l,c=this;if(t.handlers.length>1)throw new Error("assert error");if(this.tryStatements.push({hooks:[]}),s=this.newLabel(),i=this.newLabel(),n=this.newLabel(),e=this.newLabel(),r={start:s,handler:t.handlers.length?i:null,finalizer:t.finalizer?n:null,end:e},this.guards.push(r),o=this.guards.length-1,this.ENTER_GUARD(o),s.mark(),this.visit(t.block),this.JMP(n),i.mark(),t.handlers.length&&(t.handlers[0].body.blockInit=function(){var e,n,r,o,i,s,a;for(r=t.handlers[0].param,c.declarePattern(r),e={type:"ExpressionStatement",expression:{loc:r.loc,type:"AssignmentExpression",operator:"=",left:r}},c.visit(e),a=[],o=0,i=(s=c.tryStatements[c.tryStatements.length-1].hooks).length;o<i;o++)n=s[o],a.push(n());return a},this.visit(t.handlers[0].body)),n.mark(),t.finalizer&&(this.visit(t.finalizer),!t.handlers.length)){for(a=0,u=(l=this.tryStatements[this.tryStatements.length-1].hooks).length;a<u;a++)(0,l[a])();this.EXIT_GUARD(o),this.PAUSE()}return e.mark(),this.EXIT_GUARD(o),this.tryStatements.pop(),t},e.prototype.DebuggerStatement=function(t){return this.DEBUG(),t},e.prototype.VariableDeclaration=function(t){var e,n,r;for(e=0,n=(r=t.declarations).length;e<n;e++)r[e].kind=t.kind;return this.visit(t.declarations),t},e.prototype.VariableDeclarator=function(t){var e;return this.declarePattern(t.id,t.kind),t.init&&(e={type:"ExpressionStatement",expression:{loc:t.loc,type:"AssignmentExpression",operator:"=",left:t.id,right:t.init}},this.visit(e)),t},e.prototype.ThisExpression=function(t){return this.scopes.length?this.scopeGet("this"):this.GLOBAL(),t},e.prototype.ArrayExpression=function(t){return e.__super__.ArrayExpression.call(this,t),this.ARRAY_LITERAL(t.elements.length),t},e.prototype.ObjectExpression=function(t){var e,n,r,o;for(n=0,r=(o=t.properties).length;n<r;n++){if("init"!==(e=o[n]).kind)throw new Error("property kind '"+e.kind+"' not implemented");this.visit(e.value),"Literal"===e.key.type?this.visit(e.key):this.visit({type:"Literal",value:e.key.name})}return this.OBJECT_LITERAL(t.properties.length),t},e.prototype.VmFunction=function(t){var n,r,o,i,s,a,u,l,c,p,d,h=this;return u=(p=(c=t.loc).start).line,a=p.column,r=(d=c.end).line,n=d.column,(l=this.original.slice(u-1,r))[0]=l[0].slice(a),l[l.length-1]=l[l.length-1].slice(0,n),l=l.join("\n"),s="<anonymous>",t.id&&(s=t.id.name),o=function(){var n,r,o,i,a,u,c,p,d,f;for(u={this:0,arguments:1},t.id&&(u[s]=2),t.lexicalThis&&delete u.this,(i=new e([u].concat(h.scopes),h.filename,s,h.original,l)).FUNCTION_SETUP(null!=t.id),c=t.params.length,t.rest&&(i.declareVar(t.rest.name),d=i.scope(t.rest.name),i.REST(c,d[1])),a=f=0;0<=c?f<c:f>c;a=0<=c?++f:--f)p=t.params[a],o=t.defaults[a],(r=(n=g("var placeholder = arguments["+a+"] || 0;").body[0]).declarations[0]).id=p,o?r.init.right=o:r.init=r.init.left,i.visit(n);return t.expression?(i.visit(t.body),i.RETV()):i.visit(t.body.body),i.end()},i=this.scripts.length,this.scripts.push(o),t.isExpression&&this.FUNCTION(i,t.generator),t.declare&&this.declareFunction(t.declare,i,t.generator),t},e.prototype.FunctionDeclaration=function(t){return t.isExpression=!1,t.declare=t.id.name,this.VmFunction(t),t},e.prototype.FunctionExpression=function(t){return t.isExpression=!0,t.declare=!1,this.VmFunction(t),t},e.prototype.ArrowFunctionExpression=function(t){return t.isExpression=!0,t.declare=!1,t.lexicalThis=!0,this.VmFunction(t),t},e.prototype.SequenceExpression=function(t){var e,n,r;for(e=n=0,r=t.expressions.length-1;0<=r?n<r:n>r;e=0<=r?++n:--n)this.visit(t.expressions[e]),this.POP();return this.visit(t.expressions[e]),t},e.prototype.UnaryExpression=function(t){return"delete"===t.operator?"MemberExpression"===t.argument.type?(this.visitProperty(t.argument),this.visit(t.argument.object),this.DEL()):"Identifier"!==t.argument.type||this.scopes.length?this.LITERAL(!1):(this.LITERAL(t.argument.name),this.GLOBAL(),this.DEL()):("typeof"===t.operator&&"Identifier"===t.argument.type&&(this.ignoreNotDefined=1),e.__super__.UnaryExpression.call(this,t),this[m[t.operator]]()),t},e.prototype.BinaryExpression=function(t){return e.__super__.BinaryExpression.call(this,t),this[d[t.operator]](),t},e.prototype.LogicalExpression=function(t){var e;return e=this.newLabel(),this.visit(t.left),this.DUP(),"||"===t.operator?this.JMPT(e):this.JMPF(e),this.POP(),this.visit(t.right),e.mark(),t},e.prototype.ConditionalExpression=function(t){return this.IfStatement(t),t},e.prototype.NewExpression=function(t){return this.visit(t.arguments),this.visit(t.callee),this.NEW(t.arguments.length),t},e.prototype.CallExpression=function(t){var e,n;return n=t.arguments.length,this.visit(t.arguments),"MemberExpression"===t.callee.type?(this.visit(t.callee.object),this.SR1(),this.LR1(),this.visitProperty(t.callee),"Identifier"===t.callee.property.type&&(e=t.callee.property.name),this.CALLM(n,e)):(this.visit(t.callee),"Identifier"===t.callee.type&&(e=t.callee.name),this.CALL(n,e)),t},e.prototype.visitProperty=function(t){if(t.computed)return this.visit(t.property);if("Identifier"===t.property.type)return this.LITERAL(t.property.name);if("Literal"===t.property.type)return this.LITERAL(t.property.value);throw new Error("invalid assert")},e.prototype.MemberExpression=function(t){return this.visitProperty(t),this.visit(t.object),this.GET(),t},e.prototype.AssignmentExpression=function(t){var e,n,r,o,i,s,a,u,l,c,p,h,f,g;if(t.right&&("MemberExpression"!==t.right.type||t.right.object?this.visit(t.right):(this.visitProperty(t.right),this.SWAP(),this.GET())),"ArrayPattern"!==(p=t.left.type)&&"ArrayExpression"!==p&&"ObjectPattern"!==p&&"ObjectExpression"!==p)return"MemberExpression"===t.left.type?(this.visitProperty(t.left),this.visit(t.left.object),this.SR2(),this.SR1(),"="!==t.operator?(this.LR1(),this.LR2(),this.GET(),this[d[t.operator.slice(0,t.operator.length-1)]](),this.LR1(),this.LR2(),this.SET()):(this.LR1(),this.LR2(),this.SET())):("="!==t.operator&&(this.scopeGet(t.left.name),this.SWAP(),this[d[t.operator.slice(0,t.operator.length-1)]]()),this.scopeSet(t.left.name)),t;if("ArrayPattern"===(h=t.left.type)||"ArrayExpression"===h)for(r=0,a=0,l=(f=t.left.elements).length;a<l;a++)(n=f[a])&&(this.DUP(),e={operator:t.operator,type:"AssignmentExpression",left:n,right:{type:"MemberExpression",property:{type:"Literal",value:r}}},this.visit(e),this.POP()),r++;else for(u=0,c=(g=t.left.properties).length;u<c;u++)o=g[u],this.DUP(),i=o.key,s=o.value,e={operator:t.operator,type:"AssignmentExpression",left:s,right:{type:"MemberExpression",computed:!0,property:{type:"Literal",value:i.name}}},this.visit(e),this.POP()},e.prototype.UpdateExpression=function(t){return"MemberExpression"===t.argument.type?(this.visitProperty(t.argument),this.visit(t.argument.object),this.SR2(),this.SR1(),this.LR1(),this.LR2(),this.GET(),this.SR3(),this.LR3(),"++"===t.operator?this.INC():this.DEC(),this.LR1(),this.LR2(),this.SET()):(this.scopeGet(t.argument.name),this.SR3(),this.LR3(),"++"===t.operator?this.INC():this.DEC(),this.scopeSet(t.argument.name)),t.prefix||(this.POP(),this.LR3()),t},e.prototype.Identifier=function(t){return this.scopeGet(t.name),t},e.prototype.Literal=function(t){var e,n,r;return void 0===(r=t.value)?this.UNDEF():"string"==typeof r?(h(this.stringIds,r)||(this.strings.push(r),n=this.strings.length-1,this.stringIds[r]=n),n=this.stringIds[r],this.STRING_LITERAL(n)):r instanceof RegExp?(e=c.regexpToString(r),h(this.regexpIds,e)||(this.regexps.push(r),n=this.regexps.length-1,this.regexpIds[e]=n),n=this.regexpIds[e],this.REGEXP_LITERAL(n)):this.LITERAL(r),t},e.prototype.YieldExpression=function(t){return this.visit(t.argument),this.YIELD(),t},e.prototype.ComprehensionExpression=function(t){throw new Error("not implemented")},e.prototype.ComprehensionBlock=function(t){throw new Error("not implemented")},e.prototype.ClassExpression=function(t){throw new Error("not implemented")},e.prototype.ClassBody=function(t){throw new Error("not implemented")},e.prototype.ClassDeclaration=function(t){throw new Error("not implemented")},e.prototype.ClassHeritage=function(t){throw new Error("not implemented")},e.prototype.ExportBatchSpecifier=function(t){throw new Error("not implemented")},e.prototype.ExportSpecifier=function(t){throw new Error("not implemented")},e.prototype.ExportDeclaration=function(t){throw new Error("not implemented")},e.prototype.ImportSpecifier=function(t){throw new Error("not implemented")},e.prototype.ImportDeclaration=function(t){throw new Error("not implemented")},e.prototype.MethodDefinition=function(t){throw new Error("not implemented")},e.prototype.Property=function(t){throw new Error("not implemented")},e.prototype.ModuleDeclaration=function(t){throw new Error("not implemented")},e.prototype.SpreadElement=function(t){throw new Error("not implemented")},e.prototype.TemplateElement=function(t){throw new Error("not implemented")},e.prototype.TaggedTemplateExpression=function(t){throw new Error("not implemented")},e.prototype.TemplateLiteral=function(t){throw new Error("not implemented")},e}(p),function(){var t,e,r,o;for(o=[],e=0,r=f.length;e<r;e++)t=f[e],o.push(function(t){return f[t.prototype.name]=t,t.prototype.forEachLabel=function(t){var e,n,r,o;if(this.args){for(o=[],e=n=0,r=this.args.length;0<=r?n<r:n>r;e=0<=r?++n:--n)this.args[e]instanceof s?o.push(this.args[e]=t(this.args[e])):o.push(void 0);return o}},n.prototype[t.prototype.name]=function(){var e;(e=1<=arguments.length?v.call(arguments,0):[]).length||(e=null),this.instructions.push(new t(e))}}(t))}(),s=function(){function t(e){this.emitter=e,this.id=t.id++,this.ip=null}return t.id=1,t.prototype.mark=function(){return this.ip=this.emitter.instructions.length},t}(),i=f.GETL,l=f.SETL,o=f.GETG,u=f.SETG,r=f.FUNCTION,a=f.POP,m={"-":"INV","!":"LNOT","~":"NOT",typeof:"TYPEOF",void:"VOID"},d={"==":"CEQ","!=":"CNEQ","===":"CID","!==":"CNID","<":"LT","<=":"LTE",">":"GT",">=":"GTE","<<":"SHL",">>":"SAR",">>>":"SHR","+":"ADD","-":"SUB","*":"MUL","/":"DIV","%":"MOD","|":"OR","&":"AND","^":"XOR",in:"IN",instanceof:"INSTANCEOF"},e.exports=n}).call(this)},{"../ast/visitor":4,"../runtime/util":11,"./opcodes":14,"./script":15,esprima:1}],13:[function(t,e,n){(function(){var n,r,o,i,s,a,u,l,c;c=t("esprima"),a=t("../ast/transformer"),i=t("../runtime/realm"),n=t("../ast/constant_folder"),r=t("./emitter"),o=t("./thread").Fiber,s=t("./script"),u=function(){function t(e,n){null==n&&(n=!1),this.realm=new i(e),n&&(this.realm.compileFunction=t.compileFunction,this.realm.eval=this.realm.global.eval=t.compileEval)}return t.prototype.eval=function(e,n,r){return this.run(t.compile(e,n),r)},t.prototype.run=function(t,e){var n;if((n=this.createFiber(t,e)).run(),!n.paused)return n.rexp},t.prototype.createFiber=function(t,e){var n;return(n=new o(this.realm,e)).pushFrame(t,this.realm.global),n},t.compile=function(t,e){var n;return null==e&&(e="<script>"),n=new r(null,e,null,t.split("\n")),l(t,n)},t.compileEval=function(t,e){var n,o,i,s;for(s=[],i=t.scope;i;)s.push(i.namesHash()),i=i.parent;return n=new r(s,"<eval>","eval",e.split("\n")),t.scope&&(n.varIndex=t.scope.data.length,(o=t.scope.names.slice())[0]="this",o[1]="arguments",n.localNames=o),l(e,n)},t.compileFunction=function(t){var e,n,o,i,s,a,u;if(o=[],t.length>1)for(i=a=0,u=t.length-1;0<=u?a<u:a>u;i=0<=u?++a:--a)o=o.concat(t[i].split(","));return e=t[t.length-1],s="(function("+o.join(", ")+") {\n"+e+"\n})",n=new r([{this:0,arguments:1}],"<eval>",null,s.split("\n")),l(s,n).scripts[0]},t.fromJSON=s.fromJSON,t.parse=c.parse,t}(),l=function(t,e){var r,o;return o=new a(new n,e),r=c.parse(t,{loc:!0}),o.transform(r),e.end()},e.exports=u}).call(this)},{"../ast/constant_folder":2,"../ast/transformer":3,"../runtime/realm":9,"./emitter":12,"./script":15,"./thread":16,esprima:1}],14:[function(require,module,exports){(function(){var ArrayIterator,Counter,Fiber,Op,OpcodeClassFactory,RegExpProxy,Scope,StopIteration,Visitor,VmEvalError,VmReferenceError,VmTypeError,WithScope,calculateOpcodeFactor,call,callArrayConstructor,callDateConstructor,callRegExpConstructor,callm,create,createFunction,createGenerator,createNativeInstance,debug,defProp,esprima,hasProp,opcodes,ret,throwErr,_ref,_ref1,_ref2,_ref3,__hasProp={}.hasOwnProperty,__extends=function(t,e){for(var n in e)__hasProp.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};esprima=require("esprima"),Visitor=require("../ast/visitor"),_ref=require("../runtime/builtin"),StopIteration=_ref.StopIteration,ArrayIterator=_ref.ArrayIterator,_ref1=require("../runtime/util"),defProp=_ref1.defProp,hasProp=_ref1.hasProp,create=_ref1.create,_ref2=require("../runtime/errors"),VmTypeError=_ref2.VmTypeError,VmEvalError=_ref2.VmEvalError,VmReferenceError=_ref2.VmReferenceError,RegExpProxy=require("../runtime/regexp_proxy"),_ref3=require("./thread"),Fiber=_ref3.Fiber,Scope=_ref3.Scope,WithScope=_ref3.WithScope,OpcodeClassFactory=function(){var classFactory,id;return id=0,classFactory=function classFactory(name,fn,calculateFactor){var OpcodeClass;return OpcodeClass=function(){var constructor;return"function"==typeof eval&&"function"==typeof(constructor=eval("(function "+name+"(args) { if (args) this.args = args; })"))||(constructor=function(t){t&&(this.args=t)},constructor.name=name),constructor.prototype.id=id++,constructor.prototype.name=name,constructor.prototype.exec=fn,calculateFactor?constructor.prototype.calculateFactor=calculateFactor:(constructor.prototype.factor=calculateOpcodeFactor(fn),constructor.prototype.calculateFactor=function(){return this.factor}),constructor}(),OpcodeClass},classFactory}(),Counter=function(t){function e(){this.factor=0,this.current=0}return __extends(e,t),e.prototype.CallExpression=function(t){var n;if("MemberExpression"===(t=e.__super__.CallExpression.call(this,t)).callee.type){if("Identifier"===t.callee.property.type)n=t.callee.property.name;else{if("Literal"!==t.callee.property.type)throw new Error("assert error");n=t.callee.property.value}"push"===n?this.current++:"pop"===n&&this.current--,this.factor=Math.max(this.factor,this.current)}return t},e}(Visitor),calculateOpcodeFactor=function(t){var e,n;return e=esprima.parse("("+t.toString()+")"),(n=new Counter).visit(e),n.factor},Op=function(t,e,n){return OpcodeClassFactory(t,e,n)},opcodes=[Op("POP",(function(t,e,n){return e.pop()})),Op("DUP",(function(t,e,n){return e.push(e.top())})),Op("SWAP",(function(t,e,n){var r,o;return o=e.pop(),r=e.pop(),e.push(o),e.push(r)})),Op("RET",(function(t,e,n){return ret(t)})),Op("RETV",(function(t,e,n){return t.fiber.rv=e.pop(),ret(t)})),Op("PAUSE",(function(t,e){return t.paused=!0})),Op("YIELD",(function(t,e){return t.fiber.yielded=e.pop(),t.fiber.pause()})),Op("THROW",(function(t,e,n){return throwErr(t,e.pop())})),Op("ENTER_GUARD",(function(t){return t.guards.push(t.script.guards[this.args[0]])})),Op("EXIT_GUARD",(function(t){var e;if(e=t.guards[t.guards.length-1],t.script.guards[this.args[0]]===e)return t.guards.pop()})),Op("SR1",(function(t,e,n){return t.fiber.r1=e.pop()})),Op("SR2",(function(t,e,n){return t.fiber.r2=e.pop()})),Op("SR3",(function(t,e,n){return t.fiber.r3=e.pop()})),Op("LR1",(function(t,e,n){return e.push(t.fiber.r1)})),Op("LR2",(function(t,e,n){return e.push(t.fiber.r2)})),Op("LR3",(function(t,e,n){return e.push(t.fiber.r3)})),Op("SREXP",(function(t,e,n){return e.fiber.rexp=e.pop()})),Op("ITER",(function(t,e,n){return callm(t,0,"iterator",e.pop())})),Op("ENUMERATE",(function(t,e,n,r){return e.push(r.enumerateKeys(e.pop()))})),Op("NEXT",(function(t,e,n){if(callm(t,0,"next",e.pop()),t.error instanceof StopIteration)return t.error=null,t.paused=!1,t.ip=this.args[0]})),Op("FUNCTION_SETUP",(function(t,e,n){var r;if(n.set(1,e.pop()),r=e.pop(),this.args[0])return n.set(2,r)}),(function(){return 0})),Op("GLOBAL",(function(t,e,n,r){return e.push(r.global)})),Op("REST",(function(t,e,n,r){var o,i,s;if(i=this.args[0],s=this.args[1],i<(o=n.get(1)).length)return n.set(s,Array.prototype.slice.call(o,i))})),Op("NEW",(function(t,e,n){return call(t,this.args[0],e.pop(),null,null,!0)})),Op("CALL",(function(t,e,n){return call(t,this.args[0],e.pop(),null,this.args[1])}),(function(){return 1-(this.args[0]+1)})),Op("CALLM",(function(t,e,n){return callm(t,this.args[0],e.pop(),e.pop(),this.args[1])}),(function(){return 1-(this.args[0]+1+1)})),Op("GET",(function(t,e,n,r){var o,i;return i=e.pop(),o=e.pop(),null==i?throwErr(t,new VmTypeError("Cannot read property '"+o+"' of "+i)):e.push(r.get(i,o))})),Op("SET",(function(t,e,n,r){var o,i,s;return i=e.pop(),o=e.pop(),s=e.pop(),null==i?throwErr(t,new VmTypeError("Cannot set property '"+o+"' of "+i)):e.push(r.set(i,o,s))})),Op("DEL",(function(t,e,n,r){var o,i;return i=e.pop(),o=e.pop(),null==i?throwErr(t,new VmTypeError("Cannot convert null to object")):e.push(r.del(i,o))})),Op("GETL",(function(t,e,n){var r,o,i;for(o=this.args[0],i=this.args[1],r=n;o--;)r=r.parent;return e.push(r.get(i))})),Op("SETL",(function(t,e,n){var r,o,i;for(o=this.args[0],i=this.args[1],r=n;o--;)r=r.parent;return e.push(r.set(i,e.pop()))})),Op("GETW",(function(t,e,n,r){var o,i;for(i=this.args[0];n instanceof WithScope;){if(n.has(i))return e.push(n.get(i));n=n.parent}for(;n instanceof Scope;){if((o=n.name(i))>=0)return e.push(n.get(o));n=n.parent}return hasProp(r.global,i)||this.args[1]?e.push(r.global[i]):throwErr(t,new VmReferenceError(i+" is not defined"))})),Op("SETW",(function(t,e,n,r){var o,i,s;for(i=this.args[0],s=e.pop();n instanceof WithScope;){if(n.has(i))return e.push(n.set(i,s));n=n.parent}for(;n instanceof Scope;){if((o=n.name(i))>=0)return e.push(n.set(o,s));n=n.parent}return e.push(r.global[i]=s)})),Op("GETG",(function(t,e,n,r){return hasProp(r.global,this.args[0])||this.args[1]?e.push(r.global[this.args[0]]):throwErr(t,new VmReferenceError(this.args[0]+" is not defined"))})),Op("SETG",(function(t,e,n,r){return e.push(r.global[this.args[0]]=e.pop())})),Op("ENTER_SCOPE",(function(t){return t.scope=new Scope(t.scope,t.script.localNames,t.script.localLength)})),Op("EXIT_SCOPE",(function(t){return t.scope=t.scope.parent})),Op("ENTER_WITH",(function(t,e){return t.scope=new WithScope(t.scope,e.pop())})),Op("INV",(function(t,e,n,r){return e.push(r.inv(e.pop()))})),Op("LNOT",(function(t,e,n,r){return e.push(r.lnot(e.pop()))})),Op("NOT",(function(t,e,n,r){return e.push(r.not(e.pop()))})),Op("INC",(function(t,e,n,r){return e.push(r.inc(e.pop()))})),Op("DEC",(function(t,e,n,r){return e.push(r.dec(e.pop()))})),Op("ADD",(function(t,e,n,r){return e.push(r.add(e.pop(),e.pop()))})),Op("SUB",(function(t,e,n,r){return e.push(r.sub(e.pop(),e.pop()))})),Op("MUL",(function(t,e,n,r){return e.push(r.mul(e.pop(),e.pop()))})),Op("DIV",(function(t,e,n,r){return e.push(r.div(e.pop(),e.pop()))})),Op("MOD",(function(t,e,n,r){return e.push(r.mod(e.pop(),e.pop()))})),Op("SHL",(function(t,e,n,r){return e.push(r.shl(e.pop(),e.pop()))})),Op("SAR",(function(t,e,n,r){return e.push(r.sar(e.pop(),e.pop()))})),Op("SHR",(function(t,e,n,r){return e.push(r.shr(e.pop(),e.pop()))})),Op("OR",(function(t,e,n,r){return e.push(r.or(e.pop(),e.pop()))})),Op("AND",(function(t,e,n,r){return e.push(r.and(e.pop(),e.pop()))})),Op("XOR",(function(t,e,n,r){return e.push(r.xor(e.pop(),e.pop()))})),Op("CEQ",(function(t,e,n,r){return e.push(r.ceq(e.pop(),e.pop()))})),Op("CNEQ",(function(t,e,n,r){return e.push(r.cneq(e.pop(),e.pop()))})),Op("CID",(function(t,e,n,r){return e.push(r.cid(e.pop(),e.pop()))})),Op("CNID",(function(t,e,n,r){return e.push(r.cnid(e.pop(),e.pop()))})),Op("LT",(function(t,e,n,r){return e.push(r.lt(e.pop(),e.pop()))})),Op("LTE",(function(t,e,n,r){return e.push(r.lte(e.pop(),e.pop()))})),Op("GT",(function(t,e,n,r){return e.push(r.gt(e.pop(),e.pop()))})),Op("GTE",(function(t,e,n,r){return e.push(r.gte(e.pop(),e.pop()))})),Op("IN",(function(t,e,n,r){return e.push(r.has(e.pop(),e.pop()))})),Op("INSTANCEOF",(function(t,e,n,r){return e.push(r.instanceOf(e.pop(),e.pop()))})),Op("TYPEOF",(function(t,e,n,r){return e.push(_typeof(e.pop()))})),Op("VOID",(function(t,e){return e.pop(),e.push(void 0)})),Op("JMP",(function(t,e,n){return t.ip=this.args[0]})),Op("JMPT",(function(t,e,n){if(e.pop())return t.ip=this.args[0]})),Op("JMPF",(function(t,e,n){if(!e.pop())return t.ip=this.args[0]})),Op("UNDEF",(function(t,e){return e.push(void 0)})),Op("LITERAL",(function(t,e,n){return e.push(this.args[0])})),Op("STRING_LITERAL",(function(t,e,n){return e.push(t.script.strings[this.args[0]])})),Op("REGEXP_LITERAL",(function(t,e,n,r){return e.push(new RegExpProxy(t.script.regexps[this.args[0]],r))})),Op("OBJECT_LITERAL",(function(t,e,n,r){var o,i;for(o=this.args[0],i={};o--;)r.set(i,e.pop(),e.pop());return e.push(i)}),(function(){return 1-2*this.args[0]})),Op("ARRAY_LITERAL",(function(t,e,n,r){var o,i;for(o=this.args[0],i=new Array(o);o--;)i[o]=e.pop();return e.push(i)}),(function(){return 1-this.args[0]})),Op("FUNCTION",(function(t,e,n,r){var o;return o=this.args[0],e.push(createFunction(t.script.scripts[o],n,r,this.args[1]))})),Op("LINE",(function(t){return t.setLine(this.args[0])})),Op("COLUMN",(function(t){return t.setColumn(this.args[0])})),Op("DEBUG",(function(t,e,n){return debug()}))],throwErr=function(t,e){return t.error=e,t.paused=!0},callm=function(t,e,n,r,o){var i,s,a,u,l,c;return l=t.evalStack,u=t.realm,null==r?(a="null",void 0===r&&(a="undefined"),throwErr(t,new VmTypeError("Cannot call method '"+n+"' of "+a))):(o=(c=(i=r.constructor).__name__||i.name||"Object")+"."+o,(s=u.get(r,n))instanceof Function?call(t,e,s,r,o):null==s?(l.pop(),throwErr(t,new VmTypeError("Object #<"+c+"> has no method '"+n+"'"))):(l.pop(),throwErr(t,new VmTypeError("Property '"+n+"' of object #<"+c+"> is not a function"))))},call=function(t,e,n,r,o,i){var s,a,u,l,c,p,d;if("function"!=typeof n)return throwErr(t,new VmTypeError("object is not a function"));for(p=t.evalStack,a=t.fiber,l=t.realm,s={length:e,callee:n};e;)s[--e]=p.pop();if(r=r||l.global,u=!0,s=Array.prototype.slice.call(s),n!==Function&&n!==l.eval){hasProp(n,"__vmfunction__")&&(n.__callname__=o,n.__fiber__=a,n.__construct__=i,u=!1);try{if(d=i?createNativeInstance(n,s):n.apply(r,s),u&&!a.paused)return p.push(d)}catch(e){return throwErr(t,e)}}else try{n===Function?p.push(createFunction(l.compileFunction(s),null,l)):(c=l.eval(t,s[0]),t.paused=!0,a.pushEvalFrame(t,c))}catch(e){throwErr(t,new VmEvalError(e.message))}},createGenerator=function(t,e,n,r,o,i,s,a){var u,l,c,p,d,h,f;return t&&(f=t.timeout),l=new Fiber(r,f),c=l.pushFrame(e,o,n,i,s,a,!1),p=!0,h=function(e){if(p&&void 0!==e)throw new VmTypeError("no argument must be passed when starting generator");if(l.done())throw new VmError("generator closed");if(c=l.callStack[l.depth],p?(p=!1,l.run()):(c.evalStack.push(e),l.resume()),t&&(t.timeout=l.timeout),l.done())throw d.closed=!0,new StopIteration(l.rv,"generator has stopped");return l.yielded},d={next:h,send:h,throw:function(e){if(p)return u(),e;if(l.done())throw new VmError("generator closed");return(c=l.callStack[l.depth]).error=e,l.resume(),t&&(t.timeout=l.timeout),l.done()?l.rv:l.yielded},close:u=function(){if(!l.done())return p&&(l.depth=-1),(c=l.callStack[l.depth]).evalStack.clear(),c.ip=c.exitIp,l.resume(),t&&(t.timeout=l.timeout),l.rv},closed:!1,iterator:function(){return d}}},createFunction=function(t,e,n,r){var o;return defProp(o=r?function(){var r,i,s;return s=o.__callname__||t.name,i=createGenerator(o.__fiber__,t,e,n,this,arguments,o,s),(r=o.__fiber__)?(r.callStack[r.depth].evalStack.push(i),o.__fiber__=null,o.__callname__=null):i}:function(){var r,i,s,a;if(a=!1,(i=o.__fiber__)?(i.callStack[i.depth].paused=!0,o.__fiber__=null,r=o.__construct__,o.__construct__=null):(i=new Fiber(n),a=!0),s=o.__callname__||t.name,o.__callname__=null,i.pushFrame(t,this,e,arguments,o,s,r),a)return i.run(),i.rv},"__vmfunction__",{value:!0}),defProp(o,"__source__",{value:t.source}),defProp(o,"__name__",{value:t.name}),defProp(o,"__construct__",{value:null,writable:!0}),defProp(o,"__fiber__",{value:null,writable:!0}),defProp(o,"__callname__",{value:null,writable:!0}),o},ret=function(t){return t.evalStack.clear(),t.exitIp=t.ip},debug=function(){},callDateConstructor=function(t){var e;switch(t.length){case 0:e=new Date;break;case 1:e=new Date(t[0]);break;case 2:e=new Date(t[0],t[1]);break;case 3:e=new Date(t[0],t[1],t[2]);break;case 4:e=new Date(t[0],t[1],t[2],t[3]);break;case 5:e=new Date(t[0],t[1],t[2],t[3],t[4]);break;case 6:e=new Date(t[0],t[1],t[2],t[3],t[4],t[5]);break;default:e=new Date(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}return e},callArrayConstructor=function(t){return 1===t.length&&(0|t[0])===t[0]?new Array(t[0]):t.slice()},callRegExpConstructor=function(t){return 1===t.length?new RegExp(t[0]):new RegExp(t[0],t[1])},createNativeInstance=function(t,e){var n;return t===Date?callDateConstructor(e):t===Array?callArrayConstructor(e):t===RegExp?callRegExpConstructor(e):t===Number?new Number(e[0]):t===Boolean?new Boolean(e[0]):((n=function(){return t.apply(this,e)}).prototype=t.prototype,new n)},module.exports=opcodes}).call(this)},{"../ast/visitor":4,"../runtime/builtin":6,"../runtime/errors":7,"../runtime/regexp_proxy":10,"../runtime/util":11,"./thread":16,esprima:1}],15:[function(t,e,n){(function(){var n,r,o,i,s,a,u,l;i=t("./opcodes"),l=function(t){var e,n,r,i,s,u,c,p,d,h,f,g,m;for(r=[t.filename||0,t.name||0,o(t.instructions),[],t.localNames,[],t.stackSize,t.strings,[]],s=0,p=(f=t.scripts).length;s<p;s++)i=f[s],r[3].push(l(i));for(u=0,d=(g=t.guards).length;u<d;u++)e=g[u],r[5].push([e.start||-1,e.handler||-1,e.finalizer||-1,e.end||-1]);for(c=0,h=(m=t.regexps).length;c<h;c++)n=m[c],r[8].push(a(n));return r[9]=t.source||0,r},u=function(t){var e,o,i,a,l,c,p,d,h,f,g,m,y,v,b,C,E,A,I,T,S,w,_;for(e=0!==t[0]?t[0]:null,p=0!==t[1]?t[1]:null,a=r(t[2]),g=[],l=(c=t[4]).length,i=[],y=t[6],v=t[7],h=[],b=0,A=(S=t[3]).length;b<A;b++)f=S[b],g.push(u(f));for(C=0,I=(w=t[5]).length;C<I;C++)o=w[C],i.push({start:-1!==o[0]?o[0]:null,handler:-1!==o[1]?o[1]:null,finalizer:-1!==o[2]?o[2]:null,end:-1!==o[3]?o[3]:null});for(E=0,T=(_=t[8]).length;E<T;E++)d=_[E],h.push(s(d));return m=0!==t[9]?t[9]:null,new n(e,p,a,g,c,l,i,y,v,h,m)},o=function(t){var e,n,r,o,i,s,a,u,l;for(o=[],i=0,a=t.length;i<a;i++){if(n=[(r=t[i]).id],r.args)for(s=0,u=(l=r.args).length;s<u;s++)null!=(e=l[s])?n.push(e):n.push(null);o.push(n)}return o},r=function(t){var e,n,r,o,s,a,u,l,c,p;for(a=[],u=0,c=t.length;u<c;u++){for(r=t[u],o=i[r[0]],e=[],n=l=1,p=r.length;1<=p?l<p:l>p;n=1<=p?++l:--l)e.push(r[n]);s=new o(e.length?e:null),a.push(s)}return a},a=function(t){var e;return e=t.source+"/",e+=t.global?"g":"",e+=t.ignoreCase?"i":"",e+=t.multiline?"m":""},s=function(t){var e,n,r;return n=t.lastIndexOf("/"),r=t.slice(0,n),e=t.slice(n+1),new RegExp(r,e)},n=function(){function t(t,e,n,r,o,i,s,a,u,l,c){this.filename=t,this.name=e,this.instructions=n,this.scripts=r,this.localNames=o,this.localLength=i,this.guards=s,this.stackSize=a,this.strings=u,this.regexps=l,this.source=c}return t.prototype.toJSON=function(){return l(this)},t.fromJSON=u,t.regexpToString=a,t}(),e.exports=n}).call(this)},{"./opcodes":14}],16:[function(t,e,n){(function(){var e,r,o,i,s,a,u,l,c,p,d={}.hasOwnProperty;p=t("../runtime/errors"),a=p.VmError,u=p.VmTimeoutError,c=t("../runtime/util").isArray,o=function(){function t(t,e){this.realm=t,this.timeout=null!=e?e:-1,this.maxDepth=1e3,this.maxTraceDepth=50,this.callStack=[],this.evalStack=null,this.depth=-1,this.yielded=this.rv=void 0,this.paused=!1,this.r1=this.r2=this.r3=null,this.rexp=null}return t.prototype.run=function(){var t,e,n,r;for(t=(e=this.callStack[this.depth]).error;this.depth>=0&&e&&!this.paused;)t&&(e=this.unwind(t)),e.run(),(t=e.error)instanceof a&&this.injectStackTrace(t),e.done()?e.guards.length&&(n=e.guards.pop()).finalizer?(e.ip=n.finalizer,e.exitIp=n.end,e.paused=!1):(e.construct&&"object"!==(r=_typeof(this.rv))&&"function"!==r&&(this.rv=e.scope.get(0)),(e=this.popFrame())&&!t&&(e.evalStack.push(this.rv),this.rv=void 0)):t=(e=this.callStack[this.depth]).error;if(this.timedOut()&&(t=new u(this),this.injectStackTrace(t)),t)throw t},t.prototype.unwind=function(t){var e,n,r,o;for(e=this.callStack[this.depth];e;){if(e.error=t,r=e.ip-1,(o=e.guards.length)&&(n=e.guards[o-1]).start<=r&&r<=n.end){if(null!==n.handler)if(r<=n.handler)e.evalStack.push(t),e.error=null,e.ip=n.handler;else{if(!(n.finalizer&&e.ip<=n.finalizer)){e=this.popFrame();continue}e.ip=n.finalizer}else e.ip=n.finalizer;return e.paused=!1,e}e=this.popFrame()}throw t},t.prototype.injectStackTrace=function(t){var e,n,r,o,i,s,a,u;for(s=[],r=0,this.depth>this.maxTraceDepth&&(r=this.depth-this.maxTraceDepth),n=a=u=this.depth;u<=r?a<=r:a>=r;n=u<=r?++a:--a)"<anonymous>"===(o=(e=this.callStack[n]).script.name)&&e.fname&&(o=e.fname),s.push({at:{name:o,filename:e.script.filename},line:e.line,column:e.column});if(t.trace){for(i=t.trace;c(i[i.length-1]);)i=i[i.length-1];i.push(s)}else t.trace=s;return t.stack=t.toString()},t.prototype.pushFrame=function(t,e,n,r,o,a,u){var l,c;if(null==a&&(a="<anonymous>"),null==u&&(u=!1),this.checkCallStack())return(c=new s(n,t.localNames,t.localLength)).set(0,e),l=new i(this,t,c,this.realm,a,u),o&&l.evalStack.push(o),r&&l.evalStack.push(r),this.callStack[++this.depth]=l,l},t.prototype.pushEvalFrame=function(t,n){if(this.checkCallStack())return this.callStack[++this.depth]=new e(t,n)},t.prototype.checkCallStack=function(){return this.depth!==this.maxDepth||(this.callStack[this.depth].error=new a("maximum call stack size exceeded"),this.pause(),!1)},t.prototype.popFrame=function(){var t;return(t=this.callStack[--this.depth])&&(t.paused=!1),t},t.prototype.setReturnValue=function(t){return this.callStack[this.depth].evalStack.push(t)},t.prototype.pause=function(){return this.paused=this.callStack[this.depth].paused=!0},t.prototype.resume=function(t){if(this.timeout=null!=t?t:-1,this.paused=!1,this.callStack[this.depth].paused=!1,this.callStack[0].evalStack,this.run(),!this.paused)return this.rexp},t.prototype.timedOut=function(){return 0===this.timeout},t.prototype.send=function(t){return this.callStack[this.depth].evalStack.push(t)},t.prototype.done=function(){return-1===this.depth},t}(),i=function(){function t(t,e,n,o,i,s){this.fiber=t,this.script=e,this.scope=n,this.realm=o,this.fname=i,this.construct=null!=s&&s,this.evalStack=new r(this.script.stackSize,this.fiber),this.ip=0,this.exitIp=this.script.instructions.length,this.paused=!1,this.finalizer=null,this.guards=[],this.rv=void 0,this.line=this.column=-1}return t.prototype.run=function(){var t,e;for(t=this.script.instructions;this.ip!==this.exitIp&&!this.paused&&0!==this.fiber.timeout;)this.fiber.timeout--,t[this.ip++].exec(this,this.evalStack,this.scope,this.realm);if(0===this.fiber.timeout&&(this.paused=this.fiber.paused=!0),!this.paused&&!this.error&&0!==(e=this.evalStack.len()))throw new Error("Evaluation stack has "+e+" items after execution")},t.prototype.done=function(){return this.ip===this.exitIp},t.prototype.setLine=function(t){this.line=t},t.prototype.setColumn=function(t){this.column=t},t}(),e=function(t){function e(t,n){var r,o,i,s;for(o=0,i=(s=t.script.guards).length;o<i;o++)r=s[o],n.guards.push(r);e.__super__.constructor.call(this,t.fiber,n,t.scope,t.realm,n.filename)}return function(t,e){for(var n in e)d.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(e,t),e.prototype.run=function(){return e.__super__.run.call(this),this.fiber.rv=this.fiber.rexp},e}(i),r=function(){function t(t,e){this.fiber=e,this.array=new Array(t),this.idx=0}return t.prototype.push=function(t){if(this.idx===this.array.length)throw new Error("maximum evaluation stack size exceeded");return this.array[this.idx++]=t},t.prototype.pop=function(){return this.array[--this.idx]},t.prototype.top=function(){return this.array[this.idx-1]},t.prototype.len=function(){return this.idx},t.prototype.clear=function(){return this.idx=0},t}(),s=function(){function t(t,e,n){this.parent=t,this.names=e,this.data=new Array(n)}return t.prototype.get=function(t){return this.data[t]},t.prototype.set=function(t,e){return this.data[t]=e},t.prototype.name=function(t){var e,n;for(e in n=this.names)if(d.call(n,e)&&n[e]===t)return parseInt(e);return-1},t.prototype.namesHash=function(){var t,e,n,r;for(t in e={},r=this.names)d.call(r,t)&&"string"==typeof(n=r[t])&&(e[n]=parseInt(t));return e.this=0,e.arguments=1,e},t}(),l=function(){function t(t,e){this.parent=t,this.object=e}return t.prototype.get=function(t){return this.object[t]},t.prototype.set=function(t,e){return this.object[t]=e},t.prototype.has=function(t){return t in this.object},t}(),n.Fiber=o,n.Scope=s,n.WithScope=l}).call(this)},{"../runtime/errors":7,"../runtime/util":11}],17:[function(t,e,n){var r=t("vm.js");e.exports=r},{"vm.js":5}]},{},[17])(17)},"object"===_typeof(exports)&&void 0!==module?module.exports=f():(__WEBPACK_AMD_DEFINE_ARRAY__=[],void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=f)?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},function(t,e,n){"use strict";var r,o;r=[n,e,n(87),n(20),n(6),n(2)],void 0===(o=function(t,e,n,r,o,i){Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){this.virtualDOM=t,this.href="/",this.code=e}return t.prototype.getHref=function(){return this.href},t.prototype.setHref=function(e,n){if(this.href=String(e||"/"),console.log("VDLocation.href = "+JSON.stringify(e)+", in target: "+(n||null)),!e)return null;if(/^#/.test(this.href))return null;switch(String(t.getHrefProtocol(e)||"").toLowerCase()){case"page:":this.navigateToPage(e.substr(5));break;case"javascript:":this.evaluateJavascriptCode(e.substr(11));break;case"http:":case"https:":r.BrowserUtils.openTabOrPopup(e,n);break;default:console.warn("[VIRTUAL_DOM.Location] url "+e+" cannot be handled")}return this},t.prototype.toString=function(){return this.getHref()},t.prototype.reload=function(){var t=this;this.virtualDOM.clear(!1),this.virtualDOM.trigger(n.VirtualDOM.EVENT_RENDER),this.virtualDOM.getLinks().fetch().then((function(e){try{t.virtualDOM.render(e)}catch(e){t.virtualDOM.getDocument().innerHTML="<span class='vfb vfb-error'></span> "+o.Strings.toHTML(String(e).replace(/^Error: /g,"")),t.virtualDOM.trigger(n.VirtualDOM.EVENT_ERROR)}})).fail((function(e){t.virtualDOM.getDocument().innerHTML="<span class='vfb vfb-error'></span> "+o.Strings.toHTML(String(e).replace(/^Error: /g,"")),t.virtualDOM.trigger(n.VirtualDOM.EVENT_ERROR)}))},t.prototype.getSDK=function(){var t=this,e={};return Object.defineProperty(e,"href",{get:function(){return t.getHref()},set:function(e){t.setHref(e)},enumerable:!0,configurable:!1}),Object.defineProperty(e,"reload",{get:function(){return function(){console.log("[VIRTUAL_DOM]: location.reload()"),t.reload()}},enumerable:!0,configurable:!1}),e},t.prototype.navigateToPage=function(t){var e=t;try{if(!t)return;if("//"===t.substr(0,2)&&(t=t.substr(2)),!t)return;var n=decodeURIComponent(t);n=n.replace(/\+/g," "),n=unescape(n),this.code.getDocument().handleInternalApplicationURLCommand("page://"+n)}catch(t){i.Dialog.alert("Failed to load url: "+e,"Navigation failed")}},t.prototype.evaluateJavascriptCode=function(t){t&&this.virtualDOM.getVm().eval(t,void 0,n.VirtualDOM.EVAL_TIMEOUT)},t.getHrefProtocol=function(t){var e=/^([a-z]+:)?/i.exec(String(t||""));return e&&(e[1]=e[1]||""),e&&e[1].substr(0,e[1].length)||location.protocol},t}();e.VDLocation=s}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(17),n(154),n(12),n(37)],void 0===(o=function(t,e,n,r,o,i){Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){var n=this;this.invoiceChangeListeners=[],this.virtualDOM=t,this.code=e,this.code.getDocument().getInvoice()&&this.code.getDocument().getInvoice().on(i.Invoice.EVENT_COMPUTE,o.Debouncer.create((function(){for(var t=0,e=n.invoiceChangeListeners.length;t<e;t++)try{n.invoiceChangeListeners[t]()}catch(t){}}),100))}return t.prototype.getSDK=function(){var t=this,e={};Object.defineProperty(e,"createProduct",{get:function(){return function(){return new a}},enumerable:!1,configurable:!1}),Object.defineProperty(e,"append",{get:function(){return function(e){t.appendProductToInvoice(e)}},enumerable:!1,configurable:!1}),Object.defineProperty(e,"remove",{get:function(){return function(e){t.removeProductFromInvoice(e)}},enumerable:!1,configurable:!1}),Object.defineProperty(e,"products",{get:function(){return t.getVDProductsFromInvoice()},enumerable:!1,configurable:!1}),Object.defineProperty(e,"on",{get:function(){return function(e,n){"change"===e?t.invoiceChangeListeners.push(n):console.warn("Invoice: Event '"+JSON.stringify(e)+"' is unrecognized")}},enumerable:!1,configurable:!1}),Object.defineProperty(e,"off",{get:function(){return function(e,n){if("change"===e){var r=t.invoiceChangeListeners.indexOf(n);r>-1&&t.invoiceChangeListeners.splice(r,1)}else console.warn("Invoice: Event '"+JSON.stringify(e)+"' is unrecognized")}},enumerable:!1,configurable:!1});try{Object.seal(e)}catch(t){}return e},t.prototype.appendProductToInvoice=function(t){if(!(t&&t instanceof a))throw new Error("Invalid argument: product must be an instance of VDProduct");if(null!==t.getInvoiceRow())throw new Error("Product already added to invoice");var e=new r.InvoiceRowDynamicJVMProduct(this.code.getDocument().getInvoice(),t);t.setInvoiceRow(e),this.code.getDocument().getInvoice().addRow(e),this.code.getDocument().getInvoice().compute()},t.prototype.removeProductFromInvoice=function(t){if(!(t&&t instanceof a))throw new Error("Invalid argument: product must be an instance of VDProduct");null!==t.getInvoiceRow()&&(this.code.getDocument().getInvoice().removeRow(t.getInvoiceRow()),t.setInvoiceRow(null),this.code.getDocument().getInvoice().compute())},t.prototype.getVDProductsFromInvoice=function(){for(var t=[],e=0,n=this.code.getDocument().getInvoice().getRows(),o=n.length;e<o;e++)n[e]instanceof r.InvoiceRowDynamicJVMProduct&&t.push(n[e].getVDProduct());return t},t.prototype.resetInvoiceListeners=function(){this.invoiceChangeListeners.splice(0,this.invoiceChangeListeners.length)},t}();e.VDInvoice=s;var a=function(){function t(){this.id=n.UniqueId.next(),this.quantity=1,this.pricePerUnit=0,this.choice=null,this.name="",this.invoiceRow=null,this.pictureURL=null}return t.prototype.getId=function(){return this.id},t.prototype.setId=function(t){this.id=t||n.UniqueId.next()},t.prototype.getName=function(){return this.name},t.prototype.setName=function(t){if("string"!=typeof t)throw new Error("Illegal argument: productName: string expected!");return this.name=t,this.updateInvoiceDebouncer&&this.updateInvoiceDebouncer(),this},t.prototype.getPictureURL=function(){return this.pictureURL},t.prototype.setPictureURL=function(t){if("string"!=typeof t&&null!==t)throw new Error("Invalid argument: string|null expected!");return this.pictureURL=t,this.updateInvoiceDebouncer&&this.updateInvoiceDebouncer(),this},t.prototype.getQuantity=function(){return this.quantity},t.prototype.setQuantity=function(t){if("number"!=typeof t)throw new Error("Illegal argument: newQuantity: number expected!");if(!isFinite(t))throw new Error("Illegal argument: newQuantity: finite number expected!");if(isNaN(t))throw new Error("Illegal argument: newQuantity: number expected!");if(t<0)throw new Error("Illegal argument: newQuantity: numbers greater or equal with 0 expected!");return this.quantity=t,this.updateInvoiceDebouncer&&this.updateInvoiceDebouncer(),this},t.prototype.getPricePerUnit=function(){return this.pricePerUnit},t.prototype.setPricePerUnit=function(t){if("number"!=typeof t)throw new Error("Illegal argument: pricePerUnit: number expected!");if(!isFinite(t))throw new Error("Illegal argument: pricePerUnit: finite number expected!");if(isNaN(t))throw new Error("Illegal argument: pricePerUnit: number expected!");if(t<0)throw new Error("Illegal argument: pricePerUnit: numbers greater or equal with 0 expected!");return this.pricePerUnit=t,this.updateInvoiceDebouncer&&this.updateInvoiceDebouncer(),this},t.prototype.getChoice=function(){return this.choice},t.prototype.setChoice=function(t){if("string"!=typeof t&&null!==t)throw new Error("Illegal argument: choice. string | null expected!");return this.choice=t,this.updateInvoiceDebouncer()&&this.updateInvoiceDebouncer(),this},t.prototype.getValue=function(){return this.quantity*this.pricePerUnit},t.prototype.getInvoiceRow=function(){return this.invoiceRow},t.prototype.setInvoiceRow=function(t){return this.invoiceRow=t,this.invoiceRow?this.updateInvoiceDebouncer||(this.updateInvoiceDebouncer=o.Debouncer.create((function(){t.getInvoice().compute()}),100)):this.updateInvoiceDebouncer=void 0,this},t.prototype.isAppendedToInvoice=function(){return!!this.invoiceRow},t.prototype.toString=function(){return JSON.stringify({objectType:"VDProduct",id:this.id,name:this.name,pricePerUnit:this.pricePerUnit,quantity:this.quantity})},t}();e.VDProduct=a}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(87)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.virtualDOM=t}return t.prototype.getSDK=function(){for(var t={},e=0,r=this.virtualDOM.getLinks().getDataSources(),o=r.length;e<o;e++)!function(e){Object.defineProperty(t,e.getName(),{get:function(){var t={};return Object.defineProperty(t,"url",{get:function(){return e.getDataSourceHREF()},enumerable:!0,configurable:!1}),Object.defineProperty(t,"offline",{get:function(){return e.isOffline()},set:function(t){e.setOffline(t)},enumerable:!0,configurable:!1}),Object.defineProperty(t,"getParams",{get:function(){return function(){return e.getParams()}},enumerable:!1,configurable:!1}),Object.defineProperty(t,"setParams",{get:function(){return function(t){return e.setParams(t)}},enumerable:!1,configurable:!1}),e.getEngine()===n.RemoteFetchDataSourceEngine.ABCSUBMIT&&(Object.defineProperty(t,"select",{get:function(){return function(t,n,r){return void 0===t&&(t=null),void 0===n&&(n=20),void 0===r&&(r=0),e.select().setWhere(t).setLimit(n).setSkip(r).execute()}},enumerable:!1,configurable:!1}),Object.defineProperty(t,"update",{get:function(){return function(t,n){return void 0===n&&(n=null),e.update().setFields(t||null).setWhere(n||null).execute()}},enumerable:!1,configurable:!1})),t},enumerable:!0,configurable:!1})}(r[e]);return t},t}();e.VDDataSources=r}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r=[n,e,n(174)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e,n){this.virtualDOM=t,this.document=e,this.documentAPI=n}return t.prototype.getSDK=function(){var t=this;return function(e){if(void 0===e)return new o([t.documentAPI.wrapNode(t.virtualDOM.document)]);if(void 0===(void 0===e?"undefined":i(e)))return new o([]);if("string"==typeof e)return new o(t.document.querySelectorAll(e));if(Array.isArray(e)){for(var n=[],r=0,s=e.length;r<s;r++)if(e[r])if("string"==typeof e[r]){var a=t.document.querySelector(e[r]);null!==a&&n.push(a)}else e[r]instanceof Object&&n.push(e[r]);return new o(n)}return new o(e&&e instanceof Object?[e]:[])}},t}();e.VDJQuery=r;var o=function(){function t(t){this.nodes=t||[]}return Object.defineProperty(t.prototype,"length",{get:function(){return this.nodes?this.nodes.length:0},enumerable:!0,configurable:!0}),t.prototype.get=function(t){return this.nodes[t]||void 0},t.prototype.html=function(t){if(void 0===t){for(var e=[],n=0,r=this.nodes.length;n<r;n++)e.push(this.nodes[n].innerHTML);return e.join("")}for(n=0,r=this.nodes.length;n<r;n++)this.nodes[n].innerHTML=String(t||"");return this},t.prototype.text=function(t){if(void 0===t){for(var e=[],n=0,r=this.nodes.length;n<r;n++)e.push(this.nodes[n].textContent);return e.join("")}for(n=0,r=this.nodes.length;n<r;n++)this.nodes[n].textContent=String(t||"");return this},t.prototype.attr=function(t,e){if(void 0!==e){if(null!==e)for(var n=0,r=this.nodes.length;n<r;n++)void 0!==this.nodes[n].setAttribute&&this.nodes[n].setAttribute(t,e);else for(n=0,r=this.nodes.length;n<r;n++)void 0!==this.nodes[n].removeAttribute&&this.nodes[n].removeAttribute(t);return this}for(n=0,r=this.nodes.length;n<r;n++)if(void 0!==this.nodes[n].getAttribute)return this.nodes[n].getAttribute(t);return null},t.prototype.is=function(t){for(var e=0,n=this.nodes.length;e<n;e++)if(this.nodes[e].matches)return this.nodes[e].matches(t);return!1},t.prototype.hasClass=function(e){for(var n=null,r=0,o=this.nodes.length;r<o;r++)if(void 0!==this.nodes[r].className){var i=t.parseClassList(this.nodes[r].className).indexOf(e)>-1;if(null===n)n=i;else if(n!==i)return!1}return null!==n&&n},t.prototype.addClass=function(e){if(!e)return this;for(var n=0,r=this.nodes.length;n<r;n++)if(void 0!==this.nodes[n].className){var o=t.parseClassList(this.nodes[n].className);-1===o.indexOf(e)&&(o.push(e),this.nodes[n].className=o.join(" "))}return this},t.prototype.removeClass=function(e){if(!e)return this;for(var n=0,r=this.nodes.length;n<r;n++)if(void 0!==this.nodes[n].className){var o,i=t.parseClassList(this.nodes[n].className);(o=i.indexOf(e))>-1&&(i.splice(o,1),this.nodes[n].className=i.join(" "))}return this},t.prototype.toggleClass=function(e){if(!e)return this;for(var n=0,r=this.nodes.length;n<r;n++)if(void 0!==this.nodes[n].className){var o,i=t.parseClassList(this.nodes[n].className);-1===(o=i.indexOf(e))?i.push(e):i.splice(o,1),this.nodes[n].className=i.join(" ")}return this},t.prototype.find=function(e){for(var n=[],r=0,o=this.nodes.length;r<o;r++)if(this.nodes[r].querySelectorAll){var i=this.nodes[r].querySelectorAll(e);n=n.concat(i)}return new t(n)},t.prototype.remove=function(t){if(void 0!==t){if(""===t)return this;for(var e=0,n=this.nodes.length;e<n;e++)if(this.nodes[e].querySelectorAll)for(var r=this.nodes[e].querySelectorAll(t),o=0,i=r.length;o<i;o++)r[o].remove()}else for(e=0,n=this.nodes.length;e<n;e++)this.nodes[e].remove();return this},t.prototype.css=function(t){if("string"==typeof t)for(var e=0,n=this.nodes.length;e<n;e++)void 0!==this.nodes[e].style&&(this.nodes[e].style=String(t||""));else if(t instanceof Object){var r,o=[];for(var i in t)t.hasOwnProperty(i)&&t.propertyIsEnumerable(i)&&t[i]&&o.push(i+":"+t[i]);r=o.join(";");for(e=0,n=this.nodes.length;e<n;e++)void 0!==this.nodes[e].style&&(this.nodes[e].style=r)}return this},t.prototype.each=function(t){if(t&&"function"==typeof t)for(var e=0,n=this.nodes.length;e<n;e++){if(!1===t.call(this.nodes[e],this.nodes[e],e))break}return this},t.prototype.on=function(t,e){for(var n=0,r=this.nodes.length;n<r;n++)this.nodes[n].addEventListener&&this.nodes[n].addEventListener(t,e);return this},t.prototype.off=function(t,e){for(var n=0,r=this.nodes.length;n<r;n++)this.nodes[n].removeEventListener&&this.nodes[n].removeEventListener(t,e);return this},t.prototype.val=function(t){if(void 0===t){if(this.nodes&&this.nodes[0])return this.nodes[0].get?this.nodes[0].get(n.VDNodeWhitelistedProperty.value):void 0}else for(var e=0,r=this.nodes.length;e<r;e++)this.nodes[e].set&&this.nodes[e].set(n.VDNodeWhitelistedProperty.value,t);return this},t.prototype.prop=function(t,e){if(!t){if(void 0!==e)return;return this}if(void 0===e)return this.nodes&&this.nodes[0]&&this.nodes[0].get?this.nodes[0].get(e):void 0;for(var n=0,r=this.nodes.length;n<r;n++)this.nodes[n].set&&this.nodes[n].set(t,e);return this},t.parseClassList=function(t){return t?t.split(" "):[]},t}()}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(87)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){var e=this;this.timeouts={},this.intervals={},this.virtualDOM=t,this.virtualDOM.on(n.VirtualDOM.EVENT_BEFORE_RENDER,(function(){e.killAll()}))}return t.prototype.getSDK=function(){var t=this;return{setTimeout:function(e,n){var r=new i(t,e,n);return t.timeouts[r.getId()]=r,r.getId()},clearTimeout:function(e){"number"==typeof e&&t.clearTimeoutById(e)},setInterval:function(e,n){var r=new o(t,e,n);return t.intervals[r.getId()]=r,r.getId()},clearInterval:function(e){"number"==typeof e&&t.clearIntervalById(e)}}},t.prototype.killAll=function(){for(var t in this.timeouts)this.timeouts.hasOwnProperty(t)&&this.timeouts.propertyIsEnumerable(t)&&(this.timeouts[t].kill(),delete this.timeouts[t]);for(var t in this.intervals)this.intervals.hasOwnProperty(t)&&this.intervals.propertyIsEnumerable(t)&&(this.intervals[t].kill(),delete this.intervals[t])},t.prototype.clearTimeoutById=function(t){this.timeouts[t]&&(this.timeouts[t].kill(),clearTimeout(this.timeouts[t].getId()),delete this.timeouts[t])},t.prototype.clearIntervalById=function(t){this.intervals[t]&&(this.intervals[t].kill(),clearInterval(this.intervals[t].getId()),delete this.intervals[t])},t}();e.VDTimers=r;var o=function(){function t(t,e,n){var r=this;this.vdTimers=t,this.callback=e,this.delay=n,this.id=window.setInterval((function(){r.run()}),n)}return t.prototype.kill=function(){this.killed||(this.killed=!0,this.vdTimers.clearIntervalById(this.id))},t.prototype.run=function(){if(!this.killed&&this.callback)try{this.callback()}catch(t){}},t.prototype.getId=function(){return this.id},t}(),i=function(){function t(t,e,n){var r=this;this.vdTimers=t,this.callback=e,this.killed=!1,this.delay=n,this.id=setTimeout((function(){r.run()}),n)}return t.prototype.kill=function(){this.killed||(this.killed=!0,this.vdTimers.clearTimeoutById(this.id))},t.prototype.run=function(){if(!this.killed){if(this.callback)try{this.callback()}catch(t){}this.kill()}},t.prototype.getId=function(){return this.id},t}()}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(87),n(4),n(15)],void 0===(o=function(t,e,n,r,o){var i,s;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.SUBMIT="submit"}(i||(i={})),function(t){t.CHANGE="change"}(s||(s={}));var a=function(){function t(t,e,r,o){void 0===r&&(r=null),void 0===o&&(o=null);var i=this;this.eventsStack={submit:[]},this.nodeListenersStack={},this.virtualDOM=e,this.bindedToSubmissionModel=!1,this.code=t,this.formCommands=r,this.submissionModel=o,this.virtualDOM.on(n.VirtualDOM.EVENT_BEFORE_RENDER,(function(){i.killAll()}))}return t.prototype.killAll=function(){for(var t=this.eventsStack.submit.length-1;t>-1;t--)this.removeEventListener(i.SUBMIT,this.eventsStack.submit[t]);for(var e in this.nodeListenersStack)this.nodeListenersStack.hasOwnProperty(e)&&this.nodeListenersStack.propertyIsEnumerable(e)&&delete this.nodeListenersStack[e]},t.prototype.getSDK=function(){var t=this,e={};return Object.defineProperty(e,"getFieldByName",{get:function(){return function(e,n){void 0===n&&(n=null);var r=t.code.getDocument().getElementsByName(e,n);return r&&r[0]?t.wrapNode(r[0]):null}},enumerable:!0,configurable:!1}),Object.defineProperty(e,"submit",{get:function(){return function(){t.code.getDocument().trigger(o.Document.EVENT_SUBMIT)}},enumerable:!0,configurable:!1}),Object.defineProperty(e,"reset",{get:function(){return function(){t.code.getDocument().trigger(o.Document.EVENT_RESET)}},enumerable:!0,configurable:!1}),Object.defineProperty(e,"print",{get:function(){return function(){t.code.getDocument().trigger(o.Document.EVENT_PRINT)}},enumerable:!0,configurable:!1}),Object.defineProperty(e,"on",{get:function(){return function(n,r){return t.addEventListener(n,r),e}},enumerable:!0,configurable:!1}),Object.defineProperty(e,"off",{get:function(){return function(n,r){return t.removeEventListener(n,r),e}},enumerable:!0,configurable:!1}),Object.defineProperty(e,"nextPage",{get:function(){return function(){try{return t.code.getDocument().trigger(o.Document.EVENT_NEXT_PAGE),!0}catch(t){return!1}}},enumerable:!0,configurable:!1}),Object.defineProperty(e,"previousPage",{get:function(){return function(){try{return t.code.getDocument().trigger(o.Document.EVENT_PREVIOUS_PAGE),!0}catch(t){return!1}}},enumerable:!0,configurable:!1}),Object.defineProperty(e,"clickOnShoppingCartButtonIfExists",{get:function(){return function(){for(var e=t.code.getDocument().flatten(),n=0,o=e.length;n<o;n++)if(e[n].getTypeId()===r.NodeTypes.SHOPPING_CART_BUTTON)return console.warn("Code.VDForm.clickOnShoppingCartButtonIfExists(): Not supported in this version"),!0;return!1}},enumerable:!0,configurable:!1}),e},t.prototype.addEventListener=function(t,e){switch(t){case i.SUBMIT:this.code.getDocument().isEditMode()||(this.eventsStack.submit.push(e),this.formCommands.addSubmitCallback(e));break;default:throw new Error("Illegal form event type "+JSON.stringify(t))}},t.prototype.removeEventListener=function(t,e){var n;switch(t){case i.SUBMIT:this.code.getDocument().isEditMode()||(n=this.eventsStack.submit.indexOf(e))>-1&&(this.eventsStack.submit.splice(n,1),this.formCommands.removeSubmitCallback(e));break;default:throw new Error("Illegal form event type "+JSON.stringify(t))}},t.prototype.addNodeEventChangeListener=function(t,e,n){switch(e){case s.CHANGE:var r=t.getId();this.nodeListenersStack[r]=this.nodeListenersStack[r]||[],this.nodeListenersStack[r].push({callback:n,event:e}),e===s.CHANGE&&this.listenToSubmissionModelChangeEventIfNotAlreadyListening();break;default:throw new Error("Invalid event name "+JSON.stringify(e))}},t.prototype.removeNodeEventChangeListener=function(t,e,n){var r=t.getId();if(this.nodeListenersStack[r]){for(var o=-1,i=0,s=this.nodeListenersStack[r].length;i<s;i++)if(this.nodeListenersStack[r][i].event===e&&this.nodeListenersStack[r][i].callback===n){o=i;break}-1!==o&&(this.nodeListenersStack[r].splice(o,1),0===this.nodeListenersStack[r].length&&delete this.nodeListenersStack[r])}},t.prototype.wrapNode=function(t){var e=this,n={getProperty:function(e){return t.getProperty(e)},setProperty:function(e,r){return t.setProperty(e,r),n},hasProperty:function(e){return t.hasProperty(e)},clearErrors:function(){t.setError(null)},getValue:function(){return e.submissionModel?e.submissionModel.getValue(t.getId()):null},setValue:function(r,o){return void 0===o&&(o=null),e.submissionModel&&e.submissionModel.setValue(t.getId(),r,o),n},setError:function(e){t.setError(e)},on:function(r,o){return e.addNodeEventChangeListener(t,r,o),n},off:function(r,o){return e.removeNodeEventChangeListener(t,r,o),n},hasValue:t.hasValue(),typeId:t.getTypeId(),nodeName:t.getNodeName()};return n},t.prototype.listenToSubmissionModelChangeEventIfNotAlreadyListening=function(){var t=this;this.bindedToSubmissionModel||(this.submissionModel&&this.submissionModel.on("change",(function(e,n){var r=e.getId();if(t.nodeListenersStack[r])for(var o=0,i=t.nodeListenersStack[r].length;o<i;o++)if(t.nodeListenersStack[r][o].event===s.CHANGE)try{t.nodeListenersStack[r][o].callback(n)}catch(t){}})),this.bindedToSubmissionModel=!0)},t}();e.VDForm=a}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r;void 0===(r=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.virtualDOM=t}return t.prototype.getSDK=function(){var t=this,e={};Object.defineProperty(e,"log",{get:function(){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];console.log.apply(console,["[VIRTUAL_DOM: "+t.virtualDOM.getRenderedId()+"]"].concat(e))}},enumerable:!0,configurable:!1}),Object.defineProperty(e,"error",{get:function(){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];console.error.apply(console,["[VIRTUAL_DOM: "+t.virtualDOM.getRenderedId()+"]"].concat(e))}},enumerable:!0,configurable:!1}),Object.defineProperty(e,"warn",{get:function(){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];console.warn.apply(console,["[VIRTUAL_DOM: "+t.virtualDOM.getRenderedId()+"]"].concat(e))}},enumerable:!0,configurable:!1}),Object.defineProperty(e,"info",{get:function(){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];console.info.apply(console,["[VIRTUAL_DOM: "+t.virtualDOM.getRenderedId()+"]"].concat(e))}},enumerable:!0,configurable:!1}),Object.defineProperty(e,"debug",{get:function(){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];console.debug.apply(console,["[VIRTUAL_DOM: "+t.virtualDOM.getRenderedId()+"]"].concat(e))}},enumerable:!0,configurable:!1});try{Object.seal(e)}catch(t){}return e},t}();e.VDConsole=n}.apply(e,[n,e]))||(t.exports=r)},function(t,e,n){"use strict";var r,o;r=[n,e,n(1)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.code=t,this.root=document.createElement("div"),this.root.className="input toolbar",this.init()}return t.prototype.getRoot=function(){return this.root},t.prototype.init=function(){var t=this,e=document.createElement("a");e.href="javascript:",e.textContent=n.I18n.translateApplicationText("Edit code","control-defaults.code"),this.root.appendChild(e),e.onclick=function(){t.code.editCode()}},t}();e.CodeToolbar=r}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(0),n(5),n(2),n(8),n(11),n(304)],void 0===(o=function(t,e,n,r,o,i,s,a){Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){this.constraints=t,this.camera=e,console.log("CameraPhotoShooter.constraints: "+JSON.stringify(t))}return t.prototype.uploadBase64FileToServer=function(t,e){var o=this;return n.Deferred((function(n){var i=o.camera.getDocument().getId();r.API.post("files/"+i+"/bytes",{bytes:t,name:e}).then((function(t){n.resolve(t)})).fail((function(t){n.reject(t)}))}))},t.prototype.getPhoto=function(){var t,e,r=this;if(this.camera.getDocument().isEditMode())return n.Deferred((function(t){t.reject(new Error("Not allowed"))}));var u=function(){try{if(e){try{e.stop()}catch(t){for(var n=e.getVideoTracks(),r=0,o=n.length;r<o;r++)n[r].stop()}e=void 0}}catch(t){}try{if(t){try{t.pause()}catch(t){}t.src="",t.srcObject=null,t.parentNode&&t.parentNode.removeChild(t),t=void 0}}catch(t){}};return n.Deferred((function(l){var c=new o.Dialog({width:"600px",height:"600px",title:"Take Picture",closable:!0,fullScreen:!0,movable:!1,onClose:function(){u(),l.resolve(null)}}).center();c.getRoot().setAttribute("data-dialog-role","photo-camera");var p=new s.Loader(c.getBody());p.addLoadRequest(),i.NetworkCache.get("/static/templates/ui-v2/ui-controls/photo-camera-dialog.html").then((function(i){p.removeLoadRequest(),c.getBody().innerHTML=i,t=c.getBody().querySelector("video");var s=function(){c.getRoot().classList.add("streaming"),n(c.getBody()).on("click","#take-snapshot",(function(){!function(){var n;try{n={left:0,top:0,width:e.getVideoTracks()[0].getSettings().width,height:e.getVideoTracks()[0].getSettings().height}}catch(e){n={left:0,top:0,width:t.offsetWidth,height:t.offsetHeight}}t.style.width=n.width+"px",t.style.height=n.height+"px",t.style.right="unset",t.style.bottom="unset";var i=document.createElement("canvas");i.width=n.width,i.height=n.height,i.getContext("2d").drawImage(t,0,0,n.width,n.height),t.style.width=t.style.height=t.style.right=t.style.bottom="";var s=i.toDataURL("image/jpeg"),a=new Date,d="DSC"+a.getUTCDate()+"_"+(a.getUTCMonth()+1)+"_"+a.getUTCFullYear()+"_"+a.getUTCHours()+"_"+a.getUTCMinutes()+"_"+a.getUTCSeconds()+".jpg";p.reattachToElement(c.getBody()).addLoadRequest(),t.pause(),r.uploadBase64FileToServer(s.split("data:image/jpeg;base64,")[1],d).then((function(t){p.removeLoadRequest(),c.close(),u(),l.resolve(t)})).fail((function(t){p.removeLoadRequest(),o.Dialog.alert("An error occurred while uploading your picture on our server. Please retry. If the problem persists, contact support","Error uploading picture")}))}()})).on("click","#cancel-snapshot",(function(){c.close(),u(),l.resolve(null)}))};a.MultimediaManager.getMediaStream(r.constraints).then((function(n){e=n,void 0!==t.srcObject?t.srcObject=n:t.src=n,t.play().then((function(){s()})).catch((function(t){c.close(),u(),l.reject(t)}))})).fail((function(t){c.close(),u(),l.reject(t)}))})).fail((function(t){p.removeLoadRequest(),c.close(),u(),o.Dialog.alert("There was a problem when loading the Photo Camera application. Please retry. If the problem persists, contact support","Error taking photo"),l.reject(t)}))}))},t}();e.CameraPhotoShooter=u}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(0)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.getMediaStream=function(t){return n.Deferred((function(e){navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia(t).then((function(t){e.resolve(t)})).catch((function(t){e.reject(t)})):navigator.getUserMedia?navigator.getUserMedia(t,(function(t){e.resolve(t)}),(function(t){e.reject(t)})):navigator.webkitGetUserMedia?navigator.webkitGetUserMedia(t,(function(t){e.resolve(t)}),(function(t){e.reject(t)})):navigator.mozGetUserMedia?navigator.mozGetUserMedia(t,(function(t){e.resolve(t)}),(function(t){e.reject(t)})):e.reject(new Error("Media Stream support not detected on device"))}))},t}();e.MultimediaManager=r}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(0),n(9),n(4),n(1),n(10),n(13),n(101)],void 0===(o=function(t,e,n,r,o,i,a,u,l){Object.defineProperty(e,"__esModule",{value:!0});var c=function(t){function e(n,r,o){var s=t.call(this,n,r||e.getDefaultProperties(n),o)||this;s.value=null,s.addClass("net-promoter"),s.embedDOMNode=document.createElement("div"),s.embedDOMNode.className="embed",s.labelMinWrapper=document.createElement("div"),s.labelMinWrapper.className="input min label-editable",s.labelMin=document.createElement("label"),s.labelMinWrapper.appendChild(s.labelMin),s.labelMaxWrapper=document.createElement("div"),s.labelMaxWrapper.className="input max label-editable",s.labelMax=document.createElement("label"),s.labelMaxWrapper.appendChild(s.labelMax),s.embedDOMNode.appendChild(s.labelMinWrapper),s.embedDOMNode.appendChild(s.labelMaxWrapper),s.marksWrapper=document.createElement("div"),s.marksWrapper.className="marks",s.marksWrapper.tabIndex=0,s.marks=[];for(var a=0;a<10;a++){var u=document.createElement("div");u.className="score",u.setAttribute("data-value",String(a+1)),u.textContent=String(a+1),s.marks.push(u),s.marksWrapper.appendChild(u)}return s.labelMin.textContent=i.I18n.translateViewFormText(s.getProperty("labelMinText")||""),s.labelMax.textContent=i.I18n.translateViewFormText(s.getProperty("labelMaxText")||""),s.embedDOMNode.appendChild(s.marksWrapper),s.document.isEditMode()?s.marks[9].classList.add("selected"):s.initViewFormEvents(),s}return s(e,t),e.getDefaultProperties=function(e){var n=t.addLabelProperties.call(this,t.addInputProperties.call(this,t.addSizeProperties.call(this,{name:"Q",visibility:"",labelMinText:i.I18n.translateApplicationText("Not at all likely","control-defaults.net-promoter"),labelMaxText:i.I18n.translateApplicationText("Extremely likely","control-defaults.net-promoter"),validation:{required:!0,customErrorMessage:""}}),e),i.I18n.translateApplicationText("How likely would your recommend ... to a friend or colleague?","control-defaults.net-promoter"),e);return n.input.borderColor=e.getThemeValues().getProperty("input.borderColor").inherit(),n},e.prototype.getFieldsLayout=function(){return[{row:0,span:r.InputSpan.FULL,domNode:this.embedDOMNode}]},e.prototype.getTypeId=function(){return o.NodeTypes.NET_PROMOTER_SCORE},e.prototype.hasLabel=function(){return!0},e.prototype.hasValue=function(){return!0},e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t){return this.value=t||null,this.onValueChanged(),this},e.prototype.onValueChanged=function(){for(var t=0;t<10;t++)this.value===t+1?this.marks[t].classList.add("selected"):this.marks[t].classList.remove("selected")},e.prototype.getNodeName=function(){return"Net Promoter Score"},e.prototype.getRenderedCSS=function(){var t=a.cast(this.properties.label.color),e=a.cast(this.properties.label.font.family),n=a.cast(this.properties.label.font.size),r=a.cast(this.properties.label.font.bold)?"bold":"normal",o=a.cast(this.properties.label.font.italic)?"italic":"normal",i=a.cast(this.properties.label.font.underline)?"underline":"none",s=a.cast(this.properties.label.font.align),u=a.cast(this.properties.input.color)||"black",l=a.cast(this.properties.input.backgroundColor)||"white",c=a.cast(this.properties.input.borderColor)||"black",p=a.cast(this.properties.input.borderWidth),d=a.cast(this.properties.input.borderRadius),h=a.cast(this.properties.input.borderStyle),f=a.cast(this.properties.input.font.family),g=a.cast(this.properties.input.font.size),m=a.cast(this.properties.input.font.bold)?"bold":"normal",y=a.cast(this.properties.input.font.italic)?"italic":"normal",v=a.cast(this.properties.input.font.underline)?"underline":"none",b=a.cast(this.properties.input.font.align),C=this.document.getProperty("theme.selection.borderColor");return"\n            > label {\n                color: "+t+";\n                font-size: "+n+'px;\n                font-family: "'+e+'";\n                font-weight: '+r+";\n                font-style: "+o+";\n                text-decoration: "+i+";\n                text-align: "+s+";\n            }\n\n            & {\n                font-size: "+g+"px;\n            }\n\n            .input {\n                font-weight: "+m+";\n                font-style: "+y+';\n                font-size: .8em;\n                font-family: "'+f+'";\n                color: '+u+";\n            }\n            \n            .marks {\n                color: "+u+";\n                background-color: "+l+";\n                border: "+p+" "+h+" "+c+";\n                border-radius: "+d+";\n                font-weight: "+m+";\n                font-style: "+y+";\n                text-decoration: "+v+";\n                text-align: "+b+";\n                font-size: "+g+'px;\n                font-family: "'+f+'";\n                \n                .score:not(:first-child) {\n                    border-left: '+p+" "+h+" "+c+";\n                }\n                \n                .score.selected {\n                    background-color: "+c+";\n                    color: "+l+";\n                }\n                \n                &:hover,\n                &:focus {\n                    border-color: "+C+";\n                    .score {\n                        border-color: "+C+" !important;\n                        &.selected {\n                            background-color: "+C+";\n                        }\n                    }\n                }\n                .score:not(.selected):hover {\n                    background-color: "+this.document.getProperty("theme.selection.backgroundColor")+" !important;\n                }\n            }\n        "},e.prototype.initViewFormEvents=function(){!function(t){n(t.marksWrapper).on("click",".score",(function(){var n=~~this.getAttribute("data-value");n<1&&(n=1),n>10&&(n=10),t.value=n,t.onValueChanged(),t.trigger(e.EVENT_CHANGE)}))}(this)},e.prototype.listenToUserInput=function(t){var n=this;this.on(e.EVENT_CHANGE,(function(){t.updateValue(n)}))},e.prototype.getTranslations=function(){var t=[];if(this.properties.label.text&&t.push({original:this.properties.label.text}),this.properties.labelMinText&&t.push({original:this.properties.labelMinText}),this.properties.labelMinText&&t.push({original:this.properties.labelMaxText}),this.hasProperty("validation.customErrorMessage")){var e=this.getProperty("validation.customErrorMessage");e&&t.push({original:e,context:"form-fields-errors"})}return t},e.prototype.performTranslation=function(){this.labelMin.textContent=i.I18n.translateViewFormText(this.getProperty("labelMinText")||""),this.labelMax.textContent=i.I18n.translateViewFormText(this.getProperty("labelMaxText")||"")},e.prototype.setLabelTextWhichIsComingFromTheUser=function(e,n){if(n===this.labelDOMNode)return t.prototype.setLabelTextWhichIsComingFromTheUser.call(this,e,n);var r=String(e||"").trim().replace(/[\r\n]+/g," ");switch(n){case this.labelMin:this.setProperty("labelMinText",r);break;case this.labelMax:this.setProperty("labelMaxText",r)}return this},e.prototype.getTextAssociatedWithLabel=function(t){if(t===this.labelDOMNode)return this.getProperty("label.text");switch(t){case this.labelMin:return this.getProperty("labelMinText")||"";case this.labelMax:return this.getProperty("labelMaxText")||"";default:return""}},e.prototype.getFieldContexts=function(){return[{node:this.labelMinWrapper,context:r.SelectionInputContext.INPUT},{node:this.labelMaxWrapper,context:r.SelectionInputContext.INPUT}]},e.prototype.supportsLabelInsideRendering=function(){return!1},e.prototype.embedInPDFPage=function(t){var e=this;t.writeHTMLElement(this.labelDOMNode),t.writeHTMLElement(this.labelMin),t.writeHTMLElement(this.labelMax);var n=t.getDocument().create(u.PDFNodeEntityType.INPUT_RADIO).setName(this.getProperty("name")).setRequired(this.isRequired()).setRepeatedIndex(this.getRepeatedIndex()).setDefaultUncheckedValue(-999).setRadioInputSize(18);Array.prototype.slice.call(this.embedDOMNode.querySelectorAll(".score"),0).forEach((function(r,o){var i=r.getBoundingClientRect(),s=~~i.top-t.getDimensions().top,l=~~i.left-t.getDimensions().left;n.addOption(String(o+1),{left:l+Math.round((i.width-22)/2),top:s+4},!1);var c=t.getDocument().create(u.PDFNodeEntityType.RECTANGLE).setBorderColor(a.cast(e.properties.input.borderColor)||"#000000").setFillColor(a.cast(e.properties.input.backgroundColor)||"#ffffff");t.initializeFieldDimensions(r,c),t.appendChild(c);var p=t.getDocument().create(u.PDFNodeEntityType.TEXT).setPoint({top:s+22,left:l+6+Math.round((i.width-22)/2)}).setBold(!1).setItalic(!1).setUnderline(!1).setText(String(o+1)).setFontFamily(a.cast(e.properties.label.font.family)).setFontSize(10).setColor(a.cast(e.properties.label.color));t.write(p)})),t.appendChild(n)},e.prototype.supportsDefaultValue=function(){return!0},e.prototype.getDefaultValueStrategy=function(){for(var t=new l.SingleSelectionInputDefaultValue,e=1;e<=10;e++)t.addChoice(String(e),e);return t},e.EVENT_CHANGE="change",e}(r.Input);e.NetPromoterScore=c}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(0),n(9),n(4),n(5),n(1),n(10)],void 0===(o=function(t,e,n,r,o,i,a,u){Object.defineProperty(e,"__esModule",{value:!0});var l=function(t){function e(n,r,o){var i=t.call(this,n,r||e.getDefaultProperties(n),o)||this;return i.choices=[],i.value="",i.addClass("dropdown"),i.inputWrapper=document.createElement("div"),i.inputWrapper.className="input",i.dropdown=document.createElement("select"),i.inputWrapper.appendChild(i.dropdown),i.normalizedExpander=document.createElement("div"),i.normalizedExpander.className="expander",i.inputWrapper.appendChild(i.normalizedExpander),i.normalizedExpander.innerHTML='<span class="vfb vfb-caret-down"></span>',i.initializeEditModeEvents(),i}return s(e,t),e.prototype.getTextChoices=function(){return this.choices||[]},e.getDefaultProperties=function(t){return this.addInputProperties(this.addLabelProperties(this.addSizeProperties({name:"Q",visibility:"",formula:"",validation:{required:!1,customErrorMessage:""},choices:{firstChoice:a.I18n.translateApplicationText("Please select","control-defaults.bigdata-dropdown"),bigDataCollection:"",bigDataCollectionField:"",bigDataCollectionFilter:"",bigDataPublicEndpoint:""}}),a.I18n.translateApplicationText("Choice","control-defaults.bigdata-dropdown"),t),t)},e.prototype.getFieldsLayout=function(){return[{domNode:this.inputWrapper,span:r.InputSpan.FULL,row:0}]},e.prototype.hasLabel=function(){return!0},e.prototype.hasValue=function(){return!0},e.prototype.getTypeId=function(){return o.NodeTypes.BIG_DATA_DROPDOWN},e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(t){if(0===t&&this.dropdown.options[0]&&"0"===this.dropdown.options[0].text?this.value="0":this.value=String(t||""),this.dropdown.value=this.value,-1===this.dropdown.selectedIndex&&this.value){var e=document.createElement("option");e.text=e.value=this.value,e.disabled=!0,this.dropdown.add(e),this.dropdown.value=this.value}return this},e.prototype.getRenderedCSS=function(){var t=u.cast(this.properties.label.color),e=u.cast(this.properties.label.font.family),n=u.cast(this.properties.label.font.size),r=u.cast(this.properties.label.font.bold)?"bold":"normal",o=u.cast(this.properties.label.font.italic)?"italic":"normal",i=u.cast(this.properties.label.font.underline)?"underline":"none",s=u.cast(this.properties.label.font.align),a=u.cast(this.properties.input.color),l=u.cast(this.properties.input.backgroundColor),c=u.cast(this.properties.input.borderColor),p=u.cast(this.properties.input.borderWidth),d=u.cast(this.properties.input.borderRadius),h=u.cast(this.properties.input.borderStyle),f=u.cast(this.properties.input.font.family),g=u.cast(this.properties.input.font.size),m=u.cast(this.properties.input.font.bold)?"bold":"normal",y=u.cast(this.properties.input.font.italic)?"italic":"normal",v=u.cast(this.properties.input.font.underline)?"underline":"none",b=u.cast(this.properties.input.font.align),C=this.document.getProperty("theme.selection.borderColor");return"\n            > label {\n                color: "+t+";\n                font-size: "+n+'px;\n                font-family: "'+e+'";\n                font-weight: '+r+";\n                font-style: "+o+";\n                text-decoration: "+i+";\n                text-align: "+s+";\n            }\n\n            .input select {\n                color: "+a+";\n                background-color: "+l+";\n                border: "+p+" "+h+" "+c+";\n                border-radius: "+d+";\n                font-weight: "+m+";\n                font-style: "+y+";\n                text-decoration: "+v+";\n                text-align: "+b+";\n                font-size: "+g+'px;\n                font-family: "'+f+'";\n                &:hover,\n                &:focus {\n                    border-color: '+C+";\n                    & + .expander {\n                        border-color: "+C+";\n                    }\n                }\n                &:focus {\n                    background-color: "+this.document.getProperty("theme.selection.backgroundColor")+";\n                }\n            }\n            \n            .input .expander {\n                color: "+a+";\n                background-color: "+l+";\n                border-width: "+p+" "+p+" "+p+" 0;\n                border-style: "+h+";\n                border-radius: 0 "+d+" "+d+" 0;\n                border-color: "+c+";\n            }\n        "},e.prototype.getNodeName=function(){return"BigData Dropdown"},e.prototype.listenToUserInput=function(t){var e=this;this.dropdown.onchange=function(){e.value=e.dropdown.value,t.updateValue(e)}},e.prototype.onChoicesChanged=function(){for(;this.dropdown.options.length;)this.dropdown.options.remove(0);var t,e=String(this.getProperty("choices.firstChoice")||"").trim();e&&((t=document.createElement("option")).text=e,t.value="",this.dropdown.add(t));for(var n=0,r=this.choices.length;n<r;n++)(t=document.createElement("option")).text=t.value=this.choices[n],this.dropdown.add(t);this.dropdown.value=this.value,-1===this.dropdown.selectedIndex&&(this.dropdown.selectedIndex=0)},e.prototype.fetch=function(){var t=this;return n.Deferred((function(e){t.choices.splice(0,t.choices.length);var n=t.getProperty("choices.bigDataCollection"),r=t.getProperty("choices.bigDataCollectionField"),o=t.getProperty("choices.bigDataCollectionFilter"),s=t.getProperty("choices.bigDataPublicEndpoint");if(n&&r&&s){var a=function(t,e){var n=t.toLowerCase(),r=e.toLowerCase();return n===r?0:n<r?-1:1},u=0;!function n(){var l={limit:String(200),skip:String(u),fields:r};o&&(l.where=o),i.API.get(s,l).then((function(o){for(var i=0,s=o.length;i<s;i++){var l=o[i][r];"string"==typeof l&&l&&-1===t.choices.indexOf(l)&&t.choices.push(l)}o.length<200?(t.choices.sort(a),e.resolve()):(u+=200,setTimeout((function(){n()}),0))})).fail((function(){t.choices.sort(a),e.resolve()}))}()}else e.resolve()}))},e.prototype.initializeEditModeEvents=function(){var t=this;this.document.isEditMode()&&(this.fetch().then((function(){t.onChoicesChanged()})),this.dropdown.addEventListener("mousedown",(function(e){e.preventDefault(),setTimeout((function(){t.dropdown.focus()}),10)}),!0))},e.prototype.supportsLabelInsideRendering=function(){return!0},e.prototype.onClonedInsideRepeatableField=function(){var t=this;this.fetch().then((function(){t.onChoicesChanged()}))},e}(r.Input);e.BigDataDropdown=l}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(56),n(4),n(15),n(9),n(308),n(2),n(49),n(140),n(12),n(5),n(81),n(26)],void 0===(o=function(t,e,n,r,o,i,a,u,l,c,p,d,h,f){Object.defineProperty(e,"__esModule",{value:!0});var g=function(t){function e(n,r,o){var i=t.call(this,n,r||e.getDefaultProperties(n),o)||this;return i.addClass("bigdata-row-viewer"),n.isEditMode()?(i.toolbar=new a.BigDataRowViewerToolbar(i),i.root.appendChild(i.toolbar.getRoot()),i.toolbar.update()):(i.bindings={},i.debouncedFetch=p.Debouncer.create((function(){i.fetch()}),50),i.initViewFormLogic()),i}return s(e,t),e.getDefaultProperties=function(t){return{name:"Q",size:{width:20},collection:{id:null,name:"",endpoint:"",schema:"{}",filter:"[]",mappings:"{}"}}},e.prototype.getTypeId=function(){return r.NodeTypes.BIG_DATA_ROW_VIEWER},e.prototype.getNodeName=function(){return"BigData Row Viewer"},e.prototype.isSelectable=function(){return!0},e.prototype.isClonable=function(){return!1},e.prototype.isDeletable=function(){return!0},e.prototype.getFieldContexts=function(){return[]},e.prototype.getResizeCapabilities=function(){return i.InputResizeCapabilities.HORIZONTAL},e.prototype.render=function(){this.resizers&&(this.resizers.north&&this.root.appendChild(this.resizers.north),this.resizers.south&&this.root.appendChild(this.resizers.south),this.resizers.east&&this.root.appendChild(this.resizers.east),this.resizers.west&&this.root.appendChild(this.resizers.west),this.resizers.label&&this.root.appendChild(this.resizers.label));var e=this.properties.size.width;this.root.setAttribute("data-w",String(e)),t.prototype.render.call(this);this.root.getElementsByClassName("drag-svg");this.dragIndicator.remove();var n=f.DOM.document.createElement("div");n.className="drag-svg",this.root.insertBefore(n,this.root.firstChild)},e.prototype.isDragable=function(){return!0},e.prototype.onSchemaChanged=function(){this.toolbar&&this.toolbar.update()},e.prototype.addFieldOfSchema=function(t){if(console.log("Add schema field: ",t),this.document.isEditMode()){var e=JSON.parse(this.getProperty("collection.mappings"));if(void 0===e[t]){var n=this.document.createElement(r.NodeTypes.TEXT_BOX),o=this.document.createElement(r.NodeTypes.ROW);n.setProperty("label.text",t+" in "+this.getProperty("collection.name")),n.setProperty("name",t+"_in_"+this.getProperty("collection.name")),o.appendChild(n),n.onInsertedIntoFormByUser(),this.appendChild(o),o.render(),n.getDocument().getTheme().markAsModified(),n.scrollIntoView().requestUserAttention(),e[t]=n.getId(),this.setProperty("collection.mappings",JSON.stringify(e),this),this.document.runIndexerInSyncMode(),this.document.runDuplicateFieldNameCheck(),this.toolbar&&this.toolbar.update()}else u.Dialog.alert("Field "+JSON.stringify(t)+" already added","Add field")}},e.prototype.removeFieldOfSchema=function(t){if(console.log("Remove schema field: ",t),this.document.isEditMode()){var e=JSON.parse(this.getProperty("collection.mappings"));if(void 0!==e[t]){var n=e[t],r=this.document.getElementById(n);if(r)r.getParent().removeChild(r),this.document.getSelection().set(null,null,null),this.document.normalizeInSyncMode(),this.document.runIndexerInSyncMode(),this.document.runDuplicateFieldNameCheck(),this.document.trigger(o.Document.EVENT_REQUEST_SAVE);delete e[t],this.setProperty("collection.mappings",JSON.stringify(e),this),this.toolbar&&this.toolbar.update()}else u.Dialog.alert("Field "+JSON.stringify(t)+" not added","Remove field")}},e.prototype.onSizeChanged=function(){var e=this;t.prototype.onSizeChanged.call(this);var n=this.getProperty("size.width");setTimeout((function(){for(var t=0,o=e.getChildren(),i=o.length;t<i;t++)o[t].getTypeId()===r.NodeTypes.ROW&&o[t].makeChildrenFitContent(n)}),0)},e.prototype.initViewFormLogic=function(){var t=this;this.document.isEditMode()||setTimeout((function(){var e=JSON.parse(t.getProperty("collection.mappings")),n=!1;for(var r in e){var o=e[r],i=t.document.getElementById(o);i.setReadOnly(!0),i&&(t.bindings[r]=i,n=!0)}if(n&&null===l.EditSubmissionManager.getActionType()){var s=JSON.parse(t.getProperty("collection.filter")||"[]");if(Array.isArray(s)&&s.length){var a=t.getProperty("collection.endpoint");a&&(t.where=s,t.endpoint=a,t.debouncedFetch())}}}),10)},e.prototype.listenToUserInput=function(t){var e=this;if(this.submissionModel=t,this.where&&this.endpoint){for(var n=[],r=0,o=this.where.length;r<o;r++)"field"===this.where[r].value.type&&this.where[r].value.value&&n.push(this.where[r].value.value);t.on(c.SubmissionModel.EVENT_CHANGE,(function(t,r){t&&t.hasProperty("name")&&n.indexOf(t.getProperty("name"))>-1&&e.debouncedFetch()})),this.debouncedFetch()}},e.prototype.fetch=function(){var t=this;if(!this.document.isEditMode()&&null===l.EditSubmissionManager.getActionType()&&this.bindings&&this.endpoint&&this.where){var e=[];for(var n in this.bindings)e.push(n);if(e.length){var r={fields:e.join(","),where:this.createFilterQueryString(),limit:"1"};if(null!==r.where){for(var n in this.bindings)this.bindings[n].setValue("..."),this.submissionModel.updateValue(this.bindings[n]);d.API.get(this.endpoint,r).then((function(e){if(e.length){var n=e[0];for(var r in t.bindings)void 0!==n[r]?t.bindings[r].setValue(String(n[r])):t.bindings[r].setValue(""),t.submissionModel.updateValue(t.bindings[r])}else for(var r in t.bindings)t.bindings[r].setValue(""),t.submissionModel.updateValue(t.bindings[r])}))}}}},e.prototype.createFilterQueryString=function(){for(var t=JSON.parse(this.getProperty("collection.schema")||"{}"),e=this.submissionModel.getFormData(),n=[],r=0,o=this.where.length;r<o;r++){var i=this.where[r].field,s="value"===this.where[r].value.type?this.where[r].value.value:void 0===e[this.where[r].value.value]?"":e[this.where[r].value.value];if(void 0===t[i])return null;switch(t[i]){case h.BigDataType.INT:n.push(i+" "+this.where[r].operator+" "+JSON.stringify(this.castToInt(s)));break;case h.BigDataType.UNSIGNED_INT:n.push(i+" "+this.where[r].operator+" "+JSON.stringify(this.castToUnsignedInt(s)));break;case h.BigDataType.FLOAT:n.push(i+" "+this.where[r].operator+" "+JSON.stringify(this.castToFloat(s)));break;case h.BigDataType.UNSIGNED_FLOAT:n.push(i+" "+this.where[r].operator+" "+JSON.stringify(this.castToUnsignedFloat(s)));break;case h.BigDataType.BOOLEAN:n.push(i+" "+this.where[r].operator+" "+JSON.stringify(this.castToBoolean(s)));break;case h.BigDataType.STRING:case h.BigDataType.COLOR:case h.BigDataType.PICTURE:n.push(i+" "+this.where[r].operator+" "+JSON.stringify(String(s)))}}return n.length?n.join(" && "):null},e.prototype.castToInt=function(t){var e=parseInt(t);return e=isNaN(e)||!isFinite(e)?0:e},e.prototype.castToUnsignedInt=function(t){var e=this.castToInt(t);return Math.max(0,e)},e.prototype.castToFloat=function(t){var e=parseFloat(t);return e=isNaN(e)||!isFinite(e)?0:e},e.prototype.castToUnsignedFloat=function(t){var e=this.castToFloat(t);return Math.max(0,e)},e.prototype.castToBoolean=function(t){switch(String(t||"").toLowerCase()){case"n":case"no":case"0":case"-":case"":return!1;default:return!!t}},e.prototype.supportsLabelInsideRendering=function(){return!1},e}(n.Container);e.BigDataRowViewer=g}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(7),n(6),n(81),n(1)],void 0===(o=function(t,e,n,r,o,i){Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t){this.bigDataRowViewer=t,this.root=document.createElement("div"),this.root.className="f toolbar"}return t.prototype.getRoot=function(){return this.root},t.prototype.update=function(){var t,e=this.bigDataRowViewer.getProperty("collection.schema")||"{}";if(this.bigDataRowViewer.getProperty("collection.name")){try{if(t=JSON.parse(e),n.Helpers.areTheSame(t,{}))return void(this.root.innerHTML="<span class='vfb vfb-error2'></span> Selected collection has no fields")}catch(t){return void(this.root.innerHTML="<span class='vfb vfb-error2'></span> Error parsing selected collection schema!")}var s,a=this.bigDataRowViewer.getProperty("collection.mappings")||"{}";try{s=JSON.parse(a)}catch(t){return void(this.root.innerHTML="<span class='vfb vfb-error2'></span> Error parsing input mappings!")}var u=[],l=[],c=function(e){if(t.hasOwnProperty(e)){var n=t[e];if(-1===n.indexOf("[]")&&"_id"!==e)switch(n){case o.BigDataType.STRING:case o.BigDataType.BOOLEAN:case o.BigDataType.UNSIGNED_FLOAT:case o.BigDataType.UNSIGNED_INT:case o.BigDataType.FLOAT:case o.BigDataType.INT:var r=document.createElement("a");r.textContent=e,r.href="javascript:",void 0===s[e]?(u.push(r),function(t,e){r.onclick=function(){t.bigDataRowViewer.addFieldOfSchema(e)}}(p,e)):(l.push(r),function(t,e){r.onclick=function(){t.bigDataRowViewer.removeFieldOfSchema(e)}}(p,e))}}},p=this;for(var d in t)c(d);var h=function(e){if(s.hasOwnProperty(e)&&void 0===t[e]){var n=document.createElement("a");n.textContent=e,n.href="javascript:",l.push(n),function(t,e){n.onclick=function(){t.bigDataRowViewer.removeFieldOfSchema(e)}}(f,e)}},f=this;for(var g in s)h(g);for(;this.root.firstChild;)this.root.removeChild(this.root.firstChild);if(u.length){this.root.appendChild(document.createTextNode("Add: "));for(var m=0,y=u.length;m<y;m++)this.root.appendChild(u[m]),m<y-1&&this.root.appendChild(document.createTextNode(", "))}if(l.length){u.length&&this.root.appendChild(document.createElement("br")),this.root.appendChild(document.createTextNode("Remove: "));for(m=0,y=l.length;m<y;m++)this.root.appendChild(l[m]),m<y-1&&this.root.appendChild(document.createTextNode(", "))}}else this.root.innerHTML="<span class='vfb vfb-error2'></span> "+r.Strings.toHTML(i.I18n.translateApplicationText("Please configure BigData collection first","control-defaults.bigdata-row-viewer"))},t}();e.BigDataRowViewerToolbar=s}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(0),n(9),n(15),n(4),n(1),n(43),n(49),n(19),n(73),n(5),n(10)],void 0===(o=function(t,e,n,r,o,i,a,u,l,c,p,d,h){Object.defineProperty(e,"__esModule",{value:!0});var f=function(t){function e(n,r,o){var i=t.call(this,n,r||e.getDefaultProperties(n),o)||this;return i.addClass("textbox"),i.input=document.createElement("input"),i.input.type="text",i.onPlaceholderChanged(),n.isEditMode()?i.installEditModeEvents():(i.input.readOnly=!0,i.installViewerModeEvents()),i}return s(e,t),e.prototype.getFieldsLayout=function(){return[{domNode:this.input,row:0,span:r.InputSpan.FULL}]},e.prototype.getTypeId=function(){return i.NodeTypes.WORKFLOWS_CURRENT_USER_EMAIL},e.prototype.hasLabel=function(){return!0},e.prototype.hasValue=function(){return!0},e.prototype.getValue=function(){return void 0!==this.username?this.username:this.input.value},e.prototype.setValue=function(t){return void 0!==this.username?this.input.value=this.username:this.input.value=0===t?"0":String(t||""),this},e.prototype.getNodeName=function(){return"Email"},e.getDefaultProperties=function(e){var n=a.I18n.translateApplicationText("Email","custom-preferences");return t.addInputProperties.call(this,t.addLabelProperties.call(this,t.addSizeProperties.call(this,{name:"Q",visibility:"",formula:"",placeholder:a.I18n.translateApplicationText("email will be auto populated","control-defaults.username"),validation:{required:!1,format:"email",customErrorMessage:"",unique:!1}}),n,e),e)},e.prototype.getTranslations=function(){var t=[];if(this.properties.placeholder&&t.push({original:this.properties.placeholder}),this.properties.label.text&&t.push({original:this.properties.label.text}),this.hasProperty("validation.customErrorMessage")){var e=this.getProperty("validation.customErrorMessage");e&&t.push({original:e,context:"form-fields-errors"})}return t},e.prototype.getRenderedCSS=function(){var t=h.cast(this.properties.label.color),e=h.cast(this.properties.label.font.family),n=h.cast(this.properties.label.font.size),r=h.cast(this.properties.label.font.bold)?"bold":"normal",o=h.cast(this.properties.label.font.italic)?"italic":"normal",i=h.cast(this.properties.label.font.underline)?"underline":"none",s=h.cast(this.properties.label.font.align),a=h.cast(this.properties.input.color),u=h.cast(this.properties.input.backgroundColor),l=h.cast(this.properties.input.borderColor),c=h.cast(this.properties.input.borderWidth),p=h.cast(this.properties.input.borderRadius),d=h.cast(this.properties.input.borderStyle),f=h.cast(this.properties.input.font.family),g=h.cast(this.properties.input.font.size);return"\n            > label {\n                color: "+t+";\n                font-size: "+n+'px;\n                font-family: "'+e+'";\n                font-weight: '+r+";\n                font-style: "+o+";\n                text-decoration: "+i+";\n                text-align: "+s+";\n            }\n            input[type=text] {\n                color: "+a+";\n                background-color: "+u+";\n                border: "+c+" "+d+" "+l+";\n                border-radius: "+p+";\n                font-weight: "+(h.cast(this.properties.input.font.bold)?"bold":"normal")+";\n                font-style: "+(h.cast(this.properties.input.font.italic)?"italic":"normal")+";\n                text-decoration: "+(h.cast(this.properties.input.font.underline)?"underline":"none")+";\n                text-align: "+h.cast(this.properties.input.font.align)+";\n                font-size: "+g+'px;\n                font-family: "'+f+'";\n                &:hover,\n                &:focus {\n                    border-color: '+this.document.getProperty("theme.selection.borderColor")+";\n                }\n                &:focus {\n                    background-color: "+this.document.getProperty("theme.selection.backgroundColor")+";\n                }\n            }\n        "},e.prototype.onPlaceholderChanged=function(){this.input.placeholder=this.getProperty("placeholder")||"",this.getDocument().isEditMode()&&this.input.placeholder!==this.input.value&&(this.input.value=this.input.placeholder)},e.prototype.installEditModeEvents=function(){var t=this;this.input.value=this.getProperty("placeholder")||"",this.input.oninput=function(){t.setProperty("placeholder",t.input.value,t),t.input.placeholder=t.input.value},this.input.onfocus=function(){setTimeout((function(){t.getDocument().getSelection().getItem()!==t&&t.getDocument().getSelection().set(t,r.SelectionInputContext.INPUT,t.input)}),0)}},e.prototype.listenToUserInput=function(t){return this.submissionModel=t,this},e.prototype.getAllowedValidators=function(){return["email"]},e.prototype.installViewerModeEvents=function(){var t=this;this.document.isEditMode()||(this.input.onblur=function(){t.input.value&&!u.DataFormat.isEmail(t.input.value)?t.setError(t.getProperty("validation.customErrorMessage")||"Please input a valid email address"):t.setError(null)},null===l.EditSubmissionManager.getActionType()&&this.document.on(o.Document.EVENT_READY,(function(){c.UserManager.login(p.LoginOrSignupSection.LOGIN).then((function(e){var r=e.id;d.API.get("users/my-company/user/"+String(r),void 0,d.APIAuthenticationStrategy.OPTIONAL_AUTHENTICATION).then((function(e){t.input.value=e.email,n(t.input).trigger("input"),t.submissionModel&&t.submissionModel.updateValue(t),t.username=e.email})).fail((function(){t.input.value=e.email||e.userName,n(t.input).trigger("input"),t.submissionModel&&t.submissionModel.updateValue(t),t.username=e.email||e.userName}))}))})))},e.prototype.performTranslation=function(){this.labelDOMNode&&(this.labelDOMNode.textContent=a.I18n.translateViewFormText(this.getProperty("label.text"),this.getLabelI18nContext())),this.input&&(this.input.placeholder=a.I18n.translateViewFormText(this.getProperty("placeholder")))},e.prototype.supportsLabelInsideRendering=function(){return!0},e}(r.Input);e.WorkflowsCurrentUserEmail=f}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(9),n(4),n(1),n(164),n(49),n(10)],void 0===(o=function(t,e,n,r,o,i,a,u){Object.defineProperty(e,"__esModule",{value:!0});var l=function(t){function e(n,r,o){var i=t.call(this,n,r||e.getDefaultProperties(n),o)||this;return i.addClass("textbox hidden-field"),n.isEditMode()?(i.input=document.createElement("input"),i.input.type="text",i.showField=!0,i.installEditModeEvents()):(i.showField=null!==a.EditSubmissionManager.getSubmissionId()&&a.EditSubmissionManager.getActionType()!==a.ViewFormSubmissionActionType.RESUME_SUBMISSION_EDITING,i.input=document.createElement("input"),i.input.type=i.showField?"text":"hidden",i.showField||(i.root.style.display="none")),i.onPlaceholderChanged(),i}return s(e,t),e.prototype.getFieldsLayout=function(){return this.showField?[{domNode:this.input,row:0,span:n.InputSpan.FULL}]:[]},e.prototype.getTypeId=function(){return r.NodeTypes.HIDDEN_SHORT_TEXT},e.prototype.hasLabel=function(){return!0},e.prototype.hasValue=function(){return!0},e.prototype.getValue=function(){return this.input.value},e.prototype.setValue=function(t){return this.input.value=0===t?"0":String(t||""),this},e.prototype.getNodeName=function(){return"Hidden Short Text"},e.getDefaultProperties=function(t){var e=i.TextBox.getDefaultProperties(t);return e.name=o.I18n.translateApplicationText("Hidden Short Text","control-defaults"),e.label.text=o.I18n.translateApplicationText("Hidden field","control-defaults.hidden-short-text"),e},e.prototype.getTranslations=function(){var t=[];if(this.properties.placeholder&&t.push({original:this.properties.placeholder}),this.properties.label.text&&t.push({original:this.properties.label.text}),this.hasProperty("validation.customErrorMessage")){var e=this.getProperty("validation.customErrorMessage");e&&t.push({original:e,context:"form-fields-errors"})}return t},e.prototype.getRenderedCSS=function(){var t=u.cast(this.properties.label.color),e=u.cast(this.properties.label.font.family),n=u.cast(this.properties.label.font.size),r=u.cast(this.properties.label.font.bold)?"bold":"normal",o=u.cast(this.properties.label.font.italic)?"italic":"normal",i=u.cast(this.properties.label.font.underline)?"underline":"none",s=u.cast(this.properties.label.font.align),a=u.cast(this.properties.input.color),l=u.cast(this.properties.input.backgroundColor),c=u.cast(this.properties.input.borderColor),p=u.cast(this.properties.input.borderWidth),d=u.cast(this.properties.input.borderRadius),h=u.cast(this.properties.input.borderStyle),f=u.cast(this.properties.input.font.family),g=u.cast(this.properties.input.font.size);return"\n            > label {\n                color: "+t+";\n                font-size: "+n+'px;\n                font-family: "'+e+'";\n                font-weight: '+r+";\n                font-style: "+o+";\n                text-decoration: "+i+";\n                text-align: "+s+";\n            }\n            input[type=text] {\n                color: "+a+";\n                background-color: "+l+";\n                border: "+p+" "+h+" "+c+";\n                border-radius: "+d+";\n                font-weight: "+(u.cast(this.properties.input.font.bold)?"bold":"normal")+";\n                font-style: "+(u.cast(this.properties.input.font.italic)?"italic":"normal")+";\n                text-decoration: "+(u.cast(this.properties.input.font.underline)?"underline":"none")+";\n                text-align: "+u.cast(this.properties.input.font.align)+";\n                font-size: "+g+'px;\n                font-family: "'+f+'";\n                &:hover,\n                &:focus {\n                    border-color: '+this.document.getProperty("theme.selection.borderColor")+";\n                }\n                &:focus {\n                    background-color: "+this.document.getProperty("theme.selection.backgroundColor")+";\n                }\n            }\n        "},e.prototype.onPlaceholderChanged=function(){this.showField&&(this.input.placeholder=this.getProperty("placeholder")||"",this.getDocument().isEditMode()&&this.input.placeholder!==this.input.value&&(this.input.value=this.input.placeholder))},e.prototype.installEditModeEvents=function(){var t=this;this.input.value=this.getProperty("placeholder")||"",this.input.oninput=function(){t.setProperty("placeholder",t.input.value,t),t.input.placeholder=t.input.value},this.input.onfocus=function(){setTimeout((function(){t.getDocument().getSelection().getItem()!==t&&t.getDocument().getSelection().set(t,n.SelectionInputContext.INPUT,t.input)}),0)}},e.prototype.listenToUserInput=function(t){var e=this;return this.input.oninput=function(){t.updateValue(e)},this},e.prototype.performTranslation=function(){this.labelDOMNode&&(this.labelDOMNode.textContent=o.I18n.translateViewFormText(this.getProperty("label.text"),this.getLabelI18nContext())),this.input&&(this.input.placeholder=o.I18n.translateViewFormText(this.getProperty("placeholder")))},e.prototype.setReadOnly=function(t){return this.input.readOnly=t,this},e.prototype.isReadOnly=function(){return this.input.readOnly},e.prototype.isVisible=function(){return!!this.showField&&t.prototype.isVisible.call(this)},e.prototype.supportsLabelInsideRendering=function(){return!0},e}(n.Input);e.HiddenShortText=l}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(9),n(4),n(1),n(49),n(171),n(10)],void 0===(o=function(t,e,n,r,o,i,a,u){Object.defineProperty(e,"__esModule",{value:!0});var l=function(t){function e(n,r,o){var s=t.call(this,n,r||e.getDefaultProperties(n),o)||this;return s.addClass("textarea hidden-field"),n.isEditMode()?(s.input=document.createElement("textarea"),s.showField=!0,s.onPlaceholderChanged(),s.installEditModeEvents()):(s.showField=null!==i.EditSubmissionManager.getSubmissionId()&&i.EditSubmissionManager.getActionType()!==i.ViewFormSubmissionActionType.RESUME_SUBMISSION_EDITING,s.input=s.showField?document.createElement("textarea"):document.createElement("input"),s.showField?s.onPlaceholderChanged():(s.input.type="hidden",s.root.style.display="none")),s}return s(e,t),e.prototype.getFieldsLayout=function(){return this.showField?[{domNode:this.input,row:0,span:n.InputSpan.FULL}]:[]},e.prototype.getTypeId=function(){return r.NodeTypes.HIDDEN_LONG_TEXT},e.prototype.hasLabel=function(){return!0},e.prototype.hasValue=function(){return!0},e.prototype.getValue=function(){return this.input.value},e.prototype.setValue=function(t){return this.input.value=0===t?"0":String(t||""),this},e.prototype.getNodeName=function(){return"Hidden Long Text"},e.getDefaultProperties=function(t){var e=a.TextArea.getDefaultProperties(t);return e.name=o.I18n.translateApplicationText("Hidden Long Text","control-defaults"),e.label.text=o.I18n.translateApplicationText("Hidden field","control-defaults.hidden-long-text"),e},e.prototype.getTranslations=function(){var t=[];if(this.properties.placeholder&&t.push({original:this.properties.placeholder}),this.properties.label.text&&t.push({original:this.properties.label.text}),this.hasProperty("validation.customErrorMessage")){var e=this.getProperty("validation.customErrorMessage");e&&t.push({original:e,context:"form-fields-errors"})}return t},e.prototype.getRenderedCSS=function(){var t=u.cast(this.properties.label.color),e=u.cast(this.properties.label.font.family),n=u.cast(this.properties.label.font.size),r=u.cast(this.properties.label.font.bold)?"bold":"normal",o=u.cast(this.properties.label.font.italic)?"italic":"normal",i=u.cast(this.properties.label.font.underline)?"underline":"none",s=u.cast(this.properties.label.font.align),a=u.cast(this.properties.input.color),l=u.cast(this.properties.input.backgroundColor),c=u.cast(this.properties.input.borderColor),p=u.cast(this.properties.input.borderWidth),d=u.cast(this.properties.input.borderRadius),h=u.cast(this.properties.input.borderStyle),f=u.cast(this.properties.input.font.family),g=u.cast(this.properties.input.font.size);return"\n            > label {\n                color: "+t+";\n                font-size: "+n+'px;\n                font-family: "'+e+'";\n                font-weight: '+r+";\n                font-style: "+o+";\n                text-decoration: "+i+";\n                text-align: "+s+";\n            }\n            \n            textarea {\n                color: "+a+";\n                background-color: "+l+";\n                border: "+p+" "+h+" "+c+";\n                border-radius: "+d+";\n                font-weight: "+(u.cast(this.properties.input.font.bold)?"bold":"normal")+";\n                font-style: "+(u.cast(this.properties.input.font.italic)?"italic":"normal")+";\n                text-decoration: "+(u.cast(this.properties.input.font.underline)?"underline":"none")+";\n                text-align: "+u.cast(this.properties.input.font.align)+";\n                font-size: "+g+'px;\n                font-family: "'+f+'";\n                &:hover,\n                &:focus {\n                    border-color: '+this.document.getProperty("theme.selection.borderColor")+";\n                }\n                &:focus {\n                    background-color: "+this.document.getProperty("theme.selection.backgroundColor")+";\n                }\n            }\n        "},e.prototype.onPlaceholderChanged=function(){this.input.placeholder=this.getProperty("placeholder")||"",this.getDocument().isEditMode()&&this.input.placeholder!==this.input.value&&(this.input.value=this.input.placeholder)},e.prototype.installEditModeEvents=function(){var t=this;this.input.value=this.getProperty("placeholder")||"",this.input.oninput=function(){t.setProperty("placeholder",t.input.value,t),t.input.placeholder=t.input.value},this.input.onfocus=function(){setTimeout((function(){t.getDocument().getSelection().getItem()!==t&&t.getDocument().getSelection().set(t,n.SelectionInputContext.INPUT,t.input)}),0)}},e.prototype.listenToUserInput=function(t){var e=this;return this.input.oninput=function(){t.updateValue(e)},this},e.prototype.performTranslation=function(){this.labelDOMNode&&(this.labelDOMNode.textContent=o.I18n.translateViewFormText(this.getProperty("label.text"),this.getLabelI18nContext())),this.input&&(this.input.placeholder=o.I18n.translateViewFormText(this.getProperty("placeholder")))},e.prototype.isVisible=function(){return!!this.showField&&t.prototype.isVisible.call(this)},e.prototype.supportsLabelInsideRendering=function(){return!0},e}(n.Input);e.HiddenLongText=l}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(56),n(4),n(9),n(1),n(15),n(10)],void 0===(o=function(t,e,n,r,o,i,a,u){Object.defineProperty(e,"__esModule",{value:!0});var l=function(t){function e(n,r,o){var i=t.call(this,n,r||e.getDefaultProperties(n),o)||this;return i.isButtonSelected=!1,i.addClass("repeatable"),i.addMoreButton=document.createElement("button"),i.addMoreButton.className="input label-editable",i.addMoreButton.type="button",i.buttonCaptionDOMNode=document.createElement("label"),i.buttonCaptionDOMNode.className="caption",i.addMoreButton.appendChild(i.buttonCaptionDOMNode),i.root.appendChild(i.addMoreButton),i.addMoreButton.onclick=function(){n.isEditMode()||i.onAddMoreButtonClicked()},i.onButtonCaptionChanged(),i}return s(e,t),e.prototype.onButtonCaptionChanged=function(){this.buttonCaptionDOMNode.textContent=String(this.properties.repeatableList.addMoreItemsText||" ")},e.prototype.getTypeId=function(){return r.NodeTypes.REPEATABLE},e.prototype.getNodeName=function(){return"Repeatable List"},e.prototype.getFieldsLayout=function(){return[{domNode:this.addMoreButton,span:o.InputSpan.FULL,row:0}]},e.getDefaultProperties=function(e){return t.addSizeProperties.call(this,{name:"Q",visibility:"",repeatableList:{initialNumberOfItems:1,maxNumberOfItems:4,addMoreItemsText:i.I18n.translateApplicationText(this.REPEATABLE_ADD_MORE_TEXT,"control-defaults.repeatable")},input:{backgroundColor:e.getThemeValues().getProperty("input.backgroundColor").inherit(),borderColor:e.getThemeValues().getProperty("input.borderColor").inherit(),borderRadius:e.getThemeValues().getProperty("input.borderRadius").inherit(),borderStyle:e.getThemeValues().getProperty("input.borderStyle").inherit(),borderWidth:e.getThemeValues().getProperty("input.borderWidth").inherit()},button:{color:e.getThemeValues().getProperty("buttons.standard.color").inherit(),backgroundColor:e.getThemeValues().getProperty("buttons.standard.backgroundColor").inherit(),borderColor:e.getThemeValues().getProperty("buttons.standard.borderColor").inherit(),borderRadius:e.getThemeValues().getProperty("buttons.standard.borderRadius").inherit(),borderStyle:e.getThemeValues().getProperty("buttons.standard.borderStyle").inherit(),borderWidth:e.getThemeValues().getProperty("buttons.standard.borderWidth").inherit(),font:{family:e.getThemeValues().getProperty("buttons.standard.font.family").inherit(),size:e.getThemeValues().getProperty("buttons.standard.font.size").inherit(),bold:e.getThemeValues().getProperty("buttons.standard.font.bold").inherit(),italic:e.getThemeValues().getProperty("buttons.standard.font.italic").inherit(),underline:e.getThemeValues().getProperty("buttons.standard.font.underline").inherit(),align:e.getThemeValues().getProperty("buttons.standard.font.align").inherit()}}})},e.prototype.getTranslations=function(){var t=this.getProperty("repeatableList.addMoreItemsText");return t?[{original:t,context:"repeatable-list"}]:null},e.prototype.getRenderedCSS=function(){var t=u.cast(this.properties.input.backgroundColor),e=u.cast(this.properties.input.borderColor),n=u.cast(this.properties.input.borderWidth),r=u.cast(this.properties.input.borderRadius),o=u.cast(this.properties.input.borderStyle),s=u.cast(this.properties.button.color),a=u.cast(this.properties.button.backgroundColor),l=u.cast(this.properties.button.borderColor),c=u.cast(this.properties.button.borderWidth),p=u.cast(this.properties.button.borderRadius),d=u.cast(this.properties.button.borderStyle),h=u.cast(this.properties.button.font.family),f=u.cast(this.properties.button.font.size),g=u.cast(this.properties.button.font.bold)?"bold":"normal",m=u.cast(this.properties.button.font.italic)?"italic":"normal",y=u.cast(this.properties.button.font.underline)?"underline":"none";return"\n            \n            .container.repeatable-container {\n                background-color: "+t+";\n                border: "+n+" "+o+" "+e+";\n                margin-left: -"+n+";\n                margin-right: -"+n+";\n                border-radius: "+r+";\n                box-sizing: content-box;\n                \n                > .body:empty:after\n                {\n                    content: "+JSON.stringify(i.I18n.translateApplicationText("Please drag some fields in this Repeatable List","control-defaults.repeatable"))+";\n                }\n                \n            }\n            \n            > button,\n            > .body > .container.repeatable-container > button {\n                color: "+s+";\n                background-color: "+a+";\n                border: "+c+" "+d+" "+l+";\n                border-radius: "+p+";\n                font-weight: "+g+";\n                font-style: "+m+";\n                text-decoration: "+y+";\n                font-size: "+f+'px;\n                font-family: "'+h+'";\n            }\n            \n            > .body > .container.repeatable-container > button {\n                transform: translate('+n+", -"+n+");\n                -webkit-transform: translate("+n+", -"+n+");\n                -moz-transform: translate("+n+", -"+n+");\n                -ms-transform: translate("+n+", -"+n+");\n            }\n            \n            > button:hover,\n            > button:focus,\n            > .body > .container.repeatable-container > button:hover,\n            > .body > .container.repeatable-container > button:focus {\n                background-color: lighten("+a+", 10%);\n            }\n            \n            > button:active,\n            > .body > .container.repeatable-container > button:active {\n                background-color: darken("+a+", 10%);\n            }\n        \n        "},e.prototype.isSelectable=function(){return!0},e.prototype.isDragable=function(){return!0},e.prototype.isClonable=function(){return!1},e.prototype.render=function(){this.resizers&&(this.resizers.north&&this.root.appendChild(this.resizers.north),this.resizers.south&&this.root.appendChild(this.resizers.south),this.resizers.east&&this.root.appendChild(this.resizers.east),this.resizers.west&&this.root.appendChild(this.resizers.west),this.resizers.label&&this.root.appendChild(this.resizers.label));var e=this.properties.size.width;this.root.setAttribute("data-w",String(e)),t.prototype.render.call(this)},e.prototype.getResizeCapabilities=function(){return o.InputResizeCapabilities.HORIZONTAL},e.prototype.isDeletable=function(){return!0},e.prototype.getNumberOfGroups=function(){return this.bodies[0].getChildren().length},e.prototype.onAddMoreButtonClicked=function(){var t=this.getProperty("repeatableList.maxNumberOfItems");this.getNumberOfGroups()<t&&(this.addGroup(),this.document.runIndexerInSyncMode(),this.render(),this.document.getTheme().markAsModified())},e.prototype.listenToUserInput=function(t){this.submissionModel=t,this.document.isEditMode()||this.initializeInViewFormMode()},e.prototype.addGroup=function(){var t=this,e=this.bodies[0].getChildren()[0].clone();this.appendChild(e),this.submissionModel&&e.flatten().forEach((function(e){e.hasValue()&&(e.onClonedInsideRepeatableField(),t.submissionModel.registerNode(e),e.listenToUserInput(t.submissionModel))})),this.document.trigger(a.Document.EVENT_REPEATABLE_CONTAINER_ADDED,e)},e.prototype.appendChild=function(e,n){void 0===n&&(n=0);var r=t.prototype.appendChild.call(this,e,n);return this.onItemsCountChanged(),r},e.prototype.removeChild=function(e){var n=t.prototype.removeChild.call(this,e);return this.onItemsCountChanged(),n},e.prototype.insertFirst=function(e,n){void 0===n&&(n=0);var r=t.prototype.insertFirst.call(this,e,n);return this.onItemsCountChanged(),r},e.prototype.insertBefore=function(e,n){var r=t.prototype.insertBefore.call(this,e,n);return this.onItemsCountChanged(),r},e.prototype.insertAfter=function(e,n){var r=t.prototype.insertAfter.call(this,e,n);return this.onItemsCountChanged(),r},e.prototype.onInsertedIntoFormByUser=function(){t.prototype.onInsertedIntoFormByUser.call(this);var e=this.document.createElement(r.NodeTypes.REPEATABLE_CONTAINER);this.appendChild(e)},e.prototype.getTextAssociatedWithLabel=function(t){return String(this.properties.repeatableList.addMoreItemsText||" ")},e.prototype.setLabelTextWhichIsComingFromTheUser=function(t,e){var n=String(t||"").replace(/[\r\n]+/g,"");return this.setProperty("repeatableList.addMoreItemsText",n),this.buttonCaptionDOMNode.textContent=n,this},e.prototype.onSizeChanged=function(){var e=this;t.prototype.onSizeChanged.call(this);var n=this.getProperty("size.width");setTimeout((function(){for(var t=0,o=e.getChildren(),i=o.length;t<i;t++)o[t].getTypeId()===r.NodeTypes.REPEATABLE_CONTAINER&&(o[t].setProperty("size.width",n),o[t].onSizeChanged(),o[t].makeChildrenFitContent(n))}),0)},e.prototype.getMinWidth=function(){return 5},e.prototype.onItemsCountChanged=function(){for(var t=this.bodies[0].getChildren(),e=t.length,n=function(e,n){t[e].getRoot().setAttribute("data-item-index",String(e)),t[e].flatten().forEach((function(t){t.setRepeatedIndex(e)}))},r=0,o=e;r<o;r++)n(r);e===this.properties.repeatableList.maxNumberOfItems?this.getRoot().setAttribute("data-cannot-add-more-items",""):this.getRoot().removeAttribute("data-cannot-add-more-items"),this.document.isEditMode()||(e<=this.properties.repeatableList.initialNumberOfItems?this.getRoot().setAttribute("data-cannot-remove-items",""):this.getRoot().removeAttribute("data-cannot-remove-items")),this.getRoot().setAttribute("data-num-items",String(e))},e.prototype.onSelectSubfield=function(e){t.prototype.onSelectSubfield.call(this,e),this.isButtonSelected=e===this.addMoreButton},e.prototype.onDeselect=function(){t.prototype.onDeselect.call(this),this.isButtonSelected=!1},e.prototype.hasProperty=function(e){return this.isButtonSelected&&/^input\./.test(e)?t.prototype.hasProperty.call(this,e.replace(/^input\./g,"button.")):t.prototype.hasProperty.call(this,e)},e.prototype.getProperty=function(e){return this.isButtonSelected&&/^input\./.test(e)?t.prototype.getProperty.call(this,e.replace(/^input\./g,"button.")):t.prototype.getProperty.call(this,e)},e.prototype.setProperty=function(e,n,r){if(this.isButtonSelected&&/^input\./.test(e)){var o=t.prototype.setProperty.call(this,e.replace(/^input\./g,"button."),n,r);return this.document&&this.document.trigger("property.changed",this,e,n,null,r),o}return t.prototype.setProperty.call(this,e,n,r)},e.prototype.removeGroup=function(t){var e=this;this.getNumberOfGroups()<=this.getProperty("repeatableList.initialNumberOfItems")||(this.document.trigger(a.Document.EVENT_REPEATABLE_CONTAINER_REMOVED,t),this.submissionModel&&t.flatten().forEach((function(t){t.hasValue()&&e.submissionModel.unregisterNode(t)})),this.removeChild(t),this.document.runIndexerInSyncMode())},e.prototype.initializeInViewFormMode=function(){for(var t=this.getProperty("repeatableList.initialNumberOfItems"),e=this.getNumberOfGroups();e<t;)this.addGroup(),e++;this.document.runIndexerInSyncMode(),this.document.getTheme().markAsModified(),this.render()},e.prototype.setMinRepeatedGroups=function(t){var e=this.getNumberOfGroups();if(t>e){for(;t>e;)this.addGroup(),t--,e++;this.document.runIndexerInSyncMode(),this.document.getTheme().markAsModified(),this.render()}},e.prototype.supportsLabelInsideRendering=function(){return!1},e.REPEATABLE_ADD_MORE_TEXT="More items",e}(n.Container);e.Repeatable=l}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(0),n(9),n(15),n(1),n(4),n(12),n(76),n(10)],void 0===(o=function(t,e,n,r,o,i,a,u,l,c){Object.defineProperty(e,"__esModule",{value:!0});var p=function(t){function e(n,r,o){var i=t.call(this,n,r||e.getDefaultProperties(n),o)||this;return i.locked=!1,i.addClass("form-progress"+(n.isEditMode()?"":" live")),i.rendererNode=document.createElement("div"),i.rendererNode.className="input",i.update=u.Debouncer.create((function(){i.updateInSyncMode()}),10),i.update(),n.isEditMode()?i.initEditModeEvents():i.initViewModeEvents(),i}return s(e,t),e.getDefaultProperties=function(t){return this.addSizeProperties({name:"P",input:{color:new c.ThemePropertyValue("#ffffff"),backgroundColor:t.getThemeValues().getProperty("selection.borderColor").inherit(),borderColor:t.getThemeValues().getProperty("input.color").inherit(),borderStyle:new c.ThemePropertyValue("solid"),borderWidth:new c.ThemePropertyValue("3px"),font:{family:t.getThemeValues().getProperty("input.font.family").inherit(),size:t.getThemeValues().getProperty("input.font.size").inherit(),bold:t.getThemeValues().getProperty("input.font.bold").inherit(),italic:t.getThemeValues().getProperty("input.font.italic").inherit(),underline:t.getThemeValues().getProperty("input.font.underline").inherit(),align:t.getThemeValues().getProperty("input.font.align").inherit()}},formProgress:{showPageNumbers:!0,showPageTitles:!1,allowFreeNavigation:!1}})},e.prototype.clearFormatting=function(e){return void 0===e&&(e=!0),this.setProperty("input.color","#ffffff"),t.prototype.clearFormatting.call(this,e)},e.prototype.getTranslations=function(){return[]},e.prototype.getTypeId=function(){return a.NodeTypes.FORM_PROGRESS_INDICATOR},e.prototype.hasLabel=function(){return!1},e.prototype.hasValue=function(){return!1},e.prototype.getValue=function(){return null},e.prototype.setValue=function(t){return this},e.prototype.getNodeName=function(){return"Form progress"},e.prototype.getFieldsLayout=function(){return[{row:0,domNode:this.rendererNode,span:r.InputSpan.FULL}]},e.prototype.getRenderedCSS=function(){var t=c.cast(this.properties.input.color)||"inherit",e=c.cast(this.properties.input.backgroundColor),n=c.cast(this.properties.input.borderColor),r=parseInt(c.cast(this.properties.input.borderWidth))||0,o=c.cast(this.properties.input.borderStyle),i=c.cast(this.properties.input.font.family),s=parseInt(c.cast(this.properties.input.font.size))||0,a=c.cast(this.properties.input.font.bold)?"bold":"normal",u=c.cast(this.properties.input.font.italic)?"italic":"normal",l=c.cast(this.properties.input.font.underline)?"underline":"none",p=c.cast(this.properties.input.font.align),d=Math.floor(r/2+s/2+8),h=s+16+r+r,f=h+12+14,g=h+4;return this.root.setAttribute("data-text-align",p),"\n            .line {\n                height: "+r+"px;\n                border-top: "+r+"px "+o+" "+n+";\n                margin-top: "+d+"px;\n                &.visited {\n                    border-top-color: "+e+";\n                }\n            }\n            \n            &.has-labels .dot {\n                height: "+f+"px;\n            }\n            \n            .dot {\n                font-style: "+u+';\n                font-family: "'+i+'";\n                font-weight: '+a+";\n                font-size: "+s+"px;\n                \n                > .label {\n                    top: "+g+"px;\n                    color: "+n+";\n                }\n                \n                > .step {\n                    width: "+h+"px;\n                    height: "+h+"px;\n                    border: "+r+"px "+o+" "+n+";\n                    color: "+t+";\n                    text-decoration: "+l+";\n                }\n                \n                &.visited > .step {\n                    background-color: "+e+";\n                    border-color: "+e+" !important;\n                }\n                &.active + .line:before {\n                    top: -"+r+"px;\n                    border-top: "+r+"px "+o+" "+n+";\n                }\n                &.active ~ .dot > .step {\n                    color: "+n+";\n                }\n                &.active > .label {\n                    color: "+e+";\n                }\n            }\n        "},e.prototype.performTranslation=function(){this.updateInSyncMode()},e.prototype.sortPages=function(t,e){var n=t.getPageType(),r=e.getPageType();return n===r?0:(n===l.EPageType.FORM_PAGE?0:n===l.EPageType.THANK_YOU_PAGE?1:2)-(r===l.EPageType.FORM_PAGE?0:r===l.EPageType.THANK_YOU_PAGE?1:2)},e.prototype.updateInSyncMode=function(){for(;this.rendererNode.firstChild;)this.rendererNode.removeChild(this.rendererNode.firstChild);var t=!!this.properties.formProgress.showPageNumbers,e=!!this.properties.formProgress.showPageTitles;e?this.addClass("has-labels"):this.removeClass("has-labels");try{var r=this.document.getPages().sort(this.sortPages),o=0===r.filter((function(t){return t.getPageType()===l.EPageType.THANK_YOU_PAGE})).length,s=this.document.getBodies()[1].flatten().concat(this.document.getBodies()[2].flatten()).indexOf(this)>-1,a=void 0,u=void 0;s?(u=r.indexOf(this.document.getActivePage()),a=r[u]||null):(u=r.indexOf(this.getPage()),a=r[u]||null);var c=0,p=void 0;if(u>=0&&a){var d=a.getPageType()===l.EPageType.PAYMENTS_ERROR_PAGE,h=this.getProperty("formProgress.allowFreeNavigation");this.rendererNode.appendChild(this.createLine(!0));for(var f=0,g=r.length;f<g;f++){var m=t&&r[f].getPageType()===l.EPageType.FORM_PAGE&&r[f].isVisible();if(d||r[f].getPageType()!==l.EPageType.PAYMENTS_ERROR_PAGE){switch(m&&c++,p=n(this.rendererNode.appendChild(this.createDot(f<=u,f===u,m?String(c):"",e))).addClass(r[f].isVisible()?"visible":"hidden").addClass(this.document.isEditMode()?"":"enabled"),n(this.rendererNode.appendChild(this.createLine(f<=u))).addClass(r[f].isVisible()?"visible":"hidden"),r[f].getPageType()){case l.EPageType.THANK_YOU_PAGE:p.find(".step").html("<span class='vfb vfb-finish'></span>");break;case l.EPageType.PAYMENTS_ERROR_PAGE:p.find(".step").html("<span class='vfb vfb-warning'></span>");break;case l.EPageType.FORM_PAGE:p.attr("data-page-id",r[f].getId()).addClass(h&&!this.document.isEditMode()?"clickable":"")}e&&p.find(".label").text(i.I18n.translateViewFormText(this.getFormPageName(r[f]),"form-page"))}}o&&(p=n(this.rendererNode.appendChild(this.createDot(!1,!1,"",e))).addClass("visible").addClass(this.document.isEditMode()?"":"enabled"),n(this.rendererNode.appendChild(this.createLine(!1))).addClass("visible"),p.find(".step").html("<span class='vfb vfb-finish'></span>"),p.find(".label").text(i.I18n.translateViewFormText(i.I18n.translateApplicationText("Thank you","control-defaults.page"),"form-page"))),n(this.rendererNode).find(".dot.visible").first().addClass("first"),n(this.rendererNode).find(".dot.visible").last().addClass("last")}}catch(t){return}},e.prototype.getFormPageName=function(t){if(t.getPageType()===l.EPageType.FORM_PAGE||!0!==t.getProperty("dynamic"))return t.getProperty("name");switch(t.getPageType()){case l.EPageType.THANK_YOU_PAGE:return i.I18n.translateApplicationText("Thank you","control-defaults.page");case l.EPageType.PAYMENTS_ERROR_PAGE:default:return i.I18n.translateApplicationText("Error processing payment","control-defaults.page")}},e.prototype.createLine=function(t){var e=document.createElement("div");return e.className="line"+(t?" visited":""),e},e.prototype.createDot=function(t,e,n,r){var o=document.createElement("div");o.className="dot "+(t?"visited ":"")+(e?"active":"");var i=document.createElement("div");if(i.className="step",i.textContent=n,o.appendChild(i),r){var s=document.createElement("div");s.className="label",o.appendChild(s)}return o},e.prototype.onDrop=function(){this.update()},e.prototype.onParentPageMergedWithAnotherPage=function(){this.update()},e.prototype.onDeletedFromForm=function(){t.prototype.onDeletedFromForm.call(this),this.document.off(o.Document.EVENT_PAGE_INSERTED_OR_REMOVED,this.update),this.document.off(o.Document.EVENT_ACTIVE_PAGE_CHANGED,this.update),this.document.off(o.Document.EVENT_PAGE_NAME_CHANGED,this.update)},e.prototype.initEditModeEvents=function(){this.document.on(o.Document.EVENT_PAGE_INSERTED_OR_REMOVED,this.update),this.document.on(o.Document.EVENT_ACTIVE_PAGE_CHANGED,this.update),this.document.on(o.Document.EVENT_PAGE_NAME_CHANGED,this.update)},e.prototype.initViewModeEvents=function(){var t=this;this.document.on(o.Document.EVENT_ACTIVE_PAGE_CHANGED,this.update),this.document.on(o.Document.EVENT_PAGE_VISIBILITY_CHANGED,this.update),this.document.on(o.Document.EVENT_SUBMIT_DISPATCH,(function(){t.locked=!0})),this.document.on(o.Document.EVENT_RESET_DISPATCH,(function(){t.locked=!1})),this.document.on(o.Document.EVENT_RESET,(function(){t.locked=!1})),function(e){n(t.rendererNode).on("click",".dot.enabled[data-page-id]",(function(){if(!e.locked){var t=n(this).attr("data-page-id"),r=e.document.getElementById(t);r&&r.getTypeId()===a.NodeTypes.PAGE&&r.isVisible()&&e.document.setActivePage(r)}}))}(this)},e.prototype.supportsLabelInsideRendering=function(){return!1},e}(r.Input);e.FormProgressIndicator=p}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(0),n(3)],void 0===(o=function(t,e,n,r){Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.set=function(t,e,r){if(t!==this.item||e!==this.context||r!==this.domNode){window.$9=t;var o=this.item,i=(this.context,this.domNode);t!==o&&o&&o.onDeselect(),r!==i&&i&&n(i).removeClass("focused"),this.trigger("before-change"),this.item=t,this.context=e,this.domNode=r,t!==o&&t&&t.onSelect(),r!==i&&(r&&n(r).addClass("focused"),t&&t.onSelectSubfield(r)),this.trigger("change")}},e.prototype.getItem=function(){return this.item},e.prototype.getContext=function(){return this.context},e.prototype.getDOMNode=function(){return this.domNode},e}(r.EventEmitter);e.DocumentSelection=o}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(12),n(316),n(9),n(148)],void 0===(o=function(t,e,n,r,o,i){Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t){var e=this;this.modified=!0,this.loadedFonts={},this.properties={input:{backgroundColor:"#ffffff",borderColor:"#000000",borderRadius:"3px",borderStyle:"solid",borderWidth:"1px",color:"#3a3a3a",font:{align:o.TextAlign.LEFT,bold:!1,family:"Roboto",italic:!1,size:16,underline:!1}},label:{color:"#3a3a3a",align:o.LabelAlignment.TOP,width:3,font:{align:o.TextAlign.LEFT,bold:!1,family:"Roboto",italic:!1,size:16,underline:!1}}},this.document=t,this.cssDOMNode=document.createElement("style"),this.cssDOMNode.setAttribute("data-role","doctheme"),this.render=n.Debouncer.create((function(){e.renderSync()}),0)}return t.prototype.markAsModified=function(){this.modified=!0,this.render()},t.prototype.getRoot=function(){return this.cssDOMNode},t.prototype.renderSync=function(){var t=this;if(this.modified){for(var e=Object.create(null),n=this.document.flatten(),o=n.length,s=0;s<o;s++){var a=n[s].getRenderedCSS();a&&(e[a]?e[a].push(n[s].getId()):e[a]=[n[s].getId()])}var u=[];u.push(this.replaceCustomCSSVariables(this.document.getProperty("theme.customCSS"))),u.push("form > #blank-space { height: "+this.document.getSpaceBeforePage()+"px; }");var l=this.document.getProperty("theme.form.backgroundImage");l=l?"url("+l+")":"";var c=this.document.getProperty("theme.form.backgroundColor"),p=-1===["unset","transparent","",null].indexOf(c)?"background-color: "+c+";":"",d=this.document.getProperty("theme.error.color")||"red",h=this.document.getProperty("theme.error.backgroundColor")||"rgba(255, 169, 169, 0.3)";for(var f in u.push("\n        \n            .node.required {\n              > label:after,\n              &.address .shadow-wrapper > label:after,\n              &.name .shadow-wrapper > label:after\n              {\n                color: "+d+";\n              }\n            }\n\n            .node.error {\n                background-color: "+h+";\n                .error {\n                  color: "+d+";\n                }\n            }\n        \n            body[data-bootstrap-mode=view],\n            #editor-app > .editor-stage {\n                "+p+"\n                background-image: "+(l||"none")+";\n                background-repeat: "+(this.document.getProperty("theme.form.backgroundRepeat")||"repeat")+";\n                background-position: "+(this.document.getProperty("theme.form.backgroundPosition")||"center top")+";\n                background-size: "+(this.document.getProperty("theme.form.backgroundSize")||"100%")+";\n                background-attachment: "+(this.document.getProperty("theme.form.backgroundScroll")||"scroll")+";\n            }\n            \n            .node.container.page {\n                background-color: "+(this.document.getProperty("theme.page.backgroundColor")||"#ffffff")+";\n                border-color: "+(this.document.getProperty("theme.page.borderColor")||"#c6c6c6")+" !important;\n                border-radius: "+(this.document.getProperty("theme.page.borderRadius")||"0px")+";\n            }\n        "),e)u.push("#"+e[f].join(",#")+"{"+f+"}");var g=u.join(" ");if(g!==this.lastComputedCSS){for(var m in this.loadedFonts)this.loadedFonts.hasOwnProperty(m)&&(this.loadedFonts[m]=!1);for(var m in this.lastComputedCSS=g.replace(/font-family:([\s]+)?"([^"]+)"/g,(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.loadedFonts[e[2]]=!0,'font-family: "'+e[2]+'", sans-serif'})),this.loadedFonts)this.loadedFonts.hasOwnProperty(m)&&(this.loadedFonts[m]?i.FontsManager.loadFont(m,!0):i.FontsManager.unloadTempLoadedFontsList([m]));r.render(this.lastComputedCSS).then((function(e){t.cssDOMNode.textContent=e.css}),(function(e){t.cssDOMNode.textContent="/** LESS ERROR: "+String(JSON.stringify(e))+" **/"}))}this.modified=!1}},t.prototype.hasProperty=function(t){for(var e=String(t||"").split("."),n=this.properties,r=0,o=e.length;r<o;r++){if(void 0===n[e[r]])return!1;n=n[e[r]]}return void 0!==n},t.prototype.getProperty=function(t){if(!this.properties||!t)return null;for(var e=String(t||"").split("."),n=this.properties,r=null,o=0,i=e.length;o<i;o++){if(void 0===n[e[o]])return null;r=n[e[o]],n=n[e[o]]}return r},t.prototype.setProperty=function(t,e,n){for(var r=String(t||"").split("."),o=this.properties,i=0,s=r.length;i<s;i++){if(void 0===o)throw new Error("Illegal property "+JSON.stringify(t)+": Segment ");if(i===s-1)o[r[i]],o[r[i]]=e;else if(void 0===(o=o[r[i]]))throw new Error("Illegal property "+JSON.stringify(t)+": Segment #"+i+" - "+JSON.stringify(r[i])+" is not defined!")}return this.markAsModified(),this},t.prototype.replaceCustomCSSVariables=function(t){var e=this;return t.replace(/%{([^\n}]+)}/g,(function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[1],o=t[0];try{return o=e.document.getProperty("theme."+r),String(o)}catch(t){return o}}))},t}();e.DocumentTheme=s}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";(function(n,r){var o,i,s,a,u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};a=function(){return function t(e,n,r){function o(s,a){if(!n[s]){if(!e[s]){if(i)return i(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[s]={exports:{}};e[s][0].call(l.exports,(function(t){var n=e[s][1][t];return o(n||t)}),l,l.exports,t,e,n,r)}return n[s].exports}for(var i=!1,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,e,n){var r=t("./utils").addDataAttr,o=t("./browser");e.exports=function(t,e){r(e,o.currentScript(t)),void 0===e.isFileProtocol&&(e.isFileProtocol=/^(file|(chrome|safari)(-extension)?|resource|qrc|app):/.test(t.location.protocol)),e.async=e.async||!1,e.fileAsync=e.fileAsync||!1,e.poll=e.poll||(e.isFileProtocol?1e3:1500),e.env=e.env||("127.0.0.1"==t.location.hostname||"0.0.0.0"==t.location.hostname||"localhost"==t.location.hostname||t.location.port&&t.location.port.length>0||e.isFileProtocol?"development":"production");var n=/!dumpLineNumbers:(comments|mediaquery|all)/.exec(t.location.hash);n&&(e.dumpLineNumbers=n[1]),void 0===e.useFileCache&&(e.useFileCache=!0),void 0===e.onReady&&(e.onReady=!0),e.relativeUrls&&(e.rewriteUrls="all")}},{"./browser":3,"./utils":11}],2:[function(t,e,n){function r(t){t.filename&&console.warn(t),o.async||s.removeChild(a)}t("promise/polyfill");var o=t("../less/default-options")();if(window.less)for(key in window.less)window.less.hasOwnProperty(key)&&(o[key]=window.less[key]);t("./add-default-options")(window,o),o.plugins=o.plugins||[],window.LESS_PLUGINS&&(o.plugins=o.plugins.concat(window.LESS_PLUGINS));var i,s,a,u=e.exports=t("./index")(window,o);window.less=u,o.onReady&&(/!watch/.test(window.location.hash)&&u.watch(),o.async||(i="body { display: none !important }",s=document.head||document.getElementsByTagName("head")[0],(a=document.createElement("style")).type="text/css",a.styleSheet?a.styleSheet.cssText=i:a.appendChild(document.createTextNode(i)),s.appendChild(a)),u.registerStylesheetsImmediately(),u.pageLoadFinished=u.refresh("development"===u.env).then(r,r))},{"../less/default-options":17,"./add-default-options":1,"./index":8,"promise/polyfill":104}],3:[function(t,e,n){var r=t("./utils");e.exports={createCSS:function(t,e,n){var o=n.href||"",i="less:"+(n.title||r.extractId(o)),s=t.getElementById(i),a=!1,u=t.createElement("style");u.setAttribute("type","text/css"),n.media&&u.setAttribute("media",n.media),u.id=i,u.styleSheet||(u.appendChild(t.createTextNode(e)),a=null!==s&&s.childNodes.length>0&&u.childNodes.length>0&&s.firstChild.nodeValue===u.firstChild.nodeValue);var l=t.getElementsByTagName("head")[0];if(null===s||!1===a){var c=n&&n.nextSibling||null;c?c.parentNode.insertBefore(u,c):l.appendChild(u)}if(s&&!1===a&&s.parentNode.removeChild(s),u.styleSheet)try{u.styleSheet.cssText=e}catch(t){throw new Error("Couldn't reassign styleSheet.cssText.")}},currentScript:function(t){var e=t.document;return e.currentScript||function(){var t=e.getElementsByTagName("script");return t[t.length-1]}()}}},{"./utils":11}],4:[function(t,e,n){e.exports=function(t,e,n){var r=null;if("development"!==e.env)try{r=void 0===t.localStorage?null:t.localStorage}catch(t){}return{setCSS:function(t,e,o,i){if(r){n.info("saving "+t+" to cache.");try{r.setItem(t,i),r.setItem(t+":timestamp",e),o&&r.setItem(t+":vars",JSON.stringify(o))}catch(e){n.error('failed to save "'+t+'" to local storage for caching.')}}},getCSS:function(t,e,n){var o=r&&r.getItem(t),i=r&&r.getItem(t+":timestamp"),s=r&&r.getItem(t+":vars");if(n=n||{},s=s||"{}",i&&e.lastModified&&new Date(e.lastModified).valueOf()===new Date(i).valueOf()&&JSON.stringify(n)===s)return o}}}},{}],5:[function(t,e,n){var r=t("./utils"),o=t("./browser");e.exports=function(t,e,n){function i(e,i){var s,a,u="less-error-message:"+r.extractId(i||""),l=t.document.createElement("div"),c=[],p=e.filename||i,d=p.match(/([^\/]+(\?.*)?)$/)[1];l.id=u,l.className="less-error-message",a="<h3>"+(e.type||"Syntax")+"Error: "+(e.message||"There is an error in your .less file")+'</h3><p>in <a href="'+p+'">'+d+"</a> ";var h=function(t,e,n){void 0!==t.extract[e]&&c.push('<li><label>{line}</label><pre class="{class}">{content}</pre></li>'.replace(/\{line\}/,(parseInt(t.line,10)||0)+(e-1)).replace(/\{class\}/,n).replace(/\{content\}/,t.extract[e]))};e.line&&(h(e,0,""),h(e,1,"line"),h(e,2,""),a+="on line "+e.line+", column "+(e.column+1)+":</p><ul>"+c.join("")+"</ul>"),e.stack&&(e.extract||n.logLevel>=4)&&(a+="<br/>Stack Trace</br />"+e.stack.split("\n").slice(1).join("<br/>")),l.innerHTML=a,o.createCSS(t.document,[".less-error-message ul, .less-error-message li {","list-style-type: none;","margin-right: 15px;","padding: 4px 0;","margin: 0;","}",".less-error-message label {","font-size: 12px;","margin-right: 15px;","padding: 4px 0;","color: #cc7777;","}",".less-error-message pre {","color: #dd6666;","padding: 4px 0;","margin: 0;","display: inline-block;","}",".less-error-message pre.line {","color: #ff0000;","}",".less-error-message h3 {","font-size: 20px;","font-weight: bold;","padding: 15px 0 5px 0;","margin: 0;","}",".less-error-message a {","color: #10a","}",".less-error-message .error {","color: red;","font-weight: bold;","padding-bottom: 2px;","border-bottom: 1px dashed red;","}"].join("\n"),{title:"error-message"}),l.style.cssText=["font-family: Arial, sans-serif","border: 1px solid #e00","background-color: #eee","border-radius: 5px","-webkit-border-radius: 5px","-moz-border-radius: 5px","color: #e00","padding: 15px","margin-bottom: 15px"].join(";"),"development"===n.env&&(s=setInterval((function(){var e=t.document,n=e.body;n&&(e.getElementById(u)?n.replaceChild(l,e.getElementById(u)):n.insertBefore(l,n.firstChild),clearInterval(s))}),10))}function s(e){var n=t.document.getElementById("less-error-message:"+r.extractId(e));n&&n.parentNode.removeChild(n)}function a(t,r){var o=t.filename||r,i=[],s=(t.type||"Syntax")+"Error: "+(t.message||"There is an error in your .less file")+" in "+o,a=function(t,e,n){void 0!==t.extract[e]&&i.push("{line} {content}".replace(/\{line\}/,(parseInt(t.line,10)||0)+(e-1)).replace(/\{class\}/,n).replace(/\{content\}/,t.extract[e]))};t.line&&(a(t,0,""),a(t,1,"line"),a(t,2,""),s+=" on line "+t.line+", column "+(t.column+1)+":\n"+i.join("\n")),t.stack&&(t.extract||n.logLevel>=4)&&(s+="\nStack Trace\n"+t.stack),e.logger.error(s)}return{add:function(t,e){n.errorReporting&&"html"!==n.errorReporting?"console"===n.errorReporting?a(t,e):"function"==typeof n.errorReporting&&n.errorReporting("add",t,e):i(t,e)},remove:function(t){n.errorReporting&&"html"!==n.errorReporting?"console"===n.errorReporting||"function"==typeof n.errorReporting&&n.errorReporting("remove",t):s(t)}}}},{"./browser":3,"./utils":11}],6:[function(t,e,n){e.exports=function(e,n){var r=t("../less/environment/abstract-file-manager.js"),o={},i=function(){};return(i.prototype=new r).alwaysMakePathsAbsolute=function(){return!0},i.prototype.join=function(t,e){return t?this.extractUrlParts(e,t).path:e},i.prototype.doXHR=function(t,r,o,i){function s(e,n,r){e.status>=200&&e.status<300?n(e.responseText,e.getResponseHeader("Last-Modified")):"function"==typeof r&&r(e.status,t)}var a=new XMLHttpRequest,u=!e.isFileProtocol||e.fileAsync;"function"==typeof a.overrideMimeType&&a.overrideMimeType("text/css"),n.debug("XHR: Getting '"+t+"'"),a.open("GET",t,u),a.setRequestHeader("Accept",r||"text/x-less, text/css; q=0.9, */*; q=0.5"),a.send(null),e.isFileProtocol&&!e.fileAsync?0===a.status||a.status>=200&&a.status<300?o(a.responseText):i(a.status,t):u?a.onreadystatechange=function(){4==a.readyState&&s(a,o,i)}:s(a,o,i)},i.prototype.supports=function(t,e,n,r){return!0},i.prototype.clearFileCache=function(){o={}},i.prototype.loadFile=function(t,e,n,r){e&&!this.isPathAbsolute(t)&&(t=e+t),t=n.ext?this.tryAppendExtension(t,n.ext):t,n=n||{};var i=this.extractUrlParts(t,window.location.href).url,s=this;return new Promise((function(t,e){if(n.useFileCache&&o[i])try{var r=o[i];return t({contents:r,filename:i,webInfo:{lastModified:new Date}})}catch(t){return e({filename:i,message:"Error loading file "+i+" error was "+t.message})}s.doXHR(i,n.mime,(function(e,n){o[i]=e,t({contents:e,filename:i,webInfo:{lastModified:n}})}),(function(t,n){e({type:"File",message:"'"+n+"' wasn't found ("+t+")",href:i})}))}))},i}},{"../less/environment/abstract-file-manager.js":18}],7:[function(t,e,n){e.exports=function(){function e(){throw{type:"Runtime",message:"Image size functions are not supported in browser version of less"}}var n={"image-size":function(t){return e(),-1},"image-width":function(t){return e(),-1},"image-height":function(t){return e(),-1}};t("./../less/functions/function-registry").addMultiple(n)}},{"./../less/functions/function-registry":27}],8:[function(t,e,n){var r=t("./utils").addDataAttr,o=t("./browser");e.exports=function(e,n){function i(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function s(t,e){var n=Array.prototype.slice.call(arguments,2);return function(){var r=n.concat(Array.prototype.slice.call(arguments,0));return t.apply(e,r)}}function a(t){for(var e,r=c.getElementsByTagName("style"),o=0;o<r.length;o++)if((e=r[o]).type.match(y)){var a=i(n);a.modifyVars=t;var u=e.innerHTML||"";a.filename=c.location.href.replace(/#.*$/,""),p.render(u,a,s((function(t,e,n){e?g.add(e,"inline"):(t.type="text/css",t.styleSheet?t.styleSheet.cssText=n.css:t.innerHTML=n.css)}),null,e))}}function u(t,e,o,s,a){function u(n){var r=n.contents,i=n.filename,a=n.webInfo,u={currentDirectory:f.getPath(i),filename:i,rootFilename:i,rewriteUrls:l.rewriteUrls};if(u.entryPath=u.currentDirectory,u.rootpath=l.rootpath||u.currentDirectory,a){a.remaining=s;var c=m.getCSS(i,a,l.modifyVars);if(!o&&c)return a.local=!0,void e(null,c,r,t,a,i)}g.remove(i),l.rootFileInfo=u,p.render(r,l,(function(n,o){n?(n.href=i,e(n)):(m.setCSS(t.href,a.lastModified,l.modifyVars,o.css),e(null,o.css,r,t,a,i))}))}var l=i(n);r(l,t),l.mime=t.type,a&&(l.modifyVars=a),f.loadFile(t.href,null,l,d).then((function(t){u(t)})).catch((function(t){console.log(t),e(t)}))}function l(t,e,n){for(var r=0;r<p.sheets.length;r++)u(p.sheets[r],t,e,p.sheets.length-(r+1),n)}var c=e.document,p=t("../less")();p.options=n;var d=p.environment,h=t("./file-manager")(n,p.logger),f=new h;d.addFileManager(f),p.FileManager=h,p.PluginLoader=t("./plugin-loader"),t("./log-listener")(p,n);var g=t("./error-reporting")(e,p,n),m=p.cache=n.cache||t("./cache")(e,n,p.logger);t("./image-size")(p.environment),n.functions&&p.functions.functionRegistry.addMultiple(n.functions);var y=/^text\/(x-)?less$/;return p.watch=function(){return p.watchMode||(p.env="development","development"===p.env&&(p.watchTimer=setInterval((function(){p.watchMode&&(f.clearFileCache(),l((function(t,n,r,i,s){t?g.add(t,t.href||i.href):n&&o.createCSS(e.document,n,i)})))}),n.poll))),this.watchMode=!0,!0},p.unwatch=function(){return clearInterval(p.watchTimer),this.watchMode=!1,!1},p.registerStylesheetsImmediately=function(){var t=c.getElementsByTagName("link");p.sheets=[];for(var e=0;e<t.length;e++)("stylesheet/less"===t[e].rel||t[e].rel.match(/stylesheet/)&&t[e].type.match(y))&&p.sheets.push(t[e])},p.registerStylesheets=function(){return new Promise((function(t,e){p.registerStylesheetsImmediately(),t()}))},p.modifyVars=function(t){return p.refresh(!0,t,!1)},p.refresh=function(t,n,r){return(t||r)&&!1!==r&&f.clearFileCache(),new Promise((function(r,i){var s,u,c,d;s=u=new Date,0===(d=p.sheets.length)?(u=new Date,c=u-s,p.logger.info("Less has finished and no sheets were loaded."),r({startTime:s,endTime:u,totalMilliseconds:c,sheets:p.sheets.length})):l((function(t,n,a,l,h){return t?(g.add(t,t.href||l.href),void i(t)):(p.logger.info(h.local?"Loading "+l.href+" from cache.":"Rendered "+l.href+" successfully."),o.createCSS(e.document,n,l),p.logger.info("CSS for "+l.href+" generated in "+(new Date-u)+"ms"),0==--d&&(c=new Date-s,p.logger.info("Less has finished. CSS generated in "+c+"ms"),r({startTime:s,endTime:u,totalMilliseconds:c,sheets:p.sheets.length})),void(u=new Date))}),t,n),a(n)}))},p.refreshStyles=a,p}},{"../less":37,"./browser":3,"./cache":4,"./error-reporting":5,"./file-manager":6,"./image-size":7,"./log-listener":9,"./plugin-loader":10,"./utils":11}],9:[function(t,e,n){e.exports=function(t,e){e.logLevel=void 0!==e.logLevel?e.logLevel:"development"===e.env?3:1,e.loggers||(e.loggers=[{debug:function(t){e.logLevel>=4&&console.log(t)},info:function(t){e.logLevel>=3&&console.log(t)},warn:function(t){e.logLevel>=2&&console.warn(t)},error:function(t){e.logLevel>=1&&console.error(t)}}]);for(var n=0;n<e.loggers.length;n++)t.logger.addListener(e.loggers[n])}},{}],10:[function(t,e,n){var r=t("../less/environment/abstract-plugin-loader.js"),o=function(t){this.less=t};(o.prototype=new r).loadPlugin=function(t,e,n,r,o){return new Promise((function(i,s){o.loadFile(t,e,n,r).then(i).catch(s)}))},e.exports=o},{"../less/environment/abstract-plugin-loader.js":19}],11:[function(t,e,n){e.exports={extractId:function(t){return t.replace(/^[a-z-]+:\/+?[^\/]+/,"").replace(/[\?\&]livereload=\w+/,"").replace(/^\//,"").replace(/\.[a-zA-Z]+$/,"").replace(/[^\.\w-]+/g,"-").replace(/\./g,":")},addDataAttr:function(t,e){for(var n in e.dataset)if(e.dataset.hasOwnProperty(n))if("env"===n||"dumpLineNumbers"===n||"rootpath"===n||"errorReporting"===n)t[n]=e.dataset[n];else try{t[n]=JSON.parse(e.dataset[n])}catch(t){}}}},{}],12:[function(t,e,n){e.exports={Math:{ALWAYS:0,PARENS_DIVISION:1,PARENS:2,STRICT_LEGACY:3},RewriteUrls:{OFF:0,LOCAL:1,ALL:2}}},{}],13:[function(t,e,n){function r(t){return!/^(?:[a-z-]+:|\/|#)/i.test(t)}function o(t){return"."===t.charAt(0)}var i={};e.exports=i;var s=t("./constants"),a=function(t,e,n){if(t)for(var r=0;r<n.length;r++)t.hasOwnProperty(n[r])&&(e[n[r]]=t[n[r]])},u=["paths","rewriteUrls","rootpath","strictImports","insecure","dumpLineNumbers","compress","syncImport","chunkInput","mime","useFileCache","processImports","pluginManager"];i.Parse=function(t){a(t,this,u),"string"==typeof this.paths&&(this.paths=[this.paths])};var l=["paths","compress","ieCompat","math","strictUnits","sourceMap","importMultiple","urlArgs","javascriptEnabled","pluginManager","importantScope","rewriteUrls"];i.Eval=function(t,e){a(t,this,l),"string"==typeof this.paths&&(this.paths=[this.paths]),this.frames=e||[],this.importantScope=this.importantScope||[]},i.Eval.prototype.enterCalc=function(){this.calcStack||(this.calcStack=[]),this.calcStack.push(!0),this.inCalc=!0},i.Eval.prototype.exitCalc=function(){this.calcStack.pop(),this.calcStack||(this.inCalc=!1)},i.Eval.prototype.inParenthesis=function(){this.parensStack||(this.parensStack=[]),this.parensStack.push(!0)},i.Eval.prototype.outOfParenthesis=function(){this.parensStack.pop()},i.Eval.prototype.inCalc=!1,i.Eval.prototype.mathOn=!0,i.Eval.prototype.isMathOn=function(t){return!!this.mathOn&&!!("/"!==t||this.math===s.Math.ALWAYS||this.parensStack&&this.parensStack.length)&&(!(this.math>s.Math.PARENS_DIVISION)||this.parensStack&&this.parensStack.length)},i.Eval.prototype.pathRequiresRewrite=function(t){return(this.rewriteUrls===s.RewriteUrls.LOCAL?o:r)(t)},i.Eval.prototype.rewritePath=function(t,e){var n;return e=e||"",n=this.normalizePath(e+t),o(t)&&r(e)&&!1===o(n)&&(n="./"+n),n},i.Eval.prototype.normalizePath=function(t){var e,n=t.split("/").reverse();for(t=[];0!==n.length;)switch(e=n.pop()){case".":break;case"..":0===t.length||".."===t[t.length-1]?t.push(e):t.pop();break;default:t.push(e)}return t.join("/")}},{"./constants":12}],14:[function(t,e,n){e.exports={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}},{}],15:[function(t,e,n){e.exports={colors:t("./colors"),unitConversions:t("./unit-conversions")}},{"./colors":14,"./unit-conversions":16}],16:[function(t,e,n){e.exports={length:{m:1,cm:.01,mm:.001,in:.0254,px:.0254/96,pt:.0254/72,pc:.0254/72*12},duration:{s:1,ms:.001},angle:{rad:1/(2*Math.PI),deg:1/360,grad:.0025,turn:1}}},{}],17:[function(t,e,n){e.exports=function(){return{javascriptEnabled:!1,depends:!1,compress:!1,lint:!1,paths:[],color:!0,strictImports:!1,insecure:!1,rootpath:"",rewriteUrls:!1,ieCompat:!1,math:0,strictUnits:!1,globalVars:null,modifyVars:null,urlArgs:""}}},{}],18:[function(t,e,n){var r=function(){};r.prototype.getPath=function(t){var e=t.lastIndexOf("?");return e>0&&(t=t.slice(0,e)),(e=t.lastIndexOf("/"))<0&&(e=t.lastIndexOf("\\")),e<0?"":t.slice(0,e+1)},r.prototype.tryAppendExtension=function(t,e){return/(\.[a-z]*$)|([\?;].*)$/.test(t)?t:t+e},r.prototype.tryAppendLessExtension=function(t){return this.tryAppendExtension(t,".less")},r.prototype.supportsSync=function(){return!1},r.prototype.alwaysMakePathsAbsolute=function(){return!1},r.prototype.isPathAbsolute=function(t){return/^(?:[a-z-]+:|\/|\\|#)/i.test(t)},r.prototype.join=function(t,e){return t?t+e:e},r.prototype.pathDiff=function(t,e){var n,r,o,i,s=this.extractUrlParts(t),a=this.extractUrlParts(e),u="";if(s.hostPart!==a.hostPart)return"";for(r=Math.max(a.directories.length,s.directories.length),n=0;n<r&&a.directories[n]===s.directories[n];n++);for(i=a.directories.slice(n),o=s.directories.slice(n),n=0;n<i.length-1;n++)u+="../";for(n=0;n<o.length-1;n++)u+=o[n]+"/";return u},r.prototype.extractUrlParts=function(t,e){var n,r,o=/^((?:[a-z-]+:)?\/{2}(?:[^\/\?#]*\/)|([\/\\]))?((?:[^\/\\\?#]*[\/\\])*)([^\/\\\?#]*)([#\?].*)?$/i,i=t.match(o),s={},a=[],u=[];if(!i)throw new Error("Could not parse sheet href - '"+t+"'");if(e&&(!i[1]||i[2])){if(!(r=e.match(o)))throw new Error("Could not parse page url - '"+e+"'");i[1]=i[1]||r[1]||"",i[2]||(i[3]=r[3]+i[3])}if(i[3])for(a=i[3].replace(/\\/g,"/").split("/"),n=0;n<a.length;n++)".."===a[n]?u.pop():"."!==a[n]&&u.push(a[n]);return s.hostPart=i[1],s.directories=u,s.rawPath=(i[1]||"")+a.join("/"),s.path=(i[1]||"")+u.join("/"),s.filename=i[4],s.fileUrl=s.path+(i[4]||""),s.url=s.fileUrl+(i[5]||""),s},e.exports=r},{}],19:[function(t,e,n){var r=t("../functions/function-registry"),o=t("../less-error"),i=function(){this.require=function(){return null}};i.prototype.evalPlugin=function(t,e,n,i,s){var a,u,l,c,p,d;c=e.pluginManager,s&&(p="string"==typeof s?s:s.filename);var h=(new this.less.FileManager).extractUrlParts(p).filename;if(p&&(u=c.get(p))){if(d=this.trySetOptions(u,p,h,i))return d;try{u.use&&u.use.call(this.context,u)}catch(t){return t.message=t.message||"Error during @plugin call",new o(t,n,p)}return u}l={exports:{},pluginManager:c,fileInfo:s},a=r.create();try{new Function("module","require","registerPlugin","functions","tree","less","fileInfo",t)(l,this.require(p),(function(t){u=t}),a,this.less.tree,this.less,s)}catch(t){return new o(t,n,p)}if(u||(u=l.exports),(u=this.validatePlugin(u,p,h))instanceof o)return u;if(!u)return new o({message:"Not a valid plugin"},n,p);if(u.imports=n,u.filename=p,(!u.minVersion||this.compareVersion("3.0.0",u.minVersion)<0)&&(d=this.trySetOptions(u,p,h,i)))return d;if(c.addPlugin(u,s.filename,a),u.functions=a.getLocalFunctions(),d=this.trySetOptions(u,p,h,i))return d;try{u.use&&u.use.call(this.context,u)}catch(t){return t.message=t.message||"Error during @plugin call",new o(t,n,p)}return u},i.prototype.trySetOptions=function(t,e,n,r){if(r&&!t.setOptions)return new o({message:"Options have been provided but the plugin "+n+" does not support any options."});try{t.setOptions&&t.setOptions(r)}catch(t){return new o(t)}},i.prototype.validatePlugin=function(t,e,n){return t?("function"==typeof t&&(t=new t),t.minVersion&&this.compareVersion(t.minVersion,this.less.version)<0?new o({message:"Plugin "+n+" requires version "+this.versionToString(t.minVersion)}):t):null},i.prototype.compareVersion=function(t,e){"string"==typeof t&&(t=t.match(/^(\d+)\.?(\d+)?\.?(\d+)?/)).shift();for(var n=0;n<t.length;n++)if(t[n]!==e[n])return parseInt(t[n])>parseInt(e[n])?-1:1;return 0},i.prototype.versionToString=function(t){for(var e="",n=0;n<t.length;n++)e+=(e?".":"")+t[n];return e},i.prototype.printUsage=function(t){for(var e=0;e<t.length;e++){var n=t[e];n.printUsage&&n.printUsage()}},e.exports=i},{"../functions/function-registry":27,"../less-error":38}],20:[function(t,e,n){var r=t("../logger"),o=function(t,e){this.fileManagers=e||[],t=t||{};for(var n=[],r=n.concat(["encodeBase64","mimeLookup","charsetLookup","getSourceMapGenerator"]),o=0;o<r.length;o++){var i=r[o],s=t[i];s?this[i]=s.bind(t):o<n.length&&this.warn("missing required function in environment - "+i)}};o.prototype.getFileManager=function(t,e,n,o,i){t||r.warn("getFileManager called with no filename.. Please report this issue. continuing."),null==e&&r.warn("getFileManager called with null directory.. Please report this issue. continuing.");var s=this.fileManagers;n.pluginManager&&(s=[].concat(s).concat(n.pluginManager.getFileManagers()));for(var a=s.length-1;a>=0;a--){var u=s[a];if(u[i?"supportsSync":"supports"](t,e,n,o))return u}return null},o.prototype.addFileManager=function(t){this.fileManagers.push(t)},o.prototype.clearFileManagers=function(){this.fileManagers=[]},e.exports=o},{"../logger":39}],21:[function(t,e,n){var r=t("./function-registry"),o=t("../tree/anonymous"),i=t("../tree/keyword");r.addMultiple({boolean:function(t){return t?i.True:i.False},if:function(t,e,n){return t?e:n||new o}})},{"../tree/anonymous":50,"../tree/keyword":70,"./function-registry":27}],22:[function(t,e,n){function r(t,e,n){var r,i,s,a,u=e.alpha,l=n.alpha,c=[];s=l+u*(1-l);for(var p=0;p<3;p++)a=t(r=e.rgb[p]/255,i=n.rgb[p]/255),s&&(a=(l*i+u*(r-l*(r+i-a)))/s),c[p]=255*a;return new o(c,s)}var o=t("../tree/color"),i=t("./function-registry"),s={multiply:function(t,e){return t*e},screen:function(t,e){return t+e-t*e},overlay:function(t,e){return(t*=2)<=1?s.multiply(t,e):s.screen(t-1,e)},softlight:function(t,e){var n=1,r=t;return e>.5&&(r=1,n=t>.25?Math.sqrt(t):((16*t-12)*t+4)*t),t-(1-2*e)*r*(n-t)},hardlight:function(t,e){return s.overlay(e,t)},difference:function(t,e){return Math.abs(t-e)},exclusion:function(t,e){return t+e-2*t*e},average:function(t,e){return(t+e)/2},negation:function(t,e){return 1-Math.abs(t+e-1)}};for(var a in s)s.hasOwnProperty(a)&&(r[a]=r.bind(null,s[a]));i.addMultiple(r)},{"../tree/color":55,"./function-registry":27}],23:[function(t,e,n){function r(t){return Math.min(1,Math.max(0,t))}function o(t,e){var n=s.hsla(e.h,e.s,e.l,e.a);if(n)return n.value=t.value&&/^(rgb|hsl)/.test(t.value)?t.value:"rgb",n}function i(t){if(t instanceof a)return parseFloat(t.unit.is("%")?t.value/100:t.value);if("number"==typeof t)return t;throw{type:"Argument",message:"color functions take numbers as parameters"}}var s,a=t("../tree/dimension"),u=t("../tree/color"),l=t("../tree/quoted"),c=t("../tree/anonymous"),p=t("./function-registry");s={rgb:function(t,e,n){var r=s.rgba(t,e,n,1);if(r)return r.value="rgb",r},rgba:function(t,e,n,r){try{if(t instanceof u)return r=e?i(e):t.alpha,new u(t.rgb,r,"rgba");var o=[t,e,n].map((function(t){return function(t,e){return t instanceof a&&t.unit.is("%")?parseFloat(t.value*e/100):i(t)}(t,255)}));return r=i(r),new u(o,r,"rgba")}catch(t){}},hsl:function(t,e,n){var r=s.hsla(t,e,n,1);if(r)return r.value="hsl",r},hsla:function(t,e,n,o){function s(t){return 6*(t=t<0?t+1:t>1?t-1:t)<1?a+(l-a)*t*6:2*t<1?l:3*t<2?a+(l-a)*(2/3-t)*6:a}try{if(t instanceof u)return o=e?i(e):t.alpha,new u(t.rgb,o,"hsla");var a,l;t=i(t)%360/360,e=r(i(e)),n=r(i(n)),o=r(i(o)),a=2*n-(l=n<=.5?n*(e+1):n+e-n*e);var c=[255*s(t+1/3),255*s(t),255*s(t-1/3)];return o=i(o),new u(c,o,"hsla")}catch(t){}},hsv:function(t,e,n){return s.hsva(t,e,n,1)},hsva:function(t,e,n,r){var o,a;t=i(t)%360/360*360,e=i(e),n=i(n),r=i(r);var u=[n,n*(1-e),n*(1-(a=t/60-(o=Math.floor(t/60%6)))*e),n*(1-(1-a)*e)],l=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]];return s.rgba(255*u[l[o][0]],255*u[l[o][1]],255*u[l[o][2]],r)},hue:function(t){return new a(t.toHSL().h)},saturation:function(t){return new a(100*t.toHSL().s,"%")},lightness:function(t){return new a(100*t.toHSL().l,"%")},hsvhue:function(t){return new a(t.toHSV().h)},hsvsaturation:function(t){return new a(100*t.toHSV().s,"%")},hsvvalue:function(t){return new a(100*t.toHSV().v,"%")},red:function(t){return new a(t.rgb[0])},green:function(t){return new a(t.rgb[1])},blue:function(t){return new a(t.rgb[2])},alpha:function(t){return new a(t.toHSL().a)},luma:function(t){return new a(t.luma()*t.alpha*100,"%")},luminance:function(t){var e=.2126*t.rgb[0]/255+.7152*t.rgb[1]/255+.0722*t.rgb[2]/255;return new a(e*t.alpha*100,"%")},saturate:function(t,e,n){if(!t.rgb)return null;var i=t.toHSL();return i.s+=void 0!==n&&"relative"===n.value?i.s*e.value/100:e.value/100,i.s=r(i.s),o(t,i)},desaturate:function(t,e,n){var i=t.toHSL();return i.s-=void 0!==n&&"relative"===n.value?i.s*e.value/100:e.value/100,i.s=r(i.s),o(t,i)},lighten:function(t,e,n){var i=t.toHSL();return i.l+=void 0!==n&&"relative"===n.value?i.l*e.value/100:e.value/100,i.l=r(i.l),o(t,i)},darken:function(t,e,n){var i=t.toHSL();return i.l-=void 0!==n&&"relative"===n.value?i.l*e.value/100:e.value/100,i.l=r(i.l),o(t,i)},fadein:function(t,e,n){var i=t.toHSL();return i.a+=void 0!==n&&"relative"===n.value?i.a*e.value/100:e.value/100,i.a=r(i.a),o(t,i)},fadeout:function(t,e,n){var i=t.toHSL();return i.a-=void 0!==n&&"relative"===n.value?i.a*e.value/100:e.value/100,i.a=r(i.a),o(t,i)},fade:function(t,e){var n=t.toHSL();return n.a=e.value/100,n.a=r(n.a),o(t,n)},spin:function(t,e){var n=t.toHSL(),r=(n.h+e.value)%360;return n.h=r<0?360+r:r,o(t,n)},mix:function(t,e,n){t.toHSL&&e.toHSL||(console.log(e.type),console.dir(e)),n||(n=new a(50));var r=n.value/100,o=2*r-1,i=t.toHSL().a-e.toHSL().a,s=((o*i==-1?o:(o+i)/(1+o*i))+1)/2,l=1-s,c=[t.rgb[0]*s+e.rgb[0]*l,t.rgb[1]*s+e.rgb[1]*l,t.rgb[2]*s+e.rgb[2]*l],p=t.alpha*r+e.alpha*(1-r);return new u(c,p)},greyscale:function(t){return s.desaturate(t,new a(100))},contrast:function(t,e,n,r){if(!t.rgb)return null;if(void 0===n&&(n=s.rgba(255,255,255,1)),void 0===e&&(e=s.rgba(0,0,0,1)),e.luma()>n.luma()){var o=n;n=e,e=o}return r=void 0===r?.43:i(r),t.luma()<r?n:e},argb:function(t){return new c(t.toARGB())},color:function(t){if(t instanceof l&&/^#([A-Fa-f0-9]{8}|[A-Fa-f0-9]{6}|[A-Fa-f0-9]{3,4})$/i.test(t.value)){var e=t.value.slice(1);return new u(e,void 0,"#"+e)}if(t instanceof u||(t=u.fromKeyword(t.value)))return t.value=void 0,t;throw{type:"Argument",message:"argument must be a color keyword or 3|4|6|8 digit hex e.g. #FFF"}},tint:function(t,e){return s.mix(s.rgb(255,255,255),t,e)},shade:function(t,e){return s.mix(s.rgb(0,0,0),t,e)}},p.addMultiple(s)},{"../tree/anonymous":50,"../tree/color":55,"../tree/dimension":62,"../tree/quoted":80,"./function-registry":27}],24:[function(t,e,n){e.exports=function(e){var n=t("../tree/quoted"),r=t("../tree/url"),o=t("../utils"),i=t("./function-registry"),s=function(t,e){return new r(e,t.index,t.currentFileInfo).eval(t.context)},a=t("../logger");i.add("data-uri",(function(t,i){i||(i=t,t=null);var u=t&&t.value,l=i.value,c=this.currentFileInfo,p=c.rewriteUrls?c.currentDirectory:c.entryPath,d=l.indexOf("#"),h="";-1!==d&&(h=l.slice(d),l=l.slice(0,d));var f=o.clone(this.context);f.rawBuffer=!0;var g=e.getFileManager(l,p,f,e,!0);if(!g)return s(this,i);var m=!1;if(t)m=/;base64$/.test(u);else{if("image/svg+xml"===(u=e.mimeLookup(l)))m=!1;else{var y=e.charsetLookup(u);m=["US-ASCII","UTF-8"].indexOf(y)<0}m&&(u+=";base64")}var v=g.loadFileSync(l,p,f,e);if(!v.contents)return a.warn("Skipped data-uri embedding of "+l+" because file not found"),s(this,i||t);var b=v.contents;if(m&&!e.encodeBase64)return s(this,i);var C="data:"+u+","+(b=m?e.encodeBase64(b):encodeURIComponent(b))+h;return C.length>=32768&&!1!==this.context.ieCompat?(a.warn("Skipped data-uri embedding of "+l+" because its size ("+C.length+" characters) exceeds IE8-safe 32768 characters!"),s(this,i||t)):new r(new n('"'+C+'"',C,!1,this.index,this.currentFileInfo),this.index,this.currentFileInfo)}))}},{"../logger":39,"../tree/quoted":80,"../tree/url":85,"../utils":89,"./function-registry":27}],25:[function(t,e,n){var r=t("../tree/keyword"),o={eval:function(){var t=this.value_,e=this.error_;if(e)throw e;if(null!=t)return t?r.True:r.False},value:function(t){this.value_=t},error:function(t){this.error_=t},reset:function(){this.value_=this.error_=null}};t("./function-registry").add("default",o.eval.bind(o)),e.exports=o},{"../tree/keyword":70,"./function-registry":27}],26:[function(t,e,n){var r=t("../tree/expression"),o=function(t,e,n,r){this.name=t.toLowerCase(),this.index=n,this.context=e,this.currentFileInfo=r,this.func=e.frames[0].functionRegistry.get(this.name)};o.prototype.isValid=function(){return Boolean(this.func)},o.prototype.call=function(t){return Array.isArray(t)&&(t=t.filter((function(t){return"Comment"!==t.type})).map((function(t){if("Expression"===t.type){var e=t.value.filter((function(t){return"Comment"!==t.type}));return 1===e.length?e[0]:new r(e)}return t}))),this.func.apply(this,t)},e.exports=o},{"../tree/expression":64}],27:[function(t,e,n){e.exports=function t(e){return{_data:{},add:function(t,e){t=t.toLowerCase(),this._data.hasOwnProperty(t),this._data[t]=e},addMultiple:function(t){Object.keys(t).forEach(function(e){this.add(e,t[e])}.bind(this))},get:function(t){return this._data[t]||e&&e.get(t)},getLocalFunctions:function(){return this._data},inherit:function(){return t(this)},create:function(e){return t(e)}}}(null)},{}],28:[function(t,e,n){e.exports=function(e){var n={functionRegistry:t("./function-registry"),functionCaller:t("./function-caller")};return t("./boolean"),t("./default"),t("./color"),t("./color-blending"),t("./data-uri")(e),t("./list"),t("./math"),t("./number"),t("./string"),t("./svg")(e),t("./types"),n}},{"./boolean":21,"./color":23,"./color-blending":22,"./data-uri":24,"./default":25,"./function-caller":26,"./function-registry":27,"./list":29,"./math":31,"./number":32,"./string":33,"./svg":34,"./types":35}],29:[function(t,e,n){var r=t("../tree/comment"),o=t("../tree/dimension"),i=t("../tree/declaration"),s=t("../tree/expression"),a=t("../tree/ruleset"),u=t("../tree/selector"),l=t("../tree/element"),c=t("./function-registry"),p=function(t){return Array.isArray(t.value)?t.value:Array(t)};c.addMultiple({_SELF:function(t){return t},extract:function(t,e){return e=e.value-1,p(t)[e]},length:function(t){return new o(p(t).length)},range:function(t,e,n){var r,i,a=1,u=[];e?(i=e,r=t.value,n&&(a=n.value)):(r=1,i=t);for(var l=r;l<=i.value;l+=a)u.push(new o(l,i.unit));return new s(u)},each:function(t,e){var n,s,c=[];s=t.value?Array.isArray(t.value)?t.value:[t.value]:t.ruleset?t.ruleset.rules:t.rules?t.rules:Array.isArray(t)?t:[t];var p="@value",d="@key",h="@index";e.params?(p=e.params[0]&&e.params[0].name,d=e.params[1]&&e.params[1].name,h=e.params[2]&&e.params[2].name,e=e.rules):e=e.ruleset;for(var f=0;f<s.length;f++){var g,m,y=s[f];y instanceof i?(g="string"==typeof y.name?y.name:y.name[0].value,m=y.value):(g=new o(f+1),m=y),y instanceof r||(n=e.rules.slice(0),p&&n.push(new i(p,m,!1,!1,this.index,this.currentFileInfo)),h&&n.push(new i(h,new o(f+1),!1,!1,this.index,this.currentFileInfo)),d&&n.push(new i(d,g,!1,!1,this.index,this.currentFileInfo)),c.push(new a([new u([new l("","&")])],n,e.strictImports,e.visibilityInfo())))}return new a([new u([new l("","&")])],c,e.strictImports,e.visibilityInfo()).eval(this.context)}})},{"../tree/comment":57,"../tree/declaration":60,"../tree/dimension":62,"../tree/element":63,"../tree/expression":64,"../tree/ruleset":81,"../tree/selector":82,"./function-registry":27}],30:[function(t,e,n){var r=t("../tree/dimension"),o=function(){};o._math=function(t,e,n){if(!(n instanceof r))throw{type:"Argument",message:"argument must be a number"};return null==e?e=n.unit:n=n.unify(),new r(t(parseFloat(n.value)),e)},e.exports=o},{"../tree/dimension":62}],31:[function(t,e,n){var r=t("./function-registry"),o=t("./math-helper.js"),i={ceil:null,floor:null,sqrt:null,abs:null,tan:"",sin:"",cos:"",atan:"rad",asin:"rad",acos:"rad"};for(var s in i)i.hasOwnProperty(s)&&(i[s]=o._math.bind(null,Math[s],i[s]));i.round=function(t,e){var n=void 0===e?0:e.value;return o._math((function(t){return t.toFixed(n)}),null,t)},r.addMultiple(i)},{"./function-registry":27,"./math-helper.js":30}],32:[function(t,e,n){var r=t("../tree/dimension"),o=t("../tree/anonymous"),i=t("./function-registry"),s=t("./math-helper.js"),a=function(t,e){switch((e=Array.prototype.slice.call(e)).length){case 0:throw{type:"Argument",message:"one or more arguments required"}}var n,i,s,a,u,l,c,p,d=[],h={};for(n=0;n<e.length;n++)if((s=e[n])instanceof r)if(a=""===s.unit.toString()&&void 0!==p?new r(s.value,p).unify():s.unify(),c=""!==(l=""===a.unit.toString()&&void 0!==c?c:a.unit.toString())&&void 0===c||""!==l&&""===d[0].unify().unit.toString()?l:c,p=""!==l&&void 0===p?s.unit.toString():p,void 0!==(i=void 0!==h[""]&&""!==l&&l===c?h[""]:h[l]))u=""===d[i].unit.toString()&&void 0!==p?new r(d[i].value,p).unify():d[i].unify(),(t&&a.value<u.value||!t&&a.value>u.value)&&(d[i]=s);else{if(void 0!==c&&l!==c)throw{type:"Argument",message:"incompatible types"};h[l]=d.length,d.push(s)}else Array.isArray(e[n].value)&&Array.prototype.push.apply(e,Array.prototype.slice.call(e[n].value));return 1==d.length?d[0]:(e=d.map((function(t){return t.toCSS(this.context)})).join(this.context.compress?",":", "),new o((t?"min":"max")+"("+e+")"))};i.addMultiple({min:function(){return a(!0,arguments)},max:function(){return a(!1,arguments)},convert:function(t,e){return t.convertTo(e.value)},pi:function(){return new r(Math.PI)},mod:function(t,e){return new r(t.value%e.value,t.unit)},pow:function(t,e){if("number"==typeof t&&"number"==typeof e)t=new r(t),e=new r(e);else if(!(t instanceof r&&e instanceof r))throw{type:"Argument",message:"arguments must be numbers"};return new r(Math.pow(t.value,e.value),t.unit)},percentage:function(t){return s._math((function(t){return 100*t}),"%",t)}})},{"../tree/anonymous":50,"../tree/dimension":62,"./function-registry":27,"./math-helper.js":30}],33:[function(t,e,n){var r=t("../tree/quoted"),o=t("../tree/anonymous"),i=t("../tree/javascript");t("./function-registry").addMultiple({e:function(t){return new o(t instanceof i?t.evaluated:t.value)},escape:function(t){return new o(encodeURI(t.value).replace(/=/g,"%3D").replace(/:/g,"%3A").replace(/#/g,"%23").replace(/;/g,"%3B").replace(/\(/g,"%28").replace(/\)/g,"%29"))},replace:function(t,e,n,o){var i=t.value;return n="Quoted"===n.type?n.value:n.toCSS(),i=i.replace(new RegExp(e.value,o?o.value:""),n),new r(t.quote||"",i,t.escaped)},"%":function(t){for(var e=Array.prototype.slice.call(arguments,1),n=t.value,o=0;o<e.length;o++)n=n.replace(/%[sda]/i,(function(t){var n="Quoted"===e[o].type&&t.match(/s/i)?e[o].value:e[o].toCSS();return t.match(/[A-Z]$/)?encodeURIComponent(n):n}));return n=n.replace(/%%/g,"%"),new r(t.quote||"",n,t.escaped)}})},{"../tree/anonymous":50,"../tree/javascript":68,"../tree/quoted":80,"./function-registry":27}],34:[function(t,e,n){e.exports=function(e){var n=t("../tree/dimension"),r=t("../tree/color"),o=t("../tree/expression"),i=t("../tree/quoted"),s=t("../tree/url");t("./function-registry").add("svg-gradient",(function(t){function e(){throw{type:"Argument",message:"svg-gradient expects direction, start_color [start_position], [color position,]..., end_color [end_position] or direction, color list"}}var a,u,l,c,p,d,h,f,g="linear",m='x="0" y="0" width="1" height="1"',y={compress:!1},v=t.toCSS(y);switch(2==arguments.length?(arguments[1].value.length<2&&e(),a=arguments[1].value):arguments.length<3?e():a=Array.prototype.slice.call(arguments,1),v){case"to bottom":u='x1="0%" y1="0%" x2="0%" y2="100%"';break;case"to right":u='x1="0%" y1="0%" x2="100%" y2="0%"';break;case"to bottom right":u='x1="0%" y1="0%" x2="100%" y2="100%"';break;case"to top right":u='x1="0%" y1="100%" x2="100%" y2="0%"';break;case"ellipse":case"ellipse at center":g="radial",u='cx="50%" cy="50%" r="75%"',m='x="-50" y="-50" width="101" height="101"';break;default:throw{type:"Argument",message:"svg-gradient direction must be 'to bottom', 'to right', 'to bottom right', 'to top right' or 'ellipse at center'"}}for(l='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1 1"><'+g+'Gradient id="g" '+u+">",c=0;c<a.length;c+=1)a[c]instanceof o?(p=a[c].value[0],d=a[c].value[1]):(p=a[c],d=void 0),p instanceof r&&((0===c||c+1===a.length)&&void 0===d||d instanceof n)||e(),h=d?d.toCSS(y):0===c?"0%":"100%",f=p.alpha,l+='<stop offset="'+h+'" stop-color="'+p.toRGB()+'"'+(f<1?' stop-opacity="'+f+'"':"")+"/>";return l+="</"+g+"Gradient><rect "+m+' fill="url(#g)" /></svg>',l=encodeURIComponent(l),new s(new i("'"+(l="data:image/svg+xml,"+l)+"'",l,!1,this.index,this.currentFileInfo),this.index,this.currentFileInfo)}))}},{"../tree/color":55,"../tree/dimension":62,"../tree/expression":64,"../tree/quoted":80,"../tree/url":85,"./function-registry":27}],35:[function(t,e,n){var r=t("../tree/keyword"),o=t("../tree/detached-ruleset"),i=t("../tree/dimension"),s=t("../tree/color"),a=t("../tree/quoted"),u=t("../tree/anonymous"),l=t("../tree/url"),c=t("../tree/operation"),p=t("./function-registry"),d=function(t,e){return t instanceof e?r.True:r.False},h=function(t,e){if(void 0===e)throw{type:"Argument",message:"missing the required second argument to isunit."};if("string"!=typeof(e="string"==typeof e.value?e.value:e))throw{type:"Argument",message:"Second argument to isunit should be a unit or a string."};return t instanceof i&&t.unit.is(e)?r.True:r.False};p.addMultiple({isruleset:function(t){return d(t,o)},iscolor:function(t){return d(t,s)},isnumber:function(t){return d(t,i)},isstring:function(t){return d(t,a)},iskeyword:function(t){return d(t,r)},isurl:function(t){return d(t,l)},ispixel:function(t){return h(t,"px")},ispercentage:function(t){return h(t,"%")},isem:function(t){return h(t,"em")},isunit:h,unit:function(t,e){if(!(t instanceof i))throw{type:"Argument",message:"the first argument to unit must be a number"+(t instanceof c?". Have you forgotten parenthesis?":"")};return e=e?e instanceof r?e.value:e.toCSS():"",new i(t.value,e)},"get-unit":function(t){return new u(t.unit)}})},{"../tree/anonymous":50,"../tree/color":55,"../tree/detached-ruleset":61,"../tree/dimension":62,"../tree/keyword":70,"../tree/operation":77,"../tree/quoted":80,"../tree/url":85,"./function-registry":27}],36:[function(t,e,n){var r=t("./contexts"),o=t("./parser/parser"),i=t("./less-error"),s=t("./utils"),a=("undefined"==typeof Promise&&t("promise"),t("./logger"));e.exports=function(t){var e=function(t,e,n){this.less=t,this.rootFilename=n.filename,this.paths=e.paths||[],this.contents={},this.contentsIgnoredChars={},this.mime=e.mime,this.error=null,this.context=e,this.queue=[],this.files={}};return e.prototype.push=function(e,n,u,l,c){var p=this,d=this.context.pluginManager.Loader;this.queue.push(e);var h=function(t,n,r){p.queue.splice(p.queue.indexOf(e),1);var o=r===p.rootFilename;l.optional&&t?(c(null,{rules:[]},!1,null),a.info("The file "+r+" was skipped because it was not found and the import was marked optional.")):(p.files[r]||l.inline||(p.files[r]={root:n,options:l}),t&&!p.error&&(p.error=t),c(t,n,o,r))},f={rewriteUrls:this.context.rewriteUrls,entryPath:u.entryPath,rootpath:u.rootpath,rootFilename:u.rootFilename},g=t.getFileManager(e,u.currentDirectory,this.context,t);if(g){var m,y=function(t){var e,n=t.filename,s=t.contents.replace(/^\uFEFF/,"");f.currentDirectory=g.getPath(n),f.rewriteUrls&&(f.rootpath=g.join(p.context.rootpath||"",g.pathDiff(f.currentDirectory,f.entryPath)),!g.isPathAbsolute(f.rootpath)&&g.alwaysMakePathsAbsolute()&&(f.rootpath=g.join(f.entryPath,f.rootpath))),f.filename=n;var a=new r.Parse(p.context);a.processImports=!1,p.contents[n]=s,(u.reference||l.reference)&&(f.reference=!0),l.isPlugin?(e=d.evalPlugin(s,a,p,l.pluginArgs,f))instanceof i?h(e,null,n):h(null,e,n):l.inline?h(null,s,n):!p.files[n]||p.files[n].options.multiple||l.multiple?new o(a,p,f).parse(s,(function(t,e){h(t,e,n)})):h(null,p.files[n].root,n)},v=s.clone(this.context);n&&(v.ext=l.isPlugin?".js":".less"),(m=l.isPlugin?d.loadPlugin(e,u.currentDirectory,v,t,g):g.loadFile(e,u.currentDirectory,v,t,(function(t,e){t?h(t):y(e)})))&&m.then(y,h)}else h({message:"Could not find a file-manager for "+e})},e}},{"./contexts":13,"./less-error":38,"./logger":39,"./parser/parser":44,"./utils":89,promise:void 0}],37:[function(t,e,n){e.exports=function(e,n){var r,o,i,s,a,u,l={version:[3,9,0],data:t("./data"),tree:t("./tree"),Environment:a=t("./environment/environment"),AbstractFileManager:t("./environment/abstract-file-manager"),AbstractPluginLoader:t("./environment/abstract-plugin-loader"),environment:e=new a(e,n),visitors:t("./visitors"),Parser:t("./parser/parser"),functions:t("./functions")(e),contexts:t("./contexts"),SourceMapOutput:r=t("./source-map-output")(e),SourceMapBuilder:o=t("./source-map-builder")(r,e),ParseTree:i=t("./parse-tree")(o),ImportManager:s=t("./import-manager")(e),render:t("./render")(e,i,s),parse:t("./parse")(e,i,s),LessError:t("./less-error"),transformTree:t("./transform-tree"),utils:t("./utils"),PluginManager:t("./plugin-manager"),logger:t("./logger")},c=function(t){return function(){var e=Object.create(t.prototype);return t.apply(e,Array.prototype.slice.call(arguments,0)),e}},p=Object.create(l);for(var d in l.tree)if("function"==typeof(u=l.tree[d]))p[d.toLowerCase()]=c(u);else for(var h in p[d]=Object.create(null),u)p[d][h.toLowerCase()]=c(u[h]);return p}},{"./contexts":13,"./data":15,"./environment/abstract-file-manager":18,"./environment/abstract-plugin-loader":19,"./environment/environment":20,"./functions":28,"./import-manager":36,"./less-error":38,"./logger":39,"./parse":41,"./parse-tree":40,"./parser/parser":44,"./plugin-manager":45,"./render":46,"./source-map-builder":47,"./source-map-output":48,"./transform-tree":49,"./tree":67,"./utils":89,"./visitors":93}],38:[function(t,e,n){var r=t("./utils"),o=e.exports=function(t,e,n){Error.call(this);var o=t.filename||n;if(this.message=t.message,this.stack=t.stack,e&&o){var i=e.contents[o],s=r.getLocation(t.index,i),a=s.line,u=s.column,l=t.call&&r.getLocation(t.call,i).line,c=i?i.split("\n"):"";if(this.type=t.type||"Syntax",this.filename=o,this.index=t.index,this.line="number"==typeof a?a+1:null,this.column=u,!this.line&&this.stack){var p=this.stack.match(/(<anonymous>|Function):(\d+):(\d+)/);p&&(p[2]&&(this.line=parseInt(p[2])-2),p[3]&&(this.column=parseInt(p[3])))}this.callLine=l+1,this.callExtract=c[l],this.extract=[c[this.line-2],c[this.line-1],c[this.line]]}};if(void 0===Object.create){var i=function(){};i.prototype=Error.prototype,o.prototype=new i}else o.prototype=Object.create(Error.prototype);o.prototype.constructor=o,o.prototype.toString=function(t){t=t||{};var e="",n=this.extract||[],r=[],o=function(t){return t};if(t.stylize){var i=u(t.stylize);if("function"!==i)throw Error("options.stylize should be a function, got a "+i+"!");o=t.stylize}if(null!==this.line){if("string"==typeof n[0]&&r.push(o(this.line-1+" "+n[0],"grey")),"string"==typeof n[1]){var s=this.line+" ";n[1]&&(s+=n[1].slice(0,this.column)+o(o(o(n[1].substr(this.column,1),"bold")+n[1].slice(this.column+1),"red"),"inverse")),r.push(s)}"string"==typeof n[2]&&r.push(o(this.line+1+" "+n[2],"grey")),r=r.join("\n")+o("","reset")+"\n"}return e+=o(this.type+"Error: "+this.message,"red"),this.filename&&(e+=o(" in ","red")+this.filename),this.line&&(e+=o(" on line "+this.line+", column "+(this.column+1)+":","grey")),e+="\n"+r,this.callLine&&(e+=o("from ","red")+(this.filename||"")+"/n",e+=o(this.callLine,"grey")+" "+this.callExtract+"/n"),e}},{"./utils":89}],39:[function(t,e,n){e.exports={error:function(t){this._fireEvent("error",t)},warn:function(t){this._fireEvent("warn",t)},info:function(t){this._fireEvent("info",t)},debug:function(t){this._fireEvent("debug",t)},addListener:function(t){this._listeners.push(t)},removeListener:function(t){for(var e=0;e<this._listeners.length;e++)if(this._listeners[e]===t)return void this._listeners.splice(e,1)},_fireEvent:function(t,e){for(var n=0;n<this._listeners.length;n++){var r=this._listeners[n][t];r&&r(e)}},_listeners:[]}},{}],40:[function(t,e,n){var r=t("./less-error"),o=t("./transform-tree"),i=t("./logger");e.exports=function(t){var e=function(t,e){this.root=t,this.imports=e};return e.prototype.toCSS=function(e){var n,s,a={};try{n=o(this.root,e)}catch(t){throw new r(t,this.imports)}try{var u=Boolean(e.compress);u&&i.warn("The compress option has been deprecated. We recommend you use a dedicated css minifier, for instance see less-plugin-clean-css.");var l={compress:u,dumpLineNumbers:e.dumpLineNumbers,strictUnits:Boolean(e.strictUnits),numPrecision:8};e.sourceMap?(s=new t(e.sourceMap),a.css=s.toCSS(n,l,this.imports)):a.css=n.toCSS(l)}catch(t){throw new r(t,this.imports)}if(e.pluginManager)for(var c=e.pluginManager.getPostProcessors(),p=0;p<c.length;p++)a.css=c[p].process(a.css,{sourceMap:s,options:e,imports:this.imports});for(var d in e.sourceMap&&(a.map=s.getExternalSourceMap()),a.imports=[],this.imports.files)this.imports.files.hasOwnProperty(d)&&d!==this.imports.rootFilename&&a.imports.push(d);return a},e}},{"./less-error":38,"./logger":39,"./transform-tree":49}],41:[function(t,e,n){var r,o=t("./contexts"),i=t("./parser/parser"),s=t("./plugin-manager"),a=t("./less-error"),u=t("./utils");e.exports=function(e,n,l){return function e(n,c,p){if("function"==typeof c?(p=c,c=u.copyOptions(this.options,{})):c=u.copyOptions(this.options,c||{}),!p){r||(r="undefined"==typeof Promise?t("promise"):Promise);var d=this;return new r((function(t,r){e.call(d,n,c,(function(e,n){e?r(e):t(n)}))}))}var h,f,g=new s(this,!c.reUsePluginManager);if(c.pluginManager=g,h=new o.Parse(c),c.rootFileInfo)f=c.rootFileInfo;else{var m=c.filename||"input",y=m.replace(/[^\/\\]*$/,"");(f={filename:m,rewriteUrls:h.rewriteUrls,rootpath:h.rootpath||"",currentDirectory:y,entryPath:y,rootFilename:m}).rootpath&&"/"!==f.rootpath.slice(-1)&&(f.rootpath+="/")}var v=new l(this,h,f);this.importManager=v,c.plugins&&c.plugins.forEach((function(t){var e,n;if(t.fileContent){if(n=t.fileContent.replace(/^\uFEFF/,""),(e=g.Loader.evalPlugin(n,h,v,t.options,t.filename))instanceof a)return p(e)}else g.addPlugin(t)})),new i(h,v,f).parse(n,(function(t,e){return t?p(t):void p(null,e,v,c)}),c)}}},{"./contexts":13,"./less-error":38,"./parser/parser":44,"./plugin-manager":45,"./utils":89,promise:void 0}],42:[function(t,e,n){e.exports=function(t,e){function n(e){var n=a-m;n<512&&!e||!n||(g.push(t.slice(m,a+1)),m=a+1)}var r,o,i,s,a,u,l,c,p,d=t.length,h=0,f=0,g=[],m=0;for(a=0;a<d;a++)if(!((l=t.charCodeAt(a))>=97&&l<=122||l<34))switch(l){case 40:f++,o=a;continue;case 41:if(--f<0)return e("missing opening `(`",a);continue;case 59:f||n();continue;case 123:h++,r=a;continue;case 125:if(--h<0)return e("missing opening `{`",a);h||f||n();continue;case 92:if(a<d-1){a++;continue}return e("unescaped `\\`",a);case 34:case 39:case 96:for(p=0,u=a,a+=1;a<d;a++)if(!((c=t.charCodeAt(a))>96)){if(c==l){p=1;break}if(92==c){if(a==d-1)return e("unescaped `\\`",a);a++}}if(p)continue;return e("unmatched `"+String.fromCharCode(l)+"`",u);case 47:if(f||a==d-1)continue;if(47==(c=t.charCodeAt(a+1)))for(a+=2;a<d&&(!((c=t.charCodeAt(a))<=13)||10!=c&&13!=c);a++);else if(42==c){for(i=u=a,a+=2;a<d-1&&(125==(c=t.charCodeAt(a))&&(s=a),42!=c||47!=t.charCodeAt(a+1));a++);if(a==d-1)return e("missing closing `*/`",u);a++}continue;case 42:if(a<d-1&&47==t.charCodeAt(a+1))return e("unmatched `/*`",a);continue}return 0!==h?e(i>r&&s>i?"missing closing `}` or `*/`":"missing closing `}`",r):0!==f?e("missing closing `)`",o):(n(!0),g)}},{}],43:[function(t,e,n){var r=t("./chunker");e.exports=function(){function t(r){for(var o,i,l,m=c.i,y=n,v=c.i-u,b=c.i+a.length-v,C=c.i+=r,E=e;c.i<b;c.i++){if(o=E.charCodeAt(c.i),c.autoCommentAbsorb&&o===g){if("/"===(i=E.charAt(c.i+1))){l={index:c.i,isLineComment:!0};var A=E.indexOf("\n",c.i+2);A<0&&(A=b),c.i=A,l.text=E.substr(l.index,c.i-l.index),c.commentStore.push(l);continue}if("*"===i){var I=E.indexOf("*/",c.i+2);if(I>=0){l={index:c.i,text:E.substr(c.i,I+2-c.i),isLineComment:!1},c.i+=l.text.length-1,c.commentStore.push(l);continue}}break}if(o!==p&&o!==h&&o!==d&&o!==f)break}if(a=a.slice(r+c.i-C+v),u=c.i,!a.length){if(n<s.length-1)return a=s[++n],t(0),!0;c.finished=!0}return m!==c.i||y!==n}var e,n,o,i,s,a,u,l=[],c={},p=32,d=9,h=10,f=13,g=47;return c.save=function(){u=c.i,l.push({current:a,i:c.i,j:n})},c.restore=function(t){(c.i>o||c.i===o&&t&&!i)&&(o=c.i,i=t);var e=l.pop();a=e.current,u=c.i=e.i,n=e.j},c.forget=function(){l.pop()},c.isWhitespace=function(t){var n=c.i+(t||0),r=e.charCodeAt(n);return r===p||r===f||r===d||r===h},c.$re=function(e){c.i>u&&(a=a.slice(c.i-u),u=c.i);var n=e.exec(a);return n?(t(n[0].length),"string"==typeof n?n:1===n.length?n[0]:n):null},c.$char=function(n){return e.charAt(c.i)!==n?null:(t(1),n)},c.$str=function(n){for(var r=n.length,o=0;o<r;o++)if(e.charAt(c.i+o)!==n.charAt(o))return null;return t(r),n},c.$quoted=function(n){var r=n||c.i,o=e.charAt(r);if("'"===o||'"'===o){for(var i=e.length,s=r,a=1;a+s<i;a++)switch(e.charAt(a+s)){case"\\":a++;continue;case"\r":case"\n":break;case o:var u=e.substr(s,a+1);return n||0===n?[o,u]:(t(a+1),u)}return null}},c.$parseUntil=function(n){var r,o="",i=null,s=!1,a=0,u=[],l=[],p=e.length,d=c.i,h=c.i,f=c.i,g=!0;r="string"==typeof n?function(t){return t===n}:function(t){return n.test(t)};do{var m=e.charAt(f);if(0===a&&r(m))i=e.substr(h,f-h),l.push(i||" "),i=l,t(f-d),g=!1;else{if(s){"*"===m&&"/"===e.charAt(f+1)&&(f++,a--,s=!1),f++;continue}switch(m){case"\\":f++,m=e.charAt(f),l.push(e.substr(h,f-h+1)),h=f+1;break;case"/":"*"===e.charAt(f+1)&&(f++,s=!0,a++);break;case"'":case'"':(o=c.$quoted(f))?(l.push(e.substr(h,f-h),o),h=(f+=o[1].length-1)+1):(t(f-d),i=m,g=!1);break;case"{":u.push("}"),a++;break;case"(":u.push(")"),a++;break;case"[":u.push("]"),a++;break;case"}":case")":case"]":var y=u.pop();m===y?a--:(t(f-d),i=y,g=!1)}++f>p&&(g=!1)}}while(g);return i||null},c.autoCommentAbsorb=!0,c.commentStore=[],c.finished=!1,c.peek=function(t){if("string"==typeof t){for(var n=0;n<t.length;n++)if(e.charAt(c.i+n)!==t.charAt(n))return!1;return!0}return t.test(a)},c.peekChar=function(t){return e.charAt(c.i)===t},c.currentChar=function(){return e.charAt(c.i)},c.prevChar=function(){return e.charAt(c.i-1)},c.getInput=function(){return e},c.peekNotNumeric=function(){var t=e.charCodeAt(c.i);return t>57||t<43||t===g||44===t},c.start=function(i,l,p){e=i,c.i=n=u=o=0,s=l?r(i,p):[i],a=s[0],t(0)},c.end=function(){var t,n=c.i>=e.length;return c.i<o&&(t=i,c.i=o),{isFinished:n,furthest:c.i,furthestPossibleErrorMessage:t,furthestReachedEnd:c.i>=e.length-1,furthestChar:e[c.i]}},c}},{"./chunker":42}],44:[function(t,e,n){var r=t("../less-error"),o=t("../tree"),i=t("../visitors"),s=t("./parser-input"),a=t("../utils"),u=t("../functions/function-registry"),l=function t(e,n,l){function c(t,e){throw new r({index:g.i,filename:l.filename,type:e||"Syntax",message:t},n)}function p(t,e){var n=t instanceof Function?t.call(f):g.$re(t);return n||void c(e||("string"==typeof t?"expected '"+t+"' got '"+g.currentChar()+"'":"unexpected token"))}function d(t,e){return g.$char(t)?t:void c(e||"expected '"+t+"' got '"+g.currentChar()+"'")}function h(t){var e=l.filename;return{lineNumber:a.getLocation(t,g.getInput()).line+1,fileName:e}}var f,g=s();return{parserInput:g,imports:n,fileInfo:l,parseNode:function(t,e,o,i,s){var a,u=[],l=g;try{l.start(t,!1,(function(t,e){s({message:t,index:e+o})}));for(var c,p,d=0;c=e[d];d++)p=l.i,(a=f[c]())?(a._index=p+o,a._fileInfo=i,u.push(a)):u.push(null);l.end().isFinished?s(null,u):s(!0,null)}catch(t){throw new r({index:t.index+o,message:t.message},n,i.filename)}},parse:function(s,a,c){var p,d,h,f,m=null,y="";if(d=c&&c.globalVars?t.serializeVars(c.globalVars)+"\n":"",h=c&&c.modifyVars?"\n"+t.serializeVars(c.modifyVars):"",e.pluginManager)for(var v=e.pluginManager.getPreProcessors(),b=0;b<v.length;b++)s=v[b].process(s,{context:e,imports:n,fileInfo:l});(d||c&&c.banner)&&(y=(c&&c.banner?c.banner:"")+d,(f=n.contentsIgnoredChars)[l.filename]=f[l.filename]||0,f[l.filename]+=y.length),s=y+(s=s.replace(/\r\n?/g,"\n")).replace(/^\uFEFF/,"")+h,n.contents[l.filename]=s;try{g.start(s,e.chunkInput,(function(t,e){throw new r({index:e,type:"Parse",message:t,filename:l.filename},n)})),o.Node.prototype.parse=this,p=new o.Ruleset(null,this.parsers.primary()),o.Node.prototype.rootNode=p,p.root=!0,p.firstRoot=!0,p.functionRegistry=u.inherit()}catch(t){return a(new r(t,n,l.filename))}var C=g.end();if(!C.isFinished){var E=C.furthestPossibleErrorMessage;E||(E="Unrecognised input","}"===C.furthestChar?E+=". Possibly missing opening '{'":")"===C.furthestChar?E+=". Possibly missing opening '('":C.furthestReachedEnd&&(E+=". Possibly missing something")),m=new r({type:"Parse",message:E,index:C.furthest,filename:l.filename},n)}var A=function(t){return(t=m||t||n.error)?(t instanceof r||(t=new r(t,n,l.filename)),a(t)):a(null,p)};return!1===e.processImports?A():void new i.ImportVisitor(n,A).run(p)},parsers:f={primary:function(){for(var t,e=this.mixin,n=[];;){for(;t=this.comment();)n.push(t);if(g.finished)break;if(g.peek("}"))break;if(t=this.extendRule())n=n.concat(t);else if(t=e.definition()||this.declaration()||this.ruleset()||e.call(!1,!1)||this.variableCall()||this.entities.call()||this.atrule())n.push(t);else{for(var r=!1;g.$char(";");)r=!0;if(!r)break}}return n},comment:function(){if(g.commentStore.length){var t=g.commentStore.shift();return new o.Comment(t.text,t.isLineComment,t.index,l)}},entities:{mixinLookup:function(){return f.mixin.call(!0,!0)},quoted:function(t){var e,n=g.i,r=!1;if(g.save(),g.$char("~"))r=!0;else if(t)return void g.restore();return(e=g.$quoted())?(g.forget(),new o.Quoted(e.charAt(0),e.substr(1,e.length-2),r,n,l)):void g.restore()},keyword:function(){var t=g.$char("%")||g.$re(/^\[?(?:[\w-]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+\]?/);if(t)return o.Color.fromKeyword(t)||new o.Keyword(t)},call:function(){var t,e,n,r=g.i;if(!g.peek(/^url\(/i))return g.save(),(t=g.$re(/^([\w-]+|%|progid:[\w\.]+)\(/))?(t=t[1],(n=this.customFuncCall(t))&&(e=n.parse())&&n.stop?(g.forget(),e):(e=this.arguments(e),g.$char(")")?(g.forget(),new o.Call(t,e,r,l)):void g.restore("Could not parse call arguments or missing ')'"))):void g.forget()},customFuncCall:function(t){function e(t,e){return{parse:t,stop:e}}function n(){return[p(f.condition,"expected condition")]}return{alpha:e(f.ieAlpha,!0),boolean:e(n),if:e(n)}[t.toLowerCase()]},arguments:function(t){var e,n,r=t||[],i=[];for(g.save();;){if(t)t=!1;else{if(!(n=f.detachedRuleset()||this.assignment()||f.expression()))break;n.value&&1==n.value.length&&(n=n.value[0]),r.push(n)}g.$char(",")||(g.$char(";")||e)&&(e=!0,n=r.length<1?r[0]:new o.Value(r),i.push(n),r=[])}return g.forget(),e?i:r},literal:function(){return this.dimension()||this.color()||this.quoted()||this.unicodeDescriptor()},assignment:function(){var t,e;return g.save(),(t=g.$re(/^\w+(?=\s?=)/i))&&g.$char("=")&&(e=f.entity())?(g.forget(),new o.Assignment(t,e)):void g.restore()},url:function(){var t,e=g.i;return g.autoCommentAbsorb=!1,g.$str("url(")?(t=this.quoted()||this.variable()||this.property()||g.$re(/^(?:(?:\\[\(\)'"])|[^\(\)'"])+/)||"",g.autoCommentAbsorb=!0,d(")"),new o.URL(null!=t.value||t instanceof o.Variable||t instanceof o.Property?t:new o.Anonymous(t,e),e,l)):void(g.autoCommentAbsorb=!0)},variable:function(){var t,e,n=g.i;if(g.save(),"@"===g.currentChar()&&(e=g.$re(/^@@?[\w-]+/))){if("("===(t=g.currentChar())||"["===t&&!g.prevChar().match(/^\s/)){var r=f.variableCall(e);if(r)return g.forget(),r}return g.forget(),new o.Variable(e,n,l)}g.restore()},variableCurly:function(){var t,e=g.i;if("@"===g.currentChar()&&(t=g.$re(/^@\{([\w-]+)\}/)))return new o.Variable("@"+t[1],e,l)},property:function(){var t,e=g.i;if("$"===g.currentChar()&&(t=g.$re(/^\$[\w-]+/)))return new o.Property(t,e,l)},propertyCurly:function(){var t,e=g.i;if("$"===g.currentChar()&&(t=g.$re(/^\$\{([\w-]+)\}/)))return new o.Property("$"+t[1],e,l)},color:function(){var t;if("#"===g.currentChar()&&(t=g.$re(/^#([A-Fa-f0-9]{8}|[A-Fa-f0-9]{6}|[A-Fa-f0-9]{3,4})/)))return new o.Color(t[1],void 0,t[0])},colorKeyword:function(){g.save();var t=g.autoCommentAbsorb;g.autoCommentAbsorb=!1;var e=g.$re(/^[_A-Za-z-][_A-Za-z0-9-]+/);if(g.autoCommentAbsorb=t,e){g.restore();var n=o.Color.fromKeyword(e);return n?(g.$str(e),n):void 0}g.forget()},dimension:function(){if(!g.peekNotNumeric()){var t=g.$re(/^([+-]?\d*\.?\d+)(%|[a-z_]+)?/i);return t?new o.Dimension(t[1],t[2]):void 0}},unicodeDescriptor:function(){var t;if(t=g.$re(/^U\+[0-9a-fA-F?]+(\-[0-9a-fA-F?]+)?/))return new o.UnicodeDescriptor(t[0])},javascript:function(){var t,e=g.i;g.save();var n=g.$char("~");return g.$char("`")?(t=g.$re(/^[^`]*`/))?(g.forget(),new o.JavaScript(t.substr(0,t.length-1),Boolean(n),e,l)):void g.restore("invalid javascript definition"):void g.restore()}},variable:function(){var t;if("@"===g.currentChar()&&(t=g.$re(/^(@[\w-]+)\s*:/)))return t[1]},variableCall:function(t){var e,n,r=g.i,i=!!t,s=t;if(g.save(),s||"@"===g.currentChar()&&(s=g.$re(/^(@[\w-]+)(\(\s*\))?/))){if(!(e=this.mixin.ruleLookups())&&(i&&"()"!==g.$str("()")||"()"!==s[2]))return void g.restore("Missing '[...]' lookup in variable call");i||(s=s[1]),e&&f.important()&&(n=!0);var a=new o.VariableCall(s,r,l);return!i&&f.end()?(g.forget(),a):(g.forget(),new o.NamespaceValue(a,e,n,r,l))}g.restore()},extend:function(t){var e,n,r,i,s,a=g.i;if(g.$str(t?"&:extend(":":extend(")){do{for(r=null,e=null;!(r=g.$re(/^(all)(?=\s*(\)|,))/))&&(n=this.element());)e?e.push(n):e=[n];r=r&&r[1],e||c("Missing target selector for :extend()."),s=new o.Extend(new o.Selector(e),r,a,l),i?i.push(s):i=[s]}while(g.$char(","));return p(/^\)/),t&&p(/^;/),i}},extendRule:function(){return this.extend(!0)},mixin:{call:function(t,e){var n,r,i,s,a=g.currentChar(),u=!1,c=g.i;if("."===a||"#"===a){if(g.save(),r=this.elements()){if(g.$char("(")&&(i=this.args(!0).args,d(")"),s=!0),!1!==e&&(n=this.ruleLookups()),!0===e&&!n)return void g.restore();if(t&&!n&&!s)return void g.restore();if(!t&&f.important()&&(u=!0),t||f.end()){g.forget();var p=new o.mixin.Call(r,i,c,l,!n&&u);return n?new o.NamespaceValue(p,n,u):p}}g.restore()}},elements:function(){for(var t,e,n,r,i,s=/^[#.](?:[\w-]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+/;i=g.i,e=g.$re(s);)r=new o.Element(n,e,!1,i,l),t?t.push(r):t=[r],n=g.$char(">");return t},args:function(t){var e,n,r,i,s,a,u,l=f.entities,p={args:null,variadic:!1},d=[],h=[],m=[],y=!0;for(g.save();;){if(t)a=f.detachedRuleset()||f.expression();else{if(g.commentStore.length=0,g.$str("...")){p.variadic=!0,g.$char(";")&&!e&&(e=!0),(e?h:m).push({variadic:!0});break}a=l.variable()||l.property()||l.literal()||l.keyword()||this.call(!0)}if(!a||!y)break;i=null,a.throwAwayComments&&a.throwAwayComments(),s=a;var v=null;if(t?a.value&&1==a.value.length&&(v=a.value[0]):v=a,v&&(v instanceof o.Variable||v instanceof o.Property))if(g.$char(":")){if(d.length>0&&(e&&c("Cannot mix ; and , as delimiter types"),n=!0),!(s=f.detachedRuleset()||f.expression())){if(!t)return g.restore(),p.args=[],p;c("could not understand value for named argument")}i=r=v.name}else if(g.$str("...")){if(!t){p.variadic=!0,g.$char(";")&&!e&&(e=!0),(e?h:m).push({name:a.name,variadic:!0});break}u=!0}else t||(r=i=v.name,s=null);s&&d.push(s),m.push({name:i,value:s,expand:u}),g.$char(",")?y=!0:((y=";"===g.$char(";"))||e)&&(n&&c("Cannot mix ; and , as delimiter types"),e=!0,d.length>1&&(s=new o.Value(d)),h.push({name:r,value:s,expand:u}),r=null,d=[],n=!1)}return g.forget(),p.args=e?h:m,p},definition:function(){var t,e,n,r,i=[],s=!1;if(!("."!==g.currentChar()&&"#"!==g.currentChar()||g.peek(/^[^{]*\}/)))if(g.save(),e=g.$re(/^([#.](?:[\w-]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+)\s*\(/)){t=e[1];var a=this.args(!1);if(i=a.args,s=a.variadic,!g.$char(")"))return void g.restore("Missing closing ')'");if(g.commentStore.length=0,g.$str("when")&&(r=p(f.conditions,"expected condition")),n=f.block())return g.forget(),new o.mixin.Definition(t,i,n,r,s);g.restore()}else g.forget()},ruleLookups:function(){var t,e=[];if("["===g.currentChar()){for(;;){if(g.save(),!(t=this.lookupValue())&&""!==t){g.restore();break}e.push(t),g.forget()}return e.length>0?e:void 0}},lookupValue:function(){if(g.save(),g.$char("[")){var t=g.$re(/^(?:[@$]{0,2})[_a-zA-Z0-9-]*/);return g.$char("]")&&(t||""===t)?(g.forget(),t):void g.restore()}g.restore()}},entity:function(){var t=this.entities;return this.comment()||t.literal()||t.variable()||t.url()||t.property()||t.call()||t.keyword()||this.mixin.call(!0)||t.javascript()},end:function(){return g.$char(";")||g.peek("}")},ieAlpha:function(){var t;if(g.$re(/^opacity=/i))return(t=g.$re(/^\d+/))||(t="@{"+(t=p(f.entities.variable,"Could not parse alpha")).name.slice(1)+"}"),d(")"),new o.Quoted("","alpha(opacity="+t+")")},element:function(){var t,e,n,r=g.i;if(e=this.combinator(),(t=g.$re(/^(?:\d+\.\d+|\d+)%/)||g.$re(/^(?:[.#]?|:*)(?:[\w-]|[^\x00-\x9f]|\\(?:[A-Fa-f0-9]{1,6} ?|[^A-Fa-f0-9]))+/)||g.$char("*")||g.$char("&")||this.attribute()||g.$re(/^\([^&()@]+\)/)||g.$re(/^[\.#:](?=@)/)||this.entities.variableCurly())||(g.save(),g.$char("(")?(n=this.selector(!1))&&g.$char(")")?(t=new o.Paren(n),g.forget()):g.restore("Missing closing ')'"):g.forget()),t)return new o.Element(e,t,t instanceof o.Variable,r,l)},combinator:function(){var t=g.currentChar();if("/"===t){g.save();var e=g.$re(/^\/[a-z]+\//i);if(e)return g.forget(),new o.Combinator(e);g.restore()}if(">"===t||"+"===t||"~"===t||"|"===t||"^"===t){for(g.i++,"^"===t&&"^"===g.currentChar()&&(t="^^",g.i++);g.isWhitespace();)g.i++;return new o.Combinator(t)}return new o.Combinator(g.isWhitespace(-1)?" ":null)},selector:function(t){var e,n,r,i,s,a,u,d=g.i;for(t=!1!==t;(t&&(n=this.extend())||t&&(a=g.$str("when"))||(i=this.element()))&&(a?u=p(this.conditions,"expected condition"):u?c("CSS guard can only be used at the end of selector"):n?s=s?s.concat(n):n:(s&&c("Extend can only be used at the end of selector"),r=g.currentChar(),e?e.push(i):e=[i],i=null),"{"!==r&&"}"!==r&&";"!==r&&","!==r&&")"!==r););return e?new o.Selector(e,s,u,d,l):void(s&&c("Extend must be used to extend a selector, it cannot be used on its own"))},selectors:function(){for(var t,e;(t=this.selector())&&(e?e.push(t):e=[t],g.commentStore.length=0,t.condition&&e.length>1&&c("Guards are only currently allowed on a single selector."),g.$char(","));)t.condition&&c("Guards are only currently allowed on a single selector."),g.commentStore.length=0;return e},attribute:function(){if(g.$char("[")){var t,e,n,r=this.entities;return(t=r.variableCurly())||(t=p(/^(?:[_A-Za-z0-9-\*]*\|)?(?:[_A-Za-z0-9-]|\\.)+/)),(n=g.$re(/^[|~*$^]?=/))&&(e=r.quoted()||g.$re(/^[0-9]+%/)||g.$re(/^[\w-]+/)||r.variableCurly()),d("]"),new o.Attribute(t,n,e)}},block:function(){var t;if(g.$char("{")&&(t=this.primary())&&g.$char("}"))return t},blockRuleset:function(){var t=this.block();return t&&(t=new o.Ruleset(null,t)),t},detachedRuleset:function(){var t,e,n;if(g.save(),!g.$re(/^[.#]\(/)||(e=(t=this.mixin.args(!1)).args,n=t.variadic,g.$char(")"))){var r=this.blockRuleset();return r?(g.forget(),e?new o.mixin.Definition(null,e,r,null,n):new o.DetachedRuleset(r)):void g.restore()}g.restore()},ruleset:function(){var t,n,r;if(g.save(),e.dumpLineNumbers&&(r=h(g.i)),(t=this.selectors())&&(n=this.block())){g.forget();var i=new o.Ruleset(t,n,e.strictImports);return e.dumpLineNumbers&&(i.debugInfo=r),i}g.restore()},declaration:function(){var t,e,n,r,i,s,a=g.i,u=g.currentChar();if("."!==u&&"#"!==u&&"&"!==u&&":"!==u)if(g.save(),t=this.variable()||this.ruleProperty()){if((s="string"==typeof t)&&(e=this.detachedRuleset())&&(n=!0),g.commentStore.length=0,!e){if(i=!s&&t.length>1&&t.pop().value,e=t[0].value&&"--"===t[0].value.slice(0,2)?this.permissiveValue():this.anonymousValue())return g.forget(),new o.Declaration(t,e,!1,i,a,l);e||(e=this.value()),e?r=this.important():s&&(e=this.permissiveValue())}if(e&&(this.end()||n))return g.forget(),new o.Declaration(t,e,r,i,a,l);g.restore()}else g.restore()},anonymousValue:function(){var t=g.i,e=g.$re(/^([^.#@\$+\/'"*`(;{}-]*);/);if(e)return new o.Anonymous(e[1],t)},permissiveValue:function(t){function e(){var t=g.currentChar();return"string"==typeof a?t===a:a.test(t)}var n,r,i,s,a=t||";",u=g.i,p=[];if(!e()){s=[];do{((r=this.comment())||(r=this.entity()))&&s.push(r)}while(r);if(i=e(),s.length>0){if(s=new o.Expression(s),i)return s;p.push(s)," "===g.prevChar()&&p.push(new o.Anonymous(" ",u))}if(g.save(),s=g.$parseUntil(a)){if("string"==typeof s&&c("Expected '"+s+"'","Parse"),1===s.length&&" "===s[0])return g.forget(),new o.Anonymous("",u);var d;for(n=0;n<s.length;n++)if(d=s[n],Array.isArray(d))p.push(new o.Quoted(d[0],d[1],!0,u,l));else{n===s.length-1&&(d=d.trim());var h=new o.Quoted("'",d,!0,u,l);h.variableRegex=/@([\w-]+)/g,h.propRegex=/\$([\w-]+)/g,p.push(h)}return g.forget(),new o.Expression(p,!0)}g.restore()}},import:function(){var t,e,n=g.i,r=g.$re(/^@import?\s+/);if(r){var i=(r?this.importOptions():null)||{};if(t=this.entities.quoted()||this.entities.url())return e=this.mediaFeatures(),g.$char(";")||(g.i=n,c("missing semi-colon or unrecognised media features on import")),e=e&&new o.Value(e),new o.Import(t,e,i,n,l);g.i=n,c("malformed import statement")}},importOptions:function(){var t,e,n,r={};if(!g.$char("("))return null;do{if(t=this.importOption()){switch(n=!0,e=t){case"css":e="less",n=!1;break;case"once":e="multiple",n=!1}if(r[e]=n,!g.$char(","))break}}while(t);return d(")"),r},importOption:function(){var t=g.$re(/^(less|css|multiple|once|inline|reference|optional)/);if(t)return t[1]},mediaFeature:function(){var t,e,n=this.entities,r=[];g.save();do{(t=n.keyword()||n.variable()||n.mixinLookup())?r.push(t):g.$char("(")&&(e=this.property(),t=this.value(),g.$char(")")?e&&t?r.push(new o.Paren(new o.Declaration(e,t,null,null,g.i,l,!0))):t?r.push(new o.Paren(t)):c("badly formed media feature definition"):c("Missing closing ')'","Parse"))}while(t);if(g.forget(),r.length>0)return new o.Expression(r)},mediaFeatures:function(){var t,e=this.entities,n=[];do{if(t=this.mediaFeature()){if(n.push(t),!g.$char(","))break}else if((t=e.variable()||e.mixinLookup())&&(n.push(t),!g.$char(",")))break}while(t);return n.length>0?n:null},media:function(){var t,n,r,i,s=g.i;return e.dumpLineNumbers&&(i=h(s)),g.save(),g.$str("@media")?(t=this.mediaFeatures(),(n=this.block())||c("media definitions require block statements after any features"),g.forget(),r=new o.Media(n,t,s,l),e.dumpLineNumbers&&(r.debugInfo=i),r):void g.restore()},plugin:function(){var t,e,n,r=g.i;if(g.$re(/^@plugin?\s+/)){if(n=(e=this.pluginArgs())?{pluginArgs:e,isPlugin:!0}:{isPlugin:!0},t=this.entities.quoted()||this.entities.url())return g.$char(";")||(g.i=r,c("missing semi-colon on @plugin")),new o.Import(t,null,n,r,l);g.i=r,c("malformed @plugin statement")}},pluginArgs:function(){if(g.save(),!g.$char("("))return g.restore(),null;var t=g.$re(/^\s*([^\);]+)\)\s*/);return t[1]?(g.forget(),t[1].trim()):(g.restore(),null)},atrule:function(){var t,n,r,i,s,a,u,p=g.i,d=!0,f=!0;if("@"===g.currentChar()){if(n=this.import()||this.plugin()||this.media())return n;if(g.save(),t=g.$re(/^@[a-z-]+/)){switch(i=t,"-"==t.charAt(1)&&t.indexOf("-",2)>0&&(i="@"+t.slice(t.indexOf("-",2)+1)),i){case"@charset":s=!0,d=!1;break;case"@namespace":a=!0,d=!1;break;case"@keyframes":case"@counter-style":s=!0;break;case"@document":case"@supports":u=!0,f=!1;break;default:u=!0}return g.commentStore.length=0,s?(n=this.entity())||c("expected "+t+" identifier"):a?(n=this.expression())||c("expected "+t+" expression"):u&&(n=this.permissiveValue(/^[{;]/),d="{"===g.currentChar(),n?n.value||(n=null):d||";"===g.currentChar()||c(t+" rule is missing block or ending semi-colon")),d&&(r=this.blockRuleset()),r||!d&&n&&g.$char(";")?(g.forget(),new o.AtRule(t,n,r,p,l,e.dumpLineNumbers?h(p):null,f)):void g.restore("at-rule options not recognised")}}},value:function(){var t,e=[],n=g.i;do{if((t=this.expression())&&(e.push(t),!g.$char(",")))break}while(t);if(e.length>0)return new o.Value(e,n)},important:function(){if("!"===g.currentChar())return g.$re(/^! *important/)},sub:function(){var t,e;return g.save(),g.$char("(")?(t=this.addition())&&g.$char(")")?(g.forget(),(e=new o.Expression([t])).parens=!0,e):void g.restore("Expected ')'"):void g.restore()},multiplication:function(){var t,e,n,r,i;if(t=this.operand()){for(i=g.isWhitespace(-1);!g.peek(/^\/[*\/]/);){if(g.save(),!(n=g.$char("/")||g.$char("*")||g.$str("./"))){g.forget();break}if(!(e=this.operand())){g.restore();break}g.forget(),t.parensInOp=!0,e.parensInOp=!0,r=new o.Operation(n,[r||t,e],i),i=g.isWhitespace(-1)}return r||t}},addition:function(){var t,e,n,r,i;if(t=this.multiplication()){for(i=g.isWhitespace(-1);(n=g.$re(/^[-+]\s+/)||!i&&(g.$char("+")||g.$char("-")))&&(e=this.multiplication());)t.parensInOp=!0,e.parensInOp=!0,r=new o.Operation(n,[r||t,e],i),i=g.isWhitespace(-1);return r||t}},conditions:function(){var t,e,n,r=g.i;if(t=this.condition(!0)){for(;g.peek(/^,\s*(not\s*)?\(/)&&g.$char(",")&&(e=this.condition(!0));)n=new o.Condition("or",n||t,e,r);return n||t}},condition:function(t){var e,n,r;if(e=this.conditionAnd(t)){if(n=g.$str("or")){if(!(r=this.condition(t)))return;e=new o.Condition(n,e,r)}return e}},conditionAnd:function(t){var e,n,r,i=this;if(e=function(){var e=i.negatedCondition(t)||i.parenthesisCondition(t);return e||t?e:i.atomicCondition(t)}()){if(n=g.$str("and")){if(!(r=this.conditionAnd(t)))return;e=new o.Condition(n,e,r)}return e}},negatedCondition:function(t){if(g.$str("not")){var e=this.parenthesisCondition(t);return e&&(e.negate=!e.negate),e}},parenthesisCondition:function(t){var e;return g.save(),g.$str("(")?(e=function(e){var n;return g.save(),(n=e.condition(t))&&g.$char(")")?(g.forget(),n):void g.restore()}(this))?(g.forget(),e):(e=this.atomicCondition(t))?g.$char(")")?(g.forget(),e):void g.restore("expected ')' got '"+g.currentChar()+"'"):void g.restore():void g.restore()},atomicCondition:function(t){function e(){return this.addition()||a.keyword()||a.quoted()||a.mixinLookup()}var n,r,i,s,a=this.entities,u=g.i;if(n=(e=e.bind(this))())return g.$char(">")?s=g.$char("=")?">=":">":g.$char("<")?s=g.$char("=")?"<=":"<":g.$char("=")&&(s=g.$char(">")?"=>":g.$char("<")?"=<":"="),s?(r=e())?i=new o.Condition(s,n,r,u,!1):c("expected expression"):i=new o.Condition("=",n,new o.Keyword("true"),u,!1),i},operand:function(){var t,e=this.entities;g.peek(/^-[@\$\(]/)&&(t=g.$char("-"));var n=this.sub()||e.dimension()||e.color()||e.variable()||e.property()||e.call()||e.quoted(!0)||e.colorKeyword()||e.mixinLookup();return t&&(n.parensInOp=!0,n=new o.Negative(n)),n},expression:function(){var t,e,n=[],r=g.i;do{(t=this.comment())?n.push(t):(t=this.addition()||this.entity())&&(n.push(t),g.peek(/^\/[\/*]/)||(e=g.$char("/"))&&n.push(new o.Anonymous(e,r)))}while(t);if(n.length>0)return new o.Expression(n)},property:function(){var t=g.$re(/^(\*?-?[_a-zA-Z0-9-]+)\s*:/);if(t)return t[1]},ruleProperty:function(){function t(t){var e=g.i,n=g.$re(t);if(n)return i.push(e),r.push(n[1])}var e,n,r=[],i=[];g.save();var s=g.$re(/^([_a-zA-Z0-9-]+)\s*:/);if(s)return r=[new o.Keyword(s[1])],g.forget(),r;for(t(/^(\*?)/);t(/^((?:[\w-]+)|(?:[@\$]\{[\w-]+\}))/););if(r.length>1&&t(/^((?:\+_|\+)?)\s*:/)){for(g.forget(),""===r[0]&&(r.shift(),i.shift()),n=0;n<r.length;n++)e=r[n],r[n]="@"!==e.charAt(0)&&"$"!==e.charAt(0)?new o.Keyword(e):"@"===e.charAt(0)?new o.Variable("@"+e.slice(2,-1),i[n],l):new o.Property("$"+e.slice(2,-1),i[n],l);return r}g.restore()}}}};l.serializeVars=function(t){var e="";for(var n in t)if(Object.hasOwnProperty.call(t,n)){var r=t[n];e+=("@"===n[0]?"":"@")+n+": "+r+(";"===String(r).slice(-1)?"":";")}return e},e.exports=l},{"../functions/function-registry":27,"../less-error":38,"../tree":67,"../utils":89,"../visitors":93,"./parser-input":43}],45:[function(t,e,n){var r,o=function(t){this.less=t,this.visitors=[],this.preProcessors=[],this.postProcessors=[],this.installedPlugins=[],this.fileManagers=[],this.iterator=-1,this.pluginCache={},this.Loader=new t.PluginLoader(t)};o.prototype.addPlugins=function(t){if(t)for(var e=0;e<t.length;e++)this.addPlugin(t[e])},o.prototype.addPlugin=function(t,e,n){this.installedPlugins.push(t),e&&(this.pluginCache[e]=t),t.install&&t.install(this.less,this,n||this.less.functions.functionRegistry)},o.prototype.get=function(t){return this.pluginCache[t]},o.prototype.addVisitor=function(t){this.visitors.push(t)},o.prototype.addPreProcessor=function(t,e){var n;for(n=0;n<this.preProcessors.length&&!(this.preProcessors[n].priority>=e);n++);this.preProcessors.splice(n,0,{preProcessor:t,priority:e})},o.prototype.addPostProcessor=function(t,e){var n;for(n=0;n<this.postProcessors.length&&!(this.postProcessors[n].priority>=e);n++);this.postProcessors.splice(n,0,{postProcessor:t,priority:e})},o.prototype.addFileManager=function(t){this.fileManagers.push(t)},o.prototype.getPreProcessors=function(){for(var t=[],e=0;e<this.preProcessors.length;e++)t.push(this.preProcessors[e].preProcessor);return t},o.prototype.getPostProcessors=function(){for(var t=[],e=0;e<this.postProcessors.length;e++)t.push(this.postProcessors[e].postProcessor);return t},o.prototype.getVisitors=function(){return this.visitors},o.prototype.visitor=function(){var t=this;return{first:function(){return t.iterator=-1,t.visitors[t.iterator]},get:function(){return t.iterator+=1,t.visitors[t.iterator]}}},o.prototype.getFileManagers=function(){return this.fileManagers},e.exports=function(t,e){return!e&&r||(r=new o(t)),r}},{}],46:[function(t,e,n){var r,o=t("./utils");e.exports=function(e,n,i){return function e(i,s,a){if("function"==typeof s?(a=s,s=o.copyOptions(this.options,{})):s=o.copyOptions(this.options,s||{}),!a){r||(r="undefined"==typeof Promise?t("promise"):Promise);var u=this;return new r((function(t,n){e.call(u,i,s,(function(e,r){e?n(e):t(r)}))}))}this.parse(i,s,(function(t,e,r,o){if(t)return a(t);var i;try{i=new n(e,r).toCSS(o)}catch(t){return a(t)}a(null,i)}))}}},{"./utils":89,promise:void 0}],47:[function(t,e,n){e.exports=function(t,e){var n=function(t){this.options=t};return n.prototype.toCSS=function(e,n,r){var o=new t({contentsIgnoredCharsMap:r.contentsIgnoredChars,rootNode:e,contentsMap:r.contents,sourceMapFilename:this.options.sourceMapFilename,sourceMapURL:this.options.sourceMapURL,outputFilename:this.options.sourceMapOutputFilename,sourceMapBasepath:this.options.sourceMapBasepath,sourceMapRootpath:this.options.sourceMapRootpath,outputSourceFiles:this.options.outputSourceFiles,sourceMapGenerator:this.options.sourceMapGenerator,sourceMapFileInline:this.options.sourceMapFileInline}),i=o.toCSS(n);return this.sourceMap=o.sourceMap,this.sourceMapURL=o.sourceMapURL,this.options.sourceMapInputFilename&&(this.sourceMapInputFilename=o.normalizeFilename(this.options.sourceMapInputFilename)),void 0!==this.options.sourceMapBasepath&&void 0!==this.sourceMapURL&&(this.sourceMapURL=o.removeBasepath(this.sourceMapURL)),i+this.getCSSAppendage()},n.prototype.getCSSAppendage=function(){var t=this.sourceMapURL;if(this.options.sourceMapFileInline){if(void 0===this.sourceMap)return"";t="data:application/json;base64,"+e.encodeBase64(this.sourceMap)}return t?"/*# sourceMappingURL="+t+" */":""},n.prototype.getExternalSourceMap=function(){return this.sourceMap},n.prototype.setExternalSourceMap=function(t){this.sourceMap=t},n.prototype.isInline=function(){return this.options.sourceMapFileInline},n.prototype.getSourceMapURL=function(){return this.sourceMapURL},n.prototype.getOutputFilename=function(){return this.options.sourceMapOutputFilename},n.prototype.getInputFilename=function(){return this.sourceMapInputFilename},n}},{}],48:[function(t,e,n){e.exports=function(t){var e=function(e){this._css=[],this._rootNode=e.rootNode,this._contentsMap=e.contentsMap,this._contentsIgnoredCharsMap=e.contentsIgnoredCharsMap,e.sourceMapFilename&&(this._sourceMapFilename=e.sourceMapFilename.replace(/\\/g,"/")),this._outputFilename=e.outputFilename,this.sourceMapURL=e.sourceMapURL,e.sourceMapBasepath&&(this._sourceMapBasepath=e.sourceMapBasepath.replace(/\\/g,"/")),e.sourceMapRootpath?(this._sourceMapRootpath=e.sourceMapRootpath.replace(/\\/g,"/"),"/"!==this._sourceMapRootpath.charAt(this._sourceMapRootpath.length-1)&&(this._sourceMapRootpath+="/")):this._sourceMapRootpath="",this._outputSourceFiles=e.outputSourceFiles,this._sourceMapGeneratorConstructor=t.getSourceMapGenerator(),this._lineNumber=0,this._column=0};return e.prototype.removeBasepath=function(t){return this._sourceMapBasepath&&0===t.indexOf(this._sourceMapBasepath)&&("\\"!==(t=t.substring(this._sourceMapBasepath.length)).charAt(0)&&"/"!==t.charAt(0)||(t=t.substring(1))),t},e.prototype.normalizeFilename=function(t){return t=t.replace(/\\/g,"/"),t=this.removeBasepath(t),(this._sourceMapRootpath||"")+t},e.prototype.add=function(t,e,n,r){if(t){var o,i,s,a,u;if(e&&e.filename){var l=this._contentsMap[e.filename];this._contentsIgnoredCharsMap[e.filename]&&((n-=this._contentsIgnoredCharsMap[e.filename])<0&&(n=0),l=l.slice(this._contentsIgnoredCharsMap[e.filename])),a=(i=(l=l.substring(0,n)).split("\n"))[i.length-1]}if(s=(o=t.split("\n"))[o.length-1],e&&e.filename)if(r)for(u=0;u<o.length;u++)this._sourceMapGenerator.addMapping({generated:{line:this._lineNumber+u+1,column:0===u?this._column:0},original:{line:i.length+u,column:0===u?a.length:0},source:this.normalizeFilename(e.filename)});else this._sourceMapGenerator.addMapping({generated:{line:this._lineNumber+1,column:this._column},original:{line:i.length,column:a.length},source:this.normalizeFilename(e.filename)});1===o.length?this._column+=s.length:(this._lineNumber+=o.length-1,this._column=s.length),this._css.push(t)}},e.prototype.isEmpty=function(){return 0===this._css.length},e.prototype.toCSS=function(t){if(this._sourceMapGenerator=new this._sourceMapGeneratorConstructor({file:this._outputFilename,sourceRoot:null}),this._outputSourceFiles)for(var e in this._contentsMap)if(this._contentsMap.hasOwnProperty(e)){var n=this._contentsMap[e];this._contentsIgnoredCharsMap[e]&&(n=n.slice(this._contentsIgnoredCharsMap[e])),this._sourceMapGenerator.setSourceContent(this.normalizeFilename(e),n)}if(this._rootNode.genCSS(t,this),this._css.length>0){var r,o=JSON.stringify(this._sourceMapGenerator.toJSON());this.sourceMapURL?r=this.sourceMapURL:this._sourceMapFilename&&(r=this._sourceMapFilename),this.sourceMapURL=r,this.sourceMap=o}return this._css.join("")},e}},{}],49:[function(t,e,n){var r=t("./contexts"),o=t("./visitors"),i=t("./tree");e.exports=function(t,e){var n,s=(e=e||{}).variables,a=new r.Eval(e);"object"!=(void 0===s?"undefined":u(s))||Array.isArray(s)||(s=Object.keys(s).map((function(t){var e=s[t];return e instanceof i.Value||(e instanceof i.Expression||(e=new i.Expression([e])),e=new i.Value([e])),new i.Declaration("@"+t,e,!1,null,0)})),a.frames=[new i.Ruleset(null,s)]);var l,c,p=[new o.JoinSelectorVisitor,new o.MarkVisibleSelectorsVisitor(!0),new o.ExtendVisitor,new o.ToCSSVisitor({compress:Boolean(e.compress)})],d=[];if(e.pluginManager){c=e.pluginManager.visitor();for(var h=0;h<2;h++)for(c.first();l=c.get();)l.isPreEvalVisitor?0!==h&&-1!==d.indexOf(l)||(d.push(l),l.run(t)):0!==h&&-1!==p.indexOf(l)||(l.isPreVisitor?p.unshift(l):p.push(l))}for(n=t.eval(a),h=0;h<p.length;h++)p[h].run(n);if(e.pluginManager)for(c.first();l=c.get();)-1===p.indexOf(l)&&-1===d.indexOf(l)&&l.run(n);return n}},{"./contexts":13,"./tree":67,"./visitors":93}],50:[function(t,e,n){var r=t("./node"),o=function(t,e,n,r,o,i){this.value=t,this._index=e,this._fileInfo=n,this.mapLines=r,this.rulesetLike=void 0!==o&&o,this.allowRoot=!0,this.copyVisibilityInfo(i)};(o.prototype=new r).type="Anonymous",o.prototype.eval=function(){return new o(this.value,this._index,this._fileInfo,this.mapLines,this.rulesetLike,this.visibilityInfo())},o.prototype.compare=function(t){return t.toCSS&&this.toCSS()===t.toCSS()?0:void 0},o.prototype.isRulesetLike=function(){return this.rulesetLike},o.prototype.genCSS=function(t,e){this.nodeVisible=Boolean(this.value),this.nodeVisible&&e.add(this.value,this._fileInfo,this._index,this.mapLines)},e.exports=o},{"./node":76}],51:[function(t,e,n){var r=t("./node"),o=function(t,e){this.key=t,this.value=e};(o.prototype=new r).type="Assignment",o.prototype.accept=function(t){this.value=t.visit(this.value)},o.prototype.eval=function(t){return this.value.eval?new o(this.key,this.value.eval(t)):this},o.prototype.genCSS=function(t,e){e.add(this.key+"="),this.value.genCSS?this.value.genCSS(t,e):e.add(this.value)},e.exports=o},{"./node":76}],52:[function(t,e,n){var r=t("./node"),o=t("./selector"),i=t("./ruleset"),s=t("./anonymous"),a=function(t,e,n,i,a,u,l,c){var p;if(this.name=t,this.value=e instanceof r?e:e?new s(e):e,n){for(Array.isArray(n)?this.rules=n:(this.rules=[n],this.rules[0].selectors=new o([],null,null,i,a).createEmptySelectors()),p=0;p<this.rules.length;p++)this.rules[p].allowImports=!0;this.setParent(this.rules,this)}this._index=i,this._fileInfo=a,this.debugInfo=u,this.isRooted=l||!1,this.copyVisibilityInfo(c),this.allowRoot=!0};(a.prototype=new r).type="AtRule",a.prototype.accept=function(t){var e=this.value,n=this.rules;n&&(this.rules=t.visitArray(n)),e&&(this.value=t.visit(e))},a.prototype.isRulesetLike=function(){return this.rules||!this.isCharset()},a.prototype.isCharset=function(){return"@charset"===this.name},a.prototype.genCSS=function(t,e){var n=this.value,r=this.rules;e.add(this.name,this.fileInfo(),this.getIndex()),n&&(e.add(" "),n.genCSS(t,e)),r?this.outputRuleset(t,e,r):e.add(";")},a.prototype.eval=function(t){var e,n,r=this.value,o=this.rules;return e=t.mediaPath,n=t.mediaBlocks,t.mediaPath=[],t.mediaBlocks=[],r&&(r=r.eval(t)),o&&((o=[o[0].eval(t)])[0].root=!0),t.mediaPath=e,t.mediaBlocks=n,new a(this.name,r,o,this.getIndex(),this.fileInfo(),this.debugInfo,this.isRooted,this.visibilityInfo())},a.prototype.variable=function(t){if(this.rules)return i.prototype.variable.call(this.rules[0],t)},a.prototype.find=function(){if(this.rules)return i.prototype.find.apply(this.rules[0],arguments)},a.prototype.rulesets=function(){if(this.rules)return i.prototype.rulesets.apply(this.rules[0])},a.prototype.outputRuleset=function(t,e,n){var r,o=n.length;if(t.tabLevel=1+(0|t.tabLevel),t.compress){for(e.add("{"),r=0;r<o;r++)n[r].genCSS(t,e);return e.add("}"),void t.tabLevel--}var i="\n"+Array(t.tabLevel).join("  "),s=i+"  ";if(o){for(e.add(" {"+s),n[0].genCSS(t,e),r=1;r<o;r++)e.add(s),n[r].genCSS(t,e);e.add(i+"}")}else e.add(" {"+i+"}");t.tabLevel--},e.exports=a},{"./anonymous":50,"./node":76,"./ruleset":81,"./selector":82}],53:[function(t,e,n){var r=t("./node"),o=function(t,e,n){this.key=t,this.op=e,this.value=n};(o.prototype=new r).type="Attribute",o.prototype.eval=function(t){return new o(this.key.eval?this.key.eval(t):this.key,this.op,this.value&&this.value.eval?this.value.eval(t):this.value)},o.prototype.genCSS=function(t,e){e.add(this.toCSS(t))},o.prototype.toCSS=function(t){var e=this.key.toCSS?this.key.toCSS(t):this.key;return this.op&&(e+=this.op,e+=this.value.toCSS?this.value.toCSS(t):this.value),"["+e+"]"},e.exports=o},{"./node":76}],54:[function(t,e,n){var r=t("./node"),o=t("./anonymous"),i=t("../functions/function-caller"),s=function(t,e,n,r){this.name=t,this.args=e,this.calc="calc"===t,this._index=n,this._fileInfo=r};(s.prototype=new r).type="Call",s.prototype.accept=function(t){this.args&&(this.args=t.visitArray(this.args))},s.prototype.eval=function(t){var e=t.mathOn;t.mathOn=!this.calc,(this.calc||t.inCalc)&&t.enterCalc();var n=this.args.map((function(e){return e.eval(t)}));(this.calc||t.inCalc)&&t.exitCalc(),t.mathOn=e;var a,u=new i(this.name,t,this.getIndex(),this.fileInfo());if(u.isValid()){try{a=u.call(n)}catch(t){throw{type:t.type||"Runtime",message:"error evaluating function `"+this.name+"`"+(t.message?": "+t.message:""),index:this.getIndex(),filename:this.fileInfo().filename,line:t.lineNumber,column:t.columnNumber}}if(null!=a)return a instanceof r||(a=new o(a&&!0!==a?a.toString():null)),a._index=this._index,a._fileInfo=this._fileInfo,a}return new s(this.name,n,this.getIndex(),this.fileInfo())},s.prototype.genCSS=function(t,e){e.add(this.name+"(",this.fileInfo(),this.getIndex());for(var n=0;n<this.args.length;n++)this.args[n].genCSS(t,e),n+1<this.args.length&&e.add(", ");e.add(")")},e.exports=s},{"../functions/function-caller":26,"./anonymous":50,"./node":76}],55:[function(t,e,n){function r(t,e){return Math.min(Math.max(t,0),e)}function o(t){return"#"+t.map((function(t){return((t=r(Math.round(t),255))<16?"0":"")+t.toString(16)})).join("")}var i=t("./node"),s=t("../data/colors"),a=function(t,e,n){var r=this;Array.isArray(t)?this.rgb=t:t.length>=6?(this.rgb=[],t.match(/.{2}/g).map((function(t,e){e<3?r.rgb.push(parseInt(t,16)):r.alpha=parseInt(t,16)/255}))):(this.rgb=[],t.split("").map((function(t,e){e<3?r.rgb.push(parseInt(t+t,16)):r.alpha=parseInt(t+t,16)/255}))),this.alpha=this.alpha||("number"==typeof e?e:1),void 0!==n&&(this.value=n)};(a.prototype=new i).type="Color",a.prototype.luma=function(){var t=this.rgb[0]/255,e=this.rgb[1]/255,n=this.rgb[2]/255;return.2126*(t=t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(e=e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.0722*(n=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},a.prototype.genCSS=function(t,e){e.add(this.toCSS(t))},a.prototype.toCSS=function(t,e){var n,o,i,s=t&&t.compress&&!e,a=[];if(o=this.fround(t,this.alpha),this.value)if(0===this.value.indexOf("rgb"))o<1&&(i="rgba");else{if(0!==this.value.indexOf("hsl"))return this.value;i=o<1?"hsla":"hsl"}else o<1&&(i="rgba");switch(i){case"rgba":a=this.rgb.map((function(t){return r(Math.round(t),255)})).concat(r(o,1));break;case"hsla":a.push(r(o,1));case"hsl":n=this.toHSL(),a=[this.fround(t,n.h),this.fround(t,100*n.s)+"%",this.fround(t,100*n.l)+"%"].concat(a)}if(i)return i+"("+a.join(","+(s?"":" "))+")";if(n=this.toRGB(),s){var u=n.split("");u[1]===u[2]&&u[3]===u[4]&&u[5]===u[6]&&(n="#"+u[1]+u[3]+u[5])}return n},a.prototype.operate=function(t,e,n){for(var r=new Array(3),o=this.alpha*(1-n.alpha)+n.alpha,i=0;i<3;i++)r[i]=this._operate(t,e,this.rgb[i],n.rgb[i]);return new a(r,o)},a.prototype.toRGB=function(){return o(this.rgb)},a.prototype.toHSL=function(){var t,e,n=this.rgb[0]/255,r=this.rgb[1]/255,o=this.rgb[2]/255,i=this.alpha,s=Math.max(n,r,o),a=Math.min(n,r,o),u=(s+a)/2,l=s-a;if(s===a)t=e=0;else{switch(e=u>.5?l/(2-s-a):l/(s+a),s){case n:t=(r-o)/l+(r<o?6:0);break;case r:t=(o-n)/l+2;break;case o:t=(n-r)/l+4}t/=6}return{h:360*t,s:e,l:u,a:i}},a.prototype.toHSV=function(){var t,e,n=this.rgb[0]/255,r=this.rgb[1]/255,o=this.rgb[2]/255,i=this.alpha,s=Math.max(n,r,o),a=Math.min(n,r,o),u=s,l=s-a;if(e=0===s?0:l/s,s===a)t=0;else{switch(s){case n:t=(r-o)/l+(r<o?6:0);break;case r:t=(o-n)/l+2;break;case o:t=(n-r)/l+4}t/=6}return{h:360*t,s:e,v:u,a:i}},a.prototype.toARGB=function(){return o([255*this.alpha].concat(this.rgb))},a.prototype.compare=function(t){return t.rgb&&t.rgb[0]===this.rgb[0]&&t.rgb[1]===this.rgb[1]&&t.rgb[2]===this.rgb[2]&&t.alpha===this.alpha?0:void 0},a.fromKeyword=function(t){var e,n=t.toLowerCase();if(s.hasOwnProperty(n)?e=new a(s[n].slice(1)):"transparent"===n&&(e=new a([0,0,0],0)),e)return e.value=t,e},e.exports=a},{"../data/colors":14,"./node":76}],56:[function(t,e,n){var r=t("./node"),o=function(t){" "===t?(this.value=" ",this.emptyOrWhitespace=!0):(this.value=t?t.trim():"",this.emptyOrWhitespace=""===this.value)};(o.prototype=new r).type="Combinator";var i={"":!0," ":!0,"|":!0};o.prototype.genCSS=function(t,e){var n=t.compress||i[this.value]?"":" ";e.add(n+this.value+n)},e.exports=o},{"./node":76}],57:[function(t,e,n){var r=t("./node"),o=t("./debug-info"),i=function(t,e,n,r){this.value=t,this.isLineComment=e,this._index=n,this._fileInfo=r,this.allowRoot=!0};(i.prototype=new r).type="Comment",i.prototype.genCSS=function(t,e){this.debugInfo&&e.add(o(t,this),this.fileInfo(),this.getIndex()),e.add(this.value)},i.prototype.isSilent=function(t){var e=t.compress&&"!"!==this.value[2];return this.isLineComment||e},e.exports=i},{"./debug-info":59,"./node":76}],58:[function(t,e,n){var r=t("./node"),o=function(t,e,n,r,o){this.op=t.trim(),this.lvalue=e,this.rvalue=n,this._index=r,this.negate=o};(o.prototype=new r).type="Condition",o.prototype.accept=function(t){this.lvalue=t.visit(this.lvalue),this.rvalue=t.visit(this.rvalue)},o.prototype.eval=function(t){var e=function(t,e,n){switch(t){case"and":return e&&n;case"or":return e||n;default:switch(r.compare(e,n)){case-1:return"<"===t||"=<"===t||"<="===t;case 0:return"="===t||">="===t||"=<"===t||"<="===t;case 1:return">"===t||">="===t;default:return!1}}}(this.op,this.lvalue.eval(t),this.rvalue.eval(t));return this.negate?!e:e},e.exports=o},{"./node":76}],59:[function(t,e,n){var r=function t(e,n,r){var o="";if(e.dumpLineNumbers&&!e.compress)switch(e.dumpLineNumbers){case"comments":o=t.asComment(n);break;case"mediaquery":o=t.asMediaQuery(n);break;case"all":o=t.asComment(n)+(r||"")+t.asMediaQuery(n)}return o};r.asComment=function(t){return"/* line "+t.debugInfo.lineNumber+", "+t.debugInfo.fileName+" */\n"},r.asMediaQuery=function(t){var e=t.debugInfo.fileName;return/^[a-z]+:\/\//i.test(e)||(e="file://"+e),"@media -sass-debug-info{filename{font-family:"+e.replace(/([.:\/\\])/g,(function(t){return"\\"==t&&(t="/"),"\\"+t}))+"}line{font-family:\\00003"+t.debugInfo.lineNumber+"}}\n"},e.exports=r},{}],60:[function(t,e,n){var r=t("./node"),o=t("./value"),i=t("./keyword"),s=t("./anonymous"),a=t("../constants").Math,u=function(t,e,n,i,a,u,l,c){this.name=t,this.value=e instanceof r?e:new o([e?new s(e):null]),this.important=n?" "+n.trim():"",this.merge=i,this._index=a,this._fileInfo=u,this.inline=l||!1,this.variable=void 0!==c?c:t.charAt&&"@"===t.charAt(0),this.allowRoot=!0,this.setParent(this.value,this)};(u.prototype=new r).type="Declaration",u.prototype.genCSS=function(t,e){e.add(this.name+(t.compress?":":": "),this.fileInfo(),this.getIndex());try{this.value.genCSS(t,e)}catch(t){throw t.index=this._index,t.filename=this._fileInfo.filename,t}e.add(this.important+(this.inline||t.lastRule&&t.compress?"":";"),this._fileInfo,this._index)},u.prototype.eval=function(t){var e,n,r=!1,o=this.name,s=this.variable;"string"!=typeof o&&(o=1===o.length&&o[0]instanceof i?o[0].value:function(t,e){var n,r="",o=e.length,i={add:function(t){r+=t}};for(n=0;n<o;n++)e[n].eval(t).genCSS(t,i);return r}(t,o),s=!1),"font"===o&&t.math===a.ALWAYS&&(r=!0,e=t.math,t.math=a.PARENS_DIVISION);try{if(t.importantScope.push({}),n=this.value.eval(t),!this.variable&&"DetachedRuleset"===n.type)throw{message:"Rulesets cannot be evaluated on a property.",index:this.getIndex(),filename:this.fileInfo().filename};var l=this.important,c=t.importantScope.pop();return!l&&c.important&&(l=c.important),new u(o,n,l,this.merge,this.getIndex(),this.fileInfo(),this.inline,s)}catch(t){throw"number"!=typeof t.index&&(t.index=this.getIndex(),t.filename=this.fileInfo().filename),t}finally{r&&(t.math=e)}},u.prototype.makeImportant=function(){return new u(this.name,this.value,"!important",this.merge,this.getIndex(),this.fileInfo(),this.inline)},e.exports=u},{"../constants":12,"./anonymous":50,"./keyword":70,"./node":76,"./value":86}],61:[function(t,e,n){var r=t("./node"),o=t("../contexts"),i=t("../utils"),s=function(t,e){this.ruleset=t,this.frames=e,this.setParent(this.ruleset,this)};(s.prototype=new r).type="DetachedRuleset",s.prototype.evalFirst=!0,s.prototype.accept=function(t){this.ruleset=t.visit(this.ruleset)},s.prototype.eval=function(t){var e=this.frames||i.copyArray(t.frames);return new s(this.ruleset,e)},s.prototype.callEval=function(t){return this.ruleset.eval(this.frames?new o.Eval(t,this.frames.concat(t.frames)):t)},e.exports=s},{"../contexts":13,"../utils":89,"./node":76}],62:[function(t,e,n){var r=t("./node"),o=t("../data/unit-conversions"),i=t("./unit"),s=t("./color"),a=function(t,e){if(this.value=parseFloat(t),isNaN(this.value))throw new Error("Dimension is not a number.");this.unit=e&&e instanceof i?e:new i(e?[e]:void 0),this.setParent(this.unit,this)};(a.prototype=new r).type="Dimension",a.prototype.accept=function(t){this.unit=t.visit(this.unit)},a.prototype.eval=function(t){return this},a.prototype.toColor=function(){return new s([this.value,this.value,this.value])},a.prototype.genCSS=function(t,e){if(t&&t.strictUnits&&!this.unit.isSingular())throw new Error("Multiple units in dimension. Correct the units or use the unit function. Bad unit: "+this.unit.toString());var n=this.fround(t,this.value),r=String(n);if(0!==n&&n<1e-6&&n>-1e-6&&(r=n.toFixed(20).replace(/0+$/,"")),t&&t.compress){if(0===n&&this.unit.isLength())return void e.add(r);n>0&&n<1&&(r=r.substr(1))}e.add(r),this.unit.genCSS(t,e)},a.prototype.operate=function(t,e,n){var r=this._operate(t,e,this.value,n.value),o=this.unit.clone();if("+"===e||"-"===e)if(0===o.numerator.length&&0===o.denominator.length)o=n.unit.clone(),this.unit.backupUnit&&(o.backupUnit=this.unit.backupUnit);else if(0===n.unit.numerator.length&&0===o.denominator.length);else{if(n=n.convertTo(this.unit.usedUnits()),t.strictUnits&&n.unit.toString()!==o.toString())throw new Error("Incompatible units. Change the units or use the unit function. Bad units: '"+o.toString()+"' and '"+n.unit.toString()+"'.");r=this._operate(t,e,this.value,n.value)}else"*"===e?(o.numerator=o.numerator.concat(n.unit.numerator).sort(),o.denominator=o.denominator.concat(n.unit.denominator).sort(),o.cancel()):"/"===e&&(o.numerator=o.numerator.concat(n.unit.denominator).sort(),o.denominator=o.denominator.concat(n.unit.numerator).sort(),o.cancel());return new a(r,o)},a.prototype.compare=function(t){var e,n;if(t instanceof a){if(this.unit.isEmpty()||t.unit.isEmpty())e=this,n=t;else if(e=this.unify(),n=t.unify(),0!==e.unit.compare(n.unit))return;return r.numericCompare(e.value,n.value)}},a.prototype.unify=function(){return this.convertTo({length:"px",duration:"s",angle:"rad"})},a.prototype.convertTo=function(t){var e,n,r,i,s,u=this.value,l=this.unit.clone(),c={};if("string"==typeof t){for(e in o)o[e].hasOwnProperty(t)&&((c={})[e]=t);t=c}for(n in s=function(t,e){return r.hasOwnProperty(t)?(e?u/=r[t]/r[i]:u*=r[t]/r[i],i):t},t)t.hasOwnProperty(n)&&(i=t[n],r=o[n],l.map(s));return l.cancel(),new a(u,l)},e.exports=a},{"../data/unit-conversions":16,"./color":55,"./node":76,"./unit":84}],63:[function(t,e,n){var r=t("./node"),o=t("./paren"),i=t("./combinator"),s=function(t,e,n,r,o,s){this.combinator=t instanceof i?t:new i(t),this.value="string"==typeof e?e.trim():e||"",this.isVariable=n,this._index=r,this._fileInfo=o,this.copyVisibilityInfo(s),this.setParent(this.combinator,this)};(s.prototype=new r).type="Element",s.prototype.accept=function(t){var e=this.value;this.combinator=t.visit(this.combinator),"object"==(void 0===e?"undefined":u(e))&&(this.value=t.visit(e))},s.prototype.eval=function(t){return new s(this.combinator,this.value.eval?this.value.eval(t):this.value,this.isVariable,this.getIndex(),this.fileInfo(),this.visibilityInfo())},s.prototype.clone=function(){return new s(this.combinator,this.value,this.isVariable,this.getIndex(),this.fileInfo(),this.visibilityInfo())},s.prototype.genCSS=function(t,e){e.add(this.toCSS(t),this.fileInfo(),this.getIndex())},s.prototype.toCSS=function(t){t=t||{};var e=this.value,n=t.firstSelector;return e instanceof o&&(t.firstSelector=!0),e=e.toCSS?e.toCSS(t):e,t.firstSelector=n,""===e&&"&"===this.combinator.value.charAt(0)?"":this.combinator.toCSS(t)+e},e.exports=s},{"./combinator":56,"./node":76,"./paren":78}],64:[function(t,e,n){var r=t("./node"),o=t("./paren"),i=t("./comment"),s=t("./dimension"),a=t("../constants").Math,u=function(t,e){if(this.value=t,this.noSpacing=e,!t)throw new Error("Expression requires an array parameter")};(u.prototype=new r).type="Expression",u.prototype.accept=function(t){this.value=t.visitArray(this.value)},u.prototype.eval=function(t){var e,n=t.isMathOn(),r=this.parens&&(t.math!==a.STRICT_LEGACY||!this.parensInOp),i=!1;return r&&t.inParenthesis(),this.value.length>1?e=new u(this.value.map((function(e){return e.eval?e.eval(t):e})),this.noSpacing):1===this.value.length?(!this.value[0].parens||this.value[0].parensInOp||t.inCalc||(i=!0),e=this.value[0].eval(t)):e=this,r&&t.outOfParenthesis(),!this.parens||!this.parensInOp||n||i||e instanceof s||(e=new o(e)),e},u.prototype.genCSS=function(t,e){for(var n=0;n<this.value.length;n++)this.value[n].genCSS(t,e),!this.noSpacing&&n+1<this.value.length&&e.add(" ")},u.prototype.throwAwayComments=function(){this.value=this.value.filter((function(t){return!(t instanceof i)}))},e.exports=u},{"../constants":12,"./comment":57,"./dimension":62,"./node":76,"./paren":78}],65:[function(t,e,n){var r=t("./node"),o=t("./selector"),i=function t(e,n,r,o,i){switch(this.selector=e,this.option=n,this.object_id=t.next_id++,this.parent_ids=[this.object_id],this._index=r,this._fileInfo=o,this.copyVisibilityInfo(i),this.allowRoot=!0,n){case"all":this.allowBefore=!0,this.allowAfter=!0;break;default:this.allowBefore=!1,this.allowAfter=!1}this.setParent(this.selector,this)};i.next_id=0,(i.prototype=new r).type="Extend",i.prototype.accept=function(t){this.selector=t.visit(this.selector)},i.prototype.eval=function(t){return new i(this.selector.eval(t),this.option,this.getIndex(),this.fileInfo(),this.visibilityInfo())},i.prototype.clone=function(t){return new i(this.selector,this.option,this.getIndex(),this.fileInfo(),this.visibilityInfo())},i.prototype.findSelfSelectors=function(t){var e,n,r=[];for(e=0;e<t.length;e++)n=t[e].elements,e>0&&n.length&&""===n[0].combinator.value&&(n[0].combinator.value=" "),r=r.concat(t[e].elements);this.selfSelectors=[new o(r)],this.selfSelectors[0].copyVisibilityInfo(this.visibilityInfo())},e.exports=i},{"./node":76,"./selector":82}],66:[function(t,e,n){var r=t("./node"),o=t("./media"),i=t("./url"),s=t("./quoted"),a=t("./ruleset"),u=t("./anonymous"),l=t("../utils"),c=t("../less-error"),p=function(t,e,n,r,o,i){if(this.options=n,this._index=r,this._fileInfo=o,this.path=t,this.features=e,this.allowRoot=!0,void 0!==this.options.less||this.options.inline)this.css=!this.options.less||this.options.inline;else{var s=this.getPath();s&&/[#\.\&\?]css([\?;].*)?$/.test(s)&&(this.css=!0)}this.copyVisibilityInfo(i),this.setParent(this.features,this),this.setParent(this.path,this)};(p.prototype=new r).type="Import",p.prototype.accept=function(t){this.features&&(this.features=t.visit(this.features)),this.path=t.visit(this.path),this.options.isPlugin||this.options.inline||!this.root||(this.root=t.visit(this.root))},p.prototype.genCSS=function(t,e){this.css&&void 0===this.path._fileInfo.reference&&(e.add("@import ",this._fileInfo,this._index),this.path.genCSS(t,e),this.features&&(e.add(" "),this.features.genCSS(t,e)),e.add(";"))},p.prototype.getPath=function(){return this.path instanceof i?this.path.value.value:this.path.value},p.prototype.isVariableImport=function(){var t=this.path;return t instanceof i&&(t=t.value),!(t instanceof s)||t.containsVariables()},p.prototype.evalForImport=function(t){var e=this.path;return e instanceof i&&(e=e.value),new p(e.eval(t),this.features,this.options,this._index,this._fileInfo,this.visibilityInfo())},p.prototype.evalPath=function(t){var e=this.path.eval(t),n=this._fileInfo;if(!(e instanceof i)){var r=e.value;e.value=n&&r&&t.pathRequiresRewrite(r)?t.rewritePath(r,n.rootpath):t.normalizePath(e.value)}return e},p.prototype.eval=function(t){var e=this.doEval(t);return(this.options.reference||this.blocksVisibility())&&(e.length||0===e.length?e.forEach((function(t){t.addVisibilityBlock()})):e.addVisibilityBlock()),e},p.prototype.doEval=function(t){var e,n,r=this.features&&this.features.eval(t);if(this.options.isPlugin){if(this.root&&this.root.eval)try{this.root.eval(t)}catch(t){throw t.message="Plugin error during evaluation",new c(t,this.root.imports,this.root.filename)}return(n=t.frames[0]&&t.frames[0].functionRegistry)&&this.root&&this.root.functions&&n.addMultiple(this.root.functions),[]}if(this.skip&&("function"==typeof this.skip&&(this.skip=this.skip()),this.skip))return[];if(this.options.inline){var i=new u(this.root,0,{filename:this.importedFilename,reference:this.path._fileInfo&&this.path._fileInfo.reference},!0,!0);return this.features?new o([i],this.features.value):[i]}if(this.css){var s=new p(this.evalPath(t),r,this.options,this._index);if(!s.css&&this.error)throw this.error;return s}return(e=new a(null,l.copyArray(this.root.rules))).evalImports(t),this.features?new o(e.rules,this.features.value):e.rules},e.exports=p},{"../less-error":38,"../utils":89,"./anonymous":50,"./media":71,"./node":76,"./quoted":80,"./ruleset":81,"./url":85}],67:[function(t,e,n){var r=Object.create(null);r.Node=t("./node"),r.Color=t("./color"),r.AtRule=t("./atrule"),r.DetachedRuleset=t("./detached-ruleset"),r.Operation=t("./operation"),r.Dimension=t("./dimension"),r.Unit=t("./unit"),r.Keyword=t("./keyword"),r.Variable=t("./variable"),r.Property=t("./property"),r.Ruleset=t("./ruleset"),r.Element=t("./element"),r.Attribute=t("./attribute"),r.Combinator=t("./combinator"),r.Selector=t("./selector"),r.Quoted=t("./quoted"),r.Expression=t("./expression"),r.Declaration=t("./declaration"),r.Call=t("./call"),r.URL=t("./url"),r.Import=t("./import"),r.mixin={Call:t("./mixin-call"),Definition:t("./mixin-definition")},r.Comment=t("./comment"),r.Anonymous=t("./anonymous"),r.Value=t("./value"),r.JavaScript=t("./javascript"),r.Assignment=t("./assignment"),r.Condition=t("./condition"),r.Paren=t("./paren"),r.Media=t("./media"),r.UnicodeDescriptor=t("./unicode-descriptor"),r.Negative=t("./negative"),r.Extend=t("./extend"),r.VariableCall=t("./variable-call"),r.NamespaceValue=t("./namespace-value"),e.exports=r},{"./anonymous":50,"./assignment":51,"./atrule":52,"./attribute":53,"./call":54,"./color":55,"./combinator":56,"./comment":57,"./condition":58,"./declaration":60,"./detached-ruleset":61,"./dimension":62,"./element":63,"./expression":64,"./extend":65,"./import":66,"./javascript":68,"./keyword":70,"./media":71,"./mixin-call":72,"./mixin-definition":73,"./namespace-value":74,"./negative":75,"./node":76,"./operation":77,"./paren":78,"./property":79,"./quoted":80,"./ruleset":81,"./selector":82,"./unicode-descriptor":83,"./unit":84,"./url":85,"./value":86,"./variable":88,"./variable-call":87}],68:[function(t,e,n){var r=t("./js-eval-node"),o=t("./dimension"),i=t("./quoted"),s=t("./anonymous"),a=function(t,e,n,r){this.escaped=e,this.expression=t,this._index=n,this._fileInfo=r};(a.prototype=new r).type="JavaScript",a.prototype.eval=function(t){var e=this.evaluateJavaScript(this.expression,t),n=void 0===e?"undefined":u(e);return"number"!==n||isNaN(e)?"string"===n?new i('"'+e+'"',e,this.escaped,this._index):new s(Array.isArray(e)?e.join(", "):e):new o(e)},e.exports=a},{"./anonymous":50,"./dimension":62,"./js-eval-node":69,"./quoted":80}],69:[function(t,e,n){var r=t("./node"),o=t("./variable"),i=function(){};(i.prototype=new r).evaluateJavaScript=function(t,e){var n,r=this,i={};if(!e.javascriptEnabled)throw{message:"Inline JavaScript is not enabled. Is it set in your options?",filename:this.fileInfo().filename,index:this.getIndex()};t=t.replace(/@\{([\w-]+)\}/g,(function(t,n){return r.jsify(new o("@"+n,r.getIndex(),r.fileInfo()).eval(e))}));try{t=new Function("return ("+t+")")}catch(e){throw{message:"JavaScript evaluation error: "+e.message+" from `"+t+"`",filename:this.fileInfo().filename,index:this.getIndex()}}var s=e.frames[0].variables();for(var a in s)s.hasOwnProperty(a)&&(i[a.slice(1)]={value:s[a].value,toJS:function(){return this.value.eval(e).toCSS()}});try{n=t.call(i)}catch(t){throw{message:"JavaScript evaluation error: '"+t.name+": "+t.message.replace(/["]/g,"'")+"'",filename:this.fileInfo().filename,index:this.getIndex()}}return n},i.prototype.jsify=function(t){return Array.isArray(t.value)&&t.value.length>1?"["+t.value.map((function(t){return t.toCSS()})).join(", ")+"]":t.toCSS()},e.exports=i},{"./node":76,"./variable":88}],70:[function(t,e,n){var r=t("./node"),o=function(t){this.value=t};(o.prototype=new r).type="Keyword",o.prototype.genCSS=function(t,e){if("%"===this.value)throw{type:"Syntax",message:"Invalid % without number"};e.add(this.value)},o.True=new o("true"),o.False=new o("false"),e.exports=o},{"./node":76}],71:[function(t,e,n){var r=t("./ruleset"),o=t("./value"),i=t("./selector"),s=t("./anonymous"),a=t("./expression"),u=t("./atrule"),l=t("../utils"),c=function(t,e,n,s,a){this._index=n,this._fileInfo=s;var u=new i([],null,null,this._index,this._fileInfo).createEmptySelectors();this.features=new o(e),this.rules=[new r(u,t)],this.rules[0].allowImports=!0,this.copyVisibilityInfo(a),this.allowRoot=!0,this.setParent(u,this),this.setParent(this.features,this),this.setParent(this.rules,this)};(c.prototype=new u).type="Media",c.prototype.isRulesetLike=function(){return!0},c.prototype.accept=function(t){this.features&&(this.features=t.visit(this.features)),this.rules&&(this.rules=t.visitArray(this.rules))},c.prototype.genCSS=function(t,e){e.add("@media ",this._fileInfo,this._index),this.features.genCSS(t,e),this.outputRuleset(t,e,this.rules)},c.prototype.eval=function(t){t.mediaBlocks||(t.mediaBlocks=[],t.mediaPath=[]);var e=new c(null,[],this._index,this._fileInfo,this.visibilityInfo());return this.debugInfo&&(this.rules[0].debugInfo=this.debugInfo,e.debugInfo=this.debugInfo),e.features=this.features.eval(t),t.mediaPath.push(e),t.mediaBlocks.push(e),this.rules[0].functionRegistry=t.frames[0].functionRegistry.inherit(),t.frames.unshift(this.rules[0]),e.rules=[this.rules[0].eval(t)],t.frames.shift(),t.mediaPath.pop(),0===t.mediaPath.length?e.evalTop(t):e.evalNested(t)},c.prototype.evalTop=function(t){var e=this;if(t.mediaBlocks.length>1){var n=new i([],null,null,this.getIndex(),this.fileInfo()).createEmptySelectors();(e=new r(n,t.mediaBlocks)).multiMedia=!0,e.copyVisibilityInfo(this.visibilityInfo()),this.setParent(e,this)}return delete t.mediaBlocks,delete t.mediaPath,e},c.prototype.evalNested=function(t){var e,n,i=t.mediaPath.concat([this]);for(e=0;e<i.length;e++)n=i[e].features instanceof o?i[e].features.value:i[e].features,i[e]=Array.isArray(n)?n:[n];return this.features=new o(this.permute(i).map((function(t){for(t=t.map((function(t){return t.toCSS?t:new s(t)})),e=t.length-1;e>0;e--)t.splice(e,0,new s("and"));return new a(t)}))),this.setParent(this.features,this),new r([],[])},c.prototype.permute=function(t){if(0===t.length)return[];if(1===t.length)return t[0];for(var e=[],n=this.permute(t.slice(1)),r=0;r<n.length;r++)for(var o=0;o<t[0].length;o++)e.push([t[0][o]].concat(n[r]));return e},c.prototype.bubbleSelectors=function(t){t&&(this.rules=[new r(l.copyArray(t),[this.rules[0]])],this.setParent(this.rules,this))},e.exports=c},{"../utils":89,"./anonymous":50,"./atrule":52,"./expression":64,"./ruleset":81,"./selector":82,"./value":86}],72:[function(t,e,n){var r=t("./node"),o=t("./selector"),i=t("./mixin-definition"),s=t("../functions/default"),a=function(t,e,n,r,i){this.selector=new o(t),this.arguments=e||[],this._index=n,this._fileInfo=r,this.important=i,this.allowRoot=!0,this.setParent(this.selector,this)};(a.prototype=new r).type="MixinCall",a.prototype.accept=function(t){this.selector&&(this.selector=t.visit(this.selector)),this.arguments.length&&(this.arguments=t.visitArray(this.arguments))},a.prototype.eval=function(t){function e(e,n){var r,o,i;for(r=0;r<2;r++){for(I[r]=!0,s.value(r),o=0;o<n.length&&I[r];o++)(i=n[o]).matchCondition&&(I[r]=I[r]&&i.matchCondition(null,t));e.matchCondition&&(I[r]=I[r]&&e.matchCondition(b,t))}return I[0]||I[1]?I[0]!=I[1]?I[1]?w:_:S:T}var n,r,o,a,u,l,c,p,d,h,f,g,m,y,v,b=[],C=[],E=!1,A=[],I=[],T=-1,S=0,w=1,_=2;for(this.selector=this.selector.eval(t),l=0;l<this.arguments.length;l++)if(u=(a=this.arguments[l]).value.eval(t),a.expand&&Array.isArray(u.value))for(u=u.value,c=0;c<u.length;c++)b.push({value:u[c]});else b.push({name:a.name,value:u});for(v=function(e){return e.matchArgs(null,t)},l=0;l<t.frames.length;l++)if((n=t.frames[l].find(this.selector,null,v)).length>0){for(h=!0,c=0;c<n.length;c++){for(r=n[c].rule,o=n[c].path,d=!1,p=0;p<t.frames.length;p++)if(!(r instanceof i)&&r===(t.frames[p].originalRuleset||t.frames[p])){d=!0;break}d||r.matchArgs(b,t)&&((f={mixin:r,group:e(r,o)}).group!==T&&A.push(f),E=!0)}for(s.reset(),m=[0,0,0],c=0;c<A.length;c++)m[A[c].group]++;if(m[S]>0)g=_;else if(g=w,m[w]+m[_]>1)throw{type:"Runtime",message:"Ambiguous use of `default()` found when matching for `"+this.format(b)+"`",index:this.getIndex(),filename:this.fileInfo().filename};for(c=0;c<A.length;c++)if((f=A[c].group)===S||f===g)try{(r=A[c].mixin)instanceof i||(y=r.originalRuleset||r,(r=new i("",[],r.rules,null,!1,null,y.visibilityInfo())).originalRuleset=y);var N=r.evalCall(t,b,this.important).rules;this._setVisibilityToReplacement(N),Array.prototype.push.apply(C,N)}catch(t){throw{message:t.message,index:this.getIndex(),filename:this.fileInfo().filename,stack:t.stack}}if(E)return C}throw h?{type:"Runtime",message:"No matching definition was found for `"+this.format(b)+"`",index:this.getIndex(),filename:this.fileInfo().filename}:{type:"Name",message:this.selector.toCSS().trim()+" is undefined",index:this.getIndex(),filename:this.fileInfo().filename}},a.prototype._setVisibilityToReplacement=function(t){var e;if(this.blocksVisibility())for(e=0;e<t.length;e++)t[e].addVisibilityBlock()},a.prototype.format=function(t){return this.selector.toCSS().trim()+"("+(t?t.map((function(t){var e="";return t.name&&(e+=t.name+":"),e+(t.value.toCSS?t.value.toCSS():"???")})).join(", "):"")+")"},e.exports=a},{"../functions/default":25,"./mixin-definition":73,"./node":76,"./selector":82}],73:[function(t,e,n){var r=t("./selector"),o=t("./element"),i=t("./ruleset"),s=t("./declaration"),a=t("./detached-ruleset"),u=t("./expression"),l=t("../contexts"),c=t("../utils"),p=function(t,e,n,i,s,a,u){this.name=t||"anonymous mixin",this.selectors=[new r([new o(null,t,!1,this._index,this._fileInfo)])],this.params=e,this.condition=i,this.variadic=s,this.arity=e.length,this.rules=n,this._lookups={};var l=[];this.required=e.reduce((function(t,e){return!e.name||e.name&&!e.value?t+1:(l.push(e.name),t)}),0),this.optionalParameters=l,this.frames=a,this.copyVisibilityInfo(u),this.allowRoot=!0};(p.prototype=new i).type="MixinDefinition",p.prototype.evalFirst=!0,p.prototype.accept=function(t){this.params&&this.params.length&&(this.params=t.visitArray(this.params)),this.rules=t.visitArray(this.rules),this.condition&&(this.condition=t.visit(this.condition))},p.prototype.evalParams=function(t,e,n,r){var o,p,d,h,f,g,m,y,v=new i(null,null),b=c.copyArray(this.params),C=0;if(e.frames&&e.frames[0]&&e.frames[0].functionRegistry&&(v.functionRegistry=e.frames[0].functionRegistry.inherit()),e=new l.Eval(e,[v].concat(e.frames)),n)for(C=(n=c.copyArray(n)).length,d=0;d<C;d++)if(g=(p=n[d])&&p.name){for(m=!1,h=0;h<b.length;h++)if(!r[h]&&g===b[h].name){r[h]=p.value.eval(t),v.prependRule(new s(g,p.value.eval(t))),m=!0;break}if(m){n.splice(d,1),d--;continue}throw{type:"Runtime",message:"Named argument for "+this.name+" "+n[d].name+" not found"}}for(y=0,d=0;d<b.length;d++)if(!r[d]){if(p=n&&n[y],g=b[d].name)if(b[d].variadic){for(o=[],h=y;h<C;h++)o.push(n[h].value.eval(t));v.prependRule(new s(g,new u(o).eval(t)))}else{if(f=p&&p.value)f=Array.isArray(f)?new a(new i("",f)):f.eval(t);else{if(!b[d].value)throw{type:"Runtime",message:"wrong number of arguments for "+this.name+" ("+C+" for "+this.arity+")"};f=b[d].value.eval(e),v.resetCache()}v.prependRule(new s(g,f)),r[d]=f}if(b[d].variadic&&n)for(h=y;h<C;h++)r[h]=n[h].value.eval(t);y++}return v},p.prototype.makeImportant=function(){var t=this.rules?this.rules.map((function(t){return t.makeImportant?t.makeImportant(!0):t})):this.rules;return new p(this.name,this.params,t,this.condition,this.variadic,this.frames)},p.prototype.eval=function(t){return new p(this.name,this.params,this.rules,this.condition,this.variadic,this.frames||c.copyArray(t.frames))},p.prototype.evalCall=function(t,e,n){var r,o,a=[],p=this.frames?this.frames.concat(t.frames):t.frames,d=this.evalParams(t,new l.Eval(t,p),e,a);return d.prependRule(new s("@arguments",new u(a).eval(t))),r=c.copyArray(this.rules),(o=new i(null,r)).originalRuleset=this,o=o.eval(new l.Eval(t,[this,d].concat(p))),n&&(o=o.makeImportant()),o},p.prototype.matchCondition=function(t,e){return!(this.condition&&!this.condition.eval(new l.Eval(e,[this.evalParams(e,new l.Eval(e,this.frames?this.frames.concat(e.frames):e.frames),t,[])].concat(this.frames||[]).concat(e.frames))))},p.prototype.matchArgs=function(t,e){var n,r=t&&t.length||0,o=this.optionalParameters,i=t?t.reduce((function(t,e){return o.indexOf(e.name)<0?t+1:t}),0):0;if(this.variadic){if(i<this.required-1)return!1}else{if(i<this.required)return!1;if(r>this.params.length)return!1}n=Math.min(i,this.arity);for(var s=0;s<n;s++)if(!this.params[s].name&&!this.params[s].variadic&&t[s].value.eval(e).toCSS()!=this.params[s].value.eval(e).toCSS())return!1;return!0},e.exports=p},{"../contexts":13,"../utils":89,"./declaration":60,"./detached-ruleset":61,"./element":63,"./expression":64,"./ruleset":81,"./selector":82}],74:[function(t,e,n){var r=t("./node"),o=t("./variable"),i=t("./ruleset"),s=t("./selector"),a=function(t,e,n,r,o){this.value=t,this.lookups=e,this.important=n,this._index=r,this._fileInfo=o};(a.prototype=new r).type="NamespaceValue",a.prototype.eval=function(t){var e,n,r=this.value.eval(t);for(e=0;e<this.lookups.length;e++){if(n=this.lookups[e],Array.isArray(r)&&(r=new i([new s],r)),""===n)r=r.lastDeclaration();else if("@"===n.charAt(0)){if("@"===n.charAt(1)&&(n="@"+new o(n.substr(1)).eval(t).value),r.variables&&(r=r.variable(n)),!r)throw{type:"Name",message:"variable "+n+" not found",filename:this.fileInfo().filename,index:this.getIndex()}}else{if(n="$@"===n.substring(0,2)?"$"+new o(n.substr(1)).eval(t).value:"$"===n.charAt(0)?n:"$"+n,r.properties&&(r=r.property(n)),!r)throw{type:"Name",message:'property "'+n.substr(1)+'" not found',filename:this.fileInfo().filename,index:this.getIndex()};r=r[r.length-1]}r.value&&(r=r.eval(t).value),r.ruleset&&(r=r.ruleset.eval(t))}return r},e.exports=a},{"./node":76,"./ruleset":81,"./selector":82,"./variable":88}],75:[function(t,e,n){var r=t("./node"),o=t("./operation"),i=t("./dimension"),s=function(t){this.value=t};(s.prototype=new r).type="Negative",s.prototype.genCSS=function(t,e){e.add("-"),this.value.genCSS(t,e)},s.prototype.eval=function(t){return t.isMathOn()?new o("*",[new i(-1),this.value]).eval(t):new s(this.value.eval(t))},e.exports=s},{"./dimension":62,"./node":76,"./operation":77}],76:[function(t,e,n){var r=function(){this.parent=null,this.visibilityBlocks=void 0,this.nodeVisible=void 0,this.rootNode=null,this.parsed=null;var t=this;Object.defineProperty(this,"currentFileInfo",{get:function(){return t.fileInfo()}}),Object.defineProperty(this,"index",{get:function(){return t.getIndex()}})};r.prototype.setParent=function(t,e){function n(t){t&&t instanceof r&&(t.parent=e)}Array.isArray(t)?t.forEach(n):n(t)},r.prototype.getIndex=function(){return this._index||this.parent&&this.parent.getIndex()||0},r.prototype.fileInfo=function(){return this._fileInfo||this.parent&&this.parent.fileInfo()||{}},r.prototype.isRulesetLike=function(){return!1},r.prototype.toCSS=function(t){var e=[];return this.genCSS(t,{add:function(t,n,r){e.push(t)},isEmpty:function(){return 0===e.length}}),e.join("")},r.prototype.genCSS=function(t,e){e.add(this.value)},r.prototype.accept=function(t){this.value=t.visit(this.value)},r.prototype.eval=function(){return this},r.prototype._operate=function(t,e,n,r){switch(e){case"+":return n+r;case"-":return n-r;case"*":return n*r;case"/":return n/r}},r.prototype.fround=function(t,e){var n=t&&t.numPrecision;return n?Number((e+2e-16).toFixed(n)):e},r.compare=function(t,e){if(t.compare&&"Quoted"!==e.type&&"Anonymous"!==e.type)return t.compare(e);if(e.compare)return-e.compare(t);if(t.type===e.type){if(t=t.value,e=e.value,!Array.isArray(t))return t===e?0:void 0;if(t.length===e.length){for(var n=0;n<t.length;n++)if(0!==r.compare(t[n],e[n]))return;return 0}}},r.numericCompare=function(t,e){return t<e?-1:t===e?0:t>e?1:void 0},r.prototype.blocksVisibility=function(){return null==this.visibilityBlocks&&(this.visibilityBlocks=0),0!==this.visibilityBlocks},r.prototype.addVisibilityBlock=function(){null==this.visibilityBlocks&&(this.visibilityBlocks=0),this.visibilityBlocks=this.visibilityBlocks+1},r.prototype.removeVisibilityBlock=function(){null==this.visibilityBlocks&&(this.visibilityBlocks=0),this.visibilityBlocks=this.visibilityBlocks-1},r.prototype.ensureVisibility=function(){this.nodeVisible=!0},r.prototype.ensureInvisibility=function(){this.nodeVisible=!1},r.prototype.isVisible=function(){return this.nodeVisible},r.prototype.visibilityInfo=function(){return{visibilityBlocks:this.visibilityBlocks,nodeVisible:this.nodeVisible}},r.prototype.copyVisibilityInfo=function(t){t&&(this.visibilityBlocks=t.visibilityBlocks,this.nodeVisible=t.nodeVisible)},e.exports=r},{}],77:[function(t,e,n){var r=t("./node"),o=t("./color"),i=t("./dimension"),s=t("../constants").Math,a=function(t,e,n){this.op=t.trim(),this.operands=e,this.isSpaced=n};(a.prototype=new r).type="Operation",a.prototype.accept=function(t){this.operands=t.visit(this.operands)},a.prototype.eval=function(t){var e,n=this.operands[0].eval(t),r=this.operands[1].eval(t);if(t.isMathOn(this.op)){if(e="./"===this.op?"/":this.op,n instanceof i&&r instanceof o&&(n=n.toColor()),r instanceof i&&n instanceof o&&(r=r.toColor()),!n.operate){if(n instanceof a&&"/"===n.op&&t.math===s.PARENS_DIVISION)return new a(this.op,[n,r],this.isSpaced);throw{type:"Operation",message:"Operation on an invalid type"}}return n.operate(t,e,r)}return new a(this.op,[n,r],this.isSpaced)},a.prototype.genCSS=function(t,e){this.operands[0].genCSS(t,e),this.isSpaced&&e.add(" "),e.add(this.op),this.isSpaced&&e.add(" "),this.operands[1].genCSS(t,e)},e.exports=a},{"../constants":12,"./color":55,"./dimension":62,"./node":76}],78:[function(t,e,n){var r=t("./node"),o=function(t){this.value=t};(o.prototype=new r).type="Paren",o.prototype.genCSS=function(t,e){e.add("("),this.value.genCSS(t,e),e.add(")")},o.prototype.eval=function(t){return new o(this.value.eval(t))},e.exports=o},{"./node":76}],79:[function(t,e,n){var r=t("./node"),o=t("./declaration"),i=function(t,e,n){this.name=t,this._index=e,this._fileInfo=n};(i.prototype=new r).type="Property",i.prototype.eval=function(t){var e,n=this.name,r=t.pluginManager.less.visitors.ToCSSVisitor.prototype._mergeRules;if(this.evaluating)throw{type:"Name",message:"Recursive property reference for "+n,filename:this.fileInfo().filename,index:this.getIndex()};if(this.evaluating=!0,e=this.find(t.frames,(function(e){var i,s=e.property(n);if(s){for(var a=0;a<s.length;a++)i=s[a],s[a]=new o(i.name,i.value,i.important,i.merge,i.index,i.currentFileInfo,i.inline,i.variable);return r(s),(i=s[s.length-1]).important&&(t.importantScope[t.importantScope.length-1].important=i.important),i.value.eval(t)}})))return this.evaluating=!1,e;throw{type:"Name",message:"Property '"+n+"' is undefined",filename:this.currentFileInfo.filename,index:this.index}},i.prototype.find=function(t,e){for(var n,r=0;r<t.length;r++)if(n=e.call(t,t[r]))return n;return null},e.exports=i},{"./declaration":60,"./node":76}],80:[function(t,e,n){var r=t("./node"),o=t("./variable"),i=t("./property"),s=function(t,e,n,r,o){this.escaped=null==n||n,this.value=e||"",this.quote=t.charAt(0),this._index=r,this._fileInfo=o,this.variableRegex=/@\{([\w-]+)\}/g,this.propRegex=/\$\{([\w-]+)\}/g};(s.prototype=new r).type="Quoted",s.prototype.genCSS=function(t,e){this.escaped||e.add(this.quote,this.fileInfo(),this.getIndex()),e.add(this.value),this.escaped||e.add(this.quote)},s.prototype.containsVariables=function(){return this.value.match(this.variableRegex)},s.prototype.eval=function(t){function e(t,e,n){var r=t;do{r=(t=r).replace(e,n)}while(t!==r);return r}var n=this,r=this.value;return r=e(r,this.variableRegex,(function(e,r){var i=new o("@"+r,n.getIndex(),n.fileInfo()).eval(t,!0);return i instanceof s?i.value:i.toCSS()})),r=e(r,this.propRegex,(function(e,r){var o=new i("$"+r,n.getIndex(),n.fileInfo()).eval(t,!0);return o instanceof s?o.value:o.toCSS()})),new s(this.quote+r+this.quote,r,this.escaped,this.getIndex(),this.fileInfo())},s.prototype.compare=function(t){return"Quoted"!==t.type||this.escaped||t.escaped?t.toCSS&&this.toCSS()===t.toCSS()?0:void 0:r.numericCompare(this.value,t.value)},e.exports=s},{"./node":76,"./property":79,"./variable":88}],81:[function(t,e,n){var r=t("./node"),o=t("./declaration"),i=t("./keyword"),s=t("./comment"),a=t("./paren"),u=t("./selector"),l=t("./element"),c=t("./anonymous"),p=t("../contexts"),d=t("../functions/function-registry"),h=t("../functions/default"),f=t("./debug-info"),g=t("../utils"),m=function(t,e,n,r){this.selectors=t,this.rules=e,this._lookups={},this._variables=null,this._properties=null,this.strictImports=n,this.copyVisibilityInfo(r),this.allowRoot=!0,this.setParent(this.selectors,this),this.setParent(this.rules,this)};(m.prototype=new r).type="Ruleset",m.prototype.isRuleset=!0,m.prototype.isRulesetLike=function(){return!0},m.prototype.accept=function(t){this.paths?this.paths=t.visitArray(this.paths,!0):this.selectors&&(this.selectors=t.visitArray(this.selectors)),this.rules&&this.rules.length&&(this.rules=t.visitArray(this.rules))},m.prototype.eval=function(t){var e,n,i,s,a,u=!1;if(this.selectors&&(n=this.selectors.length)){for(e=new Array(n),h.error({type:"Syntax",message:"it is currently only allowed in parametric mixin guards,"}),s=0;s<n;s++){i=this.selectors[s].eval(t);for(var l=0;l<i.elements.length;l++)if(i.elements[l].isVariable){a=!0;break}e[s]=i,i.evaldCondition&&(u=!0)}if(a){var c=new Array(n);for(s=0;s<n;s++)i=e[s],c[s]=i.toCSS(t);this.parse.parseNode(c.join(","),["selectors"],e[0].getIndex(),e[0].fileInfo(),(function(t,n){n&&(e=g.flattenArray(n))}))}h.reset()}else u=!0;var p,f,y=this.rules?g.copyArray(this.rules):null,v=new m(e,y,this.strictImports,this.visibilityInfo());v.originalRuleset=this,v.root=this.root,v.firstRoot=this.firstRoot,v.allowImports=this.allowImports,this.debugInfo&&(v.debugInfo=this.debugInfo),u||(y.length=0),v.functionRegistry=function(t){for(var e,n=0,r=t.length;n!==r;++n)if(e=t[n].functionRegistry)return e;return d}(t.frames).inherit();var b=t.frames;b.unshift(v);var C=t.selectors;C||(t.selectors=C=[]),C.unshift(this.selectors),(v.root||v.allowImports||!v.strictImports)&&v.evalImports(t);var E=v.rules;for(s=0;p=E[s];s++)p.evalFirst&&(E[s]=p.eval(t));var A=t.mediaBlocks&&t.mediaBlocks.length||0;for(s=0;p=E[s];s++)"MixinCall"===p.type?(y=p.eval(t).filter((function(t){return!(t instanceof o&&t.variable&&v.variable(t.name))})),E.splice.apply(E,[s,1].concat(y)),s+=y.length-1,v.resetCache()):"VariableCall"===p.type&&(y=p.eval(t).rules.filter((function(t){return!(t instanceof o&&t.variable)})),E.splice.apply(E,[s,1].concat(y)),s+=y.length-1,v.resetCache());for(s=0;p=E[s];s++)p.evalFirst||(E[s]=p=p.eval?p.eval(t):p);for(s=0;p=E[s];s++)if(p instanceof m&&p.selectors&&1===p.selectors.length&&p.selectors[0]&&p.selectors[0].isJustParentSelector())for(E.splice(s--,1),l=0;f=p.rules[l];l++)f instanceof r&&(f.copyVisibilityInfo(p.visibilityInfo()),f instanceof o&&f.variable||E.splice(++s,0,f));if(b.shift(),C.shift(),t.mediaBlocks)for(s=A;s<t.mediaBlocks.length;s++)t.mediaBlocks[s].bubbleSelectors(e);return v},m.prototype.evalImports=function(t){var e,n,r=this.rules;if(r)for(e=0;e<r.length;e++)"Import"===r[e].type&&((n=r[e].eval(t))&&(n.length||0===n.length)?(r.splice.apply(r,[e,1].concat(n)),e+=n.length-1):r.splice(e,1,n),this.resetCache())},m.prototype.makeImportant=function(){return new m(this.selectors,this.rules.map((function(t){return t.makeImportant?t.makeImportant():t})),this.strictImports,this.visibilityInfo())},m.prototype.matchArgs=function(t){return!t||0===t.length},m.prototype.matchCondition=function(t,e){var n=this.selectors[this.selectors.length-1];return!(!n.evaldCondition||n.condition&&!n.condition.eval(new p.Eval(e,e.frames)))},m.prototype.resetCache=function(){this._rulesets=null,this._variables=null,this._properties=null,this._lookups={}},m.prototype.variables=function(){return this._variables||(this._variables=this.rules?this.rules.reduce((function(t,e){if(e instanceof o&&!0===e.variable&&(t[e.name]=e),"Import"===e.type&&e.root&&e.root.variables){var n=e.root.variables();for(var r in n)n.hasOwnProperty(r)&&(t[r]=e.root.variable(r))}return t}),{}):{}),this._variables},m.prototype.properties=function(){return this._properties||(this._properties=this.rules?this.rules.reduce((function(t,e){if(e instanceof o&&!0!==e.variable){var n=1===e.name.length&&e.name[0]instanceof i?e.name[0].value:e.name;t["$"+n]?t["$"+n].push(e):t["$"+n]=[e]}return t}),{}):{}),this._properties},m.prototype.variable=function(t){var e=this.variables()[t];if(e)return this.parseValue(e)},m.prototype.property=function(t){var e=this.properties()[t];if(e)return this.parseValue(e)},m.prototype.lastDeclaration=function(){for(var t=this.rules.length;t>0;t--){var e=this.rules[t-1];if(e instanceof o)return this.parseValue(e)}},m.prototype.parseValue=function(t){function e(t){return t.value instanceof c&&!t.parsed?("string"==typeof t.value.value?this.parse.parseNode(t.value.value,["value","important"],t.value.getIndex(),t.fileInfo(),(function(e,n){e&&(t.parsed=!0),n&&(t.value=n[0],t.important=n[1]||"",t.parsed=!0)})):t.parsed=!0,t):t}var n=this;if(Array.isArray(t)){var r=[];return t.forEach((function(t){r.push(e.call(n,t))})),r}return e.call(n,t)},m.prototype.rulesets=function(){if(!this.rules)return[];var t,e,n=[],r=this.rules;for(t=0;e=r[t];t++)e.isRuleset&&n.push(e);return n},m.prototype.prependRule=function(t){var e=this.rules;e?e.unshift(t):this.rules=[t],this.setParent(t,this)},m.prototype.find=function(t,e,n){e=e||this;var r,o,i=[],s=t.toCSS();return s in this._lookups?this._lookups[s]:(this.rulesets().forEach((function(s){if(s!==e)for(var a=0;a<s.selectors.length;a++)if(r=t.match(s.selectors[a])){if(t.elements.length>r){if(!n||n(s)){o=s.find(new u(t.elements.slice(r)),e,n);for(var l=0;l<o.length;++l)o[l].path.push(s);Array.prototype.push.apply(i,o)}}else i.push({rule:s,path:[]});break}})),this._lookups[s]=i,i)},m.prototype.genCSS=function(t,e){var n,r,o,i,a,u=[];t.tabLevel=t.tabLevel||0,this.root||t.tabLevel++;var l,c=t.compress?"":Array(t.tabLevel+1).join("  "),p=t.compress?"":Array(t.tabLevel).join("  "),d=0,h=0;for(n=0;i=this.rules[n];n++)i instanceof s?(h===n&&h++,u.push(i)):i.isCharset&&i.isCharset()?(u.splice(d,0,i),d++,h++):"Import"===i.type?(u.splice(h,0,i),h++):u.push(i);if(u=[].concat(u),!this.root){(o=f(t,this,p))&&(e.add(o),e.add(p));var g,m=this.paths,y=m.length;for(l=t.compress?",":",\n"+p,n=0;n<y;n++)if(g=(a=m[n]).length)for(n>0&&e.add(l),t.firstSelector=!0,a[0].genCSS(t,e),t.firstSelector=!1,r=1;r<g;r++)a[r].genCSS(t,e);e.add((t.compress?"{":" {\n")+c)}for(n=0;i=u[n];n++){n+1===u.length&&(t.lastRule=!0);var v=t.lastRule;i.isRulesetLike(i)&&(t.lastRule=!1),i.genCSS?i.genCSS(t,e):i.value&&e.add(i.value.toString()),t.lastRule=v,!t.lastRule&&i.isVisible()?e.add(t.compress?"":"\n"+c):t.lastRule=!1}this.root||(e.add(t.compress?"}":"\n"+p+"}"),t.tabLevel--),e.isEmpty()||t.compress||!this.firstRoot||e.add("\n")},m.prototype.joinSelectors=function(t,e,n){for(var r=0;r<n.length;r++)this.joinSelector(t,e,n[r])},m.prototype.joinSelector=function(t,e,n){function r(t,e){var n,r;if(0===t.length)n=new a(t[0]);else{var o=new Array(t.length);for(r=0;r<t.length;r++)o[r]=new l(null,t[r],e.isVariable,e._index,e._fileInfo);n=new a(new u(o))}return n}function o(t,e){var n;return n=new l(null,t,e.isVariable,e._index,e._fileInfo),new u([n])}function i(t,e,n,r){var o,i,s;if(o=[],t.length>0?(i=(o=g.copyArray(t)).pop(),s=r.createDerived(g.copyArray(i.elements))):s=r.createDerived([]),e.length>0){var a=n.combinator,u=e[0].elements[0];a.emptyOrWhitespace&&!u.combinator.emptyOrWhitespace&&(a=u.combinator),s.elements.push(new l(a,u.value,n.isVariable,n._index,n._fileInfo)),s.elements=s.elements.concat(e[0].elements.slice(1))}if(0!==s.elements.length&&o.push(s),e.length>1){var c=e.slice(1);c=c.map((function(t){return t.createDerived(t.elements,[])})),o=o.concat(c)}return o}function s(t,e,n,r,o){var s;for(s=0;s<t.length;s++){var a=i(t[s],e,n,r);o.push(a)}return o}function c(t,e){var n,r;if(0!==t.length){if(0===e.length)return void e.push([new u(t)]);for(n=0;r=e[n];n++)r.length>0?r[r.length-1]=r[r.length-1].createDerived(r[r.length-1].elements.concat(t)):r.push(new u(t))}}function p(t,e){var n=e.createDerived(e.elements,e.extendList,e.evaldCondition);return n.copyVisibilityInfo(t),n}var d,h;if(!function t(e,n,p){function d(t){var e;return t.value instanceof a&&(e=t.value.value)instanceof u?e:null}var h,f,g,m,y,v,b,C,E,A,I=!1;for(m=[],y=[[]],h=0;C=p.elements[h];h++)if("&"!==C.value){var T=d(C);if(null!=T){c(m,y);var S,w=[],_=[];for(S=t(w,n,T),I=I||S,g=0;g<w.length;g++)s(y,[o(r(w[g],C),C)],C,p,_);y=_,m=[]}else m.push(C)}else{for(I=!0,v=[],c(m,y),f=0;f<y.length;f++)if(b=y[f],0===n.length)b.length>0&&b[0].elements.push(new l(C.combinator,"",C.isVariable,C._index,C._fileInfo)),v.push(b);else for(g=0;g<n.length;g++){var N=i(b,n[g],C,p);v.push(N)}y=v,m=[]}for(c(m,y),h=0;h<y.length;h++)(E=y[h].length)>0&&(e.push(y[h]),A=y[h][E-1],y[h][E-1]=A.createDerived(A.elements,p.extendList));return I}(h=[],e,n))if(e.length>0)for(h=[],d=0;d<e.length;d++){var f=e[d].map(p.bind(this,n.visibilityInfo()));f.push(n),h.push(f)}else h=[[n]];for(d=0;d<h.length;d++)t.push(h[d])},e.exports=m},{"../contexts":13,"../functions/default":25,"../functions/function-registry":27,"../utils":89,"./anonymous":50,"./comment":57,"./debug-info":59,"./declaration":60,"./element":63,"./keyword":70,"./node":76,"./paren":78,"./selector":82}],82:[function(t,e,n){var r=t("./node"),o=t("./element"),i=t("../less-error"),s=function(t,e,n,r,o,i){this.extendList=e,this.condition=n,this.evaldCondition=!n,this._index=r,this._fileInfo=o,this.elements=this.getElements(t),this.mixinElements_=void 0,this.copyVisibilityInfo(i),this.setParent(this.elements,this)};(s.prototype=new r).type="Selector",s.prototype.accept=function(t){this.elements&&(this.elements=t.visitArray(this.elements)),this.extendList&&(this.extendList=t.visitArray(this.extendList)),this.condition&&(this.condition=t.visit(this.condition))},s.prototype.createDerived=function(t,e,n){t=this.getElements(t);var r=new s(t,e||this.extendList,null,this.getIndex(),this.fileInfo(),this.visibilityInfo());return r.evaldCondition=null!=n?n:this.evaldCondition,r.mediaEmpty=this.mediaEmpty,r},s.prototype.getElements=function(t){return t?("string"==typeof t&&this.parse.parseNode(t,["selector"],this._index,this._fileInfo,(function(e,n){if(e)throw new i({index:e.index,message:e.message},this.parse.imports,this._fileInfo.filename);t=n[0].elements})),t):[new o("","&",!1,this._index,this._fileInfo)]},s.prototype.createEmptySelectors=function(){var t=new o("","&",!1,this._index,this._fileInfo),e=[new s([t],null,null,this._index,this._fileInfo)];return e[0].mediaEmpty=!0,e},s.prototype.match=function(t){var e,n,r=this.elements,o=r.length;if(0===(e=(t=t.mixinElements()).length)||o<e)return 0;for(n=0;n<e;n++)if(r[n].value!==t[n])return 0;return e},s.prototype.mixinElements=function(){if(this.mixinElements_)return this.mixinElements_;var t=this.elements.map((function(t){return t.combinator.value+(t.value.value||t.value)})).join("").match(/[,&#\*\.\w-]([\w-]|(\\.))*/g);return t?"&"===t[0]&&t.shift():t=[],this.mixinElements_=t},s.prototype.isJustParentSelector=function(){return!this.mediaEmpty&&1===this.elements.length&&"&"===this.elements[0].value&&(" "===this.elements[0].combinator.value||""===this.elements[0].combinator.value)},s.prototype.eval=function(t){var e=this.condition&&this.condition.eval(t),n=this.elements,r=this.extendList;return n=n&&n.map((function(e){return e.eval(t)})),r=r&&r.map((function(e){return e.eval(t)})),this.createDerived(n,r,e)},s.prototype.genCSS=function(t,e){var n;for(t&&t.firstSelector||""!==this.elements[0].combinator.value||e.add(" ",this.fileInfo(),this.getIndex()),n=0;n<this.elements.length;n++)this.elements[n].genCSS(t,e)},s.prototype.getIsOutput=function(){return this.evaldCondition},e.exports=s},{"../less-error":38,"./element":63,"./node":76}],83:[function(t,e,n){var r=t("./node"),o=function(t){this.value=t};(o.prototype=new r).type="UnicodeDescriptor",e.exports=o},{"./node":76}],84:[function(t,e,n){var r=t("./node"),o=t("../data/unit-conversions"),i=t("../utils"),s=function(t,e,n){this.numerator=t?i.copyArray(t).sort():[],this.denominator=e?i.copyArray(e).sort():[],n?this.backupUnit=n:t&&t.length&&(this.backupUnit=t[0])};(s.prototype=new r).type="Unit",s.prototype.clone=function(){return new s(i.copyArray(this.numerator),i.copyArray(this.denominator),this.backupUnit)},s.prototype.genCSS=function(t,e){var n=t&&t.strictUnits;1===this.numerator.length?e.add(this.numerator[0]):!n&&this.backupUnit?e.add(this.backupUnit):!n&&this.denominator.length&&e.add(this.denominator[0])},s.prototype.toString=function(){var t,e=this.numerator.join("*");for(t=0;t<this.denominator.length;t++)e+="/"+this.denominator[t];return e},s.prototype.compare=function(t){return this.is(t.toString())?0:void 0},s.prototype.is=function(t){return this.toString().toUpperCase()===t.toUpperCase()},s.prototype.isLength=function(){return RegExp("^(px|em|ex|ch|rem|in|cm|mm|pc|pt|ex|vw|vh|vmin|vmax)$","gi").test(this.toCSS())},s.prototype.isEmpty=function(){return 0===this.numerator.length&&0===this.denominator.length},s.prototype.isSingular=function(){return this.numerator.length<=1&&0===this.denominator.length},s.prototype.map=function(t){var e;for(e=0;e<this.numerator.length;e++)this.numerator[e]=t(this.numerator[e],!1);for(e=0;e<this.denominator.length;e++)this.denominator[e]=t(this.denominator[e],!0)},s.prototype.usedUnits=function(){var t,e,n,r={};for(n in e=function(e){return t.hasOwnProperty(e)&&!r[n]&&(r[n]=e),e},o)o.hasOwnProperty(n)&&(t=o[n],this.map(e));return r},s.prototype.cancel=function(){var t,e,n={};for(e=0;e<this.numerator.length;e++)n[t=this.numerator[e]]=(n[t]||0)+1;for(e=0;e<this.denominator.length;e++)n[t=this.denominator[e]]=(n[t]||0)-1;for(t in this.numerator=[],this.denominator=[],n)if(n.hasOwnProperty(t)){var r=n[t];if(r>0)for(e=0;e<r;e++)this.numerator.push(t);else if(r<0)for(e=0;e<-r;e++)this.denominator.push(t)}this.numerator.sort(),this.denominator.sort()},e.exports=s},{"../data/unit-conversions":16,"../utils":89,"./node":76}],85:[function(t,e,n){var r=t("./node"),o=function(t,e,n,r){this.value=t,this._index=e,this._fileInfo=n,this.isEvald=r};(o.prototype=new r).type="Url",o.prototype.accept=function(t){this.value=t.visit(this.value)},o.prototype.genCSS=function(t,e){e.add("url("),this.value.genCSS(t,e),e.add(")")},o.prototype.eval=function(t){var e,n=this.value.eval(t);if(!this.isEvald&&("string"==typeof(e=this.fileInfo()&&this.fileInfo().rootpath)&&"string"==typeof n.value&&t.pathRequiresRewrite(n.value)?(n.quote||(e=function(t){return t.replace(/[\(\)'"\s]/g,(function(t){return"\\"+t}))}(e)),n.value=t.rewritePath(n.value,e)):n.value=t.normalizePath(n.value),t.urlArgs&&!n.value.match(/^\s*data:/))){var r=(-1===n.value.indexOf("?")?"?":"&")+t.urlArgs;-1!==n.value.indexOf("#")?n.value=n.value.replace("#",r+"#"):n.value+=r}return new o(n,this.getIndex(),this.fileInfo(),!0)},e.exports=o},{"./node":76}],86:[function(t,e,n){var r=t("./node"),o=function(t){if(!t)throw new Error("Value requires an array argument");this.value=Array.isArray(t)?t:[t]};(o.prototype=new r).type="Value",o.prototype.accept=function(t){this.value&&(this.value=t.visitArray(this.value))},o.prototype.eval=function(t){return 1===this.value.length?this.value[0].eval(t):new o(this.value.map((function(e){return e.eval(t)})))},o.prototype.genCSS=function(t,e){var n;for(n=0;n<this.value.length;n++)this.value[n].genCSS(t,e),n+1<this.value.length&&e.add(t&&t.compress?",":", ")},e.exports=o},{"./node":76}],87:[function(t,e,n){var r=t("./node"),o=t("./variable"),i=t("./ruleset"),s=t("./detached-ruleset"),a=t("../less-error"),u=function(t,e,n){this.variable=t,this._index=e,this._fileInfo=n,this.allowRoot=!0};(u.prototype=new r).type="VariableCall",u.prototype.eval=function(t){var e,n=new o(this.variable,this.getIndex(),this.fileInfo()).eval(t),r=new a({message:"Could not evaluate variable call "+this.variable});if(!n.ruleset){if(n.rules)e=n;else if(Array.isArray(n))e=new i("",n);else{if(!Array.isArray(n.value))throw r;e=new i("",n.value)}n=new s(e)}if(n.ruleset)return n.callEval(t);throw r},e.exports=u},{"../less-error":38,"./detached-ruleset":61,"./node":76,"./ruleset":81,"./variable":88}],88:[function(t,e,n){var r=t("./node"),o=t("./call"),i=function(t,e,n){this.name=t,this._index=e,this._fileInfo=n};(i.prototype=new r).type="Variable",i.prototype.eval=function(t){var e,n=this.name;if(0===n.indexOf("@@")&&(n="@"+new i(n.slice(1),this.getIndex(),this.fileInfo()).eval(t).value),this.evaluating)throw{type:"Name",message:"Recursive variable definition for "+n,filename:this.fileInfo().filename,index:this.getIndex()};if(this.evaluating=!0,e=this.find(t.frames,(function(e){var r=e.variable(n);if(r)return r.important&&(t.importantScope[t.importantScope.length-1].important=r.important),t.inCalc?new o("_SELF",[r.value]).eval(t):r.value.eval(t)})))return this.evaluating=!1,e;throw{type:"Name",message:"variable "+n+" is undefined",filename:this.fileInfo().filename,index:this.getIndex()}},i.prototype.find=function(t,e){for(var n,r=0;r<t.length;r++)if(n=e.call(t,t[r]))return n;return null},e.exports=i},{"./call":54,"./node":76}],89:[function(t,e,n){var r=t("./constants"),o=t("clone"),i={getLocation:function(t,e){for(var n=t+1,r=null,o=-1;--n>=0&&"\n"!==e.charAt(n);)o++;return"number"==typeof t&&(r=(e.slice(0,t).match(/\n/g)||"").length),{line:r,column:o}},copyArray:function(t){var e,n=t.length,r=new Array(n);for(e=0;e<n;e++)r[e]=t[e];return r},clone:function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},copyOptions:function(t,e){if(e&&e._defaults)return e;var n=i.defaults(t,e);if(n.strictMath&&(n.math=r.Math.STRICT_LEGACY),n.relativeUrls&&(n.rewriteUrls=r.RewriteUrls.ALL),"string"==typeof n.math)switch(n.math.toLowerCase()){case"always":n.math=r.Math.ALWAYS;break;case"parens-division":n.math=r.Math.PARENS_DIVISION;break;case"strict":case"parens":n.math=r.Math.PARENS;break;case"strict-legacy":n.math=r.Math.STRICT_LEGACY}if("string"==typeof n.rewriteUrls)switch(n.rewriteUrls.toLowerCase()){case"off":n.rewriteUrls=r.RewriteUrls.OFF;break;case"local":n.rewriteUrls=r.RewriteUrls.LOCAL;break;case"all":n.rewriteUrls=r.RewriteUrls.ALL}return n},defaults:function(t,e){var n=e||{};if(!e._defaults){n={};var r=o(t);n._defaults=r;var i=e?o(e):{};Object.assign(n,r,i)}return n},merge:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},flattenArray:function(t,e){e=e||[];for(var n=0,r=t.length;n<r;n++){var o=t[n];Array.isArray(o)?i.flattenArray(o,e):void 0!==o&&e.push(o)}return e}};e.exports=i},{"./constants":12,clone:100}],90:[function(t,e,n){var r=t("../tree"),o=t("./visitor"),i=t("../logger"),s=t("../utils"),a=function(){this._visitor=new o(this),this.contexts=[],this.allExtendsStack=[[]]};a.prototype={run:function(t){return(t=this._visitor.visit(t)).allExtends=this.allExtendsStack[0],t},visitDeclaration:function(t,e){e.visitDeeper=!1},visitMixinDefinition:function(t,e){e.visitDeeper=!1},visitRuleset:function(t,e){if(!t.root){var n,o,i,a,u=[],l=t.rules,c=l?l.length:0;for(n=0;n<c;n++)t.rules[n]instanceof r.Extend&&(u.push(l[n]),t.extendOnEveryPath=!0);var p=t.paths;for(n=0;n<p.length;n++){var d=p[n],h=d[d.length-1].extendList;for((a=h?s.copyArray(h).concat(u):u)&&(a=a.map((function(t){return t.clone()}))),o=0;o<a.length;o++)this.foundExtends=!0,(i=a[o]).findSelfSelectors(d),i.ruleset=t,0===o&&(i.firstExtendOnThisSelectorPath=!0),this.allExtendsStack[this.allExtendsStack.length-1].push(i)}this.contexts.push(t.selectors)}},visitRulesetOut:function(t){t.root||(this.contexts.length=this.contexts.length-1)},visitMedia:function(t,e){t.allExtends=[],this.allExtendsStack.push(t.allExtends)},visitMediaOut:function(t){this.allExtendsStack.length=this.allExtendsStack.length-1},visitAtRule:function(t,e){t.allExtends=[],this.allExtendsStack.push(t.allExtends)},visitAtRuleOut:function(t){this.allExtendsStack.length=this.allExtendsStack.length-1}};var u=function(){this._visitor=new o(this)};u.prototype={run:function(t){var e=new a;if(this.extendIndices={},e.run(t),!e.foundExtends)return t;t.allExtends=t.allExtends.concat(this.doExtendChaining(t.allExtends,t.allExtends)),this.allExtendsStack=[t.allExtends];var n=this._visitor.visit(t);return this.checkExtendsForNonMatched(t.allExtends),n},checkExtendsForNonMatched:function(t){var e=this.extendIndices;t.filter((function(t){return!t.hasFoundMatches&&1==t.parent_ids.length})).forEach((function(t){var n="_unknown_";try{n=t.selector.toCSS({})}catch(t){}e[t.index+" "+n]||(e[t.index+" "+n]=!0,i.warn("extend '"+n+"' has no matches"))}))},doExtendChaining:function(t,e,n){var o,i,s,a,u,l,c,p,d=[],h=this;for(n=n||0,o=0;o<t.length;o++)for(i=0;i<e.length;i++)l=t[o],c=e[i],l.parent_ids.indexOf(c.object_id)>=0||(u=[c.selfSelectors[0]],(s=h.findMatch(l,u)).length&&(l.hasFoundMatches=!0,l.selfSelectors.forEach((function(t){var e=c.visibilityInfo();a=h.extendSelector(s,u,t,l.isVisible()),(p=new r.Extend(c.selector,c.option,0,c.fileInfo(),e)).selfSelectors=a,a[a.length-1].extendList=[p],d.push(p),p.ruleset=c.ruleset,p.parent_ids=p.parent_ids.concat(c.parent_ids,l.parent_ids),c.firstExtendOnThisSelectorPath&&(p.firstExtendOnThisSelectorPath=!0,c.ruleset.paths.push(a))}))));if(d.length){if(this.extendChainCount++,n>100){var f="{unable to calculate}",g="{unable to calculate}";try{f=d[0].selfSelectors[0].toCSS(),g=d[0].selector.toCSS()}catch(t){}throw{message:"extend circular reference detected. One of the circular extends is currently:"+f+":extend("+g+")"}}return d.concat(h.doExtendChaining(d,e,n+1))}return d},visitDeclaration:function(t,e){e.visitDeeper=!1},visitMixinDefinition:function(t,e){e.visitDeeper=!1},visitSelector:function(t,e){e.visitDeeper=!1},visitRuleset:function(t,e){if(!t.root){var n,r,o,i,s=this.allExtendsStack[this.allExtendsStack.length-1],a=[],u=this;for(o=0;o<s.length;o++)for(r=0;r<t.paths.length;r++)if(i=t.paths[r],!t.extendOnEveryPath){var l=i[i.length-1].extendList;l&&l.length||(n=this.findMatch(s[o],i)).length&&(s[o].hasFoundMatches=!0,s[o].selfSelectors.forEach((function(t){var e;e=u.extendSelector(n,i,t,s[o].isVisible()),a.push(e)})))}t.paths=t.paths.concat(a)}},findMatch:function(t,e){var n,r,o,i,s,a,u,l=t.selector.elements,c=[],p=[];for(n=0;n<e.length;n++)for(r=e[n],o=0;o<r.elements.length;o++)for(i=r.elements[o],(t.allowBefore||0===n&&0===o)&&c.push({pathIndex:n,index:o,matched:0,initialCombinator:i.combinator}),a=0;a<c.length;a++)u=c[a],""===(s=i.combinator.value)&&0===o&&(s=" "),!this.isElementValuesEqual(l[u.matched].value,i.value)||u.matched>0&&l[u.matched].combinator.value!==s?u=null:u.matched++,u&&(u.finished=u.matched===l.length,u.finished&&!t.allowAfter&&(o+1<r.elements.length||n+1<e.length)&&(u=null)),u?u.finished&&(u.length=l.length,u.endPathIndex=n,u.endPathElementIndex=o+1,c.length=0,p.push(u)):(c.splice(a,1),a--);return p},isElementValuesEqual:function(t,e){if("string"==typeof t||"string"==typeof e)return t===e;if(t instanceof r.Attribute)return t.op===e.op&&t.key===e.key&&(t.value&&e.value?(t=t.value.value||t.value)===(e=e.value.value||e.value):!t.value&&!e.value);if(t=t.value,e=e.value,t instanceof r.Selector){if(!(e instanceof r.Selector)||t.elements.length!==e.elements.length)return!1;for(var n=0;n<t.elements.length;n++){if(t.elements[n].combinator.value!==e.elements[n].combinator.value&&(0!==n||(t.elements[n].combinator.value||" ")!==(e.elements[n].combinator.value||" ")))return!1;if(!this.isElementValuesEqual(t.elements[n].value,e.elements[n].value))return!1}return!0}return!1},extendSelector:function(t,e,n,o){var i,s,a,u,l,c=0,p=0,d=[];for(i=0;i<t.length;i++)s=e[(u=t[i]).pathIndex],a=new r.Element(u.initialCombinator,n.elements[0].value,n.elements[0].isVariable,n.elements[0].getIndex(),n.elements[0].fileInfo()),u.pathIndex>c&&p>0&&(d[d.length-1].elements=d[d.length-1].elements.concat(e[c].elements.slice(p)),p=0,c++),l=s.elements.slice(p,u.index).concat([a]).concat(n.elements.slice(1)),c===u.pathIndex&&i>0?d[d.length-1].elements=d[d.length-1].elements.concat(l):(d=d.concat(e.slice(c,u.pathIndex))).push(new r.Selector(l)),c=u.endPathIndex,(p=u.endPathElementIndex)>=e[c].elements.length&&(p=0,c++);return c<e.length&&p>0&&(d[d.length-1].elements=d[d.length-1].elements.concat(e[c].elements.slice(p)),c++),(d=d.concat(e.slice(c,e.length))).map((function(t){var e=t.createDerived(t.elements);return o?e.ensureVisibility():e.ensureInvisibility(),e}))},visitMedia:function(t,e){var n=t.allExtends.concat(this.allExtendsStack[this.allExtendsStack.length-1]);n=n.concat(this.doExtendChaining(n,t.allExtends)),this.allExtendsStack.push(n)},visitMediaOut:function(t){var e=this.allExtendsStack.length-1;this.allExtendsStack.length=e},visitAtRule:function(t,e){var n=t.allExtends.concat(this.allExtendsStack[this.allExtendsStack.length-1]);n=n.concat(this.doExtendChaining(n,t.allExtends)),this.allExtendsStack.push(n)},visitAtRuleOut:function(t){var e=this.allExtendsStack.length-1;this.allExtendsStack.length=e}},e.exports=u},{"../logger":39,"../tree":67,"../utils":89,"./visitor":97}],91:[function(t,e,n){function r(t){this.imports=[],this.variableImports=[],this._onSequencerEmpty=t,this._currentDepth=0}r.prototype.addImport=function(t){var e=this,n={callback:t,args:null,isReady:!1};return this.imports.push(n),function(){n.args=Array.prototype.slice.call(arguments,0),n.isReady=!0,e.tryRun()}},r.prototype.addVariableImport=function(t){this.variableImports.push(t)},r.prototype.tryRun=function(){this._currentDepth++;try{for(;;){for(;this.imports.length>0;){var t=this.imports[0];if(!t.isReady)return;this.imports=this.imports.slice(1),t.callback.apply(null,t.args)}if(0===this.variableImports.length)break;var e=this.variableImports[0];this.variableImports=this.variableImports.slice(1),e()}}finally{this._currentDepth--}0===this._currentDepth&&this._onSequencerEmpty&&this._onSequencerEmpty()},e.exports=r},{}],92:[function(t,e,n){var r=t("../contexts"),o=t("./visitor"),i=t("./import-sequencer"),s=t("../utils"),a=function(t,e){this._visitor=new o(this),this._importer=t,this._finish=e,this.context=new r.Eval,this.importCount=0,this.onceFileDetectionMap={},this.recursionDetector={},this._sequencer=new i(this._onSequencerEmpty.bind(this))};a.prototype={isReplacing:!1,run:function(t){try{this._visitor.visit(t)}catch(t){this.error=t}this.isFinished=!0,this._sequencer.tryRun()},_onSequencerEmpty:function(){this.isFinished&&this._finish(this.error)},visitImport:function(t,e){var n=t.options.inline;if(!t.css||n){var o=new r.Eval(this.context,s.copyArray(this.context.frames)),i=o.frames[0];this.importCount++,t.isVariableImport()?this._sequencer.addVariableImport(this.processImportNode.bind(this,t,o,i)):this.processImportNode(t,o,i)}e.visitDeeper=!1},processImportNode:function(t,e,n){var r,o=t.options.inline;try{r=t.evalForImport(e)}catch(e){e.filename||(e.index=t.getIndex(),e.filename=t.fileInfo().filename),t.css=!0,t.error=e}if(!r||r.css&&!o)this.importCount--,this.isFinished&&this._sequencer.tryRun();else{r.options.multiple&&(e.importMultiple=!0);for(var i=void 0===r.css,s=0;s<n.rules.length;s++)if(n.rules[s]===t){n.rules[s]=r;break}var a=this.onImported.bind(this,r,e),u=this._sequencer.addImport(a);this._importer.push(r.getPath(),i,r.fileInfo(),r.options,u)}},onImported:function(t,e,n,r,o,i){n&&(n.filename||(n.index=t.getIndex(),n.filename=t.fileInfo().filename),this.error=n);var s=this,a=t.options.inline,u=t.options.isPlugin,l=t.options.optional,c=o||i in s.recursionDetector;if(e.importMultiple||(t.skip=!!c||function(){return i in s.onceFileDetectionMap||(s.onceFileDetectionMap[i]=!0,!1)}),!i&&l&&(t.skip=!0),r&&(t.root=r,t.importedFilename=i,!a&&!u&&(e.importMultiple||!c))){s.recursionDetector[i]=!0;var p=this.context;this.context=e;try{this._visitor.visit(r)}catch(n){this.error=n}this.context=p}s.importCount--,s.isFinished&&s._sequencer.tryRun()},visitDeclaration:function(t,e){"DetachedRuleset"===t.value.type?this.context.frames.unshift(t):e.visitDeeper=!1},visitDeclarationOut:function(t){"DetachedRuleset"===t.value.type&&this.context.frames.shift()},visitAtRule:function(t,e){this.context.frames.unshift(t)},visitAtRuleOut:function(t){this.context.frames.shift()},visitMixinDefinition:function(t,e){this.context.frames.unshift(t)},visitMixinDefinitionOut:function(t){this.context.frames.shift()},visitRuleset:function(t,e){this.context.frames.unshift(t)},visitRulesetOut:function(t){this.context.frames.shift()},visitMedia:function(t,e){this.context.frames.unshift(t.rules[0])},visitMediaOut:function(t){this.context.frames.shift()}},e.exports=a},{"../contexts":13,"../utils":89,"./import-sequencer":91,"./visitor":97}],93:[function(t,e,n){var r={Visitor:t("./visitor"),ImportVisitor:t("./import-visitor"),MarkVisibleSelectorsVisitor:t("./set-tree-visibility-visitor"),ExtendVisitor:t("./extend-visitor"),JoinSelectorVisitor:t("./join-selector-visitor"),ToCSSVisitor:t("./to-css-visitor")};e.exports=r},{"./extend-visitor":90,"./import-visitor":92,"./join-selector-visitor":94,"./set-tree-visibility-visitor":95,"./to-css-visitor":96,"./visitor":97}],94:[function(t,e,n){var r=t("./visitor"),o=function(){this.contexts=[[]],this._visitor=new r(this)};o.prototype={run:function(t){return this._visitor.visit(t)},visitDeclaration:function(t,e){e.visitDeeper=!1},visitMixinDefinition:function(t,e){e.visitDeeper=!1},visitRuleset:function(t,e){var n,r=this.contexts[this.contexts.length-1],o=[];this.contexts.push(o),t.root||((n=t.selectors)&&(n=n.filter((function(t){return t.getIsOutput()})),t.selectors=n.length?n:n=null,n&&t.joinSelectors(o,r,n)),n||(t.rules=null),t.paths=o)},visitRulesetOut:function(t){this.contexts.length=this.contexts.length-1},visitMedia:function(t,e){var n=this.contexts[this.contexts.length-1];t.rules[0].root=0===n.length||n[0].multiMedia},visitAtRule:function(t,e){var n=this.contexts[this.contexts.length-1];t.rules&&t.rules.length&&(t.rules[0].root=t.isRooted||0===n.length||null)}},e.exports=o},{"./visitor":97}],95:[function(t,e,n){var r=function(t){this.visible=t};r.prototype.run=function(t){this.visit(t)},r.prototype.visitArray=function(t){if(!t)return t;var e,n=t.length;for(e=0;e<n;e++)this.visit(t[e]);return t},r.prototype.visit=function(t){return t?t.constructor===Array?this.visitArray(t):(!t.blocksVisibility||t.blocksVisibility()||(this.visible?t.ensureVisibility():t.ensureInvisibility(),t.accept(this)),t):t},e.exports=r},{}],96:[function(t,e,n){var r=t("../tree"),o=t("./visitor"),i=function(t){this._visitor=new o(this),this._context=t};i.prototype={containsSilentNonBlockedChild:function(t){var e;if(!t)return!1;for(var n=0;n<t.length;n++)if((e=t[n]).isSilent&&e.isSilent(this._context)&&!e.blocksVisibility())return!0;return!1},keepOnlyVisibleChilds:function(t){t&&t.rules&&(t.rules=t.rules.filter((function(t){return t.isVisible()})))},isEmpty:function(t){return!t||!t.rules||0===t.rules.length},hasVisibleSelector:function(t){return!(!t||!t.paths)&&t.paths.length>0},resolveVisibility:function(t,e){if(!t.blocksVisibility()){if(this.isEmpty(t)&&!this.containsSilentNonBlockedChild(e))return;return t}var n=t.rules[0];if(this.keepOnlyVisibleChilds(n),!this.isEmpty(n))return t.ensureVisibility(),t.removeVisibilityBlock(),t},isVisibleRuleset:function(t){return!!t.firstRoot||!this.isEmpty(t)&&!(!t.root&&!this.hasVisibleSelector(t))}};var s=function(t){this._visitor=new o(this),this._context=t,this.utils=new i(t)};s.prototype={isReplacing:!0,run:function(t){return this._visitor.visit(t)},visitDeclaration:function(t,e){if(!t.blocksVisibility()&&!t.variable)return t},visitMixinDefinition:function(t,e){t.frames=[]},visitExtend:function(t,e){},visitComment:function(t,e){if(!t.blocksVisibility()&&!t.isSilent(this._context))return t},visitMedia:function(t,e){var n=t.rules[0].rules;return t.accept(this._visitor),e.visitDeeper=!1,this.utils.resolveVisibility(t,n)},visitImport:function(t,e){if(!t.blocksVisibility())return t},visitAtRule:function(t,e){return t.rules&&t.rules.length?this.visitAtRuleWithBody(t,e):this.visitAtRuleWithoutBody(t,e)},visitAnonymous:function(t,e){if(!t.blocksVisibility())return t.accept(this._visitor),t},visitAtRuleWithBody:function(t,e){var n=function(t){var e=t.rules;return function(t){var e=t.rules;return 1===e.length&&(!e[0].paths||0===e[0].paths.length)}(t)?e[0].rules:e}(t);return t.accept(this._visitor),e.visitDeeper=!1,this.utils.isEmpty(t)||this._mergeRules(t.rules[0].rules),this.utils.resolveVisibility(t,n)},visitAtRuleWithoutBody:function(t,e){if(!t.blocksVisibility()){if("@charset"===t.name){if(this.charset){if(t.debugInfo){var n=new r.Comment("/* "+t.toCSS(this._context).replace(/\n/g,"")+" */\n");return n.debugInfo=t.debugInfo,this._visitor.visit(n)}return}this.charset=!0}return t}},checkValidNodes:function(t,e){if(t)for(var n=0;n<t.length;n++){var o=t[n];if(e&&o instanceof r.Declaration&&!o.variable)throw{message:"Properties must be inside selector blocks. They cannot be in the root",index:o.getIndex(),filename:o.fileInfo()&&o.fileInfo().filename};if(o instanceof r.Call)throw{message:"Function '"+o.name+"' is undefined",index:o.getIndex(),filename:o.fileInfo()&&o.fileInfo().filename};if(o.type&&!o.allowRoot)throw{message:o.type+" node returned by a function is not valid here",index:o.getIndex(),filename:o.fileInfo()&&o.fileInfo().filename}}},visitRuleset:function(t,e){var n,r=[];if(this.checkValidNodes(t.rules,t.firstRoot),t.root)t.accept(this._visitor),e.visitDeeper=!1;else{this._compileRulesetPaths(t);for(var o=t.rules,i=o?o.length:0,s=0;s<i;)(n=o[s])&&n.rules?(r.push(this._visitor.visit(n)),o.splice(s,1),i--):s++;i>0?t.accept(this._visitor):t.rules=null,e.visitDeeper=!1}return t.rules&&(this._mergeRules(t.rules),this._removeDuplicateRules(t.rules)),this.utils.isVisibleRuleset(t)&&(t.ensureVisibility(),r.splice(0,0,t)),1===r.length?r[0]:r},_compileRulesetPaths:function(t){t.paths&&(t.paths=t.paths.filter((function(t){var e;for(" "===t[0].elements[0].combinator.value&&(t[0].elements[0].combinator=new r.Combinator("")),e=0;e<t.length;e++)if(t[e].isVisible()&&t[e].getIsOutput())return!0;return!1})))},_removeDuplicateRules:function(t){if(t){var e,n,o,i={};for(o=t.length-1;o>=0;o--)if((n=t[o])instanceof r.Declaration)if(i[n.name]){(e=i[n.name])instanceof r.Declaration&&(e=i[n.name]=[i[n.name].toCSS(this._context)]);var s=n.toCSS(this._context);-1!==e.indexOf(s)?t.splice(o,1):e.push(s)}else i[n.name]=n}},_mergeRules:function(t){if(t){for(var e={},n=[],o=0;o<t.length;o++){var i=t[o];if(i.merge){var s=i.name;e[s]?t.splice(o--,1):n.push(e[s]=[]),e[s].push(i)}}n.forEach((function(t){if(t.length>0){var e=t[0],n=[],o=[new r.Expression(n)];t.forEach((function(t){"+"===t.merge&&n.length>0&&o.push(new r.Expression(n=[])),n.push(t.value),e.important=e.important||t.important})),e.value=new r.Value(o)}}))}}},e.exports=s},{"../tree":67,"./visitor":97}],97:[function(t,e,n){function r(t){return t}var o=t("../tree"),i={visitDeeper:!0},s=!1,a=function(t){this._implementation=t,this._visitInCache={},this._visitOutCache={},s||(function t(e,n){var r,o;for(r in e)switch(void 0===(o=e[r])?"undefined":u(o)){case"function":o.prototype&&o.prototype.type&&(o.prototype.typeIndex=n++);break;case"object":n=t(o,n)}return n}(o,1),s=!0)};a.prototype={visit:function(t){if(!t)return t;var e=t.typeIndex;if(!e)return t.value&&t.value.typeIndex&&this.visit(t.value),t;var n,o=this._implementation,s=this._visitInCache[e],a=this._visitOutCache[e],u=i;if(u.visitDeeper=!0,s||(s=o[n="visit"+t.type]||r,a=o[n+"Out"]||r,this._visitInCache[e]=s,this._visitOutCache[e]=a),s!==r){var l=s.call(o,t,u);t&&o.isReplacing&&(t=l)}return u.visitDeeper&&t&&t.accept&&t.accept(this),a!=r&&a.call(o,t),t},visitArray:function(t,e){if(!t)return t;var n,r=t.length;if(e||!this._implementation.isReplacing){for(n=0;n<r;n++)this.visit(t[n]);return t}var o=[];for(n=0;n<r;n++){var i=this.visit(t[n]);void 0!==i&&(i.splice?i.length&&this.flatten(i,o):o.push(i))}return o},flatten:function(t,e){var n,r,o,i,s,a;for(e||(e=[]),r=0,n=t.length;r<n;r++)if(void 0!==(o=t[r]))if(o.splice)for(s=0,i=o.length;s<i;s++)void 0!==(a=o[s])&&(a.splice?a.length&&this.flatten(a,e):e.push(a));else e.push(o);return e}},e.exports=a},{"../tree":67}],98:[function(t,e,n){function r(t){var e;(e=s.length?s.pop():new o).task=t,i(e)}function o(){this.task=null}var i=t("./raw"),s=[],a=[],u=i.makeRequestCallFromTimer((function(){if(a.length)throw a.shift()}));e.exports=r,o.prototype.call=function(){try{this.task.call()}catch(t){r.onerror?r.onerror(t):(a.push(t),u())}finally{this.task=null,s[s.length]=this}}},{"./raw":99}],99:[function(t,e,r){(function(t){function n(t){s.length||i(),s[s.length]=t}function r(){for(;a<s.length;){var t=a;if(a+=1,s[t].call(),a>u){for(var e=0,n=s.length-a;e<n;e++)s[e]=s[e+a];s.length-=a,a=0}}s.length=0,a=0}function o(t){return function(){function e(){clearTimeout(n),clearInterval(r),t()}var n=setTimeout(e,0),r=setInterval(e,50)}}e.exports=n;var i,s=[],a=0,u=1024,l=void 0!==t?t:self,c=l.MutationObserver||l.WebKitMutationObserver;i="function"==typeof c?function(t){var e=1,n=new c(t),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}(r):o(r),n.requestFlush=i,n.makeRequestCallFromTimer=o}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],100:[function(t,e,n){var o=function(){function t(t,e){return null!=e&&t instanceof e}function e(n,l,c,p,d){"object"==(void 0===l?"undefined":u(l))&&(c=l.depth,p=l.prototype,d=l.includeNonEnumerable,l=l.circular);var h=[],f=[],g=void 0!==r;return void 0===l&&(l=!0),void 0===c&&(c=1/0),function n(c,m){if(null===c)return null;if(0===m)return c;var y,v;if("object"!=(void 0===c?"undefined":u(c)))return c;if(t(c,i))y=new i;else if(t(c,s))y=new s;else if(t(c,a))y=new a((function(t,e){c.then((function(e){t(n(e,m-1))}),(function(t){e(n(t,m-1))}))}));else if(e.__isArray(c))y=[];else if(e.__isRegExp(c))y=new RegExp(c.source,o(c)),c.lastIndex&&(y.lastIndex=c.lastIndex);else if(e.__isDate(c))y=new Date(c.getTime());else{if(g&&r.isBuffer(c))return y=r.allocUnsafe?r.allocUnsafe(c.length):new r(c.length),c.copy(y),y;t(c,Error)?y=Object.create(c):void 0===p?(v=Object.getPrototypeOf(c),y=Object.create(v)):(y=Object.create(p),v=p)}if(l){var b=h.indexOf(c);if(-1!=b)return f[b];h.push(c),f.push(y)}for(var C in t(c,i)&&c.forEach((function(t,e){var r=n(e,m-1),o=n(t,m-1);y.set(r,o)})),t(c,s)&&c.forEach((function(t){var e=n(t,m-1);y.add(e)})),c){var E;v&&(E=Object.getOwnPropertyDescriptor(v,C)),E&&null==E.set||(y[C]=n(c[C],m-1))}if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(c);for(C=0;C<A.length;C++){var I=A[C];(!(S=Object.getOwnPropertyDescriptor(c,I))||S.enumerable||d)&&(y[I]=n(c[I],m-1),S.enumerable||Object.defineProperty(y,I,{enumerable:!1}))}}if(d){var T=Object.getOwnPropertyNames(c);for(C=0;C<T.length;C++){var S,w=T[C];(S=Object.getOwnPropertyDescriptor(c,w))&&S.enumerable||(y[w]=n(c[w],m-1),Object.defineProperty(y,w,{enumerable:!1}))}}return y}(n,c)}function n(t){return Object.prototype.toString.call(t)}function o(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}var i,s,a;try{i=Map}catch(t){i=function(){}}try{s=Set}catch(t){s=function(){}}try{a=Promise}catch(t){a=function(){}}return e.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},e.__objToStr=n,e.__isDate=function(t){return"object"==(void 0===t?"undefined":u(t))&&"[object Date]"===n(t)},e.__isArray=function(t){return"object"==(void 0===t?"undefined":u(t))&&"[object Array]"===n(t)},e.__isRegExp=function(t){return"object"==(void 0===t?"undefined":u(t))&&"[object RegExp]"===n(t)},e.__getRegExpFlags=o,e}();"object"==(void 0===e?"undefined":u(e))&&e.exports&&(e.exports=o)},{}],101:[function(t,e,n){function r(){}function o(t){if("object"!=u(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("Promise constructor's argument is not a function");this._40=0,this._65=0,this._55=null,this._72=null,t!==r&&p(t,this)}function i(t,e){for(;3===t._65;)t=t._55;return o._37&&o._37(t),0===t._65?0===t._40?(t._40=1,void(t._72=e)):1===t._40?(t._40=2,void(t._72=[t._72,e])):void t._72.push(e):void function(t,e){d((function(){var n=1===t._65?e.onFulfilled:e.onRejected;if(null!==n){var r=function(t,e){try{return t(e)}catch(t){return h=t,f}}(n,t._55);r===f?a(e.promise,h):s(e.promise,r)}else 1===t._65?s(e.promise,t._55):a(e.promise,t._55)}))}(t,e)}function s(t,e){if(e===t)return a(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"==(void 0===e?"undefined":u(e))||"function"==typeof e)){var n=function(t){try{return t.then}catch(t){return h=t,f}}(e);if(n===f)return a(t,h);if(n===t.then&&e instanceof o)return t._65=3,t._55=e,void l(t);if("function"==typeof n)return void p(n.bind(e),t)}t._65=1,t._55=e,l(t)}function a(t,e){t._65=2,t._55=e,o._87&&o._87(t,e),l(t)}function l(t){if(1===t._40&&(i(t,t._72),t._72=null),2===t._40){for(var e=0;e<t._72.length;e++)i(t,t._72[e]);t._72=null}}function c(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function p(t,e){var n=!1,r=function(t,e,n){try{t(e,n)}catch(t){return h=t,f}}(t,(function(t){n||(n=!0,s(e,t))}),(function(t){n||(n=!0,a(e,t))}));n||r!==f||(n=!0,a(e,h))}var d=t("asap/raw"),h=null,f={};e.exports=o,o._37=null,o._87=null,o._61=r,o.prototype.then=function(t,e){if(this.constructor!==o)return function(t,e,n){return new t.constructor((function(s,a){var u=new o(r);u.then(s,a),i(t,new c(e,n,u))}))}(this,t,e);var n=new o(r);return i(this,new c(t,e,n)),n}},{"asap/raw":99}],102:[function(t,e,n){function r(t){var e=new o(o._61);return e._65=1,e._55=t,e}var o=t("./core.js");e.exports=o;var i=r(!0),s=r(!1),a=r(null),l=r(void 0),c=r(0),p=r("");o.resolve=function(t){if(t instanceof o)return t;if(null===t)return a;if(void 0===t)return l;if(!0===t)return i;if(!1===t)return s;if(0===t)return c;if(""===t)return p;if("object"==(void 0===t?"undefined":u(t))||"function"==typeof t)try{var e=t.then;if("function"==typeof e)return new o(e.bind(t))}catch(t){return new o((function(e,n){n(t)}))}return r(t)},o.all=function(t){var e=Array.prototype.slice.call(t);return new o((function(t,n){function r(s,a){if(a&&("object"==(void 0===a?"undefined":u(a))||"function"==typeof a)){if(a instanceof o&&a.then===o.prototype.then){for(;3===a._65;)a=a._55;return 1===a._65?r(s,a._55):(2===a._65&&n(a._55),void a.then((function(t){r(s,t)}),n))}var l=a.then;if("function"==typeof l)return void new o(l.bind(a)).then((function(t){r(s,t)}),n)}e[s]=a,0==--i&&t(e)}if(0===e.length)return t([]);for(var i=e.length,s=0;s<e.length;s++)r(s,e[s])}))},o.reject=function(t){return new o((function(e,n){n(t)}))},o.race=function(t){return new o((function(e,n){t.forEach((function(t){o.resolve(t).then(e,n)}))}))},o.prototype.catch=function(t){return this.then(null,t)}},{"./core.js":101}],103:[function(t,e,n){"function"!=typeof Promise.prototype.done&&(Promise.prototype.done=function(t,e){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,(function(t){setTimeout((function(){throw t}),0)}))})},{}],104:[function(t,e,n){t("asap"),"undefined"==typeof Promise&&(Promise=t("./lib/core.js"),t("./lib/es6-extensions.js")),t("./polyfill-done.js")},{"./lib/core.js":101,"./lib/es6-extensions.js":102,"./polyfill-done.js":103,asap:98}]},{},[2])(2)},"object"==u(e)&&void 0!==t?t.exports=a():(i=[],void 0===(s="function"==typeof(o=a)?o.apply(e,i):o)||(t.exports=s))}).call(this,n(92),n(156).Buffer)},function(t,e,n){"use strict";var r;void 0===(r=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.gridColumnWidth=1,this.mobileMode=null,this.document=t,this.cssDOMNode=window.document.createElement("style"),this.cssDOMNode.setAttribute("data-role","document-grid")}return t.prototype.getRoot=function(){return this.cssDOMNode},t.prototype.render=function(t){t-=t%20;var e=this.document.getProperty("theme.page.paddingLeft"),n=this.document.getProperty("theme.page.paddingRight"),r=this.document.getProperty("theme.page.paddingTop"),o=this.document.getProperty("theme.page.paddingBottom");t-=2*this.document.getProperty("theme.page.borderWidth")+e+n;var i=(t=Math.max(20,t))/20;this.gridColumnWidth=i;var s=this.gridColumnWidth<27&&!this.document.isEditMode();s!==this.mobileMode&&(this.mobileMode=s,this.document.onMobileModeChanged());var a='[data-w="0"], [data-wp="0"] {width: 0;}';if(this.mobileMode)e=n=r=o=20;else for(var u=1;u<=20;u++)a=(a=(a=(a=a.concat('[data-w="'+u+'"] { width: '+i*u+"px; }")).concat('[data-wp="'+u+'"] { width: '+(i*u-16)+"px; margin-left: 8px; margin-right: 8px; }")).concat('[data-wl="'+u+'"] { left: '+(i*u-16+14)+"px; }")).concat('[data-wr="'+u+'"] { right: '+(i*u-16+14)+"px; }");a=(a=a.concat(".container.page { padding: "+r+"px "+n+"px "+o+"px "+e+"px; }")).concat(".node.page > .body.header:not(:empty):after, .node.page > .body.footer:not(:empty):after { left: -"+e+"px !important; right: -"+n+"px !important }"),this.lastRenderedBuffer!==a&&(this.cssDOMNode.textContent=this.lastRenderedBuffer=a)},t.prototype.pixelsToColumnWidth=function(t){return Math.round(t/this.gridColumnWidth)},t.prototype.isMobileMode=function(){return this.mobileMode},t}();e.DocumentGrid=n}.apply(e,[n,e]))||(t.exports=r)},function(t,e,n){"use strict";var r,o;r=[n,e,n(30)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){var e=this;this.enabled=!1,this.lastObservedWidth=null,this.lastObservedHeight=null,this.document=t,this.observeThread=n.Thread.create((function(){e.notifyInSyncMode()}),100).stop()}return t.prototype.setEnabled=function(t){return this.enabled=t,this.enabled?this.observeThread.start():this.observeThread.stop(),this},t.prototype.notifyInSyncMode=function(){if(this.enabled){var t=this.document.getRoot().offsetWidth,e=this.document.getRoot().offsetHeight;if(t!==this.lastObservedWidth||e!==this.lastObservedHeight){this.lastObservedWidth=t,this.lastObservedHeight=e;try{var n={command:"resize",documentId:this.document.getId(),width:this.document.getProperty("size.width"),height:~~this.lastObservedHeight+"px"};window.parent.postMessage(n,"*")}catch(t){}}}},t}();e.SizeChangeObserver=r}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(53),n(7),n(3)],void 0===(o=function(t,e,n,r,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e){var n=t.call(this)||this;return n.document=e,n}return s(e,t),e.prototype.addTranslation=function(t,n){return this.translations=this.translations||[],this.translations.push({code:t.code,language:t.language,poFileContents:n,default:!1}),this.trigger(e.EVENT_CHANGE),this},e.prototype.replaceTranslation=function(t,e){for(var n=0,r=this.translations.length;n<r;n++)if(this.translations[n].code===t)return this.translations[n].poFileContents=e,this;throw new Error("Failed to replace translation "+JSON.stringify(t)+": Translation is not added in form!")},e.prototype.hasTranslation=function(t,e){if(void 0===e&&(e=!1),!this.translations)return!1;for(var n=0,r=this.translations.length;n<r;n++)if(this.translations[n].code===t)return!e||(void 0===this.translations[n].enabled||!!this.translations[n].enabled);return!1},e.prototype.deleteTranslation=function(t){if(this.translations)for(var n=0,r=this.translations.length;n<r;n++)if(this.translations[n].code===t)return this.translations.splice(n,1),void this.trigger(e.EVENT_CHANGE)},e.prototype.setDefaultTranslation=function(t){if(!this.translations)throw new Error("Failed to set default translation "+JSON.stringify(t)+": No translations attached to form!");for(var n=!1,r=0,o=this.translations.length;r<o;r++)this.translations[r].code===t?(this.translations[r].default=!0,this.translations[r].enabled=!0,n=!0):this.translations[r].default=!1;if(!n)throw new Error("Translation "+JSON.stringify(t)+" not found. It cannot be set as default!");this.trigger(e.EVENT_CHANGE)},e.prototype.setEnabledTranslationState=function(t,n){if(!this.translations)throw new Error("Failed to set translation enabled state "+JSON.stringify(t)+": No translations attached to form!");for(var r=!1,o=0,i=this.translations.length;o<i;o++)this.translations[o].code===t&&(this.translations[o].enabled=n,n||(this.translations[o].default=!1),r=!0);if(!r)throw new Error("Translation "+JSON.stringify(t)+" not found. It cannot be enabled or disabled!");this.trigger(e.EVENT_CHANGE)},e.prototype.enumerateTranslations=function(){return this.translations||[]},e.prototype.replaceTranslationsIfYouKnowWhatYouAreDoing=function(t){return this.translations=t&&Array.isArray(t)&&t.length?t:void 0,this.trigger(e.EVENT_CHANGE),this},e.prototype.getTranslationFileForLanguageCode=function(t){if(!this.translations)return null;for(var e=0,r=this.translations.length;e<r;e++)if(this.translations[e].code===t)return n.POFile.parse(this.translations[e].poFileContents);return null},e.prototype.getTranslations=function(){for(var t=[],e=this.document.flatten()||[],n=0,o=e.length;n<o;n++)for(var i=e[n].getTranslations()||[],s=0,a=i.length;s<a;s++)t.push(i[s]);return t&&t.length?r.Helpers.arrayUnique(t,(function(t,e){return t.context===e.context&&t.original===e.original?0:-1})):null},e.prototype.onTranslationChanged=function(){for(var t=this.document.flatten()||[],e=0,n=t.length;e<n;e++)t[e].performTranslation()},e.prototype.serialize=function(){return r.Helpers.clone(this.translations||[])},e.EVENT_CHANGE="change",e}(o.EventEmitter);e.DocumentTranslations=i}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(34),n(13)],void 0===(o=function(t,e,n,r){Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.initProperties=function(){this.properties={width:0,height:0}},e.prototype.setDimensions=function(t){return this.dimensions=t,this.properties.width=t.width,this.properties.height=t.height,this},e.prototype.getDimensions=function(){return this.dimensions},e.prototype.getWidth=function(){return this.properties.width},e.prototype.getHeight=function(){return this.properties.height},e.prototype.write=function(t){return this.appendChild(t),this.document.registerFontFamily(t.getFontFamily()),this},e.prototype.writeImage=function(t){return this.appendChild(t),this.document.registerResource(t.getSrc()),this},e.prototype.writeButton=function(t){return this.appendChild(t),this.document.registerButton(t),this},e.prototype.getType=function(){return r.PDFNodeEntityType.PAGE},e.prototype.writeHTMLElement=function(t){var e=this,n=[],o=[];!function t(e){if(e)switch(e.nodeType){case Node.ELEMENT_NODE:if(e.childNodes&&e.childNodes.length)Array.prototype.slice.call(e.childNodes,0).forEach((function(e){return t(e)}));"img"===e.nodeName.toLowerCase()&&o.push(e);break;case Node.TEXT_NODE:n.push(e)}}(t),n.forEach((function(t){var n,o=t.textContent,i=t.parentNode;if(i&&(o.replace(/([\s]+)?([^\s]+)?([\s]+)?/gi,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t[1]&&(n=n||document.createDocumentFragment()).appendChild(document.createTextNode(t[1])),t[2]){var r=document.createElement("w");r.textContent=t[2],(n=n||document.createDocumentFragment()).appendChild(r)}return t[3]&&(n=n||document.createDocumentFragment()).appendChild(document.createTextNode(t[3])),""})),n)){var s=Array.prototype.slice.call(n.childNodes,0),a=s[0];i.replaceChild(n,t),Array.prototype.slice.call(i.querySelectorAll("w"),0).forEach((function(t){var n=t.getBoundingClientRect(),o=window.getComputedStyle(t),i=t.textContent,s=Math.round(n.top-e.dimensions.top),a=Math.round(n.left-e.dimensions.left),u=(o.fontFamily||"sans-serif").split(",")[0].trim(),l=parseInt(o.fontSize)||16,c="bold"===o.fontWeight,p="italic"===o.fontStyle,d="underline"===o.textDecoration,h=e.getDocument().create(r.PDFNodeEntityType.TEXT),f=o.color||"#000000";h.setPoint({top:s,left:a}).setBold(c).setItalic(p).setUnderline(d).setText(i).setFontFamily(u).setFontSize(l).setColor(f),e.write(h)})),i.replaceChild(t,a),s.slice(1).forEach((function(t){i.removeChild(t)}))}})),o.forEach((function(t){var n=e.getDocument().create(r.PDFNodeEntityType.IMAGE);n.setSrc(t.src),e.initializeFieldDimensions(t,n),e.writeImage(n)}))},e.prototype.initializeFieldDimensions=function(t,e){var n=t.getBoundingClientRect(),r=Math.round(n.top-this.dimensions.top),o=Math.round(n.left-this.dimensions.left);return e.setDimensions({top:r,left:o,width:Math.round(n.width),height:Math.round(n.height)}),e},e.prototype.originX=function(t){return t},e.prototype.originY=function(t){return this.properties.height-t},e}(n.PDFNode);e.PDFPage=o}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(34),n(13),n(28)],void 0===(o=function(t,e,n,r,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.initProperties=function(){this.properties={text:"",font:"sans-serif",size:16,left:0,top:0,color:[0,0,0],bold:!1,italic:!1,underline:!1}},e.prototype.getColor=function(){return this.properties.color},e.prototype.setColor=function(t){return this.properties.color=o.CSSUtils.parseCSSColor(t||"rgb(0,0,0)"),this},e.prototype.isBold=function(){return this.properties.bold},e.prototype.setBold=function(t){return this.properties.bold=!!t,this},e.prototype.isItalic=function(){return this.properties.italic},e.prototype.setItalic=function(t){return this.properties.italic=!!t,this},e.prototype.isUnderline=function(){return this.properties.underline},e.prototype.setUnderline=function(t){return this.properties.underline=!!t,this},e.prototype.getPoint=function(){return{left:this.properties.left,top:this.properties.top}},e.prototype.setPoint=function(t){return this.properties.left=t.left,this.properties.top=t.top,this},e.prototype.getText=function(){return this.properties.text},e.prototype.setText=function(t){return this.properties.text=t||"",this},e.prototype.getFontFamily=function(){return this.properties.font||0},e.prototype.setFontFamily=function(t){return this.properties.font=t||"",this},e.prototype.getFontSize=function(){return this.properties.size},e.prototype.setFontSize=function(t){return this.properties.size=t||0,this},e.prototype.getType=function(){return r.PDFNodeEntityType.TEXT},e.prototype.render=function(t,e,n,r){t.drawText(this.properties.text,{x:r.originX(this.properties.left),y:r.originY(this.properties.top+this.properties.size),size:this.properties.size,lineHeight:this.properties.size,font:n.getFontByName(this.getFontFamily()),color:r.getDocument().rgb(this.getColor())})},e}(n.PDFNode);e.PDFText=i}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(34),n(13),n(28)],void 0===(o=function(t,e,n,r,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.getType=function(){return r.PDFNodeEntityType.INPUT_TEXT},e.prototype.initProperties=function(){this.properties={value:"",name:"",top:0,left:0,width:0,height:0,textColor:[0,0,0],backgroundColor:[255,255,255],borderColor:[0,0,0],borderWidth:1,fontFamily:"sans-serif",fontSize:16,multiLine:!1,readOnly:!1,required:!1,repeatedIndex:null}},e.prototype.getRepeatedIndex=function(){return this.properties.repeatedIndex},e.prototype.setRepeatedIndex=function(t){return this.properties.repeatedIndex=t,this},e.prototype.isRequired=function(){return this.properties.required},e.prototype.setRequired=function(t){return this.properties.required=!!t,this},e.prototype.isReadOnly=function(){return this.properties.readOnly},e.prototype.setReadOnly=function(t){return this.properties.readOnly=!!t,this},e.prototype.getName=function(){return null===this.getRepeatedIndex()?this.properties.name:this.properties.name+"["+String(this.getRepeatedIndex())+"]"},e.prototype.setName=function(t){return this.properties.name=t||"",this},e.prototype.getFontFamily=function(){return this.properties.fontFamily},e.prototype.setFontFamily=function(t){return t=t||"sans-serif",this.properties.fontFamily=t,this},e.prototype.getFontSize=function(){return this.properties.fontSize},e.prototype.setFontSize=function(t){return this.properties.fontSize=~~t,this},e.prototype.getBorderWidth=function(){return this.properties.borderWidth},e.prototype.setBorderWidth=function(t){return this.properties.borderWidth=~~t,this},e.prototype.getBorderColor=function(){return this.properties.borderColor},e.prototype.setBorderColor=function(t){return this.properties.borderColor=o.CSSUtils.parseCSSColor(t||"rgb(0,0,0)"),this},e.prototype.getTextColor=function(){return this.properties.textColor},e.prototype.setTextColor=function(t){return this.properties.textColor=o.CSSUtils.parseCSSColor(t||"rgb(0,0,0)"),this},e.prototype.getBackgroundColor=function(){return this.properties.backgroundColor},e.prototype.setBackgroundColor=function(t){return this.properties.backgroundColor=o.CSSUtils.parseCSSColor(t||"rgb(255,255,255)"),this},e.prototype.getDimensions=function(){return{left:this.properties.left,top:this.properties.top,width:this.properties.width,height:this.properties.height}},e.prototype.setDimensions=function(t){return this.properties.left=t.left||0,this.properties.top=t.top||0,this.properties.width=t.width||0,this.properties.height=t.height||0,this},e.prototype.setValue=function(t){return this.properties.value=t||"",this},e.prototype.getValue=function(){return this.properties.value},e.prototype.isMultiLine=function(){return this.properties.multiLine},e.prototype.setMultiLine=function(t){return this.properties.multiLine=!!t,this},e.prototype.render=function(t,e,n,r){var o=e.createTextField(this.getName());o.setText(this.getValue()),this.isMultiLine()&&o.enableMultiline(),this.isRequired()&&o.enableRequired(),this.isReadOnly()&&o.enableReadOnly(),o.addToPage(t,{x:r.originX(this.properties.left),y:r.originY(this.properties.top+this.properties.height),width:this.properties.width,height:this.properties.height,borderWidth:this.properties.borderWidth,textColor:this.getDocument().rgb(this.getTextColor()),backgroundColor:this.getDocument().rgb(this.getBackgroundColor()),borderColor:this.getDocument().rgb(this.getBorderColor()),font:n.getFontByName(this.getFontFamily())}),o.setFontSize(this.getFontSize())},e.prototype.isInput=function(){return!0},e.prototype.enumerateNames=function(){return[this.getName()]},e.prototype.writePlaceholders=function(t){this.getValue()&&(t[this.getName()]=this.getValue())},e}(n.PDFNode);e.PDFInputText=i}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(0),n(31)],void 0===(o=function(t,e,n,r){Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.load=function(){return this.loader||(this.loader=n.Deferred((function(t){var e=window.define;window.define=function(){};var n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("src",r.CDN.getCDNUrl("/vendor/fontkit/fontkit.umd.min.js")),n.onload=function(){var n=0;!function r(){window.fontkit?(window.define=e,t.resolve(window.fontkit)):++n<500?setTimeout((function(){r()}),20):(window.define=e,t.reject(new Error("Failed to load fontkit (timeout)")))}()},n.onerror=function(){window.define=e,t.reject(new Error("Failed to load fontkit"))},document.getElementsByTagName("head")[0].appendChild(n)})))},t}();e.FontKitSDK=o}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r;void 0===(r=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.fonts={},this.resources={}}return t.prototype.registerFont=function(t,e){this.fonts[t]=e},t.prototype.registerResource=function(t,e){this.resources[t]=e},t.prototype.getFontByName=function(t){return this.fonts[t]||void 0},t.prototype.getResourceByURL=function(t){return this.resources[t]||void 0},t.prototype.hasFont=function(t){return void 0!==this.fonts[t]},t.prototype.hasResource=function(t){return void 0!==this.resources[t]},t}();e.PDFResourcesCollection=n}.apply(e,[n,e]))||(t.exports=r)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(34),n(13),n(28)],void 0===(o=function(t,e,n,r,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.getType=function(){return r.PDFNodeEntityType.INPUT_RADIO},e.prototype.initProperties=function(){this.properties={options:[],name:"",textColor:[0,0,0],fontFamily:"Roboto",fontSize:16,required:!1,repeatedIndex:null,defaultUncheckedValue:null,radioInputSize:22,groupByName:null}},e.prototype.getGroupByName=function(){return this.properties.groupByName},e.prototype.setGroupByName=function(t){return this.properties.groupByName=t||null,this},e.prototype.getRadioInputSize=function(){return this.properties.radioInputSize},e.prototype.setRadioInputSize=function(t){return this.properties.radioInputSize=t||22,this},e.prototype.getDefaultUncheckedValue=function(){return this.properties.defauntUncheckedValue},e.prototype.setDefaultUncheckedValue=function(t){return this.properties.defauntUncheckedValue=t,this},e.prototype.getRepeatedIndex=function(){return this.properties.repeatedIndex},e.prototype.setRepeatedIndex=function(t){return this.properties.repeatedIndex=t,this},e.prototype.isRequired=function(){return this.properties.required},e.prototype.setRequired=function(t){return this.properties.required=!!t,this},e.prototype.getTextColor=function(){return this.properties.textColor},e.prototype.setTextColor=function(t){return this.properties.textColor=o.CSSUtils.parseCSSColor(t||"rgb(0,0,0)"),this},e.prototype.getName=function(){return null===this.getRepeatedIndex()?this.properties.name:this.properties.name+"["+String(this.getRepeatedIndex())+"]"},e.prototype.setName=function(t){return this.properties.name=t||"",this},e.prototype.getFontFamily=function(){return this.properties.fontFamily},e.prototype.setFontFamily=function(t){return t=t||"sans-serif",this.properties.fontFamily=t,this},e.prototype.getFontSize=function(){return this.properties.fontSize},e.prototype.setFontSize=function(t){return this.properties.fontSize=~~t,this},e.prototype.addOption=function(t,e,n){return this.properties.options.push({value:t,left:e.left,top:e.top,other:n}),this},e.prototype.getOptions=function(){return this.properties.options},e.prototype.render=function(t,e,n,r){var o=e.createRadioGroup(this.getName());this.isRequired()&&o.enableRequired();for(var i=this.getOptions(),s=0,a=i.length;s<a;s++){var u={x:r.originX(i[s].left),y:r.originY(i[s].top+this.getRadioInputSize()),width:this.getRadioInputSize(),height:this.getRadioInputSize(),textColor:r.getDocument().rgb(this.getTextColor()),borderColor:r.getDocument().rgb(this.getTextColor()),borderWidth:2,fontFamily:n.getFontByName(this.getFontFamily())};o.addOptionToPage(i[s].value,t,u)}},e.prototype.isInput=function(){return!0},e.prototype.enumerateNames=function(){return[this.getName()]},e}(n.PDFNode);e.PDFInputRadio=i}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(13),n(28),n(34)],void 0===(o=function(t,e,n,r,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.getType=function(){return n.PDFNodeEntityType.INPUT_CHECKBOX},e.prototype.initProperties=function(){this.properties={options:[],name:"",textColor:[0,0,0],fontFamily:"Roboto",fontSize:16,required:!1,repeatedIndex:null,booleanValue:!1}},e.prototype.isBooleanValue=function(){return this.properties.booleanValue},e.prototype.setBooleanValue=function(t){return this.properties.booleanValue=!!t,this},e.prototype.getRepeatedIndex=function(){return this.properties.repeatedIndex},e.prototype.setRepeatedIndex=function(t){return this.properties.repeatedIndex=t,this},e.prototype.isRequired=function(){return this.properties.required},e.prototype.setRequired=function(t){return this.properties.required=!!t,this},e.prototype.getTextColor=function(){return this.properties.textColor},e.prototype.setTextColor=function(t){return this.properties.textColor=r.CSSUtils.parseCSSColor(t||"rgb(0,0,0)"),this},e.prototype.getName=function(){return null===this.getRepeatedIndex()?this.properties.name:this.properties.name+"["+String(this.getRepeatedIndex())+"]"},e.prototype.setName=function(t){return this.properties.name=t||"",this},e.prototype.getFontFamily=function(){return this.properties.fontFamily},e.prototype.setFontFamily=function(t){return t=t||"sans-serif",this.properties.fontFamily=t,this},e.prototype.getFontSize=function(){return this.properties.fontSize},e.prototype.setFontSize=function(t){return this.properties.fontSize=~~t,this},e.prototype.addOption=function(t,e,n){return this.properties.options.push({value:t,left:e.left,top:e.top,other:n}),this},e.prototype.getOptions=function(){return this.properties.options},e.prototype.render=function(t,e,n,r){for(var o=this.isRequired()&&1===this.getOptions().length,i=this.getOptions(),s=0,a=i.length;s<a;s++){var u=e.createCheckBox(this.getName()+(i[s].value?"."+i[s].value:""));o&&u.enableRequired();var l={x:r.originX(i[s].left),y:r.originY(i[s].top+22),width:22,height:22,textColor:r.getDocument().rgb(this.getTextColor()),borderColor:r.getDocument().rgb(this.getTextColor()),borderWidth:2,fontFamily:n.getFontByName(this.getFontFamily())};u.addToPage(t,l)}},e.prototype.isInput=function(){return!0},e.prototype.enumerateNames=function(){var t=this;return this.getOptions().map((function(e){return t.getName()+(e.value?"."+e.value:"")}))},e}(o.PDFNode);e.PDFInputCheckbox=i}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(34),n(13),n(28)],void 0===(o=function(t,e,n,r,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.getType=function(){return r.PDFNodeEntityType.INPUT_DROPDOWN},e.prototype.initProperties=function(){this.properties={options:[],name:"",textColor:[0,0,0],fontFamily:"Roboto",fontSize:16,top:0,left:0,width:0,height:0,backgroundColor:[255,255,255],borderColor:[0,0,0],borderWidth:1,firstChoiceEmpty:!1,required:!1,repeatedIndex:null}},e.prototype.getRepeatedIndex=function(){return this.properties.repeatedIndex},e.prototype.setRepeatedIndex=function(t){return this.properties.repeatedIndex=t,this},e.prototype.isRequired=function(){return this.properties.required},e.prototype.setRequired=function(t){return this.properties.required=!!t,this},e.prototype.isFirstChoiceEmpty=function(){return this.properties.firstChoiceEmpty},e.prototype.setFirstChoiceIsEmpty=function(t){return this.properties.firstChoiceEmpty=!!t,this},e.prototype.getBorderWidth=function(){return this.properties.borderWidth},e.prototype.setBorderWidth=function(t){return this.properties.borderWidth=~~t,this},e.prototype.getBorderColor=function(){return this.properties.borderColor},e.prototype.setBorderColor=function(t){return this.properties.borderColor=o.CSSUtils.parseCSSColor(t||"rgb(0,0,0)"),this},e.prototype.getBackgroundColor=function(){return this.properties.backgroundColor},e.prototype.setBackgroundColor=function(t){return this.properties.backgroundColor=o.CSSUtils.parseCSSColor(t||"rgb(255,255,255)"),this},e.prototype.getDimensions=function(){return{left:this.properties.left,top:this.properties.top,width:this.properties.width,height:this.properties.height}},e.prototype.setDimensions=function(t){return this.properties.left=t.left||0,this.properties.top=t.top||0,this.properties.width=t.width||0,this.properties.height=t.height||0,this},e.prototype.getTextColor=function(){return this.properties.textColor},e.prototype.setTextColor=function(t){return this.properties.textColor=o.CSSUtils.parseCSSColor(t||"rgb(0,0,0)"),this},e.prototype.getName=function(){return null===this.getRepeatedIndex()?this.properties.name:this.properties.name+"["+String(this.getRepeatedIndex())+"]"},e.prototype.setName=function(t){return this.properties.name=t||"",this},e.prototype.getFontFamily=function(){return this.properties.fontFamily},e.prototype.setFontFamily=function(t){return t=t||"sans-serif",this.properties.fontFamily=t,this},e.prototype.getFontSize=function(){return this.properties.fontSize},e.prototype.setFontSize=function(t){return this.properties.fontSize=~~t,this},e.prototype.addOption=function(t){return this.properties.options.push(t),this},e.prototype.getOptions=function(){return this.properties.options},e.prototype.render=function(t,e,n,r){var o=e.createDropdown(this.getName());o.setOptions(this.getOptions()),this.isRequired()&&o.enableRequired(),o.addToPage(t,{x:r.originX(this.properties.left),y:r.originY(this.properties.top+this.properties.height),width:this.properties.width,height:this.properties.height,borderWidth:this.properties.borderWidth,textColor:this.getDocument().rgb(this.getTextColor()),backgroundColor:this.getDocument().rgb(this.getBackgroundColor()),borderColor:this.getDocument().rgb(this.getBorderColor()),font:n.getFontByName(this.getFontFamily())}),o.setFontSize(this.getFontSize()),o.select(this.getOptions()[0])},e.prototype.isInput=function(){return!0},e.prototype.enumerateNames=function(){return[this.getName()]},e.prototype.writePlaceholders=function(t){this.isFirstChoiceEmpty()&&(t[this.getName()]=this.getOptions()[0]||"")},e}(n.PDFNode);e.PDFInputDropdown=i}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(34),n(13)],void 0===(o=function(t,e,n,r){Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.getType=function(){return r.PDFNodeEntityType.INPUT_UNKNOWN},e.prototype.initProperties=function(){this.properties={top:0,left:0,width:0,height:0}},e.prototype.getDimensions=function(){return{left:this.properties.left,top:this.properties.top,width:this.properties.width,height:this.properties.height}},e.prototype.setDimensions=function(t){return this.properties.left=t.left||0,this.properties.top=t.top||0,this.properties.width=t.width||0,this.properties.height=t.height||0,this},e.prototype.render=function(t,e,n,r){var o=this.getDimensions(),i=o.left+8,s=o.top+8,a=o.width-16,u=o.height-16;t.drawRectangle({x:r.originX(i),y:r.originY(s+u),width:a,height:u,color:r.getDocument().rgb([0,0,0]),opacity:.05})},e}(n.PDFNode);e.PDFInputUnknown=o}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(34),n(13)],void 0===(o=function(t,e,n,r){Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.getType=function(){return r.PDFNodeEntityType.IMAGE},e.prototype.initProperties=function(){this.properties={top:0,left:0,width:0,height:0,src:null}},e.prototype.getSrc=function(){return this.properties.src||null},e.prototype.setSrc=function(t){return this.properties.src=t||null,this},e.prototype.getDimensions=function(){return{left:this.properties.left,top:this.properties.top,width:this.properties.width,height:this.properties.height}},e.prototype.setDimensions=function(t){return this.properties.left=t.left||0,this.properties.top=t.top||0,this.properties.width=t.width||0,this.properties.height=t.height||0,this},e.prototype.render=function(t,e,n,r){var o=n.getResourceByURL(this.getSrc()),i=this.getDimensions();0!==i.width&&0!==i.height&&(o?t.drawImage(o,{x:r.originX(i.left),y:r.originY(i.top+i.height),width:i.width,height:i.height}):t.drawRectangle({x:r.originX(i.left),y:r.originY(i.top+i.height),width:i.width,height:i.height,color:r.getDocument().rgb([0,0,0]),opacity:.05}))},e}(n.PDFNode);e.PDFImage=o}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(34),n(13),n(28),n(17)],void 0===(o=function(t,e,n,r,o,i){Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=t.call(this,e)||this;return n.id=i.UniqueId.next(),n}return s(e,t),e.prototype.getType=function(){return r.PDFNodeEntityType.BUTTON},e.prototype.initProperties=function(){this.properties={left:0,top:0,width:0,height:0,text:"",textColor:[255,255,255],backgroundColor:[0,0,0],borderColor:[0,0,0],borderWidth:1,fontFamily:"Roboto",fontSize:16,buttonType:r.PDFButtonType.SUBMIT}},e.prototype.getButtonType=function(){return this.properties.buttonType},e.prototype.setButtonType=function(t){return this.properties.buttonType=t,this},e.prototype.getFontFamily=function(){return this.properties.fontFamily},e.prototype.setFontFamily=function(t){return t=t||"sans-serif",this.properties.fontFamily=t,this},e.prototype.getFontSize=function(){return this.properties.fontSize},e.prototype.setFontSize=function(t){return this.properties.fontSize=~~t,this},e.prototype.getBorderWidth=function(){return this.properties.borderWidth},e.prototype.setBorderWidth=function(t){return this.properties.borderWidth=~~t,this},e.prototype.getBorderColor=function(){return this.properties.borderColor},e.prototype.setBorderColor=function(t){return this.properties.borderColor=o.CSSUtils.parseCSSColor(t||"rgb(0,0,0)"),this},e.prototype.getTextColor=function(){return this.properties.textColor},e.prototype.setTextColor=function(t){return this.properties.textColor=o.CSSUtils.parseCSSColor(t||"rgb(0,0,0)"),this},e.prototype.getBackgroundColor=function(){return this.properties.backgroundColor},e.prototype.setBackgroundColor=function(t){return this.properties.backgroundColor=o.CSSUtils.parseCSSColor(t||"rgb(255,255,255)"),this},e.prototype.getText=function(){return this.properties.text.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\u0142/g,"l")},e.prototype.setText=function(t){return this.properties.text=t||"",this},e.prototype.getDimensions=function(){return{left:this.properties.left,top:this.properties.top,width:this.properties.width,height:this.properties.height}},e.prototype.setDimensions=function(t){return this.properties.left=t.left||0,this.properties.top=t.top||0,this.properties.width=t.width||0,this.properties.height=t.height||0,this},e.prototype.render=function(t,e,n,r){var o=e.createButton("button."+this.id),i=this.getDimensions();o.addToPage(this.getText(),t,{x:r.originX(i.left),y:r.originY(i.top+i.height),width:i.width,height:i.height,textColor:r.getDocument().rgb(this.getTextColor()),backgroundColor:r.getDocument().rgb(this.getBackgroundColor()),borderColor:r.getDocument().rgb(this.getBorderColor()),borderWidth:this.getBorderWidth(),font:n.getFontByName(this.getFontFamily())}),o.setFontSize(this.getFontSize())},e.prototype.enumerateNames=function(){return["button."+this.id]},e}(n.PDFNode);e.PDFButton=a}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(34),n(13),n(28)],void 0===(o=function(t,e,n,r,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.getType=function(){return r.PDFNodeEntityType.INPUT_SIGNATURE},e.prototype.initProperties=function(){this.properties={name:"",width:0,height:0,left:0,top:0,borderWidth:1,borderColor:[0,0,0],backgroundColor:[255,255,255],required:!1,repeatedIndex:null}},e.prototype.getRepeatedIndex=function(){return this.properties.repeatedIndex},e.prototype.setRepeatedIndex=function(t){return this.properties.repeatedIndex=t,this},e.prototype.isRequired=function(){return this.properties.required},e.prototype.setRequired=function(t){return this.properties.required=!!t,this},e.prototype.getBorderWidth=function(){return this.properties.borderWidth},e.prototype.setBorderWidth=function(t){return this.properties.borderWidth=~~t,this},e.prototype.getBorderColor=function(){return this.properties.borderColor},e.prototype.setBorderColor=function(t){return this.properties.borderColor=o.CSSUtils.parseCSSColor(t||"rgb(0,0,0)"),this},e.prototype.getBackgroundColor=function(){return this.properties.backgroundColor},e.prototype.setBackgroundColor=function(t){return this.properties.backgroundColor=o.CSSUtils.parseCSSColor(t||"rgb(255,255,255)"),this},e.prototype.getName=function(){return null===this.getRepeatedIndex()?this.properties.name||"":(this.properties.name||"")+"["+String(this.getRepeatedIndex())+"]"},e.prototype.setName=function(t){return this.properties.name=t||"",this},e.prototype.getDimensions=function(){return{left:this.properties.left,top:this.properties.top,width:this.properties.width,height:this.properties.height}},e.prototype.setDimensions=function(t){return this.properties.left=t.left||0,this.properties.top=t.top||0,this.properties.width=t.width||0,this.properties.height=t.height||0,this},e.prototype.isInput=function(){return!1},e.prototype.enumerateNames=function(){return[this.getName()]},e.prototype.render=function(t,e,n,r){var o=this.getDimensions(),i=o.left+8,s=o.top+8,a=o.width-16,u=o.height-16;t.drawRectangle({x:r.originX(i),y:r.originY(s+u),width:a,height:u,borderColor:r.getDocument().rgb(this.getBorderColor()),backgroundColor:r.getDocument().rgb(this.getBackgroundColor()),borderWidth:this.getBorderWidth(),opacity:.05})},e}(n.PDFNode);e.PDFInputSignature=i}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(34),n(13),n(28)],void 0===(o=function(t,e,n,r,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.getType=function(){return r.PDFNodeEntityType.RECTANGLE},e.prototype.initProperties=function(){this.properties={width:0,height:0,top:0,left:0,borderWidth:1,borderColor:[0,0,0],fillColor:null}},e.prototype.getDimensions=function(){return{left:this.properties.left,top:this.properties.top,width:this.properties.width,height:this.properties.height}},e.prototype.setDimensions=function(t){return this.properties.left=t.left||0,this.properties.top=t.top||0,this.properties.width=t.width||0,this.properties.height=t.height||0,this},e.prototype.getBorderWidth=function(){return this.properties.borderWidth},e.prototype.setBorderWidth=function(t){return this.properties.borderWidth=~~t,this},e.prototype.getBorderColor=function(){return this.properties.borderColor},e.prototype.setBorderColor=function(t){return this.properties.borderColor=o.CSSUtils.parseCSSColor(t||"rgb(0,0,0)"),this},e.prototype.getFillColor=function(){return this.properties.fillColor},e.prototype.setFillColor=function(t){return this.properties.fillColor=null===t?null:o.CSSUtils.parseCSSColor(t||"rgb(0,0,0)"),this},e.prototype.render=function(t,e,n,r){var o=this.getDimensions(),i=o.left,s=o.top,a=o.width,u=o.height;null===this.getFillColor()?t.drawRectangle({x:r.originX(i),y:r.originY(s+u),width:a,height:u,borderColor:r.getDocument().rgb(this.getBorderColor()),borderWidth:this.getBorderWidth()}):t.drawRectangle({x:r.originX(i),y:r.originY(s+u),width:a,height:u,borderColor:r.getDocument().rgb(this.getBorderColor()),borderWidth:this.getBorderWidth(),color:r.getDocument().rgb(this.getFillColor())})},e}(n.PDFNode);e.PDFRectangle=i}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r;void 0===(r=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.MESSAGES=["This field is required","File URL seems to be invalid!","A technical problem occurred. Failed to validate this file URL","Value must be unique","Value too short. Expected minimum %1 characters, got %2","Value too long. Expected maximum %1 characters, got %2","Time must be in interval %1 - %2","Time must be >= than %1","Time must be <= than %1","Date must be >= than %1","Value must be of type numeric","Value too small. Expected minimum %1, got %2",'Value too small. Expected minimum "%1", got "%2"',"Date must be <= than %1","Value too big. Expected maximum %1, got %2",'Value too big. Expected maximum "%1", got "%2"',"Only %1 file types are allowed","A fair-complex signature is required","A complex signature is required","A valid signature is required","Please input alphabet letters only","Please input alphabet letters and digits only","Please input alphabet letters and space character only","Please input alphabet letters, numbers, and space character only","Please input a valid date in format DD/MM/YYYY","Please input a valid date in format MM/DD/YYYY","Please input a valid time in 24 hours format HH:MM","Please input a valid time in 12 hours format HH:MM AM/PM",'Value "%1" does not seem to be a valid email address',"Please input a decimal value","Please input a decimal value >= than 0","Please input an integer number","Please input an integer number >= than 0",'Value "%1" does not seem to be a valid url address','"%1" does not seem to be a valid phone number',"Value must represent a valid name",'Field "%1" must represent a valid name part!','Fields "%1" must represent valid name parts!',"Zip Code field must be a numeric value > than 0","%1 field must represent a valid geographical name",'Invalid address field: "%1"','Invalid address fields: "%1"','Field "%1" was not found in submission','Field "%1" was expected to be of length %2 but instead got length %3',"Field value does not match required pattern"],t}();e.FormFieldsHardcodedErrors=n}.apply(e,[n,e]))||(t.exports=r)},function(t,e,n){"use strict";var r,o,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r=[n,e,n(15),n(4),n(17),n(37)],void 0===(o=function(t,e,n,r,o,s){Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(){}return t.prototype.getVersion=function(){return"0.2"},t.prototype.createNodeFromSerialization=function(t,e){if(!t)throw new Error("Object expected!");var n=e.createElement(t.typeId,t.properties,t.id);if(t.children)for(var r=0,o=t.children.length;r<o;r++)n.appendChild(this.createNodeFromSerialization(t.children[r],e));if(t.children1)for(r=0,o=t.children1.length;r<o;r++)n.appendChild(this.createNodeFromSerialization(t.children1[r],e),1);if(t.children2)for(r=0,o=t.children2.length;r<o;r++)n.appendChild(this.createNodeFromSerialization(t.children2[r],e),2);return n},t.prototype.unserialize=function(t,e){var a,u=JSON.parse(t||'["0.2"]');if(!Array.isArray(u))throw new Error("Array expected!");if(u[0]!==this.getVersion())throw new Error("Expected document version "+JSON.stringify(this.getVersion())+", but got: "+JSON.stringify(u[0]));if(u[1]){if("object"!==i(u[1]))throw new Error("Invalid serialized data: At pos 1, expected Object");if(u[1].typeId!==r.NodeTypes.DOCUMENT)throw new Error("Invalid serialized data: At pos 1, expected node type id should be DOCUMENT!");var l=void 0;if(a=new n.Document(u[1].properties,u[1].id,e,new s.Invoice),u[1].children)for(var c=0,p=u[1].children.length;c<p;c++)l=this.createNodeFromSerialization(u[1].children[c],a),a.appendChild(l,0);if(u[1].children1)for(c=0,p=u[1].children1.length;c<p;c++)l=this.createNodeFromSerialization(u[1].children1[c],a),a.appendChild(l,1);if(u[1].children2)for(c=0,p=u[1].children2.length;c<p;c++)l=this.createNodeFromSerialization(u[1].children2[c],a),a.appendChild(l,2)}else{(a=new n.Document(void 0,null,e,new s.Invoice)).setId(o.UniqueId.next());var d=a.createElement(r.NodeTypes.PAGE);a.appendChild(d)}return a.runIndexerInSyncMode(),a.getInvoice().unserialize(u[2]||null),a.getDocumentTranslations().replaceTranslationsIfYouKnowWhatYouAreDoing(u[3]||null),a.updateAutoButtons(),a.setActivePage(a.getPages()[0]||null),a},t}();e.Reader=a}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i=(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});void 0===(r=function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.prototype.isHoliday=function(t,e){return!t||0===t.getDay()||t.getDay()>5?0:1},t}(),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dates={"1/1/2020":"Anul Nou","2/1/2020":"A doua zi dupÄ Anul Nou","24/1/2020":"Mica Unire","17/4/2020":"Vinerea mare","19/4/2020":"PaÈtele Ortodox","20/4/2020":"A doua zi de PaÈte Ortodox","1/5/2020":"Ziua Muncii","1/6/2020":"Ziua Copilului","7/6/2020":"Rusalii","8/6/2020":"A doua zi de Rusalii","15/8/2020":"Adormirea Maicii Domnului","30/11/2020":"SfÃ¢ntul Andrei","1/12/2020":"Ziua NaÈionalÄ a RomÃ¢niei","25/12/2020":"CrÄciunul","26/12/2020":"A doua zi de CrÄciun"},e}return i(e,t),e.prototype.isHoliday=function(e,n){return 0===t.prototype.isHoliday.call(this,e,n)?0:~~(void 0===this.dates[n])},e}(n),o=function(){function t(){}return t.is_business_day=function(t,e){this.init();var n=t&&e?String(e).toLowerCase()+"-"+t.getFullYear():"",r=t?t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear():"";return this.cache[n]?this.cache[n].isHoliday(t,r):this.cache[""].isHoliday(t,r)},t.init=function(){this.initialized||(this.initialized=!0,this.cache[""]=new n,this.cache["ro-2020"]=new r)},t.cache={},t.initialized=!1,t}();e.WorldwideHolidaysOfCountries=o}.apply(e,[n,e]))||(t.exports=r)},,,,,,,,,,function(t,e,n){"use strict";var r,o;r=[n,e,n(12),n(29),n(5)],void 0===(o=function(t,e,n,r,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t.start=function(){var t=this;this.started||(this.started=!0,-1===window.location.href.indexOf("/view/")&&console.warn("[ERRORMAN]: Installed error trap handler"),this.sendErrorsToBackend=n.Debouncer.create((function(){t.sendErrorsToBackendInSyncMode()}),1e4),window.onerror=function(e,n,r,o,i){t.addFrontendException(e,n,r,o,i)})},t.addFrontendException=function(t,e,n,o,i){this.frontendExceptions.push({message:t,url:e,line:n,col:o,error:this.getErrorMessage(i),date:r.DateUtils.getUTCTimestamp(new Date)}),this.frontendExceptions.length>30&&this.frontendExceptions.splice(0,this.frontendExceptions.length-30),this.sendErrorsToBackend()},t.getErrorMessage=function(t){var e=String(t||"Error: Unknown error");return t&&(void 0!==t.stack&&t.stack&&(e=e+" STACK: "+t.stack),void 0!==t.message&&t.message&&(e=e+" MESSAGE: "+t.message),void 0!==t.name&&t.name&&(e=e+" NAME: "+t.name)),e.replace(/[\r\n]+/g," ")},t.sendErrorsToBackendInSyncMode=function(){var t=this;if(this.frontendExceptions.length){var e=this.frontendExceptions.length;o.API.post("logger",{log_type:"frontend-exceptions",logs:JSON.stringify(this.frontendExceptions)},o.APIAuthenticationStrategy.OPTIONAL_AUTHENTICATION).then((function(){console.warn("[ERROR_MAN]: Sent ",e," errors to backend for analysis"),t.frontendExceptions.splice(0,t.frontendExceptions.length)})).fail((function(t){console.warn("[ERROR_MAN]: Failed to send ",e," errors to backend")}))}},t.frontendExceptions=[],t.started=!1,t}();e.ErrorReportingManager=i}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(0),n(15),n(76),n(20),n(6),n(2),n(11),n(392),n(5),n(27),n(16),n(690),n(691),n(692),n(197),n(103),n(49),n(4),n(168),n(693),n(137),n(1)],void 0===(o=function(t,e,n,r,o,i,s,a,u,l,c,p,d,h,f,g,m,y,v,b,C,E,A,I){var T,S;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.FORM_REDIRECT="FORM_REDIRECT",t.LOAD_SDK="LOAD_SDK"}(T||(T={})),function(t){t.POST="POST",t.GET="GET"}(S||(S={}));var w=function(){function t(t,e,n,o,i){var s=this;this.referrer=null,this.utmSource="abcsubmit",this.document=t,this.submissionModel=e,this.submitLoader=new u.Loader(document.body),this.googleRecaptcha=n,this.controlsVisibilityState=o,this.formRedirectRulesManager=i,this.document.on(r.Document.EVENT_SUBMIT,(function(){s.submit()})),this.document.on(r.Document.EVENT_RESET,(function(){s.reset()})),this.document.on(r.Document.EVENT_NEXT_PAGE,(function(){s.nextPage()})),this.document.on(r.Document.EVENT_PREVIOUS_PAGE,(function(){s.previousPage()})),this.document.on(r.Document.EVENT_SAVE,(function(){s.saveForLater()})),this.document.on(r.Document.EVENT_PRINT,(function(){s.print()})),this.document.on(r.Document.EVENT_FOLLOW_LINK,(function(t,e){void 0===e&&(e="_self"),s.followLink(t,e)})),this.document.on(r.Document.EVENT_SHOW_PAGE_BY_ID,(function(t){s.showPageById(t)}))}return t.prototype.submit=function(t,e){var o=this;return void 0===t&&(t=null),void 0===e&&(e=!0),n.Deferred((function(n){if(o.isFormRunningInLimitedFunctionality())return o.document.setActivePage(N.create(o.document,!1,"Limited functionality","Form submission is not possible during limited functionality. Please upgrade in order to unlock the premium features used by this form")),void n.reject(new Error("Form #"+o.document.getId()+" is running in limited functionality"));if(v.EditSubmissionManager.getActionType()!==v.ViewFormSubmissionActionType.VIEW_SUBMISSION)if(o.document.getProperty("document.isTemplate"))a.Dialog.alert("This form is a template, and is not accepting results","Can't submit form").then((function(){n.reject(new Error("Can't submit on form templates"))}));else if(!1!==o.evaluateSubmitCallbacks()){var i=o.document.flatten().filter((function(t){return!!t.getError()}));if(i.length)return i[0].scrollIntoView(),void n.reject(new Error("Form has errors"));o.document.getActivePage()?(o.submitLoader.addLoadRequest(),o.getGoogleRecaptchaPromise().then((function(i){var s="forms/"+o.document.getId()+"/submit",u=c.APIAuthenticationStrategy.OPTIONAL_AUTHENTICATION,l=new Date,h={day:l.getDate(),month:l.getMonth()+1,year:l.getFullYear(),hour:l.getHours(),minute:l.getMinutes(),second:l.getSeconds()},f={submission:JSON.stringify(o.submissionModel.getFormData()),payment:JSON.stringify(o.document.getInvoice().getComputedInvoice()),recaptcha:i,paymentGatewayTypeId:String(o.getDefaultPaymentGatewayTypeId()||""),clientDate:JSON.stringify(h),hiddenFields:JSON.stringify(o.controlsVisibilityState.getHiddenControlsIDList())};if(o.getReferrer()&&(f.referrer=o.getReferrer()),o.getUtmSource()&&(f.utmSource=o.getUtmSource()),v.EditSubmissionManager.getActionType()===v.ViewFormSubmissionActionType.EDIT_SUBMISSION||v.EditSubmissionManager.getActionType()===v.ViewFormSubmissionActionType.DYNAMIC_FORM){s="forms/"+o.document.getId()+"/update-submission/"+String(v.EditSubmissionManager.getSubmissionId()),u=c.APIAuthenticationStrategy.DEFAULT;var g=d.URLParser.parseURL(location.href);g&&g.search&&g.search.workflowInstanceId&&g.search.workflowStepId&&/^[\d]+$/.test(g.search.workflowInstanceId)&&/^[\d]+$/.test(g.search.workflowStepId)&&(f.workflowInstanceId=g.search.workflowInstanceId,f.workflowStepId=g.search.workflowStepId,u=c.APIAuthenticationStrategy.OPTIONAL_AUTHENTICATION,f.updateType=v.EditSubmissionManager.getActionType())}if(console.warn("FormCommands.submit(): TODO: addCalendarEvents in requestBody"),t)for(var m in t)t.hasOwnProperty(m)&&t.propertyIsEnumerable(m)&&void 0===f[m]&&(f[m]=t[m]);e&&v.EditSubmissionManager.getActionType()===v.ViewFormSubmissionActionType.RESUME_SUBMISSION_EDITING&&v.EditSubmissionManager.getAuthToken()&&(f.auth=v.EditSubmissionManager.getAuthToken(),s="forms/"+o.document.getId()+"/finalize-submission/"+String(v.EditSubmissionManager.getSubmissionId())),c.API.post(s,f,u).then((function(t){o.document.trigger(r.Document.EVENT_SUBMIT_DISPATCH),o.forgetAllQuizzesOfDocument(),e&&v.EditSubmissionManager.getActionType()===v.ViewFormSubmissionActionType.RESUME_SUBMISSION_EDITING&&v.EditSubmissionManager.getAuthToken()&&v.EditSubmissionManager.setSubmissionAsNotBeingPartial();try{window.parent.postMessage({command:"submit",documentId:o.document.getId(),from:"abcsubmit"},"*")}catch(t){console.error(t)}if(e)switch(!0){case!!t.payment:o.redirectSubmissionResponseToPaymentGateway(t.payment),n.resolve(t);break;default:if(v.EditSubmissionManager.getActionType()===v.ViewFormSubmissionActionType.PWA_MODE)o.removePreviouslyOfflineSubmissionDataWhichWasLoadedInPurposeOfDataCorrection(o.document),o.goBackToPWAApplication(),n.resolve(t);else{if(v.EditSubmissionManager.getActionType()===v.ViewFormSubmissionActionType.EDIT_SUBMISSION||v.EditSubmissionManager.getActionType()===v.ViewFormSubmissionActionType.DYNAMIC_FORM)return window.close(),void n.resolve(t);var i=o.formRedirectRulesManager.getDocumentSubmitActionSettings();if(i.action===r.EDocumentSubmitActionType.SHOW_THANK_YOU_PAGE)o.document.setActivePage(_.create(o.document)),n.resolve(t);else if(i.action===r.EDocumentSubmitActionType.REDIRECT_TO_URL)if("_parent"===i.target)try{window.parent.postMessage({command:"submit_navigate_to_url",documentId:o.document.getId(),from:"abcsubmit",url:i.url},"*"),o.reset()}catch(t){console.error(t)}else location.href=i.url;else n.reject(new Error("Unknown default submit action: "+i.action))}}else n.resolve(t)})).fail((function(t){if(!(t instanceof p.BackendException))return console.error(t),void a.Dialog.alert("A technical error occurred. Please retry. If problem persist, please contact us","Technical error").then((function(){n.reject(t)}));switch(!0){case p.BackendException.matches(t,null,"ERR_FORM_IS_OFFLINE"):return o.document.setActivePage(N.create(o.document,!1,"Form is Offline","Sorry, this form is offline at this time. Please try submitting the form in it's online schedule")),void n.reject(t);case p.BackendException.matches(t,null,"ERR_TOO_MANY_SUBMISSIONS"):return o.document.setActivePage(N.create(o.document,!1,"Too many results","Sorry, the total number of results accepted by this form has reached its limit")),void n.reject(t);case p.BackendException.matches(t,null,"ERR_DUPLICATED_SUBMISSION_IP_ADDRESS"):return o.document.setActivePage(N.create(o.document,!1,"You already submitted data","A submission from your IP address has already been made. The owner of this document is requesting unique IP's when users are submitting data")),void n.reject(t);case p.BackendException.matches(t,null,"ERR_FIREWALL_EXCEPTION"):return o.document.setActivePage(N.create(o.document,!1,"Firewall error","Your location is not permitted to submit data for this form")),void n.reject(t);case p.BackendException.matches(t,"PaymentsException","ERR_DETERMINE_PAYMENT_GATEWAY"):return o.document.setActivePage(N.create(o.document,!1,"Incomplete form configuration (data not saved)",'Your form is not fully configured\n\nThis form contains a "shopping cart" / "product" / "payment processor" field, but no default payment processor has been set (we don\'t know how to charge money).\n\n[solution 1]: Please consult user manual chapter 3: "Collect payments via your form", in order to setup payments for your form.\n\n[solution 2]: If you don\'t intend to collect online payments with this form, please configure and enable "Cash on Delivery" payment processor (chapter 3.2.6 from user manual).')),void n.reject(t)}if("SubmissionValidationException"!==t.getType()||!Array.isArray(t.getField()))return console.error(t),void a.Dialog.alert("A technical error occurred on server. Problem type: "+t.getType()+", code: "+t.getCode()+". Please try again. If the problem persist, contact us","Technical error").then((function(){n.reject(t)}));o.handleSubmitValidationErrors(t,n)})).always((function(){o.submitLoader.removeLoadRequest()}))})).fail((function(){o.submitLoader.removeLoadRequest(),n.reject(new Error("Failed to get google recaptcha promise"))}))):n.reject(new Error("Failed to submit: Unknown form current page!"))}else n.reject(new Error("Submission callbacks failed"));else a.Dialog.alert("You are currently previewing a submission, you cannot re-submit data","Can't submit form").then((function(){n.reject(new Error("Can't submit in view submission data"))}))}))},t.prototype.handleSubmitValidationErrors=function(t,e){for(var n=t.getField(),r=null,o=0,i=n.length;o<i;o++)for(var s=n[o].name,u=n[o].index,l=this.document.getElementsByNameAndRepeatedDataIndex(s,n[o].repeatedDataIndex),c=0,p=l.length;c<p;c++)-1!==u&&u!==c||(r=r||l[c],l[c].setError({code:n[o].code,message:n[o].message,args:n[o].args||null}));r&&(r.scrollIntoView(),"1"===d.URLParser.parseURL(location.href).search.isEmbed&&window.scrollTo(0,0));var h=this.document.getFieldErrorsTextWhichAreCurrentlyHiddenAndResetHiddenFieldsErrorsAfter10Milliseconds(this.controlsVisibilityState.getHiddenControlsIDList());null!==h?a.Dialog.alert(h,"Error").then((function(){e&&e.reject(t)})):e&&e.reject(t)},t.prototype.isFormRunningInLimitedFunctionality=function(){return!!document.getElementById("limited-functionality")},t.prototype.reset=function(){this.document.trigger(r.Document.EVENT_RESET_DISPATCH),this.submissionModel.reset(),this.document.flatten().forEach((function(t){t.getError()&&t.setError(null)})),this.controlsVisibilityState.updateInSyncMode();var t=this.document.getPages().filter((function(t){return t.isVisible()}));t[0]&&t[0]!==this.document.getActivePage()&&this.document.setActivePage(t[0]),this.document.updateAutoButtons(),i.BrowserUtils.stripQueryStringArgumentsFromLocation(["pageId","message","error"])},t.prototype.nextPage=function(){var t=this,e=this.document.getPages(),i=this.document.getActivePage(),s=e.indexOf(i),a=function(){var n=e.slice(s+1).filter((function(t){return t.isVisible()}));n[0]&&(t.document.setActivePage(n[0]),t.document.getActivePage().scrollIntoView())};n.Deferred((function(e){var n,s;if(i&&i.getPageType()===o.EPageType.FORM_PAGE)if(null===v.EditSubmissionManager.getActionType()){var a=i.getDocument().getBodies()[r.Document.BODY_HEADER_INDEX]?i.getDocument().getBodies()[r.Document.BODY_HEADER_INDEX].flatten():[],u=i.getDocument().getBodies()[r.Document.BODY_FOOTER_INDEX]?i.getDocument().getBodies()[r.Document.BODY_FOOTER_INDEX].flatten():[],l=(n=(s=i.flatten()).concat.apply(s,a)).concat.apply(n,u).filter((function(t){return!!t.getError()}));if(l.length)return l[0].scrollIntoView(),void e.reject(new Error("Current page has errors"));var p="forms/"+t.document.getId()+"/submit/test-page",d=c.APIAuthenticationStrategy.OPTIONAL_AUTHENTICATION,h=t.submissionModel.getFormData(i),f=i.flatten().filter((function(t){return t.hasValue()})).length>0;if(0!==Object.keys(h).length&&f){var g={submission:JSON.stringify(h),hiddenFields:JSON.stringify(t.controlsVisibilityState.getHiddenControlsIDList()),pageId:i.getId()};t.submitLoader.addLoadRequest(),c.API.post(p,g,d).then((function(){e.resolve()})).fail((function(t){e.reject(t)})).always((function(){t.submitLoader.removeLoadRequest()}))}else e.resolve()}else e.resolve();else e.resolve()})).then((function(){a()})).fail((function(e){e instanceof Error||(e instanceof p.BackendException&&"SubmissionValidationException"===e.getType()&&Array.isArray(e.getField())?t.handleSubmitValidationErrors(e):a())}))},t.prototype.previousPage=function(){var t=this.document.getPages(),e=this.document.getActivePage(),n=t.indexOf(e);if(n>0){for(;n>0&&!t[n-1].isVisible();)n--;this.document.setActivePage(t[n-1]),this.document.getActivePage().scrollIntoView()}},t.prototype.saveForLater=function(){if([v.ViewFormSubmissionActionType.EDIT_SUBMISSION,v.ViewFormSubmissionActionType.VIEW_SUBMISSION].indexOf(v.EditSubmissionManager.getActionType())>-1)a.Dialog.alert("Submission can't be saved for later because the it's state is under "+v.EditSubmissionManager.getActionType(),"Save for later");else{var t={partial:"1"};v.EditSubmissionManager.getActionType()===v.ViewFormSubmissionActionType.RESUME_SUBMISSION_EDITING&&v.EditSubmissionManager.getSubmissionId()&&v.EditSubmissionManager.getAuthToken()&&(t.submission_id=String(v.EditSubmissionManager.getSubmissionId()),t.auth=String(v.EditSubmissionManager.getAuthToken())),this.submit(t,!1).then((function(t){v.EditSubmissionManager.load(t.editUrl),new E.ResumeSubmissionDialog(t.editUrl).run()}))}},t.prototype.print=function(){window.print()},t.prototype.followLink=function(t,e){void 0===e&&(e="_self"),e=e||"_self",t&&i.BrowserUtils.openTabOrPopup(t,e)},t.prototype.evaluateSubmitCallbacks=function(){if(!this.submitCallbacks)return!0;for(var t=0,e=this.submitCallbacks.length;t<e;t++)if(this.submitCallbacks[t]&&"function"==typeof this.submitCallbacks[t])try{if(!1===this.submitCallbacks[t]())return!1}catch(t){}return!0},t.prototype.getGoogleRecaptchaPromise=function(){return this.document.getProperty("security.enableCaptcha")?this.googleRecaptcha.getResponse():l.GoogleRecaptcha.getFakeResponse()},t.prototype.getDefaultPaymentGatewayTypeId=function(){return this.document.getDefaultPaymentGatewayTypeId()||null},t.prototype.redirectSubmissionResponseToPaymentGateway=function(t){if(t.redirectType===T.LOAD_SDK)this.redirectToPaymentProcessorByLoadingFrontendJavascriptSDK(t);else{if(t.redirectType!==T.FORM_REDIRECT)throw new Error("Unknown payment redirect type: "+JSON.stringify(t.redirectType));this.redirectToPaymentProcessorUsingFormMethod(t)}},t.prototype.redirectToPaymentProcessorUsingFormMethod=function(t){if(this.submitLoader.addLoadRequest(),"_self"!==t.target)i.BrowserUtils.openTabOrPopup(t.actionUrl,"_blank",void 0,"Redirecting to payment",!0,t.method,t.fields||{}).then((function(){})).fail((function(t){console.warn("Failed to redirect to payments!"),console.error(t)}));else{var e=document.createElement("form");if(e.setAttribute("action",t.actionUrl),e.setAttribute("method",t.method),t.fields)for(var n in t.fields)if(t.fields.hasOwnProperty(n)){if(!t.fields.propertyIsEnumerable(n))continue;var r=document.createElement("input");r.type="hidden",r.name=n,r.value=String(t.fields[n]),e.appendChild(r)}document.body.appendChild(e),e.submit()}},t.prototype.redirectToPaymentProcessorByLoadingFrontendJavascriptSDK=function(t){switch(t.gatewayTypeId){case y.EPaymentProcessorTypes.STRIPE_CHECKOUT:this.loadStripeCheckoutSDK(t);break;case y.EPaymentProcessorTypes.BRAINTREE:this.loadBraintreeCheckoutSDK(t);break;case y.EPaymentProcessorTypes.PAYPAL_CHECKOUT:this.loadPaypalCheckoutSDK(t);break;case y.EPaymentProcessorTypes.CASH_ON_DELIVERY:this.loadPayOnDeliveryCheckoutSDK(t);break;default:throw new Error("Unsupported Payment Gateway type Javascript SDK")}},t.prototype.loadStripeCheckoutSDK=function(t){var e=this;this.submitLoader.addLoadRequest(),h.StripeSDK.load().then((function(n){e.submitLoader.removeLoadRequest();var r=t.fields;n.configure({key:r.public_key,image:r.shop_logo_url,locale:"auto",token:function(t){e.submitLoader.addLoadRequest(),c.API.put("payments/charge/"+e.document.getId()+"/"+r.payment_id,{payment:JSON.stringify(t)}).then((function(t){e.submitLoader.removeLoadRequest(),t.success?location.href=t.url:e.document.setActivePage(N.create(e.document))})).fail((function(t){console.error(t),e.submitLoader.removeLoadRequest(),e.document.setActivePage(N.create(e.document))}))}}).open({amount:parseInt(r.amount_in_cents),name:r.form_name,billingAddress:!!parseInt(r.show_billing_address),description:r.order_description,zipCode:!!parseInt(r.show_zip_code_field),panelLabel:r.pay_button_text,shippingAddress:!!parseInt(r.show_shipping_address),currency:r.currency})})).fail((function(){e.submitLoader.removeLoadRequest()}))},t.prototype.loadBraintreeCheckoutSDK=function(t){var e=this;this.submitLoader.addLoadRequest(),f.BraintreeSDK.load().then((function(n){f.BraintreeSDK.manageBraintreeCheckout(t,n,e.submitLoader,e.document)})).fail((function(){e.submitLoader.removeLoadRequest()}))},t.prototype.loadPaypalCheckoutSDK=function(t){var e=this;this.submitLoader.addLoadRequest(),g.PaypalCheckoutSDK.load().then((function(n){g.PaypalCheckoutSDK.managePaypalCheckout(t,n,e.submitLoader,e.document)})).fail((function(){e.submitLoader.removeLoadRequest()}))},t.prototype.loadPayOnDeliveryCheckoutSDK=function(t){var e=this;this.submitLoader.addLoadRequest(),m.CashOnDeliverySDK.load().then((function(n){n.setOnCloseCallback((function(){e.submitLoader.removeLoadRequest()})).setFields(t.fields).run(e.submissionModel).then((function(t){t.success||t.url?location.href=t.url:(e.document.setActivePage(N.create(e.document)),console.error("Cash on Delivery failed to confirm order: ",t))})).fail((function(t){e.submitLoader.removeLoadRequest(),console.error("Cash on delivery exception: ",t),e.document.setActivePage(N.create(e.document))}))}))},t.prototype.addSubmitCallback=function(t){return this.submitCallbacks=this.submitCallbacks||[],this.submitCallbacks.push(t),this},t.prototype.removeSubmitCallback=function(t){var e=this.submitCallbacks.indexOf(t);return e>-1&&this.submitCallbacks.splice(e,1),this},t.prototype.handleApplicationErrorURLParameter=function(t){"PAYMENT_ERROR"===t&&this.document.setActivePage(N.create(this.document))},t.prototype.handleApplicationSuccessURLParameter=function(t){"PAYMENT_SUCCESS"===t&&this.document.setActivePage(N.create(this.document,!1,"Order completed","Your order has been completed. Thank you"))},t.prototype.jumpToDocumentPageId=function(t){for(var e=this.document.getPages(),n=0,r=e.length;n<r;n++)if(e[n].getId()===t){this.document.setActivePage(e[n]);break}},t.prototype.handleFormOffline=function(){this.document.setActivePage(N.create(this.document,!1,"Form is Offline","Sorry, this form is offline at this time. Please try submitting the form in it's online schedule"))},t.prototype.goBackToPWAApplication=function(){window.location.href="/app/"},t.prototype.removePreviouslyOfflineSubmissionDataWhichWasLoadedInPurposeOfDataCorrection=function(t){v.EditSubmissionManager.getLoadedOfflineSubmissionDate()&&A.OfflineSubmissionManager.deleteOfflineSubmissionFormData(t.getId(),v.EditSubmissionManager.getLoadedOfflineSubmissionDate())},t.prototype.showPageById=function(t){if(t)for(var e=this.document.getPages(),n=0,r=e.length;n<r;n++)if(e[n].getId()===t&&e[n].getPageType()===o.EPageType.FORM_PAGE){this.document.setActivePage(e[n]);break}},t.prototype.forgetAllQuizzesOfDocument=function(){console.log("forgot all quizzes");for(var t=0,e=this.document.flatten(),n=e.length;t<n;t++)e[t].getTypeId()===b.NodeTypes.QUIZ&&e[t].forgetTimer()},t.prototype.getReferrer=function(){return this.referrer},t.prototype.getUtmSource=function(){return this.utmSource},t.prototype.setReferrer=function(t){return t!==this.referrer&&t&&console.warn("[RFR] "+t),this.referrer=t||null,this},t.prototype.setUtmSource=function(t){return t!==this.utmSource&&t&&console.warn("[UTM] "+t),this.utmSource=t||"abcsubmit",this},t}();e.FormCommands=w;var _=function(){function t(){}return t.create=function(t){for(var e=t.getPages(),n=e.length,r=0;r<n;r++)if(e[r].getProperty("type")===o.EPageType.THANK_YOU_PAGE)return e[r];var i=t.createElement(b.NodeTypes.PAGE);i.setProperty("type",o.EPageType.THANK_YOU_PAGE),i.setProperty("dynamic",!0);var a=C.RichText.getDefaultProperties(t);return a.markup="<h1>"+s.Strings.toHTML(I.I18n.translateApplicationText("Thank you","control-defaults.page"))+'</h1><hr class="my-hr" style="height:0px; margin-top:10px; margin-bottom:10px; color: currentColor; border-style: solid;"><p>'+s.Strings.toHTML(I.I18n.translateApplicationText("Your data has been sent","control-defaults.page"))+"</p>",t.appendField(b.NodeTypes.RICH_TEXT,i,a),t.insertAfter(i,e[e.length-1]||null),i.onInsertedIntoFormByUser(),t.runIndexerInSyncMode(),t.getTheme().markAsModified(),i},t}(),N=function(){function t(){}return t.create=function(t,e,n,r){void 0===e&&(e=!0),void 0===n&&(n="Error processing payment"),void 0===r&&(r="There was an error processing your payment.");var i=t.getPages();if(e)for(var a=i.length,u=0;u<a;u++)if(i[u].getProperty("type")===o.EPageType.PAYMENTS_ERROR_PAGE)return i[u];var l=t.createElement(b.NodeTypes.PAGE);l.setProperty("type",o.EPageType.PAYMENTS_ERROR_PAGE);var c=C.RichText.getDefaultProperties(t);return c.markup="<h1>"+s.Strings.toHTML(n)+'</h1><hr class="my-hr" style="height:0px; margin-top:10px; margin-bottom:10px; color: currentColor; border-style: solid;"><p>'+s.Strings.toHTML(r)+"</p>",t.appendField(b.NodeTypes.RICH_TEXT,l,c),t.insertAfter(l,i[i.length-1]||null),l.onInsertedIntoFormByUser(),t.runIndexerInSyncMode(),t.getTheme().markAsModified(),l},t}();e.DefaultErrorPage=N}.apply(e,r))||(t.exports=o)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var r,o;r=[n,e,n(0),n(49)],void 0===(o=function(t,e,n,r){Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.prototype.onGoogleRecaptchaLoaded=function(){var t=document.getElementById("grecaptcha-id");this.widgetId=t?grecaptcha.render("grecaptcha",{sitekey:t.getAttribute("data-site-key")}):"grecaptcha"},t.prototype.onGoogleRecaptchaSubmit=function(t){this.onSubmitPromise&&this.onSubmitPromise.resolve(t)},t.prototype.reset=function(){navigator.onLine?grecaptcha&&grecaptcha.reset&&grecaptcha.reset(this.widgetId):r.EditSubmissionManager.getActionType()!==r.ViewFormSubmissionActionType.PWA_MODE&&grecaptcha&&grecaptcha.reset&&grecaptcha.reset(this.widgetId),this.onSubmitPromise&&(this.onSubmitPromise=null)},t.prototype.getResponse=function(){if(r.EditSubmissionManager.getActionType()===r.ViewFormSubmissionActionType.PWA_MODE&&!navigator.onLine)return t.getFakeResponse();try{return this.onSubmitPromise&&(this.onSubmitPromise.reject(new Error("Another submit occurred")),this.onSubmitPromise=null),this.reset(),grecaptcha&&grecaptcha.execute?(this.onSubmitPromise=n.Deferred((function(t){setTimeout((function(){t.reject(new Error("Failed to fetch Google ReCaptcha response"))}),12e4)})),grecaptcha.execute(),this.onSubmitPromise):n.Deferred((function(t){t.reject(new Error("Failed to fetch Google ReCaptcha response"))}))}catch(e){if(r.EditSubmissionManager.getActionType()!==r.ViewFormSubmissionActionType.PWA_MODE||navigator.onLine)throw e;return t.getFakeResponse()}},t.getFakeResponse=function(){return n.Deferred((function(t){t.resolve("")}))},t}();e.GoogleRecaptcha=o}.apply(e,r))||(t.exports=o)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var r,o;r=[n,e,n(0),n(687),n(6),n(697),n(1),n(345),n(19),n(73),n(2),n(5),n(18),n(83),n(4),n(11),n(49),n(53),n(35),n(208)],void 0===(o=function(t,e,n,r,o,i,s,a,u,l,c,p,d,h,f,g,m,y,v,b){Object.defineProperty(e,"__esModule",{value:!0});var C=new r.ViewerApplication;window.application=C,i.ViewFormAPIAuthorizedEndpoints.addAuthorizedEndpoints(),n.Deferred((function(t){t.resolve(o.Strings.base64ToUTF8(document.getElementById("load-document").textContent))})).then((function(t){document.getElementById("system-po")&&function(){try{var t=document.getElementById("system-po").textContent,e=o.Strings.base64ToUTF8(t);e&&(s.I18n.setTranslationContext(s.I18n.TRANSLATION_PACK_APPLICATION,y.POFile.parse(e)),console.warn("[I18n] Loaded system po ("+v.FileUtils.formatFileSize(t.length)+")"))}catch(t){console.warn("[I18n] Failed to load system PO file contents: "+t)}}(),C.setupAPIAuthorizedEndpointsAuthenticationCallback(),a.ErrorReportingManager.start(),m.EditSubmissionManager.load();var e=C.createDocumentFromString(t),r=[],i=e.getProperty("security.passwordProtection");e.hasProperty("security.passwordProtection")&&i&&r.push((function(){return n.Deferred((function(t){c.Dialog.prompt({defaultValue:null,question:s.I18n.translateApplicationText("This form is password protected:","form-password"),icon:"password",title:s.I18n.translateApplicationText("Form is password protected","form-password"),validator:function(t){return t?h.Hash.MD5(t)!==i?s.I18n.translateApplicationText("Bad password. Please try again","form-password"):null:s.I18n.translateApplicationText("Blank passwords not allowed","form-password")},width:"400px",height:"250px",password:!0,placeholder:s.I18n.translateApplicationText("Input password","form-password")}).then((function(e){h.Hash.MD5(e)===i?t.resolve():t.reject(new Error("Bad password"))})).fail((function(e){t.reject(e)}))}))})),e.hasProperty("security.authenticationRequired")&&e.getProperty("security.authenticationRequired")&&r.push((function(){return n.Deferred((function(t){u.UserManager.login(l.LoginOrSignupSection.LOGIN).then((function(n){p.API.post("forms/"+e.getId()+"/authorize").then((function(){t.resolve()})).fail((function(e){c.Dialog.alert(n.firstName+" "+n.lastName+" is not authorized to view this form","Authentication required").then((function(){d.PersistentStorage.removeItem("jwt"),t.reject(e)})).fail((function(){d.PersistentStorage.removeItem("jwt"),t.reject(e)}))}))})).fail((function(e){c.Dialog.alert("This form requires authentication","Authentication required").then((function(){t.reject(e)}))}))}))})),r.push((function(){return n.Deferred((function(t){b.NeuralNetworkRuntime.load().always((function(){t.resolve()}))}))})),function(){for(var t=null,o=0,i=e.flatten(),s=i.length;o<s;o++)i[o].getTypeId()===f.NodeTypes.BIG_DATA_DROPDOWN&&(t=t||new g.Loader(window.document.body),function(e){r.push((function(){return n.Deferred((function(n){t.addLoadRequest(),e.fetch().always((function(){e.onChoicesChanged(),t.removeLoadRequest(),n.resolve()}))}))}))}(i[o]))}(),function(){if(null===m.EditSubmissionManager.getActionType())for(var t=e.flatten(),n=t.length,r=0;r<n;r++)t[r].getTypeId()===f.NodeTypes.QUIZ&&t[r].initializeInViewFormMode()}();!function t(){0===r.length?C.loadDocument(e):r.shift()().then((function(){t()})).fail((function(){c.Dialog.confirm(s.I18n.translateApplicationText("Error loading form","form-errors"),s.I18n.translateApplicationText("Viewing this form failed. Do you wish to retry?","form-errors")).then((function(){location.reload(!0)}))}))}()}))}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(0),n(334),n(15),n(140),n(176),n(688),n(392),n(689),n(207),n(346),n(5),n(19),n(4),n(16),n(49),n(694),n(695),n(696)],void 0===(o=function(t,e,n,r,o,i,s,a,u,l,c,p,d,h,f,g,m,y,v,b){Object.defineProperty(e,"__esModule",{value:!0});var C=function(){function t(){this.reader=new r.Reader,this.body=document.body}return t.prototype.createDocumentFromString=function(t){return this.reader.unserialize(t,!1)},t.prototype.onDocumentSizeChanged=function(){this.document.getGrid().render(this.document.getRoot().offsetWidth),this.document.getTheme().renderSync()},t.prototype.esm=function(){return m.EditSubmissionManager},t.prototype.loadDocument=function(t){var e=this;this.document=t,this.bootstrapEmbedIfNeeded(),y.FormBrandingManager.initBrandingIfNeeded(t),this.rulesGenerator=new l.RulesGenerator(this.document),this.rulesGenerator.generateRules(),this.body.appendChild(this.document.getRoot()),this.onDocumentSizeChanged(),this.document.render(),n(window).on("resize",(function(){e.onDocumentSizeChanged()})),this.scriptingEnvironment=new s.ScriptingEnvironment,this.controlsVisibilityState=new a.ControlsVisibilityState(this.scriptingEnvironment),this.submissionModel=new i.SubmissionModel(this.scriptingEnvironment,this.controlsVisibilityState),this.submissionModel.setDefaultValues(this.rulesGenerator.getControlDefaultValues()),c.ScriptingEnvironmentUserFunctions.addFunctionsToEnvironment(this.scriptingEnvironment,this.submissionModel),this.googleRecaptcha=new u.GoogleRecaptcha,!1!==this.document.getProperty("security.enableCaptcha")&&(window.on_google_recaptcha_loaded=this.googleRecaptcha.onGoogleRecaptchaLoaded.bind(this.googleRecaptcha),window.on_google_recaptcha_submit=this.googleRecaptcha.onGoogleRecaptchaSubmit.bind(this.googleRecaptcha),this.document.on(o.Document.EVENT_READY,(function(){setTimeout((function(){var t=window.document.createElement("script");t.src="//www.google.com/recaptcha/api.js?render=explicit&onload=on_google_recaptcha_loaded",t.setAttribute("type","text/javascript"),window.document.getElementsByTagName("head")[0].appendChild(t)}),1e3)}))),this.document.flatten().forEach((function(t){t.hasValue()&&(e.submissionModel.registerNode(t),t.listenToUserInput(e.submissionModel)),t.getTypeId()!==f.NodeTypes.BIG_DATA_ROW_VIEWER&&t.getTypeId()!==f.NodeTypes.REPEATABLE||t.listenToUserInput(e.submissionModel)})),this.submissionModel.computeFormulaValuesInSyncMode(),this.document.flatten().forEach((function(t){e.scriptingEnvironment.registerNode(t)})),this.document.flatten().forEach((function(t){e.controlsVisibilityState.registerNode(t)})),this.document.on(o.Document.EVENT_REPEATABLE_CONTAINER_ADDED,(function(t){t.flatten().forEach((function(t){e.submissionModel.resetCache(),e.controlsVisibilityState.registerNode(t),e.scriptingEnvironment.registerNode(t)})),setTimeout((function(){e.controlsVisibilityState.updateInSyncMode(),e.submissionModel.computeFormulaValuesInSyncMode()}),0)})),this.document.on(o.Document.EVENT_REPEATABLE_CONTAINER_REMOVED,(function(t){t.flatten().forEach((function(t){e.submissionModel.resetCache(),e.controlsVisibilityState.unregisterNode(t),e.scriptingEnvironment.unregisterNode(t)})),setTimeout((function(){e.controlsVisibilityState.updateInSyncMode(),e.submissionModel.computeFormulaValuesInSyncMode()}),0)})),this.controlsVisibilityState.updateInSyncMode(),this.submissionModel.on(i.SubmissionModel.EVENT_CHANGE,(function(){e.controlsVisibilityState.updateDebouncer(),e.document.getInvoice().computeDelayed()})).on(i.SubmissionModel.EVENT_RESET,(function(){e.controlsVisibilityState.updateDebouncer(),e.document.getInvoice().computeDelayed()})),this.document.getInvoice().setScriptingEnvironment(this.scriptingEnvironment).compute(),this.formRedirectRules=new b.FormRedirectRulesManager(this.document,this.scriptingEnvironment),this.rulesGenerator.injectRedirectionRules(this.formRedirectRules),this.formCommands=new p.FormCommands(this.document,this.submissionModel,this.googleRecaptcha,this.controlsVisibilityState,this.formRedirectRules),this.loadReferrerAndUTMSource(),this.loadSubmissionData();var r=this.getParsedFormFieldValuesFromURL(),d=!1;return this.document.flatten().forEach((function(t){if(t.getTypeId()===f.NodeTypes.CODE&&t.setSubmissionModel(e.submissionModel).setFormCommands(e.formCommands).boot(!1),t.hasValue()&&t.hasProperty("name")){var n=t.getProperty("name");n&&void 0!==r[n]&&(e.submissionModel.setValue(t.getId(),String(r[n])),d=!0)}})),d&&this.submissionModel.trigger("change"),this.submissionModel.on(i.SubmissionModel.EVENT_COMPUTED,(function(){e.document.getInvoice().computeDelayedLong()})),window.document.body.setAttribute("data-loaded","1"),this.document.trigger(o.Document.EVENT_READY),this.handleConvertToPDFHook(),this.showStartupThankYouOrErrorPageIfNeeded(),this},t.prototype.getFormCommands=function(){return this.formCommands},t.prototype.setupAPIAuthorizedEndpointsAuthenticationCallback=function(){d.API.setAuthorizationCallback((function(t){return n.Deferred((function(e){switch(t){case d.APIAuthenticationStrategy.DEFAULT:h.UserManager.login().then((function(t){e.resolve(t.jwt)})).fail((function(t){e.reject(t)}));break;case d.APIAuthenticationStrategy.OPTIONAL_AUTHENTICATION:var n=h.UserManager.getJWT()||null;e.resolve(n);break;default:e.reject(new Error("Invalid api authentication strategy! Got "+JSON.stringify(t)+" expected APIAuthenticationStrategy"))}}))}))},t.prototype.getParsedFormFieldValuesFromURL=function(){var t={},e=g.URLParser.parseURL(location.href);if(e.search)for(var n in e.search)if(e.search.hasOwnProperty(n)&&e.search.propertyIsEnumerable(n)&&"field_"===n.substr(0,6)){var r=n.substr(6);r&&(t[r]=e.search[n])}return t},t.prototype.bootstrapEmbedIfNeeded=function(){var t=g.URLParser.parseURL(location.href);"1"===t.search.isEmbed&&(document.body.setAttribute("data-is-embed","1"),this.document.getSizeChangeObserver().setEnabled(!0),"1"===t.search.isLightbox&&document.body.setAttribute("data-is-lightbox","1"))},t.prototype.loadSubmissionData=function(){switch(m.EditSubmissionManager.getActionType()){case m.ViewFormSubmissionActionType.EDIT_SUBMISSION:case m.ViewFormSubmissionActionType.VIEW_SUBMISSION:case m.ViewFormSubmissionActionType.RESUME_SUBMISSION_EDITING:case m.ViewFormSubmissionActionType.DYNAMIC_FORM:this.submissionModel.loadSubmissionFromFormData(m.EditSubmissionManager.getSubmissionData());break;case m.ViewFormSubmissionActionType.PWA_MODE:console.log("Form is PWA"),m.EditSubmissionManager.getLoadedOfflineSubmissionDate()&&m.EditSubmissionManager.getSubmissionData()&&(console.log("PWA: Load submission for correction purposes"),this.submissionModel.loadSubmissionFromFormData(m.EditSubmissionManager.getSubmissionData()));break;case null:this.submissionModel.hasDefaultValues()&&this.submissionModel.reset()}},t.prototype.getStatics=function(){return{displayMediaManager:v.DisplayMediaManager,editSubmissionManager:m.EditSubmissionManager}},t.prototype.showStartupThankYouOrErrorPageIfNeeded=function(){var t,e=g.URLParser.parseURL(location.href.toString());if(!e.search)return this;switch(!0){case!!e.search.error:this.formCommands.handleApplicationErrorURLParameter(e.search.error);case!!e.search.message:this.formCommands.handleApplicationSuccessURLParameter(e.search.message);case!!e.search.pageId:this.formCommands.jumpToDocumentPageId(e.search.pageId)}if(t=document.querySelector("script#scheduler"))try{JSON.parse(t.textContent)||this.formCommands.handleFormOffline()}catch(t){}},t.prototype.loadReferrerAndUTMSource=function(){var t=g.URLParser.parseURL(location.href);"1"===t.search.isEmbed&&this.formCommands.setReferrer(t.search.embedURL||null),t.search.utm_source?this.formCommands.setUtmSource(t.search.utm_source):t.search.utm&&this.formCommands.setUtmSource(t.search.utm)},t.prototype.handleConvertToPDFHook=function(){"pdf-export"===g.URLParser.parseURL(location.href).search.cmd&&this.document.getPDF().then((function(t){try{window.parent.postMessage({cmd:"pdf-export",success:!0,pdf:t.serialize()},window.location.protocol+"//"+window.location.hostname),console.log("PDF-EXPORT: message sent with status OK")}catch(t){console.log("PDF-EXPORT: message sent with status ERROR"),console.error(t)}})).fail((function(t){try{window.parent.postMessage({cmd:"pdf-export",success:!1,error:String(t||"Unknown").replace(/^Error: /g,"")},window.location.protocol+"//"+window.location.hostname),console.log("PDF-EXPORT: message sent with status ERROR"),console.error(t)}catch(t){console.log("PDF-EXPORT: message sent with status ERROR"),console.error(t)}}))},t}();e.ViewerApplication=C}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o,i,s=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});r=[n,e,n(68),n(12),n(3),n(4),n(7)],void 0===(o=function(t,e,n,r,o,i,a){Object.defineProperty(e,"__esModule",{value:!0});var u=function(t){function e(e){var n=t.call(this)||this;return n.controls={},n.scriptingEnvironment=e,n.updateDebouncer=r.Debouncer.create((function(){n.updateInSyncMode()}),50),n}return s(e,t),e.prototype.unregisterNode=function(t){var e=t.getId();return delete this.controls[e],this},e.prototype.registerNode=function(t){var e=t.getId(),r=null,o=null,i=null;try{o=t.getProperty("visibility"),r=(i=n.ScriptingEngine.compile(o)).getExpression()}catch(t){o&&console.warn("Failed to compile expression:\n\n"+o+(i?"\n\n"+i.getError():""))}return this.controls[e]={node:t,visible:!0,visibilityExpression:r?r.setTargetField(t):null},this},e.prototype.updateInSyncMode=function(){var t;for(var n in this.controls)if(this.controls.hasOwnProperty(n)){if(!this.controls[n].visibilityExpression)continue;try{t=!!~~this.controls[n].visibilityExpression.compute(this.scriptingEnvironment)}catch(t){console.warn("Failed to compute control visibility state: "),console.error(t)}t!==this.controls[n].visible&&(this.controls[n].visible=t,this.controls[n].node.setVisible(t),!1===t&&(this.controls[n].node.setError(null),this.controls[n].node.getTypeId()===i.NodeTypes.REPEATABLE&&this.controls[n].node.flatten().forEach((function(t){t.setError(null)}))),this.updateDebouncer(),this.trigger(e.EVENT_CHANGE))}},e.prototype.getHiddenControlsIDList=function(){var t=this,e=[],n=function(n){if(r.controls.hasOwnProperty(n)&&r.controls.propertyIsEnumerable(n)&&(!r.controls[n].visible||r.controls[n].node.getPage()&&!r.controls[n].node.getPage().isVisible())){e.push(n);var o=r.controls[n].node.getRepeatedIndex();null!==o&&e.push(r.controls[n].node.getProperty("name")+"["+o+"]"),r.controls[n].node.getTypeId()===i.NodeTypes.REPEATABLE&&r.controls[n].node.flatten().forEach((function(r){var o=r.getId();if(o!==n&&void 0!==t.controls[o]){e.push(o);var i=t.controls[o].node.getRepeatedIndex();null!==i&&e.push(t.controls[o].node.getProperty("name")+"["+i+"]")}}))}},r=this;for(var o in this.controls)n(o);return a.Helpers.arrayUnique(e)},e.EVENT_CHANGE="change",e}(o.EventEmitter);e.ControlsVisibilityState=u}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(78),n(68)],void 0===(o=function(t,e,n,r){Object.defineProperty(e,"__esModule",{value:!0});var o=function(){};e.AlwaysTrue=o;var i=function(){function t(){}return t.escapeIdentifierName=function(t){if(t.match(/[.\-+*\/`\]\[]/)){var e=t.split(".").filter((function(t){return!!t}));return e.length?"`"+e.join("`.`")+"`":"{"+t+"}"}return"{"+t+"}"},t.ifGroupToString=function(e){for(var r=[],o=0,i=e.conditions.length;o<i;o++)r.push(t.conditionToString(e.conditions[o]));return 1===r.length?r[0]:"("+r.join(" "+(e.matchType===n.EMatchType.OR?" || ":" && ")+" ")+")"},t.conditionToString=function(t){if(t)switch(!0){case t instanceof o:case"true"===t.field&&t.operator===n.EOperator.IS_EQUAL_TO&&"true"===t.targetValue&&"true"===t.targetField:return"true";case"[expression]"===t.field&&t.operator===n.EOperator.IS_EQUAL_TO&&"true"===t.targetField:return t.targetValue}var e,r,i=!1;switch(t.operator){case n.EOperator.IS_FILLED:return"BOOL(VALUE("+this.escapeIdentifierName(t.field)+"))";case n.EOperator.IS_EMPTY:return"!BOOL(VALUE("+this.escapeIdentifierName(t.field)+"))";default:switch(r=!1,t.operator){case n.EOperator.STARTS_WITH:e="=~";break;case n.EOperator.DOES_NOT_START_WITH:e="=~",r=!0;break;case n.EOperator.ENDS_WITH:e="~=";break;case n.EOperator.DOES_NOT_ENDS_WITH:e="~=",r=!0;break;case n.EOperator.CONTAINS:e="~";break;case n.EOperator.DOES_NOT_CONTAIN:e="~",r=!0;break;case n.EOperator.IS_EQUAL_TO:e="==",i=!0;break;case n.EOperator.IS_NOT_EQUAL_TO:e="!=",i=!0;break;case n.EOperator.IS_LOWER_THAN:e="<",i=!0;break;case n.EOperator.IS_NOT_LOWER_THAN:e="<",r=!0,i=!0;break;case n.EOperator.IS_GREATER_THAN:e=">",i=!0;break;case n.EOperator.IS_NOT_GREATER_THAN:e=">",r=!0,i=!0;break;case n.EOperator.IS_LOWER_OR_EQUAL_THAN:e="<=",i=!0;break;case n.EOperator.IS_NOT_LOWER_OR_EQUAL_THAN:e="<=",r=!0,i=!0;break;case n.EOperator.IS_GREATER_OR_EQUAL_THAN:e=">=",i=!0;break;case n.EOperator.IS_NOT_GREATER_OR_EQUAL_THAN:e=">=",r=!0,i=!0;break;default:console.error("Unknown operator: "+t.operator+" (in RulesGenerator/VisibilityFieldComputation)"),e="?"}var s=void 0;return s=void 0!==t.targetValue?i?"VALUE("+this.escapeIdentifierName(t.field)+")"+e+JSON.stringify(this.castStringToNumberIfNeeded(t.targetValue)):"VALUE("+this.escapeIdentifierName(t.field)+")"+e+JSON.stringify(t.targetValue):"VALUE("+this.escapeIdentifierName(t.field)+")"+e+"VALUE("+this.escapeIdentifierName(t.targetField)+")",r?"!("+s+")":s}},t.castStringToNumberIfNeeded=function(t){if("string"!=typeof t||t.length>32)return t;var e=parseFloat(t);return String(e)===t?e:t},t}(),s=function(){function t(t){this.copyFieldValueActions=[],this.copyMultipleFieldActions=[],this.computeFormulaActions=[],this.fieldName=t}return t.prototype.addCopyFieldValueAction=function(t,e){this.copyFieldValueActions.push({ifGroup:t,sourceField:e})},t.prototype.addCopyMultipleFieldValuesAction=function(t,e){this.copyMultipleFieldActions.push({ifGroup:t,sourceFields:e})},t.prototype.addComputeFormulaAction=function(t,e){this.computeFormulaActions.push({ifGroup:t,formula:e})},t.prototype.toString=function(){for(var e=["SWITCH( true, "],n=0,r=this.copyFieldValueActions.length;n<r;n++)e.push(i.ifGroupToString(this.copyFieldValueActions[n].ifGroup)),e.push(", VALUE("+i.escapeIdentifierName(this.copyFieldValueActions[n].sourceField)+"), ");for(n=0,r=this.copyMultipleFieldActions.length;n<r;n++)e.push(i.ifGroupToString(this.copyMultipleFieldActions[n].ifGroup)),e.push(", "+this.convertMultipleFieldsToExpression(this.copyMultipleFieldActions[n].sourceFields)+", ");for(n=0,r=this.computeFormulaActions.length;n<r;n++)e.push(i.ifGroupToString(this.computeFormulaActions[n].ifGroup)),e.push(", "+t.convertFormulaToString(this.computeFormulaActions[n].formula)+", ");return e.push(" 0)"),e.join("")},t.prototype.convertMultipleFieldsToExpression=function(t){for(var e=[],n=0,r=t.length;n<r;n++)this.isFieldName(t[n])?e.push("VALUE("+t[n]+")"):e.push(JSON.stringify(t[n]));return"CONCAT("+e.join(", ")+")"},t.prototype.isFieldName=function(t){return/^{[^\r\n\t}]+}$/.test(t)},t.convertFormulaToString=function(t){var e=r.ScriptingEngine.compile(t);if(e.getError())return"0";for(var n=e.getExpression().getIdentifiersList(),o=0,i=n.length;o<i;o++)n[o].getParent()?n[o].withPrepend("VALUE(").withAppend(")"):n[o].withPrepend("FLOAT(VALUE(").withAppend("))");return e.getExpression().toString()},t}(),a=function(){function t(t){this.showActions=[],this.hideActions=[],this.fieldName=t}return t.prototype.addShowAction=function(t){this.showActions.push(t)},t.prototype.addHideAction=function(t){this.hideActions.push(t)},t.prototype.toString=function(){var e=!!this.showActions.length,n=!!this.hideActions.length;return e&&n?"IF("+t.convertIfGroupsToString(this.showActions)+", true, IF("+t.convertIfGroupsToString(this.hideActions)+", false, true ))":e?t.convertIfGroupsToString(this.showActions):"!("+t.convertIfGroupsToString(this.hideActions)+")"},t.convertIfGroupsToString=function(t){for(var e=[],n=0,r=t.length;n<r;n++)e.push(i.ifGroupToString(t[n]));return 1===e.length?e[0]:"("+e.join("||")+")"},t}(),u=function(){function t(t){switch(this.target="_self",t.action.target){case n.EPageRedirectRuleActionType.REDIRECT_IN_SELF_FRAME:this.target="_self";break;case n.EPageRedirectRuleActionType.REDIRECT_IN_PARENT_FRAME:this.target="_parent"}this.url=t.action.url,this.expression=this.buildExpression(t)}return t.prototype.getUrl=function(){return this.url},t.prototype.getTarget=function(){return this.target},t.prototype.getExpression=function(){return this.expression},t.prototype.buildExpression=function(t){if(0===t.conditions.length)return null;var e=a.convertIfGroupsToString([{conditions:t.conditions,matchType:t.matchType}]),n=r.ScriptingEngine.compile(e);return n.getError()?null:n.getExpression()},t}();e.RedirectFieldComputation=u;var l=function(){function t(){this.rules=[]}return t.prototype.addRule=function(t){this.rules.push(new u(t))},t.prototype.getRules=function(){return this.rules},t}(),c=function(){function t(){this.fields={}}return t.prototype.addCopySingleFieldAction=function(t,e,n){this.fields[t]||(this.fields[t]=new s(t)),this.fields[t].addCopyFieldValueAction(e,n)},t.prototype.addCopyMultipleFieldsAction=function(t,e,n){this.fields[t]||(this.fields[t]=new s(t)),this.fields[t].addCopyMultipleFieldValuesAction(e,n)},t.prototype.addFormulaFieldAction=function(t,e,n){this.fields[t]||(this.fields[t]=new s(t)),this.fields[t].addComputeFormulaAction(e,n)},t.prototype.install=function(t){for(var e in this.fields)if(this.fields.hasOwnProperty(e)){var n=t.getElementByName(e);if(n&&n.hasProperty("formula"))n.getProperty("formula")||n.setProperty("formula",this.fields[e].toString())}},t}(),p=function(){function t(){this.fields={}}return t.prototype.addShowAction=function(t,e){this.fields[t]=this.fields[t]||new a(t),this.fields[t].addShowAction(e)},t.prototype.addHideAction=function(t,e){this.fields[t]=this.fields[t]||new a(t),this.fields[t].addHideAction(e)},t.prototype.install=function(t){for(var e in this.fields)if(this.fields.hasOwnProperty(e)){var n=t.getElementByName(e);if(n&&n.hasProperty("visibility")){var r=n.getProperty("visibility");r&&"true"!==r||n.setProperty("visibility",this.fields[e].toString())}}},t}(),d=function(){function t(t){this.controlDefaultValues={},this.document=t,this.visibilityRules=new p,this.calculationRules=new c,this.redirectionRules=new l}return t.prototype.injectRedirectionRules=function(t){for(var e=0,n=this.redirectionRules.getRules(),r=n.length;e<r;e++)t.addRedirectRule(n[e])},t.prototype.generateRules=function(){var t=this;if(this.document.hasProperty("rules")){for(var e=JSON.parse(this.document.getProperty("rules")),r=function(r,i){if(!e[r].enabled)return"continue";switch(e[r].type){case n.ERuleType.VISIBILITY:o.scanVisibilityRule(e[r]);break;case n.ERuleType.CALCULATION:o.scanCalculationRule(e[r]);break;case n.ERuleType.NEURAL_AUTO_FILLER:o.scanNeuralAutoFillerRule(e[r]);break;case n.ERuleType.REDIRECT:o.setRedirectRule(e[r]);break;case n.ERuleType.DEFAULT_VALUES:Object.keys(e[r].fields).forEach((function(n){var o=e[r].fields[n];void 0!==o&&""!==o&&(t.controlDefaultValues[n]=o)}))}},o=this,i=0,s=e.length;i<s;i++)r(i);this.visibilityRules.install(this.document),this.calculationRules.install(this.document)}},t.prototype.scanVisibilityRule=function(t){for(var e=0,r=t.actions.length;e<r;e++)switch(t.actions[e].actionType){case n.EVisibilityRuleActionType.HIDE_FIELD:this.visibilityRules.addHideAction(t.actions[e].targetField,{conditions:t.conditions,matchType:t.matchType});break;case n.EVisibilityRuleActionType.SHOW_FIELD:this.visibilityRules.addShowAction(t.actions[e].targetField,{conditions:t.conditions,matchType:t.matchType});break;case n.EVisibilityRuleActionType.HIDE_MULTIPLE_FIELDS:for(var o=0,i=(s=t.actions[e].targetFields).length;o<i;o++)this.visibilityRules.addHideAction(s[o],{conditions:t.conditions,matchType:t.matchType});break;case n.EVisibilityRuleActionType.SHOW_MULTIPLE_FIELDS:var s;for(o=0,i=(s=t.actions[e].targetFields).length;o<i;o++)this.visibilityRules.addShowAction(s[o],{conditions:t.conditions,matchType:t.matchType})}},t.prototype.setRedirectRule=function(t){this.redirectionRules.addRule(t)},t.prototype.scanNeuralAutoFillerRule=function(t){this.calculationRules.addFormulaFieldAction(t.targetFieldName,{conditions:[new o],matchType:n.EMatchType.AND},"NEURAL_NET_COMPUTE("+t.networkId+", "+JSON.stringify(t.targetFieldName)+","+i.escapeIdentifierName(t.sourceFieldName)+")")},t.prototype.scanCalculationRule=function(t){for(var e=0,r=t.actions.length;e<r;e++)switch(t.actions[e].actionType){case n.ECalculationRuleActionType.COPY_FIELD_VALUE:this.calculationRules.addCopySingleFieldAction(t.actions[e].targetField,{conditions:t.conditions,matchType:t.matchType},t.actions[e].sourceField);break;case n.ECalculationRuleActionType.COPY_MULTIPLE_FIELD_VALUES:this.calculationRules.addCopyMultipleFieldsAction(t.actions[e].targetField,{conditions:t.conditions,matchType:t.matchType},t.actions[e].sourceFields);break;case n.ECalculationRuleActionType.CALCULATE_FIELD_VALUE:this.calculationRules.addFormulaFieldAction(t.actions[e].targetField,{conditions:t.conditions,matchType:t.matchType},t.actions[e].formula)}},t.prototype.getControlDefaultValues=function(){return this.controlDefaultValues},t}();e.RulesGenerator=d}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(0)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.load=function(){return n.Deferred((function(t){var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src","//checkout.stripe.com/checkout.js"),document.getElementsByTagName("head")[0].appendChild(e),e.onload=function(){setTimeout((function(){t.reject(new Error("Timeout loading StripeCheckout SDK exceeded after 10 seconds"))}),1e4),function e(){void 0===window.StripeCheckout?setTimeout(e,100):t.resolve(window.StripeCheckout)}()},e.onerror=function(){t.reject(new Error("Error loading StripeCheckout SDK"))}}))},t}();e.StripeSDK=r}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(0),n(5),n(346)],void 0===(o=function(t,e,n,r,o){var i,s;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.POST="POST",t.GET="GET"}(i||(i={})),function(t){t.FORM_REDIRECT="FORM_REDIRECT",t.LOAD_SDK="LOAD_SDK"}(s||(s={}));var a=function(){function t(){}return t.load=function(){return n.Deferred((function(t){var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src","//js.braintreegateway.com/web/dropin/1.14.1/js/dropin.min.js"),document.getElementsByTagName("head")[0].appendChild(e);var n=window.define;window.define=function(){},e.onload=function(){setTimeout((function(){window.define=n,t.reject(new Error("Timeout loading Braintree SDK exceeded after 10 seconds"))}),1e4),function e(){if(void 0!==window.braintree)return window.define=n,void t.resolve(window.braintree);setTimeout(e,1e3)}()},e.onerror=function(){window.define=n,t.reject(new Error("Error loading Braintree SDK"))}}))},t.manageBraintreeCheckout=function(t,e,n,i){var s=!1,a=t.fields,u=document.createElement("div");u.setAttribute("class","custom_front_checkout_modal"),u.setAttribute("data-role","checkout-overlay"),u.setAttribute("data-checkout-type","braintree");var l=document.createElement("div");l.setAttribute("id","custom-checkout-dropin-container");var c=document.createElement("button");c.setAttribute("id","custom-checkout-dropin-button"),c.innerText=a.checkout_button_text;var p=document.createElement("div");p.setAttribute("class","custom-checkout-dropin-button-container"),p.appendChild(c),u.appendChild(l),u.appendChild(p),document.body.appendChild(u);var d={authorization:a.braintree_token,container:"#custom-checkout-dropin-container"};a.show_paypal_checkout&&(d.paypal={flow:"checkout",amount:a.cart_amount,currency:a.cart_currency}),e.dropin.create(d).then((function(t){n.removeLoadRequest(),window.onbeforeunload=function(){return s?void 0:"Leaving this page will cancel your payment."},u.style.display="block",c.style.display="inline-block",c.addEventListener("click",(function(){s=!0,t.requestPaymentMethod((function(t,e){n.addLoadRequest(),c.style.display="none",r.API.put("payments/charge/"+i.getId()+"/"+a.payment_id,{payment:JSON.stringify(e)}).then((function(t){u.style.display="none",t.success?(n.removeLoadRequest(),location.href=t.url):(c.style.display="inline-block",i.setActivePage(o.DefaultErrorPage.create(i)))})).fail((function(t){c.style.display="inline-block",n.removeLoadRequest(),i.setActivePage(o.DefaultErrorPage.create(i))}))}))}))}))},t}();e.BraintreeSDK=a}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(0),n(5),n(346)],void 0===(o=function(t,e,n,r,o){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){}return t.load=function(){return n.Deferred((function(t){var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src","//www.paypalobjects.com/api/checkout.js"),document.getElementsByTagName("head")[0].appendChild(e);var n=window.define;window.define=function(){},e.onload=function(){setTimeout((function(){window.define=n,t.reject(new Error("Timeout loading Paypal Checkout SDK exceeded after 10 seconds"))}),1e4),function e(){if(void 0!==window.paypal)return window.define=n,void t.resolve(window.paypal);setTimeout(e,1e3)}()},e.onerror=function(){window.define=n,t.reject(new Error("Error loading Paypal Checkout SDK"))}}))},t.managePaypalCheckout=function(e,n,r,i){var s=e.fields,a=!1,u=document.createElement("div");u.setAttribute("class","custom_front_checkout_modal");var l=document.createElement("div");l.setAttribute("id","custom-checkout-dropin-container"),u.setAttribute("data-role","checkout-overlay"),u.setAttribute("data-checkout-type","paypal"),u.appendChild(l),document.body.appendChild(u);var c={commit:!!s.pay_now_flow,env:s.environment,style:{layout:"vertical",size:"medium",shape:"rect",color:"gold"},funding:{allowed:[n.FUNDING.CARD,n.FUNDING.CREDIT],disallowed:[]},client:{sandbox:s.client_id,production:s.client_id},payment:function(t,e){return e.payment.create({payment:{transactions:[{amount:{total:s.cart_amount,currency:s.cart_currency}}]}})},onAuthorize:function(e,n){return n.payment.execute().then((function(e){return"INSTRUMENT_DECLINED"===e.error?(i.setActivePage(o.DefaultErrorPage.create(i)),n.restart()):(a=!0,"approved"!==e.state?(i.setActivePage(o.DefaultErrorPage.create(i)),n.restart()):void t.onPaymentExecuteAction(r,u,s,e,i))}))},onCancel:function(t,e){},onError:function(t){i.setActivePage(o.DefaultErrorPage.create(i))}};n.Button.render(c,"#custom-checkout-dropin-container").then((function(t){window.onbeforeunload=function(){return a?void 0:"Leaving this page will cancel your payment."},u.style.display="block",r.removeLoadRequest()}))},t.onPaymentExecuteAction=function(t,e,n,i,s){t.addLoadRequest(),e.style.display="none",r.API.put("payments/charge/"+s.getId()+"/"+n.payment_id,{payment:JSON.stringify(i)}).then((function(e){e.success?(t.removeLoadRequest(),location.href=e.url):(s.setActivePage(o.DefaultErrorPage.create(s)),console.error("Paypal checkout response: ",e))})).fail((function(e){t.removeLoadRequest(),s.setActivePage(o.DefaultErrorPage.create(s)),console.error("Paypal Checkout error",e)}))},t}();e.PaypalCheckoutSDK=i}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(0),n(8),n(2),n(11),n(14)],void 0===(o=function(t,e,n,r,o,i,s){Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t){this.editURL=t}return t.prototype.run=function(){var t=this,e=new o.Dialog({width:"500px",height:"400px",closable:!0,title:"Form data saved",movable:!0,style:o.DialogStyle.FLAT_COLOR,buttons:[{caption:"Copy",classNames:"btn btn-secondary",callback:function(){e.getBody().querySelector("input").focus(),e.getBody().querySelector("input").select(),document.execCommand("copy")}},{caption:"Continue editing",classNames:"btn btn-primary",callback:function(){e.close()}}]}).center();e.getRoot().setAttribute("data-dialog-role","resume-submission");var a=new i.Loader(e.getBody());a.addLoadRequest(),r.NetworkCache.get("/static/templates/ui-v2/view-form-dialogs/resume-submission-dialog.html").then((function(r){a.removeLoadRequest();var o={url:location.protocol+"//"+location.host+t.editURL};e.getBody().innerHTML=s.Handlebars.to_html(r,o),n(e.getBody()).on("click focus","input",(function(){this.select()}))})).fail((function(){e.close(),alert(t.editURL)}))},t}();e.ResumeSubmissionDialog=a}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(19)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.initBrandingIfNeeded=function(t){if(document.body.hasAttribute("data-branding")&&"1"===document.body.getAttribute("data-branding")){var e=t.getBrandingDOMNode(),r="";n.UserManager.isLoggedIn()&&(r='<a class="remove-branding" href="'+this.convertRelativeLinkToAbsoluteLinkIfNeeded("/plans-and-pricing")+'" target="_blank" title="Remove Branding">Remove branding</a>');var o="<div class='branding-report-abuse'>Never submit passwords through AbcSubmit Forms. <a href='"+this.convertRelativeLinkToAbsoluteLinkIfNeeded("/site/abuse-form/")+"' target='_blank' title='Report Abuse'>Report Abuse</a></div>";e.innerHTML="<div class='branding-create-forms'><a href=\""+this.convertRelativeLinkToAbsoluteLinkIfNeeded("/")+'" target="_blank" class="vfb vfb-logo" data-role="logo"></a><span class=\'dont-have-a-form\'>Don\'t have a form yet?</span><a href="'+this.convertRelativeLinkToAbsoluteLinkIfNeeded("/edit/")+'" class=\'create-your-forms\' target="_blank" title="Online Form Builder">Create your form today!</a>'+r+"</div>"+o}},t.convertRelativeLinkToAbsoluteLinkIfNeeded=function(t){return location.hostname.match(/^((www|weebly|wordpress|plentymarkets)\.)?abcsubmit\.(com|eu)$/i)?t:"//www.abcsubmit.com"+t},t}();e.FormBrandingManager=r}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(3)],void 0===(o=function(t,e,n){var r;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.SCREEN="screen",t.PRINT="print"}(r=e.DisplayMediaType||(e.DisplayMediaType={}));var o=function(){function t(){}return t.getEmitter=function(){var t=this;if(!this.emitter){this.emitter=new n.EventEmitter,window.addEventListener("beforeprint",(function(e){t.setMediaType(r.PRINT)}),!0),window.addEventListener("afterprint",(function(e){t.setMediaType(r.SCREEN)}),!0);try{window.matchMedia("print").addListener((function(e){e.matches?t.setMediaType(r.PRINT):t.setMediaType(r.SCREEN)}))}catch(t){console.warn("[DMM]: Failed to hook on display media matcher")}}return this.emitter},t.setMediaType=function(e){if(e!==this.mediaType)switch(e){case r.SCREEN:case r.PRINT:this.mediaType=e,this.getEmitter().trigger(t.EVENT_MEDIA_TYPE_CHANGED);break;default:throw new Error("Invalid argument: mediaType: Expected 'print' or 'screen'")}},t.getMediaType=function(){return this.mediaType},t.EVENT_MEDIA_TYPE_CHANGED="media-type-changed",t.mediaType=r.SCREEN,t}();e.DisplayMediaManager=o}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(15)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){this.redirectRules=[],this.document=t,this.environment=e}return t.prototype.addRedirectRule=function(t){t.getExpression()&&this.redirectRules.push(t)},t.prototype.getDocumentSubmitActionSettings=function(){var t;try{t=JSON.parse(this.document.getProperty("submission.defaultSubmitAction"))}catch(e){t={action:n.EDocumentSubmitActionType.SHOW_THANK_YOU_PAGE}}for(var e=0,r=this.redirectRules.length;e<r;e++)try{this.redirectRules[e].getExpression().compute(this.environment)&&(t.action=n.EDocumentSubmitActionType.REDIRECT_TO_URL,t.url=this.redirectRules[e].getUrl(),t.target=this.redirectRules[e].getTarget())}catch(t){console.warn("FormRedirectRulesManager: failed to compute expression: ",this.redirectRules[e].getExpression().toString())}return t},t}();e.FormRedirectRulesManager=r}.apply(e,r))||(t.exports=o)},function(t,e,n){"use strict";var r,o;r=[n,e,n(5)],void 0===(o=function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.addAuthorizedEndpoints=function(){return n.API.addAuthorizedEndpoint(/^forms\/([^\/]+)\/authorize$/).addAuthorizedEndpoint(/^users\/my-/).addAuthorizedEndpoint(/^forms\/([^\/]+)\/update-submission\/[0-9]+$/)},t}();e.ViewFormAPIAuthorizedEndpoints=r}.apply(e,r))||(t.exports=o)}]);