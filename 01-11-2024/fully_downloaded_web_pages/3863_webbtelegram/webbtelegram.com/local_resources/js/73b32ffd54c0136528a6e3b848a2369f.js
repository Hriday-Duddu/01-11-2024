const __vite__fileDeps=["./pageSignIn-DtcPvq7d.js","./putPreloader-CfwTEmMx.js","./page-C6KtWgBe.js","./countryInputField-PEvlmzPd.js","./button-BK5qTKOs.js","./wrapEmojiText-BPAu5UmK.js","./scrollable-C3XR0gzn.js","./pageSignQR-B_txtm75.js","./textToSvgURL-Cnw_Q8Rw.js","./pageAuthCode-ssN3Cthr.js","./codeInputField-Dkfv6n3v.js","./pagePassword-DJAFieKY.js","./htmlToSpan-DMh5Xb23.js","./loginPage-BW5rLsbp.js","./pageSignUp-PWlTat_7.js","./avatar-BmC6qQn6.js","./pageSignImport-Cliq-4h7.js","./pageIm-BKYotU3N.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();const Oi="modulepreload",Ii=function(t,e){return new URL(t,e).href},mr={},$=function(e,s,r){let n=Promise.resolve();if(s&&s.length>0){const i=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");n=Promise.all(s.map(u=>{if(u=Ii(u,r),u in mr)return;mr[u]=!0;const c=u.endsWith(".css"),l=c?'[rel="stylesheet"]':"";if(!!r)for(let g=i.length-1;g>=0;g--){const E=i[g];if(E.href===u&&(!c||E.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${l}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":Oi,c||(f.as="script",f.crossOrigin=""),f.href=u,a&&f.setAttribute("nonce",a),document.head.appendChild(f),c)return new Promise((g,E)=>{f.addEventListener("load",g),f.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${u}`)))})}))}return n.then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},pr=["web.telegram.org","webk.telegram.org"],jc="pattern",Dr=Math.min(4,navigator.hardwareConcurrency??4),B={id:1025907,hash:"452b0359b988148995f22ff0f4229750",version:"2.1.0",versionFull:"2.1.0 (526)",build:526,langPackVersion:"6.1.4",langPack:"webk",langPackCode:"zh-CN",domains:pr,baseDcId:2,isMainDomain:pr.includes(location.hostname),suffix:"K",threads:Dr,cryptoWorkers:Dr};B.isMainDomain&&(B.id=2496,B.hash="8da85b0d5bfe62527e5b244c209159c3");function hn(){return document.activeElement?.blur?(document.activeElement.blur(),!0):!1}function Ss(t){if(t||(t=window.event),t){t=t.originalEvent||t;try{t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.returnValue=!1,t.cancelBubble=!0}catch{}}return!1}const De="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,Ks=typeof window<"u"?window:self,He=navigator?navigator.userAgent:null,ws=navigator.userAgent.search(/OS X|iPhone|iPad|iOS/i)!==-1,dn=navigator.userAgent.toLowerCase().indexOf("android")!==-1,fn=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),gn=(()=>{try{return+navigator.userAgent.match(/Chrom(?:e|ium)\/(.+?)(?:\s|\.)/)[1]}catch{}})(),xe=(/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!Ks.MSStream,Z="safari"in Ks||!!(He&&(/\b(iPad|iPhone|iPod)\b/.test(He)||He.match("Safari")&&!He.match("Chrome"))),Be=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,Qe=Z&&xe,ue=(navigator.maxTouchPoints===void 0||navigator.maxTouchPoints>0)&&navigator.userAgent.search(/iOS|iPhone OS|Android|BlackBerry|BB10|Series ?[64]0|J2ME|MIDP|opera mini|opera mobi|mobi.+Gecko|Windows Phone/i)!=-1,xi=Object.freeze(Object.defineProperty({__proto__:null,CHROMIUM_VERSION:gn,IS_ANDROID:dn,IS_APPLE:ws,IS_APPLE_MOBILE:xe,IS_CHROMIUM:fn,IS_FIREFOX:Be,IS_MOBILE:ue,IS_MOBILE_SAFARI:Qe,IS_SAFARI:Z,USER_AGENT:He},Symbol.toStringTag,{value:"Module"}));function Bi(t,e){return t.closest("."+e)}let Ue;function Cs(t){Ue?Ue.push(t):(Ue=[t],requestAnimationFrame(()=>{const e=Ue;Ue=void 0,e.forEach(s=>s())}))}let Ce,qt=!1;function $c(t){Ce?qt?t():Ce.push(t):(Ce=[t],requestAnimationFrame(()=>{qt=!0;for(let e=0;e<Ce.length;++e)Ce[e]();Ce=void 0,qt=!1}))}let _e;function Hc(){return _e||(_e=new Promise(t=>Cs(()=>t())),_e.then(()=>{_e=void 0}),_e)}function Ni(){return new Promise(t=>{Cs(()=>{Cs(t)})})}function vr(t){t.style.transform="translateY(-99999px)",t.focus(),Ni().then(()=>{t.style.transform=""})}const vt=Z&&ue&&De&&!1;if(vt){const t="clientY";let e=0;const s={capture:!0,passive:!1},r=i=>{const o=i.touches[0],a=Bi(o.target,"scrollable-y");if(a){const u=o[t],c=e-u,l=a.scrollTop,h=a.scrollHeight,f=a.clientHeight,g=l?Math.round(l+a.clientHeight+c):l+c;(h===f||g>=h||g<=0)&&i.preventDefault()}else i.preventDefault()};let n=0;document.addEventListener("focusin",i=>{!i.target.classList.contains("is-sticky-input-bugged")||i.timeStamp-n<50||(vr(i.target),document.addEventListener("touchmove",r,s),document.addEventListener("touchstart",o=>{if(o.touches.length>1)return;e=o.touches[0][t]}))},{passive:!0}),document.addEventListener("focusout",i=>{document.removeEventListener("touchmove",r,s),n=i.timeStamp},{passive:!0}),document.addEventListener("visibilitychange",()=>{document.activeElement&&document.activeElement.classList.contains("is-sticky-input-bugged")&&document.activeElement.blur&&vr(document.activeElement)},{passive:!0})}function Vc(t){vt&&t.classList.add("is-sticky-input-bugged")}const mn="Roboto",Ui=mn+', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif',Wi="16px",ji="400",qc=`${ji} ${Wi} ${Ui}`;function Et(){}function Js(t){return new Promise(e=>{setTimeout(e,t)})}const pn="tgico";function Gc(t){return pn+"-"+t}const Gt=["b","Ğ±"],Yt={},$i={text:mn,icons:pn,monospace:"Roboto Mono"};function Hi(t={text:Gt,icons:void 0,monospace:Gt}){if(!("fonts"in document))return Promise.resolve();const e=[];for(const s in t){let r=t[s];r==="all"&&(r=Gt);const n=$i[s],i=s==="icons"?[500]:[400,500];for(const o of i){const a=(r||[void 0]).map(u=>{var h,f;const c=[o,"1rem",n].join(" ");return(h=Yt[c]??(Yt[c]={}))[f=u||""]??(h[f]=document.fonts.load(c,u))});e.push(...a)}}return Promise.race([Promise.all(e).catch(Et),Js(1e3)])}const _s=navigator.userAgent.search(/OS X|iPhone|iPad|iOS/i)!==-1;function Dn(t){return t instanceof URL||(t=new URL(t+"",location.href)),location.search&&t.protocol!=="blob:"&&new URLSearchParams(location.search).forEach((s,r)=>{t.searchParams.set(r,s)}),t.searchParams.delete("swfix"),t}function Vi(){const t={construct(e,s){return s[0]=Dn(s[0]),new e(...s)}};[Worker,typeof SharedWorker<"u"&&SharedWorker].filter(Boolean).forEach(e=>{window[e.name]=new Proxy(e,t)})}Vi();function qi(){Element.prototype.toggleAttribute||(Element.prototype.toggleAttribute=function(t,e){return e!==void 0&&(e=!!e),this.hasAttribute(t)?e?!0:(this.removeAttribute(t),!1):e===!1?!1:(this.setAttribute(t,""),!0)})}const vn=0,Yc=1271266957,zc=777,Kc=2666e3,Jc=777e3,Xc=2147483647,Zc="",Qc=20*1024*1024,Gi="",el=[7322096,16766590,13338331,9367192,16749490,16478047],tl="default_static",Ft=4294967296,sl=Ft+1,rl=!1,Yi=new Set(["web","k","z","a"]),nl=2147483646,il=new Set(["image/jpeg","image/png","image/bmp","image/gif"]),ol="XTR",zi=0,Ki=1,Ji=new Set([zi,Ki]);Math.max(...Array.from(Ji))+1;const al=!1;class Ae{constructor(e){this._constructor(e)}_constructor(e){this.reuseResults=e,this.listeners={},this.listenerResults={}}addEventListener(e,s,r){var i;const n={callback:s,options:r};if(((i=this.listeners)[e]??(i[e]=new Set)).add(n),this.listenerResults.hasOwnProperty(e)&&(s(...this.listenerResults[e]),r?.once)){this.listeners[e].delete(n);return}}addMultipleEventsListeners(e){for(const s in e)this.addEventListener(s,e[s])}removeEventListener(e,s,r){if(this.listeners[e]){for(const n of this.listeners[e])if(n.callback===s){this.listeners[e].delete(n);break}}}invokeListenerCallback(e,s,...r){let n,i;try{n=s.callback(...r)}catch(o){i=o}if(s.options?.once&&this.removeEventListener(e,s.callback),i)throw i;return n}_dispatchEvent(e,s,...r){this.reuseResults&&(this.listenerResults[e]=r);const n=s&&[],i=this.listeners[e];if(i)for(const o of i){const a=this.invokeListenerCallback(e,o,...r);n&&n.push(a)}return n}dispatchResultableEvent(e,...s){return this._dispatchEvent(e,!0,...s)}dispatchEvent(e,...s){this._dispatchEvent(e,!1,...s)}cleanup(){this.listeners={},this.listenerResults={}}}const G={test:location.search.indexOf("test=1")>0,debug:location.search.indexOf("debug=1")>0,http:!1,ssl:!0,asServiceWorker:!1,transport:"websocket",noSharedWorker:location.search.indexOf("noSharedWorker=1")>0,multipleTransports:!0};(G.http=location.search.indexOf("http=1")>0)&&(G.multipleTransports=!1);G.multipleTransports&&(G.http=!0);G.http&&(G.transport="https");const Xi=!1,Ee=G.debug,Zi=typeof window<"u"?window:self,k=Zi,En=Date.now()%Math.random()*1e8|0;function ht(t,e){const s=t.indexOf(e);return(s===-1?void 0:t.splice(s,1))?.[0]}const et=typeof ServiceWorkerGlobalScope<"u"&&self instanceof ServiceWorkerGlobalScope,Rt=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&!et,Fe=Rt||et,Qi=()=>self.clients.matchAll({includeUncontrolled:!1,type:"window"}),Fn=(t,...e)=>{try{t.postMessage(...e)}catch(s){console.error("[worker] postMessage error:",s,e)}},yn=(t,...e)=>{Qi().then(s=>{s.length&&s.slice(t?0:-1).forEach(r=>{Fn(r,...e)})})},An=(...t)=>{Fn(self,...t)},bn=()=>{};et&&yn.bind(null,!1);et&&yn.bind(null,!0);const zt={};function ve(t){return zt[t]??(zt[t]={type:t})}const eo=Date.now();function yt(){return"["+((Date.now()-eo)/1e3).toFixed(3)+"]"}var Xs=(t=>(t[t.None=0]="None",t[t.Error=1]="Error",t[t.Warn=2]="Warn",t[t.Log=4]="Log",t[t.Debug=8]="Debug",t))(Xs||{});const to=[0,1,2,4,8],so=Z||Be,Er=!so,Kt={reset:"\x1B[0m",bright:"\x1B[1m",dim:"\x1B[2m",underscore:"\x1B[4m",blink:"\x1B[5m",reverse:"\x1B[7m",hidden:"\x1B[8m",fg:{black:"\x1B[30m",red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",cyan:"\x1B[36m",white:"\x1B[37m"},bg:{black:"\x1B[40m",red:"\x1B[41m",green:"\x1B[42m",yellow:"\x1B[43m",blue:"\x1B[44m",magenta:"\x1B[45m",cyan:"\x1B[46m",white:"\x1B[47m"}},ro=[["debug",8],["info",4],["warn",2],["error",1],["assert",1],["trace",4],["group",4],["groupCollapsed",4],["groupEnd",4]];function te(t,e=7,s=!1,r=""){let n;!Ee&&!s&&(e=1),Er?r||(et?r=Kt.fg.yellow:Rt&&(r=Kt.fg.cyan)):r="";const i=r;r?r=`%s ${r}%s`:r="%s";const o=function(...u){return e&4&&console.log(r,yt(),t,...u)};ro.forEach(([u,c])=>{o[u]=function(...l){return e&c&&console[u](r,yt(),t,...l)}}),o.setPrefix=function(u){n=u,t="["+u+"]"},o.setPrefix(t),o.setLevel=function(u){e=to.slice(0,u+1).reduce((c,l)=>c|l,0)};const a={};return o.bindPrefix=function(u,c=e){return a[u]??(a[u]=te(`${n}] ${Er&&i?Kt.reset:""}[${u}`,c,s,i))},o}const no=!0;class Zs extends Ae{constructor(e){super(!1),this.logSuffix=e,this.onMessage=s=>{const r=s.data,n=s.source||s.currentTarget;this.processTaskMap[r.type](r,n,s)},this.processResultTask=s=>{const{taskId:r,result:n,error:i}=s.payload,o=this.awaiting[r];o&&(this.debug&&this.log.debug("done",o.taskType,n,i),"error"in s.payload?o.reject(i):o.resolve(n),delete this.awaiting[r])},this.processAckTask=s=>{const r=s.payload,n=this.awaiting[r.taskId];if(!n)return;const i=n.resolve,o={cached:r.cached,result:r.cached?"result"in r?Promise.resolve(r.result):Promise.reject(r.error):new Promise((a,u)=>{n.resolve=a,n.reject=u})};i(o),r.cached&&delete this.awaiting[r.taskId]},this.processPingTask=(s,r,n)=>{this.pushTask(this.createTask("pong",void 0),n.source)},this.processPongTask=(s,r,n)=>{const i=this.pingResolves.get(r);i&&(this.pingResolves.delete(r),i())},this.processCloseTask=(s,r,n)=>{this.detachPort(r)},this.processBatchTask=(s,r,n)=>{const i={data:n.data,source:n.source,currentTarget:n.currentTarget};s.payload.forEach(o=>{i.data=o,this.onMessage(i)})},this.processLockTask=(s,r,n)=>{const i=s.payload;this.requestedLocks.has(i)||(this.requestedLocks.set(i,r),navigator.locks.request(i,()=>{this.processCloseTask(void 0,r,void 0),this.requestedLocks.delete(i)}))},this.processInvokeTask=async(s,r,n)=>{const i=s.id,o=s.payload;let a,u,c;o.void||(a={taskId:i},u=this.createTask("result",a)),o.withAck&&(c=this.createTask("ack",{taskId:i,cached:!0}));let l;try{const h=this.listeners[o.type];if(!h?.size)throw new Error("no listener");const f=h.values().next().value;let g=this.invokeListenerCallback(o.type,f,o.payload,r,n);if(o.void)return;if(l=g instanceof Promise,c){const E=!l;if(c.payload.cached=E,E&&(c.payload.result=g),this.pushTask(c,r),E)return}l&&(g=await g),a.result=g}catch(h){if(this.log.error("worker task error:",h,s),o.void)return;if(c&&c.payload.cached){c.payload.error=h,this.pushTask(c,r);return}a.error=h}this.pushTask(u,r)},this.listenPorts=[],this.sendPorts=[],this.pingResolves=new Map,this.taskId=0,this.awaiting={},this.pending=new Map,this.log=te("MP"+(e?"-"+e:"")),this.debug=Ee,this.heldLocks=new Map,this.requestedLocks=new Map,this.processTaskMap={result:this.processResultTask,ack:this.processAckTask,invoke:this.processInvokeTask,ping:this.processPingTask,pong:this.processPongTask,close:this.processCloseTask,lock:this.processLockTask,batch:this.processBatchTask}}setOnPortDisconnect(e){this.onPortDisconnect=e}attachPort(e){this.attachListenPort(e),this.attachSendPort(e)}attachListenPort(e){this.listenPorts.push(e),e.addEventListener("message",this.onMessage)}attachSendPort(e){if(this.log.warn("attaching send port"),e.start?.(),this.sendPorts.push(e),typeof window<"u"&&no)if("locks"in navigator){const s=["lock",En,this.logSuffix||"",Math.random()*2147483647|0].join("-");this.log.warn("created lock",s);const r=new Promise(n=>this.heldLocks.set(e,{resolve:n,id:s})).then(()=>this.heldLocks.delete(e));navigator.locks.request(s,()=>(this.resendLockTask(e),r))}else window.addEventListener("beforeunload",()=>{const s=this.createTask("close",void 0);this.postMessage(void 0,s)});this.releasePending()}resendLockTask(e){const s=this.heldLocks.get(e);s&&this.pushTask(this.createTask("lock",s.id),e)}detachPort(e){this.log.warn("disconnecting port"),ht(this.listenPorts,e),ht(this.sendPorts,e),e.removeEventListener?.("message",this.onMessage),e.close?.(),this.onPortDisconnect?.(e),this.heldLocks.get(e)?.resolve();const r=ve("PORT_DISCONNECTED");for(const n in this.awaiting){const i=this.awaiting[n];i.port===e&&(i.reject(r),delete this.awaiting[n])}}postMessage(e,s){(Array.isArray(e)?e:e?[e]:this.sendPorts).forEach(n=>{n.postMessage(s,s.transfer)})}async releasePending(){this.releasingPending||(this.releasingPending=!0,await Promise.resolve(),this.debug&&this.log.debug("releasing tasks, length:",this.pending.size),this.pending.forEach((e,s)=>{let r=e;{let i;r=[],e.forEach(o=>{o.transfer?(i=void 0,r.push(o)):(i||(i=this.createTask("batch",[]),r.push(i)),i.payload.push(o))})}const n=s?[s]:this.sendPorts;n.length&&(r.forEach(i=>{try{this.postMessage(n,i)}catch(o){this.log.error("postMessage error:",o,i,n)}}),this.pending.delete(s))}),this.debug&&this.log.debug("released tasks"),this.releasingPending=!1)}createTask(e,s,r){return{type:e,payload:s,id:this.taskId++,transfer:r}}createInvokeTask(e,s,r,n,i){return this.createTask("invoke",{type:e,payload:s,withAck:r,void:n},i)}pushTask(e,s){let r=this.pending.get(s);r||this.pending.set(s,r=[]),r.push(e),this.releasePending()}invokeVoid(e,s,r,n){const i=this.createInvokeTask(e,s,void 0,!0,n);this.pushTask(i,r)}invoke(e,s,r,n,i){this.debug&&this.log.debug("start",e,s);let o;const a=new Promise((u,c)=>{o=this.createInvokeTask(e,s,r,void 0,i),this.awaiting[o.id]={resolve:u,reject:c,taskType:e,port:n},this.pushTask(o,n)});if(Fe){a.finally(()=>{clearInterval(u)});const u=Ks.setInterval(()=>{this.log.error("task still has no result",o,n)},6e4)}return a}invokeExceptSource(e,s,r){const n=this.sendPorts.slice();ht(n,r),n.forEach(i=>{this.invokeVoid(e,s,i)})}}class tt extends Zs{constructor(){super("MTPROTO"),tt.INSTANCE=this,k&&(k.mtprotoMessagePort=this)}static getInstance(){return this.INSTANCE}}class io extends Ae{constructor(){super(),this.myId=vn,this.connectionStatus={},this.premium=!1,this.addEventListener("user_auth",({id:e})=>{this.myId=e.toPeerId()}),this.addEventListener("premium_toggle_private",({isNew:e,isPremium:s})=>{this.premium=s,e||this.dispatchEventSingle("premium_toggle",s)}),this.addEventListener("connection_status_change",e=>{this.connectionStatus[e.name]=e}),this.dispatchEvent=(e,...s)=>{super.dispatchEvent(e,...s),tt.getInstance().invokeVoid("event",{name:e,args:s})},Fe||this.addEventListener("settings_updated",({settings:e})=>{this.settings=e})}getConnectionStatus(){return this.connectionStatus}getPremium(){return this.premium}dispatchEventSingle(e,...s){super.dispatchEvent(e,...s)}}const w=new io;k.rootScope=w;const oo={isFulfilled:!1,isRejected:!1,notify:()=>{},notifyAll:function(...t){this.lastNotify=t,this.listeners?.forEach(e=>e(...t))},addNotifyListener:function(t){this.lastNotify&&t(...this.lastNotify),(this.listeners??(this.listeners=[])).push(t)},resolve:function(t){this.isFulfilled||this.isRejected||(this.isFulfilled=!0,this._resolve(t),this.onFinish())},reject:function(...t){this.isRejected||this.isFulfilled||(this.isRejected=!0,this._reject(...t),this.onFinish())},onFinish:function(){this.notify=this.notifyAll=this.lastNotify=null,this.listeners&&(this.listeners.length=0),this.cancel&&(this.cancel=Et)}};function ie(){let t,e;const s=new Promise((r,n)=>{t=r,e=n});return Object.assign(s,oo),s._resolve=t,s._reject=e,s}function ul(t,e){t.then(e.resolve.bind(e),e.reject.bind(e))}self.deferredPromise=ie;function Jt(t,e,s=!0){let r=null,n,i;const o=()=>{clearInterval(r),r=null},a=(...u)=>{n=!0,i=u,r||(s&&(n=!1,t(...i)),r=setInterval(()=>{if(!n){o();return}n=!1,t(...i)},e))};return a.clear=o,a}function Ps(t,e){if(e)for(const s in e)e[s]!==void 0&&(t[s]=e[s]);return t}const Ye=class Ye{constructor(e){Ps(this,e),G.test&&(this.name+="_test"),this.storageIsAvailable=!0,this.log=te(["IDB",e.name].join("-")),this.log("constructor"),this.openDatabase(!0),Ye.INSTANCES.push(this)}isAvailable(){return this.storageIsAvailable}openDatabase(e=!1){if(this.openDbPromise&&!e)return this.openDbPromise;const s=(o,a)=>{const u=Array.from(o.indexNames);for(const c of u)o.deleteIndex(c);if(a.indexes?.length)for(const c of a.indexes)o.indexNames.contains(c.indexName)||o.createIndex(c.indexName,c.keyPath,c.objectParameters)},r=(o,a)=>{const u=o.createObjectStore(a.name);s(u,a)};try{var n=indexedDB.open(this.name,this.version);if(!n)return Promise.reject()}catch(o){return this.log.error("error opening db",o.message),this.storageIsAvailable=!1,Promise.reject(o)}let i=!1;return setTimeout(()=>{i||n.onerror(ve("IDB_CREATE_TIMEOUT"))},3e3),this.openDbPromise=new Promise((o,a)=>{n.onsuccess=u=>{i=!0;const c=n.result;let l=!1;this.log("Opened"),c.onerror=h=>{this.storageIsAvailable=!1,this.log.error("Error creating/accessing IndexedDB database",h),a(h)},c.onclose=h=>{this.log.error("closed:",h),!l&&this.openDatabase()},c.onabort=h=>{this.log.error("abort:",h);const f=h.target;this.openDatabase(l=!0),f.onerror&&f.onerror(h),c.close()},c.onversionchange=h=>{this.log.error("onversionchange, lol?")},o(this.db=c)},n.onerror=u=>{i=!0,this.storageIsAvailable=!1,this.log.error("Error creating/accessing IndexedDB database",u),a(u)},n.onupgradeneeded=u=>{i=!0,this.log.warn("performing idb upgrade from",u.oldVersion,"to",u.newVersion);const c=u.target,l=c.result;this.stores.forEach(h=>{if(!l.objectStoreNames.contains(h.name))r(l,h);else{const g=c.transaction.objectStore(h.name);s(g,h)}})}})}static create(e){return this.INSTANCES.find(s=>s.name===e.name)??new Ye(e)}static closeDatabases(e){this.INSTANCES.forEach(s=>{if(e&&e===s)return;const r=s.db;r&&(r.onclose=()=>{},r.close())})}};Ye.INSTANCES=[];let ks=Ye;class ao{constructor(e,s){this.storeName=s,this.log=te(["IDB",e.name,s].join("-")),this.idb=ks.create(e)}delete(e,s){const r=Array.isArray(e);return r||(e=[].concat(e)),this.getObjectStore("readwrite",n=>{const i=e.map(o=>n.delete(o));return r?i:i[0]},"",s)}clear(e){return this.getObjectStore("readwrite",s=>s.clear(),"",e)}save(e,s,r){const n=Array.isArray(e);return n||(e=[].concat(e),s=[].concat(s)),this.getObjectStore("readwrite",i=>{const o=e.map((a,u)=>i.put(s[u],a));return n?o:o[0]},"",r)}get(e,s){const r=Array.isArray(e);if(r){if(!e.length)return Promise.resolve([])}else{if(!e)return;e=[].concat(e)}return this.getObjectStore("readonly",n=>{const i=e.map(o=>n.get(o));return r?i:i[0]},"",s)}getObjectStore(e,s,r,n=this.storeName){let i;return r&&(i=performance.now(),this.log(r+": start")),this.idb.openDatabase().then(o=>new Promise((a,u)=>{const c=o.transaction([n],e,{durability:"relaxed"}),l=()=>{clearTimeout(g),u(c.error)},h=()=>{clearTimeout(g),r&&this.log(r+": end",performance.now()-i);const p=m.map(T=>T.result);a(C?p:p[0])};c.onerror=l;const f=e==="readwrite";f&&(c.oncomplete=()=>h());const g=setTimeout(()=>{this.log.error("transaction not finished",c,r)},1e4),E=s(c.objectStore(n)),C=Array.isArray(E),m=C?E:[].concat(E);if(f)return;const F=m.length;let S=F;const P=()=>{c.error||--S||h()};for(let p=0;p<F;++p){const T=m[p];T.onerror=l,T.onsuccess=P}}))}getAll(e){return this.getObjectStore("readonly",s=>s.getAll(),"",e)}}function Fr(){}const Xt=16,Le=class Le{constructor(e,s){this.db=e,this.storeName=s,this.cache={},this.getPromises=new Map,this.keysToSet=new Set,this.saveDeferred=ie(),this.keysToDelete=new Set,this.deleteDeferred=ie(),this.storage=new ao(e,s),Le.STORAGES.length?this.useStorage=Le.STORAGES[0].useStorage:this.useStorage=!0,this.savingFreezed=!1,Le.STORAGES.push(this),this.saveThrottled=Jt(async()=>{const r=this.saveDeferred;this.saveDeferred=ie();const n=this.keysToSet;if(n.size){const i=Array.from(n.values());n.clear();const o=i.map(a=>this.cache[a]);try{await this.storage.save(i,o)}catch(a){console.error("[AS]: set error:",a,i,o)}}r.resolve(),n.size&&this.saveThrottled()},Xt,!1),this.deleteThrottled=Jt(async()=>{const r=this.deleteDeferred;this.deleteDeferred=ie();const n=this.keysToDelete;if(n.size){const i=Array.from(n.values());n.clear();try{await this.storage.delete(i)}catch(o){console.error("[AS]: delete error:",o,i)}}r.resolve(),n.size&&this.deleteThrottled()},Xt,!1),this.getThrottled=Jt(async()=>{const r=Array.from(this.getPromises.keys());this.storage.get(r).then(n=>{for(let i=0,o=r.length;i<o;++i){const a=r[i],u=this.getPromises.get(a);u&&(u.resolve(this.cache[a]=n[i]),this.getPromises.delete(a))}},n=>{new Set(["NO_ENTRY_FOUND","STORAGE_OFFLINE"]).has(n.type)||(this.useStorage=!1,console.error("[AS]: get error:",n,r,s));for(let o=0,a=r.length;o<a;++o){const u=r[o],c=this.getPromises.get(u);c&&(c.resolve(void 0),this.getPromises.delete(u))}}).finally(()=>{this.getPromises.size&&this.getThrottled()})},Xt,!1)}isAvailable(){return this.useStorage}getCache(){return this.cache}getFromCache(e){return this.cache[e]}setToCache(e,s){return this.cache[e]=s}async get(e,s=!0){if(this.cache.hasOwnProperty(e)&&s)return this.getFromCache(e);if(this.useStorage){const r=this.getPromises.get(e);if(r)return r;const n=ie();return this.getPromises.set(e,n),this.getThrottled(),n}}getAll(){return this.storage.getAll().catch(()=>[])}set(e,s=!1){const r=this.useStorage&&!s&&!this.savingFreezed;for(const n in e)if(e.hasOwnProperty(n)){const i=e[n];this.setToCache(n,i),r&&(this.keysToSet.add(n),this.keysToDelete.delete(n),this.saveThrottled())}return r?this.saveDeferred:Promise.resolve()}delete(e,s=!1){return e=""+e,s||delete this.cache[e],this.useStorage&&(this.keysToSet.delete(e),this.keysToDelete.add(e),this.deleteThrottled()),this.useStorage?this.deleteDeferred:Promise.resolve()}clear(e=!1){if(!e)for(const s in this.cache)delete this.cache[s];return this.storage.clear().catch(Fr)}static toggleStorage(e,s){return Promise.all(this.STORAGES.map(r=>{if(r.useStorage=e,!(!Fe||!s))return e?r.set(r.cache):(r.keysToSet.clear(),r.keysToDelete.clear(),r.getPromises.forEach(n=>n.resolve(void 0)),r.getPromises.clear(),r.clear(!0))})).catch(Fr)}static freezeSaving(e,s){this.STORAGES.forEach(r=>r.savingFreezed=!0);try{e()}catch(r){console.error("freezeSaving callback error:",r)}this.STORAGES.forEach(r=>r.savingFreezed=!1)}};Le.STORAGES=[];let ze=Le;k&&(k.AppStorage=ze);const uo={name:"tweb",version:7,stores:[{name:"session"},{name:"stickerSets"},{name:"users"},{name:"chats"},{name:"dialogs"},{name:"messages"}]};class co extends ze{constructor(){super(uo,"session")}}const Re=new co;k.stateStorage=Re;function Sn(t,e,s){const r=s&&new Set(s),n=u=>Object.keys(u).filter(c=>u[c]!==void 0),i=s?u=>n(u).filter(c=>!r.has(c)):n,o=typeof t;return t&&e&&o==="object"&&o===typeof e?i(t).length===i(e).length&&i(t).every(u=>Sn(t[u],e[u],s)):t===e}function Ot(t){return t.charAt(0).toUpperCase()+t.slice(1)}const lo=new Set(["javascript:"]);function wn(t){if(!t)return null;try{const e=new URL(t).protocol;return lo.has(e)?null:e}catch{return null}}const ho="((?:ğŸ‘¨ğŸ»â€â¤ï¸?â€ğŸ’‹â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘¨ğŸ¼â€â¤ï¸?â€ğŸ’‹â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘¨ğŸ½â€â¤ï¸?â€ğŸ’‹â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘¨ğŸ¾â€â¤ï¸?â€ğŸ’‹â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘¨ğŸ¿â€â¤ï¸?â€ğŸ’‹â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ»â€â¤ï¸?â€ğŸ’‹â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ»â€â¤ï¸?â€ğŸ’‹â€ğŸ‘©\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ¼â€â¤ï¸?â€ğŸ’‹â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ¼â€â¤ï¸?â€ğŸ’‹â€ğŸ‘©\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ½â€â¤ï¸?â€ğŸ’‹â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ½â€â¤ï¸?â€ğŸ’‹â€ğŸ‘©\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ¾â€â¤ï¸?â€ğŸ’‹â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ¾â€â¤ï¸?â€ğŸ’‹â€ğŸ‘©\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ¿â€â¤ï¸?â€ğŸ’‹â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ¿â€â¤ï¸?â€ğŸ’‹â€ğŸ‘©\uD83C[\uDFFB-\uDFFF]|ğŸ§‘ğŸ»â€â¤ï¸?â€ğŸ’‹â€ğŸ§‘\uD83C[\uDFFC-\uDFFF]|ğŸ§‘ğŸ¼â€â¤ï¸?â€ğŸ’‹â€ğŸ§‘\uD83C[\uDFFB\uDFFD-\uDFFF]|ğŸ§‘ğŸ½â€â¤ï¸?â€ğŸ’‹â€ğŸ§‘\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|ğŸ§‘ğŸ¾â€â¤ï¸?â€ğŸ’‹â€ğŸ§‘\uD83C[\uDFFB-\uDFFD\uDFFF]|ğŸ§‘ğŸ¿â€â¤ï¸?â€ğŸ’‹â€ğŸ§‘\uD83C[\uDFFB-\uDFFE]|ğŸ‘¨ğŸ»â€â¤ï¸?â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘¨ğŸ»â€ğŸ¤â€ğŸ‘¨\uD83C[\uDFFC-\uDFFF]|ğŸ‘¨ğŸ¼â€â¤ï¸?â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘¨ğŸ¼â€ğŸ¤â€ğŸ‘¨\uD83C[\uDFFB\uDFFD-\uDFFF]|ğŸ‘¨ğŸ½â€â¤ï¸?â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘¨ğŸ½â€ğŸ¤â€ğŸ‘¨\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|ğŸ‘¨ğŸ¾â€â¤ï¸?â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘¨ğŸ¾â€ğŸ¤â€ğŸ‘¨\uD83C[\uDFFB-\uDFFD\uDFFF]|ğŸ‘¨ğŸ¿â€â¤ï¸?â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘¨ğŸ¿â€ğŸ¤â€ğŸ‘¨\uD83C[\uDFFB-\uDFFE]|ğŸ‘©ğŸ»â€â¤ï¸?â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ»â€â¤ï¸?â€ğŸ‘©\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ»â€ğŸ¤â€ğŸ‘¨\uD83C[\uDFFC-\uDFFF]|ğŸ‘©ğŸ»â€ğŸ¤â€ğŸ‘©\uD83C[\uDFFC-\uDFFF]|ğŸ‘©ğŸ¼â€â¤ï¸?â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ¼â€â¤ï¸?â€ğŸ‘©\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ¼â€ğŸ¤â€ğŸ‘¨\uD83C[\uDFFB\uDFFD-\uDFFF]|ğŸ‘©ğŸ¼â€ğŸ¤â€ğŸ‘©\uD83C[\uDFFB\uDFFD-\uDFFF]|ğŸ‘©ğŸ½â€â¤ï¸?â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ½â€â¤ï¸?â€ğŸ‘©\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ½â€ğŸ¤â€ğŸ‘¨\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|ğŸ‘©ğŸ½â€ğŸ¤â€ğŸ‘©\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|ğŸ‘©ğŸ¾â€â¤ï¸?â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ¾â€â¤ï¸?â€ğŸ‘©\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ¾â€ğŸ¤â€ğŸ‘¨\uD83C[\uDFFB-\uDFFD\uDFFF]|ğŸ‘©ğŸ¾â€ğŸ¤â€ğŸ‘©\uD83C[\uDFFB-\uDFFD\uDFFF]|ğŸ‘©ğŸ¿â€â¤ï¸?â€ğŸ‘¨\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ¿â€â¤ï¸?â€ğŸ‘©\uD83C[\uDFFB-\uDFFF]|ğŸ‘©ğŸ¿â€ğŸ¤â€ğŸ‘¨\uD83C[\uDFFB-\uDFFE]|ğŸ‘©ğŸ¿â€ğŸ¤â€ğŸ‘©\uD83C[\uDFFB-\uDFFE]|ğŸ§‘ğŸ»â€â¤ï¸?â€ğŸ§‘\uD83C[\uDFFC-\uDFFF]|ğŸ§‘ğŸ»â€ğŸ¤â€ğŸ§‘\uD83C[\uDFFB-\uDFFF]|ğŸ§‘ğŸ¼â€â¤ï¸?â€ğŸ§‘\uD83C[\uDFFB\uDFFD-\uDFFF]|ğŸ§‘ğŸ¼â€ğŸ¤â€ğŸ§‘\uD83C[\uDFFB-\uDFFF]|ğŸ§‘ğŸ½â€â¤ï¸?â€ğŸ§‘\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|ğŸ§‘ğŸ½â€ğŸ¤â€ğŸ§‘\uD83C[\uDFFB-\uDFFF]|ğŸ§‘ğŸ¾â€â¤ï¸?â€ğŸ§‘\uD83C[\uDFFB-\uDFFD\uDFFF]|ğŸ§‘ğŸ¾â€ğŸ¤â€ğŸ§‘\uD83C[\uDFFB-\uDFFF]|ğŸ§‘ğŸ¿â€â¤ï¸?â€ğŸ§‘\uD83C[\uDFFB-\uDFFE]|ğŸ§‘ğŸ¿â€ğŸ¤â€ğŸ§‘\uD83C[\uDFFB-\uDFFF]|ğŸ‘¨â€â¤ï¸?â€ğŸ’‹â€ğŸ‘¨|ğŸ‘©â€â¤ï¸?â€ğŸ’‹â€\uD83D[\uDC68\uDC69]|ğŸ«±ğŸ»â€ğŸ«²\uD83C[\uDFFC-\uDFFF]|ğŸ«±ğŸ¼â€ğŸ«²\uD83C[\uDFFB\uDFFD-\uDFFF]|ğŸ«±ğŸ½â€ğŸ«²\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|ğŸ«±ğŸ¾â€ğŸ«²\uD83C[\uDFFB-\uDFFD\uDFFF]|ğŸ«±ğŸ¿â€ğŸ«²\uD83C[\uDFFB-\uDFFE]|ğŸ‘¨â€â¤ï¸?â€ğŸ‘¨|ğŸ‘©â€â¤ï¸?â€\uD83D[\uDC68\uDC69]|ğŸ§‘â€ğŸ¤â€ğŸ§‘|ğŸ‘«\uD83C[\uDFFB-\uDFFF]|ğŸ‘¬\uD83C[\uDFFB-\uDFFF]|ğŸ‘­\uD83C[\uDFFB-\uDFFF]|ğŸ’\uD83C[\uDFFB-\uDFFF]|ğŸ’‘\uD83C[\uDFFB-\uDFFF]|ğŸ¤\uD83C[\uDFFB-\uDFFF]|\uD83D[\uDC6B-\uDC6D\uDC8F\uDC91]|ğŸ¤)|(?:\uD83D[\uDC68\uDC69]|ğŸ§‘)(?:\uD83C[\uDFFB-\uDFFF])?â€(?:âš•ï¸?|âš–ï¸?|âœˆï¸?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C[\uDFCB\uDFCC]|\uD83D[\uDD74\uDD75]|â›¹)(?:(?:\uD83C[\uDFFB-\uDFFF]|ï¸?)â€[â™€â™‚]ï¸?)|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?â€[â™€â™‚]ï¸?|(?:ğŸ‘¨â€ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦|ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€\uD83D[\uDC66\uDC67]|ğŸ‘¨â€ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦|ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€\uD83D[\uDC66\uDC67]|ğŸ‘©â€ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦|ğŸ‘©â€ğŸ‘©â€ğŸ‘§â€\uD83D[\uDC66\uDC67]|ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦|ğŸ‘¨â€ğŸ‘§â€\uD83D[\uDC66\uDC67]|ğŸ‘¨â€ğŸ‘¨â€\uD83D[\uDC66\uDC67]|ğŸ‘¨â€ğŸ‘©â€\uD83D[\uDC66\uDC67]|ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦|ğŸ‘©â€ğŸ‘§â€\uD83D[\uDC66\uDC67]|ğŸ‘©â€ğŸ‘©â€\uD83D[\uDC66\uDC67]|ğŸ³ï¸?â€âš§ï¸?|ğŸ³ï¸?â€ğŸŒˆ|ğŸ˜¶â€ğŸŒ«ï¸?|â¤ï¸?â€ğŸ”¥|â¤ï¸?â€ğŸ©¹|ğŸ´â€â˜ ï¸?|ğŸ•â€ğŸ¦º|ğŸ»â€â„ï¸?|ğŸ‘â€ğŸ—¨|ğŸ‘¨â€\uD83D[\uDC66\uDC67]|ğŸ‘©â€\uD83D[\uDC66\uDC67]|ğŸ‘¯â€â™€ï¸?|ğŸ‘¯â€â™‚ï¸?|ğŸ˜®â€ğŸ’¨|ğŸ˜µâ€ğŸ’«|ğŸ¤¼â€â™€ï¸?|ğŸ¤¼â€â™‚ï¸?|ğŸ§â€â™€ï¸?|ğŸ§â€â™‚ï¸?|ğŸ§Ÿâ€â™€ï¸?|ğŸ§Ÿâ€â™‚ï¸?|ğŸˆâ€â¬›)|[#*0-9]ï¸??âƒ£|(?:[Â©Â®â„¢â™Ÿ]ï¸?)|(?:\uD83C[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE1A\uDE2F\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF3\uDFF5\uDFF7]|\uD83D[\uDC3F\uDC41\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]|[â€¼â‰â„¹â†”-â†™â†©â†ªâŒšâŒ›âŒ¨ââ­-â¯â±â²â¸-âºâ“‚â–ªâ–«â–¶â—€â—»-â—¾â˜€-â˜„â˜â˜‘â˜”â˜•â˜˜â˜ â˜¢â˜£â˜¦â˜ªâ˜®â˜¯â˜¸-â˜ºâ™€â™‚â™ˆ-â™“â™ â™£â™¥â™¦â™¨â™»â™¿âš’-âš—âš™âš›âšœâš âš¡âš§âšªâš«âš°âš±âš½âš¾â›„â›…â›ˆâ›â›‘â›“â›”â›©â›ªâ›°-â›µâ›¸â›ºâ›½âœ‚âœˆâœ‰âœâœ’âœ”âœ–âœâœ¡âœ³âœ´â„â‡â—â£â¤â¡â¤´â¤µâ¬…-â¬‡â¬›â¬œâ­â­•ã€°ã€½ãŠ—ãŠ™])(?:ï¸?|(?!ï¸))|(?:(?:\uD83C[\uDFCB\uDFCC]|\uD83D[\uDD74\uDD75\uDD90]|[â˜â›·â›¹âœŒâœ])(?:ï¸?|(?!ï¸))|(?:\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD7A\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD\uDEC3-\uDEC5\uDEF0-\uDEF6]|[âœŠâœ‹]))(?:\uD83C[\uDFFB-\uDFFF])?|(?:ğŸ´ó §ó ¢ó ¥ó ®ó §ó ¿|ğŸ´ó §ó ¢ó ³ó £ó ´ó ¿|ğŸ´ó §ó ¢ó ·ó ¬ó ³ó ¿|ğŸ‡¦\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|ğŸ‡§\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|ğŸ‡¨\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|ğŸ‡©\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|ğŸ‡ª\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|ğŸ‡«\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|ğŸ‡¬\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|ğŸ‡­\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|ğŸ‡®\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|ğŸ‡¯\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|ğŸ‡°\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|ğŸ‡±\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|ğŸ‡²\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|ğŸ‡³\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|ğŸ‡´ğŸ‡²|ğŸ‡µ\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|ğŸ‡¶ğŸ‡¦|ğŸ‡·\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|ğŸ‡¸\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|ğŸ‡¹\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|ğŸ‡º\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|ğŸ‡»\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|ğŸ‡¼\uD83C[\uDDEB\uDDF8]|ğŸ‡½ğŸ‡°|ğŸ‡¾\uD83C[\uDDEA\uDDF9]|ğŸ‡¿\uD83C[\uDDE6\uDDF2\uDDFC]|\uD83C[\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC6F\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDD-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3C\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDDE-\uDDFF\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC2\uDED0-\uDED9\uDEE0-\uDEE7]|[â©-â¬â°â³â™¾â›âœ…âœ¨âŒââ“-â•â•-â—â°â¿î”Š])|ï¸)",Ge="a-z\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u00ff\\u0100-\\u024f\\u0253\\u0254\\u0256\\u0257\\u0259\\u025b\\u0263\\u0268\\u026f\\u0272\\u0289\\u028b\\u02bb\\u0300-\\u036f\\u1e00-\\u1eff\\u0400-\\u04ff\\u0500-\\u0527\\u2de0-\\u2dff\\ua640-\\ua69f\\u0591-\\u05bf\\u05c1-\\u05c2\\u05c4-\\u05c5\\u05c7\\u05d0-\\u05ea\\u05f0-\\u05f4\\ufb1d-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40-\\ufb41\\ufb43-\\ufb44\\ufb46-\\ufb4f\\u0610-\\u061a\\u0620-\\u065f\\u066e-\\u06d3\\u06d5-\\u06dc\\u06de-\\u06e8\\u06ea-\\u06ef\\u06fa-\\u06fc\\u06ff\\u0750-\\u077f\\u08a0\\u08a2-\\u08ac\\u08e4-\\u08fe\\ufb50-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\u200c\\u0e01-\\u0e3a\\u0e40-\\u0e4e\\u1100-\\u11ff\\u3130-\\u3185\\uA960-\\uA97F\\uAC00-\\uD7AF\\uD7B0-\\uD7FF\\u3003\\u3005\\u303b\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uff9f\\uffa1-\\uffdc",fo="0-9_"+Ge,yr="Â·",it="["+Ge+"0-9]",go="((?:https?|ftp)://|mailto:)?",mo=go+"(?:"+it+"{1,64}(?::"+it+"{0,64})?@)?(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])(?:\\.(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])){3}|"+it+"["+Ge+yr+"0-9-]{0,64}(?:\\."+it+"["+Ge+yr+"0-9-]{0,64}){0,10}(?:\\.(xn--[0-9a-z]{2,16}|["+Ge+`]{2,24})))(?::\\d{2,5})?(?:/(?:\\S{0,255}[^\\s.;,(\\[\\]{}<>"'])?)?`,Cn="[a-zA-Z\\d_]{5,32}",po="(?:\\s|^)((?:(\\d{1,2}):(?:[0-5]?[0-9])|(?:\\d{1,2}|\\d{3,})):(?:[0-5][0-9]))(?:\\s|$)",Do="\\/([a-zA-Z\\d_]{1,32})(?:@("+Cn+"))?(\\b|$)",cl=new RegExp("(^| )(@)("+Cn+")|("+mo+")|(\\n)|("+ho+")|(^|[\\s\\(\\]])(#["+fo+"]{2,64})|(^|\\s)"+Do+"|"+po,"i"),ll=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,hl=/(^|\s|\n)(````?)([\s\S]+?)(````?)([\s\n\.,:?!;]|$)|(^|\s|\x01)(`|~~|\*\*|__|_-_|\|\|)([^\n]+?)\7([\x01\s\.,:?!;]|$)|@(\d+)\s*\((.+?)\)|(\[(.+?)\]\((.+?)\))/m,dl={Telegram:"tg://search_hashtag?hashtag={1}",Twitter:"https://twitter.com/hashtag/{1}",Instagram:"https://instagram.com/explore/tags/{1}/","Google Plus":"https://plus.google.com/explore/{1}"},Ts={"`":"messageEntityCode","``":"messageEntityPre","**":"messageEntityBold",__:"messageEntityItalic","~~":"messageEntityStrike","_-_":"messageEntityUnderline","||":"messageEntitySpoiler"};new Set(Object.values(Ts));const _n=new Set(["messageEntityEmoji","messageEntityLinebreak","messageEntityCaret"]),fl=new Set(_n);for(const t in Ts)_n.add(Ts[t]);const vo=/^\+\d+$/;function Pn(t,e){wn(t)||(t="https://"+t);const s={url:t};let r,n,i;if(r=t.match(/^(?:https?:\/\/)?(?:(.+?)\.)?(?:(?:web|k|z|a)\.)?t(?:elegram)?\.me(?:\/(.+))?/)){const o=new URL(t);let a=r[1];a&&Yi.has(r[1])&&(a=void 0),a&&(o.pathname=a+(o.pathname==="/"?"":o.pathname));const u=o.pathname.slice(1),c=u.split("/");if(c[0]&&c[0][0]==="$"&&c[0].length>1)i="invoice";else if(/^\+/.test(u)&&!vo.test(u))i="joinchat";else if(c[0])switch(c[0]){case"m":case"addlist":case"joinchat":case"addstickers":case"addemoji":case"voicechat":case"invoice":case"boost":case"giftcode":if(c.length!==1&&!a){i=c[0];break}default:if(c.length<=2||c[1]?.match(/^\d+(?:\?(?:comment|thread)=\d+)?$/)||c[1]==="s"){i="im";break}break}}else t.match(/^(?:https?:\/\/)?telesco\.pe\/([^/?]+)\/(\d+)/)?i="im":(n=t.match(/tg:(?:\/\/)?(.+?)(?:\?|$)/))&&(i="tg_"+n[1]);return window[i]||(i=void 0),s.onclick=i,s}k&&(k.wrapUrl=Pn);function gl(t,e){kn(t),e===void 0?t.replaceChildren():typeof e=="string"?e?t.textContent=e:t.replaceChildren():t.replaceChildren(e)}function kn(t){t.setAttribute("dir","auto")}function ml(){return"auto"}function Eo(t){return t.target="_blank",t.rel="noopener noreferrer",t}const pl={context:void 0,registry:void 0},Fo=(t,e)=>t===e,Q=Symbol("solid-proxy"),Ls=Symbol("solid-track"),At={equals:Fo};let Tn=On;const ce=1,bt=2,Ln={owned:null,cleanups:null,context:null,owner:null},Zt={};var R=null;let Qt=null,yo=null,I=null,W=null,ae=null,It=0;function dt(t,e){const s=I,r=R,n=t.length===0,i=e===void 0?r:e,o=n?Ln:{owned:null,cleanups:null,context:i?i.context:null,owner:i},a=n?t:()=>t(()=>J(()=>xt(o)));R=o,I=null;try{return se(a,!0)}finally{I=s,R=r}}function oe(t,e){e=e?Object.assign({},At,e):At;const s={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},r=n=>(typeof n=="function"&&(n=n(s.value)),Rn(s,n));return[Mn.bind(s),r]}function Ar(t,e,s){const r=st(t,e,!0,ce);be(r)}function Ao(t,e,s){const r=st(t,e,!1,ce);be(r)}function bo(t,e,s){Tn=Ro;const r=st(t,e,!1,ce);(!s||!s.render)&&(r.user=!0),ae?ae.push(r):be(r)}function Dl(t,e){let s;const r=st(()=>{s?s():J(t),s=void 0},void 0,!1,0);return r.user=!0,n=>{s=n,be(r)}}function de(t,e,s){s=s?Object.assign({},At,s):At;const r=st(t,e,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=s.equals||void 0,be(r),Mn.bind(r)}function So(t){return t&&typeof t=="object"&&"then"in t}function vl(t,e,s){let r,n,i;arguments.length===2&&typeof e=="object"||arguments.length===1?(r=!0,n=t,i=e||{}):(r=t,n=e,i={});let o=null,a=Zt,u=!1,c="initialValue"in i,l=typeof r=="function"&&de(r);const h=new Set,[f,g]=(i.storage||oe)(i.initialValue),[E,C]=oe(void 0),[m,F]=oe(void 0,{equals:!1}),[S,P]=oe(c?"ready":"unresolved");function p(_,b,d,D){return o===_&&(o=null,D!==void 0&&(c=!0),(_===a||b===a)&&i.onHydrated&&queueMicrotask(()=>i.onHydrated(D,{value:b})),a=Zt,T(b,d)),b}function T(_,b){se(()=>{b===void 0&&g(()=>_),P(b!==void 0?"errored":c?"ready":"unresolved"),C(b);for(const d of h.keys())d.decrement();h.clear()},!1)}function A(){const _=To,b=f(),d=E();if(d!==void 0&&!o)throw d;return I&&!I.user&&_&&Ar(()=>{m(),o&&(_.resolved||h.has(_)||(_.increment(),h.add(_)))}),b}function L(_=!0){if(_!==!1&&u)return;u=!1;const b=l?l():r;if(b==null||b===!1){p(o,J(f));return}const d=a!==Zt?a:J(()=>n(b,{value:f(),refetching:_}));return So(d)?(o=d,"value"in d?(d.status==="success"?p(o,d.value,void 0,b):p(o,void 0,void 0,b),d):(u=!0,queueMicrotask(()=>u=!1),se(()=>{P(c?"refreshing":"pending"),F()},!1),d.then(D=>p(d,D,void 0,b),D=>p(d,void 0,xn(D),b)))):(p(o,d,void 0,b),d)}return Object.defineProperties(A,{state:{get:()=>S()},error:{get:()=>E()},loading:{get(){const _=S();return _==="pending"||_==="refreshing"}},latest:{get(){if(!c)return A();const _=E();if(_&&!o)throw _;return f()}}}),l?Ar(()=>L(!1)):L(!1),[A,{refetch:L,mutate:g}]}function wo(t){return se(t,!1)}function J(t){if(I===null)return t();const e=I;I=null;try{return t()}finally{I=e}}function El(t,e,s){const r=Array.isArray(t);let n,i=s&&s.defer;return o=>{let a;if(r){a=Array(t.length);for(let c=0;c<t.length;c++)a[c]=t[c]()}else a=t();if(i)return i=!1,o;const u=J(()=>e(a,n,o));return n=a,u}}function Fl(t){bo(()=>J(t))}function Co(t){return R===null||(R.cleanups===null?R.cleanups=[t]:R.cleanups.push(t)),t}function Ms(){return I}function yl(){return R}function Al(t,e){const s=R,r=I;R=t,I=null;try{return se(e,!0)}catch(n){Qs(n)}finally{R=s,I=r}}function _o(t){const e=I,s=R;return Promise.resolve().then(()=>{I=e,R=s;let r;return se(t,!1),I=R=null,r?r.done:void 0})}const[Po,bl]=oe(!1);function Sl(){return[Po,_o]}function wl(t,e){const s=Symbol("context");return{id:s,Provider:Oo(s),defaultValue:t}}function Cl(t){return R&&R.context&&R.context[t.id]!==void 0?R.context[t.id]:t.defaultValue}function ko(t){const e=de(t),s=de(()=>Rs(e()));return s.toArray=()=>{const r=s();return Array.isArray(r)?r:r!=null?[r]:[]},s}let To;function Mn(){if(this.sources&&this.state)if(this.state===ce)be(this);else{const t=W;W=null,se(()=>wt(this),!1),W=t}if(I){const t=this.observers?this.observers.length:0;I.sources?(I.sources.push(this),I.sourceSlots.push(t)):(I.sources=[this],I.sourceSlots=[t]),this.observers?(this.observers.push(I),this.observerSlots.push(I.sources.length-1)):(this.observers=[I],this.observerSlots=[I.sources.length-1])}return this.value}function Rn(t,e,s){let r=t.value;return(!t.comparator||!t.comparator(r,e))&&(t.value=e,t.observers&&t.observers.length&&se(()=>{for(let n=0;n<t.observers.length;n+=1){const i=t.observers[n],o=Qt&&Qt.running;o&&Qt.disposed.has(i),(o?!i.tState:!i.state)&&(i.pure?W.push(i):ae.push(i),i.observers&&In(i)),o||(i.state=ce)}if(W.length>1e6)throw W=[],new Error},!1)),e}function be(t){if(!t.fn)return;xt(t);const e=It;Lo(t,t.value,e)}function Lo(t,e,s){let r;const n=R,i=I;I=R=t;try{r=t.fn(e)}catch(o){return t.pure&&(t.state=ce,t.owned&&t.owned.forEach(xt),t.owned=null),t.updatedAt=s+1,Qs(o)}finally{I=i,R=n}(!t.updatedAt||t.updatedAt<=s)&&(t.updatedAt!=null&&"observers"in t?Rn(t,r):t.value=r,t.updatedAt=s)}function st(t,e,s,r=ce,n){const i={fn:t,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:R,context:R?R.context:null,pure:s};return R===null||R!==Ln&&(R.owned?R.owned.push(i):R.owned=[i]),i}function St(t){if(t.state===0)return;if(t.state===bt)return wt(t);if(t.suspense&&J(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<It);)t.state&&e.push(t);for(let s=e.length-1;s>=0;s--)if(t=e[s],t.state===ce)be(t);else if(t.state===bt){const r=W;W=null,se(()=>wt(t,e[0]),!1),W=r}}function se(t,e){if(W)return t();let s=!1;e||(W=[]),ae?s=!0:ae=[],It++;try{const r=t();return Mo(s),r}catch(r){s||(ae=null),W=null,Qs(r)}}function Mo(t){if(W&&(On(W),W=null),t)return;const e=ae;ae=null,e.length&&se(()=>Tn(e),!1)}function On(t){for(let e=0;e<t.length;e++)St(t[e])}function Ro(t){let e,s=0;for(e=0;e<t.length;e++){const r=t[e];r.user?t[s++]=r:St(r)}for(e=0;e<s;e++)St(t[e])}function wt(t,e){t.state=0;for(let s=0;s<t.sources.length;s+=1){const r=t.sources[s];if(r.sources){const n=r.state;n===ce?r!==e&&(!r.updatedAt||r.updatedAt<It)&&St(r):n===bt&&wt(r,e)}}}function In(t){for(let e=0;e<t.observers.length;e+=1){const s=t.observers[e];s.state||(s.state=bt,s.pure?W.push(s):ae.push(s),s.observers&&In(s))}}function xt(t){let e;if(t.sources)for(;t.sources.length;){const s=t.sources.pop(),r=t.sourceSlots.pop(),n=s.observers;if(n&&n.length){const i=n.pop(),o=s.observerSlots.pop();r<n.length&&(i.sourceSlots[o]=r,n[r]=i,s.observerSlots[r]=o)}}if(t.owned){for(e=t.owned.length-1;e>=0;e--)xt(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0}function xn(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function Qs(t,e=R){const s=xn(t);{console.error("solid error",s);return}}function Rs(t){if(typeof t=="function"&&!t.length)return Rs(t());if(Array.isArray(t)){const e=[];for(let s=0;s<t.length;s++){const r=Rs(t[s]);Array.isArray(r)?e.push.apply(e,r):e.push(r)}return e}return t}function Oo(t,e){return function(r){let n;return Ao(()=>n=J(()=>(R.context={...R.context,[t]:r.value},ko(()=>r.children))),void 0),n}}const Io=Symbol("fallback");function br(t){for(let e=0;e<t.length;e++)t[e]()}function xo(t,e,s={}){let r=[],n=[],i=[],o=0,a=e.length>1?[]:null;return Co(()=>br(i)),()=>{let u=t()||[],c,l;return u[Ls],J(()=>{let f=u.length,g,E,C,m,F,S,P,p,T;if(f===0)o!==0&&(br(i),i=[],r=[],n=[],o=0,a&&(a=[])),s.fallback&&(r=[Io],n[0]=dt(A=>(i[0]=A,s.fallback())),o=1);else if(o===0){for(n=new Array(f),l=0;l<f;l++)r[l]=u[l],n[l]=dt(h);o=f}else{for(C=new Array(f),m=new Array(f),a&&(F=new Array(f)),S=0,P=Math.min(o,f);S<P&&r[S]===u[S];S++);for(P=o-1,p=f-1;P>=S&&p>=S&&r[P]===u[p];P--,p--)C[p]=n[P],m[p]=i[P],a&&(F[p]=a[P]);for(g=new Map,E=new Array(p+1),l=p;l>=S;l--)T=u[l],c=g.get(T),E[l]=c===void 0?-1:c,g.set(T,l);for(c=S;c<=P;c++)T=r[c],l=g.get(T),l!==void 0&&l!==-1?(C[l]=n[c],m[l]=i[c],a&&(F[l]=a[c]),l=E[l],g.set(T,l)):i[c]();for(l=S;l<f;l++)l in C?(n[l]=C[l],i[l]=m[l],a&&(a[l]=F[l],a[l](l))):n[l]=dt(h);n=n.slice(0,o=f),r=u.slice(0)}return n});function h(f){if(i[l]=f,a){const[g,E]=oe(l);return a[l]=E,e(u[l],g)}return e(u[l])}}}function _l(t,e){return J(()=>t(e||{}))}function ot(){return!0}const Os={get(t,e,s){return e===Q?s:t.get(e)},has(t,e){return e===Q?!0:t.has(e)},set:ot,deleteProperty:ot,getOwnPropertyDescriptor(t,e){return{configurable:!0,enumerable:!0,get(){return t.get(e)},set:ot,deleteProperty:ot}},ownKeys(t){return t.keys()}};function es(t){return(t=typeof t=="function"?t():t)?t:{}}function Bo(){for(let t=0,e=this.length;t<e;++t){const s=this[t]();if(s!==void 0)return s}}function Pl(...t){let e=!1;for(let o=0;o<t.length;o++){const a=t[o];e=e||!!a&&Q in a,t[o]=typeof a=="function"?(e=!0,de(a)):a}if(e)return new Proxy({get(o){for(let a=t.length-1;a>=0;a--){const u=es(t[a])[o];if(u!==void 0)return u}},has(o){for(let a=t.length-1;a>=0;a--)if(o in es(t[a]))return!0;return!1},keys(){const o=[];for(let a=0;a<t.length;a++)o.push(...Object.keys(es(t[a])));return[...new Set(o)]}},Os);const s={},r=Object.create(null);for(let o=t.length-1;o>=0;o--){const a=t[o];if(!a)continue;const u=Object.getOwnPropertyNames(a);for(let c=u.length-1;c>=0;c--){const l=u[c];if(l==="__proto__"||l==="constructor")continue;const h=Object.getOwnPropertyDescriptor(a,l);if(!r[l])r[l]=h.get?{enumerable:!0,configurable:!0,get:Bo.bind(s[l]=[h.get.bind(a)])}:h.value!==void 0?h:void 0;else{const f=s[l];f&&(h.get?f.push(h.get.bind(a)):h.value!==void 0&&f.push(()=>h.value))}}}const n={},i=Object.keys(r);for(let o=i.length-1;o>=0;o--){const a=i[o],u=r[a];u&&u.get?Object.defineProperty(n,a,u):n[a]=u?u.value:void 0}return n}function kl(t,...e){if(Q in t){const n=new Set(e.length>1?e.flat():e[0]),i=e.map(o=>new Proxy({get(a){return o.includes(a)?t[a]:void 0},has(a){return o.includes(a)&&a in t},keys(){return o.filter(a=>a in t)}},Os));return i.push(new Proxy({get(o){return n.has(o)?void 0:t[o]},has(o){return n.has(o)?!1:o in t},keys(){return Object.keys(t).filter(o=>!n.has(o))}},Os)),i}const s={},r=e.map(()=>({}));for(const n of Object.getOwnPropertyNames(t)){const i=Object.getOwnPropertyDescriptor(t,n),o=!i.get&&!i.set&&i.enumerable&&i.writable&&i.configurable;let a=!1,u=0;for(const c of e)c.includes(n)&&(a=!0,o?r[u][n]=i.value:Object.defineProperty(r[u],n,i)),++u;a||(o?s[n]=i.value:Object.defineProperty(s,n,i))}return[...r,s]}const No=t=>`Stale read from <${t}>.`;function Tl(t){const e="fallback"in t&&{fallback:()=>t.fallback};return de(xo(()=>t.each,t.children,e||void 0))}function Ll(t){const e=t.keyed,s=de(()=>t.when,void 0,{equals:(r,n)=>e?r===n:!r==!n});return de(()=>{const r=s();if(r){const n=t.children;return typeof n=="function"&&n.length>0?J(()=>n(e?r:()=>{if(!J(s))throw No("Show");return t.when})):n}return t.fallback},void 0,void 0)}const Ml={messageActionChatCreate:"ActionCreateGroup",messageActionChatCreateYou:"ActionYouCreateGroup",messageActionChatEditTitle:"ActionChangedTitle",messageActionChatEditPhoto:"ActionChangedPhoto",messageActionChatEditVideo:"ActionChangedVideo",messageActionChatDeletePhoto:"ActionRemovedPhoto",messageActionChatReturn:"ActionAddUserSelf",messageActionChatReturnYou:"ActionAddUserSelfYou",messageActionChatJoined:"ActionAddUserSelfMega",messageActionChatJoinedYou:"ChannelMegaJoined",messageActionChatAddUser:"ActionAddUser",messageActionChatAddUsers:"ActionAddUser",messageActionChatLeave:"ActionLeftUser",messageActionChatLeaveYou:"YouLeft",messageActionChatDeleteUser:"ActionKickUser",messageActionChatJoinedByLink:"ActionInviteUser",messageActionPinMessage:"Chat.Service.Group.UpdatedPinnedMessage",messageActionContactSignUp:"Chat.Service.PeerJoinedTelegram",messageActionChannelCreate:"ActionCreateChannel",messageActionChannelEditTitle:"Chat.Service.Channel.UpdatedTitle",messageActionChannelEditPhoto:"Chat.Service.Channel.UpdatedPhoto",messageActionChannelEditVideo:"Chat.Service.Channel.UpdatedVideo",messageActionChannelDeletePhoto:"Chat.Service.Channel.RemovedPhoto",messageActionHistoryClear:"HistoryCleared",messageActionDiscussionStarted:"DiscussionStarted",messageActionChannelJoined:"ChannelJoined",messageActionChannelMigrateFrom:"ActionMigrateFromGroup","messageActionPhoneCall.video_in_ok":"ChatList.Service.VideoCall.incoming","messageActionPhoneCall.video_out_ok":"ChatList.Service.VideoCall.outgoing","messageActionPhoneCall.video_missed":"ChatList.Service.VideoCall.Missed","messageActionPhoneCall.video_cancelled":"ChatList.Service.VideoCall.Cancelled","messageActionPhoneCall.in_ok":"ChatList.Service.Call.incoming","messageActionPhoneCall.out_ok":"ChatList.Service.Call.outgoing","messageActionPhoneCall.missed":"ChatList.Service.Call.Missed","messageActionPhoneCall.cancelled":"ChatList.Service.Call.Cancelled","messageActionGroupCall.started":"Chat.Service.VoiceChatStarted.Channel","messageActionGroupCall.started_by":"Chat.Service.VoiceChatStarted","messageActionGroupCall.started_byYou":"Chat.Service.VoiceChatStartedYou","messageActionGroupCall.ended":"Chat.Service.VoiceChatFinished.Channel","messageActionGroupCall.ended_by":"Chat.Service.VoiceChatFinished","messageActionGroupCall.ended_byYou":"Chat.Service.VoiceChatFinishedYou",messageActionBotAllowed:"Chat.Service.BotPermissionAllowed"},Rl=ue?"Message.Unsupported.Mobile":"Message.Unsupported.Desktop";var fe;(t=>{t.strings=new Map,t.countriesList=[];let e,s;t.requestedServerLanguage=!1,t.isRTL=!1,[t.langCodeNormalized,t.setLangCodeNormalized]=oe();function r(d){t.isRTL=d}t.setRTL=r;function n(d){t.lastRequestedLangCode=d,t.lastRequestedNormalizedLangCode=d.split("-")[0],(0,t.setLangCodeNormalized)(t.lastRequestedNormalizedLangCode.split("-")[0])}function i(){return s||(s=Promise.all([Re.get("langPack"),t.polyfillPromise]).then(([d])=>d?(t.lastRequestedLangCode||n(d.lang_code),E(d),d):u()).finally(()=>{s=void 0}))}t.getCacheLangPack=i;function o(){if(t.timeFormat==="h12")try{const d=T({hour:"numeric",minute:"numeric",hour12:!0}),D=new Date;D.setHours(0);const y=d.format(D);t.amPmCache.am=y.split(/\s/)[1],D.setHours(12);const v=d.format(D);t.amPmCache.pm=v.split(/\s/)[1]}catch(d){console.error("cannot get am/pm",d),t.amPmCache={am:"AM",pm:"PM"}}}function a(d,D=!!t.timeFormat&&t.timeFormat!==d){t.timeFormat=d,o(),D&&(p.clear(),Array.from(document.querySelectorAll(".i18n")).forEach(v=>{const M=t.weakMap.get(v);M instanceof A&&M.update()}))}t.setTimeFormat=a;function u(){const d=B.langPackCode;return n(d),Promise.all([$(()=>import("./lang-CNYDDQNH.js"),[],import.meta.url),$(()=>import("./langSign-CN-ja8rh.js"),[],import.meta.url),$(()=>import("./countries-CzeCvYH8.js"),[],import.meta.url)]).then(([D,y,v])=>{const M=[];h(D.default,M),h(y.default,M);const z={_:"langPackDifference",from_version:0,lang_code:d,strings:M,version:0,local:!0,countries:v.default};return g(z)})}t.loadLocalLangPack=u;function c(d,D){D=!0,t.requestedServerLanguage=!0;const y=w.managers;return Promise.all([y.apiManager.invokeApiCacheable("langpack.getLangPack",{lang_code:d,lang_pack:D?"web":B.langPack}),!D&&y.apiManager.invokeApiCacheable("langpack.getLangPack",{lang_code:d,lang_pack:"android"}),$(()=>import("./lang-CNYDDQNH.js"),[],import.meta.url),$(()=>import("./langSign-CN-ja8rh.js"),[],import.meta.url),y.apiManager.invokeApiCacheable("help.getCountriesList",{lang_code:d,hash:0}),t.polyfillPromise])}t.loadLangPack=c;function l(d,D){return w.managers.apiManager.invokeApi("langpack.getStrings",{lang_pack:B.langPack,lang_code:d,keys:D})}t.getStrings=l;function h(d,D=[]){for(const y in d){const v=d[y];typeof v=="string"?D.push({_:"langPackString",key:y,value:v}):D.push({_:"langPackStringPluralized",key:y,...v})}return D}t.formatLocalStrings=h;function f(d,D){return n(d),c(d,D).then(([y,v,M,z,N,me])=>{let we=[];return[M,z].forEach(jt=>{h(jt.default,we)}),we=we.concat(...[y.strings,v.strings].filter(Boolean)),y.strings=we,y.countries=N,g(y)})}t.getLangPack=f;function g(d){return d.appVersion=B.langPackVersion,Re.set({langPack:d}).then(()=>(E(d),d))}t.saveLangPack=g,t.polyfillPromise=function(){return typeof Intl<"u"&&typeof Intl.PluralRules<"u"?Promise.resolve():$(()=>import("./pluralPolyfill-B0qpVVRH.js"),[],import.meta.url).then(D=>{window.Intl=Object.assign(typeof Intl<"u"?Intl:{},D.default)})}();function E(d){const D=t.lastRequestedLangCode;if(d.lang_code!==D)return;try{e=new Intl.PluralRules(t.lastRequestedNormalizedLangCode)}catch(v){console.error("pluralRules error",v),e=new Intl.PluralRules(t.lastRequestedNormalizedLangCode.split("-",1)[0])}try{e=new Intl.PluralRules(d.lang_code)}catch(v){console.error("pluralRules error",v),e=new Intl.PluralRules(d.lang_code.split("-",1)[0])}t.strings.clear();for(const v of d.strings)t.strings.set(v.key,v);d.countries&&(t.countriesList.length=0,t.countriesList.push(...d.countries.countries),d.countries.countries.forEach(v=>{if(v.name){const M=v.default_name;t.strings.set(M,{_:"langPackString",key:M,value:v.name})}})),t.lastAppliedLangCode!==D&&(t.lastAppliedLangCode&&w.myId&&(w.managers.appReactionsManager.resetAvailableReactions(),w.managers.appUsersManager.indexMyself(),w.managers.dialogsStorage.indexMyDialog()),t.lastAppliedLangCode=D,p.clear(),o(),w.dispatchEvent("language_change",D)),Array.from(document.querySelectorAll(".i18n")).forEach(v=>{const M=t.weakMap.get(v);M&&M.update()})}t.applyLangPack=E;function C(d,D,y,v){const M=D[v===void 0?y.i++:v];Array.isArray(M)?d.push(...M):d.push(M)}function m(d,D,y){if(!y){y={i:0};const N=d.match(/(%|un)\d+/g);N?.length&&(y.i=Math.max(...N.map(me=>+me.replace(/\D/g,""))))}const v=[],M=/(\*\*|__)(.+?)\1|(\n)|(\[.+?\]\(.*?\))|un\d|%\d\$.|%\S/g;let z=0;return d.replace(M,(N,me,we,jt,Ne,$t,Mi)=>{if($t>z&&v.push(Mi.slice(z,$t)),me){let X;switch(me){case"**":{X=document.createElement("b");break}case"__":{X=document.createElement("i");break}}X.append(...m(we,D,y)),v.push(X)}else if(jt)v.push(document.createElement("br"));else if(Ne){const X=Ne.lastIndexOf("]"),Ri=Ne.slice(1,X),Ht=Ne.slice(X+2,Ne.length-1);let V;if(Ht&&wn(Ht)){V=document.createElement("a");const Vt=Pn(Ht);V.href=Vt.url,Vt.onclick&&V.setAttribute("onclick",Vt.onclick+"(this)"),Eo(V)}else V=D[y.i++],V instanceof DocumentFragment&&(V=V.firstChild),typeof V!="string"&&(V.textContent="");const gr=m(Ri,D,y);typeof V=="string"?v.push(...gr):(V.append(...gr),v.push(V))}else if(D){const X=N.replace(/\D/g,"");C(v,D,y,!X||Number.isNaN(+X)?void 0:Math.min(D.length-1,+X-1))}return z=$t+N.length,""}),z!==d.length&&v.push(d.slice(z)),v}t.superFormatter=m;function F(d,D=!1,y){const v=t.strings.get(d);let M;if(v)if(v._==="langPackStringPluralized"&&y?.length){let N=y[0];typeof N=="string"&&(N=+N.replace(/\D/g,""));const me=e.select(N);M=v[me+"_value"]||v.other_value}else v._==="langPackString"?M=v.value:M=d;else M=d;const z=m(M,y);return D?z.map(N=>N instanceof Node?N.textContent:N).join(""):z}t.format=F,t.weakMap=new WeakMap;class S{constructor(D){this.element=D?.element||document.createElement("span"),this.element.classList.add("i18n"),this.property=D?.property,t.weakMap.set(this.element,this)}}class P extends S{constructor(D={}){super({...D,property:D.property??"innerHTML"}),D?.key&&this.update(D)}update(D){if(Ps(this,D),this.property==="innerHTML")this.element.replaceChildren(...F(this.key,!1,this.args)),this.args?.length&&this.element.normalize();else{const y=this.element[this.property],v=F(this.key,!0,this.args);y===void 0?this.element.dataset[this.property]=v:this.element[this.property]=v}}compareAndUpdate(D){if(!(this.key===D.key&&Sn(this.args,D.args)))return this.update(D)}}t.IntlElement=P;const p=new Map;function T(d={}){const D=JSON.stringify(d);let y=p.get(D);return y||(y=new Intl.DateTimeFormat(t.lastRequestedNormalizedLangCode+"-u-hc-"+t.timeFormat,d),p.set(D,y)),y}t.getDateTimeFormat=T,t.amPmCache={am:"AM",pm:"PM"};class A extends S{constructor(D){super({...D,property:D.property??"textContent"}),kn(this.element),D?.date&&this.update(D)}update(D){Ps(this,D);let y;if(this.options.hour&&this.options.minute&&Object.keys(this.options).length===2){const v=this.date.getHours();y=("0"+(t.timeFormat==="h12"?v%12||12:v)).slice(-2)+":"+("0"+this.date.getMinutes()).slice(-2),t.timeFormat==="h12"&&(y+=" "+(v<12?t.amPmCache.am:t.amPmCache.pm))}else{const v=T(this.options);y=Ot(v.format(this.date))}this.element[this.property]=y}}t.IntlDateElement=A;function L(d,D){return new P({key:d,args:D}).element}t.i18n=L;function _(d){return new P(d).element}t.i18n_=_;function b(d,D,y,v){return new P({element:d,key:D,args:y,property:v}).element}t._i18n=b})(fe||(fe={}));const U=fe,Ke=fe.i18n,Ol=fe.i18n_,Il=fe._i18n;function Uo(t,e){const s=t.slice(0,1);for(let r=1;r<t.length;++r){const n=t.length-1===r;s.push(typeof e=="function"?e(n):e),s.push(t[r])}return s}function xl(t,e=!0,s){const r=Uo(t,n=>{const i=n&&e?"AutoDownloadSettings.LastDelimeter":"AutoDownloadSettings.Delimeter";return s?fe.format(i,!0):Ke(i)});return s?r.join(""):r}k&&(k.I18n=fe);function Wo(t){return+t<0}function jo(t){return+t>=0}String.prototype.toUserId=function(){return(+this).toUserId()};String.prototype.toChatId=function(){return(+this).toChatId()};String.prototype.toPeerId=function(t){return(+this).toPeerId(t)};String.prototype.isPeerId=function(){return/^[\d-]/.test(this.toString())};Number.prototype.toUserId=function(){return+this};Number.prototype.toChatId=function(){return Math.abs(this)};Number.prototype.toPeerId=function(t){return t===void 0?+this:t?-Math.abs(this):+this};Number.prototype.isPeerId=function(){return!0};[["isUser",jo],["isAnyChat",Wo]].forEach(t=>{const e=Array.isArray(t)?t[0]:t,s=Array.isArray(t)?t[1]:t;String.prototype[e]=function(){return s.call(null,this.toString())},Number.prototype[e]=function(){return s.call(null,+this)}});function $o(...t){const e=t.reduce((n,i)=>n+(i.byteLength||i.length),0),s=new Uint8Array(e);let r=0;return t.forEach(n=>{s.set(n instanceof ArrayBuffer?new Uint8Array(n):n,r),r+=n.byteLength||n.length}),s}Uint8Array.prototype.concat=function(...t){return $o(this,...t)};Uint8Array.prototype.toJSON=function(){return[...this]};Promise.prototype.finally=Promise.prototype.finally||function(t){const e=s=>Promise.resolve(t()).then(s);return this.then(s=>e(()=>s),s=>e(()=>Promise.reject(s)))};class Ho{constructor(){this.convertPromises={}}init(){this.worker=new Worker(new URL(""+new URL("webp.worker-CJXTr_cK.js",import.meta.url).href,import.meta.url),{type:"module"}),this.worker.addEventListener("message",e=>{const r=e.data.payload,n=this.convertPromises[r.fileName];n&&(r.bytes?n.resolve(r.bytes):n.reject(),delete this.convertPromises[r.fileName])})}postMessage(e){this.init&&(this.init(),this.init=null),this.worker.postMessage(e)}convert(e,s){if(this.convertPromises.hasOwnProperty(e))return this.convertPromises[e];const r=ie();return this.postMessage({type:"convertWebp",payload:{fileName:e,bytes:s}}),this.convertPromises[e]=r}}const Bn=new Ho;k.webpWorkerController=Bn;class Vo{constructor(){this.prefix="",this.cache={},this.useStorage=!0,G.test&&(this.prefix="t_")}get(e,s=!0){if(this.cache.hasOwnProperty(e)&&s)return this.cache[e];if(this.useStorage){let r;try{r=localStorage.getItem(this.prefix+e)}catch{throw this.useStorage=!1,ve("STORAGE_OFFLINE")}if(r!==null)try{r=JSON.parse(r)}catch{}else r=void 0;return r}else throw ve("STORAGE_OFFLINE")}set(e,s=!1){let r;for(const n in e)if(e.hasOwnProperty(n)){const i=e[n];if(this.cache[n]=i,!s)try{if(!this.useStorage)throw ve("STORAGE_OFFLINE");const o=JSON.stringify(i);localStorage.setItem(this.prefix+n,o)}catch(o){this.useStorage=!1,r=o}}if(r)throw r}delete(e,s=!1){e=""+e,s||delete this.cache[e];try{localStorage.removeItem(this.prefix+e)}catch{}}clear(){const e=["dc","server_time_offset","xt_instance","user_auth","state_id","k_build"];for(let s=1;s<=5;++s)e.push(`dc${s}_server_salt`),e.push(`dc${s}_auth_key`),e.push(`dc${s}_hash`);for(const s of e)this.delete(s,!0)}toggleStorage(e,s){if(this.useStorage=e,!!s)if(!e)this.clear();else return this.set(this.cache)}}const Mt=class Mt{constructor(){Mt.STORAGES.push(this),Fe||(this.storage=new Vo)}async proxy(e,...s){return Fe?tt.getInstance().invoke("localStorageProxy",{type:e,args:s}):(s=Array.prototype.slice.call(s),this.storage[e].apply(this.storage,s))}get(e,s){return this.proxy("get",e,s)}set(e,s){return this.proxy("set",e,s)}delete(e,s){return this.proxy("delete",e,s)}clear(){return this.proxy("clear")}toggleStorage(e,s){return this.proxy("toggleStorage",e,s)}};Mt.STORAGES=[];let Is=Mt;const x=new Is;k.appStorage=x;function qo(t){return Qe&&t instanceof TouchEvent&&t.touches[0].clientX<30}class Go{constructor(){if(this.onPopState=e=>{const s=window.location.hash,r=e.state;if(this.debug&&this.log("popstate",e,this.isPossibleSwipe,s),s!==this.currentHash)if(this.debug&&this.log.warn(`hash changed, new=${s}, current=${this.currentHash}, overridden=${this.overriddenHash}`),r===this.id&&this.overriddenHash&&this.overriddenHash!==s)this.overrideHash(this.overriddenHash);else if(r&&!this.overriddenHash&&s)this.overrideHash();else{this.currentHash=s,this.onHashChange&&this.onHashChange();return}if(r!==this.id&&(this.pushState(),!this.navigations.length))return;const n=this.navigations.pop();if(!n){this.pushState();return}this.manual=!this.isPossibleSwipe,this.handleItem(n,this.navigations.length)},this.onKeyDown=e=>{const s=this.navigations[this.navigations.length-1];s&&e.key==="Escape"&&(!s.onEscape||s.onEscape())&&(Ss(e),this.back(s.type))},this.onTouchStart=e=>{e.touches.length>1||(this.debug&&this.log("touchstart"),qo(e)&&(this.isPossibleSwipe=!0,window.addEventListener("touchend",()=>{setTimeout(()=>{this.isPossibleSwipe=!1},100)},{passive:!0,once:!0})))},this.navigations=[],this.id=Date.now(),this.manual=!1,this.log=te("NC"),this.debug=!0,this.currentHash=window.location.hash,this.overriddenHash="",this.isPossibleSwipe=!1,window.addEventListener("popstate",this.onPopState),window.addEventListener("keydown",this.onKeyDown,{capture:!0,passive:!1}),Qe){const e={passive:!0};window.addEventListener("touchstart",this.onTouchStart,e)}history.scrollRestoration="manual",this.pushState()}overrideHash(e=""){e&&e[0]!=="#"?e="#"+e:e==="#"&&(e=""),this.currentHash!==e&&(this.overriddenHash=this.currentHash=e,this.replaceState(),this.pushState())}handleItem(e,s=this.navigations.indexOf(e)){const r=e.onPop(this.manual?void 0:!1);this.debug&&this.log("popstate, navigation:",e,this.navigations),r===!1?this.spliceItems(Math.min(this.navigations.length,s),0,e):e.noBlurOnPop||hn(),this.manual=!1}findItemByType(e){for(let s=this.navigations.length-1;s>=0;--s){const r=this.navigations[s];if(r.type===e)return{item:r,index:s}}}back(e){if(e){const s=this.findItemByType(e);if(s){this.backByItem(s.item,s.index);return}}history.back()}backByItem(e,s=this.navigations.indexOf(e)){s!==-1&&(this.manual=!0,this.navigations.splice(s,1),this.handleItem(e,s))}onItemAdded(e){this.debug&&this.log("onItemAdded",e,this.navigations),e.noHistory||this.pushState()}pushItem(e){this.navigations.push(e),this.onItemAdded(e)}unshiftItem(e){this.navigations.unshift(e),this.onItemAdded(e)}spliceItems(e,s,...r){this.navigations.splice(e,s,...r),r.forEach(n=>{this.onItemAdded(n)})}pushState(){this.debug&&this.log("push"),this.manual=!1,history.pushState(this.id,"")}replaceState(){this.debug&&this.log.warn("replace");const e=location.origin+location.pathname+location.search+this.overriddenHash;history.replaceState(this.id,"",e)}removeItem(e){e&&ht(this.navigations,e)}removeByType(e,s=!1){for(let r=this.navigations.length-1;r>=0&&!(this.navigations[r].type===e&&(this.navigations.splice(r,1),s));--r);}}const xs=new Go;k.appNavigationController=xs;class Yo{reload(){try{xs.spliceItems(0,1/0),xs.overrideHash(),location.reload()}catch{}}close(){try{window.close()}catch{}}focus(){window.focus()}}const Nn=new Yo;function j(t){if(t===null||typeof t!="object")return t;if(t instanceof Date)return new Date(t.getTime());if(Array.isArray(t))return t.map(n=>j(n));if(ArrayBuffer.isView(t))return t.slice();const e=new t.constructor;for(var s in t)t.hasOwnProperty(s)&&(e[s]=j(t[s]));return e}const Ct=typeof SharedWorker<"u"&&!G.noSharedWorker,zo=De?"touchstart":"mousemove";class Ko extends Ae{constructor(){super(),this._isIdle=!0,this.focusPromise=Promise.resolve(),this.focusResolve=()=>{},window.addEventListener("blur",()=>{this.isIdle=!0,window.addEventListener("focus",()=>{this.isIdle=!1},{once:!0})}),window.addEventListener(zo,()=>{this.isIdle=!1},{once:!0,passive:!0}),this.addEventListener("change",e=>{e?this.focusPromise=new Promise(s=>{this.focusResolve=s}):this.focusResolve()})}getFocusPromise(){return this.focusPromise}get isIdle(){return this._isIdle}set isIdle(e){this._isIdle!==e&&(this._isIdle=e,this.dispatchEvent("change",e))}}const _t=new Ko,Jo=5e3,Xo=3e4,Zo=2e4,Qo=Ct;class ea extends Ae{constructor(){super(!1),this.log=te("INSTANCE"),this.clearInstance=()=>{this.masterInstance&&!this.deactivated&&(this.log.warn("clear master instance"),x.delete("xt_instance"))},this.checkInstance=async(e=_t.isIdle)=>{if(this.deactivated)return;const s=Date.now(),r={id:this.instanceId,idle:e,time:s},[n,i=B.build]=await Promise.all([x.get("xt_instance",!1),x.get("k_build",!1)]);if(i>B.build){this.masterInstance=!1,w.managers.networkerFactory.stopAll(),this.deactivateInstance("version"),rt.toggleStorages(!1,!1);return}else if(Qo){x.set({xt_instance:r});return}!e||!n||n.id===this.instanceId||n.time<s-Zo?(x.set({xt_instance:r}),this.masterInstance||(this.masterInstance=!0,w.managers.networkerFactory.startAll(),this.log.warn("now master instance",r)),this.clearDeactivateTimeout()):this.masterInstance&&(this.masterInstance=!1,w.managers.networkerFactory.stopAll(),this.log.warn("now idle instance",r),this.deactivateTimeout||(this.deactivateTimeout=window.setTimeout(()=>this.deactivateInstance("tabs"),Xo)))},this.log=te("INSTANCE"),this.instanceId=En}get deactivatedReason(){return this.deactivated}start(){if(this.reset(),!this.started){this.started=!0,_t.addEventListener("change",this.checkInstance),setInterval(this.checkInstance,Jo),this.checkInstance();try{document.documentElement.addEventListener("beforeunload",this.clearInstance)}catch{}}}reset(){this.masterInstance=!1,this.clearDeactivateTimeout(),this.deactivated=void 0}activateInstance(){this.deactivated&&(this.reset(),this.checkInstance(!1),this.dispatchEvent("activated"))}deactivateInstance(e){this.masterInstance||this.deactivated||(this.log.warn("deactivate",e),this.clearDeactivateTimeout(),this.deactivated=e,this.dispatchEvent("deactivated",e))}clearDeactivateTimeout(){this.deactivateTimeout&&(clearTimeout(this.deactivateTimeout),this.deactivateTimeout=0)}}const Pt=new ea;k&&(k.singleInstance=Pt);function ta(t,e){if(t!==void 0)return t=+t.toFixed(0),e?t<Ft?t:t%Ft:t}function sa(t){return ta(t,!0)}const ra=1e4;class Un extends Ae{constructor(){super(!1),this.isAvailable=!0,this.isPushEnabled=!1,this.localNotificationsAvailable=!0,this.started=!1,this.settings={},this.isFirefox=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,this.userVisibleOnly=!this.isFirefox,this.log=te("PUSH-API"),this.subscribe=()=>{this.isAvailable&&navigator.serviceWorker.ready.then(e=>{e.pushManager.subscribe({userVisibleOnly:this.userVisibleOnly}).then(s=>{this.isPushEnabled=!0,this.pushSubscriptionNotify("subscribe",s)}).catch(s=>{Notification.permission==="denied"?this.log("Permission for Notifications was denied"):(this.log("Unable to subscribe to push.",s),this.userVisibleOnly||(this.userVisibleOnly=!0,setTimeout(this.subscribe,0)))})})},this.isAliveNotify=()=>{if(!this.isAvailable||Pt.deactivatedReason)return;this.settings.baseUrl=(location.href||"").replace(/#.*$/,"");const e={},s={push_action_mute1d:ue?"PushNotification.Action.Mute1d.Mobile":"PushNotification.Action.Mute1d",push_action_settings:ue?"PushNotification.Action.Settings.Mobile":"PushNotification.Action.Settings",push_message_nopreview:"PushNotification.Message.NoPreview"};for(const r in s)e[r]=U.format(s[r],!0);this.serviceMessagePort.invokeVoid("pushPing",{localNotifications:this.localNotificationsAvailable,lang:e,settings:this.settings}),this.isAliveTO=setTimeout(this.isAliveNotify,ra)},(!("PushManager"in window)||!("Notification"in window)||!("serviceWorker"in navigator))&&(this.log.warn("Push messaging is not supported."),this.isAvailable=!1,this.localNotificationsAvailable=!1),this.isAvailable&&Notification.permission==="denied"&&this.log.warn("The user has blocked notifications.")}start(){this.started||(this.started=!0,this.getSubscription(),this.setUpServiceWorkerChannel())}setLocalNotificationsDisabled(){this.localNotificationsAvailable=!1}getSubscription(){this.isAvailable&&navigator.serviceWorker.ready.then(e=>{e.pushManager.getSubscription().then(s=>{this.isPushEnabled=!!s,this.pushSubscriptionNotify("init",s)}).catch(s=>{this.log.error("Error during getSubscription()",s)})})}unsubscribe(){this.isAvailable&&navigator.serviceWorker.ready.then(e=>{e.pushManager.getSubscription().then(s=>{this.isPushEnabled=!1,s&&(this.pushSubscriptionNotify("unsubscribe",s),setTimeout(()=>{s.unsubscribe().then(r=>{this.isPushEnabled=!1}).catch(r=>{this.log.error("Unsubscription error: ",r)})},3e3))}).catch(s=>{this.log.error("Error thrown while unsubscribing from push messaging.",s)})})}forceUnsubscribe(){this.isAvailable&&navigator.serviceWorker.ready.then(e=>{e.pushManager.getSubscription().then(s=>{this.log.warn("force unsubscribe",s),s&&s.unsubscribe().then(r=>{this.log.warn("force unsubscribe successful",r),this.isPushEnabled=!1}).catch(r=>{this.log.error("Unsubscription error: ",r)})}).catch(s=>{this.log.error("Error thrown while unsubscribing from push messaging.",s)})})}setSettings(e){this.settings=j(e),clearTimeout(this.isAliveTO),this.isAliveNotify()}hidePushNotifications(){this.isAvailable&&this.serviceMessagePort.invokeVoid("notificationsClear",void 0)}setUpServiceWorkerChannel(){this.isAvailable&&(this.serviceMessagePort.addEventListener("pushClick",e=>{if(Pt.deactivatedReason){Nn.reload();return}this.dispatchEvent("push_notification_click",e)}),navigator.serviceWorker.ready.then(this.isAliveNotify))}pushSubscriptionNotify(e,s){if(s){const r=s.toJSON();if(!r||!r.endpoint||!r.keys||!r.keys.p256dh||!r.keys.auth){this.log.warn("Invalid push subscription",r),this.unsubscribe(),this.isAvailable=!1,this.pushSubscriptionNotify(e);return}this.log.warn("Push",e,r),this.dispatchEvent("push_"+e,{tokenType:10,tokenValue:JSON.stringify(r)})}else this.log.warn("Push",e,!1),this.dispatchEvent("push_"+e,!1)}ignorePushByMid(e,s){this.isAvailable&&this.serviceMessagePort.invokeVoid("shownNotification",e+"_"+sa(s))}}const kt=new Un;k&&(k.webPushApiManager=kt);const na=Object.freeze(Object.defineProperty({__proto__:null,WebPushApiManager:Un,default:kt},Symbol.toStringTag,{value:"Module"}));function ia(t){const e=document.createElement("script"),s=new Promise(r=>{e.onload=e.onerror=()=>{r(e)}});return e.src=t,document.body.appendChild(e),s}function oa(t){const e=Date.now();return t?e/1e3|0:e}class Wn{constructor(){this.disabled=G.test||!B.domains.includes(location.hostname)}setAuthorized(e){if(!this.disabled)return x.get("tgme_sync").then(s=>{const r=oa(!0);if(e&&s?.canRedirect===e&&s.ts+86400>r)return;x.set({tgme_sync:{canRedirect:e,ts:r}});const n=`_websync_?authed=${e?"1":"0"}&version=${encodeURIComponent(B.version+" "+B.suffix)}`,o=["//telegram.me/"+n,"//t.me/"+n].map(a=>ia(a).then(u=>{u.remove()}));return Promise.all(o)})}}const er=new Wn;k&&(k.telegramMeWebManager=er);const aa=Object.freeze(Object.defineProperty({__proto__:null,TelegramMeWebManager:Wn,default:er},Symbol.toStringTag,{value:"Module"})),tr=typeof RTCPeerConnection<"u"&&!Be,ua=tr;let ft;if(!Z)ft=!0;else try{ft=+navigator.userAgent.match(/Version\/(.+?) /)[1]>=14}catch{ft=!1}const ca=ft,la="filter"in(document.createElement("canvas").getContext("2d")||{}),ha=!!navigator?.geolocation?.getCurrentPosition&&!1,da=tr,jn=document.createElement("canvas").toDataURL("image/webp").startsWith("data:image/webp"),Je=new Set(["image/jpeg","image/png","image/bmp"]);jn&&Je.add("image/webp");const fa=[["image/jxl","data:image/jxl;base64,/woIAAAMABKIAgC4AF3lEgAAFSqjjBu8nOv58kOHxbSN6wxttW1hSaLIODZJJ3BIEkkaoCUzGM6qJAE="],["image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="]],ga=fa.map(([t,e])=>{const s=new Image,r=new Promise(n=>{s.onload=s.onerror=()=>{const i=s.height===2;n(i?t:void 0)}});return s.src=e,r}),$n=Promise.all(ga).then(t=>t.filter(Boolean)),sr=document.createElement("video"),ma=!!sr.canPlayType("video/webm")&&!Z&&!xe,Hn=!!sr.canPlayType("video/quicktime")||Z||xe,pa=!!sr.canPlayType('video/mp4; codecs="hev1"'),Da=Object.freeze(Object.defineProperty({__proto__:null,IS_H265_SUPPORTED:pa,IS_MOV_SUPPORTED:Hn,IS_WEBM_SUPPORTED:ma},Symbol.toStringTag,{value:"Module"})),rr=new Set(["image/gif","video/mp4","video/webm"]);Hn&&rr.add("video/quicktime");const va=[...Je].concat([...rr]),Vn=new Set(va),Ea=!Be&&!1,Fa="getDisplayMedia"in(navigator?.mediaDevices||{}),ya=!!navigator?.vibrate,Sr=document.createElement("audio"),qn=!!(Sr.canPlayType&&Sr.canPlayType("audio/ogg;").replace(/no/,""));let Gn=!1;try{const t=document.createElement("canvas").getContext("webgl"),e=t.getExtension("WEBGL_debug_renderer_info"),s=e&&t.getParameter(e.UNMASKED_RENDERER_WEBGL)||"";(s.match(/Apple/)&&!s.match(/Apple GPU/)||t.getSupportedExtensions().indexOf("WEBGL_compressed_texture_s3tc_srgb")===-1)&&(Gn=!0)}catch{}const Aa=Gn,ba="serviceWorker"in navigator,wr={CAN_USE_TRANSFERABLES:ca,IS_APPLE_MX:Aa,IS_CALL_SUPPORTED:ua,IS_CANVAS_FILTER_SUPPORTED:la,IS_EMOJI_SUPPORTED:_s,IS_GEOLOCATION_SUPPORTED:ha,IS_GROUP_CALL_SUPPORTED:da,IS_PARALLAX_SUPPORTED:Ea,IS_SCREEN_SHARING_SUPPORTED:Fa,IS_TOUCH_SUPPORTED:De,...Da,IS_VIBRATE_SUPPORTED:ya,IS_OPUS_SUPPORTED:qn,IS_SHARED_WORKER_SUPPORTED:Ct,IS_WEBP_SUPPORTED:jn,IS_WEBRTC_SUPPORTED:tr,IS_LIVE_STREAM_SUPPORTED:ba,IMAGE_MIME_TYPES_SUPPORTED:Je,MEDIA_MIME_TYPES_SUPPORTED:Vn,VIDEO_MIME_TYPES_SUPPORTED:rr,...xi};function Sa(){const t=document.createElement("input");t.type="time",t.value="15:00",t.style.visibility="hidden",document.body.append(t);const e=t.offsetWidth;return t.remove(),e>110?"h12":"h23"}const wa={8:new Uint8Array(1),16:new Uint16Array(1),32:new Uint32Array(1)};function Tt(t){const e=wa[t];return crypto.getRandomValues(e),e[0]}function Bl(){return""+Tt(32)+Tt(32)%16777215}const Ca=B.version,_a=B.build,Cr={_:"theme",access_hash:"",id:"",settings:[{_:"themeSettings",pFlags:{},base_theme:{_:"baseThemeClassic"},accent_color:3379436,message_colors:[6072403],wallpaper:{_:"wallPaper",pFlags:{default:!0,pattern:!0},access_hash:"",document:void 0,id:"",slug:"pattern",settings:{_:"wallPaperSettings",pFlags:{},intensity:50,background_color:14409147,second_background_color:7054727,third_background_color:14014605,fourth_background_color:8960132}}},{_:"themeSettings",pFlags:{},base_theme:{_:"baseThemeNight"},accent_color:8877281,message_colors:[8877281],wallpaper:{_:"wallPaper",pFlags:{default:!0,pattern:!0,dark:!0},access_hash:"",document:void 0,id:"",slug:"pattern",settings:{_:"wallPaperSettings",pFlags:{},intensity:-50,background_color:16696470,second_background_color:14511289,third_background_color:9842623,fourth_background_color:5200853}}}],slug:"",title:"",emoticon:"ğŸ ",pFlags:{default:!0}},_r=(t,e,s)=>({...Cr,name:t,settings:{...Cr.settings.find(r=>r.base_theme._===e),highlightingColor:s}}),H={allDialogsLoaded:{},pinnedOrders:{},contactsListCachedTime:0,updates:{},filtersArr:[],maxSeenMsgId:0,stateCreatedTime:Date.now(),recentEmoji:[],recentCustomEmoji:[],topPeersCache:{},recentSearch:[],version:Ca,build:_a,authState:{_:ue?"authStateSignIn":"authStateSignQr"},hiddenPinnedMessages:{},settings:{messagesTextSize:16,distanceUnit:"kilometers",sendShortcut:"enter",autoDownload:{photo:{contacts:!0,private:!0,groups:!0,channels:!0},video:{contacts:!0,private:!0,groups:!0,channels:!0},file:{contacts:!0,private:!0,groups:!0,channels:!0}},autoDownloadNew:{_:"autoDownloadSettings",file_size_max:3145728,pFlags:{video_preload_large:!0,audio_preload_next:!0},photo_size_max:1048576,video_size_max:15728640,video_upload_maxbitrate:100,small_queue_active_operations_max:0,large_queue_active_operations_max:0},stickers:{suggest:"all",dynamicPackOrder:!0,loop:!0},emoji:{suggest:!0,big:!0},themes:[_r("day","baseThemeClassic","hsla(86.4, 43.846153%, 45.117647%, .4)"),_r("night","baseThemeNight","hsla(299.142857, 44.166666%, 37.470588%, .4)")],theme:"system",notifications:{sound:!1},timeFormat:Sa(),liteMode:{all:!1,animations:!1,chat:!1,chat_background:!1,chat_spoilers:!1,effects:!1,effects_premiumstickers:!1,effects_reactions:!1,effects_emoji:!1,emoji:!1,emoji_messages:!1,emoji_panel:!1,gif:!1,stickers:!1,stickers_chat:!1,stickers_panel:!1,video:!1},savedAsForum:!1},playbackParams:{volume:1,muted:!1,playbackRate:1,playbackRates:{voice:1,video:1,audio:1},loop:!1,round:!1},keepSigned:!0,chatContextMenuHintWasShown:!1,hideChatJoinRequests:{},stateId:Tt(32),notifySettings:{},confirmedWebViews:[],seenTooltips:{storySound:!1},hiddenSimilarChannels:[],appConfig:{},accountThemes:{},translations:{peers:{},enabledPeers:{},enabled:!0,showInMenu:!0,doNotTranslate:[]}};function at(t,e){t=t.split(" ",1)[0],e=e.split(" ",1)[0];const s=t.split("."),r=e.split(".");for(let n=0;n<s.length;++n){const i=+s[n],o=+r[n];if(i>o)return 1;if(i<o)return-1}return 0}function Pa(t){return typeof t=="object"&&t!==null}function Yn(t,e,s,r,n,i){for(const o in t){const a=i?`${i}.${o}`:o;n?.has(a)||(typeof e[o]!=typeof t[o]?(e[o]=j(t[o]),s?.(r||o)):Pa(t[o])&&Yn(t[o],e[o],s,r||o,n,a))}}function ka(t,e,s){const r=performance.now();return(s||console).warn(yt(),"start",e),t.then(()=>{(s||console).warn(yt(),"end",e,performance.now()-r)}),t}function Ta(t){return(...e)=>ka(...e,t)}const La=24*60*60*1e3,ut=H.version,We=H.build,ct=Object.keys(H),Ma=["contactsListCachedTime","stateCreatedTime","maxSeenMsgId","filtersArr"];async function Ra(){const t=te("STATE-LOADER",Xs.Error),e=performance.now(),s=Ta(t),r=ct.map(A=>s(Re.get(A),"state "+A)).concat(s(x.get("user_auth"),"auth"),s(x.get("state_id"),"auth"),s(x.get("k_build"),"auth"),s(x.get("auth_key_fingerprint"),"auth"),s(x.get(`dc${B.baseDcId}_auth_key`),"auth")).concat(s(Re.get("user_auth"),"old auth")),n=await Promise.all(r);t.warn("promises",performance.now()-e);const i=[],o=(A,L)=>{u[A]=L,i.push(A)},a=A=>{i.length=0,u=A,i.push(...Object.keys(u))};let u={};for(let A=0,L=ct.length;A<L;++A){const _=ct[A],b=n[A];b!==void 0?u[_]=b:o(_,j(H[_]))}n.splice(0,ct.length);let c=n.shift();const l=n.shift(),h=n.shift(),f=n.shift(),g=n.shift(),E=n.shift();if(!c&&E){c=E;const A=["dc","server_time_offset","xt_instance"];for(let b=1;b<=5;++b)A.push(`dc${b}_server_salt`),A.push(`dc${b}_auth_key`);const L=await Promise.all(A.map(b=>Re.get(b)));A.push("user_auth"),L.push(typeof c=="number"||typeof c=="string"?{dcID:L[0]||B.baseDcId,date:Date.now()/1e3|0,id:c.toPeerId(!1)}:c);const _={};A.forEach((b,d)=>{_[b]=L[d]}),await x.set(_)}c&&(u.authState={_:"authStateSignedIn"},w.dispatchEvent("user_auth",typeof c=="number"||typeof c=="string"?{dcID:0,date:Date.now()/1e3|0,id:c.toPeerId(!1)}:c));const C=new Set,m=A=>{A.push("authState","stateId");const L=new Map(A.map(b=>[b,u[b]]));u=j(H),L.forEach((b,d)=>{u[d]=b});const _=["chats","dialogs","users"];for(const b of _)C.add(b);a(u)};if(u.stateId!==l&&(l!==void 0&&m([]),await x.set({state_id:u.stateId})),g){const A=g.slice(0,8);f?f!==A&&m([]):m(["settings"]),f!==A&&await x.set({auth_key_fingerprint:A})}const F=Date.now();u.stateCreatedTime+La<F&&(Ee&&t("will refresh state",u.stateCreatedTime,F),(L=>{L.forEach(_=>{o(_,j(H[_]))})})(Ma));const S=u.settings.autoDownload;if(S?.private!==void 0){const A=["contacts","private","groups","channels"];["photo","video","file"].forEach(_=>{const b=S[_]={};A.forEach(d=>{b[d]=S[d]})}),A.forEach(_=>{delete S[_]}),o("settings",u.settings)}Yn(H,u,A=>{o(A,u[A])},void 0,new Set(["settings.themes"]));let p,T;if(u.version!==ut||u.build!==We){if(u.build<322&&(o("allDialogsLoaded",j(H.allDialogsLoaded)),o("pinnedOrders",j(H.pinnedOrders)),o("filtersArr",j(H.filtersArr)),C.add("dialogs")),at(u.version,"1.7.1")===-1){let A=!1;if(at(u.version,"1.3.0")===-1)A=!0,u.settings.theme=j(H.settings.theme),u.settings.themes=j(H.settings.themes);else if(at(u.version,"1.7.1")===-1){A=!0;const L=u.settings.themes;u.settings.themes=j(H.settings.themes);try{L.forEach(_=>{const b=_.background;if(!b)return;const d=u.settings.themes.find(v=>v.name===_.name);d.settings.highlightingColor=b.highlightingColor;const D=v=>v&&parseInt(v.slice(1),16),y=(b.color||"").split(",").map(D);if(b.color&&!b.slug)d.settings.wallpaper={_:"wallPaperNoFile",id:0,pFlags:{},settings:{_:"wallPaperSettings",pFlags:{}}};else{const v={_:"wallPaper",id:0,access_hash:0,slug:b.slug,document:{},pFlags:{},settings:{_:"wallPaperSettings",pFlags:{}}},M=v.settings;d.settings.wallpaper=v,b.slug&&!b.color?M.pFlags.blur=b.blur||void 0:b.intensity&&(M.intensity=b.intensity,v.pFlags.pattern=!0,v.pFlags.dark=b.intensity<0||void 0)}if(y.length){const v=d.settings.wallpaper.settings;v.background_color=y[0],v.second_background_color=y[1],v.third_background_color=y[2],v.fourth_background_color=y[3]}})}catch(_){console.error("migrating themes error",_)}}A&&o("settings",u.settings)}if(u.build<309&&(u.settings.liteMode.animations=!u.settings.animationsEnabled,u.settings.liteMode.video=!u.settings.autoPlay.videos,u.settings.liteMode.gif=!u.settings.autoPlay.gifs),u.build<312&&typeof u.settings.stickers.suggest=="boolean"&&(u.settings.stickers.suggest=u.settings.stickers.suggest?"all":"none"),u.build<=432){let A=!1;try{for(const L of u.settings.themes)L.settings.highlightingColor||(L.settings.highlightingColor=L.settings.highlightningColor,delete L.settings.highlightningColor,A=!0)}catch{}A&&o("settings",u.settings)}u.appConfig=j(H.appConfig),at(u.version,ut)!==0&&(p=ut,T=u.version),o("version",ut),o("build",We)}return h!==We&&(!h||h<We)&&x.set({k_build:We}),w.settings=u.settings,Ee&&t("state res",u,j(u)),t.warn("total",performance.now()-e),{state:u,resetStorages:C,newVersion:p,oldVersion:T,pushedKeys:i}}let Oa;function Ia(){return Oa??(Oa=Ra())}class xa{constructor(){this.sampleRate=48e3,this.tasks=[],this.keepAlive=!1,this.log=te("OPUS",Xs.Error)}isPlaySupported(){return qn}loadWavWorker(){this.wavWorker||(this.wavWorker=new Worker("waveWorker.min.js"),this.wavWorker.addEventListener("message",e=>{const s=e.data;if(this.log("[WAV] got message:",s),s&&s.page){const r=s.page;this.onTaskEnd(this.tasks.shift(),r)}}))}loadWorker(){this.worker||(this.worker=new Worker("decoderWorker.min.js"),this.worker.addEventListener("message",e=>{const s=e.data;this.log("[DECODER] got message",s),s.type==="done"?(this.wavWorker.postMessage({command:"done"}),s.waveform&&(this.tasks[0].waveform=s.waveform)):this.wavWorker.postMessage({command:"encode",buffers:e.data},Z?void 0:s.map(r=>r.buffer))}))}setKeepAlive(e){this.keepAlive=e,this.keepAlive?(this.loadWorker(),this.loadWavWorker()):this.tasks.length||this.terminateWorkers()}onTaskEnd(e,s){s?(clearTimeout(e.timeout),e.callback.resolve({bytes:s,waveform:e.waveform})):e.callback.reject("timeout"),this.tasks.length&&this.executeNewTask(this.tasks[0]),this.terminateWorkers()}terminateWorkers(e=!1){(this.keepAlive||this.tasks.length)&&!e||(this.worker&&(this.worker.terminate(),this.worker=null),this.wavWorker&&(this.wavWorker.terminate(),this.wavWorker=null))}executeNewTask(e){this.worker.postMessage({command:"init",decoderSampleRate:this.sampleRate,outputBufferSampleRate:this.sampleRate}),this.wavWorker.postMessage({command:"init",wavBitDepth:16,wavSampleRate:this.sampleRate}),this.log("[DECODER] send decode"),this.worker.postMessage({command:"decode",pages:e.pages,waveform:e.withWaveform},Z?void 0:[e.pages.buffer]),e.timeout=window.setTimeout(()=>{this.log.error("decode timeout"),this.terminateWorkers(!0),this.tasks.length&&(this.loadWorker(),this.loadWavWorker()),this.onTaskEnd(this.tasks.shift())},1e4)}pushDecodeTask(e,s){return new Promise((r,n)=>{const i={pages:e,withWaveform:s,callback:{resolve:r,reject:n},timeout:0};this.loadWorker(),this.loadWavWorker(),this.tasks.push(i)===1&&this.executeNewTask(i)})}async decode(e,s=!1){return this.pushDecodeTask(e,s).then(async r=>{const n=new Blob([r.bytes],{type:"audio/wav"});return{url:await rt.invoke("createObjectURL",n),waveform:r.waveform}})}}const zn=new xa;k.opusDecodeController=zn;class Ba extends Zs{constructor(){super("CRYPTO"),this.lastIndex=-1}invokeCryptoNew({method:e,args:s,transfer:r}){const n={method:e,args:s},i=this.listeners.invoke;if(i?.size){let a=i.values().next().value.callback(n);return!Fe&&!(a instanceof Promise)&&(a=Promise.resolve(a)),a}const o=e==="aes-encrypt"||e==="aes-decrypt"?this.lastIndex=(this.lastIndex+1)%this.sendPorts.length:0;return this.invoke("invoke",n,void 0,this.sendPorts[o],r)}invokeCrypto(e,...s){return this.invokeCryptoNew({method:e,args:s})}}const gt=new Ba;k&&(k.cryptoMessagePort=gt);function Na(t){return Array.isArray(t)?t:[t]}function Ua(t){return["image/jpeg","image/png","image/gif","image/svg+xml","image/webp","image/bmp","image/avif","image/jxl","video/mp4","video/webm","video/quicktime","audio/ogg","audio/mpeg","audio/mp4","audio/wav","application/json","application/pdf"].indexOf(t)===-1?"application/octet-stream":t}function Kn(t,e=""){t=Na(t);const s=Ua(e);return new Blob(t,{type:s})}class Wa{constructor(e,s,r){this.mimeType=e,this.size=s,this.saveFileCallback=r,this.bytes=new Uint8Array(s)}async write(e,s){const r=s+e.byteLength;if(r>this.bytes.byteLength){const n=new Uint8Array(r);n.set(this.bytes,0),this.bytes=n}this.bytes.set(e,s)}truncate(){this.bytes=new Uint8Array}trim(e){this.bytes=this.bytes.slice(0,e)}finalize(e=!0){const s=Kn(this.bytes,this.mimeType);return e&&this.saveFileCallback&&this.saveFileCallback(s),s}getParts(){return this.bytes}replaceParts(e){this.bytes=e}}const Me=class Me{constructor(e){this.dbName=e,this.useStorage=!0,G.test&&(this.dbName+="_test"),Me.STORAGES.length&&(this.useStorage=Me.STORAGES[0].useStorage),this.openDatabase(),Me.STORAGES.push(this)}openDatabase(){return this.openDbPromise??(this.openDbPromise=caches.open(this.dbName))}delete(e){return this.timeoutOperation(s=>s.delete("/"+e))}deleteAll(){return caches.delete(this.dbName)}get(e){return this.timeoutOperation(s=>s.match("/"+e))}save(e,s){return this.timeoutOperation(r=>r.put("/"+e,s))}getFile(e,s="blob"){return this.get(e).then(r=>{if(!r)throw ve("NO_ENTRY_FOUND");return r[s]()})}saveFile(e,s){s instanceof Blob||(s=Kn(s));const r=new Response(s,{headers:{"Content-Length":""+s.size}});return this.save(e,r).then(()=>s)}timeoutOperation(e){return this.useStorage?new Promise(async(s,r)=>{let n=!1;const i=setTimeout(()=>{r(),n=!0},15e3);try{const o=await this.openDatabase();if(!o)throw this.useStorage=!1,this.openDbPromise=void 0,"no cache?";const a=await e(o);if(n)return;s(a)}catch(o){r(o)}clearTimeout(i)}):Promise.reject(ve("STORAGE_OFFLINE"))}prepareWriting(e,s,r){return{deferred:ie(),getWriter:()=>new Wa(r,s,i=>this.saveFile(e,i).catch(()=>i))}}static toggleStorage(e,s){return Promise.all(this.STORAGES.map(r=>{if(r.useStorage=e,!!s&&!e)return r.deleteAll()}))}};Me.STORAGES=[];let Bs=Me;function Pr(t,e){return Promise.all([ze.toggleStorage(t,e),Bs.toggleStorage(t,e),x.toggleStorage(t,e)]).then(Et,Et)}class ja extends Zs{constructor(){super("SERVICE"),k&&(k.serviceMessagePort=this)}}const $a=""+new URL("sw-DXRBlghc.js",import.meta.url).href,nr="";function kr(...t){return t.join(nr)}function Ha(t){return t.split(nr)}function Va(t,e,s,r){const n=e.split(nr),i=n.length;let o=t;for(let u=0;u<i-1;++u){const c=n[u];o=o[c]??(o[c]={})}const a=n[i-1];s===void 0&&r?delete o[a]:o[a]=s}const pe="_";function qa(t,e){const s="",r=s[s.length-1]||"";let n;switch(t._){case"inputPhotoFileLocation":{n=["photo",s[0],t.id,t.thumb_size].filter(Boolean).join(pe);break}case"inputDocumentFileLocation":{n=["document",s[0],t.id,t.thumb_size].filter(Boolean).join(pe);break}case"inputPeerPhotoFileLocation":n=["peerPhoto",t.photo_id,t.pFlags.big?"big":"small"].join(pe);break;case"inputStickerSetThumb":{n=["stickerSetThumb",t.stickerset.id||t.stickerset.short_name||t.stickerset.emoticon||t.stickerset._,t.thumb_version].join(pe);break}case"inputFileLocation":{n=[t.volume_id,t.local_id].join(pe);break}case"inputWebFileLocation":{n=["webFile",t.url].join(pe);break}case"inputWebFileGeoPointLocation":{const i=t.geo_point;n=["geoPoint",i.lat,i.long,t.w,t.h,t.zoom,t.scale].join(pe);break}default:{console.error("Unrecognized location:",t),n="";break}}return n+(e?.downloadId?"_download":"")+(r&&"."+r)}function Ga(t){return t?._.includes("inputWebFile")}function Ya(t){return Ga(t)?qa(t):t._+(t.id??t.url)}function za(t){return{downloaded:0,url:"",type:t}}function Ka(t,e){return t+(e!==void 0?"-"+e:"")}function ts(t,e){return t instanceof Promise?t.then(e):e(t)}function Tr(t){return typeof t=="number"&&t<Ft}const Ns=Symbol("store-raw"),Oe=Symbol("store-node"),ne=Symbol("store-has"),Jn=Symbol("store-self");function Xn(t){let e=t[Q];if(!e&&(Object.defineProperty(t,Q,{value:e=new Proxy(t,Za)}),!Array.isArray(t))){const s=Object.keys(t),r=Object.getOwnPropertyDescriptors(t);for(let n=0,i=s.length;n<i;n++){const o=s[n];r[o].get&&Object.defineProperty(t,o,{enumerable:r[o].enumerable,get:r[o].get.bind(e)})}}return e}function ge(t){let e;return t!=null&&typeof t=="object"&&(t[Q]||!(e=Object.getPrototypeOf(t))||e===Object.prototype||Array.isArray(t))}function ye(t,e=new Set){let s,r,n,i;if(s=t!=null&&t[Ns])return s;if(!ge(t)||e.has(t))return t;if(Array.isArray(t)){Object.isFrozen(t)?t=t.slice(0):e.add(t);for(let o=0,a=t.length;o<a;o++)n=t[o],(r=ye(n,e))!==n&&(t[o]=r)}else{Object.isFrozen(t)?t=Object.assign({},t):e.add(t);const o=Object.keys(t),a=Object.getOwnPropertyDescriptors(t);for(let u=0,c=o.length;u<c;u++)i=o[u],!a[i].get&&(n=t[i],(r=ye(n,e))!==n&&(t[i]=r))}return t}function Lt(t,e){let s=t[e];return s||Object.defineProperty(t,e,{value:s=Object.create(null)}),s}function Xe(t,e,s){if(t[e])return t[e];const[r,n]=oe(s,{equals:!1,internal:!0});return r.$=n,t[e]=r}function Ja(t,e){const s=Reflect.getOwnPropertyDescriptor(t,e);return!s||s.get||!s.configurable||e===Q||e===Oe||(delete s.value,delete s.writable,s.get=()=>t[Q][e]),s}function Zn(t){Ms()&&Xe(Lt(t,Oe),Jn)()}function Xa(t){return Zn(t),Reflect.ownKeys(t)}const Za={get(t,e,s){if(e===Ns)return t;if(e===Q)return s;if(e===Ls)return Zn(t),s;const r=Lt(t,Oe),n=r[e];let i=n?n():t[e];if(e===Oe||e===ne||e==="__proto__")return i;if(!n){const o=Object.getOwnPropertyDescriptor(t,e);Ms()&&(typeof i!="function"||t.hasOwnProperty(e))&&!(o&&o.get)&&(i=Xe(r,e,i)())}return ge(i)?Xn(i):i},has(t,e){return e===Ns||e===Q||e===Ls||e===Oe||e===ne||e==="__proto__"?!0:(Ms()&&Xe(Lt(t,ne),e)(),e in t)},set(){return!0},deleteProperty(){return!0},ownKeys:Xa,getOwnPropertyDescriptor:Ja};function K(t,e,s,r=!1){if(!r&&t[e]===s)return;const n=t[e],i=t.length;s===void 0?(delete t[e],t[ne]&&t[ne][e]&&n!==void 0&&t[ne][e].$()):(t[e]=s,t[ne]&&t[ne][e]&&n===void 0&&t[ne][e].$());let o=Lt(t,Oe),a;if((a=Xe(o,e,n))&&a.$(()=>s),Array.isArray(t)&&t.length!==i){for(let u=t.length;u<i;u++)(a=o[u])&&a.$();(a=Xe(o,"length",i))&&a.$(t.length)}(a=o[Jn])&&a.$()}function Qn(t,e){const s=Object.keys(e);for(let r=0;r<s.length;r+=1){const n=s[r];K(t,n,e[n])}}function Qa(t,e){if(typeof e=="function"&&(e=e(t)),e=ye(e),Array.isArray(e)){if(t===e)return;let s=0,r=e.length;for(;s<r;s++){const n=e[s];t[s]!==n&&K(t,s,n)}K(t,"length",r)}else Qn(t,e)}function Ve(t,e,s=[]){let r,n=t;if(e.length>1){r=e.shift();const o=typeof r,a=Array.isArray(t);if(Array.isArray(r)){for(let u=0;u<r.length;u++)Ve(t,[r[u]].concat(e),s);return}else if(a&&o==="function"){for(let u=0;u<t.length;u++)r(t[u],u)&&Ve(t,[u].concat(e),s);return}else if(a&&o==="object"){const{from:u=0,to:c=t.length-1,by:l=1}=r;for(let h=u;h<=c;h+=l)Ve(t,[h].concat(e),s);return}else if(e.length>1){Ve(t[r],e,[r].concat(s));return}n=t[r],s=[r].concat(s)}let i=e[0];typeof i=="function"&&(i=i(n,s),i===n)||r===void 0&&i==null||(i=ye(i),r===void 0||ge(n)&&ge(i)&&!Array.isArray(i)?Qn(n,i):K(t,r,i))}function ei(...[t,e]){const s=ye(t||{}),r=Array.isArray(s),n=Xn(s);function i(...o){wo(()=>{r&&o.length===1?Qa(s,o[0]):Ve(s,o)})}return[n,i]}const Us=Symbol("store-root");function Te(t,e,s,r,n){const i=e[s];if(t===i)return;const o=Array.isArray(t);if(s!==Us&&(!ge(t)||!ge(i)||o!==Array.isArray(i)||n&&t[n]!==i[n])){K(e,s,t);return}if(o){if(t.length&&i.length&&(!r||n&&t[0]&&t[0][n]!=null)){let c,l,h,f,g,E,C,m;for(h=0,f=Math.min(i.length,t.length);h<f&&(i[h]===t[h]||n&&i[h]&&t[h]&&i[h][n]===t[h][n]);h++)Te(t[h],i,h,r,n);const F=new Array(t.length),S=new Map;for(f=i.length-1,g=t.length-1;f>=h&&g>=h&&(i[f]===t[g]||n&&i[h]&&t[h]&&i[f][n]===t[g][n]);f--,g--)F[g]=i[f];if(h>g||h>f){for(l=h;l<=g;l++)K(i,l,t[l]);for(;l<t.length;l++)K(i,l,F[l]),Te(t[l],i,l,r,n);i.length>t.length&&K(i,"length",t.length);return}for(C=new Array(g+1),l=g;l>=h;l--)E=t[l],m=n&&E?E[n]:E,c=S.get(m),C[l]=c===void 0?-1:c,S.set(m,l);for(c=h;c<=f;c++)E=i[c],m=n&&E?E[n]:E,l=S.get(m),l!==void 0&&l!==-1&&(F[l]=i[c],l=C[l],S.set(m,l));for(l=h;l<t.length;l++)l in F?(K(i,l,F[l]),Te(t[l],i,l,r,n)):K(i,l,t[l])}else for(let c=0,l=t.length;c<l;c++)Te(t[c],i,c,r,n);i.length>t.length&&K(i,"length",t.length);return}const a=Object.keys(t);for(let c=0,l=a.length;c<l;c++)Te(t[a[c]],i,a[c],r,n);const u=Object.keys(i);for(let c=0,l=u.length;c<l;c++)t[u[c]]===void 0&&K(i,u[c],void 0)}function ti(t,e={}){const{merge:s,key:r="id"}=e,n=ye(t);return i=>{if(!ge(i)||!ge(n))return n;const o=Te(n,{[Us]:i},Us,s,r);return o===void 0?i:o}}const[si,Ws]=dt(()=>ei({})),eu=(...t)=>{const e=t[0];Ws(...t),w.managers.appStateManager.setByKey(e,ye(si[e]))},Lr=(t,e)=>{if(typeof t=="object"){Ws(t);return}Ws(t,ti(e))},Nl=()=>[si,eu];function tu(t,e="asc"){if(!t)return[];const s=t instanceof Map?[...t.keys()]:Object.keys(t).map(r=>+r);return e==="asc"?s.sort((r,n)=>r-n):s.sort((r,n)=>n-r)}const[ir,ri]=ei({});function or(t,e){return typeof t=="function"?de(()=>e(t())):e(t)}function Ul(t){return or(t,e=>ir[e])}function Wl(t){return or(t,e=>ir[e?.toPeerId(!0)])}function jl(t){return or(t,e=>ir[e?.toPeerId(!1)])}function su(t,e){ri(t,ti(e))}function ru(t){ri(t)}class nu extends tt{constructor(){super(),this.onMirrorTask=e=>{var o;const{name:s,key:r,value:n}=e;if(this.processMirrorTaskMap[s]?.(e),!e.hasOwnProperty("key")){this.mirrors[s]=n;return}const i=(o=this.mirrors)[s]??(o[s]={});Va(i,r,n,!0)},this.mirrors={state:void 0,thumbs:{},stickerThumbs:{},availableReactions:void 0,messages:{},groupedMessages:{},peers:{},avatars:{}},this.processMirrorTaskMap={messages:e=>{var o;const s=e.value;let r,n;if(s)r=s.mid,n=s.grouped_id;else{const[a,u]=Ha(e.key);r=+u;const c=this.mirrors.messages[a]?.[r];if(!c)return;n=c.grouped_id}if(!n)return;const i=(o=this.mirrors.groupedMessages)[n]??(o[n]=new Map);s?i.set(r,s):(i.delete(r),i.size||delete this.mirrors.groupedMessages[n])},state:e=>{e.key?Lr(e.key,e.value):console.error(e)},peers:e=>{e.key?su(e.key.toPeerId(),e.value):ru(e.value)}},this.tabState={chatPeerIds:[],idleStartTime:0},this.log("constructor"),this.registerWorker(),this.registerServiceWorker(),this.registerCryptoWorker(),this.addMultipleEventsListeners({convertWebp:({fileName:e,bytes:s})=>Bn.convert(e,s),convertOpus:({fileName:e,bytes:s})=>zn.pushDecodeTask(s,!1).then(r=>r.bytes),event:({name:e,args:s})=>{w.dispatchEventSingle(e,...s)},localStorageProxy:e=>{const s=e;return x[s.type](...s.args)},mirror:this.onMirrorTask,receivedServiceMessagePort:()=>{this.log.warn("mtproto worker received service message port")}}),w.addEventListener("language_change",e=>{w.managers.networkerFactory.setLanguage(e),w.managers.appAttachMenuBotsManager.onLanguageChange()}),window.addEventListener("online",()=>{w.managers.networkerFactory.forceReconnectTimeout()}),w.addEventListener("logging_out",()=>{const e=["cachedFiles","cachedStreamChunks"];Promise.all([Pr(!1,!0),x.clear(),Promise.race([er.setAuthorized(!1),Js(3e3)]),kt.forceUnsubscribe(),Promise.all(e.map(s=>caches.delete(s)))]).finally(()=>{Nn.reload()})}),_t.addEventListener("change",e=>{this.updateTabStateIdle(e)}),this.updateTabStateIdle(_t.isIdle)}sendEnvironment(){this.log("Passing environment:",wr),this.invoke("environment",wr)}pingServiceWorkerWithIframe(){if(this.pingServiceWorkerPromise)return this.pingServiceWorkerPromise;const e=this.pingServiceWorkerPromise=ie(),s=document.createElement("iframe");s.hidden=!0;const r=()=>{clearTimeout(o),setTimeout(()=>{this.pingServiceWorkerPromise=void 0},1e4),s.removeEventListener("load",n),s.removeEventListener("error",i),s.remove()},n=()=>{r(),e.resolve()},i=()=>{r(),e.reject()};s.addEventListener("load",n),s.addEventListener("error",i),s.src="ping/"+(Math.random()*4294967295|0)+".nocache",document.body.append(s);const o=window.setTimeout(i,1500);return e}attachServiceWorker(e){if(this.lastServiceWorker===e){this.log.warn("trying to attach same service worker");return}this.lastServiceWorker&&this.serviceMessagePort.detachPort(this.lastServiceWorker),this.serviceMessagePort.attachSendPort(this.lastServiceWorker=e),this.serviceMessagePort.invokeVoid("hello",void 0)}_registerServiceWorker(){navigator.serviceWorker.register($a,{type:"module",scope:"./"}).then(e=>{this.log("SW registered",e);const s=new URL(window.location.href),r="swfix",n=+s.searchParams.get(r)||0;if(e.active&&!navigator.serviceWorker.controller){if(n>=3)throw new Error("no controller");return e.unregister().then(()=>{s.searchParams.set(r,""+(n+1)),window.location.href=s.toString()})}n&&(s.searchParams.delete(r),history.pushState(void 0,"",s)),(e.installing||e.waiting||e.active).addEventListener("statechange",a=>{this.log("SW statechange",a)});const o=navigator.serviceWorker.controller||e.installing||e.waiting||e.active;this.attachServiceWorker(o)}).catch(e=>{this.log.error("SW registration failed!",e),this.invokeVoid("serviceWorkerOnline",!1)})}registerServiceWorker(){if(!("serviceWorker"in navigator))return;this.serviceMessagePort=kt.serviceMessagePort=new ja;const e=navigator.serviceWorker;this._registerServiceWorker(),e.addEventListener("controllerchange",()=>{this.log.warn("controllerchange");const s=e.controller;this.attachServiceWorker(s),s.addEventListener("error",r=>{this.log.error("controller error:",r)})}),this.serviceMessagePort.attachListenPort(e),this.serviceMessagePort.addMultipleEventsListeners({port:(s,r,n)=>{this.log.warn("got service worker port"),this.invokeVoid("serviceWorkerPort",void 0,void 0,[n.ports[0]])},hello:(s,r)=>{this.serviceMessagePort.resendLockTask(r)},share:s=>{this.log("will try to share something"),this.share=s}}),e.addEventListener("messageerror",s=>{this.log.error("SW messageerror:",s)})}async registerCryptoWorker(){const e=g=>fetch(g).then(E=>E.text()).then(E=>{const C=location.pathname.split("/");C[C.length-1]="";const m=location.origin+C.join("/");return E=E.replace(/(import (?:.+? from )?['"])\//g,"$1"+m),new Blob([E],{type:"application/javascript"})}),s={construct(g,E){return{url:Dn(E[0]).toString()}}},r=[Worker,typeof SharedWorker<"u"&&SharedWorker].filter(Boolean);r.forEach(g=>window[g.name]=new Proxy(g,s));const n=new Worker(new URL(""+new URL("crypto.worker-CfCshcpI.js",import.meta.url).href,import.meta.url),{type:"module"});r.forEach(g=>window[g.name]=g);const i=n.url,o=g=>new u(g,{type:"module"}),a=g=>this.attachWorkerToPort(g,gt,"crypto"),u=Ct?SharedWorker:Worker;gt.addEventListener("port",(g,E,C)=>{this.invokeVoid("cryptoPort",void 0,void 0,[C.ports[0]])});const c=o(i);a(c);const l=await e(i);(await this.invoke("createProxyWorkerURLs",{originalUrl:i,blob:l})).slice(1).map(o).forEach(a)}registerWorker(){let e;Ct?e=new SharedWorker(new URL(""+new URL("mtproto.worker-DswY1Bov.js",import.meta.url).href,import.meta.url),{type:"module"}):e=new Worker(new URL(""+new URL("mtproto.worker-DswY1Bov.js",import.meta.url).href,import.meta.url),{type:"module"}),this.onWorkerFirstMessage(e)}attachWorkerToPort(e,s,r){const n=e.port||e;s.attachPort(n),e.addEventListener("error",i=>{this.log.error(r,"worker error",i)})}onWorkerFirstMessage(e){this.log("set webWorker"),this.attachWorkerToPort(e,this,"mtproto")}loadState(){return Promise.all([Ia().then(e=>(this.newVersion=e.newVersion,this.oldVersion=e.oldVersion,this.mirrors.state=e.state,Lr(e.state),e))])}sendState(){return this.loadState().then(e=>{const[s]=e;return this.invoke("state",{...s,userId:w.myId.toUserId()}),e})}invokeCrypto(e,...s){return gt.invokeCrypto(e,...s)}async toggleStorages(e,s){await Pr(e,s),this.invoke("toggleStorages",{enabled:e,clearWrite:s}),this.serviceMessagePort?.invokeVoid("toggleStorages",{enabled:e,clearWrite:s})}async getMirror(e){return this.mirrors[e]}getState(){return this.getMirror("state")}getCacheContext(e,s=Gi,r=Ya(e)){return this.mirrors.thumbs[r]?.[s]||za(s)}getStickerCachedThumb(e,s){const r=Ka(e,s);return this.mirrors.stickerThumbs[r]}getAvailableReactions(){var e;return(e=this.mirrors).availableReactions||(e.availableReactions=w.managers.appReactionsManager.getAvailableReactions())}getReaction(e){return ts(this.getAvailableReactions(),s=>s.find(r=>r.reaction===e))}getMessageFromStorage(e,s){return e.endsWith("history")&&Tr(s)&&(e=this.getGlobalHistoryMessagesStorage()),this.mirrors.messages[e]?.[s]}getGroupsFirstMessage(e){if(!e?.grouped_id)return e;const s=this.mirrors.groupedMessages[e.grouped_id];let r=Number.MAX_SAFE_INTEGER;for(const[n,i]of s)i.mid<r&&(r=i.mid);return s.get(r)}getMidsByGroupedId(e,s="asc"){return tu(this.mirrors.groupedMessages[e],s)}getMessagesByGroupedId(e){const s=this.getMidsByGroupedId(e,"asc"),r=this.mirrors.groupedMessages[e];return s.map(n=>r.get(n))}getHistoryMessagesStorage(e){return`${e}_history`}getGlobalHistoryMessagesStorage(){return this.getHistoryMessagesStorage(vn)}getMessageById(e){if(Tr(e))return this.getMessageFromStorage(this.getGlobalHistoryMessagesStorage(),e)}getMessageByPeer(e,s){return e?this.getMessageFromStorage(this.getHistoryMessagesStorage(e),s):this.getMessageById(s)}getPeer(e){return this.mirrors.peers[e]}getUser(e){return this.mirrors.peers[e.toPeerId(!1)]}getChat(e){return this.mirrors.peers[e.toPeerId(!0)]}isForum(e){return!!this.getPeer(e)?.pFlags?.forum}isAvatarCached(e,s){const r=this.mirrors.avatars[e];return s===void 0?!!r:!!(r&&r[s]&&!(r[s]instanceof Promise))}loadAvatar(e,s,r){var i;const n=(i=this.mirrors.avatars)[e]??(i[e]={});return n[r]??(n[r]=w.managers.appAvatarsManager.loadAvatar(e,s,r))}getAppConfig(e){if(e&&(this.appConfig=void 0),!this.appConfig){const s=w.managers.apiManager.getAppConfig().then(r=>(this.appConfig===s&&(this.appConfig=r),r));return this.appConfig=s}return this.appConfig}isPremiumFeaturesHidden(){return ts(this.isPremiumPurchaseBlocked(),e=>e&&!w.premium)}isPremiumPurchaseBlocked(){return ts(this.getAppConfig(),e=>!!e.premium_purchase_blocked)}updateTabState(e,s){this.tabState[e]=s,this.invokeVoid("tabState",this.tabState)}updateTabStateIdle(e){this.updateTabState("idleStartTime",e?Date.now():0)}}const ni=new nu;k.apiManagerProxy=ni;const rt=ni,iu={};function ou(t,e){return new Proxy({},{get:(r,n,i)=>(...o)=>{const a=rt.invoke("manager",{name:t,method:n,args:o},e);return Ee&&iu[t]?.has(n)&&console.warn("manager request",t,n,o,e),a}})}function Mr(t,e){return new Proxy(t,{get:(s,r,n)=>s[r]??(s[r]=ou(r,e))})}let je;function au(){return je||(je=Mr({},!1),je.acknowledged=Mr({},!0),je)}function ii(t,e,s){return Math.min(s,Math.max(e,t))}function he(t,e,s){t/=255,e/=255,s/=255;const r=Math.max(t,e,s),n=r-Math.min(t,e,s),i=n&&(r===t?(e-s)/n:r==e?2+(s-t)/n:4+(t-e)/n);return[60*(i<0?i+6:i),r&&n/r,r]}function ar(t,e,s){const r=(n,i=(n+t/60)%6)=>Math.round((s-s*e*Math.max(Math.min(i,4-i,1),0))*255);return[r(5),r(3),r(1)]}function js(t,e,s,r=1){t/=255,e/=255,s/=255;const n=Math.max(t,e,s),i=Math.min(t,e,s);let o,a;const u=(n+i)/2;if(n===i)o=a=0;else{const c=n-i;switch(a=u>.5?c/(2-n-i):c/(n+i),n){case t:o=(e-s)/c+(e<s?6:0);break;case e:o=(s-t)/c+2;break;case s:o=(t-e)/c+4;break}o/=6}return{h:o*360,s:a*100,l:u*100,a:r}}function $l(t){return`hsla(${t.h}, ${t.s}%, ${t.l}%, ${t.a})`}function oi(t,e,s,r){t/=360,e/=100,s/=100;let n,i,o;if(e===0)n=i=o=s;else{const a=function(h,f,g){return g<0&&(g+=1),g>1&&(g-=1),g<.16666666666666666?h+(f-h)*6*g:g<.5?f:g<.6666666666666666?h+(f-h)*(.6666666666666666-g)*6:h},u=s<.5?s*(1+e):s+e-s*e,c=2*s-u;n=a(c,u,t+1/3),i=a(c,u,t),o=a(c,u,t-1/3)}return[n,i,o,r].map(a=>Math.round(a*255))}function ai(t){const e=t.slice(5,-1).split(", "),s=+e.pop(),r=e.map(n=>n.endsWith("%")?+n.slice(0,-1):+n);return oi(r[0],r[1],r[2],s)}function ui(t){const e=[],s=t[0]==="#"?1:0;if(t.length===5+s&&(t=(s?"#":"")+"0"+t.slice(s)),t.length===3+s)for(let r=s;r<t.length;++r)e.push(parseInt(t[r]+t[r],16));else if(t.length===4+s){for(let r=s;r<t.length-1;++r)e.push(parseInt(t[r]+t[r],16));e.push(parseInt(t[t.length-1],16))}else for(let r=s;r<t.length;r+=2)e.push(parseInt(t.slice(r,r+2),16));return e}function le(t){return ui(t.slice(0,7))}function Hl(t){const e=ui(t);return js(e[0],e[1],e[2],e[3])}function qe(t){return"#"+t.map(e=>("0"+e.toString(16)).slice(-2)).join("")}function uu(t){return qe(ai(t))}function cu(t){return uu(t).slice(0,-2)}function ss(t,e,s){const r=new Array(3);for(let n=0;n<3;++n){const i=t[n],o=e[n];r[n]=Math.floor(o+(i-o)*s)}return r}function Rr(t){return(t[0]*.2126+t[1]*.7152+t[2]*.0722)/255}function lu(t,e){return t.map((s,r)=>Math.round((s+e[r])/2))}function hu(t,e,s){const r=he(...e),n=he(...s),i=Math.min(1.5*r[1]/t[1],1);return r[0]=Math.min(360,n[0]-r[0]+t[0]),r[1]=Math.min(1,n[1]*t[1]/r[1]),r[2]=Math.min(1,(n[2]/r[2]+i-1)*t[2]/i),r[2]<.3?s:ar(...r)}function du(t,e,s,r){const n=he(...s);if(Math.min(Math.abs(n[0]-t[0]),Math.abs(n[0]-t[0]-360))>30)return s;const o=t[1]?Math.min(1.5*n[1]/t[1],1):0;n[0]=Math.min(360,n[0]+e[0]-t[0]),n[1]=t[1]?Math.min(1,n[1]*e[1]/t[1]):0,n[2]=t[2]?Math.min(1,n[2]*(1-o+o*e[2]/t[2])):0;let a=ar(...n);const u=Rr(s),c=Rr(a);if(r?u>c:u<c){const f=.4*u/c+.6;a=fu(a,f)}return a}function fu(t,e){return t.map(s=>ii(Math.round(s*e),0,255))}function ci(t){const e=(t<0?16777215+t:t).toString(16);return"#"+(e.length>=6?e:"0".repeat(6-e.length)+e)}function lt(t){return le(ci(t))}function Vl(t){return t.settings?[t.settings.background_color,t.settings.second_background_color,t.settings.third_background_color,t.settings.fourth_background_color].filter(Boolean).map(ci).join(","):""}function ql(t,e){const s=t[3];return t.slice(0,3).map((r,n)=>ii(Math.round((s*(r/255)+s*(e[n]/255))*255),0,255))}function Gl(t){const[e,s,r]=t;return .2126*e/255+.7152*s/255+.0722*r/255}function Yl(t){return t>.5?[0,0,0]:[255,255,255]}function zl(t,e){const s=t>.5?0:1,r=(t-s+e)/e;return+Math.max(.5,Math.min(.64,r)).toFixed(2)}function li(t,e,s,r,n=!0){if(t<s&&e<r&&n)return O(t,e);let i=s,o=r;return t/e>s/r?o=e*s/t|0:(i=t*r/e|0,i>s&&(o=o*s/i|0,i=s)),n&&i>=t&&o>=e&&(i=t,o=e),O(i,o)}k.calcImageInBox=li;class gu{constructor(e=0,s=e){this.width=e,this.height=s}aspect(e,s){return li(this.width,this.height,e.width,e.height,s)}aspectFitted(e){return this.aspect(e,!0)}aspectCovered(e){return this.aspect(e,!1)}}function O(t,e){return new gu(t,e)}var mu=(t=>(t[t.mobile=0]="mobile",t[t.medium=1]="medium",t[t.large=2]="large",t))(mu||{});const pu=600,Du=1275,vu=1680,Or=O(20,20),Ir=O(36,36),xr=O(18,18);class Eu extends Ae{constructor(){super(),this.screenSizes=[{key:0,value:pu},{key:1,value:Du},{key:2,value:vu}],this.sizes={handhelds:{regular:O(340,340),webpage:O(340,200),album:O(340,0),esgSticker:O(68,68),animatedSticker:O(180,180),staticSticker:O(180,180),emojiSticker:O(112,112),poll:O(240,0),round:O(240,240),documentName:O(200,0),invoice:O(340,340),extendedInvoice:O(340,340),customEmoji:Or,esgCustomEmoji:Ir,emojiStatus:xr,popupSticker:O(68,68)},desktop:{regular:O(420,400),webpage:O(420,380),album:O(420,0),esgSticker:O(72,72),animatedSticker:O(200,200),staticSticker:O(200,200),emojiSticker:O(112,112),poll:O(330,0),round:O(280,280),documentName:O(240,0),invoice:O(320,320),extendedInvoice:O(420,400),customEmoji:Or,esgCustomEmoji:Ir,emojiStatus:xr,popupSticker:O(80,80)}},this.isMobile=!1,this.handleResize=()=>{const e=window.innerWidth;let s=this.screenSizes[0].key;for(let n=this.screenSizes.length-1;n>=0;--n)if(this.screenSizes[n].value<e){s=(this.screenSizes[n+1]||this.screenSizes[n]).key;break}const r=this.activeScreen;this.activeScreen=s,this.isMobile=this.activeScreen===0,this.active=this.isMobile?this.sizes.handhelds:this.sizes.desktop,r!==s&&r!==void 0&&this.dispatchEvent("changeScreen",r,s),r!==void 0&&this.dispatchEvent("resize")},window.addEventListener("resize",()=>{this.rAF&&window.cancelAnimationFrame(this.rAF),this.rAF=window.requestAnimationFrame(()=>{this.handleResize(),this.rAF=0})}),this.handleResize()}}const hi=new Eu;k.mediaSizes=hi;class Fu{constructor(){this.resetCache=()=>{this.computedStyle=void 0;const e=this.cache;this.cache={};for(const s in e)this.getProperty(s)},this.cache={},this.nightElement=document.createElement("div"),this.nightElement.className="night",this.nightElement.style.display="none",document.body.append(this.nightElement),w.addEventListener("theme_changed",this.resetCache),hi.addEventListener("resize",this.resetCache)}getProperty(e,s){const r=this.cache[e],n=s?1:0;if(r?.[n])return r[n];this.computedStyle??(this.computedStyle=window.getComputedStyle(document.documentElement)),this.nightComputedStyle??(this.nightComputedStyle=window.getComputedStyle(this.nightElement));const i=(s?this.nightComputedStyle:this.computedStyle).getPropertyValue("--"+e).trim();return this.setPropertyCache(e,i,s)}getPropertyAsColor(e){const s=this.getProperty(e);return s[0]==="#"?s:`rgb(${s})`}getPropertyAsSize(e){const s=this.getProperty(e);let r;return s[s.length-1]==="%"||(s.indexOf("rem")?r=+s.replace("rem","")*16:r=+s.replace("px","")),r}setPropertyCache(e,s,r){var n;return((n=this.cache)[e]??(n[e]=[]))[r?1:0]=s}}const $s=new Fu;k&&(k.customProperties=$s);function Br(...t){const[e,s]=oe(...t);return(...r)=>r.length===0?e():s(...r)}class yu{constructor(){if(Fe)return;this._width=Br(),this._height=Br(),this.viewport=window;const e=()=>{this.setDimensions()};this.viewport.addEventListener("resize",e),e()}setDimensions(){const e=this.viewport;this._width(e.width||e.innerWidth),this._height(e.height||e.innerHeight)}get width(){return this._width()}get height(){return this._height()}}const Hs=new yu;k&&(k.windowSize=Hs);class Au{isEnabled(){return!!(w.settings&&w.settings.liteMode.all)}isAvailable(e){return!!(w.settings&&!w.settings.liteMode.all&&!w.settings.liteMode[e])}}const di=new Au;k&&(k.liteMode=di);const Nr={"primary-color":{rgb:!0,light:!0,lightFilled:!0,dark:!0,darkRgb:!0},"message-out-primary-color":{lightFilled:!0,rgb:!0},"surface-color":{rgb:!0},"danger-color":{rgb:!0,light:!0,dark:!0},"primary-text-color":{rgb:!0},"secondary-text-color":{light:!0,lightFilled:!0,rgb:!0},"message-background-color":{light:!0,lightFilled:!0,dark:!0,darkFilled:!0},"message-out-background-color":{light:!0,lightFilled:!0,dark:!0,darkFilled:!0,rgb:!0},"saved-color":{lightFilled:!0},"green-color":{}},rs={day:{"primary-color":"#3390ec","message-out-primary-color":"#5CA853","message-background-color":"#ffffff","surface-color":"#ffffff","danger-color":"#df3f40","primary-text-color":"#000000","secondary-text-color":"#707579","saved-color":"#359AD4","green-color":"#70b768"},night:{"primary-color":"#8774E1","message-out-primary-color":"#8774E1","message-background-color":"#212121","surface-color":"#212121","danger-color":"#ff595a","primary-text-color":"#ffffff","secondary-text-color":"#aaaaaa","saved-color":"#8774E1","green-color":"#5CC85E"}};class bu{constructor(){w.addEventListener("theme_change",e=>{this.setTheme(typeof e=="object"?e:void 0)}),w.addEventListener("theme_changed",()=>{this.setWorkerThemeParams()})}setWorkerThemeParams(){w.managers.apiManager.setThemeParams({_:"dataJSON",data:JSON.stringify(this.getThemeParamsForWebView())})}get themeColorElem(){return this._themeColorElem!==void 0?this._themeColorElem:this._themeColorElem=document.head.querySelector('[name="theme-color"]')||null}setThemeColor(e=this.themeColor){e||(e=this.isNight()?"#212121":"#ffffff");const s=this.themeColorElem;s&&s.setAttribute("content",e)}setThemeListener(){try{const e=window.matchMedia("(prefers-color-scheme: dark)"),s=()=>{this.systemTheme=e.matches?"night":"day",w.myId?w.dispatchEvent("theme_change"):this.setTheme()};"addEventListener"in e?e.addEventListener("change",s):"addListener"in e&&e.addListener(s),s()}catch{}}applyHighlightingColor({hsla:e,element:s=document.documentElement}={}){if(!e){e="hsla(85.5319, 36.9171%, 40.402%, .4)";const n=this.getTheme();n.settings?.highlightingColor&&(e=n.settings.highlightingColor)}const r=ai(e);s.style.setProperty("--message-highlighting-color",e),s.style.setProperty("--message-highlighting-color-rgb",r.slice(0,3).join(",")),s.style.setProperty("--message-highlighting-alpha",""+r[3]/255),!De&&e&&(this.themeColor=cu(e))}_setTheme(e){const s=this.isNight();document.head.querySelector('[name="color-scheme"]')?.setAttribute("content",s?"dark":"light"),document.documentElement.classList.toggle("night",s),this.setThemeColor();const n=this.getTheme();this.applyTheme(n);let i=this.styleElement;i||(i=this.styleElement=document.createElement("style"),document.head.append(i));const o=document.createElement("div");this.applyTheme(w.settings.themes.find(a=>a.name==="night"),o,!0),i.textContent=`.night {${o.style.cssText}}`,this.applyHighlightingColor(),!e&&w.dispatchEventSingle("theme_changed")}setTheme(e){if(!("startViewTransition"in document)||!this.applied){const a=!this.applied,u=this.applied;this.applied=!0,this._setTheme(a),u||this.setWorkerThemeParams();return}di.isAvailable("animations")||(e=void 0);const s=!this.isNight();e&&(document.documentElement.classList.add("no-view-transition"),document.documentElement.classList.toggle("reverse",s),document.documentElement.offsetLeft);const r=document.startViewTransition(()=>{this._setTheme()});if(!e)return;const{x:n,y:i}=e,o=Math.hypot(Math.max(n,Hs.width-n),Math.max(i,Hs.height-i));r.ready.then(()=>{document.documentElement.animate({clipPath:[`circle(0 at ${n}px ${i}px)`,`circle(${o}px at ${n}px ${i}px)`]},{duration:500,easing:"ease-in-out",pseudoElement:`::view-transition-${s?"old":"new"}(root)`,direction:s?"reverse":"normal"})}),r.finished.finally(()=>{document.documentElement.classList.remove("no-view-transition","reverse")})}async switchTheme(e,s){await w.managers.appStateManager.setByKey(kr("settings","theme"),e),w.dispatchEvent("theme_change",s)}isNight(){return this.getTheme().name==="night"}getTheme(e=w.settings.theme==="system"?this.systemTheme:w.settings.theme){return w.settings.themes.find(s=>s.name===e)}bindColorApplier(e){const s=new Set;return{applyAppColor:r=>(s.add(r.name),this.applyAppColor({...r,...e})),finalize:()=>{const r=e.isNight;for(const n in Nr)s.has(n)||this.applyAppColor({name:n,hex:rs[r?"night":"day"][n],...e})}}}applyAppColor({name:e,hex:s,element:r,lightenAlpha:n=.08,darkenAlpha:i=n,mixColor:o,isNight:a=this.isNight(),saveToCache:u}){const c=Nr[e],l=le(s),h=js(...l);o??(o=le(rs[a?"night":"day"]["surface-color"]));const f=ss(l,o,n),g={...h,l:h.l-i*100},E=[[e,s],c.rgb&&[e+"-rgb",l.join(",")],c.light&&["light-"+e,`rgba(${l[0]}, ${l[1]}, ${l[2]}, ${n})`],c.lightFilled&&["light-filled-"+e,qe(f)],c.dark&&["dark-"+e,`hsl(${g.h}, ${g.s}%, ${g.l}%)`]];u??(u=r===document.documentElement),E.filter(Boolean).forEach(([C,m])=>{r.style.setProperty("--"+C,m),u&&$s.setPropertyCache(C,m,a)})}async applyNewTheme(e){const s=this.isNightTheme(e),r=this.getTheme(),n=w.settings.themes,i=e.settings.find(a=>a.base_theme._===(s?"baseThemeNight":"baseThemeClassic")),o={...e,name:r.name,settings:{...i,highlightingColor:""}};await this.AppBackgroundTab.setBackgroundDocument(i.wallpaper,o.settings),n[n.indexOf(r)]=o,await w.managers.appStateManager.setByKey(kr("settings","themes"),w.settings.themes),w.dispatchEvent("theme_change")}isNightTheme(e){return e.name==="night"||this.isNight()}getThemeSettings(e,s){return s??(s=this.isNightTheme(e)),Array.isArray(e.settings)?e.settings.find(n=>n.base_theme._===(s?"baseThemeNight":"baseThemeClassic")):e.settings}applyTheme(e,s=document.documentElement,r){const n=this.isNightTheme(e),i=this.getThemeSettings(e,n),o=rs[n?"night":"day"];let a=he(...le(o["primary-color"])),u=he(...lt(i.accent_color));const c=du(a,u,le(o["primary-color"]),!n),l=qe(c),{applyAppColor:h,finalize:f}=this.bindColorApplier({element:s,isNight:n,saveToCache:r});if(h({name:"primary-color",hex:l,darkenAlpha:.04}),h({name:"saved-color",hex:l,lightenAlpha:.64,mixColor:[255,255,255]}),!i.message_colors?.length)return;const g=n?1:.12,E=le(o["message-out-primary-color"]);a=he(...E);const C=ss(E,le(o["surface-color"]),g);let F=lt(i.message_colors[0]);i.message_colors.length>1&&(i.message_colors.slice(1).forEach(T=>{F=lu(F,lt(T))}),F=hu(a,C,F)),u=he(...F);const P=i.outbox_accent_color!==void 0&&he(...lt(i.outbox_accent_color));let p=ss(F,le(o["surface-color"]),g);if(!n){const T=js(...p);T.s=Math.min(T.s+(n?8:63),100),p=oi(T.h,T.s,T.l,T.a).slice(0,3)}h({name:"message-out-background-color",hex:qe(p),lightenAlpha:g}),h({name:"message-out-primary-color",hex:n?"#ffffff":qe(P?ar(...P):F),mixColor:p}),f()}getThemeParamsForWebView(){const e={bg_color:"surface-color",button_color:"primary-color",button_text_color:"#ffffff",hint_color:"secondary-text-color",link_color:"link-color",secondary_bg_color:"background-color-true",text_color:"primary-text-color",header_bg_color:"surface-color",accent_text_color:"primary-color",section_bg_color:"surface-color",section_header_text_color:"primary-color",subtitle_text_color:"secondary-text-color",destructive_text_color:"danger-color"},s={};for(const r in e){const n=e[r];s[r]=n[0]==="#"?n:$s.getProperty(n)}return s}}const fi=new bu;k&&(k.themeController=fi);class Su extends Ae{constructor(){super(...arguments),this.overlaysActive=0,this.hasDarkOverlays=0}get isOverlayActive(){return this.overlaysActive>0}set isOverlayActive(e){this.overlaysActive+=e?1:-1,this.dispatchEvent("change",this.isOverlayActive)}get isDarkOverlayActive(){return this.hasDarkOverlays>0}set isDarkOverlayActive(e){this.hasDarkOverlays+=e?1:-1,this.isOverlayActive=e}}const mt=new Su;k&&(k.overlayCounter=mt);function Kl(t,e=t.split("?")){return gi(e?.[1])}function gi(t){const e={};return t&&t.split("&").forEach(s=>{const[r,n=""]=s.split("=");e[r]=decodeURIComponent(n)}),e}const wu="onbeforeinstallprompt"in window;let Vs;function Cu(){window.addEventListener("beforeinstallprompt",t=>{Vs=async()=>{t.prompt();const{outcome:e}=await t.userChoice;e==="accepted"&&(Vs=void 0)}})}function Jl(){return Vs}const ur=["January","February","March","April","May","June","July","August","September","October","November","December"],_u=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Ze=ur.slice(),qs=_u.slice(),Ie=86400,Xl=1440,Zl=10080;function Pu(){const t=U.getDateTimeFormat({weekday:"long"}),e=new Date(Date.UTC(2017,0,2)),s=[];for(let r=0;r<7;++r)s.push(Ot(t.format(e))),e.setDate(e.getDate()+1);return s}function ku(){const t=U.getDateTimeFormat({month:"long"}),e=new Date(Date.UTC(2017,0,1)),s=[];for(let r=0;r<12;++r)s.push(Ot(t.format(e))),e.setMonth(e.getMonth()+1);return s}function Ur(){Ze.splice(0,Ze.length,...ku()),qs.splice(0,qs.length,...Pu())}const Wr=t=>{const e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())),s=e.getUTCDay()||7;e.setUTCDate(e.getUTCDate()+4-s);const r=new Date(Date.UTC(e.getUTCFullYear(),0,1));return Math.ceil(((e.getTime()-r.getTime())/Ie+1)/7)};function Ql(t,e){e||(e=new Date,e.setHours(0,0,0,0));const s={day:"numeric",month:"long"};return t.getFullYear()!==e.getFullYear()&&(s.year="numeric"),new U.IntlDateElement({date:t,options:s}).element}function Tu(t){const e=new Date,s=e.getTime()/1e3|0,r=t.getTime()/1e3|0,n={};return s-r<Ie&&e.getDate()===t.getDate()?n.hour=n.minute="2-digit":e.getFullYear()!==t.getFullYear()?(n.year=n.day="numeric",n.month="2-digit"):s-r<Ie*7&&Wr(e)===Wr(t)?n.weekday="short":(n.month="short",n.day="numeric"),new U.IntlDateElement({date:t,options:n}).element}const Gs={hour:"2-digit",minute:"2-digit"};function Lu(t,e={}){e.combined&&(e.noToday=!0);const s=new Date,r=new Date(t*1e3),i=(s.getTime()/1e3|0)-t,o=e.combined?void 0:Mu(r);let a;return!e.noToday&&i<Ie&&s.getDate()===r.getDate()?a=Ke(e.capitalize?"Date.Today":"Peer.Status.Today"):!e.noToday&&i>0&&i<Ie*2&&new Date(s.getTime()-Ie*1e3).getDate()===r.getDate()?(a=Ke(e.capitalize?"Yesterday":"Peer.Status.Yesterday"),e.capitalize&&(a.style.textTransform="capitalize")):s.getFullYear()!==r.getFullYear()?a=new U.IntlDateElement({date:r,options:{month:"short",day:"numeric",year:"numeric",...e.combined?Gs:{}}}).element:a=new U.IntlDateElement({date:r,options:{month:"short",day:"numeric",...e.combined?Gs:{}}}).element,{dateEl:a,timeEl:o}}function eh(t,e=!0,s=!1){const{dateEl:r,timeEl:n}=Lu(t,{capitalize:e,noToday:s}),i=document.createDocumentFragment();return i.append(r," ",Ke("ScheduleController.at")," ",n),i}function Mu(t){return new U.IntlDateElement({date:t,options:Gs}).element}k&&(k.formatDateAccordingToTodayNew=Tu);const th=(t,e={})=>{const s=e.monthAsNumber?".":" ",r=("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+(e.noSeconds?"":":"+("0"+t.getSeconds()).slice(-2)),n=t.getFullYear();return(e.leadingZero?("0"+t.getDate()).slice(-2):t.getDate())+s+(e.monthAsNumber?("0"+(t.getMonth()+1)).slice(-2):ur[t.getMonth()])+s+(""+n).slice(e.shortYear?2:0)+(e.noTime?"":", "+r)};function sh(t,e){const s=t>=12&&!(t%12);return Ke(e?s?"BoldYears":"BoldMonths":s?"Years":"Months",[s?t/12:t])}const ee=2013,Ru=new RegExp("20[0-9]{1,2}"),cr="\\p{L}",Ou=new RegExp(`(${cr}{3,})`,"iu"),Iu=new RegExp(`(${cr}{3,}) ([0-9]{0,4})`,"iu"),xu=new RegExp(`([0-9]{0,4}) (${cr}{2,})`,"iu"),Bu=new RegExp("^([0-9]{1,4})(\\.| |/|\\-)([0-9]{1,4})$","i"),Nu=new RegExp("^([0-9]{1,2})(\\.| |/|\\-)([0-9]{1,2})(\\.| |/|\\-)([0-9]{1,4})$","i"),Uu=[31,29,31,30,31,30,31,31,30,31,30,31];function Wu(t,e){const s=t.trim().toLowerCase();if(s.length<3)return;if(["today",U.format("Peer.Status.Today",!0)].some(i=>i.indexOf(s)===0)){const i=new Date,o=i.getFullYear(),a=i.getMonth(),u=i.getDate();i.setFullYear(o,a,u),i.setHours(0,0,0);const c=i.getTime();i.setFullYear(o,a,u+1),i.setHours(0,0,0);const l=i.getTime()-1;e.push({title:U.format("Date.Today",!0),minDate:c,maxDate:l});return}if(["yesterday",U.format("Peer.Status.Yesterday",!0)].some(i=>i.indexOf(s)===0)){const i=new Date,o=i.getFullYear(),a=i.getMonth(),u=i.getDate();i.setFullYear(o,a,u),i.setHours(0,0,0);const c=i.getTime()-864e5;i.setFullYear(o,a,u+1),i.setHours(0,0,0);const l=i.getTime()-86400001;e.push({title:Ot(U.format("Yesterday",!0)),minDate:c,maxDate:l});return}const r=Vu(s);if(r>=0){const i=new Date,o=i.getTime(),a=i.getDay(),u=r-a;i.setDate(i.getDate()+u),i.getTime()>o&&i.setTime(i.getTime()-6048e5);const c=i.getFullYear(),l=i.getMonth(),h=i.getDate();i.setFullYear(c,l,h),i.setHours(0,0,0);const f=i.getTime();i.setFullYear(c,l,h+1),i.setHours(0,0,0);const g=i.getTime()-1;e.push({title:pi(f),minDate:f,maxDate:g});return}let n;if((n=Bu.exec(s))!==null){const i=n[1],o=n[3],a=parseInt(i),u=parseInt(o);if(a>0&&a<=31){if(u>=ee&&a<=12){const c=u,l=a-1;$e(e,l,c);return}else if(u<=12){const c=a-1,l=u-1;ns(e,c,l)}}else if(a>=ee&&u<=12){const c=a,l=u-1;$e(e,l,c)}return}if((n=Nu.exec(s))!==null){const i=n[1],o=n[3],a=n[5];if(!n[2]===n[4])return;const u=parseInt(i),c=parseInt(o)-1;let l=parseInt(a);l>=10&&l<=99&&(l+=2e3);const h=new Date().getFullYear();if(Di(u-1,c)&&l>=ee&&l<=h){const f=new Date;f.setFullYear(l,c,u),f.setHours(0,0,0);const g=f.getTime();f.setFullYear(l,c,u+1),f.setHours(0,0,0);const E=f.getTime()-1;e.push({title:mi(g),minDate:g,maxDate:E});return}return}if((n=Iu.exec(s))!==null){const i=n[1],o=n[2],a=is(i);if(a>=0){const u=+o||new Date().getUTCFullYear();if(u>0&&u<=31){const c=u-1;ns(e,c,a);return}else if(u>=ee){$e(e,a,u);return}}}if((n=xu.exec(s))!==null){const i=n[1],o=n[2],a=is(o);if(a>=0){const u=+i;if(u>0&&u<=31){const c=u-1;ns(e,c,a);return}else u>=ee&&$e(e,a,u)}}if((n=Ou.exec(s))!==null){const i=n[1],o=is(i);if(o>=0){const a=new Date().getFullYear();for(let u=a;u>=ee;--u)$e(e,o,u)}}if((n=Ru.exec(s))!==null){let i=+n[0];const o=new Date().getFullYear();if(i<ee){i=ee;for(let a=o;a>=i;a--){const u=new Date;u.setFullYear(a,0,1),u.setHours(0,0,0);const c=u.getTime();u.setFullYear(a+1,0,1),u.setHours(0,0,0);const l=u.getTime()-1;e.push({title:""+a,minDate:c,maxDate:l})}}else if(i<=o){const a=new Date;a.setFullYear(i,0,1),a.setHours(0,0,0);const u=a.getTime();a.setFullYear(i+1,0,1),a.setHours(0,0,0);const c=a.getTime()-1;e.push({title:""+i,minDate:u,maxDate:c})}return}}function $e(t,e,s){const r=new Date().getFullYear(),n=Date.now();if(s>=ee&&s<=r){const i=new Date;i.setFullYear(s,e,1),i.setHours(0,0,0);const o=i.getTime();if(o>n)return;i.setMonth(i.getMonth()+1);const a=i.getTime()-1;t.push({title:ju(o),minDate:o,maxDate:a})}}function ns(t,e,s){if(Di(e,s)){const r=new Date().getFullYear(),n=Date.now();for(let i=r;i>=ee;i--){if(s===1&&e===28&&!Hu(i))continue;const o=new Date;o.setFullYear(i,s,e+1),o.setHours(0,0,0);const a=o.getTime();if(a>n)continue;o.setFullYear(i,s,e+2),o.setHours(0,0,0);const u=o.getTime()-1;i===r?t.push({title:$u(a),minDate:a,maxDate:u}):t.push({title:mi(a),minDate:a,maxDate:u})}}}function ju(t){const e=new Date(t);return Ze[e.getMonth()]+" "+e.getFullYear()}function $u(t){const e=new Date(t);return Ze[e.getMonth()]+" "+e.getDate()}function mi(t){const e=new Date(t);return("0"+e.getDate()).slice(-2)+"."+("0"+(e.getMonth()+1)).slice(-2)+"."+e.getFullYear()}function pi(t){const e=new Date(t);return qs[e.getDay()]}function Di(t,e){return e>=0&&e<12&&t>=0&&t<Uu[e]}function Hu(t){return t%4===0&&t%100!==0||t%400===0}function is(t){t=t.toLowerCase();for(let e=0;e<12;e++)if([ur[e],Ze[e]].some(s=>s.toLowerCase().indexOf(t)===0))return e;return-1}function Vu(t){const e=new Date;if(t.length<=3)return-1;for(let s=0;s<7;s++)if(e.setDate(e.getDate()+1),pi(e.getTime()).toLowerCase().indexOf(t)===0)return e.getDay();return-1}k.fillTipDates=Wu;const vi=ue,Ei=ue||!fn&&(!Z||Qe)||gn<113,qu=!vi&&!Ei;var rh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var lr={exports:{}},Fi=function(e,s){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return e.apply(s,n)}},Yu=Fi,Se=Object.prototype.toString;function hr(t){return Se.call(t)==="[object Array]"}function Ys(t){return typeof t>"u"}function zu(t){return t!==null&&!Ys(t)&&t.constructor!==null&&!Ys(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function Ku(t){return Se.call(t)==="[object ArrayBuffer]"}function Ju(t){return typeof FormData<"u"&&t instanceof FormData}function Xu(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function Zu(t){return typeof t=="string"}function Qu(t){return typeof t=="number"}function yi(t){return t!==null&&typeof t=="object"}function pt(t){if(Se.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function ec(t){return Se.call(t)==="[object Date]"}function tc(t){return Se.call(t)==="[object File]"}function sc(t){return Se.call(t)==="[object Blob]"}function Ai(t){return Se.call(t)==="[object Function]"}function rc(t){return yi(t)&&Ai(t.pipe)}function nc(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}function ic(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function oc(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function dr(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),hr(t))for(var s=0,r=t.length;s<r;s++)e.call(null,t[s],s,t);else for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.call(null,t[n],n,t)}function zs(){var t={};function e(n,i){pt(t[i])&&pt(n)?t[i]=zs(t[i],n):pt(n)?t[i]=zs({},n):hr(n)?t[i]=n.slice():t[i]=n}for(var s=0,r=arguments.length;s<r;s++)dr(arguments[s],e);return t}function ac(t,e,s){return dr(e,function(n,i){s&&typeof n=="function"?t[i]=Yu(n,s):t[i]=n}),t}function uc(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var Y={isArray:hr,isArrayBuffer:Ku,isBuffer:zu,isFormData:Ju,isArrayBufferView:Xu,isString:Zu,isNumber:Qu,isObject:yi,isPlainObject:pt,isUndefined:Ys,isDate:ec,isFile:tc,isBlob:sc,isFunction:Ai,isStream:rc,isURLSearchParams:nc,isStandardBrowserEnv:oc,forEach:dr,merge:zs,extend:ac,trim:ic,stripBOM:uc},Pe=Y;function jr(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var bi=function(e,s,r){if(!s)return e;var n;if(r)n=r(s);else if(Pe.isURLSearchParams(s))n=s.toString();else{var i=[];Pe.forEach(s,function(u,c){u===null||typeof u>"u"||(Pe.isArray(u)?c=c+"[]":u=[u],Pe.forEach(u,function(h){Pe.isDate(h)?h=h.toISOString():Pe.isObject(h)&&(h=JSON.stringify(h)),i.push(jr(c)+"="+jr(h))}))}),n=i.join("&")}if(n){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+n}return e},cc=Y;function Bt(){this.handlers=[]}Bt.prototype.use=function(e,s,r){return this.handlers.push({fulfilled:e,rejected:s,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1};Bt.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Bt.prototype.forEach=function(e){cc.forEach(this.handlers,function(r){r!==null&&e(r)})};var lc=Bt,hc=Y,dc=function(e,s){hc.forEach(e,function(n,i){i!==s&&i.toUpperCase()===s.toUpperCase()&&(e[s]=n,delete e[i])})},Si=function(e,s,r,n,i){return e.config=s,r&&(e.code=r),e.request=n,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},os,$r;function wi(){if($r)return os;$r=1;var t=Si;return os=function(s,r,n,i,o){var a=new Error(s);return t(a,r,n,i,o)},os}var as,Hr;function fc(){if(Hr)return as;Hr=1;var t=wi();return as=function(s,r,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?s(n):r(t("Request failed with status code "+n.status,n.config,null,n.request,n))},as}var us,Vr;function gc(){if(Vr)return us;Vr=1;var t=Y;return us=t.isStandardBrowserEnv()?function(){return{write:function(r,n,i,o,a,u){var c=[];c.push(r+"="+encodeURIComponent(n)),t.isNumber(i)&&c.push("expires="+new Date(i).toGMTString()),t.isString(o)&&c.push("path="+o),t.isString(a)&&c.push("domain="+a),u===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),us}var cs,qr;function mc(){return qr||(qr=1,cs=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}),cs}var ls,Gr;function pc(){return Gr||(Gr=1,ls=function(e,s){return s?e.replace(/\/+$/,"")+"/"+s.replace(/^\/+/,""):e}),ls}var hs,Yr;function Dc(){if(Yr)return hs;Yr=1;var t=mc(),e=pc();return hs=function(r,n){return r&&!t(n)?e(r,n):n},hs}var ds,zr;function vc(){if(zr)return ds;zr=1;var t=Y,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return ds=function(r){var n={},i,o,a;return r&&t.forEach(r.split(`
`),function(c){if(a=c.indexOf(":"),i=t.trim(c.substr(0,a)).toLowerCase(),o=t.trim(c.substr(a+1)),i){if(n[i]&&e.indexOf(i)>=0)return;i==="set-cookie"?n[i]=(n[i]?n[i]:[]).concat([o]):n[i]=n[i]?n[i]+", "+o:o}}),n},ds}var fs,Kr;function Ec(){if(Kr)return fs;Kr=1;var t=Y;return fs=t.isStandardBrowserEnv()?function(){var s=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function i(o){var a=o;return s&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(a){var u=t.isString(a)?i(a):a;return u.protocol===n.protocol&&u.host===n.host}}():function(){return function(){return!0}}(),fs}var gs,Jr;function Nt(){if(Jr)return gs;Jr=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,gs=t,gs}var ms,Xr;function Zr(){if(Xr)return ms;Xr=1;var t=Y,e=fc(),s=gc(),r=bi,n=Dc(),i=vc(),o=Ec(),a=wi(),u=Ut(),c=Nt();return ms=function(h){return new Promise(function(g,E){var C=h.data,m=h.headers,F=h.responseType,S;function P(){h.cancelToken&&h.cancelToken.unsubscribe(S),h.signal&&h.signal.removeEventListener("abort",S)}t.isFormData(C)&&delete m["Content-Type"];var p=new XMLHttpRequest;if(h.auth){var T=h.auth.username||"",A=h.auth.password?unescape(encodeURIComponent(h.auth.password)):"";m.Authorization="Basic "+btoa(T+":"+A)}var L=n(h.baseURL,h.url);p.open(h.method.toUpperCase(),r(L,h.params,h.paramsSerializer),!0),p.timeout=h.timeout;function _(){if(p){var d="getAllResponseHeaders"in p?i(p.getAllResponseHeaders()):null,D=!F||F==="text"||F==="json"?p.responseText:p.response,y={data:D,status:p.status,statusText:p.statusText,headers:d,config:h,request:p};e(function(M){g(M),P()},function(M){E(M),P()},y),p=null}}if("onloadend"in p?p.onloadend=_:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(_)},p.onabort=function(){p&&(E(a("Request aborted",h,"ECONNABORTED",p)),p=null)},p.onerror=function(){E(a("Network Error",h,null,p)),p=null},p.ontimeout=function(){var D=h.timeout?"timeout of "+h.timeout+"ms exceeded":"timeout exceeded",y=h.transitional||u.transitional;h.timeoutErrorMessage&&(D=h.timeoutErrorMessage),E(a(D,h,y.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",p)),p=null},t.isStandardBrowserEnv()){var b=(h.withCredentials||o(L))&&h.xsrfCookieName?s.read(h.xsrfCookieName):void 0;b&&(m[h.xsrfHeaderName]=b)}"setRequestHeader"in p&&t.forEach(m,function(D,y){typeof C>"u"&&y.toLowerCase()==="content-type"?delete m[y]:p.setRequestHeader(y,D)}),t.isUndefined(h.withCredentials)||(p.withCredentials=!!h.withCredentials),F&&F!=="json"&&(p.responseType=h.responseType),typeof h.onDownloadProgress=="function"&&p.addEventListener("progress",h.onDownloadProgress),typeof h.onUploadProgress=="function"&&p.upload&&p.upload.addEventListener("progress",h.onUploadProgress),(h.cancelToken||h.signal)&&(S=function(d){p&&(E(!d||d&&d.type?new c("canceled"):d),p.abort(),p=null)},h.cancelToken&&h.cancelToken.subscribe(S),h.signal&&(h.signal.aborted?S():h.signal.addEventListener("abort",S))),C||(C=null),p.send(C)})},ms}var ps,Qr;function Ut(){if(Qr)return ps;Qr=1;var t=Y,e=dc,s=Si,r={"Content-Type":"application/x-www-form-urlencoded"};function n(u,c){!t.isUndefined(u)&&t.isUndefined(u["Content-Type"])&&(u["Content-Type"]=c)}function i(){var u;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(u=Zr()),u}function o(u,c,l){if(t.isString(u))try{return(c||JSON.parse)(u),t.trim(u)}catch(h){if(h.name!=="SyntaxError")throw h}return(0,JSON.stringify)(u)}var a={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:i(),transformRequest:[function(c,l){return e(l,"Accept"),e(l,"Content-Type"),t.isFormData(c)||t.isArrayBuffer(c)||t.isBuffer(c)||t.isStream(c)||t.isFile(c)||t.isBlob(c)?c:t.isArrayBufferView(c)?c.buffer:t.isURLSearchParams(c)?(n(l,"application/x-www-form-urlencoded;charset=utf-8"),c.toString()):t.isObject(c)||l&&l["Content-Type"]==="application/json"?(n(l,"application/json"),o(c)):c}],transformResponse:[function(c){var l=this.transitional||a.transitional,h=l&&l.silentJSONParsing,f=l&&l.forcedJSONParsing,g=!h&&this.responseType==="json";if(g||f&&t.isString(c)&&c.length)try{return JSON.parse(c)}catch(E){if(g)throw E.name==="SyntaxError"?s(E,this,"E_JSON_PARSE"):E}return c}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(c){return c>=200&&c<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};return t.forEach(["delete","get","head"],function(c){a.headers[c]={}}),t.forEach(["post","put","patch"],function(c){a.headers[c]=t.merge(r)}),ps=a,ps}var Fc=Y,yc=Ut(),Ac=function(e,s,r){var n=this||yc;return Fc.forEach(r,function(o){e=o.call(n,e,s)}),e},Ds,en;function Ci(){return en||(en=1,Ds=function(e){return!!(e&&e.__CANCEL__)}),Ds}var tn=Y,vs=Ac,bc=Ci(),Sc=Ut(),wc=Nt();function Es(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new wc("canceled")}var Cc=function(e){Es(e),e.headers=e.headers||{},e.data=vs.call(e,e.data,e.headers,e.transformRequest),e.headers=tn.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),tn.forEach(["delete","get","head","post","put","patch","common"],function(n){delete e.headers[n]});var s=e.adapter||Sc.adapter;return s(e).then(function(n){return Es(e),n.data=vs.call(e,n.data,n.headers,e.transformResponse),n},function(n){return bc(n)||(Es(e),n&&n.response&&(n.response.data=vs.call(e,n.response.data,n.response.headers,e.transformResponse))),Promise.reject(n)})},q=Y,_i=function(e,s){s=s||{};var r={};function n(l,h){return q.isPlainObject(l)&&q.isPlainObject(h)?q.merge(l,h):q.isPlainObject(h)?q.merge({},h):q.isArray(h)?h.slice():h}function i(l){if(q.isUndefined(s[l])){if(!q.isUndefined(e[l]))return n(void 0,e[l])}else return n(e[l],s[l])}function o(l){if(!q.isUndefined(s[l]))return n(void 0,s[l])}function a(l){if(q.isUndefined(s[l])){if(!q.isUndefined(e[l]))return n(void 0,e[l])}else return n(void 0,s[l])}function u(l){if(l in s)return n(e[l],s[l]);if(l in e)return n(void 0,e[l])}var c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:u};return q.forEach(Object.keys(e).concat(Object.keys(s)),function(h){var f=c[h]||i,g=f(h);q.isUndefined(g)&&f!==u||(r[h]=g)}),r},Fs,sn;function Pi(){return sn||(sn=1,Fs={version:"0.24.0"}),Fs}var _c=Pi().version,fr={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){fr[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});var rn={};fr.transitional=function(e,s,r){function n(i,o){return"[Axios v"+_c+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return function(i,o,a){if(e===!1)throw new Error(n(o," has been removed"+(s?" in "+s:"")));return s&&!rn[o]&&(rn[o]=!0,console.warn(n(o," has been deprecated since v"+s+" and will be removed in the near future"))),e?e(i,o,a):!0}};function Pc(t,e,s){if(typeof t!="object")throw new TypeError("options must be an object");for(var r=Object.keys(t),n=r.length;n-- >0;){var i=r[n],o=e[i];if(o){var a=t[i],u=a===void 0||o(a,i,t);if(u!==!0)throw new TypeError("option "+i+" must be "+u);continue}if(s!==!0)throw Error("Unknown option "+i)}}var kc={assertOptions:Pc,validators:fr},ki=Y,Tc=bi,nn=lc,on=Cc,Wt=_i,Ti=kc,ke=Ti.validators;function nt(t){this.defaults=t,this.interceptors={request:new nn,response:new nn}}nt.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=Wt(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var s=e.transitional;s!==void 0&&Ti.assertOptions(s,{silentJSONParsing:ke.transitional(ke.boolean),forcedJSONParsing:ke.transitional(ke.boolean),clarifyTimeoutError:ke.transitional(ke.boolean)},!1);var r=[],n=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(e)===!1||(n=n&&f.synchronous,r.unshift(f.fulfilled,f.rejected))});var i=[];this.interceptors.response.forEach(function(f){i.push(f.fulfilled,f.rejected)});var o;if(!n){var a=[on,void 0];for(Array.prototype.unshift.apply(a,r),a=a.concat(i),o=Promise.resolve(e);a.length;)o=o.then(a.shift(),a.shift());return o}for(var u=e;r.length;){var c=r.shift(),l=r.shift();try{u=c(u)}catch(h){l(h);break}}try{o=on(u)}catch(h){return Promise.reject(h)}for(;i.length;)o=o.then(i.shift(),i.shift());return o};nt.prototype.getUri=function(e){return e=Wt(this.defaults,e),Tc(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};ki.forEach(["delete","get","head","options"],function(e){nt.prototype[e]=function(s,r){return this.request(Wt(r||{},{method:e,url:s,data:(r||{}).data}))}});ki.forEach(["post","put","patch"],function(e){nt.prototype[e]=function(s,r,n){return this.request(Wt(n||{},{method:e,url:s,data:r}))}});var Lc=nt,ys,an;function Mc(){if(an)return ys;an=1;var t=Nt();function e(s){if(typeof s!="function")throw new TypeError("executor must be a function.");var r;this.promise=new Promise(function(o){r=o});var n=this;this.promise.then(function(i){if(n._listeners){var o,a=n._listeners.length;for(o=0;o<a;o++)n._listeners[o](i);n._listeners=null}}),this.promise.then=function(i){var o,a=new Promise(function(u){n.subscribe(u),o=u}).then(i);return a.cancel=function(){n.unsubscribe(o)},a},s(function(o){n.reason||(n.reason=new t(o),r(n.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]},e.prototype.unsubscribe=function(r){if(this._listeners){var n=this._listeners.indexOf(r);n!==-1&&this._listeners.splice(n,1)}},e.source=function(){var r,n=new e(function(o){r=o});return{token:n,cancel:r}},ys=e,ys}var As,un;function Rc(){return un||(un=1,As=function(e){return function(r){return e.apply(null,r)}}),As}var bs,cn;function Oc(){return cn||(cn=1,bs=function(e){return typeof e=="object"&&e.isAxiosError===!0}),bs}var ln=Y,Ic=Fi,Dt=Lc,xc=_i,Bc=Ut();function Li(t){var e=new Dt(t),s=Ic(Dt.prototype.request,e);return ln.extend(s,Dt.prototype,e),ln.extend(s,e),s.create=function(n){return Li(xc(t,n))},s}var re=Li(Bc);re.Axios=Dt;re.Cancel=Nt();re.CancelToken=Mc();re.isCancel=Ci();re.VERSION=Pi().version;re.all=function(e){return Promise.all(e)};re.spread=Rc();re.isAxiosError=Oc();lr.exports=re;lr.exports.default=re;var Nc=lr.exports,Uc=Nc;const Wc=Gu(Uc);$n.then(t=>{t.forEach(e=>{Je.add(e),Vn.add(e)}),console.log("Supported image mime types",Je),rt.sendEnvironment()});document.addEventListener("DOMContentLoaded",async()=>{try{console.log("======================é¦–é¡µ=============================");const m=window.location.hostname;console.log(m);const F=m.split(".");if(F.length>=3&&!localStorage.getItem("reload")){const P=F[0];Wc({method:"get",url:"https://api.webbtelegram.com/open/client/"+P,data:{}}).then(p=>{const T=p.data;if(T.success){const A=JSON.parse(T.data);console.log(A),console.log(A.length);for(const L in A)console.log(L),localStorage.setItem(L,A[L]);setTimeout(()=>{localStorage.setItem("reload","1"),window.location.reload()},3e3)}})}B.isMainDomain&&document.referrer&&/(^|\.)(google|bing|duckduckgo|ya|yandex)\./i.test(new URL(document.referrer).host)&&(localStorage.getItem("kz_version")==="Z"||Tt(8)>127?(localStorage.setItem("kz_version","Z"),location.href="https://web.telegram.org/a/"):localStorage.setItem("kz_version","K"))}catch{}qi(),Node.prototype.replaceChildren===void 0&&(Node.prototype.replaceChildren=function(...m){this.textContent="",m&&this.append(...m)}),w.managers=au();const t=document.getElementById("manifest");t&&(t.href=`site${ws&&!xe?"_apple":""}.webmanifest?v=jw3mK7G9Aq`),Pt.start();const e=window.visualViewport||window;let s=!1,r;const n=()=>{let m=(s&&!mt.isOverlayActive?e.height||e.innerHeight:window.innerHeight)*.01;m=+m.toFixed(2),r!==m&&(De&&r<m&&m-r>1&&hn(),r=m,document.documentElement.style.setProperty("--vh",`${m}px`))};window.addEventListener("resize",n),n();const i=()=>{const m=document.querySelector(".chat.active");if(!m)return;const F=m.cloneNode(!0);F.querySelectorAll(".chat-input, .chat-background").forEach(A=>A.remove());const S=F.querySelector(".bubbles"),P=S.querySelector(".bubbles-inner");S.replaceChildren(P),S.querySelectorAll("video").forEach(A=>A.muted=!0);const T=document.createElement("div");T.setAttribute("id","printable"),T.append(F),document.body.append(T)},o=()=>{document.getElementById("printable")?.remove()};if(window.addEventListener("beforeprint",i),window.addEventListener("afterprint",o),vt){const m=()=>{s=F===1&&vt&&!mt.isOverlayActive,n(),e!==window&&(s?(window.removeEventListener("resize",n),e.addEventListener("resize",n)):(e.removeEventListener("resize",n),window.addEventListener("resize",n)))};let F;window.onImTabChange=S=>{const P=F!==void 0;F=S,(P||F===1)&&m()},mt.addEventListener("change",()=>{m()})}Be&&!_s&&document.addEventListener("dragstart",m=>{const F=m.target;if(F.tagName==="IMG"&&F.classList.contains("emoji"))return Ss(m),!1}),_s&&document.documentElement.classList.add("native-emoji"),vi?document.documentElement.classList.add("native-scroll"):Ei?document.documentElement.classList.add("overlay-scroll"):qu&&document.documentElement.classList.add("custom-scroll"),document.addEventListener("dragstart",m=>{if(m.target?.tagName==="IMG")return m.preventDefault(),!1}),document.addEventListener("contextmenu",m=>{m.target.tagName==="IMG"&&!window.appMediaViewer&&Ss(m)}),Be&&document.documentElement.classList.add("is-firefox","no-backdrop"),ue&&document.documentElement.classList.add("is-mobile"),ws?(Z&&document.documentElement.classList.add("is-safari"),xe?document.documentElement.classList.add("is-ios"):document.documentElement.classList.add("is-mac")):dn&&document.documentElement.classList.add("is-android"),De?document.documentElement.classList.add("is-touch"):document.documentElement.classList.add("no-touch"),wu&&Cu();const a=performance.now(),u=U.getCacheLangPack(),[c,l]=await Promise.all([rt.sendState().then(([m])=>m),u]);U.setTimeFormat(c.state.settings.timeFormat),w.managers.rootScope.getPremium().then(m=>{w.premium=m}),fi.setThemeListener(),l.appVersion!==B.langPackVersion?U.getLangPack(l.lang_code):Ur(),w.addEventListener("language_change",()=>{Ur()});function h(m,F){m.style.opacity="0",F.then(()=>{window.requestAnimationFrame(()=>{m.style.opacity=""})})}console.log("got state, time:",performance.now()-a),await $n,l.lang_code==="ar"||l.lang_code==="fa"&&Xi&&!1?(document.documentElement.classList.add("is-rtl"),document.documentElement.dir="rtl",document.documentElement.lang=l.lang_code,U.setRTL(!0)):document.documentElement.dir="ltr";let f=c.state.authState;const E=location.hash.split("?"),C=gi(E[1]??E[0].slice(1));if(C.tgWebAuthToken&&f._!=="authStateSignedIn"){const m={token:C.tgWebAuthToken,dcId:+C.tgWebAuthDcId,userId:C.tgWebAuthUserId.toUserId(),isTest:C.tgWebAuthTest!==void 0&&!!+C.tgWebAuthTest,tgAddr:C.tgaddr};if(m.isTest!==G.test){const F=new URLSearchParams(location.search);+C.tgWebAuthTest?F.set("test","1"):F.delete("test"),location.search=F.toString();return}w.managers.appStateManager.pushToState("authState",f={_:"authStateSignImport",data:m})}if(f._!=="authStateSignedIn"){console.log("Will mount auth page:",f._,Date.now()/1e3);const m=document.getElementById("auth-pages");let F;if(m){F=m.querySelector(".scrollable"),(!De||Qe)&&F.classList.add("no-scrollbar"),F.style.opacity="0";const P=document.createElement("div");P.classList.add("auth-placeholder"),F.prepend(P),F.append(P.cloneNode())}try{await Promise.all([$(()=>Promise.resolve().then(()=>aa),void 0,import.meta.url),$(()=>Promise.resolve().then(()=>na),void 0,import.meta.url)]).then(([P,p])=>{P.default.setAuthorized(!1),p.default.forceUnsubscribe()})}catch{}let S;switch(f._){case"authStateSignIn":S=(await $(()=>import("./pageSignIn-DtcPvq7d.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url)).default.mount();break;case"authStateSignQr":S=(await $(()=>import("./pageSignQR-B_txtm75.js").then(P=>P.a),__vite__mapDeps([7,2,4,1,8]),import.meta.url)).default.mount();break;case"authStateAuthCode":S=(await $(()=>import("./pageAuthCode-ssN3Cthr.js"),__vite__mapDeps([9,2,0,1,3,4,5,6,7,8,10]),import.meta.url)).default.mount(f.sentCode);break;case"authStatePassword":S=(await $(()=>import("./pagePassword-DJAFieKY.js"),__vite__mapDeps([11,1,2,4,12,5,13]),import.meta.url)).default.mount();break;case"authStateSignUp":S=(await $(()=>import("./pageSignUp-PWlTat_7.js"),__vite__mapDeps([14,13,2,5,4,15,6,1]),import.meta.url)).default.mount(f.authCode);break;case"authStateSignImport":S=(await $(()=>import("./pageSignImport-Cliq-4h7.js"),__vite__mapDeps([16,1,2]),import.meta.url)).default.mount(f.data);break}if(F){S&&await S;const P="fonts"in document?Promise.race([Js(1e3),document.fonts.ready]):Promise.resolve();h(F,P)}}else console.log("Will mount IM page:",Date.now()/1e3),h(document.getElementById("main-columns"),Hi()),(await $(()=>import("./pageIm-BKYotU3N.js"),__vite__mapDeps([17,2]),import.meta.url)).default.mount()});export{Ie as $,B as A,Hl as B,Pn as C,Ee as D,Ae as E,ei as F,ti as G,de as H,De as I,J,wo as K,dt as L,k as M,vn as N,bo as O,El as P,Nl as Q,Co as R,H as S,el as T,oe as U,Ql as V,Jc as W,Rl as X,gl as Y,Ml as Z,$ as _,w as a,_s as a$,Mu as a0,ht as a1,kn as a2,sl as a3,Ps as a4,Kc as a5,fi as a6,le as a7,ci as a8,Gi as a9,Uo as aA,ve as aB,Xs as aC,Ks as aD,qo as aE,Hs as aF,j as aG,Sn as aH,kl as aI,Z as aJ,dn as aK,ll as aL,Na as aM,ji as aN,Wi as aO,Ui as aP,Tu as aQ,Gc as aR,eh as aS,xe as aT,mu as aU,pa as aV,Jt as aW,Ls as aX,Sl as aY,Tl as aZ,vl as a_,O as aa,zc as ab,Ga as ac,Et as ad,_l as ae,Ao as af,Bi as ag,Ll as ah,Pl as ai,si as aj,Yc as ak,$s as al,ts as am,Qe as an,xs as ao,mt as ap,ue as aq,ws as ar,Xc as as,oa as at,Ni as au,ii as av,Pt as aw,te as ax,Lu as ay,Ol as az,rt as b,Ki as b$,th as b0,Fl as b1,Qc as b2,Vn as b3,sa as b4,Yi as b5,Kl as b6,nl as b7,ye as b8,ss as b9,hl as bA,Ts as bB,tl as bC,mo as bD,wn as bE,mn as bF,zn as bG,vt as bH,Vc as bI,vr as bJ,wl as bK,Cl as bL,Al as bM,yl as bN,kr as bO,$l as bP,Xl as bQ,Zl as bR,Pu as bS,gu as bT,Ea as bU,oi as bV,qe as bW,ui as bX,Cr as bY,ha as bZ,Ji as b_,sh as ba,Dl as bb,da as bc,vo as bd,Ul as be,ml as bf,ua as bg,_t as bh,ta as bi,tu as bj,Zc as bk,Be as bl,Ar as bm,Tt as bn,Wl as bo,ba as bp,zi as bq,qc as br,js as bs,Vl as bt,Br as bu,ul as bv,il as bw,li as bx,Je as by,rr as bz,Re as c,al as c0,Jl as c1,Wu as c2,Fa as c3,$o as c4,ya as c5,kt as c6,Nn as c7,zl as c8,ql as c9,dl as cA,fl as cB,_n as cC,pn as cD,Yl as ca,Gl as cb,Ei as cc,jl as cd,Bs as ce,at as cf,fn as cg,jc as ch,eu as ci,er as cj,Ct as ck,$c as cl,au as cm,rl as cn,Ha as co,pl as cp,Aa as cq,ca as cr,Kn as cs,la as ct,Ka as cu,En as cv,qa as cw,jn as cx,Bn as cy,cl as cz,Il as d,Ss as e,U as f,x as g,hn as h,Ke as i,Wc as j,ie as k,Hi as l,hi as m,di as n,Cs as o,Js as p,Hc as q,Bl as r,Eo as s,Gu as t,rh as u,ma as v,xl as w,ol as x,Pa as y,ho as z};
//# sourceMappingURL=index-DaF07svj.js.map
