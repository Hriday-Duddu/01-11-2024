(()=>{"use strict";var e,t,n,o,r={92387:(e,t,n)=>{n.d(t,{t9:()=>T,$9:()=>k,u3:()=>M,UC:()=>A,s8:()=>N,Mk:()=>L,g8:()=>C,Cp:()=>P,Zf:()=>E,mR:()=>S});var o=n(83716),r=n(30879),s=n(46586),a=n(65054),i=n(69995),d=n(69118),c=n(97184);const u=150,l=5e3;let f;const h=new Map,m=new Map,p={chats:{},users:{},messages:{},documents:{},stickerSets:{},photos:{},webDocuments:{},commonBoxState:{},channelPtsById:{}};let g=!0;(0,a.Pz)((e=>{g=e}));const y=c.Eo?new BroadcastChannel(o.tuy):void 0;let b,v=[],w=[],I=!1;function C(e,t){return b=e,g?(f||(o.eMD&&console.log(">>> START LOAD WORKER"),f=new Worker(new URL(n.p+n.u(8415),n.b)),function(e){f?.addEventListener("message",(({data:t})=>{if(t)if("updates"===t.type){let n;if(o.eMD&&(n=performance.now()),t.updates.forEach(e),o.eMD){const e=performance.now()-n;e>5&&console.warn(`[API] Slow updates processing: ${t.updates.length} updates in ${e} ms`)}}else if("methodResponse"===t.type)L(t);else if("methodCallback"===t.type)N(t);else{if("unhandledError"===t.type)throw new Error(t.error?.message);"sendBeacon"===t.type?navigator.sendBeacon(t.url,t.data):"debugLog"===t.type&&(0,r.FI)(t.level,...t.args)}}))}(e),"iOS"===t.platform&&window.addEventListener("focus",(()=>{D(),setTimeout((()=>D()),1e3)}))),R({type:"initApi",args:[t,p]}).then((()=>{I=!0,w.forEach((e=>{T(e.fnName,...e.args).then(e.deferred.resolve).catch(e.deferred.reject)})),w=[],v.forEach((e=>{k(e.fnName,...e.args).then(e.deferred.resolve).catch(e.deferred.reject)})),v=[]}))):(function(e){y&&y.postMessage({type:"initApi",token:(0,a._w)(),initialArgs:e})}(t),Promise.resolve())}function S(e,t,n){p[e][t]=n}function E(e){Object.assign(p,e)}function P(e){return R({type:"toggleDebugMode",isEnabled:e})}function k(e,...t){if(!I){const n=new s.Z;return v.push({fnName:e,args:t,deferred:n}),n.promise}const n=R({type:"callMethod",name:e,args:t});return o.eMD&&(async()=>{try{await n}catch(e){}})(),n}function T(e,...t){if(!I&&g){const n=new s.Z;return w.push({fnName:e,args:t,deferred:n}),n.promise}const n=g?R({type:"callMethod",name:e,args:t}):function(e){const t=(0,i.Z)(),n={messageId:t,...e},o={messageId:t},r=new Promise(((e,t)=>{Object.assign(o,{resolve:e,reject:t})}));if("args"in n&&"name"in n&&"function"==typeof n.args[1]){n.withCallback=!0;const e=n.args.pop();o.callback=e,m.set(e,o)}return h.set(t,o),r.catch((()=>{})).finally((()=>{h.delete(t),o.callback&&m.delete(o.callback)})),function(e){y&&y.postMessage({type:"callApi",token:(0,a._w)(),...e})}(n),r}({name:e,args:t});return o.eMD&&(async()=>{try{await n}catch(e){}})(),n}function M(e){e.isCanceled=!0;const{messageId:t}=m.get(e)||{};if(t)if(g)A(t);else{if(!y)return;y.postMessage({type:"cancelApiProgress",token:(0,a._w)(),messageId:t})}}function A(e){f?.postMessage({type:"cancelProgress",messageId:e})}function L(e){const t=h.get(e.messageId);t&&(e.error?t.reject(e.error):t.resolve(e.response))}function N(e){h.get(e.messageId)?.callback?.(...e.callbackArgs)}function R(e){const t=(0,i.Z)(),n={messageId:t,...e},o={messageId:t},r=new Promise(((e,t)=>{Object.assign(o,{resolve:e,reject:t})}));if("args"in n&&"name"in n&&"function"==typeof n.args[1]){n.withCallback=!0;const e=n.args.pop();o.callback=e,m.set(e,o)}return o.DEBUG_payload=n,h.set(t,o),r.catch((()=>{})).finally((()=>{h.delete(t),o.callback&&m.delete(o.callback)})),f?.postMessage(n),r}const Z=Date.now();async function D(){let e=!1;try{await Promise.race([R({type:"ping"}),(0,d.wO)(u).then((()=>e?void 0:Promise.reject(new Error("HEALTH_CHECK_TIMEOUT"))))])}catch(e){console.error(e),Date.now()-Z>=l&&(f?.terminate(),f=void 0,b({"@type":"requestReconnectApi"}))}finally{e=!0}}},6137:(e,t,n)=>{n.d(t,{IU:()=>r.I,Vv:()=>o.Vv,_Q:()=>o._Q,_f:()=>o._f});var o=n(94746),r=n(9077)},9077:(e,t,n)=>{n.d(t,{I:()=>o});let o=function(e){return e[e.BlobUrl=0]="BlobUrl",e[e.Progressive=1]="Progressive",e[e.DownloadUrl=2]="DownloadUrl",e[e.Text=3]="Text",e}({})},94746:(e,t,n)=>{n.d(t,{Vv:()=>o,_Q:()=>s,_f:()=>r});let o=function(e){return e.Bold="MessageEntityBold",e.Blockquote="MessageEntityBlockquote",e.BotCommand="MessageEntityBotCommand",e.Cashtag="MessageEntityCashtag",e.Code="MessageEntityCode",e.Email="MessageEntityEmail",e.Hashtag="MessageEntityHashtag",e.Italic="MessageEntityItalic",e.MentionName="MessageEntityMentionName",e.Mention="MessageEntityMention",e.Phone="MessageEntityPhone",e.Pre="MessageEntityPre",e.Strike="MessageEntityStrike",e.TextUrl="MessageEntityTextUrl",e.Url="MessageEntityUrl",e.Underline="MessageEntityUnderline",e.Spoiler="MessageEntitySpoiler",e.CustomEmoji="MessageEntityCustomEmoji",e.Unknown="MessageEntityUnknown",e}({});const r=-1,s="MESSAGE_DELETED"},58912:(e,t,n)=>{n.d(t,{Z:()=>l});var o=n(60748),r=n(46752),s=n(60706),a=n(25190),i=n(70692),d=n(97799);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},c.apply(this,arguments)}const u=150,l=(0,o.X$)((function(e){const{size:t=u,play:n=!0,noLoop:l=!0,className:f,noTransition:h,nonInteractive:m,onLoad:p,onClick:g,...y}=e,[b,v]=(0,s.Z)(!1),w=(0,i.Z)(h||b),I=(0,a.Z)((()=>{v(),p?.()})),[C,S]=(0,o.eJ)(String(Math.random())),E=(0,a.Z)((()=>{!0===n&&S(String(Math.random())),g?.()}));return o.ZP.createElement(d.Z,c({className:(0,r.Z)(f,w),size:t,play:!0===n?C:n,noLoop:l,onClick:m?void 0:E,onLoad:I},y))}))},97799:(e,t,n)=>{n.d(t,{Z:()=>C});var o=n(60748),r=n(57710),s=n(84089),a=n(46752),i=n(80036),d=n(69995),c=n(27370),u=n(97184),l=n(22268),f=n(274),h=n(18674),m=n(25190),p=n(92112),g=n(76997),y=n(70971),b=n(34446),v=n(3927),w=n(27704),I=n(13819);const C=(0,o.X$)((({ref:e,renderId:t,className:n,style:C,tgsUrl:E,play:P,playSegment:k,speed:T,noLoop:M,size:A,quality:L,isLowPriority:N,color:R,forceAlways:Z,forceOnHeavyAnimation:D,sharedCanvas:B,sharedCanvasCoords:O,onClick:x,onLoad:_,onEnded:F,onLoop:j})=>{let $=(0,o.sO)(null);e&&($=e);const U=(0,w.Z)(),[V,H]=(0,o.eJ)(),W=(0,o.sO)(),K=(0,o.sO)(!0),G=!B&&R,z=(0,l.Z)(G?R:void 0),q=P||!1!==P&&k,Y=(0,y.Y)(P),J=(0,y.Y)(k),X=(0,o.sO)();(0,b.Z)((()=>{if(R&&!G){const{r:e,g:t,b:n}=(0,c.oo)(R);X.current=[e,t,n]}else X.current=void 0}),[R,G]);const Q=(0,o.sO)(!1);(0,o.d4)((()=>()=>{Q.current=!0}),[]);const ee=(0,m.Z)((()=>{if(W.current||Q.current||!E||B&&(!O||!B.offsetWidth||!B.offsetHeight))return;const e=$.current||B;if(!e)return;const n=(0,s._)().init(E,e,t||(0,d.Z)(),{size:A,noLoop:M,quality:L,isLowPriority:N,coords:O},U,X.current,_,F,j);T&&n.setSpeed(T),H(n),W.current=n}));(0,o.d4)((()=>{(0,s._)()?ee():(0,s.t)().then(ee)}),[ee,E,B,O]);const te=(0,v.Z)(ee,[ee],150);(0,g.Z)(B,te),(0,o.d4)((()=>{V&&V.setColor(X.current)}),[R,V]),(0,o.d4)((()=>()=>{W.current?.removeView(U)}),[U]);const ne=(0,m.Z)(((e=!1)=>{V&&(Y.current||J.current)&&!S(Z)&&(J.current?V.playSegment(J.current,e,U):V.play(e,U))})),oe=(0,m.Z)((()=>{(0,r.i$)(ne)})),re=(0,m.Z)((()=>{V?.isPlaying()&&V.pause(U)}));if((0,f.Z)((([e])=>{void 0!==e&&M!==e&&V?.setNoLoop(M)}),[M,V]),(0,f.Z)((([e])=>{void 0!==e&&O!==e&&V?.setSharedCanvasCoords(U,O)}),[O,U,V]),(0,o.d4)((()=>{V&&(q?S(Z,D)||ne(M):re())}),[V,q,M,ne,re,Z,D]),(0,o.d4)((()=>{V&&(K.current?K.current=!1:E&&(V.changeData(E),ne()))}),[ne,V,E]),(0,h.ZP)(re,ne,!q||Z||D),(0,p.ZP)(re,ne,!q||Z),(0,I.Z)(re,oe,!q||Z),!B)return o.ZP.createElement("div",{ref:$,className:(0,a.Z)("AnimatedSticker",n),style:(0,i.Z)(void 0!==A&&`width: ${A}px; height: ${A}px;`,x&&!u.D$&&"cursor: pointer",z,C),onClick:x})}));function S(e=!1,t=!1){return!e&&(!t&&(0,h.zG)()||(0,p.lh)()||(0,I.q)())}},96459:(e,t,n)=>{n.d(t,{Z:()=>g});var o=n(60748),r=n(33555),s=n(6137),a=n(7054),i=n(46752),d=n(74753),c=n(92085),u=n(25190),l=n(60422),f=n(36765);const h="a51PrE1gNHtEZTsTv199";var m=n(69123),p=n(53930);const g=(0,o.X$)((({ref:e,documentId:t,size:n=20,isBig:g,noPlay:y,className:b,loopLimit:v,style:w,withGridFix:I,withSharedAnimation:C,sharedCanvasRef:S,sharedCanvasHqRef:E,withTranslucentThumb:P,shouldPreloadPreview:k,forceAlways:T,forceOnHeavyAnimation:M,observeIntersectionForLoading:A,observeIntersectionForPlaying:L,onClick:N,onAnimationEnd:R})=>{let Z=(0,o.sO)(null);e&&(Z=e);const{customEmoji:D,canPlay:B}=(0,l.Z)(t),O=(0,o.sO)(0),[x,_]=(0,o.eJ)(!0),F=D?.shouldUseTextColor,j=(0,c.Z)(Z,!F),$=(0,u.Z)((e=>{v&&(O.current+=1,O.current>=v?(_(!1),e.currentTarget.currentTime=0):(0,d.Z)(e.currentTarget))})),U=(0,u.Z)((()=>{v&&(O.current+=1,O.current>=v-1&&_(!1))})),V=D?.stickerSetInfo&&(0,a.Si0)((0,r.Rd)(),D.stickerSetInfo);return o.ZP.createElement("div",{ref:Z,className:(0,i.Z)("_cPVRYXabaTi4NzwuAuv",b,"custom-emoji","emoji",I&&"ATlIbx7wziKC9hp9tIjf"),onClick:N,onAnimationEnd:R,"data-entity-type":s.Vv.CustomEmoji,"data-document-id":t,"data-alt":D?.emoji,style:w},o.ZP.createElement("img",{className:"YK4vvTRvF0f3KvHfTCcq",src:m,alt:D?.emoji,"data-entity-type":s.Vv.CustomEmoji,"data-document-id":t,draggable:!1}),D?o.ZP.createElement(f.Z,{containerRef:Z,sticker:D,isSmall:!g,size:n,noPlay:y||!B,thumbClassName:h,fullMediaClassName:"ZjeZqyl7YXHdvIDo1TbO",shouldLoop:x,loopLimit:v,shouldPreloadPreview:k||y||!B,forceOnHeavyAnimation:M,forceAlways:T,observeIntersectionForLoading:A,observeIntersectionForPlaying:L,withSharedAnimation:C,sharedCanvasRef:V?E:S,withTranslucentThumb:P,onVideoEnded:$,onAnimatedStickerLoop:U,customColor:j}):o.ZP.createElement("img",{className:h,src:p,alt:"Emoji",draggable:!1}))}))},45370:(e,t,n)=>{n.d(t,{Z:()=>c});var o=n(60748),r=n(6137),s=n(4463),a=n(48035),i=n(32340),d=n(14612);const c=(0,o.X$)((function({lang:e,message:t,translatedText:n,noEmoji:c=!1,highlight:u,truncateLength:l=s.lN,observeIntersectionForLoading:f,observeIntersectionForPlaying:h,withTranslucentThumbs:m=!1,inChatList:p=!1,emojiSize:g}){const{text:y,entities:b}=(0,s.tK)(t,p)||{},v=b?.some((e=>e.type===r.Vv.Spoiler)),w=b?.some((e=>e.type===r.Vv.CustomEmoji));if(!y||!v&&!w){const r=n?.text||(0,s.MK)(e,t,c),d=(0,a.Z)(r,l);return o.ZP.createElement("span",null,u?(0,i.Z)(d,["emoji","highlight"],{highlight:u}):(0,i.Z)(d))}const I=!c&&(0,s.Eb)(t);return o.ZP.createElement(o.ZP.Fragment,null,[I?(0,i.Z)(`${I} `):void 0,(0,s.Kk)(e,t,o.ZP.createElement(d.Z,{messageOrStory:t,translatedText:n,highlight:u,isSimple:!0,observeIntersectionForLoading:f,observeIntersectionForPlaying:h,withTranslucentThumbs:m,truncateLength:l,inChatList:p,emojiSize:g}))].flat().filter(Boolean))}))},14612:(e,t,n)=>{n.d(t,{Z:()=>u});var o=n(60748),r=n(6137),s=n(4463),a=n(48035),i=n(4809),d=n(34446),c=n(27704);const u=(0,o.X$)((function({messageOrStory:e,translatedText:t,isForAnimation:n,emojiSize:u,highlight:l,isSimple:f,truncateLength:h,isProtected:m,observeIntersectionForLoading:p,observeIntersectionForPlaying:g,withTranslucentThumbs:y,shouldRenderAsHtml:b,inChatList:v,forcePlayback:w,focusedQuote:I}){const C=(0,o.sO)(null),S=(0,o.sO)(null),E=(0,o.sO)(0),P=t||(0,s.tK)(e,v),k=n&&P?(0,s.If)(P):P,{text:T,entities:M}=k||{},A=(0,c.Z)();(0,d.Z)((()=>{E.current+=1}),[T,M]);const L=(0,o.Ye)((()=>{const e=M?.some((e=>e.type===r.Vv.Spoiler));return!e&&(M?.filter((e=>e.type===r.Vv.CustomEmoji)).length||0)>=3}),[M])||0;if(!T){const t=(0,s.UD)(e);return t?[(0,a.Z)(t,h)]:void 0}return o.ZP.createElement(o.ZP.Fragment,null,[L&&o.ZP.createElement("canvas",{ref:C,className:"shared-canvas"}),L&&o.ZP.createElement("canvas",{ref:S,className:"shared-canvas"}),(0,i.H)({text:(0,a.Z)(T,h),entities:M,highlight:l,emojiSize:u,shouldRenderAsHtml:b,containerId:A,isSimple:f,isProtected:m,observeIntersectionForLoading:p,observeIntersectionForPlaying:g,withTranslucentThumbs:y,sharedCanvasRef:C,sharedCanvasHqRef:S,cacheBuster:E.current.toString(),forcePlayback:w,focusedQuote:I})].flat().filter(Boolean))}))},10088:(e,t,n)=>{n.d(t,{Z:()=>w});var o=n(60748),r=n(33555),s=n(6137),a=n(83716);const i=e=>{const t=[];let n=0;const o=e.length;let r;for(;n<o;){if(r=e[n++],55296==(63488&r))throw new RangeError("UTF-16(encode): Illegal UTF-16 value");r>65535&&(r-=65536,t.push(String.fromCharCode(r>>>10&1023|55296)),r=56320|1023&r),t.push(String.fromCharCode(r))}return t.join("")},d=36,c=700,u=1,l=26,f=38,h=2147483647;function m(e,t,n){let o;for(e=n?Math.floor(e/c):e>>1,e+=Math.floor(e/t),o=0;e>(d-u)*l>>1;o+=d)e=Math.floor(e/(d-u));return Math.floor(o+(d-u+1)*e/(e+f))}function p(e,t){const n=[],o=[],r=e.length;let s,a,c,f,p,g,y,b,v,w,I,C,S;for(s=128,c=0,f=72,p=e.lastIndexOf("-"),p<0&&(p=0),g=0;g<p;++g){if(t&&(o[n.length]=e.charCodeAt(g)-65<26),e.charCodeAt(g)>=128)throw new RangeError("Illegal input >= 0x80");n.push(e.charCodeAt(g))}for(y=p>0?p+1:0;y<r;){for(b=c,v=1,w=d;;w+=d){if(y>=r)throw RangeError("punycode_bad_input(1)");if(I=(E=e.charCodeAt(y++))-48<10?E-22:E-65<26?E-65:E-97<26?E-97:d,I>=d)throw RangeError("punycode_bad_input(2)");if(I>Math.floor((h-c)/v))throw RangeError("punycode_overflow(1)");if(c+=I*v,C=w<=f?u:w>=f+l?l:w-f,I<C)break;if(v>Math.floor(h/(d-C)))throw RangeError("punycode_overflow(2)");v*=d-C}if(a=n.length+1,f=m(c-b,a,0===b),Math.floor(c/a)>h-s)throw RangeError("punycode_overflow(3)");s+=Math.floor(c/a),c%=a,t&&o.splice(c,0,e.charCodeAt(y-1)-65<26),n.splice(c,0,s),c++}var E;if(t)for(c=0,S=n.length;c<S;c++)o[c]&&(n[c]=String.fromCharCode(n[c]).toUpperCase().charCodeAt(0));return i(n)}var g=n(46752),y=n(81396),b=n(25190);function v(e){if(!e)return;const t=(0,y.X)(e);if(t)try{let e=decodeURI(t.replace(/%%/g,"%25"));const n=e.match(/^https?:\/\/([^/:?#]+)(?:[/:?#]|$)/i);if(!n)return;const o=n[1];return e=e.replace(o,function(e){const t=e.split("."),n=[];for(let e=0;e<t.length;++e){const o=t[e];n.push(o.match(/^xn--/)?p(o.slice(4)):o)}return n.join(".")}(o)),e}catch(t){a.eMD&&console.error("SafeLink.getDecodedUrl error ",e,t)}}const w=(0,o.X$)((({url:e,text:t,className:n,children:a,isRtl:i})=>{const{openUrl:d}=(0,r.Sv)(),c=a||t,u=e===t,l=(0,b.Z)((t=>!e||(t.preventDefault(),d({url:e,shouldSkipModal:u}),!1)));if(!e)return;const f=(0,g.Z)(n||"text-entity-link",t.length>50&&"long-word-break-all");return o.ZP.createElement("a",{href:(0,y.X)(e),title:v(e),target:"_blank",rel:"noopener noreferrer",className:f,onClick:l,dir:i?"rtl":"auto","data-entity-type":s.Vv.Url},c)}))},36765:(e,t,n)=>{n.d(t,{Z:()=>E});var o=n(60748),r=n(33555),s=n(4463),a=n(7054),i=n(46752),d=n(40647),c=n(97184),u=n(22268),l=n(45864),f=n(60706),h=n(18674),m=n(3657),p=n(6202),g=n(70692),y=n(2903),b=n(27704),v=n(38146),w=n(57080),I=n(97799);const C="daPpv_C6WkmYIJyCxxOx",S="lLI5VQHfbz7HKFfIcAnu",E=(0,o.X$)((({containerRef:e,sticker:t,thumbClassName:n,fullMediaHash:E,fullMediaClassName:P,isSmall:k,size:T=24,customColor:M,loopLimit:A,shouldLoop:L=!1,shouldPreloadPreview:N,forceAlways:R,forceOnHeavyAnimation:Z,observeIntersectionForLoading:D,observeIntersectionForPlaying:B,noLoad:O,noPlay:x,withSharedAnimation:_,withTranslucentThumb:F,sharedCanvasRef:j,onVideoEnded:$,onAnimatedStickerLoop:U})=>{const{id:V,isLottie:H,stickerSetInfo:W,emoji:K}=t,[G,z]=(0,f.Z)(),q=t.isVideo&&(!c.Hh||G),Y=t.isVideo&&!q,J=!H&&!Y,X=(0,s.RK)(t.id),Q=(0,v.Z)(),ee=(0,u.Z)(M),te=(0,m.Op)(e,D),ne=te&&!O,oe=(0,m.Op)(e,B)&&te&&!x,re=(0,y.Z)(t),se=d.UV(X),ae=(0,p.Z)(X,Boolean(se||!x)),ie=M?re:ae||re;E||(E=q||J&&k?X:`sticker${V}`);const de=Boolean(E===X&&ae),ce=(0,p.Z)(E,!ne||de),[ue,le]=(0,f.Z)(Boolean(H&&ce&&!ae)),[fe,he,me]=(0,f.Z)(!c.wZ||!(0,h.zG)());(0,h.ZP)(me,he,fe);const pe=fe&&ce&&(J||ue),ge=j&&!F,ye=(0,g.Z)(ie&&!pe),be=(0,g.Z)(pe),ve=H&&ae,we=(0,l.Z)(e,j);(0,p.Z)(X,!ne||!N);const Ie=(0,b.Z)(),Ce=[_?"shared":Ie,V,T,_?M:void 0,Q].filter(Boolean).join("_");return o.ZP.createElement(o.ZP.Fragment,null,o.ZP.createElement("img",{src:ie,className:(0,i.Z)("JutR25BuG9LYhLOr69Ix",ve&&C,ge&&"qH6Cov7zwmysL5nAnEjg",n,ye,"sticker-media"),alt:"",draggable:!1}),fe&&(H?o.ZP.createElement(I.Z,{key:Ce,renderId:Ce,size:T,className:(0,i.Z)(S,(ve||ge)&&C,P,be),tgsUrl:ce,play:oe,noLoop:!L,forceOnHeavyAnimation:R||Z,forceAlways:R,isLowPriority:k&&!(0,a.Si0)((0,r.Rd)(),W),sharedCanvas:j?.current||void 0,sharedCanvasCoords:we,onLoad:le,onLoop:U,onEnded:U,color:M}):Y?o.ZP.createElement(w.Z,{canPlay:oe&&L,className:(0,i.Z)(S,P,be,"sticker-media"),src:ce,playsInline:!0,muted:!0,loop:!A,isPriority:R,disablePictureInPicture:!0,onReady:le,onBroken:z,onEnded:$,style:ee}):o.ZP.createElement("img",{className:(0,i.Z)(S,P,be,"sticker-media"),src:ce,alt:K,style:ee,draggable:!1})))}))},58987:(e,t,n)=>{n.d(t,{Z:()=>u});var o=n(60748),r=n(83716),s=n(46752),a=n(98138),i=n(2155),d=n(32340);const c="aJM6jZTv0FGmbmVoeSGw",u=(0,o.X$)((({className:e,letterClassName:t,topicId:n,iconColor:u,title:l,onClick:f})=>{const h=(0,a.gL)(u);return n===r.OxA?o.ZP.createElement("i",{className:(0,s.Z)(c,e,"icon","icon-hashtag","general-forum-icon"),onClick:f}):o.ZP.createElement("div",{className:(0,s.Z)(c,e),onClick:f},o.ZP.createElement("img",{className:"BYayNMDdPVgrna3NsHfu",src:h,alt:"",draggable:!1}),o.ZP.createElement("div",{className:(0,s.Z)("G4SxYH1X0X2e4J1z7GPV",t,"topic-icon-letter")},(0,d.Z)((0,i.Xv)(l,1))))}))},47348:(e,t,n)=>{n.d(t,{l:()=>C});const o=n.p+"QrPlane.a921709f266564f65b7e.tgs",r=n.p+"CameraFlip.1a9fe44cf01fcb22347d.tgs",s=n.p+"HandFilled.f87939d160f1dc288586.tgs",a=n.p+"HandOutline.f9831751ba60df30c484.tgs",i=n.p+"Speaker.04bb3743412b41ff83c5.tgs",d=n.p+"VoiceAllowTalk.a9cc7c39ec438973ddc9.tgs",c=n.p+"VoiceMini.bf00ffdf69625c579569.tgs",u=n.p+"VoiceMuted.a4b4ec6bfd7c6c5fb275.tgs",l=n.p+"VoiceOutlined.91b394ab3562cdfad6bc.tgs",f=n.p+"PartyPopper.287e4290662b3d2b269c.tgs",h=n.p+"Invite.4502ec3aa4249d6e6723.tgs",m=n.p+"Requests.af9f19772695a8898810.tgs",p=n.p+"TwoFactorSetupMonkeyClose.604c4c833d322b7e6c3e.tgs",g=n.p+"TwoFactorSetupMonkeyIdle.dea4a492c144df84ddab.tgs",y=n.p+"TwoFactorSetupMonkeyPeek.1905436b042520363d7e.tgs",b=n.p+"TwoFactorSetupMonkeyTracking.eb5a7a6f166fb7589c12.tgs",v=n.p+"Congratulations.b6623b8efc6fedec9d33.tgs",w=n.p+"DiscussionGroupsDucks.9ea453d1be9d1b0ee77a.tgs",I=n.p+"Experimental.43d62096368bf5a00ae3.tgs",C={MonkeyIdle:g,MonkeyTracking:b,MonkeyClose:p,MonkeyPeek:y,FoldersAll:n.p+"FoldersAll.3f9f9e243d19f0fbf9aa.tgs",FoldersNew:n.p+"FoldersNew.9a40d71c0c8be70f5bd1.tgs",FoldersShare:n.p+"FoldersShare.3356f97ced75bf97121c.tgs",DiscussionGroups:w,Lock:n.p+"Lock.12547a0228d4fa544e53.tgs",CameraFlip:r,HandFilled:s,HandOutline:a,Speaker:i,VoiceAllowTalk:d,VoiceMini:c,VoiceMuted:u,VoiceOutlined:l,JoinRequest:m,Invite:h,QrPlane:o,Congratulations:v,Experimental:I,PartyPopper:f}},15376:(e,t,n)=>{n.d(t,{K2:()=>a,Oh:()=>d,mD:()=>i,v6:()=>c,yW:()=>s});const o=1073741824,r=1048576;function s(e){return e>o/2?`${(e/o).toFixed(1)} GB`:e>r/2?`${(e/r).toFixed(1)} MB`:`${(e/1024).toFixed(1)} KB`}function a(e){const{fileName:t,mimeType:n}=e;return i(t,n)}function i(e,t){return e&&-1!==e.indexOf(".")?e.split(".").pop():t.split("/").pop()}function d(e){switch(e){case"apk":case"xls":case"xlsx":case"ods":return"green";case"zip":case"rar":case"7z":case"tar":case"gz":case"bz2":case"liz":case"lz4":case"lz5":case"xz":case"zst":case"wim":case"ppt":case"pptx":case"odp":return"orange";case"pdf":case"xps":return"red";default:return"default"}}function c(e){return Boolean(e.previewBlobUrl||e.thumbnail)}},74399:(e,t,n)=>{n.d(t,{Eh:()=>P,Fp:()=>f,GC:()=>k,Gw:()=>d,Kf:()=>S,L6:()=>i,PA:()=>L,Rj:()=>c,W7:()=>T,Wr:()=>A,fM:()=>E,jg:()=>N,kc:()=>C,lE:()=>M,vY:()=>l,wB:()=>h});var o=n(83716),r=n(4463),s=n(97184),a=n(43858);const i="(max-height: 640px)",d=parseInt(getComputedStyle(document.documentElement).fontSize,10),c=240,u=300,l={width:640,height:640},f={width:800,height:800},h="4986041492570112461",m={width:100,height:100},p=4.5,g=7,y=29,b=30;let v,w,I;function C(e,t,n,o,r){const s=t&&n?2.25:t||n?1.625:0,i=function(e,t,n){if(!n)return e?b:y;const{width:o}=a.Z.get();return v||(v=Math.min(b,o/d-p)),w||(w=Math.min(y,o/d-g)),I||(I=Math.min(y,o/d-p)),e?v:t?I:w}(e,o,r)-s;return i*d}function S({width:e,height:t,fromOwnMessage:n,asForwarded:o,isWebPageMedia:r,isGif:s,noAvatars:a,isMobile:i}){const c=t/e,l=C(n,o,r,a,i),f=function(e,t){return e&&t&&t>=.75&&t<=1.25?20*d:27*d}(s,c),h=s?Math.max(u,e):e;return N(l,f,h,s?t*(h/e):t)}function E(e,t){const n=window.matchMedia(i),{width:o,height:r}=a.Z.get();let c=t&&n.matches?10:8.25;return e&&!s.$b&&(c=n.matches?10:12.5),{width:o,height:r-c*d}}function P(e,t,n,o,s,a){const{width:i,height:d}=(0,r.HV)(e)||m;return S({width:i,height:d,fromOwnMessage:t,asForwarded:n,isWebPageMedia:o,noAvatars:s,isMobile:a})}function k(e,t,n,o,s,a){const{width:i,height:d}=(0,r.jC)(e)||m;return S({width:i,height:d,fromOwnMessage:t,asForwarded:n,isWebPageMedia:o,isGif:e.isGif,noAvatars:s,isMobile:a})}function T(){return{width:2*d,height:2*d}}function M(e){return e?{width:3*d,height:3*d}:{width:3.375*d,height:3.375*d}}function A(e,t){const{width:n}=e;let{height:r}=e;e.id===h&&(r=n);const s=r&&n&&r/n,a=d*(t?o.w7O:o.K7x),i=s?a*s:a;return s&&i>a?{width:Math.round(a/s),height:a}:{width:a,height:i}}function L({width:e,height:t},n,o=!1){const{width:r,height:s}=E(n,o);return N(r,s,e,t)}function N(e,t,n,o){const r=o/n,s=Math.min(n,e);return Math.round(s*r)>t?{width:Math.round(t/r),height:t}:{width:s,height:Math.round(s*r)}}},18005:(e,t,n)=>{n.d(t,{D:()=>w});var o=n(60748),r=n(4463),s=n(9937),a=n(48035),i=n(32340),d=n(33555),c=n(46752),u=n(8337);const l=(0,o.X$)((({className:e,chatId:t,children:n})=>{const{openChat:r}=(0,d.Sv)(),s=(0,o.I4)((()=>{t&&r({id:t})}),[t,r]);return t?o.ZP.createElement(u.Z,{className:(0,c.Z)("ChatLink",e),onClick:s},n):n}));var f=n(96459);const h=({className:e,groupCall:t,children:n})=>{const{requestMasterAndJoinGroupCall:r}=(0,d.Sv)(),s=(0,o.I4)((()=>{t&&r({id:t.id,accessHash:t.accessHash})}),[t,r]);return t?o.ZP.createElement(u.Z,{className:(0,c.Z)("GroupCallLink",e),onClick:s},n):n},m=({className:e,message:t,children:n})=>{const{focusMessage:r}=(0,d.Sv)(),s=(0,o.I4)((()=>{t&&r({chatId:t.chatId,messageId:t.id})}),[r,t]);return t?o.ZP.createElement(u.Z,{className:(0,c.Z)("MessageLink",e),onClick:s},n):n};var p=n(45370),g=n(58987);const y=({className:e,sender:t,children:n})=>{const{openChat:r}=(0,d.Sv)(),s=(0,o.I4)((()=>{t&&r({id:t.id})}),[t,r]);return t?o.ZP.createElement(u.Z,{className:(0,c.Z)("UserLink",e),onClick:s},n):n},b=32,v=" ";function w(e,t,n,d,c,u,y,w,S={},E,P){if(!t.content.action)return[];const{text:k,translationValues:T,amount:M,currency:A,call:L,score:N,topicEmojiIconId:R,giftCryptoInfo:Z,pluralValue:D}=t.content.action,B=[],O=S.asPlainText||S.isEmbedded,x="Chat.Service.Group.UpdatedPinnedMessage1"!==k||u?k:"Message.PinnedGenericMessage";let _,F=e(x,T?.length?T:void 0,void 0,D);if(x.includes("ScoredInGame")&&(F=F.replace("un1","%action_origin%").replace("un2","%message%")),"ActionGiftOutbound"===x&&(F=F.replace("un2","%gift_payment_amount%").replace(/\*\*/g,"")),"ActionGiftInbound"===x&&(F=F.replace("un1","%action_origin%").replace("un2","%gift_payment_amount%").replace(/\*\*/g,"")),F.includes("%payment_amount%")&&(_=C(F,"%payment_amount%",(0,s.x)(M,A,e.code)),F=_.pop(),B.push(..._)),_=C(F,"%action_origin%",n?I(n,O)||v:d?function(e,t,n){const s=(0,a.Z)((0,r.U)(e,t),b);return n?(0,i.Z)(s):o.ZP.createElement(l,{className:"action-link",chatId:t.id},t&&(0,i.Z)(s))}(e,d,O)||v:"User",""),F=_.pop(),B.push(..._),F.includes("%action_topic%")&&(_=C(F,"%action_topic%",[w?.iconEmojiId?o.ZP.createElement(f.Z,{documentId:w.iconEmojiId}):"",w?`${w.title}`:"a topic"],""),F=_.pop(),B.push(..._)),F.includes("%action_topic_icon%")){const e=R||w?.iconEmojiId;_=C(F,"%action_topic_icon%",e&&"0"!==e?o.ZP.createElement(f.Z,{documentId:e}):w?o.ZP.createElement(g.Z,{topicId:w.id,title:w.title}):"..."),F=_.pop(),B.push(..._)}if(F.includes("%gift_payment_amount%")){const t=(0,s.x)(M,A,e.code);let n=t;Z&&(n=`${Z.amount} ${Z.currency} (~${t})`),_=C(F,"%gift_payment_amount%",n),F=_.pop(),B.push(..._)}return F.includes("%amount%")&&(_=C(F,"%amount%",M),F=_.pop(),B.push(..._)),F.includes("%score%")&&(_=C(F,"%score%",N.toString()),F=_.pop(),B.push(..._)),_=C(F,"%target_user%",c?c.map((e=>I(e,O))).filter(Boolean):"User",""),F=_.pop(),B.push(..._),_=C(F,"%message%",u?function(e,t,n={},s,a){const{asPlainText:i,isEmbedded:d}=n;if(i)return(0,r.MK)(e,t,void 0,b);const c=o.ZP.createElement(p.Z,{lang:e,message:t,truncateLength:b,observeIntersectionForLoading:s,observeIntersectionForPlaying:a,withTranslucentThumbs:!0});return d?c:o.ZP.createElement(m,{className:"action-link",message:t},c)}(e,u,S,E,P):"a message"),F=_.pop(),B.push(..._),_=C(F,"%product%",u?function(e){return e.content&&e.content.invoice?e.content.invoice.title:"a product"}(u):"a product"),F=_.pop(),B.push(..._),_=C(F,"%target_chat%",y?function(e,t){const n="another chat";return t?n:o.ZP.createElement(l,{className:"action-link underlined-link",chatId:e},n)}(y,O):"another chat",""),_.forEach((e=>{B.push(...(0,i.Z)(e))})),S.asPlainText?B.join("").trim():L?function(e,t){return o.ZP.createElement(h,{groupCall:e},t)}(L,B):B}function I(e,t){const n=(0,a.Z)((0,r.Js)(e),b);return t?(0,i.Z)(n):o.ZP.createElement(y,{className:"action-link",sender:e},e&&(0,i.Z)(n))}function C(e,t,n,o=","){const r=e.indexOf(t);if(r<0||!n)return[e];const s=[];return s.push(e.substring(0,r)),Array.isArray(n)?n.forEach(((e,t)=>{s.push(e),t+1<n.length&&s.push(`${o} `)})):s.push(n),s.push(e.substring(r+t.length)),s.flat()}},32340:(e,t,n)=>{n.d(t,{Z:()=>h,h:()=>v});var o=n(60748),r=n(83716),s=n(33681),a=n(46752),i=n(34284),d=n(60782),c=n(97184),u=n(97373),l=n(10088);const f=/(\*\*|__).+?\1/g;function h(e,t=["emoji"],n){return"string"!=typeof e?[e]:(0,d.oA)(t.reduce(((e,t)=>{switch(t){case"escape_html":return function(e){const t=document.createElement("div");return e.reduce(((e,n)=>"string"!=typeof n?(e.push(n),e):(t.innerText=n,e.push(t.innerHTML),e)),[])}(e);case"hq_emoji":return s.Z.lastIndex=0,m(e,"big","jsx");case"emoji":return s.Z.lastIndex=0,m(e,"small","jsx");case"emoji_html":return s.Z.lastIndex=0,m(e,"small","html");case"br":return p(e,"jsx");case"br_html":return p(e,"html");case"highlight":return g(e,n.highlight);case"quote":return g(e,n.quote,!0);case"links":return e.reduce(((e,t)=>{if("string"!=typeof t)return e.push(t),e;const n=t.match(y);if(!n||!n.length)return e.push(t),e;const r=[];let s=n.shift(),a=0;for(;s;){const e=t.indexOf(s,a);r.push(t.substring(a,e)),s.startsWith("@")?r.push(o.ZP.createElement(u.Z,{username:s},s)):(s.endsWith("?")&&(s=s.slice(0,s.length-1)),r.push(o.ZP.createElement(l.Z,{text:s,url:s}))),a=e+s.length,s=n.shift()}return r.push(t.substring(a)),[...e,...r]}),[]);case"simple_markdown":return b(e,"jsx");case"simple_markdown_html":return b(e,"html")}return e}),[e]))}function m(e,t,n){return c.op?e:e.reduce(((e,d)=>{if("string"!=typeof d)return e.push(d),e;const c=(d=(0,i.g6)(d)).split(s.Z),u=d.match(s.Z)||[];return e.push(c[0]),u.reduce(((e,s,d)=>{const u=(0,i.DW)(s);if(u){const d=`${r.v5x?r._nY:"."}/img-apple-${"big"===t?"160":"64"}/${u}.png`,c=(0,a.Z)("emoji","small"===t&&"emoji-small");if("jsx"===n){const t=i.Uz.has(d);e.push(o.ZP.createElement("img",{src:d,className:`${c}${t?"":" opacity-transition slow shown"}`,alt:s,"data-path":d,draggable:!1,onLoad:t?void 0:i.mE}))}"html"===n&&e.push(`<img            draggable="false"            class="${c}"            src="${d}"            alt="${s}"          />`)}else e.push(s);const l=2*d+2;return c[l]&&e.push(c[l]),e}),e)}),[])}function p(e,t){return e.reduce(((e,n)=>{if("string"!=typeof n)return e.push(n),e;const r=n.split(/\r\n|\r|\n/g).reduce(((e,n,r,s)=>{const a=n.trimLeft(),i=n.length-a.length;return e.push(String.fromCharCode(160).repeat(i)+a),r!==s.length-1&&e.push("jsx"===t?o.ZP.createElement("br",null):"<br />"),e}),[]);return[...e,...r]}),[])}function g(e,t,n){return e.reduce(((e,r)=>{if("string"!=typeof r||!t)return e.push(r),e;const s=r.toLowerCase().indexOf(t.toLowerCase());if(s<0)return e.push(r),e;const i=[];return i.push(r.substring(0,s)),i.push(o.ZP.createElement("span",{className:(0,a.Z)("matching-text-highlight",n&&"is-quote")},r.substring(s,s+t.length))),i.push(r.substring(s+t.length)),[...e,...i]}),[])}const y=new RegExp(`${r.FM6}|${r.uWu}`,"ig");function b(e,t){return e.reduce(((e,n)=>{if("string"!=typeof n)return e.push(n),e;const r=n.split(f),s=n.match(f)||[];return e.push(r[0]),s.reduce(((e,n,s)=>{"jsx"===t?e.push(n.startsWith("**")?o.ZP.createElement("b",null,n.replace(/\*\*/g,"")):o.ZP.createElement("i",null,n.replace(/__/g,""))):e.push(n.startsWith("**")?`<b>${n.replace(/\*\*/g,"")}</b>`:`<i>${n.replace(/__/g,"")}</i>`);const a=2*s+2;return r[a]&&e.push(r[a]),e}),e)}),[])}function v(e,t){const n=(e.trim().match(/\n/g)||"").length+1,{lineHeight:o}=getComputedStyle(t),r=parseFloat(o.split("px")[0]);return t.clientHeight>=(n+1)*r}},4809:(e,t,n)=>{n.d(t,{z:()=>T,H:()=>k});var o=n(60748),r=n(33555),s=n(6137),a=n(46752),i=n(64319),d=n(59692),c=n(44139),u=n(32340),l=n(97373);const f={js:"JavaScript",javascript:"JavaScript",ts:"TypeScript",typescript:"TypeScript",python:"Python",py:"Python",go:"Go",rust:"Rust",func:"FunC",c:"C","c++":"C++",cpp:"C++",fortran:"Fortran",f90:"Fortran",f:"Fortran",java:"Java",sql:"SQL",swift:"Swift","objective-c":"Objective-C",kotlin:"Kotlin",ruby:"Ruby",rb:"Ruby",php:"PHP",perl:"Perl",bash:"Bash",sh:"Shell",markdown:"Markdown","c#":"C#",cs:"C#",json:"JSON",yaml:"YAML",yml:"YAML",solidity:"Solidity",sol:"Solidity",tl:"TL"};var h=n(77510),m=n(59107),p=n(22418);const g=(0,o.X$)((({text:e,className:t,noCopy:n,onWordWrapToggle:s})=>{const{showNotification:d}=(0,r.Sv)(),c=(0,o.sO)(null),l=(0,p.Z)(),f=(0,m.Z)(),[h,g]=(0,o.eJ)(!0),[y,b]=(0,o.eJ)(!1),v=(0,o.I4)((()=>{const t=(0,u.h)(e,c.current.parentElement);b(t)}),[e]);(0,o.d4)((()=>{h&&v()}),[v,h,e,l]);const w=(0,o.I4)((()=>{(0,i.TE)(e),d({message:f("TextCopied")})}),[f,d,e]),I=(0,o.I4)((()=>{g(!h),s?.(!h)}),[h,s]),C=(0,a.Z)("d09hp4fxFTuFw1emBUDA",!y&&n&&"We_Wcr7YvkkUM8ICjRAs"),S=(0,a.Z)("SwhO2lEtk47g68_ixpDe",t),E=(0,a.Z)("iEZTJnlmMCct8jJztTx8",h&&"B4kEjXkw8Sse9g0Xv_OO");return o.ZP.createElement("div",{className:S,ref:c},o.ZP.createElement("div",{className:C},y&&o.ZP.createElement("div",{className:E,onClick:I,title:"Word Wrap"},o.ZP.createElement("i",{className:"icon icon-word-wrap"})),!n&&o.ZP.createElement("div",{className:"deqdY4TS7mStC8qkslV4",onClick:w,title:f("Copy")},o.ZP.createElement("i",{className:"icon icon-copy"}))))})),y=(0,o.X$)((({text:e,language:t,noCopy:r})=>{const[i,d]=(0,o.eJ)(!0),{result:c}=(0,h.Z)((()=>t?Promise.all([n.e(3966),n.e(4713)]).then(n.bind(n,94713)).then((n=>n.default(e,t))):Promise.resolve(void 0)),[t,e]),u=(0,o.I4)((e=>{d(e)}),[]),l=(0,a.Z)("code-block",!i&&"no-word-wrap");return o.ZP.createElement("div",{className:"CodeBlock"},t&&o.ZP.createElement("p",{className:"code-title"},f[(m=t).toLowerCase()]??m),o.ZP.createElement("pre",{className:l,"data-entity-type":s.Vv.Pre,"data-language":t},c??e,o.ZP.createElement(g,{text:e,className:"code-overlay",onWordWrapToggle:u,noCopy:r})));var m}));var b=n(96459),v=n(10088),w=n(60706),I=n(25190);const C=new Map,S=(0,a.y)("Spoiler"),E=(0,o.X$)((({children:e,containerId:t})=>{const n=(0,o.sO)(null),[r,a]=(0,w.Z)(),i=(0,I.Z)((e=>{t&&(e.preventDefault(),e.stopPropagation(),C.get(t)?.forEach((e=>e())))}));return(0,o.d4)((()=>{if(t)return C.has(t)?C.get(t).push(a):C.set(t,[a]),()=>{C.delete(t)}}),[t]),o.ZP.createElement("span",{className:S("&",!r&&"concealed",!r&&Boolean(t)&&"animated"),onClick:t&&!r?i:void 0,"data-entity-type":s.Vv.Spoiler},o.ZP.createElement("span",{className:S("content"),ref:n},e))})),P=64;function k({text:e,entities:t,highlight:n,emojiSize:r,shouldRenderAsHtml:i,containerId:d,isSimple:f,isProtected:h,noLineBreaks:m,observeIntersectionForLoading:p,observeIntersectionForPlaying:g,withTranslucentThumbs:w,sharedCanvasRef:I,sharedCanvasHqRef:C,cacheBuster:S,forcePlayback:P,focusedQuote:k}){if(!t?.length)return M({content:e,highlight:n,focusedQuote:k,emojiSize:r,shouldRenderAsHtml:i,isSimple:f,noLineBreaks:m});const T=[];let D=!1;const B=function(e){const t=new Set,n=[];return e.forEach(((o,r)=>{if(t.has(r))return;const s=A(o,r,e,t);s&&(s.organizedIndexes.forEach((e=>{t.add(e)})),n.push(s))})),n}(t);function O(t,T,A,B){const x=[],{entity:_,nestedEntities:F}=A,{offset:j,length:$,type:U}=_;let V=e.substring(t,j);const H=V.length;V&&(D&&V.length>0&&"\n"===V[0]&&(V=V.substr(1),D=!1),V&&x.push(...M({content:V,highlight:n,focusedQuote:k,emojiSize:r,shouldRenderAsHtml:i,isSimple:f,noLineBreaks:m})));const W=t+H,K=W+$;let G=e.substring(j,j+$);const z=[];if(D&&G.length>0&&"\n"===G[0]&&(G=G.substr(1),D=!1),U===s.Vv.Pre&&(D=!0),F.length){let e=W;F.forEach(((t,n)=>{const{renderResult:o,entityEndIndex:r}=O(e,K,t,n===F.length-1);z.push(...o),e=r}))}const q=i?function(e,t,n){const o="string"==typeof t?t:void 0,r=e.type===s.Vv.Pre?t.trimEnd():t,a=n.length?n.join(""):(0,u.Z)(r,["escape_html","emoji_html","br_html"]).join("");if(!o)return a;switch(e.type){case s.Vv.Bold:return`<b>${a}</b>`;case s.Vv.Italic:return`<i>${a}</i>`;case s.Vv.Underline:return`<u>${a}</u>`;case s.Vv.Code:return`<code class="text-entity-code">${a}</code>`;case s.Vv.Pre:return`\`\`\`${(0,u.Z)(e.language||"",["escape_html"])}<br/>${a}<br/>\`\`\`<br/>`;case s.Vv.Strike:return`<del>${a}</del>`;case s.Vv.MentionName:return`<a\n        class="text-entity-link"\n        data-entity-type="${s.Vv.MentionName}"\n        data-user-id="${e.userId}"\n        contenteditable="false"\n        dir="auto"\n      >${a}</a>`;case s.Vv.Url:case s.Vv.TextUrl:return`<a\n        class="text-entity-link"\n        href=${L(o,e)}\n        data-entity-type="${e.type}"\n        dir="auto"\n      >${a}</a>`;case s.Vv.Spoiler:return`<span\n        class="spoiler"\n        data-entity-type="${s.Vv.Spoiler}"\n        >${a}</span>`;case s.Vv.CustomEmoji:return(0,c.z3)(o,e);case s.Vv.Blockquote:return`<blockquote\n        class="blockquote"\n        data-entity-type="${s.Vv.Blockquote}"\n        >${a}</blockquote>`;default:return a}}(_,G,z):function({entity:e,entityContent:t,nestedEntityContent:n,highlight:r,focusedQuote:i,containerId:d,isSimple:c,noLineBreaks:u,isProtected:f,observeIntersectionForLoading:h,observeIntersectionForPlaying:m,withTranslucentThumbs:p,emojiSize:g,sharedCanvasRef:w,sharedCanvasHqRef:I,cacheBuster:C,forcePlayback:S}){const P="string"==typeof t&&t,k=n.length?n:t;function T(){return M({content:k,highlight:r,focusedQuote:i,emojiSize:g,isSimple:c,noLineBreaks:u})}if(!P)return T();if(c){const t=T();return e.type===s.Vv.Spoiler?o.ZP.createElement(E,null,t):e.type===s.Vv.CustomEmoji?o.ZP.createElement(b.Z,{key:C?`${C}-${e.offset}`:void 0,documentId:e.documentId,size:g,withSharedAnimation:!0,sharedCanvasRef:w,sharedCanvasHqRef:I,withGridFix:!g,observeIntersectionForLoading:h,observeIntersectionForPlaying:m,withTranslucentThumb:p,forceAlways:S}):t}switch(e.type){case s.Vv.Bold:return o.ZP.createElement("strong",{"data-entity-type":e.type},T());case s.Vv.Blockquote:return o.ZP.createElement("span",{className:"text-entity-blockquote-wrapper"},o.ZP.createElement("blockquote",{"data-entity-type":e.type},T()));case s.Vv.BotCommand:return o.ZP.createElement("a",{onClick:N,className:"text-entity-link",dir:"auto","data-entity-type":e.type},T());case s.Vv.Hashtag:case s.Vv.Cashtag:return o.ZP.createElement("a",{onClick:R,className:"text-entity-link",dir:"auto","data-entity-type":e.type},T());case s.Vv.Code:return o.ZP.createElement("code",{className:(0,a.Z)("text-entity-code",!f&&"clickable"),onClick:f?void 0:Z,role:"textbox",tabIndex:0,"data-entity-type":e.type},T());case s.Vv.Email:return o.ZP.createElement("a",{href:`mailto:${P}`,target:"_blank",rel:"noopener noreferrer",className:"text-entity-link",dir:"auto","data-entity-type":e.type},T());case s.Vv.Italic:return o.ZP.createElement("em",{"data-entity-type":e.type},T());case s.Vv.MentionName:return o.ZP.createElement(l.Z,{userId:e.userId},T());case s.Vv.Mention:return o.ZP.createElement(l.Z,{username:P},T());case s.Vv.Phone:return o.ZP.createElement("a",{href:`tel:${P}`,className:"text-entity-link",dir:"auto","data-entity-type":e.type},T());case s.Vv.Pre:return o.ZP.createElement(y,{text:P,language:e.language,noCopy:f});case s.Vv.Strike:return o.ZP.createElement("del",{"data-entity-type":e.type},T());case s.Vv.TextUrl:case s.Vv.Url:return o.ZP.createElement(v.Z,{url:L(P,e),text:P},T());case s.Vv.Underline:return o.ZP.createElement("ins",{"data-entity-type":e.type},T());case s.Vv.Spoiler:return o.ZP.createElement(E,{containerId:d},T());case s.Vv.CustomEmoji:return o.ZP.createElement(b.Z,{key:C?`${C}-${e.offset}`:void 0,documentId:e.documentId,size:g,withSharedAnimation:!0,sharedCanvasRef:w,sharedCanvasHqRef:I,withGridFix:!g,observeIntersectionForLoading:h,observeIntersectionForPlaying:m,withTranslucentThumb:p,forceAlways:S});default:return T()}}({entity:_,entityContent:G,nestedEntityContent:z,highlight:n,focusedQuote:k,containerId:d,isSimple:f,noLineBreaks:m,isProtected:h,observeIntersectionForLoading:p,observeIntersectionForPlaying:g,withTranslucentThumbs:w,emojiSize:r,sharedCanvasRef:I,sharedCanvasHqRef:C,cacheBuster:S,forcePlayback:P});if(Array.isArray(q)?x.push(...q):x.push(q),B&&K<T){let t=e.substring(K,T);D&&t.length>0&&"\n"===t[0]&&(t=t.substring(1)),t&&x.push(...M({content:t,highlight:n,focusedQuote:k,emojiSize:r,shouldRenderAsHtml:i,isSimple:f,noLineBreaks:m}))}return{renderResult:x,entityEndIndex:K}}let x=0;return B.forEach(((t,n)=>{const{renderResult:o,entityEndIndex:r}=O(x,e.length,t,n===B.length-1);T.push(...o),x=r})),T}function T(e){const{text:t,entities:n}=e||{};if(!t)return"";const o=k({text:t,entities:n,shouldRenderAsHtml:!0});return Array.isArray(o)?o.join(""):o}function M({content:e,highlight:t,focusedQuote:n,emojiSize:o,shouldRenderAsHtml:r,isSimple:s,noLineBreaks:a}){if(Array.isArray(e)){const i=[];return e.forEach((e=>{i.push(...M({content:e,highlight:t,focusedQuote:n,emojiSize:o,shouldRenderAsHtml:r,isSimple:s,noLineBreaks:a}))})),i}if(r)return(0,u.Z)(e,["escape_html","emoji_html","br_html"]);const i=[o&&o>P?"hq_emoji":"emoji"],d={};return s||a||i.push("br"),t&&(i.push("highlight"),d.highlight=t),n&&(i.push("quote"),d.quote=n),(0,u.Z)(e,i,d)}function A(e,t,n,o){const{offset:r,length:s}=e,a=new Set([t]);if(o.has(t))return;const i=[];return n.filter(((e,n)=>n>t&&e.offset>=r&&e.offset<r+s)).map((e=>A(e,n.indexOf(e),n,o))).filter(Boolean).forEach((e=>{let t=!1;e.organizedIndexes.forEach((e=>{t||a.has(e)||(t=!0),a.add(e)})),t&&i.push(e)})),{entity:e,organizedIndexes:a,nestedEntities:i}}function L(e,t){const{type:n}=t;return n===s.Vv.TextUrl&&t.url?t.url:e}function N(e){(0,r.Sv)().sendBotCommand({command:e.currentTarget.innerText})}function R(e){(0,r.Sv)().setLocalTextSearchQuery({query:e.currentTarget.innerText}),(0,r.Sv)().searchTextMessagesLocal()}function Z(e){(0,i.TE)(e.currentTarget.innerText),(0,r.Sv)().showNotification({message:(0,d.Iu)("TextCopied")})}},60422:(e,t,n)=>{n.d(t,{Z:()=>m});var o=n(60748),r=n(33555),s=n(7054),a=n(74288),i=n(69118);let d=new Set;const c=new Set,u=(0,i.P2)((()=>{const e=[...d],t=e.slice(0,100),n=e.slice(101);(0,r.Sv)().loadCustomEmojis({ids:t}),d=new Set(n),d.size&&u()}),200,!1),l=(0,i.P2)((()=>{(0,r.Sv)().updateLastRenderedCustomEmojis({ids:[...c].reverse()}),c.clear()}),200,!1);function f(e){c.add(e),l()}(0,a.bn)(f);var h=n(25190);function m(e){const[t,n]=(0,o.eJ)(e?(0,r.Rd)().customEmojis.byId[e]:void 0),[i,c]=(0,o.eJ)((0,s.W9H)((0,r.Rd)()));var l;(l=e)&&(f(l),(0,r.Rd)().customEmojis.byId[l]||(d.add(l),u()));const m=(0,h.Z)((t=>{if(!e)return;const o=(0,r.Rd)();n((t??o.customEmojis).byId[e]),c((0,s.W9H)(o))}));return(0,o.d4)(m,[e,m]),(0,o.d4)((()=>{if(e)return(0,a.k2)(m,e),()=>{(0,a.sp)(m)}}),[t,e,m]),{customEmoji:t,canPlay:i}}},44139:(e,t,n)=>{n.d(t,{fJ:()=>c,qo:()=>f,yR:()=>u,z3:()=>l});var o=n(33555),r=n(6137),s=n(83716),a=n(46752),i=n(74288),d=n(74399);const c="img[data-document-id]";function u(e){const[t,n,o]=(0,i.dA)(e);return`<img\n    class="${(0,a.Z)("custom-emoji","emoji","emoji-small",t&&"placeholder",e.shouldUseTextColor&&"colorable")}"\n    draggable="false"\n    alt="${e.emoji}"\n    data-document-id="${e.id}"\n    ${o?`data-unique-id="${o}"`:""}\n    data-entity-type="${r.Vv.CustomEmoji}"\n    src="${n}"\n  />`}function l(e,t){const n=(0,o.Rd)().customEmojis.byId[t.documentId],[s,d,c]=(0,i.dA)(n);return`<img\n    class="${(0,a.Z)("custom-emoji","emoji","emoji-small",s&&"placeholder",n?.shouldUseTextColor&&"colorable")}"\n    draggable="false"\n    alt="${e}"\n    data-document-id="${t.documentId}"\n    ${c?`data-unique-id="${c}"`:""}\n    data-entity-type="${r.Vv.CustomEmoji}"\n    src="${d}"\n  />`}function f(e){if(e)return e>s.L5X?2.25*d.Gw:1===e?7*d.Gw:Math.min(7.5-.75*e,5.625)*d.Gw}},30386:(e,t,n)=>{n.d(t,{b:()=>a,q:()=>s});var o=n(83716),r=n(97184);function s(e,t=!1){r.cj||!document.activeElement||document.activeElement.id!==o.R2F||!t&&e.target!==e.currentTarget||e.preventDefault()}function a(e){s(e,!0)}},97373:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(60748),r=n(33555),s=n(6137),a=n(7054);const i=(0,r.c$)(((e,{userId:t})=>({userOrChat:t?(0,a.dyD)(e,t):void 0})))((({userId:e,username:t,userOrChat:n,children:a})=>{const{openChat:i,openChatByUsername:d,closeStoryViewer:c}=(0,r.Sv)();return o.ZP.createElement("a",{onClick:()=>{n?i({id:n.id}):t&&(c(),d({username:t.substring(1)}))},className:"text-entity-link",dir:"auto","data-entity-type":e?s.Vv.MentionName:s.Vv.Mention},a)}))},231:(e,t,n)=>{n.d(t,{Z:()=>u});var o=n(60748),r=n(46752),s=n(80036),a=n(97184),i=n(25190),d=n(68512),c=n(49204);const u=({ref:e,type:t="button",id:n,onClick:u,onContextMenu:l,onMouseDown:f,onMouseUp:h,onMouseEnter:m,onMouseLeave:p,onFocus:g,children:y,size:b="default",color:v="primary",backgroundImage:w,className:I,round:C,pill:S,fluid:E,isText:P,isLoading:k,isShiny:T,withPremiumGradient:M,onTransitionEnd:A,ariaLabel:L,ariaControls:N,hasPopup:R,href:Z,download:D,disabled:B,nonInteractive:O,allowDisabledClick:x,noFastClick:_="danger"===v,ripple:F,faded:j,tabIndex:$,isRtl:U,isRectangular:V,noPreventDefault:H,shouldStopPropagation:W,style:K})=>{let G=(0,o.sO)(null);e&&(G=e);const[z,q]=(0,o.eJ)(!1),Y=B||O,J=(0,r.Z)("Button",I,b,v,C&&"round",S&&"pill",E&&"fluid",Y&&"disabled",O&&"non-interactive",x&&"click-allowed",P&&"text",k&&"loading",F&&"has-ripple",j&&"faded",z&&"clicked",w&&"with-image",T&&"shiny",M&&"premium",V&&"rectangular"),X=(0,i.Z)((e=>{!x&&Y||!u||u(e),W&&e.stopPropagation(),q(!0),setTimeout((()=>{q(!1)}),400)})),Q=(0,i.Z)((e=>{H||e.preventDefault(),!x&&Y||!f||f(e),a.$b||e.button!==a.tc.Main||_||X(e)}));return Z?o.ZP.createElement("a",{ref:G,id:n,className:J,href:Z,title:L,download:D,tabIndex:$,dir:U?"rtl":void 0,"aria-label":L,"aria-controls":N,style:K,onTransitionEnd:A},y,!Y&&F&&o.ZP.createElement(d.Z,null)):o.ZP.createElement("button",{ref:G,id:n,type:t,className:J,onClick:a.$b||_?X:void 0,onContextMenu:l,onMouseDown:Q,onMouseUp:h,onMouseEnter:m&&!Y?m:void 0,onMouseLeave:p&&!Y?p:void 0,onTransitionEnd:A,onFocus:g&&!Y?g:void 0,"aria-label":L,"aria-controls":N,"aria-haspopup":R,title:L,tabIndex:$,dir:U?"rtl":void 0,style:(0,s.Z)(K,w&&`background-image: url(${w})`)},k?o.ZP.createElement("div",null,o.ZP.createElement("span",{dir:U?"auto":void 0},"请稍等..."),o.ZP.createElement(c.Z,{color:P?"blue":"white"})):y,!Y&&F&&o.ZP.createElement(d.Z,null))}},14605:(e,t,n)=>{n.d(t,{Z:()=>d});var o=n(60748),r=n(46752),s=n(32340),a=n(59107),i=n(49204);const d=(0,o.X$)((({id:e,name:t,value:n,label:d,subLabel:c,checked:u,tabIndex:l,disabled:f,round:h,blocking:m,isLoading:p,className:g,rightIcon:y,onChange:b,onCheck:v,onClickLabel:w})=>{const I=(0,a.Z)(),C=(0,o.sO)(null),S=(0,o.I4)((e=>{f||(b&&b(e),v&&v(e.currentTarget.checked))}),[f,b,v]),E=(0,r.Z)("Checkbox",f&&"disabled",h&&"round",p&&"loading",m&&"blocking",g);return o.ZP.createElement("label",{className:E,dir:I.isRtl?"rtl":void 0,onClick:w?function(e){e.target!==C.current&&w?.(e,n)}:void 0,ref:C},o.ZP.createElement("input",{type:"checkbox",id:e,name:t,value:n,checked:u,disabled:f,tabIndex:l,onChange:S,onClick:w?function(e){e.stopPropagation()}:void 0}),o.ZP.createElement("div",{className:"Checkbox-main"},o.ZP.createElement("span",{className:"label",dir:"auto"},"string"==typeof d?(0,s.Z)(d):d,y&&o.ZP.createElement("i",{className:`icon icon-${y} right-icon`})),c&&o.ZP.createElement("span",{className:"subLabel",dir:"auto"},(0,s.Z)(c))),p&&o.ZP.createElement(i.Z,null))}))},53106:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(60748),r=n(231),s=n(52328);const a=({trigger:e,className:t,children:n,transformOriginX:a,transformOriginY:i,positionX:d="left",positionY:c="top",footer:u,forceOpen:l,onOpen:f,onClose:h,onTransitionEnd:m,onMouseEnterBackdrop:p,onHide:g})=>{const y=(0,o.sO)(null),b=(0,o.sO)(null),[v,w]=(0,o.eJ)(!1),I=(0,o.I4)((()=>{w(!1),h?.()}),[h]),C=(0,o.Ye)((()=>e||(({onTrigger:e,isOpen:t})=>o.ZP.createElement(r.Z,{round:!0,size:"smaller",color:"translucent",className:t?"active":"",onClick:e,ariaLabel:"More actions"},o.ZP.createElement("i",{className:"icon icon-more"})))),[e]);return o.ZP.createElement("div",{ref:b,className:`DropdownMenu ${t||""}`,onKeyDown:e=>{const t=y.current;if(!v||40!==e.keyCode||!t)return;const n=document.activeElement,o=Array.from(t.children);n&&-1!==o.indexOf(n)||o[0].focus()},onTransitionEnd:m},C({onTrigger:()=>{w(!v),v?h?.():f?.()},isOpen:v}),o.ZP.createElement(s.Z,{ref:y,containerRef:b,isOpen:v||Boolean(l),className:t||"",transformOriginX:a,transformOriginY:i,positionX:d,positionY:c,footer:u,autoClose:!0,onClose:I,shouldSkipTransition:l,onCloseAnimationEnd:g,onMouseEnterBackdrop:p},n))}},97687:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(60748),r=n(46752),s=n(59107);const a=(0,o.X$)((({ref:e,id:t,className:n,value:a,label:i,error:d,success:c,disabled:u,readOnly:l,placeholder:f,autoComplete:h,inputMode:m,maxLength:p,tabIndex:g,teactExperimentControlled:y,onChange:b,onInput:v,onKeyPress:w,onKeyDown:I,onBlur:C,onPaste:S})=>{const E=(0,s.Z)(),P=d||c||i,k=(0,r.Z)("input-group",a&&"touched",d?"error":c&&"success",u&&"disabled",l&&"disabled",P&&"with-label",n);return o.ZP.createElement("div",{className:k,dir:E.isRtl?"rtl":void 0},o.ZP.createElement("input",{ref:e,className:"form-control",type:"text",id:t,dir:"auto",value:a||"",tabIndex:g,placeholder:f,maxLength:p,autoComplete:h,inputMode:m,disabled:u,readOnly:l,onChange:b,onInput:v,onKeyPress:w,onKeyDown:I,onBlur:C,onPaste:S,"aria-label":P,teactExperimentControlled:y}),P&&o.ZP.createElement("label",{htmlFor:t},P))}))},8337:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(60748),r=n(46752),s=n(25190);const a=({children:e,isPrimary:t,className:n,isRtl:a,onClick:i})=>{const d=(0,s.Z)((e=>{e.preventDefault(),i(e)}));return o.ZP.createElement("a",{href:"#",className:(0,r.Z)("Link","h_qmZuKBrM7SWOEcmH68",n,t&&"iZ_WxIDQyqM2SOYqu4Y8"),dir:a?"rtl":"auto",onClick:i?d:void 0},e)}},34288:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(60748),r=n(46752),s=n(49204);const a=(0,o.X$)((({color:e="blue",backgroundColor:t,className:n,onClick:a})=>o.ZP.createElement("div",{className:(0,r.Z)("Loading",a&&"interactive",n),onClick:a},o.ZP.createElement(s.Z,{color:e,backgroundColor:t}))))},52328:(e,t,n)=>{n.d(t,{Z:()=>b});var o=n(60748),r=n(46752),s=n(80036),a=n(23989),i=n(68368),d=n(97184),c=n(30386),u=n(42797),l=n(274),f=n(18674),h=n(46590),m=n(72313),p=n(31212),g=n(58758),y=n(62898);const b=(0,o.X$)((0,i.Z)((({ref:e,containerRef:t,shouldCloseFast:n,isOpen:i,id:b,className:v,bubbleClassName:w,style:I,bubbleStyle:C,ariaLabelledBy:S,children:E,transformOriginX:P,transformOriginY:k,positionX:T="left",positionY:M="top",autoClose:A=!1,footer:L,noCloseOnBackdrop:N=!1,backdropExcludedSelector:R,noCompact:Z,onCloseAnimationEnd:D,onClose:B,onMouseEnter:O,onMouseLeave:x,shouldSkipTransition:_,withPortal:F,onMouseEnterBackdrop:j})=>{let $=(0,o.sO)(null);e&&($=e);const U=t||$,{isTouchScreen:V}=(0,u.ZP)(),{transitionClassNames:H}=(0,p.Z)(i,D,_,void 0,_);(0,o.d4)((()=>i?(0,a.Z)(B):void 0),[i,B]),(0,h.Z)({isActive:i,onBack:B,shouldBeReplaced:!0}),(0,l.Z)((([e])=>{(i||!i&&!0===e)&&(0,f.YW)(200)}),[i]);const W=(0,m.Z)($,i,A?B:void 0,void 0,!0);(0,g.Z)(i,U,N?void 0:B,void 0,R);const K=(0,r.Z)("bubble menu-container custom-scroll",M,T,L&&"with-footer",H,w,n&&"close-fast"),G=void 0!==k?`${k}px`:void 0,z=void 0!==P?`${P}px`:void 0,q=o.ZP.createElement("div",{id:b,className:(0,r.Z)("Menu",!Z&&!V&&"compact",!d.gk&&"no-blur",F&&"in-portal",v),style:I,"aria-labelledby":S,role:S?"menu":void 0,onKeyDown:i?W:void 0,onMouseEnter:O,onMouseLeave:i?x:void 0},i&&o.ZP.createElement("div",{className:"backdrop",onMouseDown:c.b,onMouseEnter:j}),o.ZP.createElement("div",{role:"presentation",ref:$,className:K,style:(0,s.Z)(`transform-origin: ${z||T} ${G||M}`,C),onClick:A?B:void 0},E,L&&o.ZP.createElement("div",{className:"footer"},L)));return F?o.ZP.createElement(y.Z,null,q):q})))},58964:(e,t,n)=>{n.d(t,{Z:()=>c});var o=n(60748),r=n(83716),s=n(46752),a=n(42797),i=n(59107),d=n(25190);const c=e=>{const{icon:t,isCharIcon:n,customIcon:c,className:u,children:l,onClick:f,href:h,download:m,disabled:p,destructive:g,ariaLabel:y,withWrap:b,onContextMenu:v,clickArg:w}=e,I=(0,i.Z)(),{isTouchScreen:C}=(0,a.ZP)(),S=(0,d.Z)((e=>{if(p||!f)return e.stopPropagation(),void e.preventDefault();f(e,w)})),E=(0,d.Z)((e=>{if(13===e.keyCode||32===e.keyCode)return p||!f?(e.stopPropagation(),void e.preventDefault()):void f(e,w)})),P=(0,s.Z)("MenuItem",u,p&&"disabled",g&&"destructive",!C&&"compact",b&&"wrap"),k=o.ZP.createElement(o.ZP.Fragment,null,!c&&t&&o.ZP.createElement("i",{className:n?"icon icon-char":`icon icon-${t}`,"data-char":n?t:void 0}),c,l);return h?o.ZP.createElement("a",{tabIndex:0,className:P,href:h,download:m,"aria-label":y,title:y,target:h.startsWith(window.location.origin)||r.Cgt?"_self":"_blank",rel:"noopener noreferrer",dir:I.isRtl?"rtl":void 0,onClick:f},k):o.ZP.createElement("div",{role:"menuitem",tabIndex:0,className:P,onClick:S,onKeyDown:E,onContextMenu:v,"aria-label":y,title:y,dir:I.isRtl?"rtl":void 0},k)}},57080:(e,t,n)=>{n.d(t,{Z:()=>m});var o=n(60748),r=n(12019),s=n(25190),a=n(34446),i=n(46898),d=n(57710),c=n(18674),u=n(92112),l=n(13819);function f(){return(0,c.zG)()||(0,u.lh)()||(0,l.q)()}function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},h.apply(this,arguments)}const m=(0,o.X$)((function({ref:e,isPriority:t,canPlay:n,children:m,onReady:p,onBroken:g,onTimeUpdate:y,...b}){const v=(0,o.sO)(null);e||(e=v);const{handlePlaying:w}=function(e,t,n){const r=(0,o.sO)();r.current=t;const{play:a,pause:i}=function(e){const t=(0,o.sO)(!1),n=(0,o.sO)(!1);return{play:(0,s.Z)((()=>{t.current=!1,e.current&&!n.current&&document.body.contains(e.current)&&(n.current=!0,e.current.play().then((()=>{n.current=!1,t.current&&(e.current?.pause(),t.current=!1)})).catch((e=>{console.warn(e)})))})),pause:(0,s.Z)((()=>{n.current?t.current=!0:e.current?.pause()}))}}(e),h=(0,s.Z)((()=>{!r.current||!n&&f()||a()})),m=(0,s.Z)((()=>{(0,d.i$)(h)}));(0,l.Z)(i,m,!t),(0,c.ZP)(i,h,!t),(0,u.ZP)(i,h,!t);const p=(0,s.Z)((()=>{(!r.current||!n&&f())&&i()}));return(0,o.d4)((()=>{t?!n&&f()||a():i()}),[t,a,i,n]),{handlePlaying:p}}(e,n,t);(0,i.Z)(e,[]);const I=(0,o.sO)(!1),C=(0,s.Z)((()=>{I.current||(p?.(),I.current=!0)})),{isBuffered:S,bufferingHandlers:E}=(0,r.Z)(!0,y,g),{onPlaying:P,...k}=E;(0,a.Z)((([e])=>{void 0!==e&&C()}),[S,C]);const T=(0,s.Z)((e=>{w(),P(e),C(),b.onPlaying?.(e)})),M=(0,o.Ye)((()=>{const e={};return Object.keys(k).forEach((t=>{const n=t;e[n]=e=>{b[n]?.(e),k[n]?.(e)}})),e}),[k,b]);return o.ZP.createElement("video",h({ref:e,autoPlay:!0},b,M,{onPlaying:T}),m)}))},62898:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(60748),r=n(31664);const s=({containerId:e,className:t,children:n})=>{const s=(0,o.sO)();return s.current||(s.current=document.createElement("div")),(0,o.bt)((()=>{const n=document.querySelector(e||"#portals");if(!n)return;const o=s.current;return t&&o.classList.add(t),n.appendChild(o),()=>{r.ZP.render(void 0,o),n.removeChild(o)}}),[t,e]),r.ZP.render(n,s.current)}},68512:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(60748),r=n(69118),s=n(25190);const a=(0,o.X$)((()=>{const[e,t]=(0,o.eJ)([]),n=(0,o.Ye)((()=>(0,r.Ds)((()=>{t([])}),700,!1)),[]),a=(0,s.Z)((o=>{if(0!==o.button)return;const r=o.currentTarget,s=r.getBoundingClientRect(),a=r.offsetWidth/2;t([...e,{x:o.clientX-s.x-a/2,y:o.clientY-s.y-a/2,size:a}]),n()}));return o.ZP.createElement("div",{className:"ripple-container",onMouseDown:a},e.map((({x:e,y:t,size:n})=>o.ZP.createElement("span",{style:`left: ${e}px; top: ${t}px; width: ${n}px; height: ${n}px;`}))))}))},49204:(e,t,n)=>{n.d(t,{Z:()=>s});var o=n(60748),r=n(46752);const s=({color:e="blue",backgroundColor:t,className:n})=>o.ZP.createElement("div",{className:(0,r.Z)("Spinner",n,e,t&&"with-background",t&&`bg-${t}`)},o.ZP.createElement("div",{className:"Spinner__inner"}))},2255:(e,t,n)=>{n.d(t,{ZP:()=>C});var o=n(60748),r=n(31664),s=n(33555),a=n(57710),i=n(7054),d=n(46752),c=n(1279),u=n(82972),l=n(60782),f=n(29371),h=n(65326),m=n(18674),p=n(87204);const g="Transition_slide",y="Transition_slide-active",b="Transition_slide-from",v="Transition_slide-to",w="Transition_slide-inactive",I=new Set(["slide","slideRtl","slideFade","zoomFade","slideLayers","pushSlide","reveal","slideOptimized","slideOptimizedRtl","slideVertical","slideVerticalFade"]),C=function({ref:e,activeKey:t,nextKey:n,name:C,direction:S="auto",renderCount:E,shouldRestoreHeight:P,shouldCleanup:k,cleanupExceptionKey:T,cleanupOnlyKey:M,shouldWrap:A,wrapExceptionKey:L,id:N,className:R,slideClassName:Z,withSwipeControl:D,onStart:B,onStop:O,children:x}){const _=(0,o.sO)(),F=I.has(C)&&!(0,i.FOo)((0,s.Rd)());let j=(0,o.sO)(null);e&&(j=e);const $=(0,o.sO)({}),U=(0,p.Z)(t),V=(0,h.Z)(),H=(0,o.sO)(!1),W=(0,o.sO)(!1),K=void 0!==U&&t!==U;!E&&K&&($.current={[U]:$.current[U]}),$.current[t]=x,n&&($.current[n]=x);const G=-1===S||"auto"===S&&U>t||"inverse"===S&&U<t;(0,o.bt)((()=>{function e(){k&&($.current=void 0!==T?{[T]:$.current[T]}:void 0!==M?(0,l.CE)($.current,[M]):{},V())}const n="slideOptimized"===C||"slideOptimizedRtl"===C,o=j.current,s=Object.keys($.current).map(Number),i=E?U:s.indexOf(U),d=E?t:s.indexOf(t),h=Array.from(o.childNodes);if(!h.length)return;const p=Array.from(o.children);if(p.forEach((e=>{(0,r.D_)(e,g),Z&&(0,r.D_)(e,Z)})),!K){if(H.current)return;return void p.forEach((e=>{e===h[d]?((0,r.D_)(e,y),n&&(0,r.iL)(e,{transition:"none",transform:"translate3d(0, 0, 0)"})):n||(0,r.D_)(e,w)}))}if(_.current=t,n){if(!h[d])return;return void function(e,t,n,o,s,i,d,l,f,h,p,g,b){if(e)return(0,r.ye)(l,`Transition-${t}`,!n),(0,r.ye)(l,`Transition-${t}Backwards`,n),h instanceof HTMLElement&&((0,r.mC)(h,y),(0,r.iL)(h,{transition:"none",transform:""})),f instanceof HTMLElement&&((0,r.D_)(f,y),(0,r.iL)(f,{transition:"none",transform:"translate3d(0, 0, 0)"})),void o();"slideOptimizedRtl"===t&&(n=!n),d.current=!0;const v=(0,m.YW)();g?.(),(0,r.ye)(l,`Transition-${t}`,!n),(0,r.ye)(l,`Transition-${t}Backwards`,n),h instanceof HTMLElement&&(0,r.iL)(h,{transition:"none",transform:"translate3d(0, 0, 0)"}),f instanceof HTMLElement&&(0,r.iL)(f,{transition:"none",transform:`translate3d(${n?"-":""}100%, 0, 0)`}),(0,a.lT)((()=>(f instanceof HTMLElement&&(0,u.Z)(f),()=>{h instanceof HTMLElement&&((0,r.mC)(h,y),(0,r.iL)(h,{transition:"",transform:`translate3d(${n?"":"-"}100%, 0, 0)`})),f instanceof HTMLElement&&((0,r.D_)(f,y),(0,r.iL)(f,{transition:"",transform:"translate3d(0, 0, 0)"}))}))),(0,c.L)(f,(()=>{const e=f instanceof HTMLElement?f.clientHeight:void 0;(0,a.WM)((()=>{s===i.current&&(h instanceof HTMLElement&&(0,r.iL)(h,{transition:"none",transform:""}),p&&e&&f instanceof HTMLElement&&((0,r.iL)(f,{height:"auto"}),(0,r.iL)(l,{height:`${e}px`})),b?.(),v(),d.current=!1,o())}))}))}(F,C,G,e,t,_,H,o,h[d],h[i],P,B,O)}if("none"===C||F||W.current)return W.current&&(W.current=!1),h.forEach(((e,t)=>{e instanceof HTMLElement&&((0,r.mC)(e,b),(0,r.mC)(e,v),(0,r.ye)(e,y,t===d),(0,r.ye)(e,w,t!==d))})),void e();h.forEach(((e,t)=>{e instanceof HTMLElement&&((0,r.mC)(e,y),(0,r.ye)(e,b,t===i),(0,r.ye)(e,v,t===d),(0,r.ye)(e,w,t!==i&&t!==d))})),H.current=!0;const I=(0,m.YW)();function S(){const n=o.querySelector(`.${y}`),{clientHeight:s}=n||{};(0,a.WM)((()=>{t===_.current&&((0,r.mC)(o,`Transition-${C}`),(0,r.mC)(o,`Transition-${C}Backwards`),h.forEach(((e,t)=>{e instanceof HTMLElement&&((0,r.mC)(e,b),(0,r.mC)(e,v),(0,r.ye)(e,y,t===d),(0,r.ye)(e,w,t!==d))})),P&&n&&((0,r.iL)(n,{height:"auto"}),(0,r.iL)(o,{height:`${s}px`})),O?.(),I(),H.current=!1,e())}))}B?.(),(0,r.ye)(o,`Transition-${C}`,!G),(0,r.ye)(o,`Transition-${C}Backwards`,G);const A="reveal"!==C&&"slideFadeAndroid"!==C||!G?h[d]:h[i];if(A)if(D&&h[i]){const e=(0,c.f)(A,S);(0,f.a)(h[i],h[d],(()=>{e(),W.current=!0,O?.(),I(),H.current=!1}))}else(0,c.f)(A,S,void 0,1e3);else S()}),[t,n,U,K,G,C,B,O,E,P,k,Z,T,F,V,D,M]),(0,o.d4)((()=>{if(!P)return;const e=j.current,t=e.querySelector(`.${y}`)||e.querySelector(`.${b}`);if(!t)return;const{clientHeight:n}=t||{};n&&(0,a.WM)((()=>{(0,r.iL)(t,{height:"auto"}),(0,r.iL)(e,{height:`${n}px`,flexBasis:`${n}px`})}))}),[P,x]);const z=!E,q=$.current,Y=Object.keys(E?new Array(E).fill(void 0):q).map(Number).map((e=>{const n=q[e];if(!n)return;const r="function"==typeof n?n(e===t,e===U,e,t):n;return A&&e!==L||z?o.ZP.createElement("div",{key:e,teactOrderKey:e},r):r}));return o.ZP.createElement("div",{ref:j,id:N,className:(0,d.Z)("Transition",R),teactFastList:z},Y)}},83716:(e,t,n)=>{n.d(t,{$OQ:()=>ln,$RH:()=>Qe,A1D:()=>mn,ARG:()=>Se,BRs:()=>Tt,Bge:()=>fn,BtI:()=>se,C1M:()=>ue,CXA:()=>we,Cgt:()=>l,Cic:()=>Ne,CyD:()=>Z,D$f:()=>jt,DC_:()=>dt,DUi:()=>an,EGK:()=>dn,ENB:()=>X,Edp:()=>Re,F9Q:()=>ie,F9z:()=>Xt,FDD:()=>Jt,FM6:()=>$t,FSu:()=>Ht,FVh:()=>tn,Hkl:()=>ee,I0B:()=>bn,Itv:()=>wn,J0S:()=>pe,K2q:()=>ht,K7x:()=>et,L5X:()=>It,LBg:()=>Yt,LlA:()=>qt,MW8:()=>At,Mwe:()=>it,NUd:()=>U,NfV:()=>rn,NjN:()=>at,NuY:()=>u,Ob7:()=>Ee,OfM:()=>d,Ov0:()=>J,OxA:()=>yn,P1i:()=>Gt,PMB:()=>bt,PT8:()=>Ke,PZg:()=>nn,QU1:()=>_e,Qao:()=>rt,QxZ:()=>he,R2F:()=>Ae,RBO:()=>G,Rk9:()=>N,Ro:()=>Tn,SC4:()=>le,SGw:()=>B,SR3:()=>o,SaG:()=>w,Sbj:()=>pn,Tih:()=>I,Tjg:()=>f,UhJ:()=>M,V$q:()=>Je,V61:()=>s,VC4:()=>Ft,VEm:()=>Ze,Vk:()=>ne,Vvx:()=>Cn,Vxl:()=>P,WSp:()=>sn,WfZ:()=>zt,Wpe:()=>g,XM3:()=>te,Y7U:()=>ut,YBT:()=>ge,YQ0:()=>K,Yan:()=>Zt,ZTn:()=>p,Zkg:()=>Mt,_NT:()=>gn,_mX:()=>je,_nY:()=>c,aCB:()=>Mn,aqU:()=>Ct,avG:()=>$,awM:()=>en,b6b:()=>Ce,bKs:()=>qe,bMi:()=>pt,b_O:()=>E,be_:()=>xe,bl0:()=>i,byK:()=>F,cG4:()=>ce,cPw:()=>St,ckE:()=>Ye,dII:()=>_t,dWG:()=>kt,dse:()=>Me,e74:()=>xt,eAU:()=>S,eFF:()=>ae,eMD:()=>m,eXY:()=>st,eev:()=>_,fK3:()=>ze,foQ:()=>x,fw0:()=>De,g$l:()=>Vt,gJR:()=>L,ga_:()=>In,gnl:()=>Oe,hT6:()=>W,i2v:()=>v,iCi:()=>r,j7i:()=>R,jL5:()=>Wt,jT7:()=>Fe,jVS:()=>vt,kUR:()=>Rt,ka7:()=>Pt,kj5:()=>y,ksF:()=>$e,kuM:()=>gt,l35:()=>Ve,lF$:()=>O,lHp:()=>ft,lOz:()=>A,lWA:()=>D,loe:()=>H,mUA:()=>hn,moH:()=>mt,mok:()=>oe,mwi:()=>me,mzL:()=>be,mzl:()=>Ge,mzt:()=>Qt,nBr:()=>En,nYf:()=>Le,o69:()=>Pn,oBh:()=>ye,oDu:()=>q,oGt:()=>Bt,oX1:()=>k,o_S:()=>ke,ouc:()=>C,p3h:()=>vn,pJM:()=>kn,pRL:()=>Nt,pnA:()=>Q,prK:()=>An,qUX:()=>re,qpg:()=>ot,rOO:()=>We,rSj:()=>z,r_R:()=>Pe,s11:()=>Dt,s22:()=>Be,s38:()=>Et,sRA:()=>un,sTu:()=>Sn,sXs:()=>de,sdb:()=>T,sgm:()=>Ue,sux:()=>Te,t4X:()=>cn,t8f:()=>Lt,t_F:()=>Y,tuy:()=>j,uWu:()=>Ut,u_N:()=>He,uaz:()=>ct,ulW:()=>b,ulj:()=>fe,v5x:()=>h,w7O:()=>tt,wGh:()=>Ot,xHY:()=>a,xS7:()=>Ie,xnK:()=>Xe,y3O:()=>wt,yK2:()=>lt,yce:()=>on,z7m:()=>nt,zHP:()=>Kt,zqK:()=>yt,zy8:()=>ve});const o="A",r=`Telegram Web ${o}`,s=1710063202523,a="web.telegram.org",i="https://web.telegram.org/a",d="https://web.telegram.org/",c="https://web.telegram.org/a/",u=!1,l=!1,f=!1,h=!1,m=!1,p=!1,g="tt-log.json",y=m,b="https://telegra.ph/WebA-Beta-03-20",v="https://telegram-a-host",w="Shoot!\nSomething went wrong, please see the error details in Dev Tools Console.",I="Telegram",C="[Inactive]",S=!1,E="user_auth",P="GramJs:sessionId",k="tt-passcode",T=!1,M="tt-global-state",A=500,L=200,N=30,R=150,Z=!1,D="tt-media",B="tt-media-avatars",O="tt-media-progressive",x="tt-custom-bg",_="tt-lang-packs-v28",F=[1,5,10,50,100,500],j="tt-global",$="tt-establish",U="tt-multitab",V="undefined"!=typeof window&&window.innerHeight>=900,H=1,W=V?60:40,K=2*W,G=36,z=72,q=65,Y=V?30:25,J=100,X=42,Q=42,ee=20,te=5,ne=30,oe=200,re=500,se=600,ae=50,ie=15,de=10,ce=20,ue=20,le=500,fe=20,he=1,me=1,pe=1200,ge=-1,ye=0,be=1,ve=2,we=ve,Ie=16,Ce=17,Se=15,Ee=3,Pe=1e4,ke=3e3,Te=1e7,Me=36e5,Ae="editable-message-text",Le="editable-message-text-modal",Ne="editable-story-input-text",Re=`.messages-layout .Transition_slide-active #${Ae}, .messages-layout .Transition > .Transition_slide-to #${Ae}`,Ze=`#${Le}`,De=`#${Ne}`,Be="data-has-custom-appendix",Oe="message-content",xe=".message-content",_e=1440,Fe=1150,je=1275,$e=925,Ue=1340,Ve=600,He=950,We=450,Ke=2**31-1,Ge="0",ze=100,qe=300,Ye=600,Je=750,Xe=300,Qe=(Math.round((qe+Ye)/2),new Set(["newMessage","newScheduledMessage","deleteMessages","deleteScheduledMessages","deleteHistory"]),200),et=13,tt=11,nt=160,ot=120,rt=72,st=36,at=32,it=48,dt=32,ct=20,ut=72,lt=72,ft=36,ht=160,mt=160,pt=140,gt=100,yt=100,bt=140,vt=140,wt=2,It=7,Ct="top",St="popular",Et="recent",Pt="favorite",kt="chatStickers",Tt="premium",Mt="topic-default-icon",At="status-default-icon",Lt=/<img[^>]+alt="([^"]+)"(?![^>]*data-document-id)[^>]*>/gm,Nt="en",Rt=200,Zt=450,Dt="image/gif",Bt=new Set(["image/png","image/jpeg",Dt]),Ot=new Set(["video/mp4","video/quicktime"]),xt=new Set(["audio/mp3","audio/ogg","audio/wav","audio/mpeg","audio/flac","audio/aac","audio/m4a","audio/mp4","audio/x-m4a"]),_t=new Set([...Bt,...Ot]),Ft="The message is not supported on this version of Telegram.",jt=["en","ar","be","ca","zh","nl","fr","de","id","it","ja","ko","pl","pt","ru","es","uk","af","sq","am","hy","az","eu","bn","bs","bg","ceb","zh-CN","zh-TW","co","hr","cs","da","eo","et","fi","fy","gl","ka","el","gu","ht","ha","haw","he","iw","hi","hmn","hu","is","ig","ga","jv","kn","kk","km","rw","ku","ky","lo","la","lv","lt","lb","mk","mg","ms","ml","mt","mi","mr","mn","my","ne","no","ny","or","ps","fa","pa","ro","sm","gd","sr","st","sn","sd","si","sk","sl","so","su","sw","sv","tl","tg","ta","tt","te","th","tr","tk","ur","ug","uz","vi","cy","xh","yi","yo","zu"],$t="((ftp|https?):\\/\\/)?((www\\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z][-a-zA-Z0-9]{1,62})\\b([-a-zA-Z0-9()@:%_+.,~#?&/=]*)",Ut="(@[\\w\\d_-]+)",Vt=/^tg:(\/\/)?/i,Ht=/^(https?:\/\/)?([-a-zA-Z0-9@:%_+~#=]{1,32}\.)?t\.me/i,Wt=/^(https?:\/\/)?telegram\.org\//i,Kt="https://t.me/",Gt="botfather",zt="USERNAME_PURCHASE_AVAILABLE",qt="auction",Yt=new Set(["t.me","web.t.me","a.t.me","k.t.me","z.t.me"]),Jt=new Set(["AU","BD","CA","CO","EG","HN","IE","IN","JO","MX","MY","NI","NZ","PH","PK","SA","SV","US"]),Xt=["bots","channels","chats","users"],Qt={emoticon:"❤"},en="777000",tn="1271266957",nn="7173162320003080",on=14,rn=0,sn=1,an=10,dn=5,cn=2147483646,un="en",ln="android",fn=["android","ios","tdesktop","macos"],hn="https://bugs.telegram.org/?tag_ids=41&sort=time",mn="https://telegram.org/faq",pn="https://telegram.org/privacy",gn="https://telegram.org/tos/mini-apps",yn=1,bn=86400,vn="#99BA92",wn="#0F0F0F",In="#4A8E3A8C",Cn="#0A0A0A8C",Sn="1a",En="2b",Pn=5,kn=524288,Tn=100,Mn=100*Tn,An={uploadMaxFileparts:[4e3,8e3],stickersFaved:[5,10],savedGifs:[200,400],dialogFiltersChats:[100,200],dialogFilters:[10,20],dialogFolderPinned:[5,10],captionLength:[1024,2048],channels:[500,1e3],channelsPublic:[10,20],aboutLength:[70,140],chatlistInvites:[3,100],chatlistJoined:[2,20],recommendedChannels:[10,100]}},28304:(e,t,n)=>{var o=n(83716),r=n(65054),s=n(91947),a=n(60782),i=n(59692),d=n(15780),c=n(82267),u=n(706),l=n(4463),f=n(33555),h=n(41020),m=n(44271),p=n(7054);function g(e,t,n){const{connectionState:o}=n;e=(0,f.Rd)();const s=(0,p.jUK)(e,(0,r._w)());if("connectionStateReady"===o&&s.isMasterTab&&s.multitabNextAction&&(t[s.multitabNextAction.action](s.multitabNextAction.payload),t.clearMultitabNextAction({tabId:s.id})),o!==e.connectionState){if(e={...e,connectionState:o},(0,f.R3)(e),e.isSynced){const n=Object.values(e.byTabId).flatMap((e=>e.messageLists)).map((e=>e.chatId)).filter((t=>{const n=e.chats.byId[t];return n&&((0,l.eA)(n)||(0,l.ZV)(n))}));"connectionStateReady"===o&&n.length&&(0,a.Tw)(n).forEach((e=>{t.requestChannelDifference({chatId:e})}))}"connectionStateBroken"===o&&t.signOut({forceInitApi:!0})}}(0,f.iw)("apiUpdate",((e,t,n)=>{switch(n["@type"]){case"updateApiReady":!function(e){(0,i.m0)(e.settings.byKey.language)}(e);break;case"updateAuthorizationState":!function(e,t){const n="authorizationStateReady"===(e=(0,f.Rd)()).authState,o=t.authorizationState;switch(e={...e,authState:o,authIsLoading:!1},(0,f.R3)(e),e=(0,f.Rd)(),o){case"authorizationStateLoggingOut":(0,u.IT)(!1),e={...e,isLoggingOut:!0},(0,f.R3)(e);break;case"authorizationStateWaitCode":e={...e,authIsCodeViaApp:t.isCodeViaApp},(0,f.R3)(e);break;case"authorizationStateWaitPassword":e={...e,authHint:t.hint},t.noReset&&(e={...e,hasWebAuthTokenPasswordRequired:!0}),(0,f.R3)(e);break;case"authorizationStateWaitQrCode":e={...e,authIsLoadingQrCode:!1,authQrCode:t.qrCode},(0,f.R3)(e);break;case"authorizationStateReady":if(n)break;(0,u.IT)(!0),e={...e,isLoggingOut:!1},Object.values(e.byTabId).forEach((({id:t})=>{e=(0,m.i)(e,{isInactive:!1},t)})),(0,f.R3)(e)}}(e,n);break;case"updateAuthorizationError":!function(e,t){e=(0,f.Rd)(),e={...e,authError:t.message},(0,f.R3)(e)}(e,n);break;case"updateWebAuthTokenFailed":!function(e){(0,d.Yw)(),e=(0,f.Rd)(),e={...e,hasWebAuthTokenFailed:!0},(0,f.R3)(e)}(e);break;case"updateConnectionState":g(e,t,n);break;case"updateSession":!function(e,t,n){const{sessionData:o}=n;e=(0,f.Rd)();const{authRememberMe:r,authState:s}=e,a=!o||!o.mainDcId;r&&"authorizationStateReady"===s&&!a&&t.saveSession({sessionData:o})}(e,t,n);break;case"updateServerTimeOffset":!function(e){(0,c.Y$)(e.serverTimeOffset)}(n);break;case"updateCurrentUser":!function(e,t){const{currentUser:n,currentUserFullInfo:r}=t;e={...(0,h.Nq)(e,n.id,n),currentUserId:n.id},e=(0,h.ap)(e,n.id,r),(0,f.R3)(e),function(e){const t=localStorage.getItem(o.b_O);if(!t)return;const n=JSON.parse(t);n.id=e,localStorage.setItem(o.b_O,JSON.stringify(n))}(n.id)}(e,n);break;case"requestReconnectApi":e={...e,isSynced:!1},(0,f.R3)(e),g(e,t,{"@type":"updateConnectionState",connectionState:"connectionStateConnecting"}),t.initApi();break;case"requestSync":t.sync();break;case"updateFetchingDifference":e={...e,isFetchingDifference:n.isFetching},(0,f.R3)(e);break;case"error":Object.values(e.byTabId).forEach((({id:e})=>{const o=(0,s.J_)(n.error);o?t.addPaymentError({error:o,tabId:e}):(0,s.pF)(n.error)?t.closePaymentModal({tabId:e}):t.showDialog&&t.showDialog({data:n.error,tabId:e})}))}}))},65456:(e,t,n)=>{var o=n(91713),r=n(83716),s=n(17358),a=n(49524),i=n(65054),d=n(60782),c=n(28406),u=n(95281),l=n(15780),f=n(50214),h=n(706),m=n(97184),p=n(92387),g=n(5872),y=n(33555),b=n(41020);(0,y.iw)("initApi",(async(e,t)=>{r.Cgt||(await(0,f.Qw)(),(0,f.f3)());const n=(0,l.dx)();(0,p.g8)(t.apiUpdate,{userAgent:navigator.userAgent,platform:m.Lt,sessionData:(0,f.K8)(),isTest:window.location.search.includes("test")||"1"===n?.tgWebAuthTest,isWebmSupported:m.Hh,maxBufferSize:m.l0,webAuthToken:n?.tgWebAuthToken,dcId:n?.tgWebAuthDcId?Number(n?.tgWebAuthDcId):void 0,mockScenario:n?.mockScenario,shouldAllowHttpTransport:e.settings.byKey.shouldAllowHttpTransport,shouldForceHttpTransport:e.settings.byKey.shouldForceHttpTransport,shouldDebugExportedSenders:e.settings.byKey.shouldDebugExportedSenders}),(0,p.Cp)(Boolean(e.settings.byKey.shouldCollectDebugLogs))})),(0,y.iw)("setAuthPhoneNumber",((e,t,n)=>{const{phoneNumber:o}=n;return(0,p.t9)("provideAuthPhoneNumber",o.replace(/[^\d]/g,"")),{...e,authIsLoading:!0,authError:void 0}})),(0,y.iw)("setAuthCode",((e,t,n)=>{const{code:o}=n;return(0,p.t9)("provideAuthCode",o),{...e,authIsLoading:!0,authError:void 0}})),(0,y.iw)("setAuthPassword",((e,t,n)=>{const{password:o}=n;return(0,p.t9)("provideAuthPassword",o),{...e,authIsLoading:!0,authError:void 0}})),(0,y.iw)("uploadProfilePhoto",(async(e,t,n)=>{const{file:r,isFallback:s,isVideo:a,videoTs:c,bot:u,tabId:l=(0,i._w)()}=n;e=(0,b.H9)(e,o.wv.InProgress,l),(0,y.R3)(e);const f=await(0,p.t9)("uploadProfilePhoto",r,s,a,c,u);f&&(e=(0,y.Rd)(),e=(0,b.Sh)(e,(0,d.ee)(f.users,"id")),e=(0,b.H9)(e,o.wv.Complete,l),(0,y.R3)(e),t.loadFullUser({userId:e.currentUserId}))})),(0,y.iw)("signUp",((e,t,n)=>{const{firstName:o,lastName:r}=n;return(0,p.t9)("provideAuthRegistration",{firstName:o,lastName:r}),{...e,authIsLoading:!0,authError:void 0}})),(0,y.iw)("returnToAuthPhoneNumber",(e=>((0,p.t9)("restartAuth"),{...e,authError:void 0}))),(0,y.iw)("goToAuthQrCode",(e=>((0,p.t9)("restartAuthWithQr"),{...e,authIsLoadingQrCode:!0,authError:void 0}))),(0,y.iw)("saveSession",((e,t,n)=>{if(e.passcode.isScreenLocked)return;const{sessionData:o}=n;o?(0,f.wX)(o,e.currentUserId):(0,f.jv)()})),(0,y.iw)("signOut",(async(e,t,n)=>{"hangUp"in t&&t.hangUp({tabId:(0,i._w)()}),"leaveGroupCall"in t&&t.leaveGroupCall({tabId:(0,i._w)()});try{(0,l.DQ)(),await(0,c.r1)(),await(0,p.t9)("destroy"),await(0,h.IT)(!1)}catch(e){}t.reset(),n?.forceInitApi&&t.initApi()})),(0,y.iw)("requestChannelDifference",((e,t,n)=>{const{chatId:o}=n;(0,p.t9)("requestChannelDifference",o)})),(0,y.iw)("reset",((e,t)=>{(0,f.jv)(),(0,u.C8)(),a.clear(r.lWA),a.clear(r.SGw),a.clear(r.lF$),a.clear(r.foQ);const n=r.eev.replace(/\d+$/,""),o=Number((r.eev.match(/\d+$/)||["0"])[0]);for(let e=0;e<o;e++)a.clear(`${n}${0===e?"":e}`);(0,f.f3)(),(0,s.w)(0),t.initShared({force:!0}),Object.values(e.byTabId).forEach((({id:e,isMasterTab:n})=>{t.init({tabId:e,isMasterTab:n})}))})),(0,y.iw)("disconnect",(()=>{(0,p.$9)("disconnect")})),(0,y.iw)("destroyConnection",(()=>{(0,p.$9)("destroy",!0,!0)})),(0,y.iw)("loadNearestCountry",(async e=>{if("connectionStateReady"!==e.connectionState)return;const t=await(0,p.t9)("fetchNearestCountry");e=(0,y.Rd)(),e={...e,authNearestCountry:t},(0,y.R3)(e)})),(0,y.iw)("setDeviceToken",((e,t,n)=>({...e,push:{deviceToken:n,subscribedAt:Date.now()}}))),(0,y.iw)("deleteDeviceToken",(e=>({...e,push:void 0}))),(0,y.iw)("lockScreen",(async e=>{const t=JSON.stringify({...(0,f.K8)(),userId:e.currentUserId}),n=await(0,g.Uf)(e);await(0,u.H4)(t,n),(0,u.J9)(),(0,f.jv)(),(0,s.w)(0),e=(0,y.Rd)(),e=(0,b.vu)(e,{isScreenLocked:!0,invalidAttemptsCount:0,timeoutUntil:void 0}),(0,y.R3)(e),setTimeout((()=>{e=(0,y.Rd)(),e=(0,b.ZI)(e),(0,y.R3)(e)}),r.$RH);try{await(0,c.r1)(),await(0,p.t9)("destroy",!0)}catch(e){}}))},51371:(e,t,n)=>{var o=n(91713),r=n(83716),s=n(65054),a=n(60782),i=n(59692),d=n(28406),c=n(97690),u=n(82267),l=n(92387),f=n(4463),h=n(33555),m=n(41020),p=n(44271),g=n(7054);(0,h.iw)("updateProfile",(async(e,t,n)=>{const{photo:r,firstName:i,lastName:d,bio:c,username:u,tabId:f=(0,s._w)()}=n,{currentUserId:y}=e;if(y){if(e=(0,p.i)(e,{profileEdit:{progress:o.rN.InProgress}},f),(0,h.R3)(e),r){const t=await(0,l.t9)("uploadProfilePhoto",r);t&&(e=(0,h.Rd)(),e=(0,m.Sh)(e,(0,a.ee)(t.users,"id")),(0,h.R3)(e))}if((i||d||c)&&await(0,l.t9)("updateProfile",{firstName:i,lastName:d,about:c})){e=(0,h.Rd)();const t=y&&(0,g.dyD)(e,y);t&&(e=(0,m.Nq)(e,t.id,{firstName:i,lastName:d}),e=(0,m.ap)(e,t.id,{bio:c}),(0,h.R3)(e))}if(void 0!==u){const t=await(0,l.t9)("updateUsername",u);e=(0,h.Rd)();const n=y&&(0,g.dyD)(e,y);if(t&&n){const t=n.usernames?.find((e=>e.isEditable)),o=t?n.usernames?.map((e=>e.isEditable?{...e,username:u}:e)):[{username:u,isEditable:!0,isActive:!0},...n.usernames||[]];e=(0,m.Nq)(e,y,{usernames:o}),(0,h.R3)(e)}}e=(0,h.Rd)(),e=(0,p.i)(e,{profileEdit:{progress:o.rN.Complete}},f),(0,h.R3)(e),r&&t.loadFullUser({userId:y,withPhotos:!0})}})),(0,h.iw)("updateProfilePhoto",(async(e,t,n)=>{const{photo:o,isFallback:r}=n,{currentUserId:s}=e;if(!s)return;if(!(0,g.dyD)(e,s))return;e=(0,m.Nq)(e,s,{avatarHash:void 0}),e=(0,m.ap)(e,s,{profilePhoto:void 0}),(0,h.R3)(e);const i=await(0,l.t9)("updateProfilePhoto",o,r);if(!i)return;const{users:d}=i;e=(0,h.Rd)(),e=(0,m.Sh)(e,(0,a.ee)(d,"id")),(0,h.R3)(e),t.loadFullUser({userId:s,withPhotos:!0})})),(0,h.iw)("deleteProfilePhoto",(async(e,t,n)=>{const{photo:o}=n,{currentUserId:r}=e;if(!r)return;const s=(0,g.dyD)(e,r);if(!s)return;const a=(0,g.ccz)(e,r);s.avatarHash!==o.id&&a?.profilePhoto?.id!==o.id||(e=(0,m.Nq)(e,r,{avatarHash:void 0}),e=(0,m.ap)(e,r,{profilePhoto:void 0})),a?.fallbackPhoto?.id===o.id&&(e=(0,m.ap)(e,r,{fallbackPhoto:void 0})),a?.personalPhoto?.id===o.id&&(e=(0,m.ap)(e,r,{personalPhoto:void 0}));const{photos:i=[]}=s,d=i.filter((e=>e.id!==o.id));e=(0,m.Nq)(e,r,{photos:d}),(0,h.R3)(e),await(0,l.t9)("deleteProfilePhotos",[o]),t.loadFullUser({userId:r,withPhotos:!0})})),(0,h.iw)("checkUsername",(async(e,t,n)=>{const{username:r,tabId:a=(0,s._w)()}=n;let i=(0,g.jUK)(e,a);if(i.profileEdit&&i.profileEdit.progress===o.rN.InProgress)return;e=(0,p.i)(e,{profileEdit:{progress:i.profileEdit?i.profileEdit.progress:o.rN.Idle,checkedUsername:void 0,isUsernameAvailable:void 0,error:void 0}},a),(0,h.R3)(e);const{result:d,error:c}=await(0,l.t9)("checkUsername",r);e=(0,h.Rd)(),i=(0,g.jUK)(e,a),e=(0,p.i)(e,{profileEdit:{...i.profileEdit,checkedUsername:r,isUsernameAvailable:!0===d,error:c}},a),(0,h.R3)(e)})),(0,h.iw)("loadWallpapers",(async e=>{const t=await(0,l.t9)("fetchWallpapers");t&&(e=(0,h.Rd)(),e={...e,settings:{...e.settings,loadedWallpapers:t.wallpapers}},(0,h.R3)(e))})),(0,h.iw)("uploadWallpaper",(async(e,t,n)=>{const r=n,s=URL.createObjectURL(r);e={...e,settings:{...e.settings,loadedWallpapers:[{slug:o.mp,document:{fileName:"",size:r.size,mimeType:r.type,previewBlobUrl:s}},...e.settings.loadedWallpapers||[]]}},(0,h.R3)(e);const a=await(0,l.t9)("uploadWallpaper",r);if(!a)return;const{wallpaper:i}=a;if(!(e=(0,h.Rd)()).settings.loadedWallpapers)return;const d=e.settings.loadedWallpapers[0];if(!d||d.slug!==o.mp)return;const c={...i,document:{...i.document,previewBlobUrl:s}};e={...e,settings:{...e.settings,loadedWallpapers:[c,...e.settings.loadedWallpapers.slice(1)]}},(0,h.R3)(e)})),(0,h.iw)("loadBlockedUsers",(async e=>{const t=await(0,l.t9)("fetchBlockedUsers",{});t&&(e=(0,h.Rd)(),t.users?.length&&(e=(0,m.Sh)(e,(0,a.ee)(t.users,"id"))),t.chats?.length&&(e=(0,m.GL)(e,(0,a.ee)(t.chats,"id"))),e={...e,blocked:{ids:t.blockedIds,totalCount:t.totalCount}},(0,h.R3)(e))})),(0,h.iw)("blockUser",(async(e,t,n)=>{const{userId:o,isOnlyStories:r}=n,s=(0,g.dyD)(e,o);s&&await(0,l.t9)("blockUser",{user:s,isOnlyStories:r||void 0})&&(e=(0,h.Rd)(),e=(0,m.h7)(e,o),(0,h.R3)(e))})),(0,h.iw)("unblockUser",(async(e,t,n)=>{const{userId:o,isOnlyStories:r}=n,s=(0,g.dyD)(e,o);s&&await(0,l.t9)("unblockUser",{user:s,isOnlyStories:r||void 0})&&(e=(0,h.Rd)(),e=(0,m.kw)(e,o),(0,h.R3)(e))})),(0,h.iw)("loadNotificationExceptions",(async e=>{const t=await(0,l.t9)("fetchNotificationExceptions");t&&(e=(0,h.Rd)(),e=(0,m.aJ)(e,t),(0,h.R3)(e))})),(0,h.iw)("loadNotificationSettings",(async e=>{const t=await(0,l.t9)("fetchNotificationSettings");t&&(e=(0,h.Rd)(),e=(0,m.BI)(e,t),(0,h.R3)(e))})),(0,h.iw)("updateNotificationSettings",(async(e,t,n)=>{const{peerType:o,isSilent:r,shouldShowPreviews:s}=n;await(0,l.t9)("updateNotificationSettings",o,{isSilent:r,shouldShowPreviews:s})&&(e=(0,h.Rd)(),e=(0,m.HN)(e,o,r,s),(0,h.R3)(e))})),(0,h.iw)("updateWebNotificationSettings",(async(e,t,n)=>{const o=e.settings.byKey;e=(0,m.BI)(e,n),(0,h.R3)(e);const{hasWebNotifications:r,hasPushNotifications:s}=e.settings.byKey;!o.hasPushNotifications&&s&&await(0,d.Ld)(),o.hasPushNotifications&&!s&&await(0,d.r1)(),!o.hasWebNotifications&&r&&(await(0,d.ZK)()||(e=(0,h.Rd)(),e=(0,m.BI)(e,{hasWebNotifications:!1}),(0,h.R3)(e)))})),(0,h.iw)("updateContactSignUpNotification",(async(e,t,n)=>{const{isSilent:o}=n;await(0,l.t9)("updateContactSignUpNotification",o)&&(e=(0,h.Rd)(),e=(0,m.BI)(e,{hasContactJoinedNotifications:!o}),(0,h.R3)(e))})),(0,h.iw)("loadLanguages",(async e=>{const t=await(0,l.t9)("fetchLanguages");t&&(e=(0,h.Rd)(),e=(0,m.BI)(e,{languages:t}),(0,h.R3)(e))})),(0,h.iw)("loadPrivacySettings",(async e=>{const t=await Promise.all([(0,l.t9)("fetchPrivacySettings","phoneNumber"),(0,l.t9)("fetchPrivacySettings","addByPhone"),(0,l.t9)("fetchPrivacySettings","lastSeen"),(0,l.t9)("fetchPrivacySettings","profilePhoto"),(0,l.t9)("fetchPrivacySettings","forwards"),(0,l.t9)("fetchPrivacySettings","chatInvite"),(0,l.t9)("fetchPrivacySettings","phoneCall"),(0,l.t9)("fetchPrivacySettings","phoneP2P"),(0,l.t9)("fetchPrivacySettings","voiceMessages"),(0,l.t9)("fetchPrivacySettings","bio")]);if(t.some((e=>void 0===e)))return;const[n,o,r,s,i,d,c,u,f,p]=t,g=t.flatMap((e=>e.users));e=(0,h.Rd)(),e=(0,m.Sh)(e,(0,a.ee)(g,"id")),e={...e,settings:{...e.settings,privacy:{...e.settings.privacy,phoneNumber:n.rules,addByPhone:o.rules,lastSeen:r.rules,profilePhoto:s.rules,forwards:i.rules,chatInvite:d.rules,phoneCall:c.rules,phoneP2P:u.rules,voiceMessages:f.rules,bio:p.rules}}},(0,h.R3)(e)})),(0,h.iw)("setPrivacyVisibility",(async(e,t,n)=>{const{privacyKey:o,visibility:r}=n,{privacy:{[o]:s}}=e.settings;if(!s)return;const i=(0,f.wA)(e,{visibility:r,allowedIds:[...s.allowUserIds,...s.allowChatIds],blockedIds:[...s.blockUserIds,...s.blockChatIds]}),d=await(0,l.t9)("setPrivacySettings",o,i);d&&(e=(0,h.Rd)(),e=(0,m.Sh)(e,(0,a.ee)(d.users,"id")),e={...e,settings:{...e.settings,privacy:{...e.settings.privacy,[o]:d.rules}}},(0,h.R3)(e))})),(0,h.iw)("setPrivacySettings",(async(e,t,n)=>{const{privacyKey:o,isAllowList:r,updatedIds:s}=n,{privacy:{[o]:i}}=e.settings;if(!i)return;const d=(0,f.wA)(e,{visibility:i.visibility,isUnspecified:i.isUnspecified,allowedIds:r?s:[...i.allowUserIds,...i.allowChatIds],blockedIds:r?[...i.blockUserIds,...i.blockChatIds]:s}),c=await(0,l.t9)("setPrivacySettings",o,d);c&&(e=(0,h.Rd)(),e=(0,m.Sh)(e,(0,a.ee)(c.users,"id")),e={...e,settings:{...e.settings,privacy:{...e.settings.privacy,[o]:c.rules}}},(0,h.R3)(e))})),(0,h.iw)("updateIsOnline",((e,t,n)=>{"connectionStateReady"===e.connectionState&&(0,l.t9)("updateIsOnline",n)})),(0,h.iw)("loadContentSettings",(async e=>{const t=await(0,l.t9)("fetchContentSettings");t&&(e=(0,h.Rd)(),e=(0,m.BI)(e,t),(0,h.R3)(e))})),(0,h.iw)("updateContentSettings",(async(e,t,n)=>{e=(0,m.BI)(e,{isSensitiveEnabled:n}),(0,h.R3)(e),await(0,l.t9)("updateContentSettings",n)||(e=(0,h.Rd)(),e=(0,m.BI)(e,{isSensitiveEnabled:!n}),(0,h.R3)(e))})),(0,h.iw)("loadCountryList",(async(e,t,n)=>{let{langCode:o}=n;o||(o=e.settings.byKey.language);const r=await(0,l.t9)("fetchCountryList",{langCode:o});r&&(e=(0,h.Rd)(),e={...e,countryList:r},(0,h.R3)(e))})),(0,h.iw)("ensureTimeFormat",(async(e,t,n)=>{const{tabId:o=(0,s._w)()}=n||{};if(e.authNearestCountry){const n=r.FDD.has(e.authNearestCountry.toUpperCase())?"12h":"24h";t.setSettingOption({timeFormat:n,tabId:o}),(0,i.qf)(n)}if(e.settings.byKey.wasTimeFormatSetManually)return;const a=await(0,l.t9)("fetchNearestCountry");if(a){const e=r.FDD.has(a.toUpperCase())?"12h":"24h";t.setSettingOption({timeFormat:e,tabId:o}),(0,i.qf)(e)}})),(0,h.iw)("loadAppConfig",(async(e,t,n)=>{const o=n?.hash,s=await(0,l.t9)("fetchAppConfig",o);s&&((0,c.Z)({action:"loadAppConfig",payload:{hash:s.hash}},r.sux),e=(0,h.Rd)(),e={...e,appConfig:s},(0,h.R3)(e))})),(0,h.iw)("loadConfig",(async e=>{const t=await(0,l.t9)("fetchConfig");if(!t)return;e=(0,h.Rd)();const n=t.expiresAt-(0,u.bp)();(0,c.Z)({action:"loadConfig",payload:void 0},1e3*n),e={...e,config:t},(0,h.R3)(e)})),(0,h.iw)("loadPeerColors",(async e=>{const t=e.peerColors?.generalHash,n=await(0,l.t9)("fetchPeerColors",t);n&&(e=(0,h.Rd)(),e={...e,peerColors:{...e.peerColors,general:n.colors,generalHash:n.hash}},(0,h.R3)(e))})),(0,h.iw)("loadGlobalPrivacySettings",(async e=>{const t=await(0,l.t9)("fetchGlobalPrivacySettings");t&&(e=(0,h.Rd)(),e=(0,m.BI)(e,{shouldArchiveAndMuteNewNonContact:t.shouldArchiveAndMuteNewNonContact}),(0,h.R3)(e))})),(0,h.iw)("updateGlobalPrivacySettings",(async(e,t,n)=>{const{shouldArchiveAndMuteNewNonContact:o}=n;e=(0,m.BI)(e,{shouldArchiveAndMuteNewNonContact:o}),(0,h.R3)(e);const r=await(0,l.t9)("updateGlobalPrivacySettings",{shouldArchiveAndMuteNewNonContact:o});e=(0,h.Rd)(),e=(0,m.BI)(e,{shouldArchiveAndMuteNewNonContact:r?r.shouldArchiveAndMuteNewNonContact:!o}),(0,h.R3)(e)})),(0,h.iw)("toggleUsername",(async(e,t,n)=>{const{username:o,isActive:r}=n,{currentUserId:s}=e;if(!s)return;const a=(0,g.dyD)(e,s);if(!a?.usernames)return;const i=a.usernames.map((e=>e.username!==o?e:{...e,isActive:r||void 0}));e=(0,m.Nq)(e,s,{usernames:i}),(0,h.R3)(e),await(0,l.t9)("toggleUsername",{username:o,isActive:r})||t.loadFullUser({userId:s})})),(0,h.iw)("toggleChatUsername",(async(e,t,n)=>{const{chatId:o,username:r,isActive:a,tabId:i=(0,s._w)()}=n,d=(0,g.Z1J)(e,o);if(!d?.usernames)return;const c=d.usernames.map((e=>e.username!==r?e:{...e,isActive:a||void 0}));e=(0,m.a4)(e,o,{usernames:c}),(0,h.R3)(e),await(0,l.t9)("toggleUsername",{chatId:d.id,accessHash:d.accessHash,username:r,isActive:a})||t.loadFullChat({chatId:o,tabId:i})})),(0,h.iw)("sortUsernames",(async(e,t,n)=>{const{usernames:o}=n,{currentUserId:r}=e;r&&(await(0,l.t9)("reorderUsernames",{usernames:o})||t.loadUser({userId:r}))})),(0,h.iw)("sortChatUsernames",(async(e,t,n)=>{const{chatId:o,usernames:r}=n,s=(0,g.Z1J)(e,o);if(!s)return;const a=[...s.usernames],i=s.usernames.reduce(((e,t)=>(e[r.findIndex((e=>e===t.username))]=t,e)),[]);e=(0,m.a4)(e,o,{usernames:i}),(0,h.R3)(e),await(0,l.t9)("reorderUsernames",{chatId:s.id,accessHash:s.accessHash,usernames:r})||(e=(0,h.Rd)(),e=(0,m.a4)(e,o,{usernames:a}),(0,h.R3)(e))}))},89005:(e,t,n)=>{var o=n(65116),r=n(57710),s=n(65054),a=n(59692),i=n(28406),d=n(95281),c=n(99349),u=n(50214),l=n(27370),f=n(29456),h=n(706),m=n(97184),p=n(92387),g=n(5872),y=n(33555),b=n(41020),v=n(44271),w=n(7054);(0,f.o)((e=>{let t=(0,y.Rd)();t.settings.byKey.shouldUseSystemTheme&&(t=(0,b.BI)(t,{theme:e}),(0,y.R3)(t))})),(0,y.iw)("switchMultitabRole",(async(e,t,n)=>{const{isMasterTab:o,tabId:r=(0,s._w)()}=n;if(o!==(0,w.jUK)(e,r).isMasterTab)if(e=(0,v.i)(e,{isMasterTab:o},r),(0,y.R3)(e,{forceSyncOnIOs:!0}),o){if(e.passcode.hasPasscode&&!e.passcode.isScreenLocked){const{sessionJson:e}=await(0,d.o6)(),t=JSON.parse(e);(0,u.wX)(t,t.userId)}(0,u.ti)(!0)&&(0,g.$S)(),(e=(0,y.Rd)()).passcode.hasPasscode&&e.passcode.isScreenLocked||("connectionStateReady"===e.connectionState&&(e={...e,connectionState:"connectionStateConnecting"},(0,y.R3)(e)),t.initApi()),(0,h.px)()}else(0,i.r1)(),t.destroyConnection(),(0,h.NA)(),(0,g.VJ)(),t.onSomeTabSwitchedMultitabRole();else(0,p.t9)("broadcastLocalDbUpdateFull")})),(0,y.iw)("onSomeTabSwitchedMultitabRole",(async e=>{if(e.passcode.hasPasscode&&!e.passcode.isScreenLocked){const{sessionJson:e}=await(0,d.o6)(),t=JSON.parse(e);(0,u.wX)(t,t.userId)}(0,p.t9)("broadcastLocalDbUpdateFull")})),(0,y.iw)("initShared",(()=>{(0,h.px)()})),(0,y.iw)("initMain",(e=>{const{hasWebNotifications:t,hasPushNotifications:n}=(0,w.dZI)(e);if(t&&n){const e=["click","keypress"],t=()=>{(0,i.Ld)(),e.forEach((e=>{document.removeEventListener(e,t)}))};e.forEach((e=>{document.addEventListener(e,t,{once:!0})}))}})),(0,o.ll)((e=>{let t=!1;const n=(0,w.jUK)(e,(0,s._w)());if(!n?.shouldInit)return;e=(0,y.Rd)(),e=(0,v.i)(e,{shouldInit:!1},n.id);const{messageTextSize:o,language:i}=e.settings.byKey,d=(0,w.Puy)(e),u=(0,f.v)(),p=e.settings.byKey.shouldUseSystemTheme?u:d,g=(0,w.yf2)(e);(0,a.m0)(i,void 0,!0),(0,r.WM)((()=>{document.documentElement.style.setProperty("--composer-text-size",`${Math.max(o,m.cj?16:15)}px`),document.documentElement.style.setProperty("--message-meta-height",`${Math.floor(1.3125*o)}px`),document.documentElement.style.setProperty("--message-text-size",`${o}px`),document.documentElement.setAttribute("data-message-text-size",o.toString()),document.body.classList.add("initial"),document.body.classList.add(m.$b?"is-touch-env":"is-pointer-env"),(0,c.d)(g),m.cj?document.body.classList.add("is-ios"):m.wZ?document.body.classList.add("is-android"):m.jm?document.body.classList.add("is-macos"):m.qB?document.body.classList.add("is-windows"):m.m2&&document.body.classList.add("is-linux"),m.s$&&document.body.classList.add("is-safari"),m.D$&&document.body.classList.add("is-electron")}));const I=(0,w.FOo)(e);(0,l.ZP)(p,I),e=(0,b.BI)(e,{theme:p}),(0,h.px)(),t=!0,(0,y.R3)(e)})),(0,y.iw)("setInstallPrompt",((e,t,n)=>{const{canInstall:o,tabId:r=(0,s._w)()}=n;return(0,v.i)(e,{canInstall:o},r)})),(0,y.iw)("setIsUiReady",((e,t,n)=>{const{uiReadyState:o,tabId:a=(0,s._w)()}=n;return 2===o&&(0,r.WM)((()=>{document.body.classList.remove("initial")})),(0,v.i)(e,{uiReadyState:o},a)})),(0,y.iw)("setAuthPhoneNumber",((e,t,n)=>{const{phoneNumber:o}=n;return{...e,authPhoneNumber:o}})),(0,y.iw)("setAuthRememberMe",((e,t,n)=>({...e,authRememberMe:Boolean(n)}))),(0,y.iw)("clearAuthError",(e=>({...e,authError:void 0}))),(0,y.iw)("disableHistoryAnimations",((e,t,n)=>{const{tabId:o=(0,s._w)()}=n||{};setTimeout((()=>{e=(0,y.Rd)(),e=(0,v.i)(e,{shouldSkipHistoryAnimations:!1},o),(0,y.R3)(e),(0,r.WM)((()=>{document.body.classList.remove("no-animate")}))}),450),e=(0,v.i)(e,{shouldSkipHistoryAnimations:!0},o),(0,y.R3)(e,{forceSyncOnIOs:!0})}))},73456:(e,t,n)=>{var o=n(65116),r=n(91713),s=n(57710),a=n(30879),i=n(65054),d=n(59692),c=n(99349),u=n(27370),l=n(80009),f=n(97184),h=n(92387),m=n(33555),p=n(41020),g=n(44271),y=n(7054);let b;(0,o.ll)((e=>{const{updatePageTitle:t,updateShouldDebugExportedSenders:n,updateShouldEnableDebugLog:o}=(0,m.Sv)(),r=b;if(b=e,!r)return;const a=e.settings.byKey,i=r.settings.byKey,p=e.settings.performance,g=r.settings.performance,v=e.peerColors,w=r.peerColors;if(v&&v!==w&&(0,l.s)(v.general),p!==g&&(0,s.WM)((()=>{(0,c.d)(p)})),a.theme!==i.theme){const t=!!document.hasFocus()&&(0,y.FOo)(e);(0,u.ZP)(a.theme,t)}a.language!==i.language&&(0,d.m0)(a.language),a.timeFormat!==i.timeFormat&&(0,d.qf)(a.timeFormat),a.messageTextSize!==i.messageTextSize&&(document.documentElement.style.setProperty("--composer-text-size",`${Math.max(a.messageTextSize,f.cj?16:15)}px`),document.documentElement.style.setProperty("--message-meta-height",`${Math.floor(1.3125*a.messageTextSize)}px`),document.documentElement.style.setProperty("--message-text-size",`${a.messageTextSize}px`),document.documentElement.setAttribute("data-message-text-size",a.messageTextSize.toString())),a.canDisplayChatInTitle!==i.canDisplayChatInTitle&&t(),a.shouldForceHttpTransport!==i.shouldForceHttpTransport&&(0,h.t9)("setForceHttpTransport",Boolean(a.shouldForceHttpTransport)),a.shouldAllowHttpTransport!==i.shouldAllowHttpTransport&&((0,h.t9)("setAllowHttpTransport",Boolean(a.shouldAllowHttpTransport)),!a.shouldAllowHttpTransport&&a.shouldForceHttpTransport&&(e=(0,m.Rd)(),e={...e,settings:{...e.settings,byKey:{...e.settings.byKey,shouldForceHttpTransport:!1}}},(0,m.R3)(e))),a.shouldDebugExportedSenders!==i.shouldDebugExportedSenders&&n(),a.shouldCollectDebugLogs!==i.shouldCollectDebugLogs&&o()})),(0,m.iw)("updateShouldEnableDebugLog",(e=>{const{settings:t}=e;t.byKey.shouldCollectDebugLogs?((0,h.Cp)(!0),(0,a.$$)()):((0,h.Cp)(!1),(0,a.eP)())})),(0,m.iw)("updateShouldDebugExportedSenders",(e=>{const{settings:t}=e;(0,h.t9)("setShouldDebugExportedSenders",Boolean(t.byKey.shouldDebugExportedSenders))})),(0,m.iw)("setSettingOption",((e,t,n)=>(0,p.BI)(e,n))),(0,m.iw)("updatePerformanceSettings",((e,t,n)=>({...e,settings:{...e.settings,performance:{...e.settings.performance,...n}}}))),(0,m.iw)("setThemeSettings",((e,t,n)=>{const{theme:o,...r}=n;return(0,p.lr)(e,o,r)})),(0,m.iw)("requestNextSettingsScreen",((e,t,n)=>{const{screen:o,foldersAction:r,tabId:s=(0,i._w)()}=n;return(0,g.i)(e,{nextSettingsScreen:o,nextFoldersAction:r},s)})),(0,m.iw)("openEditChatFolder",((e,t,n)=>{const{folderId:o,isOnlyInvites:s,tabId:a=(0,i._w)()}=n,d=(0,y.MwT)(e,o);d&&t.requestNextSettingsScreen({screen:s?r.MT.FoldersEditFolderInvites:r.MT.FoldersEditFolderFromChatList,foldersAction:{type:"editFolder",payload:d},tabId:a})})),(0,m.iw)("openShareChatFolderModal",((e,t,n)=>{const{folderId:o,url:s,noRequestNextScreen:a,tabId:d=(0,i._w)()}=n,c=(0,y.MwT)(e,o),u=c?.isChatList;if(!u||a)return a||t.requestNextSettingsScreen({screen:r.MT.FoldersShare,tabId:d}),(0,g.i)(e,{shareFolderScreen:{folderId:o,isFromSettings:Boolean(a),url:s}},d);t.openEditChatFolder({folderId:o,isOnlyInvites:!0,tabId:d})})),(0,m.iw)("closeShareChatFolderModal",((e,t,n)=>{const{tabId:o=(0,i._w)()}=n||{};return t.requestNextSettingsScreen({screen:void 0,tabId:o}),(0,g.i)(e,{shareFolderScreen:void 0},o)}))},5872:(e,t,n)=>{n.d(t,{$S:()=>S,J9:()=>C,QS:()=>I,Uf:()=>M,VJ:()=>E,jA:()=>T,nE:()=>P});var o=n(65116),r=n(6137),s=n(83716),a=n(16974),i=n(60782),d=n(95281),c=n(69118),u=n(50214),l=n(4463),f=n(33555),h=n(35369),m=n(41020),p=n(7054),g=n(42797),y=n(18674);const b=(0,c.P2)((()=>(0,c.Q8)(k)),5e3,!1);let v,w=!1;function I(){s.sdb||((0,f.iw)("saveSession",(()=>{w||S()})),(0,f.iw)("reset",(()=>{localStorage.removeItem(s.UhJ),w&&E()})))}function C(e){if(s.sdb)return;const t=function(e){s.eMD&&console.time("global-state-cache-read");const t=localStorage.getItem(s.UhJ),n=t?JSON.parse(t):void 0;s.eMD&&console.timeEnd("global-state-cache-read"),n&&P(n,e);return{...e,...n}}(e);return t.passcode.hasPasscode||(0,u.ti)(!0)?(S(),t):void E()}function S(){w=!0,v=(0,c.Gq)(k,!0),window.addEventListener("blur",k),(0,o.ll)(b)}function E(){w=!1,(0,o.Iq)(b),window.removeEventListener("blur",k),v&&v()}function P(e,t){try{!function(e,t){const n=e;e.settings.byKey={...t.settings.byKey,...e.settings.byKey},e.settings.themes={...t.settings.themes,...e.settings.themes},e.chatFolders={...t.chatFolders,...e.chatFolders},e.settings.performance||(e.settings.byKey.animationLevel===s.oBh?e.settings.performance=h.ww:e.settings.byKey.animationLevel===s.mzL?e.settings.performance=h.LN:e.settings.performance=t.settings.performance),e.settings.performance={...t.settings.performance,...e.settings.performance},e.appConfig&&!e.appConfig.limits&&(e.appConfig.limits=s.prK),"string"==typeof e.config?.defaultReaction&&(e.config.defaultReaction={emoticon:e.config.defaultReaction}),"string"==typeof e.availableReactions?.[0].reaction&&(e.availableReactions=e.availableReactions.map((e=>({...e,reaction:{emoticon:e.reaction}})))),e.archiveSettings||(e.archiveSettings=t.archiveSettings),e.stories||(e.stories=t.stories),e.stories.stealthMode||(e.stories.stealthMode=t.stories.stealthMode),e.stories.byPeerId||(e.stories.byPeerId=t.stories.byPeerId,e.stories.orderedPeerIds=t.stories.orderedPeerIds),e.chats.similarChannelsById||(e.chats.similarChannelsById=t.chats.similarChannelsById),n?.appConfig?.peerColors&&(n.appConfig.peerColors=void 0,n.appConfig.darkPeerColors=void 0)}(e,t)}catch(e){console.error(e)}}function k(){const e=(0,f.Rd)();!w||e.isLoggingOut||(0,y.zG)()||T()}function T(e=!1){const t=(0,f.Rd)(),{hasPasscode:n,isScreenLocked:o}=t.passcode,r=M(t);if(n){o||e||(0,d.H4)(void 0,r);const n=JSON.stringify((0,m.ZI)(t,!1));localStorage.setItem(s.UhJ,n)}else localStorage.setItem(s.UhJ,r)}function M(e){const t={...h.g9,...(0,i.ei)(e,["appConfig","authState","authPhoneNumber","authRememberMe","authNearestCountry","currentUserId","contactList","topPeers","topInlineBots","recentEmojis","recentCustomEmojis","topReactions","recentReactions","push","serviceNotifications","attachmentSettings","leftColumnWidth","archiveSettings","mediaViewer","audioPlayer","shouldShowContextMenuHint","trustedBotIds","recentlyFoundChatIds","peerColors"]),lastIsChatInfoShown:(0,g.W7)()?void 0:e.lastIsChatInfoShown,customEmojis:A(e),users:L(e),chats:N(e),messages:R(e),settings:Z(e),chatFolders:D(e),groupCalls:B(e),availableReactions:O(e),passcode:(0,i.ei)(e.passcode,["isScreenLocked","hasPasscode","invalidAttemptsCount","timeoutUntil"])};return JSON.stringify(t)}function A(e){const{lastRendered:t,byId:n}=e.customEmojis,o=t.slice(0,s.j7i);return{byId:(0,i.ei)(n,o),lastRendered:o,forEmoji:{},added:{},statusRecent:{}}}function L(e){const{users:{byId:t,statusesById:n,fullInfoById:o},currentUserId:r}=e,d=(0,i.oA)(Object.values(e.byTabId).map((({id:t})=>(0,p.Btg)(e,t)))).map((({chatId:e})=>e)).filter((e=>(0,l.YC)(e))),c=(0,i.Tw)((0,i.oA)(Object.values(e.byTabId).flatMap((({id:t})=>(0,p.P2Q)(e,t)?.map((e=>e.id))||[])))),u=d.flatMap((t=>Object.values((0,p.Zwk)(e,t)||{}))).map((e=>e.content.storyData?.peerId||e.content.webPage?.story?.peerId)).filter((e=>Boolean(e)&&(0,l.YC)(e))),f=(0,i.Tw)([...r?[r]:[],...d,...u,...c||[],...e.topPeers.userIds||[],...(0,a.gO)(s.NfV)?.filter(l.YC)||[],...(0,a.gO)(s.WSp)?.filter(l.YC)||[],...e.contactList?.userIds||[],...e.recentlyFoundChatIds?.filter(l.YC)||[],...Object.keys(t)]).slice(0,s.lOz);return{byId:(0,i.ei)(t,f),statusesById:(0,i.ei)(n,f),fullInfoById:(0,i.ei)(o,f)}}function N(e){const{chats:{byId:t},currentUserId:n}=e,o=(0,i.oA)(Object.values(e.byTabId).map((({id:t})=>(0,p.Btg)(e,t)))).map((({chatId:e})=>e)),r=(0,i.oA)(Object.values(e.byTabId).flatMap((({id:t})=>{const n=(0,p.Btg)(e,t);if(!n)return;const o=(0,p.Zwk)(e,n.chatId),r=(0,p.Cbz)(e,n.chatId,n.threadId,t);return r?.map((e=>{const t=o[e];if(!t)return;const n=t.content,r="message"===t.replyInfo?.type&&t.replyInfo.replyToPeerId;return n.storyData?.peerId||n.webPage?.story?.peerId||r}))}))),d=(0,i.Tw)([...n?[n]:[],...o,...r,...(0,a.gO)(s.NfV)||[],...(0,a.gO)(s.WSp)||[],...e.recentlyFoundChatIds||[],...Object.keys(t)]).slice(0,s.gJR);return{...e.chats,similarChannelsById:{},isFullyLoaded:{},byId:(0,i.ei)(e.chats.byId,d),fullInfoById:(0,i.ei)(e.chats.fullInfoById,d)}}function R(e){const{currentUserId:t}=e,n={},o=(0,i.oA)(Object.values(e.byTabId).map((({id:t})=>(0,p.Btg)(e,t)))).map((({chatId:e})=>e)),d=(0,i.oA)(Object.values(e.byTabId).map((({forumPanelChatId:e})=>e)));return(0,i.Tw)([...o,...t?[t]:[],...d,...(0,a.gO)(s.NfV)?.slice(0,s.Rk9)||[]]).forEach((t=>{const o=e.messages.byChatId[t];if(!o)return;const s=(0,p.Z1J)(e,t),a=(0,i.Tw)((0,i.oA)(Object.values(e.byTabId).map((({id:n})=>{const{chatId:o,threadId:s}=(0,p.Btg)(e,n)||{};if(o&&o===t&&s&&s!==r._f)return s})).concat(Object.values(e.messages.byChatId[t].threadsById||{}).map((({threadInfo:e})=>e?.isCommentsInfo?e?.originMessageId:void 0))))),d=a.length?[r._f,...a]:[r._f],c=(0,i.q0)(o.threadsById,d);if(!Object.keys(c).length)return;const u=(0,i.Tw)(Object.values(c).flatMap((e=>e.lastViewportIds||[]))),l=s?.topics?Object.values(s.topics).map((({lastMessageId:e})=>e)):[],f=(0,i.ei)(o.byId,u.concat(l)),h=Object.keys(c).reduce(((e,t)=>{const n=c[Number(t)];return e[Number(t)]={...n,listedIds:n.lastViewportIds,pinnedIds:void 0,typingStatus:void 0},e}),{});n[t]={byId:f,threadsById:h}})),{byChatId:n,sponsoredByChatId:{}}}function Z(e){const{byKey:t,themes:n,performance:o}=e.settings;return{byKey:t,themes:n,performance:o,privacy:{},notifyExceptions:{}}}function D(e){return{...e.chatFolders}}function B(e){return{...e.groupCalls,byId:{},activeGroupCallId:void 0}}function O(e){return e.availableReactions?.map((e=>(0,i.ei)(e,["reaction","staticIcon","title","isInactive"])))}},22825:(e,t,n)=>{n.d(t,{$l:()=>V,AY:()=>W,Bf:()=>g,EC:()=>z,G9:()=>y,GU:()=>L,H5:()=>Z,Hp:()=>T,Mg:()=>N,Nl:()=>M,Qm:()=>R,R0:()=>K,RT:()=>k,Ru:()=>w,SB:()=>j,Sb:()=>H,Sm:()=>_,U:()=>E,VE:()=>A,Wd:()=>p,YC:()=>h,Yg:()=>m,ZV:()=>b,cc:()=>F,eA:()=>v,hu:()=>P,i4:()=>x,ih:()=>U,kj:()=>G,l6:()=>C,mt:()=>B,pE:()=>O,pK:()=>I,q8:()=>D,zF:()=>$,zX:()=>S});var o=n(6137),r=n(83716),s=n(790),a=n(60782),i=n(85765),d=n(33555),c=n(93311);const u=Date.now()/1e3+31622400,l=3e9,f=3e8;function h(e){return!e.startsWith("-")}function m(e){return`-100${e}`}function p(e){return"title"in e}function g(e){return y(e)||b(e)}function y(e){return"chatTypeBasicGroup"===e.type}function b(e){return"chatTypeSuperGroup"===e.type}function v(e){return"chatTypeChannel"===e.type}function w(e){return"chatTypePrivate"===e.type||"chatTypeBasicGroup"===e.type}function I(e){return e===r.FVh}function C(e){switch(e.type){case"chatTypePrivate":return"PrivateChat";case"chatTypeBasicGroup":case"chatTypeSuperGroup":return"AccDescrGroup";case"chatTypeChannel":return"AccDescrChannel";default:return"Chat"}}function S(e){if("chatTypePrivate"===e.type||"chatTypeSecret"===e.type)return e.id}function E(e,t,n=!1){return n?e("SavedMessages"):t.title||e("HiddenName")}function P(e){const t=(0,c.WS)(e);return t?`${r.zHP}${t}`:void 0}function k(e,t="normal",n=e.avatarHash){if(n)return"big"===t?`profile${e.id}?${n}`:`avatar${e.id}?${n}`}function T(e){return!e.lastMessage}function M(e){return Boolean(e.adminRights)}function A(e,t){return!!e.adminRights&&e.adminRights[t]}function L(e,t){return t.id===r.OxA?e.isCreator:e.isCreator||A(e,"manageTopics")||t.isOwner}function N(e,t){return Boolean(e.currentUserBannedRights?.[t]||e.defaultBannedRights?.[t])}function R(e,t,n){if(t!==o._f&&e.isForum){if(e.isNotJoined)return!1;const n=e.topics?.[t];if(n?.isClosed&&!n.isOwner&&!A(e,"manageTopics"))return!1}return!(e.isRestricted||e.isForbidden||e.migratedTo||!n&&e.isNotJoined||I(e.id))&&(!!e.isCreator||!!h(e.id)||(v(e)?A(e,"postMessages"):M(e)||!N(e,"sendMessages")))}function Z(e,t=!1,n=!1){if(!e)return{canAttachMedia:!1,canAttachPolls:!1,canSendStickers:!1,canSendGifs:!1,canAttachEmbedLinks:!1,canSendPhotos:!1,canSendVideos:!1,canSendRoundVideos:!1,canSendAudios:!1,canSendVoices:!1,canSendPlainText:!1,canSendDocuments:!1};const o=M(e);return{canAttachMedia:o||n||!N(e,"sendMedia"),canAttachPolls:!n&&(o||!N(e,"sendPolls"))&&(!h(e.id)||t),canSendStickers:o||n||!N(e,"sendStickers"),canSendGifs:o||n||!N(e,"sendGifs"),canAttachEmbedLinks:!n&&(o||!N(e,"embedLinks")),canSendPhotos:o||n||!N(e,"sendPhotos"),canSendVideos:o||n||!N(e,"sendVideos"),canSendRoundVideos:o||n||!N(e,"sendRoundvideos"),canSendAudios:o||n||!N(e,"sendAudios"),canSendVoices:o||n||!N(e,"sendVoices"),canSendPlainText:o||n||!N(e,"sendPlain"),canSendDocuments:o||n||!N(e,"sendDocs")}}function D(e,t,n){if(t?.sendMessages){const{untilDate:n}=t;return n&&n<u?e("Channel.Persmission.Denied.SendMessages.Until",e("formatDateAtTime",[(0,s.xH)(new Date(1e3*n),e.code),(0,s.mr)(e,1e3*n)])):e("Channel.Persmission.Denied.SendMessages.Forever")}if(n?.sendMessages)return e("Channel.Persmission.Denied.SendMessages.DefaultRestrictedText")}function B(e,t,n=o._f,s){if(!t?.isForum)return;if(n===o._f){if(s||t.topics&&!t.topics[r.OxA]?.isClosed)return;return e("lng_forum_replies_only")}const a=t.topics?.[n];return a?!a.isClosed||a.isOwner||A(t,"manageTopics")?void 0:e("TopicClosedByAdmin"):void 0}function O(e){return e.folderId===r.WSp}function x(e,t,n={}){return n[e.id]&&void 0!==n[e.id].isMuted?n[e.id].isMuted:e.isMuted||h(e.id)&&!t.hasPrivateChatsNotifications||v(e)&&!t.hasBroadcastNotifications||g(e)&&!t.hasGroupNotifications}function _(e,t,n={}){const{hasPrivateChatsMessagePreview:o=!0,hasBroadcastMessagePreview:r=!0,hasGroupMessagePreview:s=!0}=t;return n[e.id]&&void 0!==n[e.id].shouldShowPreviews?n[e.id].shouldShowPreviews:h(e.id)&&o||v(e)&&r||g(e)&&s}function F(e){return y(e)||(b(e)||v(e))&&e.isCreator}function j(e,t,n){const{excludedChatIds:o,includedChatIds:r,bots:s,groups:a,contacts:i,nonContacts:d,channels:c}=t,u=[s,a,i,d,c];return void 0!==n&&(Object.values(u).filter(Boolean).length>1||o?.length||r?.length)?e("Chats",n):s?e("FilterBots"):a?e("FilterGroups"):c?e("FilterChannels"):i?e("FilterContacts"):d?e("FilterNonContacts"):void 0}function $(e,t,n){if(n&&!h(t)){if(!h(n.id)){if(t===n.id)return;return n.title}return n.isSelf?e("FromYou"):(0,c.Vl)(n)}}function U(e,t,n=!1,o){return(0,a.Xo)(e,(e=>{const r=t[e];if(!r)return 0;let s=0;return r.lastMessage&&(s+=r.lastMessage.date),n&&r.isVerified&&(s+=l),o&&o.includes(e)&&(s=Date.now()+f+(o.length-o.indexOf(e))),s}),"desc")}function V(e,t,n,o,r){if(!o)return t;const s=(0,i.W)(o);return t.filter((t=>{const o=n[t];if(!o)return!1;const a=t===r,i=E(e,o,a);return a?s(i)||s(o.title):s(i)}))}function H(e){return e.usernames?.some((({isActive:e})=>e))}function W(e,t,n=!1){if(n)return e.sort(((e,t)=>t.lastMessageId-e.lastMessageId));{const n=e.filter((e=>e.isPinned)),o=e.filter((e=>!e.isPinned&&!e.isHidden)).sort(((e,t)=>t.lastMessageId-e.lastMessageId)),r=e.filter((e=>!e.isPinned&&e.isHidden)).sort(((e,t)=>t.lastMessageId-e.lastMessageId));return[...t?t.map((e=>n.find((t=>t.id===e)))).filter(Boolean):n,...o,...r]}}function K(e){return Math.abs(Number(function(e){return(t=e).length===r.yce&&t.startsWith("-100")?e.replace("-100",""):e.replace("-","");var t}(e)))}function G(e){return e?.color?.color?e.color.color:e?K(e.id)%7:0}function z(e){const t=G(e);return(0,d.Rd)().peerColors?.general[t].colors?.length||1}},4463:(e,t,n)=>{n.d(t,{lN:()=>a.lN,JE:()=>ne,wA:()=>ye,uw:()=>J,k6:()=>Z,XU:()=>re,yL:()=>te,uF:()=>le,tK:()=>s.tK,$l:()=>r.$l,kK:()=>o.kK,H5:()=>r.H5,MR:()=>F,NF:()=>ue,kw:()=>o.kw,cc:()=>r.cc,GU:()=>r.GU,Qm:()=>r.Qm,RT:()=>r.RT,hu:()=>r.hu,N0:()=>H,U:()=>r.U,l6:()=>r.l6,ym:()=>R,T7:()=>s.T7,SB:()=>r.SB,mt:()=>r.mt,N:()=>O,Wc:()=>x,VE:()=>r.VE,WS:()=>o.WS,XV:()=>Y,Sc:()=>z,N5:()=>g,g8:()=>h,oP:()=>y,nl:()=>S,qp:()=>u,w6:()=>s.w6,R5:()=>q,$D:()=>s.$D,aE:()=>w,ep:()=>$,c0:()=>U,d0:()=>s.d0,eO:()=>P,NE:()=>N,Tp:()=>s.Tp,nf:()=>k,kG:()=>j,Ti:()=>D,DH:()=>L,KK:()=>s.KK,O$:()=>f,t9:()=>E,dT:()=>ee,Y5:()=>p,zF:()=>r.zF,q8:()=>r.q8,HW:()=>s.HW,eH:()=>s.eH,h_:()=>s.eO,bf:()=>v,Kk:()=>a.Kk,Eb:()=>a.Eb,MK:()=>a.MK,UD:()=>s.UD,EU:()=>a.EU,b7:()=>m,kd:()=>b,s1:()=>T,F$:()=>M,Cg:()=>A,AY:()=>r.AY,EC:()=>r.EC,kj:()=>r.kj,R0:()=>r.R0,qI:()=>o.qI,bV:()=>W,HV:()=>K,zX:()=>r.zX,$d:()=>ie,OU:()=>s.OU,RI:()=>s.RI,RK:()=>pe.RK,hl:()=>me,Cc:()=>he,Ow:()=>Q,Vl:()=>o.Vl,Js:()=>o.Js,UZ:()=>ae,Tq:()=>o.Tq,Dk:()=>fe,jC:()=>G,O9:()=>B,BM:()=>V,u8:()=>l,fY:()=>s.fY,FT:()=>s.Lo,Ul:()=>s.Ul,Wd:()=>r.Wd,Nl:()=>r.Nl,pE:()=>r.pE,G9:()=>r.G9,eA:()=>r.eA,Bf:()=>r.Bf,Sb:()=>r.Sb,Hp:()=>r.Hp,ZV:()=>r.ZV,pK:()=>r.pK,Ru:()=>r.Ru,NB:()=>o.NB,MF:()=>s.MF,$R:()=>s.$R,CD:()=>s.CD,AJ:()=>s.AJ,rl:()=>I,hC:()=>C,FF:()=>s.FF,CI:()=>s.CI,cT:()=>s.cT,B4:()=>s.B4,Bt:()=>de,V5:()=>s.V5,Hl:()=>oe,jM:()=>s.jM,cS:()=>o.cS,YC:()=>r.YC,kM:()=>o.kM,Mg:()=>r.Mg,Ib:()=>s.Ib,TO:()=>s.TO,Fs:()=>s.Fs,Ak:()=>s.Ak,i4:()=>r.i4,Sm:()=>r.Sm,ih:()=>r.ih,PO:()=>se,Z0:()=>o.Z0,If:()=>pe.If,Yg:()=>r.Yg,vt:()=>ce});var o=n(93311),r=n(22825),s=n(20841),a=n(42986),i=n(6137),d=n(97184),c=n(15376);function u(e){return e.content}function l(e){return Boolean(f(e)||m(e)||w(e)||v(e)||S(e)||E(e)||g(e)||y(e)||b(e))}function f(e){return e.content.photo}function h(e){return"suggestProfilePhoto"===e.content.action?.type?e.content.action.photo:void 0}function m(e){return e.content.video}function p(e){const{video:t}=e.content;return t?.isRound?t:void 0}function g(e){return e.content.action}function y(e){return e.content.audio}function b(e){return e.content.voice}function v(e){return e.content.sticker}function w(e){return e.content.document}function I(e){const t=w(e);return t?"photo"===t.mediaType:void 0}function C(e){const t=w(e);return t?"video"===t.mediaType:void 0}function S(e){return e.content.contact}function E(e){return e.content.poll}function P(e){return e.content.invoice}function k(e){return e.content.location}function T(e){return e.content.webPage}function M(e){return T(e)?.photo}function A(e){return T(e)?.video}function L(e){return function(e){const t=f(e)||m(e)||w(e)||v(e)||M(e)||A(e)||P(e)?.extendedMedia;if(t)return t.thumbnail}(e)?.dataUri}function N(e){const t=f(e)||m(e),n=P(e)?.extendedMedia;return Boolean(n||t?.isSpoiler)}function R(e){return`document${e.id}`}function Z(e,t,n,o,r){const{long:s,lat:a,accessHash:i,accuracyRadius:d}=e;return`staticMap:${i}?lat=${a}&long=${s}&w=${t}&h=${n}&zoom=${o}&scale=${r}&accuracyRadius=${d}`}function D(e,t){const{video:n,sticker:o,audio:r,voice:a,document:i}=e.content,d=f(e)||M(e)||function(e){return I(e)?w(e):void 0}(e),u=h(e),l=n||A(e)||function(e){return C(e)?w(e):void 0}(e),m=u||d||l||o||r||a||i;if(!m)return;const p=m.id,g=`${(0,s.Tp)(e)}${p?`:${p}`:""}`;if(l)switch(t){case"micro":case"pictogram":return`${g}?size=m`;case"inline":return V(e)?void 0:_(l,g);case"preview":return`${g}?size=x`;case"full":return _(l,g);case"download":return`${g}?download`}if(d||u)switch(t){case"micro":case"pictogram":return`${g}?size=${u?"a":"m"}`;case"inline":return V(e)?void 0:`${g}?size=${u?"b":"x"}`;case"preview":return`${g}?size=${u?"b":"x"}`;case"full":case"download":return i?g:`${g}?size=${u?"c":"z"}`}if(i)switch(t){case"micro":case"pictogram":case"inline":case"preview":if(!(0,c.v6)(i)||V(e))return;return`${g}?size=m`;case"full":case"download":return g}if(o)switch(t){case"micro":return;case"pictogram":return`${g}?size=m`;case"inline":return g;case"download":return`${g}?download`}if(r)switch(t){case"micro":case"pictogram":return F(r)?`${g}?size=m`:void 0;case"inline":return _(r,g);case"download":return`${g}?download`}if(a)switch(t){case"micro":case"pictogram":return;case"inline":return g;case"download":return`${g}?download`}}function B(e){if(e)return`webDocument:${e.url}`}function O(e){const{photo:t}=e;if(t)return`photo${t.id}?size=x`}function x(e){const{document:t}=e;if(t)return`document${t.id}`}function _(e,t){return d.I_&&d.s$?`${t}?fileSize=${e.size}&mimeType=${e.mimeType}`:t}function F(e){return e.thumbnailSizes&&e.thumbnailSizes.length>0}function j(e,t){const{video:n,audio:o,voice:r,document:s}=e.content,a=Boolean(n||A(e)||C(e)),c=(n||o||s)?.size;return"download"===t?d.I_&&c>d.l0&&!d.rT?i.IU.DownloadUrl:i.IU.BlobUrl:a&&d.I_&&("full"===t||"inline"===t)?i.IU.Progressive:o||r?r&&!d.m5?i.IU.BlobUrl:i.IU.Progressive:i.IU.BlobUrl}function $(e){const{photo:t,video:n,document:o}=e.content,r=M(e),s=A(e);if(t||r)return`photo${e.date}.jpeg`;const{fileName:a}=n||s||o||{};return a}function U(e){const{video:t,document:n}=e.content,o=A(e),{size:r}=t||o||n||{};return r}function V(e){const{photo:t,video:n,document:o}=e.content;return t?.blobUrl||n?.blobUrl||o?.previewBlobUrl}function H(e,t,n=!1){return q(e,t,n?"media":"inlineMedia")}function W(e){return e.sizes.find((e=>"z"===e.type))||e.sizes.find((e=>"y"===e.type))||K(e)}function K(e){return e.sizes.find((e=>"x"===e.type))||e.sizes.find((e=>"m"===e.type))||e.sizes.find((e=>"s"===e.type))||e.thumbnail}function G(e){if(e.width&&e.height)return e}function z(e,t,n=!1){const o=(0,s.CI)(e);return{isUploading:o,isTransferring:o||n,transferProgress:Number(t)}}function q(e,t,n){let o;switch(n){case"media":o=e=>{const t=m(e);return f(e)||t&&!t.isRound&&!t.isGif};break;case"documents":o=w;break;case"links":o=e=>T(e)||(0,s.sQ)(e);break;case"audio":o=y;break;case"voice":o=e=>{const t=m(e);return b(e)||t&&t.isRound};break;case"inlineMedia":o=e=>{const t=m(e);return f(e)||t&&!t.isRound&&!t.isGif||I(e)||C(e)};break;default:return[]}return t.reduce(((t,n)=>(e[n]&&o(e[n])&&t.push(n),t)),[])}function Y(e){const{audio:t,voice:n,video:o}=u(e),r=t||n||o||A(e);if(r)return r.duration}function J(e,t){return`${e}_${t}`}const X={missing_payment_information:{field:"cardNumber",message:"Incorrect card number"},invalid_number:{field:"cardNumber",message:"Incorrect card number"},number:{field:"cardNumber",message:"Incorrect card number"},exp_year:{field:"expiry",message:"Incorrect year"},exp_month:{field:"expiry",message:"Incorrect month"},invalid_expiry_year:{field:"expiry",message:"Incorrect year"},invalid_expiry_month:{field:"expiry",message:"Incorrect month"},cvc:{field:"cvv",message:"Incorrect CVV"},invalid_cvc:{field:"cvv",message:"Incorrect CVV"}};function Q(e){const{message:t,code:n,param:o}=e,{field:r,message:s}=o?X[o]:X[n];return{field:r,message:s,description:t}}function ee(e){return e.isOutgoing?e.reactions?.recentReactions?.[0]:void 0}function te(e,t){const{currentUserId:n}=e;return t?.recentReactions?.some((({isUnread:e,isOwn:t,peerId:o})=>e&&!t&&n!==o))}function ne(e){return!e.results.some((({count:e})=>e>0))}function oe(e,t){return!(!e||!t)&&("emoticon"in e&&"emoticon"in t?e.emoticon===t.emoticon:"documentId"in e&&"documentId"in t&&e.documentId===t.documentId)}function re(e,t){return"all"===t.type?"emoticon"in e||t.areCustomAllowed:"some"===t.type&&t.allowed.some((t=>oe(t,e)))}function se(e,t){return e.slice().sort(((e,n)=>{const o=e?"reaction"in e?e.reaction:e:void 0,r=n?"reaction"in n?n.reaction:n:void 0,s=t?.findIndex((e=>oe(e,o)))||0,a=t?.findIndex((e=>oe(e,r)))||0;return(s>-1?s:1/0)-(a>-1?a:1/0)}))}function ae(e){return e.reactions?.results?.filter((e=>de(e))).sort(((e,t)=>e.chosenOrder-t.chosenOrder)).map((e=>e.reaction))||[]}function ie(e){return"emoticon"in e?e.emoticon:e.documentId}function de(e){return void 0!==e.chosenOrder}function ce(e,t){const n=e.map((e=>de(e)?{...e,chosenOrder:void 0,count:e.count-1}:e)).filter((({count:e})=>e>0));return t.forEach(((e,t)=>{const o=n.findIndex((t=>oe(t.reaction,e)));o>-1?n[o]={...n[o],chosenOrder:t,count:n[o].count+1}:n.push({reaction:e,chosenOrder:t,count:1})})),n}function ue(e){return`photo${e.id}?size=x`}function le(e){return"channels"===e?"channels":"chats"===e||"groups"===e?"chats":"users"===e?"users":"bots"===e?"bots":void 0}function fe(e){return`videoAvatar${e.id}?size=u`}function he(e,t="preview",n){if(Boolean(e.content.video)){if(n&&!e.content.altVideo)return;const o=n?e.content.altVideo:e.content.video,r=`document${o.id}`;return"download"===t?`${r}?download`:"full"!==t?`${r}?size=m`:_(o,r)}const o=function(e){switch(e){case"download":return"?size=z";case"pictogram":return"?size=m";case"preview":return"?size=x";case"full":return"?size=w";default:return""}}(t);return`photo${e.content.photo.id}${o}`}function me(e,t){return`story${e}-${t}`}var pe=n(56266),ge=n(60782);function ye(e,{visibility:t,isUnspecified:n,allowedIds:o,blockedIds:s}){const{users:{byId:a},chats:{byId:i}}=e,[d,c]=(0,ge.uK)(o,r.YC),[u,l]=(0,ge.uK)(s,r.YC);return{visibility:t,isUnspecified:n,allowedUsers:d.map((e=>a[e])).filter(Boolean),allowedChats:c.map((e=>i[e])).filter(Boolean),blockedUsers:u.map((e=>a[e])).filter(Boolean),blockedChats:l.map((e=>i[e])).filter(Boolean)}}},42986:(e,t,n)=>{n.d(t,{EU:()=>f,Eb:()=>h,Kk:()=>m,MK:()=>l,lN:()=>u});var o=n(6137),r=n(83716),s=n(48035),a=n(33555),i=n(20841),d=n(93311);const c=["⠺","⠵","⠞","⠟"],u=80;function l(e,t,n=!1,o=u,r=!1){const a=!n&&h(t);return`${a?`${a} `:""}${m(e,t,(0,s.Z)(f(t),o),r)}`}function f(e){const t=(0,i.$b)(e),n=(0,i.UD)(e);if(!n)return t;const{entities:r}=e.content.text||{};if(!r?.length)return t?`${t}\n${n}`:n;const s=r.reduce(((e,{type:t,offset:n,length:r})=>{if(t!==o.Vv.Spoiler)return e;const s=function(e){return new Array(e).fill(void 0).map((()=>c[Math.floor(Math.random()*c.length)])).join("")}(r);return`${e.substr(0,n)}${s}${e.substr(n+r,e.length)}`}),n);return t?`${t}\n${s}`:s}function h(e){const{photo:t,video:n,audio:o,voice:r,document:s,sticker:a,poll:i}=e.content;return e.groupedId||t?"🖼":n?"📹":a?a.emoji:o?"🎧":r?"🎤":s?"📎":i?"📊":void 0}function m(e,t,n,o=!1){const{text:s,photo:i,video:c,audio:u,voice:l,document:f,sticker:h,contact:m,poll:p,invoice:g,location:y,game:b,storyData:v,giveaway:w,giveawayResults:I}=t.content;let C,S=!1;if(t.groupedId&&(S=!0,C=n||e("lng_in_dlg_album")),i&&(S=!0,C=n||e("AttachPhoto")),c&&(S=!0,C=n||e(c.isGif?"AttachGif":"AttachVideo")),h&&(C=e("AttachSticker").trim()),u&&(C=function(e){const{audio:t,text:n}=e.content;return t&&[t.title,t.performer].filter(Boolean).join(" — ")||n?.text}(t)||e("AttachMusic")),l&&(S=!0,C=n||e("AttachAudio")),f&&(S=!o,C=o?f.fileName:n||f.fileName),m&&(C=e("AttachContact")),p&&(C=p.summary.question),g&&(C=g.extendedMedia?g.title:`${e("PaymentInvoice")}: ${g.text}`),s&&(o&&C&&!S?C+=`\n${n}`:C=n),"geo"!==y?.type&&"venue"!==y?.type||(C=e("Message.Location")),"geoLive"===y?.type&&(C=e("Message.LiveLocation")),b&&(C=`🎮 ${b.title}`),w&&(C=e("BoostingGiveawayChannelStarted")),I&&(C=e("Message.GiveawayEndedWinners",I.winnersCount)),v)if(v.isMention){const n=(0,a.Rd)(),o=(0,d.Vl)(n.users.byId[t.chatId]);C=t.isOutgoing?e("Chat.Service.StoryMentioned.You",o):e("Chat.Service.StoryMentioned",o)}else C=e("ForwardedStory");return C||r.VC4}},20841:(e,t,n)=>{n.d(t,{$D:()=>v,$R:()=>x,$b:()=>g,AJ:()=>D,Ak:()=>m,B4:()=>E,CD:()=>B,CI:()=>R,FF:()=>Z,Fs:()=>$,HW:()=>I,Ib:()=>U,KK:()=>p,Lo:()=>T,MF:()=>k,OU:()=>L,RI:()=>N,T7:()=>C,TO:()=>j,Tp:()=>h,UD:()=>b,Ul:()=>A,V5:()=>P,cT:()=>_,d0:()=>f,eH:()=>F,eO:()=>w,fY:()=>y,jM:()=>M,sQ:()=>S,tK:()=>V,w6:()=>O});var o=n(6137),r=n(83716),s=n(60782),a=n(82267),i=n(97184),d=n(33555),c=n(22825),u=n(93311);const l=new RegExp(r.FM6,"i");function f(e){return`message${e.toString().replace(".","-")}`}function h(e){const{chatId:t,id:n,previousLocalId:o}=e;return function(e,t){return`msg${e}-${t}`}(t,M(e)&&o||n)}function m(e){const t=e.match(/^msg(-?\d+)-(\d+)/);return{chatId:t[1],messageId:Number(t[2])}}function p(e){return e.previousLocalId||e.id}function g(e){const{transcriptionId:t}=e,n=(0,d.Rd)();return t&&n.transcriptions[t]?.text}function y(e){const{text:t,sticker:n,photo:o,video:r,audio:s,voice:a,document:i,poll:d,webPage:c,contact:u,invoice:l,location:f,game:h,action:m,storyData:p,giveaway:g,giveawayResults:y}=e.content;return Boolean(t)||!(n||o||r||s||a||i||u||d||c||l||f||h||m?.phoneCall||p||g||y)}function b(e){return y(e)?e.content.text?.text||r.VC4:void 0}function v(e){const{text:t,sticker:n,photo:r,video:s,audio:a,voice:i,document:d,poll:c,webPage:u,contact:l,action:f,game:h,invoice:m,location:p,storyData:g}=e.content;if(n||s?.isRound)return!0;if(!t||r||s||a||i||d||c||u||l||f||h||m||p||g)return!1;const y=t?.entities?.some((e=>e.type!==o.Vv.CustomEmoji));return Boolean(e.emojiOnlyCount&&!y)}function w(e){const{text:t}=e.content;if(!t?.entities?.length&&1===e.emojiOnlyCount)return t.text}function I(e){const{text:t}=e.content;if(1===t?.entities?.length&&t.entities[0].type===o.Vv.CustomEmoji&&1===e.emojiOnlyCount)return t.entities[0].documentId}function C(e){const{text:t}=e.content;let n;if(t?.entities){const e=t.entities.find((e=>e.type===o.Vv.TextUrl));if(e&&(n=e.url.match(l)),!n){const e=t.entities.find((e=>e.type===o.Vv.Url));if(e){const{offset:o,length:r}=e;n=t.text.substring(o,o+r).match(l)}}}if(!n&&t&&(n=t.text.match(l)),n)return{url:n[0],domain:n[3]}}function S(e){const{text:t}=e.content,n=t&&t.text.match(l);if(n)return{url:n[0],domain:n[3]}}function E(e){return e.isOutgoing}function P(e){return Boolean("message"===e.replyInfo?.type)}function k(e){return Boolean(e.forwardInfo||e.content.storyData)}function T(e){return Boolean(e.content.action)}function M(e){return e.chatId===r.awM&&Math.round(e.id)!==e.id}function A(e){return Boolean(e.senderId)&&!(0,c.YC)(e.senderId)&&E(e)}function L(e,t){return(0,c.YC)(t.id)?(0,u.Js)(t):(0,c.U)(e,t)}function N(e){return e.sendingState?"messageSendingStateFailed"===e.sendingState?"failed":"pending":"succeeded"}function R(e){return D(e.id)}function Z(e){return"messageSendingStateFailed"===e.sendingState}function D(e){return!Number.isInteger(e)}function B(e){return e.content.action&&"historyClear"===e.content.action.type}function O(e){const{content:t}=e,n=t.webPage?t.webPage.video:t.video,o=t.webPage?t.webPage.photo:t.photo,r=t.webPage?t.webPage.document:t.document;if(r)return r.fileName;if(n)return n.fileName;if(t.sticker){const e=t.sticker.isLottie?"tgs":t.sticker.isVideo?"webm":"webp";return`${t.sticker.id}.${e}`}if(t.audio)return t.audio.fileName;const s=`${h(e)}${e.isScheduled?"_scheduled":""}`;return o?`${s}.jpg`:t.voice?i.m5?`${s}.ogg`:`${s}.wav`:s}function x(e){const{location:t}=e.content;return"geoLive"===t?.type&&(0,a.bp)()-(e.date||0)>=t.period}function _(e,t){const{text:n,game:o}=e.content,r=R(e),s=M(e),a=T(e);return Boolean(n?.text.length&&!e.emojiOnlyCount&&!o&&(t||!e.isOutgoing)&&!r&&!s&&!a&&!e.isScheduled)}function F(e){return 1===e.inlineButtons?.length&&1===e.inlineButtons[0].length&&e.inlineButtons[0][0]}function j(e){return e.sort(((e,t)=>e-t))}function $(e){return e.sort(((e,t)=>t-e))}function U(e,t){let n=!1,o=e.length?e.map((e=>(0,s.YE)(e,t)&&!n?(n=!0,j((0,s.Tw)(e.concat(t)))):e)):[t];n||(o=o.concat([t])),o.sort(((e,t)=>e[0]-t[0]));let r=o.length;for(let e=0;e<r;e++){const t=o[e],n=o[e-1];n&&(n.includes(t[0])||n.includes(t[0]-1))&&(o[e-1]=j((0,s.Tw)(t.concat(n))),o.splice(e,1),r--,e--)}return o}function V(e,t=!1){const n=e.content.text;if(!n)return;const{text:s}=n;let{entities:a}=n;if(s&&t&&"chatId"in e&&e.chatId===r.awM&&!(0,d.Rd)().settings.byKey.shouldShowLoginCodeInChatList){const e=s.match(/^\D*([\d-]{5,7})\D/)?.[1];e&&(a=[...a||[],{type:o.Vv.Spoiler,offset:s.indexOf(e),length:e.length}],a.sort(((e,t)=>e.offset>t.offset?1:-1)))}return{text:s,entities:a}}},26646:(e,t,n)=>{function o(e){const{replyInfo:t}=e;if(t&&"message"===t.type)return t}function r(e){const{replyInfo:t}=e;if(t&&"story"===t.type)return t}n.d(t,{H:()=>o,f:()=>r})},56266:(e,t,n)=>{n.d(t,{If:()=>a,Lo:()=>s,RK:()=>r});var o=n(6137);function r(e){return`sticker${e}?size=m`}function s(e){return e.entities?.some((e=>e.type===o.Vv.CustomEmoji))}function a(e){if(!e.entities)return e;const t=e.entities.filter((e=>e.type!==o.Vv.CustomEmoji));return{...e,entities:t}}},93311:(e,t,n)=>{n.d(t,{Js:()=>u,NB:()=>h,Tq:()=>l,Vl:()=>c,WS:()=>b,Z0:()=>g,cS:()=>m,kK:()=>y,kM:()=>f,kw:()=>p,qI:()=>v});var o=n(83716),r=n(790),s=n(60782),a=n(6272),i=n(85765),d=n(82267);function c(e){if(e)switch(e.type){case"userTypeBot":return e.firstName;case"userTypeRegular":return e.firstName||e.lastName;case"userTypeDeleted":case"userTypeUnknown":return"Deleted";default:return}}function u(e){if(e){if(h(e))return"Deleted Account";switch(e.type){case"userTypeBot":case"userTypeRegular":if(e.firstName&&e.lastName)return`${e.firstName} ${e.lastName}`;if(e.firstName)return e.firstName;if(e.lastName)return e.lastName;if(e.phoneNumber)return`+${(0,a.un)(e.phoneNumber)}`}}}function l(e,t,n){if(t.id===o.awM)return e("ServiceNotifications").toLowerCase();if(t.isSupport)return e("SupportStatus");if(t.type&&"userTypeBot"===t.type)return e("Bot");if(!n)return"";switch(n.type){case"userStatusEmpty":return e("ALongTimeAgo");case"userStatusLastMonth":return e("WithinAMonth");case"userStatusLastWeek":return e("WithinAWeek");case"userStatusOffline":{const{wasOnline:t}=n;if(!t)return e("LastSeen.Offline");const o=(0,d.Qj)(),s=new Date(Date.now()+1e3*o),a=new Date(1e3*t);if(a>=s)return e("LastSeen.JustNow");const i=new Date(s.getTime()-a.getTime());if(i.getTime()/1e3<60)return e("LastSeen.JustNow");if(i.getTime()/1e3<3600)return e("LastSeen.MinutesAgo",Math.floor(i.getTime()/1e3/60));const c=new Date;if(c.setHours(0,0,0,0),a>new Date(c.getTime()+1e3*o))return i.getTime()/1e3<21600?e("LastSeen.HoursAgo",Math.floor(i.getTime()/1e3/60/60)):e("LastSeen.TodayAt",(0,r.mr)(e,a));const u=new Date;return u.setDate(s.getDate()-1),u.setHours(0,0,0,0),a>new Date(u.getTime()+1e3*o)?e("LastSeen.YesterdayAt",(0,r.mr)(e,a)):e("LastSeen.AtDate",(0,r.Tu)(e,a))}case"userStatusOnline":return e("Online");case"userStatusRecently":return e("Lately");default:return}}function f(e,t){const{id:n,type:r}=e;return!!t&&n!==o.awM&&!e.isSelf&&"userStatusOnline"===t.type&&"userTypeBot"!==r}function h(e){return("userTypeDeleted"===e.type||"userTypeUnknown"===e.type)&&e.id!==o.awM}function m(e){return"userTypeBot"===e.type}function p(e){return!e.isSelf&&!e.isContact&&!m(e)}function g(e,t,n,o){return(0,s.Xo)(e,(e=>{const r=(0,d.bp)();if(o&&o.includes(e))return r+172800-(o.length-o.indexOf(e));const s=t[e],a=n[e];if(!s||!a)return 0;if("userStatusOnline"===a.type)return a.expires;if("userStatusOffline"===a.type&&a.wasOnline)return a.wasOnline;switch(a.type){case"userStatusRecently":return r-86400;case"userStatusLastWeek":return r-604800;case"userStatusLastMonth":return r-18144e3;default:return 0}}),"desc")}function y(e,t,n,o,r){if(!n)return e;const s=(0,i.W)(n);return e.filter((e=>{const n=t[e];if(!n)return!1;const a=e===o?r:u(n);return a&&s(a)||Boolean(n.usernames?.find((({username:e})=>s(e))))}))}function b(e){return e.usernames?.find((e=>e.isActive))?.username}function v(e){return`peer-story${e}`}},33555:(e,t,n)=>{n.d(t,{R3:()=>s,Rd:()=>r,Sv:()=>a,c$:()=>d,iw:()=>i});const o=(0,n(65116).gP)(),r=o.getGlobal,s=o.setGlobal,a=o.getActions,i=o.addActionHandler,d=o.withGlobal},35369:(e,t,n)=>{n.d(t,{LN:()=>i,WD:()=>a,g9:()=>c,nn:()=>u,ww:()=>d});var o=n(91713),r=n(83716),s=n(97184);const a={animatedEmoji:!0,autoplayGifs:!0,autoplayVideos:!0,contextMenuAnimations:!0,contextMenuBlur:!0,loopAnimatedStickers:!0,mediaViewerAnimations:!0,messageComposerAnimations:!0,messageSendingAnimations:!0,pageTransitions:!0,reactionEffects:!0,rightColumnAnimations:!0,stickerEffects:!0,storyRibbonAnimations:!0},i={animatedEmoji:!0,autoplayGifs:!0,autoplayVideos:!0,contextMenuAnimations:!0,contextMenuBlur:!0,loopAnimatedStickers:!0,mediaViewerAnimations:!0,messageComposerAnimations:!0,messageSendingAnimations:!0,pageTransitions:!0,reactionEffects:!0,rightColumnAnimations:!1,stickerEffects:!1,storyRibbonAnimations:!1},d={animatedEmoji:!1,autoplayGifs:!1,autoplayVideos:!1,contextMenuAnimations:!1,contextMenuBlur:!1,loopAnimatedStickers:!1,mediaViewerAnimations:!1,messageComposerAnimations:!1,messageSendingAnimations:!1,pageTransitions:!1,reactionEffects:!1,rightColumnAnimations:!1,stickerEffects:!1,storyRibbonAnimations:!1},c={attachMenu:{bots:{}},passcode:{},twoFaSettings:{},isAppUpdateAvailable:!1,isElectronUpdateAvailable:!1,shouldShowContextMenuHint:!0,audioPlayer:{lastPlaybackRate:r.mwi},mediaViewer:{lastPlaybackRate:r.mwi},authRememberMe:!0,countryList:{phoneCodes:[],general:[]},blocked:{ids:[],totalCount:0},users:{byId:{},statusesById:{},fullInfoById:{}},chats:{listIds:{},isFullyLoaded:{},orderedPinnedIds:{},totalCount:{},byId:{},fullInfoById:{},similarChannelsById:{}},messages:{byChatId:{},sponsoredByChatId:{}},stories:{byPeerId:{},orderedPeerIds:{archived:[],active:[]},hasNext:!0,hasNextInArchive:!0,stealthMode:{}},groupCalls:{byId:{}},attachmentSettings:{shouldCompress:!0,shouldSendGrouped:!0},scheduledMessages:{byChatId:{}},chatFolders:{byId:{},invites:{}},fileUploads:{byMessageLocalId:{}},recentEmojis:["grinning","kissing_heart","christmas_tree","brain","trophy","duck","cherries"],recentCustomEmojis:["5377305978079288312"],topReactions:[],recentReactions:[],stickers:{setsById:{},added:{},recent:{stickers:[]},favorite:{stickers:[]},greeting:{stickers:[]},premium:{stickers:[]},premiumSet:{stickers:[]},featured:{setIds:[]},forEmoji:{}},customEmojis:{lastRendered:[],byId:{},added:{},forEmoji:{},statusRecent:{}},emojiKeywords:{},gifs:{saved:{}},topPeers:{},topInlineBots:{},activeSessions:{byHash:{},orderedHashes:[]},activeWebSessions:{byHash:{},orderedHashes:[]},settings:{byKey:{theme:"light",shouldUseSystemTheme:!0,messageTextSize:s.cj?r.b6b:s.jm?r.ARG:r.xS7,animationLevel:r.CXA,messageSendKeyCombo:"enter",canAutoLoadPhotoFromContacts:!0,canAutoLoadPhotoInPrivateChats:!0,canAutoLoadPhotoInGroups:!0,canAutoLoadPhotoInChannels:!0,canAutoLoadVideoFromContacts:!0,canAutoLoadVideoInPrivateChats:!0,canAutoLoadVideoInGroups:!0,canAutoLoadVideoInChannels:!0,canAutoLoadFileFromContacts:!1,canAutoLoadFileInPrivateChats:!1,canAutoLoadFileInGroups:!1,canAutoLoadFileInChannels:!1,autoLoadFileMaxSizeMb:10,hasWebNotifications:!0,hasPushNotifications:!0,notificationSoundVolume:5,shouldSuggestStickers:!0,shouldSuggestCustomEmoji:!0,shouldUpdateStickerSetOrder:!0,language:"en",timeFormat:"24h",wasTimeFormatSetManually:!1,isConnectionStatusMinimized:!0,shouldArchiveAndMuteNewNonContact:!1,canTranslate:!1,canTranslateChats:!0,doNotTranslate:[],canDisplayChatInTitle:!0,shouldAllowHttpTransport:!0,shouldWarnAboutSvg:!0},themes:{light:{isBlurred:!0,patternColor:r.ga_},dark:{isBlurred:!0,patternColor:r.Vvx}},performance:a,privacy:{},notifyExceptions:{}},serviceNotifications:[],trustedBotIds:[],transcriptions:{},translations:{byChatId:{}},byTabId:{},archiveSettings:{isMinimized:!1,isHidden:!1}},u={id:0,isMasterTab:!1,isLeftColumnShown:!0,isChatInfoShown:!1,newChatMembersProgress:o.WB.Closed,uiReadyState:0,shouldInit:!0,gifSearch:{},stickerSearch:{},messageLists:[],activeChatFolder:0,tabThreads:{},inlineBots:{isLoading:!1,byUsername:{}},globalSearch:{},userSearch:{},localTextSearch:{byChatThreadKey:{}},localMediaSearch:{byChatThreadKey:{}},management:{byChatId:{}},storyViewer:{isMuted:!0,isRibbonShown:!1},mediaViewer:{volume:r.QxZ,playbackRate:r.mwi,isMuted:!1},audioPlayer:{volume:r.QxZ,playbackRate:r.mwi,isMuted:!1},forwardMessages:{},pollResults:{},payment:{},notifications:[],dialogs:[],activeReactions:{},activeDownloads:{byChatId:{}},statistics:{byChatId:{}},pollModal:{isOpen:!1},requestedTranslations:{byChatId:{}}}},53475:(e,t,n)=>{n.d(t,{B1:()=>c,BK:()=>P,BY:()=>k,Cn:()=>E,Dd:()=>v,FK:()=>h,GL:()=>m,Jr:()=>C,Mg:()=>d,Pi:()=>y,SL:()=>u,US:()=>f,XG:()=>S,a4:()=>l,fZ:()=>p,iX:()=>I,kq:()=>w,vv:()=>b});var o=n(83716),r=n(84112),s=n(60782),a=n(7054),i=n(4907);function d(e,t,n){return{...e,chats:{...e.chats,listIds:{...e.chats.listIds,[t]:n}}}}function c(e,t,n){const{[t]:o}=e.chats.listIds,r=o?.length?n.filter((e=>!o.includes(e))):n;return o&&!r.length?e:d(e,t,[...o||[],...r])}function u(e,t){return{...e,chats:{...e.chats,byId:t}}}function l(e,t,n,o,r=!1){const{byId:s}=e.chats,a=g(e,t,n,o,r);return a?u(e,{...s,[t]:a}):e}function f(e,t,n){const o=(0,a.x67)(e,t),s={...o,...n};return(0,r.A)(o,s)?e:{...e,chats:{...e.chats,fullInfoById:{...e.chats.fullInfoById,[t]:s}}}}function h(e,t,n){const o=(0,a.x67)(e,t);return(0,r.A)(o,n)?e:{...e,chats:{...e.chats,fullInfoById:{...e.chats.fullInfoById,[t]:n}}}}function m(e,t){const n=Object.keys(t).reduce(((n,o)=>{const r=g(e,o,t[o]);return r&&(n[o]=r),n}),{});return e=u(e,{...e.chats.byId,...n})}function p(e,t){const{byId:n}=e.chats;let o=!1;const r=Object.keys(t).reduce(((r,s)=>{const a=n[s],i=t[s];if(a&&!a.isMin&&(i.isMin||a.accessHash===i.accessHash))return r;const d=g(e,s,i);return d&&(r[s]=d,o||(o=!0)),r}),{});return o?e=u(e,{...n,...r}):e}function g(e,t,n,o,a=!1){const{byId:i}=e.chats,d=i[t],c=[];if(n.isMin&&d&&!d.isMin)return;a||c.push("unreadReactionsCount"),(0,r.A)(d?.usernames,n.usernames)&&c.push("usernames");const u={...d,...(0,s.CE)(n,c),...o&&{photos:[o,...d.photos||[]]}};return u.id&&u.type?u:void 0}function y(e,t,n){const r=n===o.WSp?"archived":"active";let s=e.chats.listIds;return Object.keys(s).forEach((e=>{const n=s[e]||[];e!==r||n.includes(t)?e!==r&&n.includes(t)&&(s={...s,[e]:n.filter((e=>e!==t))}):s={...s,[e]:[...n,t]}})),l(e={...e,chats:{...e.chats,listIds:s}},t,{folderId:n||void 0})}function b(e,t,n){const o="active"===t?"all":"archived";return{...e,chats:{...e.chats,...n.orderedPinnedIds&&{orderedPinnedIds:{...e.chats.orderedPinnedIds,[t]:n.orderedPinnedIds}},totalCount:{...e.chats.totalCount,[o]:n.totalChatCount},isFullyLoaded:{...e.chats.isFullyLoaded,[t]:!1}}}}function v(e,t){return l(e=w(e,t),t,{isNotJoined:!0})}function w(e,t){const n=e.chats.listIds;return Object.entries(n).forEach((([n,o])=>{e=d(e,n,o.filter((e=>e!==t)))})),e}function I(e,t,n){const o=(0,a.x67)(e,t.id)?.members,r=new Set(n.map((e=>e.userId))),i=[...o?.filter((({userId:e})=>!r.has(e)))||[],...n],d=o?.map((({userId:e})=>e))||[],c=i.map((({userId:e})=>e));if((0,s.et)(d,c))return e;const u=i.filter((({isAdmin:e,isOwner:t})=>e||t));return f(e,t.id,{members:i,adminMembersById:(0,s.ee)(u,"userId")})}function C(e,t,n){return l(e,t,{listedTopicIds:(0,s.Tw)([...e.chats.byId[t]?.listedTopicIds||[],...n])})}function S(e,t,n,o){const r=(0,a.Z1J)(e,t),d=(0,s.ee)(o,"id");return e=l(e,t,{topics:{...r?.topics,...d},topicsCount:n}),o.forEach((n=>{e=(0,i.sN)(e,t,n.id,{firstMessageId:n.id}),e=(0,i.Xg)(e,t,n.id,{lastMessageId:n.lastMessageId,threadId:n.id,chatId:t})})),e}function E(e,t,n,o){const r=(0,a.Z1J)(e,t);if(!r)return e;const s=r?.topics?.[n],d={...s,...o};return d.id?(e=l(e,t,{topics:{...r.topics||{},[n]:d}}),e=(0,i.sN)(e,t,d.id,{firstMessageId:d.id}),e=(0,i.Xg)(e,t,d.id,{lastMessageId:d.lastMessageId,threadId:d.id,chatId:t})):e}function P(e,t,n){const o=(0,a.Z1J)(e,t),r=o?.topics||[];return l(e,t,{topics:(0,s.CE)(r,[n])})}function k(e,t,n){return{...e,chats:{...e.chats,similarChannelsById:{...e.chats.similarChannelsById,[t]:n}}}}},41020:(e,t,n)=>{n.d(t,{fC:()=>r.fC,h7:()=>oe,iX:()=>o.iX,c_:()=>r.c_,fZ:()=>o.fZ,m6:()=>r.m6,aK:()=>te,aJ:()=>ee,BY:()=>o.BY,p1:()=>Ae,_6:()=>Le,zn:()=>Z,Sh:()=>P,Xq:()=>B,$S:()=>r.$S,wI:()=>r.wI,ZI:()=>ce,CE:()=>We,Kn:()=>de,bp:()=>we,WY:()=>Ie,ft:()=>D,K4:()=>r.K4,bV:()=>r.bV,GK:()=>T,BK:()=>o.BK,M6:()=>r.M6,i9:()=>r.i9,Dd:()=>o.Dd,vy:()=>b,kw:()=>re,kq:()=>o.kq,IU:()=>r.IU,se:()=>Oe,IR:()=>qe,g_:()=>m,FK:()=>o.FK,Mg:()=>o.Mg,SL:()=>o.SL,Pb:()=>H,w3:()=>r.w3,BI:()=>X,O8:()=>r.O8,lr:()=>Q,pf:()=>r.pf,ps:()=>N,s5:()=>I,HX:()=>r.HX,y9:()=>r.y9,fS:()=>be,bs:()=>me,_7:()=>ye,Q$:()=>he,Dq:()=>ve,vT:()=>fe,QD:()=>ge,QH:()=>pe,Ob:()=>r.Ob,a4:()=>o.a4,US:()=>o.US,B1:()=>o.B1,vv:()=>o.vv,Pi:()=>o.Pi,cY:()=>r.cY,GL:()=>o.GL,Wy:()=>r.Wy,AA:()=>g,cU:()=>l,wV:()=>r.wV,cq:()=>r.cq,rq:()=>h,No:()=>x,Og:()=>_,xv:()=>j,px:()=>F,P5:()=>Ne,WW:()=>Re,xj:()=>r.xj,Jr:()=>o.Jr,c1:()=>z,z5:()=>G,qr:()=>V,dx:()=>W,fw:()=>J,H9:()=>Y,kM:()=>Se,qt:()=>He,TD:()=>Ke,HN:()=>ne,hv:()=>r.hv,vu:()=>ie,cQ:()=>ue,GG:()=>Te,CJ:()=>Me,vI:()=>je,QO:()=>$e,w2:()=>_e,Qn:()=>Fe,Fz:()=>Ze,et:()=>y,LV:()=>Ge,ql:()=>ze,P4:()=>r.P4,ed:()=>xe,TM:()=>le,Fn:()=>r.Fn,ze:()=>Ce,yC:()=>Pe,Uq:()=>Ve,fH:()=>c,Rg:()=>f,z3:()=>u,IM:()=>p,sG:()=>Ee,eB:()=>De,uS:()=>Be,sN:()=>r.sN,Xg:()=>r.Xg,j6:()=>r.j6,lG:()=>r.lG,Cn:()=>o.Cn,XG:()=>o.XG,IE:()=>se,Nq:()=>S,ap:()=>R,Lm:()=>M,Q3:()=>A,eD:()=>E});var o=n(53475),r=n(4907),s=n(65054),a=n(60782),i=n(7054),d=n(44271);function c(e,t,n,...[o=(0,s._w)()]){return(0,d.i)(e,{stickerSearch:{...(0,i.jUK)(e,o).stickerSearch,hash:t,resultIds:n}},o)}function u(e,t,n,o){const r=o.map((t=>{const n=e.stickers.setsById[t.id];return n?{...n,...t}:t})),s=o.map((e=>e.id));return"search"===t?{...e,stickers:{...e.stickers,setsById:{...e.stickers.setsById,...(0,a.ee)(r,"id")}}}:{...e,stickers:{...e.stickers,setsById:{...e.stickers.setsById,...(0,a.ee)(r,"id")},[t]:{...e.stickers[t],hash:n,setIds:[...e.stickers[t].setIds||[],...s]}}}}function l(e,t,n){const o=n.map((t=>{const n=e.stickers.setsById[t.id];return n?{...n,...t}:t})),r=n.map((e=>e.stickers)).flat().filter(Boolean),s=n.map((e=>e.id));return{...e,stickers:{...e.stickers,setsById:{...e.stickers.setsById,...(0,a.ee)(o,"id")}},customEmojis:{...e.customEmojis,added:{...e.customEmojis.added,hash:t,setIds:[...e.customEmojis.added.setIds||[],...s]},byId:{...e.customEmojis.byId,...(0,a.ee)(r,"id")}}}}function f(e,t,n){const o=e.stickers.setsById[t]||{},r=n.isEmoji||o.isEmoji,s=(r?e.customEmojis.added.setIds:e.stickers.added.setIds)||[];let i=s;n.installedDate&&!n.isArchived&&s&&!s.includes(t)&&(i=[t,...i]),!n.installedDate&&s?.includes(t)&&(i=i.filter((e=>e!==t)));const d=r&&n.stickers&&(0,a.ee)(n.stickers,"id");return{...e,stickers:{...e.stickers,added:{...e.stickers.added,...!r&&{setIds:i}},setsById:{...e.stickers.setsById,[t]:{...o,...n}}},customEmojis:{...e.customEmojis,byId:{...e.customEmojis.byId,...d},added:{...e.customEmojis.added,...r&&{setIds:i}}}}}function h(e,t,n,o,...[r=(0,s._w)()]){const{results:a}=(0,i.jUK)(e,r).gifSearch;let c;if(t||!a)c=n;else{const e=new Set(a.map((e=>e.id)));c=[...a,...n.filter((t=>!e.has(t.id)))]}return(0,d.i)(e,{gifSearch:{...(0,i.jUK)(e,r).gifSearch,offset:o,results:c}},r)}function m(e,t){return{...e,animatedEmojis:t}}function p(e,t,n,o){const r=[...(0,i.PkN)(e,t),...n||[]],s=(0,a.Tw)(r.map((({id:e})=>e))),d=(0,a.ee)(r,"id"),c=s.map((e=>d[e]));return{...e,stickers:{...e.stickers,forEmoji:{emoji:t,stickers:c,hash:o}}}}function g(e,t){const n=(0,i.EeF)(e,t),o=(0,a.Tw)(n.map((({id:e})=>e))),r=(0,a.ee)(n,"id"),s=o.map((e=>r[e]));return{...e,customEmojis:{...e.customEmojis,forEmoji:{emoji:t,stickers:s}}}}function y(e,t,n){return{...e,customEmojis:{...e.customEmojis,statusRecent:{...e.customEmojis.statusRecent,hash:t,emojis:n}}}}function b(e){if(e.stickers.forEmoji){const{emoji:t,stickers:n,hash:o}=e.stickers.forEmoji;return t?p(e,t,n,o):e}if(e.customEmojis.forEmoji){const{emoji:t}=e.customEmojis.forEmoji;return t?g(e,t):e}return e}var v=n(84112),w=n(70735);function I(e,t){return{...e,users:{...e.users,byId:t}}}function C(e,t){const{userIds:n}=e.contactList||{};if(!n)return e;const o=t.filter((e=>e?.isContact&&!n.includes(e.id))).map((e=>e.id));return 0===o.length?e:{...e,contactList:{userIds:[...o,...n]}}}function S(e,t,n){const{byId:o}=e.users,r=k(e,t,n);return r?I(e=C(e,[r]),{...o,[t]:r}):e}function E(e,t){const n=Object.keys(t).reduce(((n,o)=>{const r=k(e,o,t[o]);return r&&(n[o]=r),n}),{});return e=C(e=I(e,{...e.users.byId,...n}),Object.values(n))}function P(e,t){const{byId:n}=e.users;let o=!1;const r=Object.keys(t).reduce(((r,s)=>{const a=n[s],i=t[s];if(a&&!a.isMin&&(i.isMin||a.accessHash===i.accessHash))return r;const d=k(e,s,i);return d&&(r[s]=d,o||(o=!0)),r}),{});return o?e=C(e=I(e,{...n,...r}),Object.values(r)):e}function k(e,t,n){const{byId:o}=e.users,r=o[t],s=[];if(n.isMin&&r&&!r.isMin)return;(0,v.A)(r?.usernames,n.usernames)&&s.push("usernames");const i={...r,...(0,a.CE)(n,s)};return i.id&&i.type?i:void 0}function T(e,t){const{byId:n}=e.users,{userIds:r}=e.contactList||{};return e=I(e={...e,contactList:{userIds:r?r.filter((e=>e!==t)):w.D}},{...n,[t]:{...n[t],isContact:void 0}}),e={...e,stories:{...e.stories,orderedPeerIds:{active:e.stories.orderedPeerIds.active.filter((e=>e!==t)),archived:e.stories.orderedPeerIds.archived.filter((e=>e!==t))}}},(0,o.a4)(e,t,{settings:void 0})}function M(e,t,...[n=(0,s._w)()]){return(0,d.i)(e,{userSearch:{...(0,i.jUK)(e,n).userSearch,...t}},n)}function A(e,t,...[n=(0,s._w)()]){return M(e,{fetchingStatus:t},n)}function L(e,t,n){const{fullInfoById:o}=e.users;return o[t]?R(e,t,{isBlocked:n}):e}function N(e,t){return{...e,users:{...e.users,statusesById:t}}}function R(e,t,n){const o=e.users.fullInfoById[t];return{...e,users:{...e.users,fullInfoById:{...e.users.fullInfoById,[t]:{...o,...n}}}}}function Z(e,t){const{statusesById:n}=e.users,o=Object.keys(t).filter((e=>!n[e]));return o.length?e=N(e,{...n,...(0,a.ei)(t,o)}):e}function D(e,...[t=(0,s._w)()]){return(0,d.i)(e,{newContact:void 0},t)}function B(e,t,n,...[o=(0,s._w)()]){const{inviteViaLinkModal:r}=(0,i.jUK)(e,o);return(0,d.i)(e,{inviteViaLinkModal:{...r,restrictedUserIds:(0,a.Tw)([...r?.restrictedUserIds??[],...t]),chatId:n}},o)}const O=e=>`${e.chatId}_${e.id}`;function x(e,t,...[n=(0,s._w)()]){return(0,d.i)(e,{globalSearch:{...(0,i.jUK)(e,n).globalSearch,...t}},n)}function _(e,t,...[n=(0,s._w)()]){return x(e,{currentContent:t},n)}function F(e,t,n,o,r,...[d=(0,s._w)()]){const{resultsByType:c}=(0,i.jUK)(e,d).globalSearch||{},u=t.reduce(((e,t)=>(e[O(t)]=t,e)),{}),l=c?.[o]?.foundIds;if(void 0!==l&&Object.keys(u).every((e=>l.includes(O(u[e])))))return j(e,{messages:!1},d);const f=l||[],h=t.map((e=>O(e))).filter((e=>!f.includes(e))),m=Array.prototype.concat(f,h),p=(0,a.et)(f,m)?f:m;return x(e=j(e,{messages:!1},d),{resultsByType:{...((0,i.jUK)(e,d).globalSearch||{}).resultsByType,[o]:{totalCount:n,nextOffsetId:r,foundIds:p}}},d)}function j(e,t,...[n=(0,s._w)()]){return x(e,{fetchingStatus:{...(0,i.jUK)(e,n).globalSearch.fetchingStatus,...t}},n)}var $=n(4463);function U(e,t,n,...[o=(0,s._w)()]){return(0,d.i)(e,{localTextSearch:{byChatThreadKey:{...(0,i.jUK)(e,o).localTextSearch.byChatThreadKey,[t]:n}}},o)}function V(e,t,n,o,r,...[a=(0,s._w)()]){const d=(0,$.uw)(t,n);return U(e,d,{...(0,i.jUK)(e,a).localTextSearch.byChatThreadKey[d],isActive:o,query:r},a)}function H(e,t,n,o,r,a,...[d=(0,s._w)()]){const c=(0,$.uw)(t,n);return U(e,c,{...(0,i.jUK)(e,d).localTextSearch.byChatThreadKey[c],results:{foundIds:o,totalCount:r,nextOffsetId:a}},d)}function W(e,t,n,o,r,d,...[c=(0,s._w)()]){const u=(0,$.uw)(t,n),{results:l}=(0,i.jUK)(e,c).localTextSearch.byChatThreadKey[u]||{},f=l?.foundIds||[],h=q((0,a.Tw)(Array.prototype.concat(f,o)));return H(e,t,n,(0,a.et)(f,h)?f:h,r,d,c)}function K(e,t,n,o,...[r=(0,s._w)()]){const a=(0,$.uw)(t,n);return(0,d.i)(e,{localMediaSearch:{byChatThreadKey:{...(0,i.jUK)(e,r).localMediaSearch.byChatThreadKey,[a]:o}}},r)}function G(e,t,n,o,...[r=(0,s._w)()]){const a=(0,$.uw)(t,n);return K(e,t,n,{...(0,i.jUK)(e,r).localMediaSearch.byChatThreadKey[a],currentType:o},r)}function z(e,t,n,o,r,d,c,...[u=(0,s._w)()]){const l=(0,$.uw)(t,n),{resultsByType:f}=(0,i.jUK)(e,u).localMediaSearch.byChatThreadKey[l]||{},h=f?.[o]?f[o].foundIds:[],m=q((0,a.Tw)(Array.prototype.concat(h,r)));return function(e,t,n,o,r,a,d,...[c=(0,s._w)()]){const u=(0,$.uw)(t,n);return K(e,t,n,{...(0,i.jUK)(e,c).localMediaSearch.byChatThreadKey[u],resultsByType:{...((0,i.jUK)(e,c).localMediaSearch.byChatThreadKey[u]||{}).resultsByType,[o]:{foundIds:r,totalCount:a,nextOffsetId:d}}},c)}(e,t,n,o,(0,a.et)(h,m)?h:m,d,c,u)}function q(e){return e.sort(((e,t)=>t-e))}function Y(e,t,...[n=(0,s._w)()]){return(0,d.i)(e,{management:{...(0,i.jUK)(e,n).management,progress:t}},n)}function J(e,t,n,...[o=(0,s._w)()]){const{management:r}=(0,i.jUK)(e,o);return(0,d.i)(e,{management:{...r,byChatId:{...r.byChatId,[t]:{...r.byChatId[t]||{},...n}}}},o)}function X(e,t){return{...e,settings:{...e.settings,byKey:{...e.settings.byKey,...t}}}}function Q(e,t,n){return{...e,settings:{...e.settings,themes:{...e.settings.themes,[t]:{...e.settings.themes[t]||{},...n}}}}}function ee(e,t){return t.forEach((t=>{const{chatId:n,...o}=t;e=te(e,n,o)})),e}function te(e,t,n){return{...e,settings:{...e.settings,notifyExceptions:{...e.settings.notifyExceptions,[t]:n}}}}function ne(e,t,n,o){switch(t){case"contact":return X(e,{...void 0!==n&&{hasPrivateChatsNotifications:!n},...void 0!==o&&{hasPrivateChatsMessagePreview:o}});case"group":return X(e,{...void 0!==n&&{hasGroupNotifications:!n},...void 0!==o&&{hasGroupMessagePreview:o}});case"broadcast":return X(e,{...void 0!==n&&{hasBroadcastNotifications:!n},...void 0!==o&&{hasBroadcastMessagePreview:o}})}}function oe(e,t){return e=L(e,t,!0),{...e,blocked:{...e.blocked,ids:[t,...e.blocked.ids],totalCount:e.blocked.totalCount+1}}}function re(e,t){return e=L(e,t,!1),{...e,blocked:{...e.blocked,ids:e.blocked.ids.filter((e=>e!==t)),totalCount:e.blocked.totalCount-1}}}function se(e,t){return{...e,twoFaSettings:{...e.twoFaSettings,...t}}}var ae=n(35369);function ie(e,t){return{...e,passcode:{...e.passcode,...t}}}function de(e){return{...e,passcode:{}}}function ce(e,t=!0){const{theme:n,shouldUseSystemTheme:o,animationLevel:r,language:s}=e.settings.byKey;return{...ae.g9,passcode:e.passcode,settings:{...ae.g9.settings,byKey:{...ae.g9.settings.byKey,theme:n,shouldUseSystemTheme:o,animationLevel:r,language:s}},...t&&{byTabId:Object.values(e.byTabId).reduce(((e,{id:t,isMasterTab:n})=>(e[t]={...ae.nn,isMasterTab:n,id:t},e)),{})}}}function ue(e,t,...[n=(0,s._w)()]){return(0,d.i)(e,{payment:{...(0,i.jUK)(e,n).payment,...t}},n)}function le(e,t,...[n=(0,s._w)()]){return ue(e,{shippingOptions:t},n)}function fe(e,t,...[n=(0,s._w)()]){return ue(e,{requestId:t},n)}function he(e,t,...[n=(0,s._w)()]){return ue(e,{step:t},n)}function me(e,t,...[n=(0,s._w)()]){const{title:o,text:r,amount:a,currency:i,isTest:d,photo:c,isRecurring:u,termsUrl:l,maxTipAmount:f,suggestedTipAmounts:h}=t;return ue(e,{invoice:{title:o,text:r,photo:c,amount:a,currency:i,isTest:d,isRecurring:u,termsUrl:l,maxTipAmount:f,suggestedTipAmounts:h}},n)}function pe(e,t,...[n=(0,s._w)()]){return ue(e,{stripeCredentials:{...t}},n)}function ge(e,t,...[n=(0,s._w)()]){return ue(e,{smartGlocalCredentials:{...t}},n)}function ye(e,t,...[n=(0,s._w)()]){return ue(e,{...t},n)}function be(e,t,...[n=(0,s._w)()]){return ue(e,{confirmPaymentUrl:t},n)}function ve(e,t,n,...[o=(0,s._w)()]){if(!t||!n)return ue(e,{receipt:void 0},o);const{invoice:r}=n.content,{photo:a,text:i,title:d}=r||{};return ue(e,{receipt:{...t,photo:a,text:i,title:d}},o)}function we(e,...[t=(0,s._w)()]){return(0,d.i)(e,{payment:{}},t)}function Ie(e,...[t=(0,s._w)()]){return ue(e,{isPaymentModalOpen:void 0,isExtendedMedia:void 0},t)}function Ce(e,t,n,...[o=(0,s._w)()]){return(0,d.i)(e,{statistics:{byChatId:{...(0,i.jUK)(e,o).statistics.byChatId,[t]:n}}},o)}function Se(e,t,...[n=(0,s._w)()]){return(0,d.i)(e,{statistics:{...(0,i.jUK)(e,n).statistics,currentMessage:t,currentStory:void 0}},n)}function Ee(e,t,...[n=(0,s._w)()]){return(0,d.i)(e,{statistics:{...(0,i.jUK)(e,n).statistics,currentStory:t,currentMessage:void 0}},n)}function Pe(e,t,n,o,...[r=(0,s._w)()]){const{statistics:a}=(0,i.jUK)(e,r);return(0,d.i)(e,{statistics:{...a,byChatId:{...a.byChatId,[t]:{...a.byChatId[t]||{},[n]:o}}}},r)}var ke=n(82267);function Te(e,t,n){return(0,$.YC)(t)?S(e,t,n):(0,o.a4)(e,t,n)}function Me(e,t,n){return(0,$.YC)(t)?R(e,t,n):(0,o.US)(e,t,n)}function Ae(e,t){const n=Object.entries(t).reduce(((e,[t,n])=>(e[t]?(e[t].byId={...e[t].byId,...n.byId},e[t].orderedIds=(0,a.Tw)(n.orderedIds.concat(e[t].orderedIds)),e[t].pinnedIds=(0,a.Tw)(n.pinnedIds.concat(e[t].pinnedIds)).sort(((e,t)=>t-e)),e[t].lastUpdatedAt=n.lastUpdatedAt,e[t].lastReadId=n.lastReadId):e[t]=n,e)),e.stories.byPeerId);return Ue(e={...e,stories:{...e.stories,byPeerId:n}},Object.keys(t))}function Le(e,t,n,o){const{byId:r,orderedIds:s,pinnedIds:d,archiveIds:c}=e.stories.byPeerId[t]||{},u=Object.keys(n).filter((e=>"isDeleted"in n[Number(e)])).map(Number),l={...r,...n};let f=[...s||[]],h=[...c||[]];const m=(0,a.Tw)([...d||[]].concat(Object.values(n).reduce(((e,t)=>("isPinned"in t&&t.isPinned&&e.push(t.id),e)),[]))).sort(((e,t)=>t-e)).filter((e=>!u.includes(e)));return f=(0,a.Tw)(Object.entries(n).reduce(((e,[t,n])=>("expireDate"in n&&n.expireDate&&n.expireDate>(0,ke.bp)()&&e.push(Number(t)),e)),f)).filter((e=>!u.includes(e))),o&&t===e.currentUserId&&(h=(0,a.Tw)(h.concat(Object.keys(n).map(Number))).sort(((e,t)=>t-e)).filter((e=>!u.includes(e)))),(t===(e={...e,stories:{...e.stories,byPeerId:{...e.stories.byPeerId,[t]:{...e.stories.byPeerId[t],byId:l,orderedIds:f,pinnedIds:m,...o&&{archiveIds:h}}}}}).currentUserId||(0,i.dyD)(e,t)?.isContact||t===e.appConfig?.storyChangelogUserId)&&(e=function(e,t){const n=e.stories.byPeerId[t],o=n.orderedIds.reduce(((e,t)=>{const{date:o}=n.byId[t]||{};return o&&(!e||e<o)&&(e=o),e}),void 0);return{...e,stories:{...e.stories,byPeerId:{...e.stories.byPeerId,[t]:{...n,lastUpdatedAt:o}}}}}(e,t),e=Ue(e,[t])),e}function Ne(e,t,n){const{orderedIds:o}=(0,i.nST)(e,t)||{};return o?(n>=o[o.length-1]&&(e=Te(e,t,{hasUnreadStories:!1})),{...e,stories:{...e.stories,byPeerId:{...e.stories.byPeerId,[t]:{...e.stories.byPeerId[t],lastReadId:n}}}}):e}function Re(e,t,n,...[o=(0,s._w)()]){const{orderedIds:r}=(0,i.nST)(e,t)||{};if(!r||!r.includes(n))return e;const{storyViewer:a}=(0,i.jUK)(e,o);return(0,d.i)(e,{storyViewer:{...a,lastViewedByPeerIds:{...a.lastViewedByPeerIds,[t]:n}}},o)}function Ze(e,t){return Object.entries(t).forEach((([t,{lastReadId:n,orderedIds:o}])=>{const r=(0,i.RGZ)(e,t);r&&(e=Te(e,t,{hasStories:!0,hasUnreadStories:!n||Boolean(n&&n<(r.maxStoryId||o[o.length-1]))}))})),e}function De(e,t,n,o,...[r=(0,s._w)()]){const a=(0,i.jUK)(e,r),{viewModal:c}=a.storyViewer,u=c?.storyId===t&&c.views?[...c.views,...n]:n;return e=Be(e,!1,r),(0,d.i)(e,{storyViewer:{...a.storyViewer,viewModal:{...c,storyId:t,views:u,nextOffset:o,isLoading:!1}}},r)}function Be(e,t,...[n=(0,s._w)()]){const o=(0,i.jUK)(e,n),{viewModal:r}=o.storyViewer;return r?(0,d.i)(e,{storyViewer:{...o.storyViewer,viewModal:{...r,isLoading:t}}},n):e}function Oe(e,t,n){const{orderedIds:o,pinnedIds:r,lastReadId:s,byId:a}=(0,i.nST)(e,t)||{orderedIds:[],pinnedIds:[]},d=o.filter((e=>e!==n)),c=r.filter((e=>e!==n)),u=d.length?o[o.length-1]:void 0,l=o[o.indexOf(n)-1],f=s===n?l:s,h={...a,[n]:{id:n,peerId:t,isDeleted:!0}},m=u?h[u]?.date:void 0,p=Boolean(d.length);return e=function(e,t,n){return{...e,stories:{...e.stories,byPeerId:{...e.stories.byPeerId,[t]:n}}}}(e=Te(e,t,{hasStories:p,hasUnreadStories:Boolean(p&&s&&u&&s<u)}),t,{byId:h,orderedIds:d,pinnedIds:c,lastUpdatedAt:m,lastReadId:f}),Object.values(e.byTabId).forEach((o=>{o.storyViewer.lastViewedByPeerIds?.[t]===n&&(e=Re(e,t,l,o.id))})),p||(e={...e,stories:{...e.stories,orderedPeerIds:{active:e.stories.orderedPeerIds.active.filter((e=>e!==t)),archived:e.stories.orderedPeerIds.archived.filter((e=>e!==t))}}}),e}function xe(e,t,n,o){const r=(0,i.JrV)(e,t,n);if(!r||!("content"in r))return e;const{views:s}=r,a=s?.reactionsCount||0,d=s?.reactions?.some((e=>void 0!==e.chosenOrder)),c=(0,$.vt)(s?.reactions||[],[o].filter(Boolean)),u=a+(o?d?0:1:-1);return _e(e,t,n,{sentReaction:o,views:{...s,reactionsCount:u,reactions:c}})}function _e(e,t,n,o){const r=(0,i.nST)(e,t)||{byId:{},orderedIds:[],pinnedIds:[],archiveIds:[]};return{...e,stories:{...e.stories,byPeerId:{...e.stories.byPeerId,[t]:{...r,byId:{...r.byId,[n]:{...r.byId[n],...o}}}}}}}function Fe(e,t,n,o){const r=(0,i.JrV)(e,t,n);if(!r||!("content"in r))return e;const{views:s}=r;return _e(e,t,n,{views:{...s,...o}})}function je(e,t,n,o){const r=(0,i.nST)(e,t)||{byId:{},orderedIds:[],pinnedIds:[],archiveIds:[]},s=o?(0,a.Tw)(r.pinnedIds.concat(n)).sort(((e,t)=>t-e)):r.pinnedIds.filter((e=>n!==e));return{...e,stories:{...e.stories,byPeerId:{...e.stories.byPeerId,[t]:{...r,pinnedIds:s}}}}}function $e(e,t,n){const o=(0,i.RGZ)(e,t);return o?o.areStoriesHidden===n?e:Ue(e=Te(e,t,{areStoriesHidden:n}),[t]):e}function Ue(e,t){const{currentUserId:n,stories:{byPeerId:o,orderedPeerIds:r}}=e,s=r.active.concat(r.archived).concat(t).reduce(((t,n)=>{if(!o[n]?.orderedIds?.length)return t;const r=(0,i.RGZ)(e,n);return r?.areStoriesHidden?t.archived.push(n):t.active.push(n),t}),{active:[],archived:[]});function d(t,r){const s=(0,i.RGZ)(e,t),d=(0,i.RGZ)(e,r),c=(0,a.aK)(n===t,n===r);if(c)return c;const{lastUpdatedAt:u=0,orderedIds:l,lastReadId:f=0}=o[t]||{},h=f<l?.[l.length-1],{lastUpdatedAt:m=0,orderedIds:p,lastReadId:g=0}=o[r]||{},y=g<p?.[p.length-1],b=(0,a.aK)(h,y);if(b)return b;const v=(0,a.aK)("isPremium"in s,"isPremium"in d);if(v)return v;return(0,a.aK)((0,$.YC)(t),(0,$.YC)(r))||(0,a.aK)(u,m)}return s.archived=(0,a.Tw)(s.archived).filter((e=>o[e]?.orderedIds?.length)).sort(d),s.active=(0,a.Tw)(s.active).filter((e=>o[e]?.orderedIds?.length)).sort(d),{...e,stories:{...e.stories,orderedPeerIds:s}}}function Ve(e,t){return{...e,stories:{...e.stories,stealthMode:t}}}function He(e,t,n,o,r){const s=(0,i.HGB)(e,t,o);return{...e,translations:{...e.translations,byChatId:{...e.translations.byChatId,[t]:{...e.translations.byChatId[t],byLangCode:{...e.translations.byChatId[t]?.byLangCode,[o]:{...s,[n]:{...s[n],...r}}}}}}}}function We(e,t,n){const o=e.translations.byChatId[t];if(!o)return e;const{byLangCode:r}=o,s=Object.keys(r).reduce(((e,t)=>{const o=(0,a.CE)(r[t],[n]);return Object.keys(o).length&&(e[t]=o),e}),{});return{...e,translations:{...e.translations,byChatId:{...e.translations.byChatId,[t]:{...o,byLangCode:s}}}}}function Ke(e,t,n,o,r){return n.forEach(((n,s)=>{e=He(e,t,n,o,{text:r[s],isPending:!1})})),e}function Ge(e,t,n,...[o=(0,s._w)()]){const r=(0,i.jUK)(e,o);return(0,d.i)(e,{requestedTranslations:{...r.requestedTranslations,byChatId:{...r.requestedTranslations.byChatId,[t]:{toLanguage:n}}}},o)}function ze(e,t,n,o,...[r=(0,s._w)()]){const a=(0,i.jUK)(e,r);return(0,d.i)(e,{requestedTranslations:{...a.requestedTranslations,byChatId:{...a.requestedTranslations.byChatId,[t]:{...a.requestedTranslations.byChatId[t],manualMessages:{...a.requestedTranslations.byChatId[t]?.manualMessages,[n]:o}}}}},r)}function qe(e,t,n,...[o=(0,s._w)()]){const r=(0,i.jUK)(e,o),c=r.requestedTranslations.byChatId[t]?.manualMessages;if(!c)return e;const u=(0,a.CE)(c,[n]);return(0,d.i)(e,{requestedTranslations:{...r.requestedTranslations,byChatId:{...r.requestedTranslations.byChatId,[t]:{...r.requestedTranslations.byChatId[t],manualMessages:u}}}},o)}},4907:(e,t,n)=>{n.d(t,{$S:()=>P,Fn:()=>R,HX:()=>T,IU:()=>S,K4:()=>w,M6:()=>D,O8:()=>m,Ob:()=>B,P4:()=>v,Wy:()=>u,Xg:()=>M,bV:()=>I,cY:()=>b,c_:()=>y,cq:()=>N,fC:()=>_,hv:()=>E,i9:()=>O,j6:()=>A,lG:()=>x,m6:()=>g,pf:()=>p,sN:()=>f,w3:()=>L,wI:()=>F,wV:()=>Z,xj:()=>C,y9:()=>k});var o=n(6137),r=n(83716),s=n(65054),a=n(60782),i=n(4463),d=n(7054),c=n(44271);function u(e,t,n=o._f,a="thread",i,u,...[l=(0,s._w)()]){const{messageLists:f}=(0,d.jUK)(e,l);let h=f;if(i||r.Cgt&&!r.NuY)h=t?[{chatId:t,threadId:n,type:a}]:[];else if(t){const e=f[f.length-1];e&&e.chatId===t&&e.threadId===n&&e.type===a||(h=e&&(e.chatId===r.mzl||u)?[...f.slice(0,-1),{chatId:t,threadId:n,type:a}]:[...f,{chatId:t,threadId:n,type:a}])}else h=f.slice(0,-1);return(0,c.i)(e,{messageLists:h},l)}function l(e,t,n){return h(e,t,{byId:n})}function f(e,t,n,o){if(!o)return h(e,t,{threadsById:(0,a.CE)(e.messages.byChatId[t]?.threadsById,[n])});const r=e.messages.byChatId[t];return h(e,t,{threadsById:{...r?.threadsById,[n]:{...r?.threadsById[n],...o}}})}function h(e,t,n){const o=e.messages.byChatId[t]||{byId:{},threadsById:{}};return{...e,messages:{...e.messages,byChatId:{...e.messages.byChatId,[t]:{...o,...n}}}}}function m(e,t,n,o,r,...[a=(0,s._w)()]){return"viewportIds"===o&&(e=p(e,t,n,"lastViewportIds",r)),function(e,t,n,o,...[r=(0,s._w)()]){const a=(0,d.jUK)(e,r),i=a.tabThreads[t]?.[n]||{};return(0,c.i)(e,{tabThreads:{...a.tabThreads,[t]:{...a.tabThreads[t],[n]:{...i,...o}}}},r)}(e,t,n,{[o]:r},a)}function p(e,t,n,o,r){return f(e,t,n,{[o]:r})}function g(e,t){const n=t.reduce(((e,t)=>(e[t.chatId]||(e[t.chatId]={}),e[t.chatId][t.id]=t,e)),{});return Object.keys(n).forEach((t=>{e=y(e,t,n[t])})),e}function y(e,t,n){const o=(0,d.Zwk)(e,t);return o&&Object.keys(n).every((e=>Boolean(o[Number(e)])))?e:l(e,t,{...n,...o})}function b(e,t,n,o){const r=(0,d.Zwk)(e,t)||{},s={...r[n],...o};return s.id?l(e,t,{...r,[n]:s}):e}function v(e,t,n,o){const r=(0,d.yBV)(e,t)||{},s={...r[n],...o};return s.id?L(e,t,{...r,[n]:s}):e}function w(e,t,n){const r=(0,d.Zwk)(e,t);if(!r)return e;(0,i.TO)(n);const s=new Map;s.set(o._f,n),n.forEach((t=>{const n=r[t];if(!n)return;const a=(0,d.nrh)(e,n);if(!a||a===o._f)return;const i=s.get(a)||[];i.push(t),s.set(a,i)}));const c=Object.values((0,a.q0)(r,n)).filter((({forwardInfo:e})=>e?.isLinkedChannelPost));s.forEach(((o,r)=>{const s=(0,d.tZg)(e,t,r);let c=(0,d.gbs)(e,t,r),u=(0,d.KBA)(e,t,r),l=(0,d.xd8)(e,t,r),f=s?.messagesCount;c&&(c=(0,a.pj)(c,o)),l&&(l=l.map((e=>(0,a.pj)(e,o)))),u&&(u=(0,a.pj)(u,(0,i.Fs)(o)));const h=o.filter((e=>!(0,i.AJ)(e))).length;void 0!==f&&(f-=h),Object.values(e.byTabId).forEach((({id:o})=>{let s=(0,d.Cbz)(e,t,r,o);n.forEach((e=>{s?.includes(e)&&(s=s.filter((t=>t!==e)))})),e=m(e,t,r,"viewportIds",s,o)})),e=p(e,t,r,"listedIds",c),e=p(e,t,r,"outlyingLists",l),e=p(e,t,r,"pinnedIds",u),s&&void 0!==f&&(e=M(e,t,r,{messagesCount:f}))})),c.length&&Object.values(e.byTabId).forEach((({id:n})=>{const o=(0,d.Btg)(e,n),r=o&&o.chatId===t&&"thread"===o.type,s=o?.threadId;c.forEach((o=>{const{fromChatId:a,fromMessageId:i}=o.forwardInfo,c=(0,d.hjO)(e,a,i);r&&s===o.id&&(e=u(e,t,void 0,void 0,void 0,void 0,n)),c&&(e=f(e,a,i,void 0))}))}));const h=(0,a.CE)(r,n);return e=l(e,t,h)}function I(e,t,n){const r=(0,d.yBV)(e,t);if(!r)return e;const s=(0,a.CE)(r,n);let i=(0,d.qyA)(e,t,o._f);return i&&(n.forEach((e=>{i.includes(e)&&(i=i.filter((t=>t!==e)))})),e=p(e,t,o._f,"scheduledIds",i),Object.entries(e.messages.byChatId[t].threadsById).forEach((([o,r])=>{if(r.scheduledIds){const s=r.scheduledIds.filter((e=>!n.includes(e)));e=p(e,t,Number(o),"scheduledIds",s)}}))),e=L(e,t,s)}function C(e,t,n,o){const r=(0,d.gbs)(e,t,n),s=r?.length?o.filter((e=>!r.includes(e))):o;return r&&!s.length?e:p(e,t,n,"listedIds",(0,i.TO)([...r||[],...s]))}function S(e,t,n,o){const r=(0,d.xd8)(e,t,n);return r?p(e,t,n,"outlyingLists",r.filter((e=>e!==o))):e}function E(e,t,n,o){if(!o.length)return e;const r=(0,d.xd8)(e,t,n);return p(e,t,n,"outlyingLists",(0,i.Ib)(r||[],o))}function P(e,t,n,o,...[a=(0,s._w)()]){const c=(0,d.Cbz)(e,t,n,a)||[];return c.includes(o)?e:m(e,t,n,"viewportIds",(0,i.TO)([...c.length<r.YQ0?c:c.slice(-r.hT6/2),o]),a)}function k(e,t,n,o,...[r=(0,s._w)()]){const c=(0,d.Cbz)(e,t,n,r)||[],u=(0,i.TO)(o);return m(e,t,n,"viewportIds",(0,a.et)(c,u)?c:u,r)}function T(e,t,n,o){const r=(0,d.KBA)(e,t,n)||[],s=(0,i.Fs)(o);return p(e,t,n,"pinnedIds",(0,a.et)(r,s)?r:s)}function M(e,t,n,o,r){const s={...(0,d.tZg)(e,t,n),...o};if(!r){const t=(0,a.ei)(s,["messagesCount","lastMessageId","lastReadInboxMessageId"]);s.isCommentsInfo?s.threadId&&(e=M(e,s.chatId,s.threadId,t,!0)):s.fromChannelId&&s.fromMessageId&&(e=M(e,s.fromChannelId,s.fromMessageId,t,!0))}return p(e,t,n,"threadInfo",s)}function A(e,t){return t.forEach((t=>{e=M(e,t.isCommentsInfo?t.originChannelId:t.chatId,t.isCommentsInfo?t.originMessageId:t.threadId,t)})),e}function L(e,t,n){return function(e,t,n){const o=e.scheduledMessages.byChatId[t]||{byId:{},hash:0};return{...e,scheduledMessages:{byChatId:{...e.scheduledMessages.byChatId,[t]:{...o,...n}}}}}(e,t,{byId:n})}function N({global:e,chatId:t,messageId:n,threadId:r=o._f,noHighlight:a=!1,isResizingContainer:i=!1,quote:u},...[l=(0,s._w)()]){return(0,c.i)(e,{focusedMessage:{...(0,d.jUK)(e,l).focusedMessage,chatId:t,threadId:r,messageId:n,noHighlight:a,isResizingContainer:i,quote:u}},l)}function R(e,t,n){return{...e,messages:{...e.messages,sponsoredByChatId:{...e.messages.sponsoredByChatId,[t]:n}}}}function Z(e,t,...[n=(0,s._w)()]){return(0,c.i)(e,{focusedMessage:{...(0,d.jUK)(e,n).focusedMessage,direction:t}},n)}function D(e,t,n,...[o=(0,s._w)()]){const r=n?Array.prototype.concat([],n):[];return(0,c.i)(e,{selectedMessages:{chatId:t,messageIds:r}},o)}function B(e,t,n,o,r,i,u,l=!1,...[f=(0,s._w)()]){const{selectedMessages:h}=(0,d.jUK)(e,f);i&&(u=(0,d.xHX)(e,t,i));const m=u||[r];if(!h)return D(e,t,m,f);const{messageIds:p}=h;let g;const y=m.filter((e=>!p.includes(e)));if(y&&!y.length)g=p.filter((e=>!m.includes(e)));else if(l&&p.length){const s=(0,d.$Wy)(e,t,n,o,f),i=s.indexOf(p[p.length-1]),c=s.indexOf(r),u=Math.min(i,c),l=Math.max(i,c),h=s.slice(u,l+1);g=(0,a.Tw)([...p,...h])}else g=[...p,...y];return g.length?(0,c.i)(e,{selectedMessages:{...h,messageIds:g}},f):O(e,f)}function O(e,...[t=(0,s._w)()]){return(0,c.i)(e,{selectedMessages:void 0},t)}function x(e,t,n,o,r){const{channelPostId:s,fromChatId:a}=t.forwardInfo||{};if(s&&a){const t=(0,d.tZg)(e,n,s);t&&(e=p(e,n,s,"threadInfo",{...t,lastMessageId:o,messagesCount:(t.messagesCount||0)+(r?-1:1)}))}return e}function _(e,t,...[n=(0,s._w)()]){const o=(0,d.jUK)(e,n),r=o.activeDownloads.byChatId[t.chatId]||{},i=(t.isScheduled?r?.scheduledIds:r?.ids)||[];return(0,c.i)(e,{activeDownloads:{byChatId:{...o.activeDownloads.byChatId,[t.chatId]:{...r,[t.isScheduled?"scheduledIds":"ids"]:(0,a.Tw)([...i,t.id])}}}},n)}function F(e,t,...[n=(0,s._w)()]){const o=(0,d.jUK)(e,n),r=o.activeDownloads.byChatId[t.chatId];if(!r)return e;const a=(t.isScheduled?r.scheduledIds:r.ids)||[];return(0,c.i)(e,{activeDownloads:{byChatId:{...o.activeDownloads.byChatId,[t.chatId]:{...r,[t.isScheduled?"scheduledIds":"ids"]:a.filter((e=>e!==t.id))}}}},n)}},44271:(e,t,n)=>{n.d(t,{i:()=>r});var o=n(65054);function r(e,t,...[n=(0,o._w)()]){return{...e,byTabId:{...e.byTabId,[n]:{...e.byTabId[n],...t}}}}},14342:(e,t,n)=>{n.d(t,{CT:()=>Z,D2:()=>_,DI:()=>T,Ek:()=>E,FM:()=>p,GD:()=>O,J1:()=>B,JR:()=>R,LM:()=>v,Mw:()=>P,N:()=>S,P_:()=>y,RG:()=>u,UW:()=>M,YK:()=>b,Z1:()=>l,_5:()=>A,ep:()=>k,g4:()=>C,lp:()=>x,mZ:()=>h,nA:()=>N,pk:()=>I,t:()=>w,uH:()=>L,x6:()=>f,xo:()=>g,yE:()=>D});var o=n(6137),r=n(83716),s=n(65054),a=n(97184),i=n(4463),d=n(85967),c=n(86087);function u(e,t){return(0,c.dy)(e,t)||l(e,t)}function l(e,t){return e.chats.byId[t]}function f(e,t){return e.chats.fullInfoById[t]}function h(e,t){return(0,i.YC)(t)?(0,c.cc)(e,t):f(e,t)}function m(e,t){const n=(0,i.zX)(t);return!!n&&(0,c.dy)(e,n)}function p(e,t){return t===e.currentUserId}function g(e,t){const n=m(e,t);return n&&(0,i.cS)(n)}function y(e){return Object.values(e.chats.byId).find((({isSupport:e})=>e))}function b(e,t){const n=f(e,t.id);if(!(0,i.YC)(t.id)&&!(0,i.eA)(t)&&n)return n.members&&n.members.length!==r.mok?n.members.reduce(((t,{userId:n})=>!p(e,n)&&e.users.byId[n]&&(0,i.kM)(e.users.byId[n],e.users.statusesById[n])?t+1:t),0):n.onlineCount}function v(e,t){const n=(0,c.dy)(e,t);return n&&(n.isVerified||e.trustedBotIds.includes(t))}function w(e,t){const n=l(e,t);if(n)return(0,c.kB)(e,t)?"bots":m(e,n)?"users":(0,i.eA)(n)?"channels":"chats"}function I(e,t){const n=l(e,t),r=(0,c.kB)(e,t);if(!n||!r)return!1;if(n.lastMessage&&(0,i.CD)(n.lastMessage))return!0;const s=e.messages.byChatId[t];if(!s)return!1;const{listedIds:a}=s.threadsById[o._f]||{};return a&&!a.length}function C(e){return Boolean(e.chats.listIds.active)}function S(e,t,n){const{listIds:o}=e.chats;if(n){const e=o[n];return Boolean(e&&e.includes(t))}return Object.values(o).some((e=>e&&e.includes(t)))}function E(e,t){const n=l(e,t);if(n&&S(e,t))return n.folderId===r.WSp?"archived":"active"}function P(e,t){return e.chatFolders.byId[t]}function k(e,t,n=r.NfV){const{active:o,archived:s}=e.chats.orderedPinnedIds;if(n===r.NfV)return Boolean(o?.includes(t));if(n===r.WSp)return Boolean(s?.includes(t));const{byId:a}=e.chatFolders,{pinnedChatIds:i}=a[n]||{};return Boolean(i?.includes(t))}function T(e,t){const n=t.toLowerCase();return Object.values(e.chats.byId).find((e=>e.usernames?.some((e=>e.username.toLowerCase()===n))))}function M(e){return Boolean(l(e,r.awM))}function A(e,t){if(!l(e,t))return;const n=f(e,t)?.sendAsId;return n?(0,c.dy)(e,n)||l(e,n):void 0}function L(e,t,...[n=(0,s._w)()]){const{requestedDraft:o}=(0,d.j)(e,n);if(o?.chatId===t&&!o.files?.length)return o.text}function N(e,t,...[n=(0,s._w)()]){const{requestedDraft:o}=(0,d.j)(e,n);if(o?.chatId===t)return o.files}function R(e,t,n){return t.filter((t=>{const o=w(e,t);return!!o&&n.includes(o)}))}function Z(e,t){const n=l(e,t);return!!n&&!n.migratedTo&&Boolean(!(0,i.YC)(t)&&((0,i.eA)(n)||(0,i.ZV)(n)?n.isCreator||(0,i.VE)(n,"inviteUsers")||n.usernames?.length&&!n.isJoinRequest:n.isCreator||(0,i.VE)(n,"inviteUsers")))}function D(e,t){const n=P(e,t);if(!n)return!1;const{bots:o,groups:r,channels:s,contacts:a,nonContacts:i,includedChatIds:d,pinnedChatIds:c,excludeArchived:u,excludeMuted:l,excludeRead:f,excludedChatIds:h}=n;return!o&&!r&&!s&&!a&&!i&&!u&&!l&&!f&&!h?.length&&(c?.length||d.length)&&n.includedChatIds.concat(n.pinnedChatIds||[]).some((t=>Z(e,t)))}function B(e,t){if(!l(e,t))return!1;const{canTranslateChats:n}=e.settings.byKey,o=(0,c.wV)(e),r=p(e,t);return a.SX&&n&&o&&!r}function O(e,t,...[n=(0,s._w)()]){const o=l(e,t);if(!o)return!1;if(x(e,t,n))return!0;const r=B(e,t),a=o.detectedLanguage,{doNotTranslate:i}=e.settings.byKey;return Boolean(r&&a&&!i.includes(a))}function x(e,t,...[n=(0,s._w)()]){const{requestedTranslations:o}=(0,d.j)(e,n);return o.byChatId[t]?.toLanguage}function _(e,t){return e.chats.similarChannelsById[t]}},7054:(e,t,n)=>{n.d(t,{JRp:()=>h.JR,f21:()=>De,_kf:()=>Ae,zB_:()=>Z,tHA:()=>D,Ohz:()=>B,g4C:()=>h.g4,kBx:()=>S.kB,FOo:()=>Dt,bHC:()=>Ge,__o:()=>Nt,xlD:()=>Le,nt7:()=>ke,Nue:()=>Re,w9f:()=>Qe,CT6:()=>h.CT,Yo:()=>wt,W9H:()=>Zt,nB8:()=>Ne,Eh5:()=>st,eB8:()=>Gt,yEv:()=>h.yE,GDM:()=>h.GD,VU8:()=>ft,Z1J:()=>h.Z1,DIA:()=>h.DI,MwT:()=>h.Mw,x67:()=>h.x6,EkO:()=>h.Ek,hjO:()=>me,ZBV:()=>ye,Zwk:()=>$,YK0:()=>h.YK,yBV:()=>U,xfm:()=>dt,taM:()=>h.t,X5I:()=>Fe,jrE:()=>j,yNS:()=>k,JXM:()=>Ot,pPq:()=>vt,weG:()=>yt,$Wy:()=>q,Btg:()=>F,y5E:()=>P,n5x:()=>gt,pri:()=>p,EeF:()=>A,iXW:()=>L,q6x:()=>tt,Mst:()=>se,saH:()=>ne,_$9:()=>te,kKD:()=>ge,hI0:()=>re,nBP:()=>oe,yZJ:()=>de,It8:()=>xe,G$N:()=>be,y84:()=>Ue,cve:()=>Ee,GQU:()=>lt,Nm0:()=>it,PGA:()=>x,ku0:()=>Xe,Si0:()=>O,pkN:()=>h.pk,Nap:()=>h.N,epB:()=>h.ep,AmN:()=>Je,xoo:()=>h.xo,FM1:()=>h.FM,QRV:()=>Bt,wVz:()=>S.wV,a65:()=>He,teg:()=>Ze,hqL:()=>Tt,nd:()=>kt,Evo:()=>_e,CAb:()=>je,zQd:()=>Ct,_XY:()=>ve,KAC:()=>fe,EVS:()=>Ye,vkB:()=>$e,oe5:()=>S.oe,Io8:()=>Mt,Jf5:()=>Et,UWV:()=>h.UW,FWZ:()=>N,TuN:()=>g,LM9:()=>h.LM,s4q:()=>S.s4,b9T:()=>he,rB0:()=>Kt,T6o:()=>ee,VFo:()=>qe,gbs:()=>K,aWT:()=>bt,oC7:()=>nt,q_5:()=>at,xHX:()=>Ve,YQi:()=>ht,U1D:()=>pt,HGB:()=>ct,FTG:()=>Ke,tVX:()=>ae,NJL:()=>Wt,dZI:()=>Ht,dTW:()=>we,ofg:()=>G,xd8:()=>z,ehD:()=>_t,kbX:()=>xt,sp9:()=>Ft,RGZ:()=>h.RG,wUq:()=>w,ZEE:()=>v,mZI:()=>h.mZ,nST:()=>y,JrV:()=>b,yf2:()=>At,$Yd:()=>Lt,KBA:()=>J,EBU:()=>$t,$$M:()=>jt,rdT:()=>Oe,BzW:()=>Ce,p9o:()=>ce,lpX:()=>h.lp,nAc:()=>h.nA,uHr:()=>h.uH,Bdn:()=>ut,WqZ:()=>St,qyA:()=>X,TmO:()=>pe,Vtl:()=>Q,D7c:()=>We,_5C:()=>h._5,Urc:()=>Ie,zDD:()=>Se,J1l:()=>h.J1,yBd:()=>Rt,AqB:()=>rt,D2x:()=>h.D2,Jg1:()=>Vt,fSe:()=>et,aT_:()=>It,Ny0:()=>T,PkN:()=>M,tWo:()=>I,i31:()=>Ut,P_p:()=>h.P_,jUK:()=>m.j,Puy:()=>Pt,cii:()=>W,DbP:()=>le,nrh:()=>Te,tZg:()=>ie,xxG:()=>ue,WPz:()=>H,p$s:()=>Me,Pn:()=>mt,Mc4:()=>zt,uZE:()=>Be,dyD:()=>S.dy,Bki:()=>S.Bk,ccz:()=>S.cc,ssc:()=>S.ss,Cbz:()=>Y,P2Q:()=>ot});var o=n(91713),r=n(65054),s=n(4463),a=n(6137),i=n(83716),d=n(60782),c=n(70735),u=n(82267),l=n(97184),f=n(26646),h=n(14342),m=n(85967);function p(e,...[t=(0,r._w)()]){const{storyViewer:{peerId:n,storyId:o}}=(0,m.j)(e,t);return{peerId:n,storyId:o}}function g(e,...[t=(0,r._w)()]){const{peerId:n,storyId:o}=p(e,t);return Boolean(n)&&Boolean(o)}function y(e,t){return e.stories.byPeerId[t]}function b(e,t,n){return y(e,t)?.byId[n]}function v(e,t){const n=y(e,t);if(!n)return;if(!n.lastReadId)return n.orderedIds?.[0];const o=n.orderedIds.findIndex((e=>e===n.lastReadId));return n.orderedIds?.[o+1]}function w(e,t){return y(e,t)?.orderedIds?.[0]}function I(e,t,n,o,r,s,a){const i=n||v(e,t)||w(e,t);if(!i)return;if(o)return{peerIds:[t],storyIdsByPeerId:{[t]:[i]}};const d=(0,h.RG)(e,t),c=b(e,t,i);if(!d||!c)return;const u=(e.stories.byPeerId[t].lastReadId||0)<c.id;if(r){const n=C(e,t,u,a,s);return n?.length?{peerIds:[t],storyIdsByPeerId:{[t]:n}}:void 0}const{orderedPeerIds:{active:l,archived:f}}=e.stories,m=(d.areStoriesHidden?f:l)??[],p=[],g={};for(const t of m){const n=C(e,t,u,a,s);n?.length&&(p.push(t),g[t]=n)}return p.length?{peerIds:p,storyIdsByPeerId:g}:void 0}function C(e,t,n,o,r){const s=y(e,t),a=o?"archiveIds":r?"pinnedIds":"orderedIds",i=s?.[a];if(!s||!i?.length)return;if(!s.lastReadId||!n)return i.slice();const d=i.indexOf(s.lastReadId);return i.length>d+1?i.slice(d+1):void 0}var S=n(86087);const E={1:"1️⃣",3:"2️⃣",6:"3️⃣",12:"4️⃣",24:"5️⃣"};function P(e,...[t=(0,r._w)()]){return(0,m.j)(e,t).stickerSearch}function k(e,...[t=(0,r._w)()]){return(0,m.j)(e,t).gifSearch}function T(e,t){return"string"==typeof t?e.stickers.setsById[t]:"id"in t?e.stickers.setsById[t.id]:"isMissing"in t?void 0:Object.values(e.stickers.setsById).find((({shortName:e})=>e.toLowerCase()===t.shortName.toLowerCase()))}function M(e,t){const n=e.stickers.added.setIds;let o=[];return e.stickers.favorite.stickers.forEach((e=>{e.emoji===t&&o.push(e)})),n?.forEach((n=>{const r=e.stickers.setsById[n].packs;r&&(o=o.concat(r[t]||[],r[R(t)]||[]))})),o}function A(e,t){const n=(0,S.wV)(e),o=e.customEmojis.added.setIds;let r=[];return o?.forEach((n=>{const o=e.stickers.setsById[n].packs;o&&(r=r.concat(o[t]||[],o[R(t)]||[]))})),n?r:r.filter((({isFree:e})=>e))}function L(e,t){const n=(0,S.wV)(e),o=e.customEmojis.added.setIds;let r=[];return o?.forEach((n=>{const o=e.stickers.setsById[n].packs;if(!o)return;const s=Object.entries(o).filter((([e])=>t.includes(e)||t.includes(R(e)))).flatMap((([,e])=>e));r=r.concat(s)})),n?r:r.filter((({isFree:e})=>e))}function N(e){return e.isEmoji&&e.stickers?.some((e=>!e.isFree))}function R(e){return e.replace("️","")}function Z(e,t){const{animatedEmojis:n}=e;if(!n||!n.stickers)return;const o=R(t);return n.stickers.find((e=>e.emoji===t||e.emoji===o))}function D(e,t){const{animatedEmojiEffects:n}=e;if(!n||!n.stickers)return;const o=R(t);return n.stickers.find((e=>e.emoji===t||e.emoji===o))}function B(e,t){return e?.appConfig?.emojiSounds[R(t)]}function O(e,t){return"id"in t&&(t.id===e.appConfig?.defaultEmojiStatusesStickerSetId||t.id===i.PZg)}function x(e,t=1){const n=e.premiumGifts?.stickers;if(!n)return;const o=E[t];return n.find((e=>e.emoji===o))||n[0]}const _=172800;function F(e,...[t=(0,r._w)()]){const{messageLists:n}=(0,m.j)(e,t);if(n.length)return n[n.length-1]}function j(e,...[t=(0,r._w)()]){const{chatId:n}=F(e,t)||{};return n?(0,h.Z1)(e,n):void 0}function $(e,t){return e.messages.byChatId[t]?.byId}function U(e,t){return e.scheduledMessages.byChatId[t]?.byId}function V(e,t,n,o,...[s=(0,r._w)()]){return(0,m.j)(e,s).tabThreads[t]?.[n]?.[o]}function H(e,t,n,o){return W(e,t,n)?.[o]}function W(e,t,n){const o=e.messages.byChatId[t];if(!o)return;return o.threadsById[n]||void 0}function K(e,t,n){return H(e,t,n,"listedIds")}function G(e,t,n,o){const r=z(e,t,n);if(r)return r.find((e=>e[0]<=o&&e[e.length-1]>=o))}function z(e,t,n){return H(e,t,n,"outlyingLists")}function q(e,t,n,o,...[s=(0,r._w)()]){switch(o){case"thread":return Y(e,t,n,s);case"pinned