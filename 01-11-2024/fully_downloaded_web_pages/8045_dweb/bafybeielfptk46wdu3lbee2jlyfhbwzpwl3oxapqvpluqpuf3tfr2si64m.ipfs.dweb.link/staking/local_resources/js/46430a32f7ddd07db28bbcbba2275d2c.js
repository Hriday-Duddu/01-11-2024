"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9388],{89388:function(e,t,n){n.r(t),n.d(t,{StakeModal:function(){return G}});var r=n(67294),o=n(8195),a=n(31959),i=n(49501),s=n(75331),c=n(1279),u=n(29630),l=n(77912),d=n(60265),p=n(77537),m=n(78371),v=n(84568),k=n(63206),x=n(57609),f=n(54401),b=n(53601),g=n(63491),h=n(67916),j=n(93608),y=n(57824),N=n(78944),T=n(10343),O=n(59499),S=n(50029),A=n(4730),w=n(87794),E=n.n(w),P=n(89291),C=n(67489),_=n(85893),I=["amountToStake","isWrongNetwork","sx","symbol","blocked","selectedToken","event"];function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var U,W=function(e){var t=e.amountToStake,n=e.isWrongNetwork,r=e.sx,o=e.symbol,a=e.blocked,c=e.selectedToken,u=(e.event,(0,A.Z)(e,I)),l=(0,m.Y)(),d=l.stake,p=l.stakeWithPermit,v=c!==s.hj.bpt,k=(0,P.Q)({tryPermit:v,permitAction:s.UQ.stakeWithPermit,protocolAction:s.UQ.stake,handleGetTxns:function(){var e=(0,S.Z)(E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d({token:c,amount:t.toString()}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),handleGetPermitTxns:function(){var e=(0,S.Z)(E().mark((function e(n,r){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p({token:c,amount:t.toString(),signature:n[0],deadline:r}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),eventTxInfo:{amount:t,assetName:c},skip:!t||0===parseFloat(t)||a,deps:[t,c]}),x=k.action,f=k.approval,b=k.requiresApproval,g=k.loadingTxns,h=k.approvalTxState,j=k.mainTxState;return(0,_.jsx)(C.B,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){(0,O.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({requiresApproval:b,preparingTransactions:g,mainTxState:j,approvalTxState:h,isWrongNetwork:n,amount:t,handleAction:x,handleApproval:function(){return f([{amount:t,underlyingAsset:c,permitType:"STAKE"}])},symbol:o,requiresAmount:!0,actionText:(0,_.jsx)(i.cC,{id:"Stake"}),tryPermit:v,actionInProgressText:(0,_.jsx)(i.cC,{id:"Staking"}),sx:r},u))};!function(e){e[e.NOT_ENOUGH_BALANCE=0]="NOT_ENOUGH_BALANCE"}(U||(U={}));var B=function(e){var t=e.stakeAssetName,n=e.icon,a=(0,p.Z)(),O=a.chainId,S=a.readOnlyModeAddress,A=(0,o.vR)(),w=A.gasLimit,E=A.mainTxState,P=A.txError,C=(0,m.Y)((function(e){return e.currentMarketData})),I=(0,m.Y)((function(e){return e.currentNetworkConfig})),D=(0,m.Y)((function(e){return e.currentChainId})),B=(0,d.f)(C,t).data,G=(0,l.I)(C,t).data,L=null===G||void 0===G?void 0:G[0],M=null===B||void 0===B?void 0:B[0],Z=(0,r.useState)(""),F=Z[0],Q=Z[1],R=(0,r.useRef)(),H=(0,c.Fv)((null===M||void 0===M?void 0:M.underlyingTokenUserBalance)||"0",18),Y="-1"===F,q=Y?H:F,K=Number(q)*Number(null===L||void 0===L?void 0:L.stakeTokenPriceUSDFormatted),V=void 0;(0,c.hE)(q).gt(H)&&(V=U.NOT_ENOUGH_BALANCE);var X=(0,v.Q)(t),$=I.isFork&&I.underlyingChainId===v.X.chainId?D:v.X.chainId,z=O!==$,J=(0,k.Mo)($);return P&&P.blocking?(0,_.jsx)(g.D,{txError:P}):E.success?(0,_.jsx)(j.R,{action:(0,_.jsx)(i.cC,{id:"Staked"}),amount:R.current,symbol:X}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(N.E,{title:"Stake",symbol:X}),z&&!S&&(0,_.jsx)(T.I,{networkName:J.name,chainId:$,funnel:"Stake Modal"}),(0,_.jsx)(f.$,{}),(0,_.jsx)(b.W,{value:q,onChange:function(e){var t="-1"===e;R.current=t?H:e,Q(e)},usdValue:K.toString(),symbol:X,assets:[{balance:H.toString(),symbol:n}],isMaxSelected:Y,maxValue:H.toString(),balanceText:(0,_.jsx)(i.cC,{id:"Wallet balance"})}),void 0!==V&&(0,_.jsx)(u.Z,{variant:"helperText",color:"red",children:V===U.NOT_ENOUGH_BALANCE?(0,_.jsx)(i.cC,{id:"Not enough balance on your wallet"}):null}),(0,_.jsx)(y.m6,{gasLimit:w,chainId:s.a_.mainnet,children:(0,_.jsx)(y.oD,{description:(0,_.jsx)(i.cC,{id:"Staking APR"}),value:Number((null===L||void 0===L?void 0:L.stakeApy)||"0")/1e4,percent:!0})}),P&&(0,_.jsx)(h.Q,{txError:P}),(0,_.jsx)(W,{sx:{mt:"48px"},amountToStake:q,isWrongNetwork:z,symbol:X,blocked:void 0!==V,selectedToken:t,event:x.so.STAKE_TOKEN})]})},G=function(){var e=(0,o.vR)(),t=e.type,n=e.close,r=e.args;return(0,_.jsx)(a.P,{open:t===o.w8.Stake,setOpen:n,children:(null===r||void 0===r?void 0:r.icon)&&(null===r||void 0===r?void 0:r.stakeAssetName)&&(0,_.jsx)(B,{icon:r.icon,stakeAssetName:r.stakeAssetName})})}}}]);