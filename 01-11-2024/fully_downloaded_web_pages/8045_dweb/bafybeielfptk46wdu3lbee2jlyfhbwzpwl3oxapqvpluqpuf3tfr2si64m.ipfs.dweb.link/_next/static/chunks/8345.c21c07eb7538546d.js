"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8345],{58345:function(e,t,n){n.r(t),n.d(t,{StakeRewardClaimRestakeModal:function(){return U}});var r=n(67294),o=n(8195),a=n(31959),s=n(49501),i=n(75331),c=n(1279),l=n(29630),u=n(54401),d=n(77912),m=n(60265),v=n(77537),k=n(78371),p=n(84568),x=n(63206),b=n(53601),f=n(63491),j=n(67916),N=n(93608),g=n(57824),y=n(78944),O=n(10343),A=n(59499),h=n(50029),w=n(4730),T=n(87794),C=n.n(T),E=n(89291),S=n(67489),R=n(85893),P=["amountToClaim","isWrongNetwork","sx","symbol","blocked","selectedToken"];function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var I,D=function(e){var t=e.amountToClaim,n=e.isWrongNetwork,r=e.sx,o=e.symbol,a=e.blocked,c=e.selectedToken,l=(0,w.Z)(e,P),u=(0,k.Y)((function(e){return e.claimRewardsAndStake})),d=(0,E.Q)({tryPermit:!1,handleGetTxns:function(){var e=(0,h.Z)(C().mark((function e(){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u({token:c,amount:t}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),protocolAction:i.UQ.claimRewardsAndStake,eventTxInfo:{amount:t,assetName:c},skip:!t||0===parseFloat(t)||a,deps:[t]}),m=d.action,v=d.loadingTxns,p=d.mainTxState,x=d.requiresApproval;return(0,R.jsx)(S.B,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,A.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({requiresApproval:x,blocked:a,preparingTransactions:v,handleAction:m,actionText:(0,R.jsx)(s.cC,{id:"Restake {symbol}",values:{symbol:o}}),actionInProgressText:(0,R.jsx)(s.cC,{id:"Restaking {symbol}",values:{symbol:o}}),mainTxState:p,isWrongNetwork:n,sx:r},l))};!function(e){e[e.NOT_ENOUGH_BALANCE=0]="NOT_ENOUGH_BALANCE"}(I||(I={}));var L=function(e){var t=e.stakeAssetName,n=e.icon,a=(0,v.Z)(),A=a.chainId,h=a.readOnlyModeAddress,w=(0,o.vR)(),T=w.gasLimit,C=w.mainTxState,E=w.txError,S=(0,k.Y)((function(e){return e.currentMarketData})),P=(0,k.Y)((function(e){return e.currentNetworkConfig})),_=(0,k.Y)((function(e){return e.currentChainId})),L=(0,m.f)(S,t).data,U=(0,d.I)(S,t).data,B=null===U||void 0===U?void 0:U[0],F=null===L||void 0===L?void 0:L[0],G="AAVE",M=(0,r.useState)(""),W=M[0],Z=M[1],H=(0,r.useRef)(),V=(0,c.Fv)((null===F||void 0===F?void 0:F.userIncentivesToClaim)||"0",18),Y="-1"===W,Q=Y?V:W,q=Number(V)*Number(null===B||void 0===B?void 0:B.stakeTokenPriceUSDFormatted),X=void 0;"0"===V&&(X=I.NOT_ENOUGH_BALANCE);var $=P.isFork&&P.underlyingChainId===p.X.chainId?_:p.X.chainId,z=A!==$,J=(0,x.Mo)($);return E&&E.blocking?(0,R.jsx)(f.D,{txError:E}):C.success?(0,R.jsx)(N.R,{action:(0,R.jsx)(s.cC,{id:"Restaked"}),amount:H.current,symbol:G}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(y.E,{title:"Restake AAVE rewards"}),z&&!h&&(0,R.jsx)(O.I,{networkName:J.name,chainId:$}),(0,R.jsx)(u.$,{}),(0,R.jsx)(b.W,{value:Q,onChange:function(e){var t="-1"===e;H.current=t?V:e,Z(e)},usdValue:q.toString(),symbol:n,assets:[{balance:V.toString(),symbol:n}],isMaxSelected:Y,maxValue:V.toString(),balanceText:(0,R.jsx)(s.cC,{id:"Amount claimable"})}),void 0!==X&&(0,R.jsx)(l.Z,{variant:"helperText",color:"red",children:X===I.NOT_ENOUGH_BALANCE?(0,R.jsx)(s.cC,{id:"No rewards to claim"}):null}),(0,R.jsx)(g.m6,{gasLimit:T,chainId:i.a_.mainnet,children:(0,R.jsx)(g.oD,{description:(0,R.jsx)(s.cC,{id:"Staking APR"}),value:Number((null===B||void 0===B?void 0:B.stakeApy)||"0")/1e4,percent:!0})}),E&&(0,R.jsx)(j.Q,{txError:E}),(0,R.jsx)(D,{sx:{mt:"48px"},amountToClaim:Q,isWrongNetwork:z,symbol:G,blocked:void 0!==X||0===Number(Q),selectedToken:t})]})},U=function(){var e=(0,o.vR)(),t=e.type,n=e.close,r=e.args;return(0,R.jsx)(a.P,{open:t===o.w8.StakeRewardsClaimRestake,setOpen:n,children:(null===r||void 0===r?void 0:r.icon)&&(null===r||void 0===r?void 0:r.stakeAssetName)&&(0,R.jsx)(L,{stakeAssetName:r.stakeAssetName,icon:r.icon})})}}}]);